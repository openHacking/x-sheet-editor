!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=6)}([function(t,e,n){t.exports=n.p+"c4ab8001e109540f7ae6a34181d695d3.png"},function(t,e,n){t.exports=n.p+"42b436e7c64603182355d52d31ea49f1.png"},function(t,e,n){t.exports=n.p+"9dfd8685ea7e1e5c025514eec46a4547.png"},function(t,e,n){var r,o,i;o=[],void 0===(i="function"==typeof(r=function(){return function t(e,n,r){var o,i,c=window,l="application/octet-stream",a=r||l,s=e,u=!n&&!r&&s,f=document.createElement("a"),h=function(t){return String(t)},p=c.Blob||c.MozBlob||c.WebKitBlob||h,y=n||"download";if(p=p.call?p.bind(c):Blob,"true"===String(this)&&(a=(s=[s,a])[0],s=s[1]),u&&u.length<2048&&(y=u.split("/").pop().split("?")[0],f.href=u,-1!==f.href.indexOf(u))){var b=new XMLHttpRequest;return b.open("GET",u,!0),b.responseType="blob",b.onload=function(e){t(e.target.response,y,l)},setTimeout((function(){b.send()}),0),b}if(/^data\:[\w+\-]+\/[\w+\-]+[,;]/.test(s)){if(!(s.length>2096103.424&&p!==h))return navigator.msSaveBlob?navigator.msSaveBlob(d(s),y):v(s);a=(s=d(s)).type||l}function d(t){for(var e=t.split(/[:;,]/),n=e[1],r=("base64"==e[2]?atob:decodeURIComponent)(e.pop()),o=r.length,i=0,c=new Uint8Array(o);i<o;++i)c[i]=r.charCodeAt(i);return new p([c],{type:n})}function v(t,e){if("download"in f)return f.href=t,f.setAttribute("download",y),f.className="download-js-link",f.innerHTML="downloading...",f.style.display="none",document.body.appendChild(f),setTimeout((function(){f.click(),document.body.removeChild(f),!0===e&&setTimeout((function(){c.URL.revokeObjectURL(f.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return t=t.replace(/^data:([\w\/\-\+]+)/,l),window.open(t)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=t),!0;var n=document.createElement("iframe");document.body.appendChild(n),e||(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,l)),n.src=t,setTimeout((function(){document.body.removeChild(n)}),333)}if(o=s instanceof p?s:new p([s],{type:a}),navigator.msSaveBlob)return navigator.msSaveBlob(o,y);if(c.URL)v(c.URL.createObjectURL(o),!0);else{if("string"==typeof o||o.constructor===h)try{return v("data:"+a+";base64,"+c.btoa(o))}catch(t){return v("data:"+a+","+encodeURIComponent(o))}(i=new FileReader).onload=function(t){v(this.result)},i.readAsDataURL(o)}return!0}})?r.apply(e,o):r)||(t.exports=i)},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var r={};r.SYSTEM_EVENT_TYPE={MOUSE_MOVE:"mouseMove".toLocaleLowerCase(),MOUSE_DOWN:"mouseDown".toLocaleLowerCase(),MOUSE_UP:"mouseUp".toLocaleLowerCase(),MOUSE_OVER:"mouseOver".toLocaleLowerCase(),MOUSE_LEAVE:"mouseLeave".toLocaleLowerCase(),MOUSE_WHEEL:"mouseWheel".toLocaleLowerCase(),MOUSE_ENTER:"mouseEnter".toLocaleLowerCase(),CLICK:"click".toLocaleLowerCase(),KEY_DOWN:"keyDown".toLocaleLowerCase(),KEY_UP:"keyUp".toLocaleLowerCase(),DRAG_START:"dragStart".toLocaleLowerCase(),SCROLL:"scroll".toLocaleLowerCase(),RESIZE:"resize".toLocaleLowerCase(),CHANGE:"change".toLocaleLowerCase(),INPUT:"input".toLocaleLowerCase(),VISIBILITY_CHANGE:"visibilityChange".toLocaleLowerCase()},r.TABLE_EVENT_TYPE={CHANGE_HEIGHT:"tableChangeHeight".toLocaleLowerCase(),CHANGE_WIDTH:"tableChangeWidth".toLocaleLowerCase(),DATA_CHANGE:"tableDataChange".toLocaleLowerCase(),SELECT_CHANGE:"tableSelectChange".toLocaleLowerCase(),SELECT_DOWN:"tableSelectDown".toLocaleLowerCase(),SELECT_OVER:"tableSelectOver".toLocaleLowerCase(),SCALE_CHANGE:"scaleChange".toLocaleLowerCase()},r.WORK_BODY_EVENT_TYPE={CHANGE_ACTIVE:"workBodyChangeActive".toLocaleLowerCase()};var o="x-sheet",i="X-Sheet 1.0.0-develop";function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var c,l=t[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(){return(65536*(1+Math.random())|0).toString(16).substring(1)}var u=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],f=1,h=2,p=3,y=5,b=6,d=7,v=8,g=9,w=10,m=11,O=12,T=13,E=14,S=null,_=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,n=null,r=[{key:"type",value:function(t){var e=Object.prototype.toString.call(t);switch(e){case"[object Null]":return d;case"[object Undefined]":return v;case"[object String]":return f;case"[object Boolean]":return h;case"[object Number]":return p;case"[object Function]":return b;case"[object Array]":return y;case"[object Promise]":return g;case"[object GeneratorFunction]":return w;case"[object AsyncFunction]":return m;case"[object BigInt]":return O;case"[object Symbol]":return T;default:return E}}},{key:"cloneDeep",value:function(t){var e=JSON.stringify(t);return JSON.parse(e)}},{key:"mergeDeep",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isUnDef(e))return{};for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t.isUnDef(r)||0===r.length?e:(r.forEach((function(n){t.isUnDef(n)||Object.keys(n).forEach((function(r){var o=n[r];"string"==typeof o||"number"==typeof o||"boolean"==typeof o?e[r]=o:"function"!=typeof o&&!Array.isArray(o)&&t.isPlainObject(o)?(e[r]=e[r]||{},t.mergeDeep(e[r],o)):e[r]=o}))})),e)}},{key:"copyProp",value:function(t,e){return Object.assign(t,e)}},{key:"isMac",value:function(){return/macintosh|mac os x/i.test(navigator.userAgent)}},{key:"isWindows",value:function(){return/windows|win32/i.test(navigator.userAgent)}},{key:"isEmptyObject",value:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}},{key:"isNotEmptyObject",value:function(e){return!t.isEmptyObject(e)}},{key:"isUnDef",value:function(t){return null==t}},{key:"isNotUnDef",value:function(t){return!this.isUnDef(t)}},{key:"isNotZero",value:function(t){return 0!==t}},{key:"isNumber",value:function(t){return/^(-?\d+.\d+)$|^(-?\d+)$/.test(t)}},{key:"isFraction",value:function(t){return/^\d+\/\d+$/.test(t)}},{key:"isFunction",value:function(e){return t.type(e)===b}},{key:"isArray",value:function(e){return t.type(e)===y}},{key:"isBlank",value:function(e){return!!t.isUnDef(e)||""===e.toString().trim()}},{key:"isPlainObject",value:function(e){return!t.isUnDef(e)&&Object.getPrototypeOf(e)===Object.getPrototypeOf({})}},{key:"isString",value:function(e){return t.type(e)===f}},{key:"sum",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t},n=0,r=0;return Object.keys(t).forEach((function(o){n+=e(t[o],o),r+=1})),[n,r]}},{key:"rangeSum",value:function(t,e,n){for(var r=0,o=t;o<e;o+=1)r+=n(o);return r}},{key:"parseFloat",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(e){return t.isNumber(e)?parseFloat(e):0}))},{key:"parseInt",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(e){return t.isNumber(e)?parseInt(e,10):0}))},{key:"stringAt",value:function(t){for(var e="",n=t;n>=u.length;)n/=u.length,n-=1,e+=u[parseInt(n,10)%u.length];return e+=u[t%u.length]}},{key:"indexAt",value:function(t){for(var e=0,n=0;n<t.length-1;n+=1){var r=t.charCodeAt(n)-65,o=t.length-1-n;e+=Math.pow(u.length,o)+u.length*r}return e+=t.charCodeAt(t.length-1)-65}},{key:"expr2xy",value:function(e){for(var n="",r="",o=0;o<e.length;o+=1)e.charAt(o)>="0"&&e.charAt(o)<="9"?r+=e.charAt(o):n+=e.charAt(o);return[t.indexAt(n),parseInt(r,10)-1]}},{key:"xy2expr",value:function(e,n){return"".concat(t.stringAt(e)).concat(n+1)}},{key:"expr2expr",value:function(e,n,r){var o=l(t.expr2xy(e),2),i=o[0],c=o[1];return t.xy2expr(i+n,c+r)}},{key:"rangeReduceIf",value:function(t,e,n,r,o,i){for(var c=n,l=r,a=t;a<e&&!(c>=o);a+=1)c+=l=i(a);return[a,c-l,l]}},{key:"throttle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;S&&clearTimeout(S),S=setTimeout(t,e)}},{key:"contrastDifference",value:function(e,n){var r={};if(t.isUnDef(e)||t.isUnDef(n))return r;for(var o in e)if(e.hasOwnProperty(o)){var i=n[o],c=e[o];t.isUnDef(i)||t.isUnDef(c)||t.equal(i,c)||(r[o]=e[o])}return r}},{key:"minIf",value:function(t,e){return t<e?e:t}},{key:"maxIf",value:function(t,e){return t>e?e:t}},{key:"equal",value:function(t,e){var n,r,o,i;function l(t,e){var n;if(isNaN(t)&&isNaN(e)&&"number"==typeof t&&"number"==typeof e)return!0;if(t===e)return!0;if("function"==typeof t&&"function"==typeof e||t instanceof Date&&e instanceof Date||t instanceof RegExp&&e instanceof RegExp||t instanceof String&&e instanceof String||t instanceof Number&&e instanceof Number)return t.toString()===e.toString();if(!(t instanceof Object&&e instanceof Object))return!1;if(t.isPrototypeOf(e)||e.isPrototypeOf(t))return!1;if(t.constructor!==e.constructor)return!1;if(t.prototype!==e.prototype)return!1;if(o.indexOf(t)>-1||i.indexOf(e)>-1)return!1;for(n in e){if(e.hasOwnProperty(n)!==t.hasOwnProperty(n))return!1;if(c(e[n])!==c(t[n]))return!1}for(n in t){if(e.hasOwnProperty(n)!==t.hasOwnProperty(n))return!1;if(c(e[n])!==c(t[n]))return!1;switch(c(t[n])){case"object":case"function":if(o.push(t),i.push(e),!l(t[n],e[n]))return!1;o.pop(),i.pop();break;default:if(t[n]!==e[n])return!1}}return!0}if(arguments.length<1)return!0;for(n=1,r=arguments.length;n<r;n++)if(o=[],i=[],!l(arguments[0],arguments[n]))return!1;return!0}},{key:"arrayIncludeArray",value:function(e,n){if(t.isUnDef(e)||t.isUnDef(n))return!1;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r+=1)if(-1===n.indexOf(e[r]))return!1;return!0}},{key:"keepLastIndex",value:function(t){if(window.getSelection){t.focus();var e=window.getSelection();e.selectAllChildren(t),e.collapseToEnd()}else if(document.selection){var n=document.selection.createRange();n.moveToElementText(t),n.collapse(!1),n.select()}}},{key:"trim",value:function(t){return this.isBlank(t)?"":t.trim()}},{key:"now",value:function(){return Date.now().toString()}},{key:"viewPort",value:function(){return{width:window.innerWidth,height:window.innerHeight}}},{key:"exitFullscreen",value:function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}},{key:"fullScreen",value:function(t){t.el&&(t=t.el),t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}},{key:"isFull",value:function(){return!!(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)}},{key:"uuid",value:function(){return"".concat(s()+s()).concat(s()).concat(s()).concat(s()).concat(s()).concat(s()).concat(s())}},{key:"autoData",value:function(t,e,n){for(var r=[],o=0;o<t;o+=1){for(var i=[],c=0;c<t;c+=1)i.push("".concat(o,"行").concat(c,"列").concat(n));r.push(i)}return r}}],n&&a(e.prototype,n),r&&a(e,r),t}();function x(t){return function(t){if(Array.isArray(t))return t}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}_.EMPTY="",_.Nul=null,_.Undef=void 0;var C=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof e?(this.el=document.createElement(e),this.el.className=n):this.el=e,this.el.data=[]}var e,n,r;return e=t,(n=[{key:"data",value:function(t,e){return void 0!==e?(this.el.data[t]=e,this):this.el.data[t]}},{key:"on",value:function(t,e){var n=x(t.split(".")),r=n[0],o=n.slice(1),i=r;return"mousewheel"===i&&/Firefox/i.test(window.navigator.userAgent)&&(i="DOMMouseScroll"),this.el.addEventListener(i,(function(t){e(t);for(var n=0;n<o.length;n+=1){var r=o[n];if("left"===r&&0!==t.button)return;if("right"===r&&2!==t.button)return;"stop"===r&&t.stopPropagation()}})),this}},{key:"offset",value:function(t){var e=this;if(void 0!==t)return Object.keys(t).forEach((function(n){e.css(n,"".concat(t[n],"px"))})),this;var n=this.el;return{top:n.offsetTop,left:n.offsetLeft,height:n.offsetHeight,width:n.offsetWidth}}},{key:"scroll",value:function(t){var e=this.el;return void 0!==t&&(void 0!==t.left&&(e.scrollLeft=t.left),void 0!==t.top&&(e.scrollTop=t.top)),{left:e.scrollLeft,top:e.scrollTop}}},{key:"scrollTop",value:function(){return this.el.scrollTop}},{key:"clientHeight",value:function(){return this.el.clientHeight}},{key:"box",value:function(){return this.el.getBoundingClientRect()}},{key:"parent",value:function(){return new t(this.el.parentNode)}},{key:"children",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 0===arguments.length?this.el.childNodes:(n.forEach((function(e){return t.child(e)})),this)}},{key:"first",value:function(){return this.el.firstChild}},{key:"last",value:function(){return this.el.lastChild}},{key:"remove",value:function(t){return this.el.removeChild(t.el||t)}},{key:"prepend",value:function(t){var e=this.el;return e.children.length>0?e.insertBefore(t,e.firstChild):e.appendChild(t),this}},{key:"prev",value:function(){return this.el.previousSibling}},{key:"next",value:function(){return this.el.nextSibling}},{key:"child",value:function(e){var n=e;return"string"==typeof e?n=document.createTextNode(e):e instanceof t&&(n=e.el),this.el.appendChild(n),this}},{key:"contains",value:function(t){return this.el.contains(t)}},{key:"className",value:function(t){return void 0!==t?(this.el.className=t,this):this.el.className}},{key:"addClass",value:function(t){return this.el.classList.add(t),this}},{key:"hasClass",value:function(t){return this.el.classList.contains(t)}},{key:"removeClass",value:function(t){return this.el.classList.remove(t),this}},{key:"toggle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"active";return this.toggleClass(t)}},{key:"toggleClass",value:function(t){return this.el.classList.toggle(t)}},{key:"active",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"active";return t?this.addClass(e):this.removeClass(e),this}},{key:"checked",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.active(t,"checked"),this}},{key:"disabled",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t?this.addClass("disabled"):this.removeClass("disabled"),this}},{key:"attr",value:function(t,e){var n=this;if(void 0!==e)this.el.setAttribute(t,e);else{if("string"==typeof t)return this.el.getAttribute(t);Object.keys(t).forEach((function(e){n.el.setAttribute(e,t[e])}))}return this}},{key:"removeAttr",value:function(t){return this.el.removeAttribute(t),this}},{key:"html",value:function(t){return void 0!==t?(this.el.innerHTML=t,this):this.el.innerHTML}},{key:"val",value:function(t){return void 0!==t?(this.el.value=t,this):this.el.value}},{key:"cssRemoveKeys",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach((function(e){return t.el.style.removeProperty(e)})),this}},{key:"css",value:function(t,e){var n=this;return void 0===e&&"string"!=typeof t?(Object.keys(t).forEach((function(e){n.el.style[e]=t[e]})),this):void 0!==e?(this.el.style[t]=e,this):this.el.style[t]}},{key:"computedStyle",value:function(){return window.getComputedStyle(this.el,null)}},{key:"show",value:function(){var t=this.computedStyle();return t&&"block"!==t.display&&this.css("display","block"),this}},{key:"hide",value:function(){var t=this.computedStyle();return t&&"none"!==t.display&&this.css("display","none"),this}},{key:"display",value:function(t){t?this.show():this.hide()}},{key:"text",value:function(t){return void 0===t?this.el.innerText:(this.el.innerText=t,t)}},{key:"sibling",value:function(){for(var e=this.el,n=[];null!==(e=e.previousElementSibling);)n.push(new t(e));for(e=this.el;null!==(e=e.nextElementSibling);)n.push(new t(e));return n}},{key:"position",value:function(){var t=0,e=0;return this.el.style.position&&(this.el.top&&(t=this.el.style.top.replace("%","").repeat("px","")),this.el.left&&(e=this.el.style.left.replace("%","").repeat("px","")),this.el.right&&(t=this.el.style.right.replace("%","").repeat("px","")),this.el.bottom&&(t=this.el.style.bottom.replace("%","").repeat("px",""))),{top:_.parseFloat(t),left:_.parseFloat(e),right:_.parseFloat(0),bottom:_.parseFloat(0)}}},{key:"trigger",value:function(t,e){var n=new CustomEvent(t,{detail:e,bubbles:!0,cancelable:!1});this.el.dispatchEvent(n)}},{key:"focus",value:function(){this.el.focus()}},{key:"find",value:function(e){var n=this.el.querySelectorAll(e);if(n&&1===n.length)return new t(n[0]);var r=[];if(n){var o=!0,i=!1,c=void 0;try{for(var l,a=n[Symbol.iterator]();!(o=(l=a.next()).done);o=!0){var s=l.value;r.push(new t(s))}}catch(t){i=!0,c=t}finally{try{o||null==a.return||a.return()}finally{if(i)throw c}}}return r}},{key:"isChild",value:function(t){for(var e=t||t.el;null!=e&&e!==document.body;){if(e===this.el)return!0;e=e.parentNode}return!1}}])&&k(e.prototype,n),r&&k(e,r),t}(),P=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new C(t,e)};function L(t){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function A(t,e){return!e||"object"!==L(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function N(t){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function R(t,e){return(R=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var I=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),A(this,N(e).call(this,n,"".concat(o,"-widget ").concat(t)))}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&R(t,e)}(e,t),n=e,(r=[{key:"computeEventXy",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n=e.box(),r=n.top,o=n.left;return{x:t.pageX-o,y:t.pageY-r}}},{key:"computeWidgetXy",value:function(t){if(!t)return{x:0,y:0};var e=t.box(),n=e.top,r=e.left,o=this.box(),i=o.top;return{x:r-o.left,y:n-i}}},{key:"attach",value:function(t){this.children(t),t.onAttach(this)}},{key:"onAttach",value:function(){}}])&&j(n.prototype,r),i&&j(n,i),e}(C);function V(t){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function D(t,e){return!e||"object"!==V(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function H(t){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function M(t,e){return(M=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var W=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),D(this,H(e).call(this,"".concat(o,"-layer ").concat(t)))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&M(t,e)}(e,t),e}(I);function B(t){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y(t,e){return!e||"object"!==B(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function G(t){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function U(t,e){return(U=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var z=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Y(this,G(e).call(this,"".concat(o,"-vertical-layer")))).options=_.mergeDeep({style:{}},t),n.css(n.options.style),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&U(t,e)}(e,t),e}(W);function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X(t,e){return!e||"object"!==F(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $(t){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Z(t,e){return(Z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var q=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=X(this,$(e).call(this,"".concat(o,"-vertical-layer-element")))).options=_.mergeDeep({style:{flexGrow:"0"}},t),n.css(n.options.style),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Z(t,e)}(e,t),e}(W);function K(t){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Q(t,e){return!e||"object"!==K(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function tt(t){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function et(t,e){return(et=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var nt=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Q(this,tt(e).call(this,"".concat(o,"-icon")))).iconNameEl=P("div","".concat(o,"-icon-img ").concat(n)),t.child(t.iconNameEl),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&et(t,e)}(e,t),n=e,(r=[{key:"setWidth",value:function(t){this.iconNameEl.css("width","".concat(t,"px"))}},{key:"setHeight",value:function(t){this.iconNameEl.css("height","".concat(t,"px"))}}])&&J(n.prototype,r),i&&J(n,i),e}(I);function rt(t){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ot(t,e){return!e||"object"!==rt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function it(t){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ct(t,e){return(ct=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var lt=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ot(this,it(e).call(this,"".concat(o,"-tools-item ").concat(t)))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ct(t,e)}(e,t),e}(I);function at(t){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function st(t,e){return!e||"object"!==at(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ut(t){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ft(t,e){return(ft=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ht=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=st(this,ut(e).call(this,"".concat(o,"-tools-undo")))).icon=new nt("undo"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ft(t,e)}(e,t),e}(lt);function pt(t){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yt(t,e){return!e||"object"!==pt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function bt(t){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dt(t,e){return(dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var vt=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=yt(this,bt(e).call(this,"".concat(o,"-tools-redo")))).icon=new nt("redo"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dt(t,e)}(e,t),e}(lt);function gt(t){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mt(t,e){return!e||"object"!==gt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ot(t){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tt(t,e){return(Tt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Et=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=mt(this,Ot(e).call(this,"".concat(o,"-tools-point-format")))).icon=new nt("point-format"),t.sheets=[],t.children(t.icon),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tt(t,e)}(e,t),n=e,(r=[{key:"addSheet",value:function(t){this.sheets.push(t)}},{key:"removeSheet",value:function(t){for(var e=0;e<this.sheets.length;e+=1)if(this.sheets[e]===t)return void this.sheets.splice(e,1)}},{key:"includeSheet",value:function(t){for(var e=0;e<this.sheets.length;e+=1)if(this.sheets[e]===t)return!0;return!1}}])&&wt(n.prototype,r),i&&wt(n,i),e}(lt);function St(t){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _t(t,e){return!e||"object"!==St(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xt(t){return(xt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kt(t,e){return(kt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ct=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=_t(this,xt(e).call(this,"".concat(o,"-tools-clear-format")))).icon=new nt("clear-format"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kt(t,e)}(e,t),e}(lt);function Pt(t){return(Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function jt(t,e){return!e||"object"!==Pt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function At(t){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nt(t,e){return(Nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Rt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=jt(this,At(e).call(this,"".concat(o,"-tools-drop-down-item ").concat(t)))).drop=P("div","".concat(o,"-tools-drop-down-item-mark")),n.title=P("div","".concat(o,"-tools-drop-down-item-title")),n.drop.children(new nt("arrow-down")),n.children(n.title),n.children(n.drop),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nt(t,e)}(e,t),n=e,(r=[{key:"setTitle",value:function(t){this.title.text(t)}},{key:"setIcon",value:function(t){this.title.html(""),this.title.children(t)}},{key:"setWidth",value:function(t){this.title.css("width","".concat(t,"px"))}},{key:"setEllipsis",value:function(){this.title.css("overflow","hidden"),this.title.css("text-overflow","ellipsis"),this.title.css("white-space","nowrap")}},{key:"removeEllipsis",value:function(){this.title.cssRemoveKeys("overflow"),this.title.cssRemoveKeys("text-overflow"),this.title.cssRemoveKeys("white-space")}}])&&Lt(n.prototype,r),i&&Lt(n,i),e}(lt);function It(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Vt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,o=[{key:"unbind",value:function(t,e,n,r){Array.isArray(t)?t.forEach((function(t){(t.el||t).removeEventListener(e,n,r)})):(t.el||t).removeEventListener(e,n,r)}},{key:"bind",value:function(t,e,n,r){Array.isArray(t)?t.forEach((function(t){(t.el||t).addEventListener(e,n,r)})):(t.el||t).addEventListener(e,n,r)}},{key:"dbClick",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},o=0;t.bind(e,r.SYSTEM_EVENT_TYPE.CLICK,(function(t){var e=Date.now();e-o<=300?(n(t),o=0):o=e}))}},{key:"mouseMoveUp",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=function(t){n(t),t.stopPropagation()},c=function n(c){t.unbind(e,r.SYSTEM_EVENT_TYPE.MOUSE_MOVE,i,!0),t.unbind(e,r.SYSTEM_EVENT_TYPE.MOUSE_UP,n,!0),o(c),c.stopPropagation()};t.bind(e,r.SYSTEM_EVENT_TYPE.MOUSE_MOVE,i,!0),t.bind(e,r.SYSTEM_EVENT_TYPE.MOUSE_UP,c,!0)}}],(n=null)&&It(e.prototype,n),o&&It(e,o),t}();function Dt(t){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mt(t,e){return!e||"object"!==Dt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Wt(t){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bt(t,e){return(Bt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Yt=function(t){function e(t){var n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Mt(this,Wt(e).call(this,"".concat(o,"-scroll-bar-x")))).option=_.mergeDeep({style:{},scroll:function(t){return t}},t),r.lastBut=P("div","".concat(o,"-scroll-bar-x-last-but")),r.nextBut=P("div","".concat(o,"-scroll-bar-x-next-but")),r.content=P("div","".concat(o,"-scroll-bar-x-content")),r.block=P("div","".concat(o,"-scroll-bar-x-block")),r.content.children(r.block),(n=r).children.apply(n,[r.lastBut,r.nextBut,r.content]),r.blockLeft=0,r.maxBlockLeft=0,r.blockWidth=0,r.minBlockWidth=20,r.scrollTo=0,r.contentWidth=0,r.viewPortWidth=0,r.isHide=!0,r.css(r.option.style),r.hide(),r}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bt(t,e)}(e,t),n=e,(i=[{key:"onAttach",value:function(){this.bind()}},{key:"bind",value:function(){var t=this;this.block.on(r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){if(0===e.button){var n=t.computeEventXy(e,t.block);Vt.mouseMoveUp(P(document),(function(e){var r=t.computeEventXy(e,t.content).x-n.x;r<0&&(r=0),r>t.maxBlockLeft&&(r=t.maxBlockLeft),t.blockLeft=r,t.scrollTo=t.computeScrollTo(t.blockLeft),t.block.css("left","".concat(r,"px")),t.option.scroll(t.scrollTo),e.stopPropagation(),e.preventDefault()})),e.stopPropagation(),e.preventDefault()}}))}},{key:"setSize",value:function(t,e){if(t<e){this.isHide=!1,this.show();var n=this.content.box(),r=t/e*n.width;this.blockWidth=r<this.minBlockWidth?this.minBlockWidth:r,this.viewPortWidth=t,this.contentWidth=e,this.maxBlockLeft=n.width-this.blockWidth,this.block.css("width","".concat(this.blockWidth,"px"));var o=this.scrollTo/(e-t)*this.maxBlockLeft;this.blockLeft=o>this.maxBlockLeft?this.maxBlockLeft:o,this.scrollTo=this.computeScrollTo(this.blockLeft),this.block.css("left","".concat(this.blockLeft,"px"))}else this.isHide=!0,this.hide(),this.option.scroll(0)}},{key:"scrollMove",value:function(t){var e=t,n=this.contentWidth-this.viewPortWidth;e>n?e=n:e<0&&(e=0);var r=e/(this.contentWidth-this.viewPortWidth)*this.maxBlockLeft;this.blockLeft=r>this.maxBlockLeft?this.maxBlockLeft:r,this.scrollTo!==e&&!1===this.isHide&&(this.scrollTo=e,this.block.css("left","".concat(this.blockLeft,"px")),this.option.scroll(this.scrollTo))}},{key:"computeScrollTo",value:function(t){return t/this.maxBlockLeft*(this.contentWidth-this.viewPortWidth)}}])&&Ht(n.prototype,i),c&&Ht(n,c),e}(I);function Gt(t){return(Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zt(t,e){return!e||"object"!==Gt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ft(t){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xt(t,e){return(Xt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $t=function(t){function e(t){var n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=zt(this,Ft(e).call(this,"".concat(o,"-scroll-bar-y")))).option=_.mergeDeep({style:{},scroll:function(t){return t}},t),r.lastBut=P("div","".concat(o,"-scroll-bar-y-last-but")),r.nextBut=P("div","".concat(o,"-scroll-bar-y-next-but")),r.content=P("div","".concat(o,"-scroll-bar-y-content")),r.block=P("div","".concat(o,"-scroll-bar-y-block")),r.content.children(r.block),(n=r).children.apply(n,[r.lastBut,r.nextBut,r.content]),r.blockTop=0,r.maxBlockTop=0,r.blockHeight=0,r.minBlockHeight=20,r.scrollTo=0,r.contentHeight=0,r.viewPortHeight=0,r.isHide=!0,r.css(r.option.style),r.hide(),r}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xt(t,e)}(e,t),n=e,(i=[{key:"onAttach",value:function(){this.bind()}},{key:"bind",value:function(){var t=this;Vt.bind(this.block,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){if(0===e.button){var n=t.computeEventXy(e,t.block);Vt.mouseMoveUp(P(document),(function(e){var r=t.computeEventXy(e,t.content).y-n.y;r<0&&(r=0),r>t.maxBlockTop&&(r=t.maxBlockTop),t.blockTop=r,t.scrollTo=t.computeScrollTo(t.blockTop),t.block.css("top","".concat(r,"px")),t.option.scroll(t.scrollTo),e.stopPropagation(),e.preventDefault()}))}}))}},{key:"setSize",value:function(t,e){if(t<e){this.isHide=!1,this.show();var n=this.content.box(),r=t/e*n.height;this.blockHeight=r<this.minBlockHeight?this.minBlockHeight:r,this.viewPortHeight=t,this.contentHeight=e,this.maxBlockTop=n.height-this.blockHeight,this.block.css("height","".concat(this.blockHeight,"px"));var o=this.scrollTo/(e-t)*this.maxBlockTop;this.blockTop=o>this.maxBlockTop?this.maxBlockTop:o,this.scrollTo=this.computeScrollTo(this.blockTop),this.block.css("top","".concat(this.blockTop,"px"))}else this.isHide=!0,this.hide(),this.option.scroll(0)}},{key:"scrollMove",value:function(t){var e=t,n=this.contentHeight-this.viewPortHeight;e>n?e=n:e<0&&(e=0);var r=e/(this.contentHeight-this.viewPortHeight)*this.maxBlockTop;this.blockTop=r>this.maxBlockTop?this.maxBlockTop:r,this.scrollTo!==e&&!1===this.isHide&&(this.scrollTo=e,this.block.css("top","".concat(this.blockTop,"px")),this.option.scroll(this.scrollTo))}},{key:"computeScrollTo",value:function(t){return t/this.maxBlockTop*(this.contentHeight-this.viewPortHeight)}}])&&Ut(n.prototype,i),c&&Ut(n,c),e}(I);function Zt(t){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qt(t,e){return!e||"object"!==Zt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Kt(t){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jt(t,e){return(Jt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=qt(this,Kt(e).call(this,"".concat(o,"-horizontal-layer-element")))).options=_.mergeDeep({style:{flexGrow:"0"}},t),n.css(n.options.style),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jt(t,e)}(e,t),e}(W);function te(t){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ee(t,e){return!e||"object"!==te(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ne(t){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function re(t,e){return(re=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var oe=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ee(this,ne(e).call(this,"".concat(o,"-horizontal-layer")))).options=_.mergeDeep({style:{}},t),n.css(n.options.style),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&re(t,e)}(e,t),e}(W);function ie(t){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function le(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ae(t,e){return(ae=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function se(t,e,n){return(se="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ue(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function ue(t){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fe={TOP:1,LEFT:2,BOTTOM:3,RIGHT:4},he=[],pe=null,ye=function(t){function e(t){var n,r,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,n=!(i=ue(e).call(this,"".concat(o,"-el-pop-up")))||"object"!==ie(i)&&"function"!=typeof i?le(r):i,he.push(le(n)),n.options=_.mergeDeep({position:fe.BOTTOM,el:null},t),n.off=!0,n.content=new I("".concat(o,"-el-pop-up-content")),n.scrollBarX=new Yt,n.scrollBarY=new $t;var c=new Qt({style:{flexGrow:1}});c.children(n.content);var l=new Qt({style:{overflow:"inherit"}});l.children(n.scrollBarY);var a=new oe;a.children(c),a.children(l);var s=new q(a);s.children(a);var u=new q;u.children(n.scrollBarX);var f=new z;return f.children(s),f.children(u),se(ue(e.prototype),"children",le(n)).call(le(n),f),n.bind(),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ae(t,e)}(e,t),n=e,c=[{key:"closeAll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];he.forEach((function(e){-1===t.indexOf(e)&&e.close()}))}},{key:"setRoot",value:function(t){t=t.el?P(t.el):P(t),pe=t}}],(i=[{key:"bind",value:function(){var t=this;Vt.bind(window,r.SYSTEM_EVENT_TYPE.RESIZE,(function(){t.position(),t.scrollbar()}))}},{key:"children",value:function(){var t;(t=this.content).children.apply(t,arguments)}},{key:"position",value:function(){var t=this.content,e=this.options,n=e.el,r=e.position,o=n.box(),i=t.box(),c=o.top,l=o.left;switch(r){case fe.TOP:c=o.top-i.height;break;case fe.LEFT:l=o.left-i.width;break;case fe.RIGHT:l=o.left+o.width;break;case fe.BOTTOM:c=o.top+o.height}var a=window.innerWidth,s=window.innerHeight;if(l<0||l+i.width>a)switch(r){case fe.LEFT:l=o.left+o.width;break;case fe.RIGHT:l=o.left-i.width}if(c<0||c+i.height>s)switch(r){case fe.TOP:c=o.top+o.height;break;case fe.BOTTOM:c=o.top-i.height}(l<0||l+i.width>a)&&(c=o.top+o.height,l=o.left),(c<0||c+i.height>s)&&(c=o.top+o.height,l=o.left),this.offset({top:c,left:l})}},{key:"scrollbar",value:function(){var t=this.content.box(),e=this.box();this.scrollBarY.setSize(e.height,t.height),this.scrollBarX.setSize(e.width,t.width)}},{key:"open",value:function(){this.off&&pe&&(pe.children(this),this.position(),this.scrollbar(),this.off=!1)}},{key:"close",value:function(){!1===this.off&&pe&&(pe.remove(this),this.off=!0)}}])&&ce(n.prototype,i),c&&ce(n,c),e}(I);function be(t){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function de(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ve(t){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ge(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function we(t,e){return(we=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var me=function(t){function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(r=ve(e).call(this,"".concat(o,"-el-context-menu ").concat(i)))||"object"!==be(r)&&"function"!=typeof r?ge(n):r).options=_.mergeDeep({},c),t.menus=[],t.elPopUp=new ye(t.options),t.elPopUp.children(ge(t)),t.bind(),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&we(t,e)}(e,t),n=e,(i=[{key:"bind",value:function(){var t=this;Vt.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(t){t.stopPropagation(),t.preventDefault()})),Vt.bind(document.body,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.close()}))}},{key:"addItem",value:function(t){return this.menus.push(t),this.children(t),this}},{key:"open",value:function(){return this.elPopUp.open(),this}},{key:"close",value:function(){return this.elPopUp.close(),this}},{key:"isOpen",value:function(){return this.elPopUp.off}}])&&de(n.prototype,i),c&&de(n,c),e}(I);function Oe(t){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Te(t,e){return!e||"object"!==Oe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ee(t){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Se(t,e){return(Se=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _e=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Te(this,Ee(e).call(this,"".concat(o,"-el-context-menu-item hover ").concat(t)))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Se(t,e)}(e,t),e}(I);function xe(t){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ce(t){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Le(t,e){return(Le=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var je=[],Ae=function(t){function e(t,n){var r,i,c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,(r=!(c=Ce(e).call(this,"".concat(o,"-format-context-menu-item")))||"object"!==xe(c)&&"function"!=typeof c?Pe(i):c).title=t,r.desc=n,r.icon=new nt("checked"),r.iconElement=P("div","".concat(o,"-format-context-menu-item-icon")),r.iconElement.children(r.icon),r.titleElement=P("div","".concat(o,"-format-context-menu-item-title")),r.descElement=P("div","".concat(o,"-format-context-menu-item-desc")),r.titleElement.text(t),r.descElement.text(n),r.children(r.iconElement),r.children(r.titleElement),r.children(r.descElement),je.push(Pe(r)),r}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Le(t,e)}(e,t),n=e,(r=[{key:"setTitle",value:function(t){this.titleElement.text(t)}},{key:"setDesc",value:function(t){this.descElement.text(t)}},{key:"setActive",value:function(){je.forEach((function(t){t.removeClass("active")})),this.addClass("active")}}])&&ke(n.prototype,r),i&&ke(n,i),e}(_e);function Ne(t){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Re(t,e){return!e||"object"!==Ne(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ie(t){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ve(t,e){return(Ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var De=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Re(this,Ie(e).call(this,"".concat(o,"-el-context-menu-item-divider")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ve(t,e)}(e,t),e}(I);function He(t){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Me(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function We(t,e){return!e||"object"!==He(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Be(t){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ye(t,e){return(Ye=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ge=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=We(this,Be(e).call(this,"".concat(o,"-format-context-menu"),_.mergeDeep({onUpdate:function(){}},n)))).items=[new Ae("常规","").data("type","default"),new Ae("文本","").data("type","text"),new De,new Ae("数值","0.59").data("type","number"),new Ae("百分比","90.00%").data("type","percentage"),new Ae("分数","1/2").data("type","fraction"),new Ae("科学计数","9.50e-01").data("type","ENotation"),new De,new Ae("人民币","￥5.00").data("type","rmb"),new Ae("港币","HK5.00").data("type","hk"),new Ae("美元","$5.00").data("type","dollar"),new De,new Ae("日期","2018/4/18").data("type","date1"),new Ae("日期","4月18日").data("type","date2"),new Ae("日期","2018年4月").data("type","date3"),new Ae("日期","2018年4月18日").data("type","date4"),new Ae("日期","2018/4/18 14:30:30").data("type","date5"),new Ae("时间","14:30:30").data("type","time")],t.items.forEach((function(e){e instanceof Ae&&e.data("type")&&e.on(r.SYSTEM_EVENT_TYPE.CLICK,(function(){t.update(e.data("type"),e.title),e.setActive()})),t.addItem(e)})),t.init(),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ye(t,e)}(e,t),n=e,(i=[{key:"init",value:function(){var t=this.options,e=this.items,n=t.el,r=e[0];n.setTitle(r.title),r.setActive()}},{key:"update",value:function(t,e){this.options.onUpdate(t,e),this.close()}},{key:"setActiveByType",value:function(t){this.items.forEach((function(e){e.data("type")===t&&e.setActive()}))}}])&&Me(n.prototype,i),c&&Me(n,c),e}(me);function Ue(t){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ze(t){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xe(t,e){return(Xe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $e=function(t){function e(t){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(i=ze(e).call(this,"".concat(o,"-tools-format")))||"object"!==Ue(i)&&"function"!=typeof i?Fe(r):i).options=_.copyProp({contextMenu:{}},t),n.setTitle("常规"),n.setWidth(50),n.setEllipsis(),n.formatContextMenu=new Ge(_.copyProp({el:Fe(n),position:fe.BOTTOM},n.options.contextMenu)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xe(t,e)}(e,t),e}(Rt);function Ze(t){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ke(t){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Je(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qe(t,e){return(Qe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var tn=[],en=function(t){function e(t){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(i=Ke(e).call(this,"".concat(o,"-font-context-menu-item")))||"object"!==Ze(i)&&"function"!=typeof i?Je(r):i).title=t,n.icon=new nt("checked"),n.iconElement=P("div","".concat(o,"-font-context-menu-item-icon")),n.iconElement.children(n.icon),n.titleElement=P("div","".concat(o,"-font-context-menu-item-title")),n.titleElement.text(t),n.titleElement.css("font-family",t),n.children(n.iconElement),n.children(n.titleElement),tn.push(Je(n)),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qe(t,e)}(e,t),n=e,(r=[{key:"setTitle",value:function(t){this.title=t,this.titleElement.text(t)}},{key:"setActive",value:function(){tn.forEach((function(t){t.removeClass("active")})),this.addClass("active")}}])&&qe(n.prototype,r),i&&qe(n,i),e}(_e);function nn(t){return(nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function on(t,e){return!e||"object"!==nn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function cn(t){return(cn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ln(t,e){return(ln=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var an=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=on(this,cn(e).call(this,"".concat(o,"-font-context-menu"),_.mergeDeep({onUpdate:function(){}},n)))).items=[new en("Arial"),new en("Helvetica"),new en("Source Sans Pro"),new en("Comic Sans Ms"),new en("Courier New"),new en("Verdana"),new en("Lalo")],t.items.forEach((function(e){e.on(r.SYSTEM_EVENT_TYPE.CLICK,(function(){t.update(e.title),e.setActive()})),t.addItem(e)})),t.setActiveByType(t.items[0].title),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ln(t,e)}(e,t),n=e,(i=[{key:"update",value:function(t){this.options.onUpdate(t),this.close()}},{key:"setActiveByType",value:function(t){this.items.forEach((function(e){e.title===t&&e.setActive()}))}}])&&rn(n.prototype,i),c&&rn(n,c),e}(me);function sn(t){return(sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function un(t){return(un=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hn(t,e){return(hn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pn=function(t){function e(t){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(i=un(e).call(this,"".concat(o,"-tools-font")))||"object"!==sn(i)&&"function"!=typeof i?fn(r):i).options=_.copyProp({contextMenu:{}},t),n.setTitle("Arial"),n.setWidth(50),n.setEllipsis(),n.fontContextMenu=new an(_.copyProp({el:fn(n),position:fe.BOTTOM},n.options.contextMenu)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hn(t,e)}(e,t),e}(Rt);function yn(t){return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bn(t,e){return!e||"object"!==yn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function dn(t){return(dn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vn(t,e){return(vn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var gn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=bn(this,dn(e).call(this,"".concat(o,"-font-size-context-menu-item")))).size=t,n.titleElement=P("div","".concat(o,"-font-size-context-menu-item-title")),n.titleElement.text(t),n.titleElement.css("text-align","center"),n.children(n.titleElement),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vn(t,e)}(e,t),e}(_e);function wn(t){return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function On(t,e){return!e||"object"!==wn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Tn(t){return(Tn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function En(t,e){return(En=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Sn=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=On(this,Tn(e).call(this,"".concat(o,"-font-size-context-menu"),_.mergeDeep({onUpdate:function(){}},n)))).items=[new gn(6),new gn(7),new gn(8),new gn(9),new gn(10),new gn(11),new gn(12),new gn(14),new gn(15),new gn(18),new gn(24),new gn(36)],t.items.forEach((function(e){e.on(r.SYSTEM_EVENT_TYPE.CLICK,(function(){t.update(e.size)})),t.addItem(e)})),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&En(t,e)}(e,t),n=e,(i=[{key:"update",value:function(t){this.options.onUpdate(t),this.close()}}])&&mn(n.prototype,i),c&&mn(n,c),e}(me);function _n(t){return(_n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xn(t){return(xn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cn(t,e){return(Cn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Pn=function(t){function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{contextMenu:{}};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(r=xn(e).call(this,"".concat(o,"-tools-font-size")))||"object"!==_n(r)&&"function"!=typeof r?kn(n):r).options=i,t.setTitle("10"),t.setWidth(30),t.setEllipsis(),t.fontSizeContextMenu=new Sn(_.copyProp({el:kn(t),position:fe.BOTTOM},t.options.contextMenu)),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cn(t,e)}(e,t),e}(Rt);function Ln(t){return(Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jn(t,e){return!e||"object"!==Ln(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function An(t){return(An=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nn(t,e){return(Nn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Rn=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=jn(this,An(e).call(this,"".concat(o,"-tools-font-bold")))).icon=new nt("font-bold"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nn(t,e)}(e,t),e}(lt);function In(t){return(In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vn(t,e){return!e||"object"!==In(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dn(t){return(Dn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hn(t,e){return(Hn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Mn=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Vn(this,Dn(e).call(this,"".concat(o,"-tools-font-italic")))).icon=new nt("font-italic"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hn(t,e)}(e,t),e}(lt);function Wn(t){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bn(t,e){return!e||"object"!==Wn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yn(t){return(Yn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gn(t,e){return(Gn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Un=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Bn(this,Yn(e).call(this,"".concat(o,"-tools-under-line")))).icon=new nt("under-line"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gn(t,e)}(e,t),e}(lt);function zn(t){return(zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fn(t,e){return!e||"object"!==zn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xn(t){return(Xn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $n(t,e){return($n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zn=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Fn(this,Xn(e).call(this,"".concat(o,"-tools-font-strike")))).icon=new nt("font-strike"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$n(t,e)}(e,t),e}(lt);function qn(t){return(qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kn(t,e){return!e||"object"!==qn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Jn(t){return(Jn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qn(t,e){return(Qn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var tr=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Kn(this,Jn(e).call(this,"".concat(o,"-font-color-context-menu-item")))).title=t,r.icon=n,n&&(r.iconElement=P("div","".concat(o,"-font-color-context-menu-item-icon")),r.iconElement.children(r.icon),r.children(r.iconElement)),t&&(r.titleElement=P("div","".concat(o,"-font-color-context-menu-item-title")),r.titleElement.text(t),r.children(r.titleElement)),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qn(t,e)}(e,t),e}(_e);function er(t){return(er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function or(t,e){return(or=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ir(t,e,n){return(ir="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cr(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function cr(t){return(cr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var lr=[],ar=null,sr={LEFT:1,TOP:2,RIGHT:3,CENTER:4},ur=function(t){function e(t){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(i=cr(e).call(this,"".concat(o,"-drag-panel")))||"object"!==er(i)&&"function"!=typeof i?rr(r):i).options=_.mergeDeep({position:sr.CENTER},t),n.off=!0,n.mask=P("div","".concat(o,"-drag-panel-mask")),n.content=P("div","".concat(o,"-drag-panel-content")),ir(cr(e.prototype),"children",rr(n)).call(rr(n),n.content),n.bind(),lr.push(rr(n)),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&or(t,e)}(e,t),n=e,c=[{key:"closeAll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];lr.forEach((function(e){-1===t.indexOf(e)&&e.close()}))}},{key:"setRoot",value:function(t){t=t.el?P(t.el):P(t),ar=t}}],(i=[{key:"bind",value:function(){var t=this,e=this.mask;Vt.bind(e,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.close(),e.stopPropagation()})),Vt.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){if(0===e.button){var n=t.computeEventXy(e,t);Vt.mouseMoveUp(P(document),(function(e){var r=e.pageY-n.y,o=e.pageX-n.x;t.offset({top:r,left:o}),e.stopPropagation(),e.preventDefault()})),e.stopPropagation(),e.preventDefault()}}))}},{key:"position",value:function(){var t=this.options.position,e=_.viewPort(),n=e.width,r=e.height,o=this.box();switch(t){case sr.LEFT:case sr.RIGHT:case sr.TOP:break;case sr.CENTER:this.offset({left:n/2-o.width/2,top:r/2-o.height/2})}}},{key:"open",value:function(){if(this.off&&ar){var t=this.mask;ar.children(t),ar.children(this),this.position(),this.off=!1}}},{key:"close",value:function(){if(!1===this.off&&ar){var t=this.mask;ar.remove(this),ar.remove(t),this.off=!0}}},{key:"children",value:function(){var t;(t=this.content).children.apply(t,arguments)}}])&&nr(n.prototype,i),c&&nr(n,c),e}(I);function fr(t){return(fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pr(t){return(pr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function br(t,e){return(br=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var dr=function(t){function e(t){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(i=pr(e).call(this,"".concat(o,"-color-picker")))||"object"!==fr(i)&&"function"!=typeof i?yr(r):i).options=_.mergeDeep({selectCb:function(){}},t),n.dragPanel=new ur,n.color=[360,0,100],n.preViewColorPoint=P("div","".concat(o,"-color-picker-pre-view-color-point")),n.colorValueTips=P("div","".concat(o,"-color-picker-color-value-tips")),n.colorValueTips.text("十六进制颜色值"),n.colorInput=P("input","".concat(o,"-color-picker-color-input")),n.top=P("div","".concat(o,"-color-picker-top")),n.top.children(n.preViewColorPoint),n.top.children(n.colorValueTips),n.top.children(n.colorInput),n.selectColorPoint=P("div","".concat(o,"-color-picker-select-color-point")),n.selectColorArea1=P("div","".concat(o,"-color-picker-select-color-area area1")),n.selectColorArea2=P("div","".concat(o,"-color-picker-select-color-area area2")),n.selectColorArea3=P("div","".concat(o,"-color-picker-select-color-area area3")),n.center=P("div","".concat(o,"-color-picker-center")),n.center.children(n.selectColorArea1),n.center.children(n.selectColorArea2),n.center.children(n.selectColorArea3),n.center.children(n.selectColorPoint),n.colorHuxTips=P("div","".concat(o,"-color-picker-color-hux-tips")),n.colorBar=P("div","".concat(o,"-color-picker-color-bar")),n.colorBarPoint=P("div","".concat(o,"-color-picker-bar-point")),n.bottom=P("div","".concat(o,"-color-picker-bottom")),n.colorHuxTips.text("HUE"),n.colorBar.children(n.colorBarPoint),n.bottom.children(n.colorHuxTips),n.bottom.children(n.colorBar),n.cancelButton=P("div","".concat(o,"-color-picker-button cancel")),n.selectButton=P("div","".concat(o,"-color-picker-button select")),n.buttons=P("div","".concat(o,"-color-picker-buttons")),n.cancelButton.text("取消"),n.selectButton.text("确定"),n.buttons.children(n.selectButton),n.buttons.children(n.cancelButton),n.children(n.top),n.children(n.center),n.children(n.bottom),n.children(n.buttons),n.dragPanel.children(yr(n)),n.dragPanel.css("background","#ffffff"),n.bind(),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&br(t,e)}(e,t),n=e,c=[{key:"fixHex",value:function(t){var e=6-t.length;if(e>0){for(var n=[],r=0;r<e;r+=1)n.push("0");n.push(t),t=n.join("")}return t}},{key:"fixHsx",value:function(t){return{h:Math.min(360,Math.max(0,t.h)),s:Math.min(100,Math.max(0,t.s)),x:Math.min(100,Math.max(0,t.x))}}},{key:"hexToRgb",value:function(t){return{r:(t=parseInt(t.indexOf("#")>-1?t.substring(1):t,16))>>16,g:(65280&t)>>8,b:255&t}}},{key:"hexToHsb",value:function(t){return this.rgbToHsb(this.hexToRgb(t))}},{key:"rgbToHsb",value:function(t){var e={h:0,s:0,x:0},n=Math.min(t.r,t.g,t.b),r=Math.max(t.r,t.g,t.b),o=r-n;return e.x=r,e.s=0!==r?255*o/r:0,0!==e.s?t.r===r?e.h=(t.g-t.b)/o:t.g===r?e.h=2+(t.b-t.r)/o:e.h=4+(t.r-t.g)/o:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.x*=100/255,e}},{key:"hsbToRgb",value:function(t){var e={},n=t.h,r=255*t.s/100,o=255*t.x/100;if(0===r)e.r=o,e.g=o,e.b=o;else{var i=o,c=(255-r)*o/255,l=n%60*(i-c)/60;360===n&&(n=0),n<60?(e.r=i,e.b=c,e.g=c+l):n<120?(e.g=i,e.b=c,e.r=i-l):n<180?(e.g=i,e.r=c,e.b=c+l):n<240?(e.b=i,e.r=c,e.g=i-l):n<300?(e.b=i,e.g=c,e.r=c+l):n<360?(e.r=i,e.g=c,e.b=i-l):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}}},{key:"rgbToHex",value:function(t){var e=[t.r.toString(16),t.g.toString(16),t.b.toString(16)];return e.forEach((function(t,n){1===t.length&&(e[n]="0".concat(t))})),e.join("")}},{key:"hsbToHex",value:function(t){return this.rgbToHex(this.hsbToRgb(t))}},{key:"isRgb",value:function(t){return t.startsWith("rgb")}},{key:"isHex",value:function(t){return t.startsWith("#")}},{key:"parseRgb",value:function(t){var e=t.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return{r:e[1],g:e[2],b:e[3]}}},{key:"isDark",value:function(t){if(_.isBlank(t))return!1;if(this.isHex(t)){var n=e.hexToRgb(t);t="rgb(".concat(n.r,", ").concat(n.g,", ").concat(n.b,")")}var r=e.parseRgb(t);return.299*r.r+.578*r.g+.114*r.b>=192}}],(i=[{key:"bind",value:function(){var t=this,n=this.selectColorPoint,o=this.center,i=this.colorBarPoint,c=this.colorBar,l=this.colorInput,a=this.cancelButton,s=this.selectButton;Vt.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(t){t.stopPropagation()})),Vt.bind(n,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.computeEventXy(e,o),r=o.box();n.x<0&&(n.x=0),n.x>r.width&&(n.x=r.width),n.y<0&&(n.y=0),n.y>r.height&&(n.y=r.height),t.downSelect(n.x,n.y,r.width,r.height),Vt.mouseMoveUp(P(document),(function(e){var n=t.computeEventXy(e,o);n.x<0&&(n.x=0),n.x>r.width&&(n.x=r.width),n.y<0&&(n.y=0),n.y>r.height&&(n.y=r.height),t.moveSelect(n.x,n.y,r.width,r.height)}))})),Vt.bind(i,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.computeEventXy(e,c),r=c.box();n.x<0&&(n.x=0),n.x>r.width&&(n.x=r.width),t.downHue(n.x,r.width),Vt.mouseMoveUp(P(document),(function(e){var n=t.computeEventXy(e,c),r=c.box();n.x<0&&(n.x=0),n.x>r.width&&(n.x=r.width),t.moveHue(n.x,r.width)}))})),Vt.bind(l,r.SYSTEM_EVENT_TYPE.CHANGE,(function(){var e=l.val();e&&t.hexColor(e)})),Vt.bind(a,r.SYSTEM_EVENT_TYPE.CLICK,(function(){t.close()})),Vt.bind(s,r.SYSTEM_EVENT_TYPE.CLICK,(function(){var n=t.color,r=e.fixHsx({h:parseInt(n[0],10),s:parseInt(n[1],10),x:parseInt(n[2],10)}),o=e.hsbToHex(r);t.options.selectCb("#".concat(o)),t.close()}))}},{key:"open",value:function(t){if(this.dragPanel.open(),t){if(e.isRgb(t)){var n=e.parseRgb(t);t=e.rgbToHex(n)}this.hexColor(t)}else this.change();return this}},{key:"close",value:function(){return this.dragPanel.close(),this}},{key:"sliderPosition",value:function(t){var e=this.colorBar,n=this.colorBarPoint,r=n.box(),o=e.box(),i=parseInt(o.width-o.width*t.h/360,10);i-=r.width/2,n.offset({left:i});var c=this.center,l=this.selectColorPoint,a=l.box(),s=c.box(),u=parseInt(s.width*t.s/100,10),f=parseInt(s.height*(100-t.x)/100,10);u-=a.width/2,f-=a.height/2,l.offset({left:u,top:f})}},{key:"hueChange",value:function(){var t=this.color,n=e.fixHsx({h:parseInt(t[0],10),s:parseInt(t[1],10),x:parseInt(t[2],10)}),r=this.colorBarPoint,o=this.selectColorPoint,i=this.preViewColorPoint,c=this.selectColorArea1,l=this.colorInput,a=e.hsbToHex(n),s=e.hsbToHex({h:n.h,s:100,x:100});o.css("backgroundColor","#".concat(a)),i.css("backgroundColor","#".concat(a)),r.css("backgroundColor","#".concat(s)),c.css("backgroundColor","#".concat(s)),l.val("#".concat(a)),this.sliderPosition(n)}},{key:"selectChange",value:function(){var t=this.color,n=e.fixHsx({h:parseInt(t[0],10),s:parseInt(t[1],10),x:parseInt(t[2],10)}),r=this.preViewColorPoint,o=this.selectColorPoint,i=this.colorInput,c=e.hsbToHex(n);o.css("backgroundColor","#".concat(c)),r.css("backgroundColor","#".concat(c)),i.val("#".concat(c)),this.sliderPosition(n)}},{key:"change",value:function(){this.hueChange(),this.selectChange()}},{key:"downSelect",value:function(t,e,n,r){var o=this.color;o[1]=parseInt(100*t/n,10),o[2]=parseInt(100*(r-e)/r,10),this.selectChange()}},{key:"moveSelect",value:function(t,e,n,r){var o=this.color;o[1]=parseInt(100*Math.max(0,Math.min(n,t))/n,10),o[2]=parseInt(100*(r-Math.max(0,Math.min(r,e)))/r,10),this.selectChange()}},{key:"downHue",value:function(t,e){this.color[0]=parseInt(360*(e-t)/e,10),this.hueChange()}},{key:"moveHue",value:function(t,e){this.color[0]=parseInt(360*(e-Math.max(0,Math.min(e,t)))/e,10),this.hueChange()}},{key:"hexColor",value:function(t){var n=this.color,r=e.hexToHsb(e.fixHex(t));n[0]=r.h,n[1]=r.s,n[2]=r.x,this.change()}}])&&hr(n.prototype,i),c&&hr(n,c),e}(I);function vr(t){return(vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wr(t,e){return!e||"object"!==vr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mr(t){return(mr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Or(t,e){return(Or=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Tr=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=wr(this,mr(e).call(this,"".concat(o,"-color-array-item")))).options=_.mergeDeep({color:null,icon:null},t),n.color=n.options.color,n.icon=n.options.icon,n.color&&(n.css("backgroundColor",n.color),dr.isDark(n.options.color)?(n.checkedIcon=new nt("checked-dark"),n.children(n.checkedIcon)):(n.checkedIcon=new nt("checked-light"),n.children(n.checkedIcon)),n.checkedIcon.hide()),n.icon&&n.children(n.options.icon),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Or(t,e)}(e,t),n=e,(r=[{key:"setActive",value:function(t){this.checkedIcon&&(t?this.checkedIcon.show():this.checkedIcon.hide())}}])&&gr(n.prototype,r),i&&gr(n,i),e}(I);function Er(t){return(Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _r(t,e){return!e||"object"!==Er(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xr(t){return(xr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kr(t,e){return(kr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Cr=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=_r(this,xr(e).call(this,"".concat(o,"-color-array")))).options=_.mergeDeep({colors:[new Tr({color:"rgb(0,0,0)"}),new Tr({color:"rgb(67, 67, 67)"}),new Tr({color:"rgb(102, 102, 102)"}),new Tr({color:"rgb(153, 153, 153)"}),new Tr({color:"rgb(183, 183, 183)"}),new Tr({color:"rgb(204, 204, 204)"}),new Tr({color:"rgb(217, 217, 217)"}),new Tr({color:"rgb(239, 239, 239)"}),new Tr({color:"rgb(255, 255, 255)"}),new Tr({color:"rgb(152, 0, 0)"}),new Tr({color:"rgb(255, 0, 0)"}),new Tr({color:"rgb(255, 153, 0)"}),new Tr({color:"rgb(255, 255, 0)"}),new Tr({color:"rgb(0, 255, 0)"}),new Tr({color:"rgb(0, 255, 255)"}),new Tr({color:"rgb(74, 134, 232)"}),new Tr({color:"rgb(0, 0, 255)"}),new Tr({color:"rgb(153, 0, 255)"}),new Tr({color:"rgb(255, 0, 255)"}),new Tr({color:"rgb(230, 184, 175)"}),new Tr({color:"rgb(244, 204, 204)"}),new Tr({color:"rgb(252, 229, 205)"}),new Tr({color:"rgb(255, 242, 204)"}),new Tr({color:"rgb(217, 234, 211)"}),new Tr({color:"rgb(208, 224, 227)"}),new Tr({color:"rgb(201, 218, 248)"}),new Tr({color:"rgb(207, 226, 243)"}),new Tr({color:"rgb(217, 210, 233)"}),new Tr({color:"rgb(234, 209, 220)"}),new Tr({color:"rgb(221, 126, 107)"}),new Tr({color:"rgb(234, 153, 153)"}),new Tr({color:"rgb(249, 203, 156)"}),new Tr({color:"rgb(255, 229, 153)"}),new Tr({color:"rgb(182, 215, 168)"}),new Tr({color:"rgb(162, 196, 201)"}),new Tr({color:"rgb(164, 194, 244)"}),new Tr({color:"rgb(159, 197, 232)"}),new Tr({color:"rgb(180, 167, 214)"}),new Tr({color:"rgb(213, 166, 189)"}),new Tr({color:"rgb(204, 65, 37)"}),new Tr({color:"rgb(224, 102, 102)"}),new Tr({color:"rgb(246, 178, 107)"}),new Tr({color:"rgb(255, 217, 102)"}),new Tr({color:"rgb(147, 196, 125)"}),new Tr({color:"rgb(118, 165, 175)"}),new Tr({color:"rgb(109, 158, 235)"}),new Tr({color:"rgb(111, 168, 220)"}),new Tr({color:"rgb(142, 124, 195)"}),new Tr({color:"rgb(194, 123, 160)"}),new Tr({color:"rgb(166, 28, 0)"}),new Tr({color:"rgb(204, 0, 0)"}),new Tr({color:"rgb(230, 145, 56)"}),new Tr({color:"rgb(241, 194, 50)"}),new Tr({color:"rgb(106, 168, 79)"}),new Tr({color:"rgb(69, 129, 142)"}),new Tr({color:"rgb(60, 120, 216)"}),new Tr({color:"rgb(61, 133, 198)"}),new Tr({color:"rgb(103, 78, 167)"}),new Tr({color:"rgb(166, 77, 121)"}),new Tr({color:"rgb(133, 32, 12)"}),new Tr({color:"rgb(153, 0, 0)"}),new Tr({color:"rgb(180, 95, 6)"}),new Tr({color:"rgb(191, 144, 0)"}),new Tr({color:"rgb(56, 118, 29)"}),new Tr({color:"rgb(19, 79, 92)"}),new Tr({color:"rgb(17, 85, 204)"}),new Tr({color:"rgb(11, 83, 148)"}),new Tr({color:"rgb(53, 28, 117)"}),new Tr({color:"rgb(116, 27, 71)"}),new Tr({color:"rgb(91, 15, 0)"}),new Tr({color:"rgb(102, 0, 0)"}),new Tr({color:"rgb(120, 63, 4)"}),new Tr({color:"rgb(127, 96, 0)"}),new Tr({color:"rgb(39, 78, 19)"}),new Tr({color:"rgb(12, 52, 61)"}),new Tr({color:"rgb(28, 69, 135)"}),new Tr({color:"rgb(7, 55, 99)"}),new Tr({color:"rgb(32, 18, 77)"}),new Tr({color:"rgb(76, 17, 48)"})],selectCb:function(){}},t),n.colors=n.options.colors,n.activeColor=null,n.colors.forEach((function(t){n.children(t),t.on(r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){n.options.selectCb(t),t.options.color&&n.setActiveByColor(t.options.color)}))})),n.colors.length>0&&n.setActiveByColor(n.colors[0].options.color),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kr(t,e)}(e,t),n=e,(i=[{key:"add",value:function(t){var e=this;t.on(r.SYSTEM_EVENT_TYPE.CLICK,(function(){e.options.selectCb(t),t.options.color&&e.setActiveByColor(t.options.color)})),this.colors.push(t),this.children(t)}},{key:"setActiveByColor",value:function(t){var e=this;this.colors.forEach((function(n){var r=n.options;r.color===t?(n.setActive(!0),e.activeColor=r.color):n.setActive(!1)}))}}])&&Sr(n.prototype,i),c&&Sr(n,c),e}(I);function Pr(t){return(Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function jr(t,e){return!e||"object"!==Pr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ar(t){return(Ar=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nr(t,e){return(Nr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Rr=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=jr(this,Ar(e).call(this,"".concat(o,"-font-color-context-menu"),_.mergeDeep({onUpdate:function(){}},n)))).colorPicker=new dr({selectCb:function(e){var n=new Tr({color:e});t.customizeColorArray.add(n),t.customizeColorArray.setActiveByColor(e),t.colorArray.setActiveByColor(null),t.options.onUpdate(e),t.close()}}),t.reset=new tr("重置",new nt("clear-color")),t.reset.on(r.SYSTEM_EVENT_TYPE.CLICK,(function(){t.options.onUpdate("rgb(0,0,0)"),t.customizeColorArray.setActiveByColor(null),t.colorArray.setActiveByColor(null)})),t.array=new tr,t.array.removeClass("hover"),t.colorArray=new Cr({selectCb:function(e){var n=e.options.color;n&&t.options.onUpdate(n),t.customizeColorArray.setActiveByColor(null),t.close()}}),t.array.children(t.colorArray),t.title=P("div","".concat(o,"-font-color-context-menu-color-title")),t.title.text("自定义"),t.plus=new nt("plus"),t.customizeColorArray=new Cr({colors:[new Tr({icon:t.plus})],selectCb:function(e){var n=e.options.color;n?(t.options.onUpdate(n),t.colorArray.setActiveByColor(null),t.close()):t.colorPicker.open(t.customizeColorArray.activeColor)}}),t.customize=new tr,t.customize.removeClass("hover"),t.customize.children(t.title),t.customize.children(t.customizeColorArray),t.addItem(t.reset),t.addItem(t.array),t.addItem(new De),t.addItem(t.customize),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nr(t,e)}(e,t),n=e,(i=[{key:"setActiveByColor",value:function(t){this.customizeColorArray.setActiveByColor(t),this.colorArray.setActiveByColor(t)}}])&&Lr(n.prototype,i),c&&Lr(n,c),e}(me);function Ir(t){return(Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Dr(t){return(Dr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mr(t,e){return(Mr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Wr=function(t){function e(t){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(i=Dr(e).call(this,"".concat(o,"-tools-font-color")))||"object"!==Ir(i)&&"function"!=typeof i?Hr(r):i).options=_.mergeDeep({contextMenu:{}},t),n.icon=new nt("color"),n.fontColorContextMenu=new Rr(_.copyProp({el:Hr(n),position:fe.BOTTOM},n.options.contextMenu)),n.setIcon(n.icon),n.setColor("rgb(0,0,0)"),n.fontColorContextMenu.setActiveByColor("rgb(0,0,0)"),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mr(t,e)}(e,t),n=e,(r=[{key:"setColor",value:function(t){this.icon.css("border-bottom","3px solid ".concat(t))}}])&&Vr(n.prototype,r),i&&Vr(n,i),e}(Rt);function Br(t){return(Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yr(t,e){return!e||"object"!==Br(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gr(t){return(Gr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ur(t,e){return(Ur=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var zr=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Yr(this,Gr(e).call(this,"".concat(o,"-fill-color-context-menu-item")))).title=t,r.icon=n,n&&(r.iconElement=P("div","".concat(o,"-fill-color-context-menu-item-icon")),r.iconElement.children(r.icon),r.children(r.iconElement)),t&&(r.titleElement=P("div","".concat(o,"-fill-color-context-menu-item-title")),r.titleElement.text(t),r.children(r.titleElement)),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ur(t,e)}(e,t),e}(_e);function Fr(t){return(Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $r(t,e){return!e||"object"!==Fr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zr(t){return(Zr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qr(t,e){return(qr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Kr=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=$r(this,Zr(e).call(this,"".concat(o,"-font-color-context-menu"),_.mergeDeep({onUpdate:function(){}},n)))).colorPicker=new dr({selectCb:function(e){var n=new Tr({color:e});t.customizeColorArray.add(n),t.customizeColorArray.setActiveByColor(e),t.colorArray.setActiveByColor(null),t.options.onUpdate(e),t.close()}}),t.reset=new zr("重置",new nt("clear-color")),t.reset.on(r.SYSTEM_EVENT_TYPE.CLICK,(function(){t.options.onUpdate(null),t.customizeColorArray.setActiveByColor(null),t.colorArray.setActiveByColor(null)})),t.array=new zr,t.array.removeClass("hover"),t.colorArray=new Cr({selectCb:function(e){var n=e.options.color;n&&t.options.onUpdate(n),t.customizeColorArray.setActiveByColor(null),t.close()}}),t.array.children(t.colorArray),t.title=P("div","".concat(o,"-font-color-context-menu-color-title")),t.title.text("自定义"),t.plus=new nt("plus"),t.customizeColorArray=new Cr({colors:[new Tr({icon:t.plus})],selectCb:function(e){var n=e.options.color;n?(t.options.onUpdate(n),t.colorArray.setActiveByColor(null),t.close()):t.colorPicker.open(t.customizeColorArray.activeColor)}}),t.customize=new zr,t.customize.removeClass("hover"),t.customize.children(t.title),t.customize.children(t.customizeColorArray),t.addItem(t.reset),t.addItem(t.array),t.addItem(new De),t.addItem(t.customize),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qr(t,e)}(e,t),n=e,(i=[{key:"setActiveByColor",value:function(t){this.customizeColorArray.setActiveByColor(t),this.colorArray.setActiveByColor(t)}}])&&Xr(n.prototype,i),c&&Xr(n,c),e}(me);function Jr(t){return(Jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function to(t){return(to=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function eo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function no(t,e){return(no=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ro=function(t){function e(t){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(i=to(e).call(this,"".concat(o,"-tools-fill-color")))||"object"!==Jr(i)&&"function"!=typeof i?eo(r):i).options=_.mergeDeep({contextMenu:{}},t),n.icon=new nt("fill-color"),n.fillColorContextMenu=new Kr(_.copyProp({el:eo(n),position:fe.BOTTOM},n.options.contextMenu)),n.setIcon(n.icon),n.setColor("rgb(255, 255, 255)"),n.fillColorContextMenu.setActiveByColor("rgb(255, 255, 255)"),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&no(t,e)}(e,t),n=e,(r=[{key:"setColor",value:function(t){this.icon.css("border-bottom","3px solid ".concat(t))}}])&&Qr(n.prototype,r),i&&Qr(n,i),e}(Rt);function oo(t){return(oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function io(t,e){return!e||"object"!==oo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function co(t){return(co=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lo(t,e){return(lo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ao=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),io(this,co(e).call(this,"".concat(o,"-border-type-context-menu-item")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lo(t,e)}(e,t),e}(_e);function so(t){return(so="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uo(t,e){return!e||"object"!==so(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fo(t){return(fo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ho(t,e){return(ho=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var po=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=uo(this,fo(e).call(this,"".concat(o,"-tools-border1")))).icon=new nt("border1"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ho(t,e)}(e,t),e}(lt);function yo(t){return(yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bo(t,e){return!e||"object"!==yo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vo(t){return(vo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function go(t,e){return(go=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wo=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=bo(this,vo(e).call(this,"".concat(o,"-tools-border2")))).icon=new nt("border2"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&go(t,e)}(e,t),e}(lt);function mo(t){return(mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oo(t,e){return!e||"object"!==mo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function To(t){return(To=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Eo(t,e){return(Eo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var So=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Oo(this,To(e).call(this,"".concat(o,"-tools-border3")))).icon=new nt("border3"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Eo(t,e)}(e,t),e}(lt);function _o(t){return(_o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xo(t,e){return!e||"object"!==_o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ko(t){return(ko=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Co(t,e){return(Co=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Po=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=xo(this,ko(e).call(this,"".concat(o,"-tools-border4")))).icon=new nt("border4"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Co(t,e)}(e,t),e}(lt);function Lo(t){return(Lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jo(t,e){return!e||"object"!==Lo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ao(t){return(Ao=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function No(t,e){return(No=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ro=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=jo(this,Ao(e).call(this,"".concat(o,"-tools-border5")))).icon=new nt("border5"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&No(t,e)}(e,t),e}(lt);function Io(t){return(Io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vo(t,e){return!e||"object"!==Io(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Do(t){return(Do=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ho(t,e){return(Ho=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Mo=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Vo(this,Do(e).call(this,"".concat(o,"-tools-border6")))).icon=new nt("border6"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ho(t,e)}(e,t),e}(lt);function Wo(t){return(Wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bo(t,e){return!e||"object"!==Wo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yo(t){return(Yo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Go(t,e){return(Go=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Uo=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Bo(this,Yo(e).call(this,"".concat(o,"-tools-border7")))).icon=new nt("border7"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Go(t,e)}(e,t),e}(lt);function zo(t){return(zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fo(t,e){return!e||"object"!==zo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xo(t){return(Xo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $o(t,e){return($o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zo=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Fo(this,Xo(e).call(this,"".concat(o,"-tools-border8")))).icon=new nt("border8"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$o(t,e)}(e,t),e}(lt);function qo(t){return(qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ko(t,e){return!e||"object"!==qo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Jo(t){return(Jo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qo(t,e){return(Qo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ti=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Ko(this,Jo(e).call(this,"".concat(o,"-tools-border9")))).icon=new nt("border9"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qo(t,e)}(e,t),e}(lt);function ei(t){return(ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ni(t,e){return!e||"object"!==ei(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ri(t){return(ri=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function oi(t,e){return(oi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ii=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=ni(this,ri(e).call(this,"".concat(o,"-tools-border10")))).icon=new nt("border10"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&oi(t,e)}(e,t),e}(lt);function ci(t){return(ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function li(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ai(t,e){return!e||"object"!==ci(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function si(t){return(si=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ui(t,e){return(ui=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fi=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=ai(this,si(e).call(this,"".concat(o,"-tools-border-color")))).icon=new nt("border-color"),t.setIcon(t.icon),t.setColor("#000000"),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ui(t,e)}(e,t),n=e,(r=[{key:"setColor",value:function(t){this.icon.css("border-bottom","3px solid ".concat(t))}}])&&li(n.prototype,r),i&&li(n,i),e}(Rt);function hi(t){return(hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pi(t,e){return!e||"object"!==hi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function yi(t){return(yi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bi(t,e){return(bi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var di=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=pi(this,yi(e).call(this,"".concat(o,"-tools-border-type")))).icon=new nt("border-type"),t.setIcon(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bi(t,e)}(e,t),e}(Rt);function vi(t){return(vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gi(t,e){return!e||"object"!==vi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wi(t){return(wi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mi(t,e){return(mi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Oi=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=gi(this,wi(e).call(this,"".concat(o,"-border-color-context-menu-item")))).title=t,r.icon=n,n&&(r.iconElement=P("div","".concat(o,"-border-color-context-menu-item-icon")),r.iconElement.children(r.icon),r.children(r.iconElement)),t&&(r.titleElement=P("div","".concat(o,"-border-color-context-menu-item-title")),r.titleElement.text(t),r.children(r.titleElement)),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mi(t,e)}(e,t),e}(_e);function Ti(t){return(Ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ei(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Si(t,e){return!e||"object"!==Ti(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _i(t){return(_i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xi(t,e){return(xi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ki=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Si(this,_i(e).call(this,"".concat(o,"-border-color-context-menu"),_.mergeDeep({onUpdate:function(){}},n)))).colorPicker=new dr({selectCb:function(e){var n=new Tr({color:e});t.customizeColorArray.add(n),t.customizeColorArray.setActiveByColor(e),t.colorArray.setActiveByColor(null),t.options.onUpdate(e),t.close()}}),t.reset=new Oi("重置",new nt("clear-color")),t.reset.on(r.SYSTEM_EVENT_TYPE.CLICK,(function(){t.options.onUpdate("rgb(0,0,0)"),t.customizeColorArray.setActiveByColor(null),t.colorArray.setActiveByColor(null)})),t.array=new Oi,t.array.removeClass("hover"),t.colorArray=new Cr({selectCb:function(e){var n=e.options.color;n&&t.options.onUpdate(n),t.customizeColorArray.setActiveByColor(null),t.close()}}),t.array.children(t.colorArray),t.title=P("div","".concat(o,"-border-color-context-menu-color-title")),t.title.text("自定义"),t.plus=new nt("plus"),t.customizeColorArray=new Cr({colors:[new Tr({icon:t.plus})],selectCb:function(e){var n=e.options.color;n?(t.options.onUpdate(n),t.colorArray.setActiveByColor(null),t.close()):t.colorPicker.open(t.customizeColorArray.activeColor)}}),t.customize=new Oi,t.customize.removeClass("hover"),t.customize.children(t.title),t.customize.children(t.customizeColorArray),t.addItem(t.reset),t.addItem(t.array),t.addItem(new De),t.addItem(t.customize),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xi(t,e)}(e,t),n=e,(i=[{key:"setActiveByColor",value:function(t){this.customizeColorArray.setActiveByColor(t),this.colorArray.setActiveByColor(t)}}])&&Ei(n.prototype,i),c&&Ei(n,c),e}(me);function Ci(t){return(Ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Li(t){return(Li=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ji(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ai(t,e){return(Ai=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ni=[],Ri=function(t){function e(t){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(i=Li(e).call(this,"".concat(o,"-font-context-menu-item")))||"object"!==Ci(i)&&"function"!=typeof i?ji(r):i).type=t,n.icon=new nt("checked"),n.typeIcon=new nt(t),n.typeIcon.setWidth(50),n.iconElement=P("div","".concat(o,"-font-context-menu-item-icon")),n.titleElement=P("div","".concat(o,"-font-context-menu-item-title")),n.iconElement.children(n.icon),n.titleElement.children(n.typeIcon),n.children(n.iconElement),n.children(n.titleElement),Ni.push(ji(n)),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ai(t,e)}(e,t),n=e,(r=[{key:"setTitle",value:function(t){this.title=t,this.titleElement.text(t)}},{key:"setActive",value:function(){Ni.forEach((function(t){t.removeClass("active")})),this.addClass("active")}}])&&Pi(n.prototype,r),i&&Pi(n,i),e}(_e);function Ii(t){return(Ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Di(t,e){return!e||"object"!==Ii(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Hi(t){return(Hi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mi(t,e){return(Mi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Wi=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Di(this,Hi(e).call(this,"".concat(o,"-line-type-context-menu"),_.mergeDeep({onUpdate:function(){}},n)))).items=[new Ri("line1"),new Ri("line2"),new Ri("line3"),new Ri("line4"),new Ri("line5"),new Ri("line6")],t.items.forEach((function(e){e.on(r.SYSTEM_EVENT_TYPE.CLICK,(function(){t.update(e.type),e.setActive()})),t.addItem(e)})),t.setActiveByType(t.items[0].type),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mi(t,e)}(e,t),n=e,(i=[{key:"update",value:function(t){this.options.onUpdate(t),this.close()}},{key:"setActiveByType",value:function(t){this.items.forEach((function(e){e.type===t&&e.setActive()}))}}])&&Vi(n.prototype,i),c&&Vi(n,c),e}(me);function Bi(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var c,l=t[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Yi(t,e,n){return(Yi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zi(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Gi(t){return(Gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ui(t,e){return!e||"object"!==Gi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function zi(t){return(zi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xi(t,e)}function Xi(t,e){return(Xi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qi(t,e,n){return e&&Zi(t.prototype,e),n&&Zi(t,n),t}var Ki=window.devicePixelRatio||1,Ji=Math.round(Ki),Qi=Ji+2,tc=Qi+2,ec=Ji/2,nc=function(){function t(e){$i(this,t),this.canvas=e,this.ctx=e.getContext("2d")}return qi(t,null,[{key:"rounding",value:function(t){return Math.round(t)}},{key:"dpr",value:function(){return Ki}},{key:"cvCssPx",value:function(t){return this.rpx(t)/this.dpr()}},{key:"radian",value:function(t){return-t*(Math.PI/180)}},{key:"rpx",value:function(t){return this.rounding(this.dpx(t))}},{key:"dpx",value:function(t){return t*this.dpr()}}]),qi(t,[{key:"attr",value:function(t){for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];("string"==typeof n||n instanceof String)&&(n=n.trim()),this.ctx[e]!==n&&(this.ctx[e]=n)}return this}},{key:"resize",value:function(e,n){var r=this.canvas;return r.width=t.rpx(e),r.height=t.rpx(n),r.style.width="".concat(r.width/t.dpr(),"px"),r.style.height="".concat(r.height/t.dpr(),"px"),this}}]),t}(),rc=function(t){function e(t){var n;return $i(this,e),(n=Ui(this,zi(e).call(this,t))).lineWidthType=e.LINE_WIDTH_TYPE.low,n.lineColor="#000000",n}return Fi(e,t),qi(e,null,[{key:"offsetToLineInside",value:function(t){return Ji>1?t-Ji/2:t-1}}]),qi(e,[{key:"corsLine",value:function(t,n){var r=this,o=Bi(t,2),i=o[0],c=o[1],l=Bi(n,2),a=l[0],s=l[1],u=this.lineWidthType,f=this.lineColor,h=Ji;switch(u){case e.LINE_WIDTH_TYPE.medium:h=Qi;break;case e.LINE_WIDTH_TYPE.low:h=Ji;break;case e.LINE_WIDTH_TYPE.high:h=tc}this.attr({strokeStyle:f,lineWidth:h}),this.polyline((function(t){var e=Bi(t,2),n=e[0],o=e[1];return[nc.rounding(n+r.getOffsetX())-ec,nc.rounding(o+r.getOffsetY())-ec]}),[i,c],[a,s])}},{key:"setLineColor",value:function(t){this.lineColor=t}},{key:"setLineWidthType",value:function(t){this.lineWidthType=t}},{key:"horizonLine",value:function(t,e){var n=Bi(t,2),r=n[0],o=n[1],i=Bi(e,2),c=i[0],l=i[1];if(o!==l)throw new TypeError("Error Horizon Line");this.corsLine([r,o],[c,l])}},{key:"verticalLine",value:function(t,e){var n=Bi(t,2),r=n[0],o=n[1],i=Bi(e,2),c=i[0],l=i[1];if(r!==c)throw new TypeError("Error Vertical Line");this.corsLine([r,o],[c,l])}}]),e}(function(t){function e(){return $i(this,e),Ui(this,zi(e).apply(this,arguments))}return Fi(e,t),qi(e,[{key:"line",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.polyline.apply(this,[function(e){var n=Bi(e,2),r=n[0],o=n[1];return[t.lpx(nc.rounding(r+t.getOffsetX())),t.lpx(nc.rounding(o+t.getOffsetY()))]}].concat(n)),this}},{key:"lpx",value:function(t){return this.ctx.lineWidth%2==0?t:t-.5}}]),e}(function(t){function e(t){var n;return $i(this,e),(n=Ui(this,zi(e).call(this,t))).offsetX=0,n.offsetY=0,n}return Fi(e,t),qi(e,[{key:"offset",value:function(t,e){this.offsetX=t,this.offsetY=e}},{key:"getOffsetX",value:function(){return this.offsetX}},{key:"getOffsetY",value:function(){return this.offsetY}},{key:"fillText",value:function(){throw TypeError("child impl")}},{key:"fillRect",value:function(){throw TypeError("child impl")}},{key:"rect",value:function(){throw TypeError("child impl")}},{key:"drawImage",value:function(){throw TypeError("child impl")}}]),e}(function(t){function e(){return $i(this,e),Ui(this,zi(e).apply(this,arguments))}return Fi(e,t),qi(e,[{key:"fullRect",value:function(){var t=this.canvas,e=t.width,n=t.height;return this.ctx.fillRect(0,0,e,n),this}},{key:"polyline",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t){return t},e=this.ctx;if((arguments.length<=1?0:arguments.length-1)>1){this.beginPath();var n=t(arguments.length<=1?void 0:arguments[1]),r=Bi(n,2),o=r[0],i=r[1];e.moveTo(o,i);for(var c=1,l=arguments.length<=1?0:arguments.length-1;c<l;c+=1){var a=t(c+1<1||arguments.length<=c+1?void 0:arguments[c+1]),s=Bi(a,2),u=s[0],f=s[1];e.lineTo(u,f)}e.stroke()}}},{key:"rotate",value:function(t){return Yi(zi(e.prototype),"rotate",this).call(this,nc.radian(t)),this}}]),e}(function(t){function e(t){var n;return $i(this,e),(n=Ui(this,zi(e).call(this,t))).dash=[],n}return Fi(e,t),qi(e,[{key:"beginPath",value:function(){return this.ctx.beginPath(),this}},{key:"measureText",value:function(t){return this.ctx.measureText(t)}},{key:"save",value:function(){return this.ctx.save(),this}},{key:"restore",value:function(){return this.ctx.restore(),this}},{key:"fill",value:function(){return this.ctx.fill(),this}},{key:"clip",value:function(){return this.ctx.clip(),this}},{key:"setLineDash",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this.ctx;return this.dash=t,e.setLineDash(t),this}},{key:"scale",value:function(t,e){return this.ctx.scale(t,e),this}},{key:"translate",value:function(t,e){return this.ctx.translate(t,e),this}},{key:"rotate",value:function(t){return this.ctx.rotate(t),this}}]),e}(nc)))));rc.LINE_WIDTH_TYPE={low:"low",medium:"medium",high:"high"};var oc=function(t){function e(){return $i(this,e),Ui(this,zi(e).apply(this,arguments))}return Fi(e,t),qi(e,[{key:"fillText",value:function(t,n,r){return n+=this.getOffsetX(),r+=this.getOffsetY(),this.ctx.fillText(t,e.rounding(n),e.rounding(r)),this}},{key:"fillRect",value:function(t,n,r,o){return t+=this.getOffsetX(),n+=this.getOffsetY(),this.ctx.fillRect(e.rounding(t),e.rounding(n),e.rounding(r),e.rounding(o)),this}},{key:"rect",value:function(t,n,r,o){return t+=this.getOffsetX(),n+=this.getOffsetY(),this.ctx.rect(e.rounding(t),e.rounding(n),e.rounding(r),e.rounding(o)),this}},{key:"drawImage",value:function(t,n,r,o,i,c,l,a,s){var u=this.ctx;return n+=this.getOffsetX(),r+=this.getOffsetY(),c+=this.getOffsetX(),l+=this.getOffsetY(),u.drawImage(t,e.rounding(n),e.rounding(r),e.rounding(o),e.rounding(i),e.rounding(c),e.rounding(l),e.rounding(a),e.rounding(s)),this}}]),e}(rc);function ic(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function lc(t,e,n){return e&&cc(t.prototype,e),n&&cc(t,n),t}var ac={SOLID_LINE:0,DOTTED_LINE:1,POINT_LINE:2,DOUBLE_LINE:3},sc=function(){function t(e,n){ic(this,t),this.draw=e,_.mergeDeep(this,{color:"#000000",widthType:oc.LINE_WIDTH_TYPE.low},n)}return lc(t,[{key:"setWidthType",value:function(t){this.widthType=t}},{key:"setColor",value:function(t){this.color=t}},{key:"horizonLine",value:function(t,e,n,r){var o=this.draw,i=this.widthType,c=this.color;o.setLineColor(c),o.setLineWidthType(i),o.setLineDash([]),o.horizonLine([t,e],[n,r])}},{key:"verticalLine",value:function(t,e,n,r){var o=this.draw,i=this.widthType,c=this.color;o.setLineColor(c),o.setLineWidthType(i),o.setLineDash([]),o.verticalLine([t,e],[n,r])}}]),t}(),uc=function(){function t(e,n){ic(this,t),this.draw=e,_.mergeDeep(this,{color:"#000000",widthType:oc.LINE_WIDTH_TYPE.low,dash:[5]},n)}return lc(t,[{key:"setWidthType",value:function(t){this.widthType=t}},{key:"setColor",value:function(t){this.color=t}},{key:"horizonLine",value:function(t,e,n,r){var o=this.draw,i=this.dash,c=this.widthType,l=this.color;o.setLineColor(l),o.setLineWidthType(c),o.setLineDash(i),o.horizonLine([t,e],[n,r])}},{key:"verticalLine",value:function(t,e,n,r){var o=this.draw,i=this.dash,c=this.widthType,l=this.color;o.setLineColor(l),o.setLineWidthType(c),o.setLineDash(i),o.verticalLine([t,e],[n,r])}}]),t}(),fc=function(){function t(e,n){ic(this,t),this.draw=e,_.mergeDeep(this,{color:"#000000",widthType:oc.LINE_WIDTH_TYPE.low,padding:1,spacing:t.spacing,leftShow:function(){return!1},topShow:function(){return!1},rightShow:function(){return!1},bottomShow:function(){return!1},iFMerge:function(){return!1},iFMergeFirstRow:function(){return!1},iFMergeLastRow:function(){return!1},iFMergeFirstCol:function(){return!1},iFMergeLastCol:function(){return!1}},n)}return lc(t,[{key:"setWidthType",value:function(t){this.widthType=t}},{key:"setColor",value:function(t){this.color=t}},{key:"horizonLine",value:function(t,e,n,r,o,i,c){var l=this.draw,a=this.widthType,s=this.color;l.setLineColor(s),l.setLineWidthType(a),l.setLineDash([]);var u=this.handleExternal(t,e,n,r,o,i,c),f=this.handleInternal(t,e,n,r,o,i,c);_.isEmptyObject(f)||l.horizonLine([f.sx,f.sy],[f.ex,f.ey]),_.isEmptyObject(u)||l.horizonLine([u.sx,u.sy],[u.ex,u.ey])}},{key:"verticalLine",value:function(t,e,n,r,o,i,c){var l=this.draw,a=this.widthType,s=this.color;l.setLineColor(s),l.setLineWidthType(a),l.setLineDash([]);var u=this.handleExternal(t,e,n,r,o,i,c),f=this.handleInternal(t,e,n,r,o,i,c);_.isEmptyObject(f)||l.verticalLine([f.sx,f.sy],[f.ex,f.ey]),_.isEmptyObject(u)||l.verticalLine([u.sx,u.sy],[u.ex,u.ey])}},{key:"handleExternal",value:function(t,e,n,r,o,i,c){var l={},a=this.leftShow,s=this.topShow,u=this.rightShow,f=this.bottomShow,h=this.iFMerge,p=this.iFMergeFirstRow,y=this.iFMergeLastRow,b=this.iFMergeFirstCol,d=this.iFMergeLastCol,v=this.spacing,g=null,w=null,m=null,O=null,T=null;switch(c){case"left":(g=h(o,i-1))&&(w=p(o,i-1),m=y(o,i-1),O=b(o,i-1),T=d(o,i-1));break;case"top":(g=h(o-1,i))&&(w=p(o-1,i),m=y(o-1,i),O=b(o-1,i),T=d(o-1,i));break;case"right":(g=h(o,i+1))&&(w=p(o,i+1),m=y(o,i+1),O=b(o,i+1),T=d(o,i+1));break;case"bottom":(g=h(o+1,i))&&(w=p(o+1,i),m=y(o+1,i),O=b(o+1,i),T=d(o+1,i))}if(g){switch(c){case"left":l.sx=t-v,l.ex=n-v;var E=f(o-1,i-1)||s(o,i-1),S=s(o,i),_=f(o-1,i);l.sy=e,(S||_)&&(l.sy=e-v),E&&w&&(l.sy=e+v);var x=s(o+1,i-1)||f(o,i-1),k=f(o,i),C=s(o+1,i);l.ey=r,(k||C)&&(l.ey=r+v),x&&m&&(l.ey=r-v);break;case"top":l.sy=e-v,l.ey=r-v;var P=u(o-1,i-1)||a(o-1,i),L=a(o,i),j=u(o,i-1);l.sx=t,(L||j)&&(l.sx=t-v),P&&O&&(l.sx=t+v);var A=a(o-1,i+1)||u(o-1,i),N=u(o,i),R=a(o,i+1);l.ex=n,(N||R)&&(l.ex=n+v),A&&T&&(l.ex=n-v);break;case"right":l.sx=t+v,l.ex=n+v;var I=f(o-1,i+1)||s(o,i+1),V=s(o,i),D=f(o-1,i);l.sy=e,(V||D)&&(l.sy=e-v),I&&w&&(l.sy=e+v);var H=s(o+1,i+1)||f(o,i+1),M=f(o,i),W=s(o+1,i);l.ey=r,(M||W)&&(l.ey=r+v),H&&m&&(l.ey=r-v);break;case"bottom":l.sy=e+v,l.ey=r+v;var B=u(o+1,i-1)||a(o+1,i),Y=a(o,i),G=u(o,i-1);l.sx=t,(Y||G)&&(l.sx=t-v),B&&O&&(l.sx=t+v);var U=a(o+1,i+1)||u(o+1,i),z=u(o,i),F=a(o,i+1);l.ex=n,(z||F)&&(l.ex=n+v),U&&T&&(l.ex=n-v)}return l}switch(c){case"left":l.sx=t-v,l.ex=n-v;var X=f(o-1,i-1)||s(o,i-1),$=s(o,i),Z=f(o-1,i);l.sy=e,($||Z)&&(l.sy=e-v),X&&(l.sy=e+v);var q=s(o+1,i-1)||f(o,i-1),K=f(o,i),J=s(o+1,i);l.ey=r,(K||J)&&(l.ey=r+v),q&&(l.ey=r-v);break;case"top":l.sy=e-v,l.ey=r-v;var Q=u(o-1,i-1)||a(o-1,i),tt=a(o,i),et=u(o,i-1);l.sx=t,(tt||et)&&(l.sx=t-v),Q&&(l.sx=t+v);var nt=a(o-1,i+1)||u(o-1,i),rt=u(o,i),ot=a(o,i+1);l.ex=n,(rt||ot)&&(l.ex=n+v),nt&&(l.ex=n-v);break;case"right":l.sx=t+v,l.ex=n+v;var it=f(o-1,i+1)||s(o,i+1),ct=s(o,i),lt=f(o-1,i);l.sy=e,(ct||lt)&&(l.sy=e-v),it&&(l.sy=e+v);var at=s(o+1,i+1)||f(o,i+1),st=f(o,i),ut=s(o+1,i);l.ey=r,(st||ut)&&(l.ey=r+v),at&&(l.ey=r-v);break;case"bottom":l.sy=e+v,l.ey=r+v;var ft=u(o+1,i-1)||a(o+1,i),ht=a(o,i),pt=u(o,i-1);l.sx=t,(ht||pt)&&(l.sx=t-v),ft&&(l.sx=t+v);var yt=a(o+1,i+1)||u(o+1,i),bt=u(o,i),dt=a(o,i+1);l.ex=n,(bt||dt)&&(l.ex=n+v),yt&&(l.ex=n-v)}return l}},{key:"handleInternal",value:function(t,e,n,r,o,i,c){var l={},a=this.leftShow,s=this.topShow,u=this.rightShow,f=this.bottomShow,h=this.iFMerge,p=this.iFMergeFirstRow,y=this.iFMergeLastRow,b=this.iFMergeFirstCol,d=this.iFMergeLastCol,v=this.spacing;if(h(o,i)){var g=p(o,i),w=y(o,i),m=b(o,i),O=d(o,i);switch(c){case"left":l.sx=t+v,l.ex=n+v;var T=f(o-1,i-1)||s(o,i-1),E=s(o,i),S=f(o-1,i);l.sy=e,T&&(l.sy=e-v),(E||S)&&g&&(l.sy=e+v);var _=s(o+1,i-1)||f(o,i-1),x=f(o,i),k=s(o+1,i);l.ey=r,_&&(l.ey=r+v),(x||k)&&w&&(l.ey=r-v);break;case"top":l.sy=e+v,l.ey=r+v;var C=u(o-1,i-1)||a(o-1,i),P=a(o,i),L=u(o,i-1);l.sx=t,C&&(l.sx=t-v),(P||L)&&m&&(l.sx=t+v);var j=a(o-1,i+1)||u(o-1,i),A=u(o,i),N=a(o,i+1);l.ex=n,j&&(l.ex=n+v),(A||N)&&O&&(l.ex=n-v);break;case"right":l.sx=t-v,l.ex=n-v;var R=f(o-1,i+1)||s(o,i+1),I=s(o,i),V=f(o-1,i);l.sy=e,R&&(l.sy=e-v),(I||V)&&g&&(l.sy=e+v);var D=s(o+1,i+1)||f(o,i+1),H=f(o,i),M=s(o+1,i);l.ey=r,D&&(l.ey=r+v),(H||M)&&w&&(l.ey=r-v);break;case"bottom":l.sy=e-v,l.ey=r-v;var W=u(o+1,i-1)||a(o+1,i),B=a(o,i),Y=u(o,i-1);l.sx=t,W&&(l.sx=t-v),(B||Y)&&m&&(l.sx=t+v);var G=a(o+1,i+1)||u(o+1,i),U=u(o,i),z=a(o,i+1);l.ex=n,G&&(l.ex=n+v),(U||z)&&O&&(l.ex=n-v)}return l}switch(c){case"left":l.sx=t+v,l.ex=n+v;var F=f(o-1,i-1)||s(o,i-1),X=s(o,i),$=f(o-1,i);l.sy=e,F&&(l.sy=e-v),(X||$)&&(l.sy=e+v);var Z=s(o+1,i-1)||f(o,i-1),q=f(o,i),K=s(o+1,i);l.ey=r,Z&&(l.ey=r+v),(q||K)&&(l.ey=r-v);break;case"top":l.sy=e+v,l.ey=r+v;var J=u(o-1,i-1)||a(o-1,i),Q=a(o,i),tt=u(o,i-1);l.sx=t,J&&(l.sx=t-v),(Q||tt)&&(l.sx=t+v);var et=a(o-1,i+1)||u(o-1,i),nt=u(o,i),rt=a(o,i+1);l.ex=n,et&&(l.ex=n+v),(nt||rt)&&(l.ex=n-v);break;case"right":l.sx=t-v,l.ex=n-v;var ot=f(o-1,i+1)||s(o,i+1),it=s(o,i),ct=f(o-1,i);l.sy=e,ot&&(l.sy=e-v),(it||ct)&&(l.sy=e+v);var lt=s(o+1,i+1)||f(o,i+1),at=f(o,i),st=s(o+1,i);l.ey=r,lt&&(l.ey=r+v),(at||st)&&(l.ey=r-v);break;case"bottom":l.sy=e-v,l.ey=r-v;var ut=u(o+1,i-1)||a(o+1,i),ft=a(o,i),ht=u(o,i-1);l.sx=t,ut&&(l.sx=t-v),(ft||ht)&&(l.sx=t+v);var pt=a(o+1,i+1)||u(o+1,i),yt=u(o,i),bt=a(o,i+1);l.ex=n,pt&&(l.ex=n+v),(yt||bt)&&(l.ex=n-v)}return l}}]),t}();fc.spacing=oc.dpr()>=2?3:2;var hc=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ic(this,t),this.widthType=oc.LINE_WIDTH_TYPE.low,this.type=ac.SOLID_LINE,this.solidLine=new sc(e,_.mergeDeep({},n)),this.dottedLine=new uc(e,_.mergeDeep({dash:[5]},n)),this.pointLine=new uc(e,_.mergeDeep({dash:[2,2]},n)),this.doubleLine=new fc(e,_.mergeDeep({},n))}return lc(t,[{key:"setWidthType",value:function(t){t&&this.type===ac.SOLID_LINE&&this.solidLine.setWidthType(t)}},{key:"setColor",value:function(t){t&&(this.solidLine.setColor(t),this.dottedLine.setColor(t),this.pointLine.setColor(t),this.doubleLine.setColor(t))}},{key:"setType",value:function(t){this.type=t}},{key:"horizonLine",value:function(t,e,n,r,o,i,c){var l=this.type,a=this.solidLine,s=this.dottedLine,u=this.pointLine,f=this.doubleLine;switch(l){case ac.SOLID_LINE:a.horizonLine(t,e,n,r);break;case ac.DOTTED_LINE:s.horizonLine(t,e,n,r);break;case ac.POINT_LINE:u.horizonLine(t,e,n,r);break;case ac.DOUBLE_LINE:f.horizonLine(t,e,n,r,o,i,c)}}},{key:"verticalLine",value:function(t,e,n,r,o,i,c){var l=this.type,a=this.solidLine,s=this.dottedLine,u=this.pointLine,f=this.doubleLine;switch(l){case ac.SOLID_LINE:a.verticalLine(t,e,n,r);break;case ac.DOTTED_LINE:s.verticalLine(t,e,n,r);break;case ac.POINT_LINE:u.verticalLine(t,e,n,r);break;case ac.DOUBLE_LINE:f.verticalLine(t,e,n,r,o,i,c)}}}]),t}();function pc(t){return(pc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yc(t){return(yc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dc(t,e){return(dc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var vc=function(t){function e(){var t,n,i,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,i=yc(e).call(this,"".concat(o,"-border-type-context-menu"),_.mergeDeep({onUpdate:function(){}},c)),(t=!i||"object"!==pc(i)&&"function"!=typeof i?bc(n):i).type=ac.SOLID_LINE,t.color="#000000",t.borderIcon1=new po,t.borderIcon2=new wo,t.borderIcon3=new So,t.borderIcon4=new Po,t.borderIcon5=new Ro;var l=P("div","".concat(o,"-border-type-context-menu-type-icon-line"));l.children(t.borderIcon1),l.children(t.borderIcon2),l.children(t.borderIcon3),l.children(t.borderIcon4),l.children(t.borderIcon5),t.borderIcon6=new Mo,t.borderIcon7=new Uo,t.borderIcon8=new Zo,t.borderIcon9=new ti,t.borderIcon10=new ii;var a=P("div","".concat(o,"-border-type-context-menu-type-icon-line"));a.children(t.borderIcon6),a.children(t.borderIcon7),a.children(t.borderIcon8),a.children(t.borderIcon9),a.children(t.borderIcon10),t.borderIcons=new ao,t.borderIcons.removeClass("hover"),t.borderIcons.children(l),t.borderIcons.children(a),t.borderColor=new fi,t.borderType=new di;var s=P("div","".concat(o,"-border-type-context-menu-type-icon-line"));return s.children(t.borderColor),s.children(t.borderType),t.borderColorAndType=new ao,t.borderColorAndType.removeClass("hover"),t.borderColorAndType.children(s),t.addItem(t.borderIcons),t.addItem(new De),t.addItem(t.borderColorAndType),t.borderColorContextMenu=new ki(_.copyProp({el:t.borderColor,position:fe.BOTTOM},{onUpdate:function(e){t.color=e,t.borderColor.setColor(e)}})),t.lineTypeContextMenu=new Wi(_.copyProp({el:t.borderType,position:fe.BOTTOM},{onUpdate:function(e){t.type=e}})),Vt.bind(t.borderColor,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=bc(t).borderColorContextMenu,r=n.elPopUp;ye.closeAll([r,t.elPopUp]),n.isOpen()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),Vt.bind(t.borderType,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=bc(t).lineTypeContextMenu,r=n.elPopUp;ye.closeAll([r,t.elPopUp]),n.isOpen()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),Vt.bind(t.borderIcon1,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate("border1",t.color,t.type),e.stopPropagation(),e.preventDefault()})),Vt.bind(t.borderIcon2,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate("border2",t.color,t.type),e.stopPropagation(),e.preventDefault()})),Vt.bind(t.borderIcon3,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate("border3",t.color,t.type),e.stopPropagation(),e.preventDefault()})),Vt.bind(t.borderIcon4,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate("border4",t.color,t.type),e.stopPropagation(),e.preventDefault()})),Vt.bind(t.borderIcon5,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate("border5",t.color,t.type),e.stopPropagation(),e.preventDefault()})),Vt.bind(t.borderIcon6,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate("border6",t.color,t.type),e.stopPropagation(),e.preventDefault()})),Vt.bind(t.borderIcon7,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate("border7",t.color,t.type),e.stopPropagation(),e.preventDefault()})),Vt.bind(t.borderIcon8,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate("border8",t.color,t.type),e.stopPropagation(),e.preventDefault()})),Vt.bind(t.borderIcon9,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate("border9",t.color,t.type),e.stopPropagation(),e.preventDefault()})),Vt.bind(t.borderIcon10,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate("border10",t.color,t.type),e.stopPropagation(),e.preventDefault()})),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dc(t,e)}(e,t),e}(me);function gc(t){return(gc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wc(t){return(wc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Oc(t,e){return(Oc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Tc=function(t){function e(t){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(i=wc(e).call(this,"".concat(o,"-tools-border")))||"object"!==gc(i)&&"function"!=typeof i?mc(r):i).options=_.copyProp({contextMenu:{}},t),n.icon=new nt("border"),n.setIcon(n.icon),n.borderTypeContextMenu=new vc(_.copyProp({el:mc(n),position:fe.BOTTOM},n.options.contextMenu)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oc(t,e)}(e,t),e}(Rt);function Ec(t){return(Ec="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sc(t,e){return!e||"object"!==Ec(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _c(t){return(_c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xc(t,e){return(xc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var kc=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Sc(this,_c(e).call(this,"".concat(o,"-tools-merge")))).icon=new nt("merge"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xc(t,e)}(e,t),e}(lt);function Cc(t){return(Cc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pc(t,e){return!e||"object"!==Cc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Lc(t){return(Lc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jc(t,e){return(jc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ac=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Pc(this,Lc(e).call(this,"".concat(o,"-tools-horizontal1")))).icon=new nt("align-left"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jc(t,e)}(e,t),e}(lt);function Nc(t){return(Nc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rc(t,e){return!e||"object"!==Nc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ic(t){return(Ic=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vc(t,e){return(Vc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Dc=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Rc(this,Ic(e).call(this,"".concat(o,"-tools-horizontal2")))).icon=new nt("align-center"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vc(t,e)}(e,t),e}(lt);function Hc(t){return(Hc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mc(t,e){return!e||"object"!==Hc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Wc(t){return(Wc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bc(t,e){return(Bc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Yc=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Mc(this,Wc(e).call(this,"".concat(o,"-tools-horizontal3")))).icon=new nt("align-right"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bc(t,e)}(e,t),e}(lt);function Gc(t){return(Gc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Uc(t,e){return!e||"object"!==Gc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function zc(t){return(zc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fc(t,e){return(Fc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Xc=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Uc(this,zc(e).call(this,"".concat(o,"-horizontal-type-context-menu-item")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fc(t,e)}(e,t),e}(_e);function $c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Zc=function(){function t(e){var n=e.overflow,r=e.text,o=e.rect,i=e.dw,c=e.attr;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.overflow=n,this.text=r,this.dw=i,this.rect=o,this.attr=c}var e,n,r;return e=t,(n=[{key:"textWidth",value:function(t){return this.dw.measureText(t).width}},{key:"textBreak",value:function(t){return t.split(/\n/)}},{key:"isBlank",value:function(t){return null==t||""===t.toString().trim()}},{key:"setTextWrap",value:function(t){this.attr.textWrap=t}},{key:"setSize",value:function(t){this.attr.size=t}},{key:"setPadding",value:function(t){this.attr.padding=t}},{key:"truncateFont",value:function(){throw new TypeError("child impl")}},{key:"overflowFont",value:function(){throw new TypeError("child impl")}},{key:"wrapTextFont",value:function(){throw new TypeError("child impl")}},{key:"draw",value:function(){throw new TypeError("child impl")}}])&&$c(e.prototype,n),r&&$c(e,r),t}();function qc(t){return(qc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kc(t,e){return!e||"object"!==qc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Jc(t){return(Jc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qc(t,e){return(Qc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Zc.VERTICAL_ALIGN={top:"top",center:"middle",bottom:"bottom"},Zc.ALIGN={left:"left",center:"center",right:"right"},Zc.TEXT_WRAP={OVER_FLOW:1,WORD_WRAP:2,TRUNCATE:3},Zc.TEXT_DIRECTION={HORIZONTAL:"horizontal",VERTICAL:"vertical",ANGLE:"angle"};var tl=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Kc(this,Jc(e).call(this,"".concat(o,"-horizontal-type-context-menu"),_.mergeDeep({onUpdate:function(){}},n)))).horizontalIcon1=new Ac,t.horizontalIcon2=new Dc,t.horizontalIcon3=new Yc;var i=P("div","".concat(o,"-horizontal-type-context-menu-type-icon-line"));return i.children(t.horizontalIcon1),i.children(t.horizontalIcon2),i.children(t.horizontalIcon3),t.horizontalIcons=new Xc,t.horizontalIcons.removeClass("hover"),t.horizontalIcons.children(i),t.addItem(t.horizontalIcons),Vt.bind(t.horizontalIcon1,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate(Zc.ALIGN.left),e.stopPropagation(),e.preventDefault()})),Vt.bind(t.horizontalIcon2,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate(Zc.ALIGN.center),e.stopPropagation(),e.preventDefault()})),Vt.bind(t.horizontalIcon3,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate(Zc.ALIGN.right),e.stopPropagation(),e.preventDefault()})),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qc(t,e)}(e,t),e}(me);function el(t){return(el="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nl(t){return(nl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rl(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ol(t,e){return(ol=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var il=function(t){function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(r=nl(e).call(this,"".concat(o,"-tools-horizontal-align")))||"object"!==el(r)&&"function"!=typeof r?rl(n):r).options=_.mergeDeep({contextMenu:{}},i),t.icon=new nt("align-left"),t.setIcon(t.icon),t.horizontalContextMenu=new tl(_.copyProp({el:rl(t),position:fe.BOTTOM},t.options.contextMenu)),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ol(t,e)}(e,t),e}(Rt);function cl(t){return(cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ll(t,e){return!e||"object"!==cl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function al(t){return(al=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sl(t,e){return(sl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ul=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ll(this,al(e).call(this,"".concat(o,"-vertical-type-context-menu-item")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sl(t,e)}(e,t),e}(_e);function fl(t){return(fl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hl(t,e){return!e||"object"!==fl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pl(t){return(pl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yl(t,e){return(yl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var bl=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=hl(this,pl(e).call(this,"".concat(o,"-tools-verticalIcon1")))).icon=new nt("align-top"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yl(t,e)}(e,t),e}(lt);function dl(t){return(dl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vl(t,e){return!e||"object"!==dl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gl(t){return(gl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wl(t,e){return(wl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ml=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=vl(this,gl(e).call(this,"".concat(o,"-tools-verticalIcon2")))).icon=new nt("align-middle"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wl(t,e)}(e,t),e}(lt);function Ol(t){return(Ol="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tl(t,e){return!e||"object"!==Ol(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function El(t){return(El=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Sl(t,e){return(Sl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _l=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Tl(this,El(e).call(this,"".concat(o,"-tools-verticalIcon3")))).icon=new nt("align-bottom"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sl(t,e)}(e,t),e}(lt);function xl(t){return(xl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kl(t,e){return!e||"object"!==xl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Cl(t){return(Cl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pl(t,e){return(Pl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ll=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=kl(this,Cl(e).call(this,"".concat(o,"-vertical-type-context-menu"),_.mergeDeep({onUpdate:function(){}},n)))).verticalIcon1=new bl,t.verticalIcon2=new ml,t.verticalIcon3=new _l;var i=P("div","".concat(o,"-vertical-type-context-menu-type-icon-line"));return i.children(t.verticalIcon1),i.children(t.verticalIcon2),i.children(t.verticalIcon3),t.verticalIcons=new ul,t.verticalIcons.removeClass("hover"),t.verticalIcons.children(i),t.addItem(t.verticalIcons),Vt.bind(t.verticalIcon1,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate(Zc.VERTICAL_ALIGN.top),e.stopPropagation(),e.preventDefault()})),Vt.bind(t.verticalIcon2,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate(Zc.VERTICAL_ALIGN.center),e.stopPropagation(),e.preventDefault()})),Vt.bind(t.verticalIcon3,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate(Zc.VERTICAL_ALIGN.bottom),e.stopPropagation(),e.preventDefault()})),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pl(t,e)}(e,t),e}(me);function jl(t){return(jl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Al(t){return(Al=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nl(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rl(t,e){return(Rl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Il=function(t){function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(r=Al(e).call(this,"".concat(o,"-tools-vertical-align")))||"object"!==jl(r)&&"function"!=typeof r?Nl(n):r).options=_.mergeDeep({contextMenu:{}},i),t.icon=new nt("align-middle"),t.setIcon(t.icon),t.verticalContextMenu=new Ll(_.copyProp({el:Nl(t),position:fe.BOTTOM},t.options.contextMenu)),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rl(t,e)}(e,t),e}(Rt);function Vl(t){return(Vl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dl(t,e){return!e||"object"!==Vl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Hl(t){return(Hl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ml(t,e){return(Ml=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Wl=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Dl(this,Hl(e).call(this,"".concat(o,"-tools-text-wrapping1")))).icon=new nt("truncate"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ml(t,e)}(e,t),e}(lt);function Bl(t){return(Bl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yl(t,e){return!e||"object"!==Bl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gl(t){return(Gl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ul(t,e){return(Ul=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var zl=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Yl(this,Gl(e).call(this,"".concat(o,"-tools-text-wrapping2")))).icon=new nt("overflow"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ul(t,e)}(e,t),e}(lt);function Fl(t){return(Fl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xl(t,e){return!e||"object"!==Fl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $l(t){return($l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zl(t,e){return(Zl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ql=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Xl(this,$l(e).call(this,"".concat(o,"-tools-text-wrapping3")))).icon=new nt("wrap"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zl(t,e)}(e,t),e}(lt);function Kl(t){return(Kl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jl(t,e){return!e||"object"!==Kl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ql(t){return(Ql=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ta(t,e){return(ta=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ea=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Jl(this,Ql(e).call(this,"".concat(o,"-text-wrapping-context-menu-item")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ta(t,e)}(e,t),e}(_e);function na(t){return(na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ra(t,e){return!e||"object"!==na(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function oa(t){return(oa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ia(t,e){return(ia=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ca=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=ra(this,oa(e).call(this,"".concat(o,"-text-wrapping-context-menu"),_.mergeDeep({onUpdate:function(){}},n)))).textWrappingIcon1=new Wl,t.textWrappingIcon2=new zl,t.textWrappingIcon3=new ql;var i=P("div","".concat(o,"-text-wrapping-context-menu-type-icon-line"));return i.children(t.textWrappingIcon1),i.children(t.textWrappingIcon2),i.children(t.textWrappingIcon3),t.textWrappingIcons=new ea,t.textWrappingIcons.removeClass("hover"),t.textWrappingIcons.children(i),t.addItem(t.textWrappingIcons),Vt.bind(t.textWrappingIcon1,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate(Zc.TEXT_WRAP.TRUNCATE),e.stopPropagation(),e.preventDefault()})),Vt.bind(t.textWrappingIcon2,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate(Zc.TEXT_WRAP.OVER_FLOW),e.stopPropagation(),e.preventDefault()})),Vt.bind(t.textWrappingIcon3,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate(Zc.TEXT_WRAP.WORD_WRAP),e.stopPropagation(),e.preventDefault()})),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ia(t,e)}(e,t),e}(me);function la(t){return(la="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aa(t){return(aa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sa(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ua(t,e){return(ua=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fa=function(t){function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(r=aa(e).call(this,"".concat(o,"-tools-text-wrapping")))||"object"!==la(r)&&"function"!=typeof r?sa(n):r).options=_.mergeDeep({contextMenu:{}},i),t.icon=new nt("text-wrap"),t.setIcon(t.icon),t.textWrappingContextMenu=new ca(_.copyProp({el:sa(t),position:fe.BOTTOM},t.options.contextMenu)),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ua(t,e)}(e,t),e}(Rt);function ha(t){return(ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pa(t,e){return!e||"object"!==ha(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ya(t){return(ya=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ba(t,e){return(ba=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var da=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=pa(this,ya(e).call(this,"".concat(o,"-tools-fixed")))).icon=new nt("freeze"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ba(t,e)}(e,t),e}(lt);function va(t){return(va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ga(t,e){return!e||"object"!==va(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wa(t){return(wa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ma(t,e){return(ma=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Oa=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=ga(this,wa(e).call(this,"".concat(o,"-tools-filter")))).icon=new nt("filter"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ma(t,e)}(e,t),e}(lt);function Ta(t){return(Ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ea(t,e){return!e||"object"!==Ta(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Sa(t){return(Sa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _a(t,e){return(_a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xa=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Ea(this,Sa(e).call(this,"".concat(o,"-tools-format")))).icon=new nt("functions"),t.setIcon(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_a(t,e)}(e,t),e}(Rt);function ka(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ca=function(){function t(e){var n=e.align,r=void 0===n?Zc.ALIGN.left:n,o=e.verticalAlign,i=void 0===o?Zc.VERTICAL_ALIGN.center:o,c=e.textWrap,l=void 0===c?Zc.TEXT_WRAP.TRUNCATE:c,a=e.strikethrough,s=void 0!==a&&a,u=e.underline,f=void 0!==u&&u,h=e.color,p=void 0===h?"rgb(0,0,0)":h,y=e.name,b=void 0===y?"Arial":y,d=e.size,v=void 0===d?12:d,g=e.bold,w=void 0!==g&&g,m=e.italic,O=void 0!==m&&m,T=e.angle,E=void 0===T?0:T,S=e.direction,_=void 0===S?Zc.TEXT_DIRECTION.HORIZONTAL:S,x=e.padding,k=void 0===x?5:x;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.align=r,this.verticalAlign=i,this.textWrap=l,this.strikethrough=s,this.underline=f,this.color=p,this.name=b,this.size=v,this.bold=w,this.italic=O,this.direction=_,this.angle=E,this.padding=k}var e,n,r;return e=t,(n=[{key:"toCssStyle",value:function(){var t=this.align,e=this.size,n=this.color,r=this.bold,o=this.italic,i=this.name,c="left",l="center";switch(this.verticalAlign){case Zc.VERTICAL_ALIGN.center:l="center";break;case Zc.VERTICAL_ALIGN.top:l="flex-start";break;case Zc.VERTICAL_ALIGN.bottom:l="flex-end"}switch(t){case Zc.ALIGN.left:c="flex-start";break;case Zc.ALIGN.center:c="center";break;case Zc.ALIGN.right:c="flex-end"}var a="\n      justify-content:".concat(c,";\n      font-size: ").concat(oc.cvCssPx(e),"px;color: ").concat(n,";font-weight: ").concat(r?"bold":"initial",";\n      font-style: ").concat(o?"italic":"initial",";\n      font-family: ").concat(i,";\n      align-items: ").concat(l,";\n    ");return a=a.replace(/\s/g,"")}},{key:"clone",value:function(){return new t({align:this.align,verticalAlign:this.verticalAlign,textWrap:this.textWrap,strikethrough:this.strikethrough,underline:this.underline,color:this.color,name:this.name,size:this.size,bold:this.bold,italic:this.italic,angle:this.angle,direction:this.direction,padding:this.padding})}}])&&ka(e.prototype,n),r&&ka(e,r),t}();function Pa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function La(t,e,n){return e&&Pa(t.prototype,e),n&&Pa(t,n),t}var ja=0,Aa=function(){function t(e){var n=e.widthType,r=void 0===n?oc.LINE_WIDTH_TYPE.low:n,o=e.width,i=void 0===o?-1:o,c=e.color,l=void 0===c?"#000000":c,a=e.zIndex,s=void 0===a?0:a,u=e.display,f=void 0!==u&&u,h=e.type,p=void 0===h?ac.SOLID_LINE:h;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$zIndex=s,this.$display=f,this.$color=l,this.$type=p,this.$widthType=1===i?oc.LINE_WIDTH_TYPE.low:2===i?oc.LINE_WIDTH_TYPE.medium:3===i?oc.LINE_WIDTH_TYPE.high:r,s>ja&&(ja=s)}return La(t,null,[{key:"getZIndex",value:function(){return ja+=1}}]),La(t,[{key:"equal",value:function(t){var e=this.widthType===t.widthType,n=this.color===t.color,r=this.type===t.type;return n&&e&&r}},{key:"toJSON",value:function(){return{zIndex:this.$zIndex,display:this.$display,widthType:this.$widthType,color:this.$color,type:this.$type}}},{key:"priority",value:function(t){if(_.isUnDef(t))return-2;var e=this.zIndex,n=t.zIndex;return e>n?1:n>e?-1:0}},{key:"zIndex",get:function(){return this.$zIndex}},{key:"display",get:function(){return this.$display},set:function(e){this.$zIndex=t.getZIndex(),this.$display=e}},{key:"widthType",get:function(){return this.$widthType},set:function(e){this.$zIndex=t.getZIndex(),this.$widthType=e}},{key:"color",get:function(){return this.$color},set:function(e){this.$zIndex=t.getZIndex(),this.$color=e}},{key:"type",get:function(){return this.$type},set:function(e){this.$zIndex=t.getZIndex(),this.$type=e}}]),t}();function Na(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ra=function(){function t(e){var n=e.left,r=void 0===n?{}:n,o=e.top,i=void 0===o?{}:o,c=e.right,l=void 0===c?{}:c,a=e.bottom,s=void 0===a?{}:a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.left=new Aa(r),this.top=new Aa(i),this.right=new Aa(l),this.bottom=new Aa(s)}var e,n,r;return e=t,(n=[{key:"setAllDisplay",value:function(t){this.setLDisplay(t),this.setTDisplay(t),this.setRDisplay(t),this.setBDisplay(t)}},{key:"setLDisplay",value:function(t){this.left.display=t}},{key:"setTDisplay",value:function(t){this.top.display=t}},{key:"setRDisplay",value:function(t){this.right.display=t}},{key:"setBDisplay",value:function(t){this.bottom.display=t}},{key:"setAllColor",value:function(t){this.setLColor(t),this.setTColor(t),this.setRColor(t),this.setBColor(t)}},{key:"setLColor",value:function(t){this.left.color=t}},{key:"setTColor",value:function(t){this.top.color=t}},{key:"setRColor",value:function(t){this.right.color=t}},{key:"setBColor",value:function(t){this.bottom.color=t}},{key:"setAllWidthType",value:function(t){this.setLWidthType(t),this.setTWidthType(t),this.setRWidthType(t),this.setBWidthType(t)}},{key:"setLWidthType",value:function(t){this.left.widthType=t}},{key:"setTWidthType",value:function(t){this.top.widthType=t}},{key:"setRWidthType",value:function(t){this.right.widthType=t}},{key:"setBWidthType",value:function(t){this.bottom.widthType=t}},{key:"setAllType",value:function(t){this.setLType(t),this.setTType(t),this.setRType(t),this.setBType(t)}},{key:"setLType",value:function(t){this.left.type=t}},{key:"setTType",value:function(t){this.top.type=t}},{key:"setRType",value:function(t){this.right.type=t}},{key:"setBType",value:function(t){this.bottom.type=t}},{key:"clone",value:function(){return new t({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}}])&&Na(e.prototype,n),r&&Na(e,r),t}();function Ia(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Va=function(){function t(e){var n=e.text,r=void 0===n?_.EMPTY:n,o=e.background,i=void 0===o?_.Nul:o,c=e.format,l=void 0===c?"default":c,a=e.fontAttr,s=void 0===a?{}:a,u=e.borderAttr,f=void 0===u?{}:u,h=e.contentWidth,p=void 0===h?0:h;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.background=i,this.format=l,this.text=r,this.fontAttr=new Ca(s),this.borderAttr=new Ra(f),this.contentWidth=p}var e,n,r;return e=t,(n=[{key:"setContentWidth",value:function(t){this.contentWidth=t}},{key:"toCssStyle",value:function(){var t=this.background,e=this.fontAttr,n="\n      background:".concat(t,";\n    ");return n=n.replace(/\s/g,""),e.toCssStyle()+n}},{key:"clone",value:function(){return new t({background:this.background,format:this.format,text:this.text,fontAttr:this.fontAttr,borderAttr:this.borderAttr,contentWidth:this.contentWidth})}},{key:"toJSON",value:function(){return{background:this.background,format:this.format,text:this.text,fontAttr:this.fontAttr,borderAttr:this.borderAttr,contentWidth:this.contentWidth}}}])&&Ia(e.prototype,n),r&&Ia(e,r),t}();function Da(t){return(Da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ha(t,e){return!e||"object"!==Da(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ma(t){return(Ma=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wa(t,e){return(Wa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ba=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ha(this,Ma(e).call(this,"".concat(o,"-scale-context-menu-item")))).scale=t,n.titleElement=P("div","".concat(o,"-scale-context-menu-item-title")),n.titleElement.text("".concat(t,"%")),n.titleElement.css("text-align","center"),n.children(n.titleElement),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wa(t,e)}(e,t),e}(_e);function Ya(t){return(Ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ga(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ua(t,e){return!e||"object"!==Ya(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function za(t){return(za=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fa(t,e){return(Fa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Xa=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Ua(this,za(e).call(this,"".concat(o,"-scale-context-menu"),_.mergeDeep({onUpdate:function(){}},n)))).items=[new Ba(200),new Ba(150),new Ba(125),new Ba(100),new Ba(90),new Ba(75),new Ba(50)],t.items.forEach((function(e){e.on(r.SYSTEM_EVENT_TYPE.CLICK,(function(){t.update(e.scale)})),t.addItem(e)})),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fa(t,e)}(e,t),n=e,(i=[{key:"update",value:function(t){this.options.onUpdate(t),this.close()}}])&&Ga(n.prototype,i),c&&Ga(n,c),e}(me);function $a(t){return($a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Za(t){return(Za=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qa(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ka(t,e){return(Ka=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ja=function(t){function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{contextMenu:{}};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(r=Za(e).call(this,"".concat(o,"-tools-scale")))||"object"!==$a(r)&&"function"!=typeof r?qa(n):r).options=i,t.setTitle("100%"),t.setWidth(50),t.setEllipsis(),t.scaleContextMenu=new Xa(_.copyProp({el:qa(t),position:fe.BOTTOM},t.options.contextMenu)),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ka(t,e)}(e,t),e}(Rt);function Qa(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var c,l=t[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ts(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var es=function(){function t(e,n,r,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sri=e,this.sci=n,this.eri=r,this.eci=o,this.w=i,this.h=c}var e,n,r;return e=t,r=[{key:"valueOf",value:function(e){var n=e.split(":"),r=Qa(_.expr2xy(n[0]),2),o=r[0],i=r[1],c=i,l=o;if(n.length>1){var a=Qa(_.expr2xy(n[1]),2);l=a[0],c=a[1]}return new t(i,o,c,l)}}],(n=[{key:"set",value:function(t,e,n,r){this.sri=t,this.sci=e,this.eri=n,this.eci=r}},{key:"multiple",value:function(){return this.eri-this.sri>0||this.eci-this.sci>0}},{key:"includes",value:function(){for(var t=0,e=0,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];if(1===r.length){var i=_.expr2xy(r[0]),c=Qa(i,2);e=c[0],t=c[1]}else 2===r.length&&(t=r[0],e=r[1]);var l=this.sri,a=this.sci,s=this.eri,u=this.eci;return l<=t&&t<=s&&a<=e&&e<=u}},{key:"each",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},n=this.sri,r=this.sci,o=this.eri,i=this.eci,c=n;c<=o;c+=1)if(e(c))for(var l=r;l<=i;l+=1)t(c,l)}},{key:"contains",value:function(t){return this.sri<=t.sri&&this.sci<=t.sci&&this.eri>=t.eri&&this.eci>=t.eci}},{key:"within",value:function(t){return this.sri>=t.sri&&this.sci>=t.sci&&this.eri<=t.eri&&this.eci<=t.eci}},{key:"disjoint",value:function(t){return this.sri>t.eri||this.sci>t.eci||t.sri>this.eri||t.sci>this.eci}},{key:"intersects",value:function(t){return this.sri<=t.eri&&this.sci<=t.eci&&t.sri<=this.eri&&t.sci<=this.eci}},{key:"union",value:function(e){var n=this.sri,r=this.sci,o=this.eri,i=this.eci;return new t(e.sri<n?e.sri:n,e.sci<r?e.sci:r,e.eri>o?e.eri:o,e.eci>i?e.eci:i)}},{key:"coincide",value:function(e){var n=this.sri,r=this.sci,o=this.eri,i=this.eci;return this.disjoint(e)?t.EMPTY:new t(e.sri>n?e.sri:n,e.sci>r?e.sci:r,e.eri<o?e.eri:o,e.eci<i?e.eci:i)}},{key:"coincideDifference",value:function(e){return this.coincide(e).equals(t.EMPTY)?[]:this.difference(e)}},{key:"difference",value:function(e){var n=[],r=function(e,r,o,i){n.push(new t(e,r,o,i))},o=this.sri,i=this.sci,c=this.eri,l=this.eci,a=e.sri-o,s=e.sci-i,u=c-e.eri,f=l-e.eci;return a>0?(r(o,i,e.sri-1,l),u>0?(r(e.eri+1,i,c,l),s>0&&r(e.sri,i,e.eri,e.sci-1),f>0&&r(e.sri,e.eci+1,e.eri,l)):(s>0&&r(e.sri,i,c,e.sci-1),f>0&&r(e.sri,e.eci+1,c,l))):u>0&&(r(e.eri+1,i,c,l),s>0&&r(o,i,e.eri,e.sci-1),f>0&&r(o,e.eci+1,e.eri,l)),s>0?(r(o,i,c,e.sci-1),f>0?(r(o,e.eri+1,c,l),a>0&&r(o,e.sci,e.sri-1,e.eci),u>0&&r(e.sri+1,e.sci,c,e.eci)):(a>0&&r(o,e.sci,e.sri-1,l),u>0&&r(e.sri+1,e.sci,c,l))):f>0&&(r(o,e.eci+1,c,l),a>0&&r(o,i,e.sri-1,e.eci),u>0&&r(e.eri+1,i,c,e.eci)),n}},{key:"size",value:function(){return[this.eri-this.sri+1,this.eci-this.sci+1]}},{key:"brink",value:function(){var e=this.sri,n=this.eri,r=this.sci,o=this.eci,i=new t(e,r,e,o),c=new t(n,r,n,o);return{top:i,right:new t(e,o,n,o),bottom:c,left:new t(e,r,n,r)}}},{key:"equals",value:function(t){return this.eri===t.eri&&this.eci===t.eci&&this.sri===t.sri&&this.sci===t.sci}},{key:"clone",value:function(){return new t(this.sri,this.sci,this.eri,this.eci,this.w,this.h)}},{key:"toString",value:function(){var t=this.sri,e=this.sci,n=this.eri,r=this.eci,o=_.xy2expr(e,t);return this.multiple()&&(o="".concat(o,":").concat(_.xy2expr(r,n))),o}}])&&ts(e.prototype,n),r&&ts(e,r),t}();function ns(t){return(ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rs(t,e){return!e||"object"!==ns(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function os(t){return(os=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function is(t,e){return(is=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}es.EMPTY=new es(-1,-1,-1,-1);var cs=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),rs(this,os(e).call(this,"".concat(o,"-x-screen-zone ").concat(t)))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&is(t,e)}(e,t),e}(I);function ls(t){return(ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function as(t,e){return!e||"object"!==ls(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ss(t){return(ss=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function us(t,e){return(us=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fs=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),as(this,ss(e).call(this,"".concat(o,"-x-screen-br-zone")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&us(t,e)}(e,t),e}(cs);function hs(t){return(hs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ps(t,e){return!e||"object"!==hs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ys(t){return(ys=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bs(t,e){return(bs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ds=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ps(this,ys(e).call(this,"".concat(o,"-x-screen-lt-zone")))).xScreen=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bs(t,e)}(e,t),e}(cs);function vs(t){return(vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gs(t,e){return!e||"object"!==vs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ws(t){return(ws=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ms(t,e){return(ms=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Os=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),gs(this,ws(e).call(this,"".concat(o,"-x-screen-l-zone")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ms(t,e)}(e,t),e}(cs);function Ts(t){return(Ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Es(t,e){return!e||"object"!==Ts(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ss(t){return(Ss=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _s(t,e){return(_s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xs=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Es(this,Ss(e).call(this,"".concat(o,"-x-screen-t-zone")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_s(t,e)}(e,t),e}(cs);function ks(t){return(ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ps(t,e){return!e||"object"!==ks(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ls(t){return(Ls=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function js(t,e){return(js=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var As={BRT:Symbol("BRT"),BRL:Symbol("BRL"),BR:Symbol("br"),ALL:Symbol("ALL")},Ns=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ps(this,Ls(e).call(this,"".concat(o,"-x-screen")))).pool=[],n.table=t,n.displayArea=As.BR,n.ltZone=new ds,n.tZone=new xs,n.brZone=new fs,n.lZone=new Os,n.child(n.ltZone),n.child(n.tZone),n.child(n.brZone),n.child(n.lZone),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&js(t,e)}(e,t),n=e,(i=[{key:"onAttach",value:function(){this.bind(),this.setZone()}},{key:"bind",value:function(){var t=this,e=this.table;Vt.bind(e,r.TABLE_EVENT_TYPE.SCALE_CHANGE,(function(){t.setZone()})),Vt.bind(e,r.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(){t.setZone()})),Vt.bind(e,r.TABLE_EVENT_TYPE.CHANGE_WIDTH,(function(){t.setZone()}))}},{key:"addItem",value:function(t){this.pool.push(t),this.ltZone.attach(t.lt),this.lZone.attach(t.l),this.brZone.attach(t.br),this.tZone.attach(t.t),t.setXScreen(this),t.onAdd(this)}},{key:"setZone",value:function(){var t=this.table,e=t.index,n=t.getFixedHeight(),r=t.getFixedWidth(),o=e.getHeight()+n,i=e.getWidth()+r;this.brZone.offset({left:i,top:o});var c=r>0&&n>0,l=n>0,a=r>0;this.ltZone.hide(),this.lZone.hide(),this.tZone.hide();var s=oc.dpr();c?(this.displayArea=As.ALL,this.ltZone.offset({left:e.getWidth(),top:e.getHeight(),width:r,height:n}).show(),this.ltZone.css("border-width","".concat(s,"px")),this.lZone.offset({left:e.getWidth(),top:o,width:r,height:t.visualHeight()-e.getHeight()-n}).show(),this.lZone.css("border-width","".concat(s,"px")),this.tZone.offset({left:i,top:e.getHeight(),width:t.visualWidth()-e.getWidth()-r,height:n}).show(),this.tZone.css("border-width","".concat(s,"px"))):a?(this.displayArea=As.BRL,this.lZone.offset({left:e.getWidth(),top:o,width:r,height:t.visualHeight()-e.getHeight()-n}).show(),this.lZone.css("border-width","".concat(s,"px"))):l?(this.displayArea=As.BRL,this.tZone.offset({left:i,top:e.getHeight(),width:t.visualWidth()-e.getWidth()-r,height:n}).show(),this.tZone.css("border-width","".concat(s,"px"))):this.displayArea=As.BR}},{key:"findType",value:function(t){var e=!0,n=!1,r=void 0;try{for(var o,i=this.pool[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var c=o.value;if(c instanceof t)return c}}catch(t){n=!0,r=t}finally{try{e||null==i.return||i.return()}finally{if(n)throw r}}return null}}])&&Cs(n.prototype,i),c&&Cs(n,c),e}(I);function Rs(t){return(Rs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Is(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vs(t,e){return!e||"object"!==Rs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ds(t){return(Ds=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hs(t,e){return(Hs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ms=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Vs(this,Ds(e).call(this,"".concat(o,"-x-screen-part ").concat(t)))).xScreenZone=null,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hs(t,e)}(e,t),n=e,(r=[{key:"onAttach",value:function(t){this.xScreenZone=t}}])&&Is(n.prototype,r),i&&Is(n,i),e}(I);function Ws(t){return(Ws="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bs(t,e){return!e||"object"!==Ws(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ys(t){return(Ys=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gs(t,e){return(Gs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Us=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Bs(this,Ys(e).call(this,"".concat(o,"-x-screen-lt-part ").concat(t)))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gs(t,e)}(e,t),e}(Ms);function zs(t){return(zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fs(t,e){return!e||"object"!==zs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xs(t){return(Xs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $s(t,e){return($s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zs=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Fs(this,Xs(e).call(this,"".concat(o,"-x-screen-br-part ").concat(t)))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$s(t,e)}(e,t),e}(Ms);function qs(t){return(qs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ks(t,e){return!e||"object"!==qs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Js(t){return(Js=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qs(t,e){return(Qs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var tu=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ks(this,Js(e).call(this,"".concat(o,"-x-screen-l-part ").concat(t)))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qs(t,e)}(e,t),e}(Ms);function eu(t){return(eu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nu(t,e){return!e||"object"!==eu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ru(t){return(ru=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ou(t,e){return(ou=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var iu=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),nu(this,ru(e).call(this,"".concat(o,"-x-screen-br-part ").concat(t)))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ou(t,e)}(e,t),e}(Ms);function cu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function lu(t){return(lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function au(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function su(t,e){return!e||"object"!==lu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function uu(t){return(uu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fu(t,e){return(fu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function hu(t){return(hu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bu(t,e,n){return e&&yu(t.prototype,e),n&&yu(t,n),t}function du(t,e){return!e||"object"!==hu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vu(t){return(vu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gu(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wu(t,e)}function wu(t,e){return(wu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var mu=function(t){function e(){return pu(this,e),du(this,vu(e).apply(this,arguments))}return gu(e,t),bu(e,[{key:"measureHeight",value:function(t){return this.measureFixedHeight(t)+this.measureScrollViewHeight(t)}},{key:"measureWidth",value:function(t){return this.measureFixedWidth(t)+this.measureScrollViewWidth(t)}},{key:"measureLeft",value:function(t){return this.measureFixedLeft(t)+this.measureScrollViewLeft(t)}},{key:"measureTop",value:function(t){return this.measureFixedTop(t)+this.measureScrollViewTop(t)}},{key:"measureBoundOut",value:function(t){if(!t)return!0;var e=this.table,n=e.fixed,r=n.fxLeft,o=n.fxTop,i=e.getScrollView();if(r>-1&&o>-1){var c=new es(0,0,o,r),l=new es(i.sri,0,i.eri,r),a=new es(0,i.sci,o,i.eci);if(!c.coincide(t).equals(es.EMPTY))return!1;if(!l.coincide(t).equals(es.EMPTY))return!1;if(!a.coincide(t).equals(es.EMPTY))return!1}if(r>-1){if(!new es(i.sri,0,i.eri,r).coincide(t).equals(es.EMPTY))return!1}else if(o>-1){if(!new es(0,i.sci,o,i.eci).coincide(t).equals(es.EMPTY))return!1}return i.coincide(t).equals(es.EMPTY)}}]),e}(function(t){function e(){return pu(this,e),du(this,vu(e).apply(this,arguments))}return gu(e,t),bu(e,[{key:"measureScrollViewHeight",value:function(t){var e=this.table,n=e.rows,r=e.getScrollView().coincide(t);return r.equals(es.EMPTY)?0:n.rectRangeSumHeight(r)}},{key:"measureScrollViewWidth",value:function(t){var e=this.table,n=e.cols,r=e.getScrollView().coincide(t);return r.equals(es.EMPTY)?0:n.rectRangeSumWidth(r)}},{key:"measureScrollViewLeft",value:function(t){var e=this.table,n=e.cols,r=e.getScrollView(),o=r.coincide(t);return o.equals(es.EMPTY)?0:n.sectionSumWidth(r.sci,o.sci-1)}},{key:"measureScrollViewTop",value:function(t){var e=this.table,n=e.rows,r=e.getScrollView(),o=r.coincide(t);return o.equals(es.EMPTY)?0:n.sectionSumHeight(r.sri,o.sri-1)}}]),e}(function(t){function e(){return pu(this,e),du(this,vu(e).apply(this,arguments))}return gu(e,t),bu(e,[{key:"measureFixedHeight",value:function(t){var e=this.table,n=e.fixed,r=e.rows,o=n.fxTop;return t.sri>=o?0:r.sectionSumHeight(t.sri,o)}},{key:"measureFixedWidth",value:function(t){var e=this.table,n=e.fixed,r=e.cols,o=n.fxLeft;return t.sci>=o?0:r.sectionSumWidth(t.sci,o)}},{key:"measureFixedLeft",value:function(t){var e=this.table,n=e.fixed,r=e.cols,o=n.fxLeft;return t.sci>=o?0:r.sectionSumWidth(0,t.sci-1)}},{key:"measureFixedTop",value:function(t){var e=this.table,n=e.fixed,r=e.rows,o=n.fxTop;return t.sri>=o?0:r.sectionSumHeight(0,t.sri-1)}}]),e}(function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),su(this,uu(e).apply(this,arguments))}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fu(t,e)}(e,t),n=e,(r=[{key:"offset",value:function(t){var e=this.table,n=e.cols,r=e.rows,o=e.getScrollView(),i=n.sectionSumWidth(o.sci,t.sci-1),c=r.sectionSumHeight(o.sri,t.sri-1);this.setLeft(i),this.setTop(c),this.setWidth(t.w),this.setHeight(t.h)}},{key:"setLeft",value:function(t){var e=this.table,n=e.fixed,r=e.cols.sectionSumWidth(0,n.fxLeft);this.lt.offset({left:t}),this.l.offset({left:t}),this.t.offset({left:t-r}),this.br.offset({left:t-r})}},{key:"setTop",value:function(t){var e=this.table,n=e.fixed,r=e.rows.sectionSumHeight(0,n.fxTop);this.lt.offset({top:t}),this.l.offset({top:t}),this.t.offset({top:t-r}),this.br.offset({top:t-r})}}])&&au(n.prototype,r),o&&au(n,o),e}(function(){function t(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).table;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e,this.lt=new Us,this.t=new Zs,this.br=new iu,this.l=new tu,this.xScreen=null}var e,n,r;return e=t,(n=[{key:"setXScreen",value:function(t){this.xScreen=t}},{key:"onAdd",value:function(){}},{key:"hide",value:function(){this.lt.hide(),this.t.hide(),this.br.hide(),this.l.hide()}},{key:"show",value:function(){this.lt.show(),this.t.show(),this.br.show(),this.l.show()}},{key:"setHeight",value:function(t){this.lt.offset({height:t}),this.t.offset({height:t}),this.br.offset({height:t}),this.l.offset({height:t})}},{key:"setWidth",value:function(t){this.lt.offset({width:t}),this.t.offset({width:t}),this.br.offset({width:t}),this.l.offset({width:t})}}])&&cu(e.prototype,n),r&&cu(e,r),t}()))));function Ou(t){return(Ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Eu(t,e){return!e||"object"!==Ou(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Su(t){return(Su=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _u(t,e){return(_u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xu={LT:Symbol("lt"),T:Symbol("t"),BR:Symbol("br"),L:Symbol("l"),LTT:Symbol("ltt"),LTL:Symbol("ltl"),BRT:Symbol("brt"),BRL:Symbol("brl"),ALL:Symbol("all")},ku=function(t){function e(t){var n,r=t.table,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Eu(this,Su(e).call(this,{table:r}))).blt=new Us(o),n.bt=new Zs(o),n.bl=new tu(o),n.bbr=new iu(o),n.lt.child(n.blt),n.t.child(n.bt),n.l.child(n.bl),n.br.child(n.bbr),n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_u(t,e)}(e,t),n=e,(r=[{key:"borderDisplay",value:function(t,e){var n=this.table.getScrollView(),r={bottom:!1,left:!1,top:!1,right:!1};switch(e){case xu.LT:r.bottom=!0,r.top=!0,r.left=!0,r.right=!0;break;case xu.T:r.bottom=!0,r.top=!0,r.left=t.sci>=n.sci&&t.sci<=n.eci,r.right=t.eci<=n.eci&&t.eci>=n.sci;break;case xu.BR:r.bottom=t.eri<=n.eri&&t.eri>=n.sri,r.top=t.sri>=n.sri&&t.sri<=n.eri,r.left=t.sci>=n.sci&&t.sci<=n.eci,r.right=t.eci<=n.eci&&t.eci>=n.sci;break;case xu.L:r.bottom=t.eri<=n.eri&&t.eri>=n.sri,r.top=t.sri>=n.sri&&t.sri<=n.eri,r.left=!0,r.right=!0;break;case xu.LTT:r.bottom=!0,r.top=!0,r.left=!0,r.right=t.eci<=n.eci&&t.eci>=n.sci;break;case xu.LTL:r.bottom=t.eri<=n.eri&&t.eri>=n.sri,r.top=!0,r.left=!0,r.right=!0;break;case xu.BRT:r.bottom=t.eri<=n.eri&&t.eri>=n.sri,r.top=!0,r.left=t.sci>=n.sci&&t.sci<=n.eci,r.right=t.eci<=n.eci&&t.eci>=n.sci;break;case xu.BRL:r.bottom=t.eri<=n.eri&&t.eri>=n.sri,r.top=t.sri>=n.sri&&t.sri<=n.eri,r.left=!0,r.right=t.eci<=n.eci&&t.eci>=n.sci;break;case xu.ALL:r.bottom=t.eri<=n.eri&&t.eri>=n.sri,r.top=!0,r.left=!0,r.right=t.eci<=n.eci&&t.eci>=n.sci}return r}},{key:"rangeOverGo",value:function(t){var e=this.table,n=e.cols,r=e.rows,o=e.fixed,i=o.fxTop,c=o.fxLeft,l=r.len-1,a=n.len-1;if(i>-1&&c>-1){var s=new es(0,0,i,c),u=new es(0,c,i,a),f=new es(i,c,l,a),h=new es(i,0,l,c);if(s.contains(t))return xu.LT;if(u.contains(t))return xu.T;if(f.contains(t))return xu.BR;if(h.contains(t))return xu.L;var p=new es(0,0,i,a),y=new es(0,0,l,c),b=new es(0,c,l,a),d=new es(i,0,l,a);return p.contains(t)?xu.LTT:y.contains(t)?xu.LTL:b.contains(t)?xu.BRT:d.contains(t)?xu.BRL:xu.ALL}if(i>-1){var v=new es(0,0,i,a),g=new es(i,0,l,a);return v.contains(t)?xu.T:g.contains(t)?xu.BR:xu.ALL}if(c>-1){var w=new es(0,c,l,a),m=new es(0,0,l,c);return w.contains(t)?xu.BR:m.contains(t)?xu.L:xu.ALL}return xu.BR}},{key:"hideAllBorder",value:function(){var t=[];switch(this.xScreen.displayArea){case As.ALL:t.push(this.bbr),t.push(this.bt),t.push(this.bl),t.push(this.blt);break;case As.BR:t.push(this.bbr);break;case As.BRL:t.push(this.bbr),t.push(this.bl);break;case As.BRT:t.push(this.bbr),t.push(this.bt)}t.forEach((function(t){t.removeClass("show-bottom-border"),t.removeClass("show-top-border"),t.removeClass("show-right-border"),t.removeClass("show-left-border")}))}},{key:"showBBorder",value:function(t){switch(t){case xu.LT:this.blt.addClass("show-bottom-border");break;case xu.L:this.bl.addClass("show-bottom-border");break;case xu.T:this.bt.addClass("show-bottom-border");break;case xu.BR:this.bbr.addClass("show-bottom-border");break;case xu.LTT:this.blt.addClass("show-bottom-border"),this.bt.addClass("show-bottom-border");break;case xu.LTL:this.bl.addClass("show-bottom-border");break;case xu.BRT:this.bbr.addClass("show-bottom-border");break;case xu.BRL:case xu.ALL:this.bl.addClass("show-bottom-border"),this.bbr.addClass("show-bottom-border")}}},{key:"showTBorder",value:function(t){switch(t){case xu.LT:this.blt.addClass("show-top-border");break;case xu.L:this.bl.addClass("show-top-border");break;case xu.T:this.bt.addClass("show-top-border");break;case xu.BR:this.bbr.addClass("show-top-border");break;case xu.LTT:this.blt.addClass("show-top-border"),this.bt.addClass("show-top-border");break;case xu.LTL:this.blt.addClass("show-top-border");break;case xu.BRT:this.bt.addClass("show-top-border");break;case xu.BRL:this.bl.addClass("show-top-border"),this.bbr.addClass("show-top-border");break;case xu.ALL:this.blt.addClass("show-top-border"),this.bt.addClass("show-top-border")}}},{key:"showLBorder",value:function(t){switch(t){case xu.LT:this.blt.addClass("show-left-border");break;case xu.L:this.bl.addClass("show-left-border");break;case xu.T:this.bt.addClass("show-left-border");break;case xu.BR:this.bbr.addClass("show-left-border");break;case xu.LTT:this.blt.addClass("show-left-border");break;case xu.LTL:this.blt.addClass("show-left-border"),this.bl.addClass("show-left-border");break;case xu.BRT:this.bt.addClass("show-left-border"),this.bbr.addClass("show-left-border");break;case xu.BRL:this.bl.addClass("show-left-border");break;case xu.ALL:this.blt.addClass("show-left-border"),this.bl.addClass("show-left-border")}}},{key:"showRBorder",value:function(t){switch(t){case xu.LT:this.blt.addClass("show-right-border");break;case xu.L:this.bl.addClass("show-right-border");break;case xu.T:this.bt.addClass("show-right-border");break;case xu.BR:this.bbr.addClass("show-right-border");break;case xu.LTT:this.bt.addClass("show-right-border");break;case xu.LTL:this.blt.addClass("show-right-border"),this.bl.addClass("show-right-border");break;case xu.BRT:this.bt.addClass("show-right-border"),this.bbr.addClass("show-right-border");break;case xu.BRL:this.br.addClass("show-right-border");break;case xu.ALL:this.bt.addClass("show-right-border"),this.bbr.addClass("show-right-border")}}}])&&Tu(n.prototype,r),o&&Tu(n,o),e}(mu);function Cu(t){return(Cu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lu(t,e){return!e||"object"!==Cu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ju(t){return(ju=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Au(t,e){return(Au=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Nu=function(t){function e(t){var n,r=t.table;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Lu(this,ju(e).call(this,{table:r},"".concat(o,"-part-border-css")))).type="solid",n.setBorderType(n.type),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Au(t,e)}(e,t),n=e,(r=[{key:"setBorderType",value:function(t){this.type=t,this.blt.addClass(t),this.bl.addClass(t),this.bt.addClass(t),this.bbr.addClass(t)}}])&&Pu(n.prototype,r),i&&Pu(n,i),e}(ku);function Ru(t){return(Ru="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Iu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vu(t,e){return!e||"object"!==Ru(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Du(t){return(Du=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hu(t,e){return(Hu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Mu={LT:Symbol("LT"),L:Symbol("L"),T:Symbol("T"),BR:Symbol("BR")},Wu=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Vu(this,Du(e).call(this,{table:t}))).targetOffset={top:0,left:0,width:0,height:0},n.selectLocal=Mu.BR,n.selectRange=null,n.selectBoundOut=!1,n.downRange=null,n.moveRange=null,n.overGo=null,n.ltElem=new I("".concat(o,"-x-select-area")),n.brElem=new I("".concat(o,"-x-select-area")),n.lElem=new I("".concat(o,"-x-select-area")),n.tElem=new I("".concat(o,"-x-select-area")),n.ltCorner=new I("".concat(o,"-x-select-corner")),n.lCorner=new I("".concat(o,"-x-select-corner")),n.tCorner=new I("".concat(o,"-x-select-corner")),n.brCorner=new I("".concat(o,"-x-select-corner")),n.ltElem.child(n.ltCorner),n.lElem.child(n.lCorner),n.tElem.child(n.tCorner),n.brElem.child(n.brCorner),n.blt.child(n.ltElem),n.bl.child(n.lElem),n.bt.child(n.tElem),n.bbr.child(n.brElem),n.setBorderType("solid"),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hu(t,e)}(e,t),n=e,(i=[{key:"onAdd",value:function(){this.bind(),this.hide()}},{key:"bind",value:function(){var t=this,e=this.table,n=e.mousePointer,o=e.focus;Vt.bind(e,r.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(){t.selectOffsetHandle(),t.selectBorderHandle(),t.selectCornerHandle()})),Vt.bind(e,r.TABLE_EVENT_TYPE.CHANGE_WIDTH,(function(){t.selectOffsetHandle(),t.selectBorderHandle(),t.selectCornerHandle()})),Vt.bind(e,r.TABLE_EVENT_TYPE.SCALE_CHANGE,(function(){t.selectOffsetHandle(),t.selectBorderHandle(),t.selectCornerHandle()})),Vt.bind(e,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(i){if(0===i.button&&o.activate.el===e){var c=e.computeEventXy(i),l=c.x,a=c.y;t.downSelectRange(l,a),t.selectOffsetHandle(),t.selectBorderHandle(),t.selectCornerHandle();var s="cell";switch(t.selectLocal){case Mu.L:s="row";break;case Mu.T:s="s-resize"}n.set(s),e.trigger(r.TABLE_EVENT_TYPE.SELECT_DOWN),e.trigger(r.TABLE_EVENT_TYPE.SELECT_CHANGE),Vt.mouseMoveUp(document,(function(n){var o=e.computeEventXy(n),i=o.x,c=o.y;t.moveSelectRange(i,c),t.selectOffsetHandle(),t.selectBorderHandle(),t.selectCornerHandle(),e.trigger(r.TABLE_EVENT_TYPE.SELECT_CHANGE)}),(function(){e.trigger(r.TABLE_EVENT_TYPE.SELECT_OVER)})),i.stopPropagation()}})),Vt.bind(e,r.SYSTEM_EVENT_TYPE.SCROLL,(function(){t.selectOffsetHandle(),t.selectBorderHandle(),t.selectCornerHandle()}))}},{key:"moveSelectRange",value:function(t,e){var n=this.table,r=n.rows,o=n.cols,i=this.downRange,c=this.selectLocal,l=n.getTableMerges(),a=n.getScrollView(),s=n.getRiCiByXy(t,e),u=s.ri,f=s.ci;if(-1===u&&(u=a.sri),-1===f&&(f=a.sci),c===Mu.LT){var h=i.union(new es(0,0,r.len-1,o.len-1));return this.moveRange=i.union(h),this.selectRange=this.moveRange,void(this.selectLocal=Mu.LT)}if(c===Mu.L){var p=i.union(new es(u,0,u,0));return this.moveRange=i.union(p),this.selectRange=this.moveRange,void(this.selectLocal=Mu.L)}if(c===Mu.T){var y=i.union(new es(0,f,0,f));return this.moveRange=i.union(y),this.selectRange=this.moveRange,void(this.selectLocal=Mu.T)}var b=i.union(new es(u,f,u,f));this.moveRange=l.union(b),this.selectRange=this.moveRange,this.selectLocal=Mu.BR}},{key:"downSelectRange",value:function(t,e){var n=this.table,r=n.rows,o=n.cols,i=n.getTableMerges(),c=n.getRiCiByXy(t,e),l=c.ri,a=c.ci;return-1===l&&-1===a?(this.downRange=new es(0,0,r.len-1,o.len-1),this.selectRange=this.downRange,void(this.selectLocal=Mu.LT)):-1===l?(this.downRange=new es(0,a,r.len-1,a),this.selectRange=this.downRange,void(this.selectLocal=Mu.T)):-1===a?(this.downRange=new es(l,0,l,o.len-1),this.selectRange=this.downRange,void(this.selectLocal=Mu.L)):(this.downRange=i.getFirstIncludes(l,a)||new es(l,a,l,a),this.selectRange=this.downRange,void(this.selectLocal=Mu.BR))}},{key:"selectOffsetHandle",value:function(){var t=this.selectRange;this.selectBoundOut=this.measureBoundOut(t),this.selectBoundOut?this.hide():(this.show(),this.targetOffset.width=this.measureWidth(t),this.targetOffset.height=this.measureHeight(t),this.targetOffset.top=this.measureTop(t),this.targetOffset.left=this.measureLeft(t),this.setTop(this.targetOffset.top),this.setLeft(this.targetOffset.left),this.setHeight(oc.offsetToLineInside(this.targetOffset.height)),this.setWidth(oc.offsetToLineInside(this.targetOffset.width)))}},{key:"selectBorderHandle",value:function(){if(!this.selectBoundOut){var t=this.selectRange,e=this.rangeOverGo(t),n=this.borderDisplay(t,e),r=n.top,o=n.bottom,i=n.left,c=n.right;this.hideAllBorder(),this.overGo=e,r&&this.showTBorder(e),o&&this.showBBorder(e),i&&this.showLBorder(e),c&&this.showRBorder(e)}}},{key:"selectCornerHandle",value:function(){if(!this.selectBoundOut){var t=this.selectLocal;switch(this.brCorner.removeClass("br-pos"),this.lCorner.removeClass("br-pos"),this.tCorner.removeClass("br-pos"),this.ltCorner.removeClass("br-pos"),this.brCorner.removeClass("tr-pos"),this.lCorner.removeClass("tr-pos"),this.tCorner.removeClass("tr-pos"),this.ltCorner.removeClass("tr-pos"),this.brCorner.removeClass("bl-pos"),this.lCorner.removeClass("bl-pos"),this.tCorner.removeClass("bl-pos"),this.ltCorner.removeClass("bl-pos"),t){case Mu.L:this.brCorner.addClass("bl-pos"),this.lCorner.addClass("bl-pos"),this.tCorner.addClass("bl-pos"),this.ltCorner.addClass("bl-pos");break;case Mu.LT:case Mu.BR:this.brCorner.addClass("br-pos"),this.lCorner.addClass("br-pos"),this.tCorner.addClass("br-pos"),this.ltCorner.addClass("br-pos");break;case Mu.T:this.brCorner.addClass("tr-pos"),this.lCorner.addClass("tr-pos"),this.tCorner.addClass("tr-pos"),this.ltCorner.addClass("tr-pos")}}}}])&&Iu(n.prototype,i),c&&Iu(n,c),e}(Nu);function Bu(t){return(Bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yu(t,e){return!e||"object"!==Bu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gu(t){return(Gu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Uu(t,e){return(Uu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var zu='\n  <svg class="'.concat(o,'-copy-style-svg" xmlns="http://www.w3.org/2000/svg" width="100%" height="100%">\n    <line class="').concat(o,"-copy-style-stroked ").concat(o,'-copy-style-stroked-top" x1="0" y1="0" x2="100%" y2="0"/>\n    <line class="').concat(o,"-copy-style-stroked ").concat(o,'-copy-style-stroked-left" x1="0" y1="0" x2="0" y2="100%"/>\n    <line class="').concat(o,"-copy-style-stroked ").concat(o,'-copy-style-stroked-bottom" x1="0" y1="100%" x2="100%" y2="100%"/>\n    <line class="').concat(o,"-copy-style-stroked ").concat(o,'-copy-style-stroked-right" x1="100%" y1="0" x2="100%" y2="100%"/>\n  </svg>\n');function Fu(t){return(Fu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $u(t,e){return!e||"object"!==Fu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zu(t){return(Zu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qu(t,e){return(qu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ku=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=$u(this,Zu(e).call(this,{table:t}))).targetOffset={top:0,left:0,width:0,height:0},n.selectRange=null,n.overGo=null,n.ltElem=new I("".concat(o,"-x-copy-style-area")),n.brElem=new I("".concat(o,"-x-copy-style-area")),n.lElem=new I("".concat(o,"-x-copy-style-area")),n.tElem=new I("".concat(o,"-x-copy-style-area")),n.blt.child(n.ltElem),n.bl.child(n.lElem),n.bt.child(n.tElem),n.bbr.child(n.brElem),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qu(t,e)}(e,t),n=e,(i=[{key:"onAdd",value:function(){this.hideCopyStyle(),this.bind()}},{key:"bind",value:function(){var t=this,e=this.table;Vt.bind(e,r.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(){t.selectOffsetHandle(),t.selectBorderHandle()})),Vt.bind(e,r.TABLE_EVENT_TYPE.CHANGE_WIDTH,(function(){t.selectOffsetHandle(),t.selectBorderHandle()})),Vt.bind(e,r.SYSTEM_EVENT_TYPE.SCROLL,(function(){t.selectOffsetHandle(),t.selectBorderHandle()}))}},{key:"selectOffsetHandle",value:function(){var t=this.selectRange;this.selectBoundOut=this.measureBoundOut(t),this.selectBoundOut?this.hide():(this.show(),this.targetOffset.width=this.measureWidth(t),this.targetOffset.height=this.measureHeight(t),this.targetOffset.top=this.measureTop(t),this.targetOffset.left=this.measureLeft(t),this.setTop(this.targetOffset.top),this.setLeft(this.targetOffset.left),this.setHeight(oc.offsetToLineInside(this.targetOffset.height)),this.setWidth(oc.offsetToLineInside(this.targetOffset.width)))}},{key:"selectBorderHandle",value:function(){var t=this.overGo,e=this.selectRange,n=this.borderDisplay(e,t),r=n.top,o=n.bottom,i=n.left,c=n.right;this.hideAllBorder(),r&&this.showTBorder(t),o&&this.showBBorder(t),i&&this.showLBorder(t),c&&this.showRBorder(t)}},{key:"hideCopyStyle",value:function(){this.hide()}},{key:"showCopyStyle",value:function(){this.show();var t=this.xScreen.findType(Wu),e=t.selectRange,n=t.overGo;this.selectRange=e,this.overGo=n,this.selectOffsetHandle(),this.selectBorderHandle()}}])&&Xu(n.prototype,i),c&&Xu(n,c),e}(function(t){function e(t){var n,r=t.table;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Yu(this,Gu(e).call(this,{table:r},"".concat(o,"-part-border-svg")))).blt.html(zu),n.bl.html(zu),n.bt.html(zu),n.bbr.html(zu),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Uu(t,e)}(e,t),e}(ku));function Ju(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Qu(t){return(Qu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ef(t,e){return!e||"object"!==Qu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function nf(t){return(nf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rf(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&of(t,e)}function of(t,e){return(of=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var cf=function(t){function e(){return tf(this,e),ef(this,nf(e).call(this,"".concat(o,"-tools-divider")))}return rf(e,t),e}(I),lf=function(t){function e(t){var n;tf(this,e),(n=ef(this,nf(e).call(this,"".concat(o,"-tools-menu")))).workTop=t;var r=n.workTop.work.body.sheetView;return n.undo=new ht,n.redo=new vt,n.scale=new Ja({contextMenu:{onUpdate:function(t){n.scale.setTitle("".concat(t,"%")),n.workTop.work.body.setScale(t/100)}}}),n.paintFormat=new Et,n.clearFormat=new Ct,n.format=new $e({contextMenu:{onUpdate:function(t,e){var o=r.getActiveSheet().table,i=o.xScreen,c=o.getStyleCellsHelper(),l=o.getTableDataSnapshot(),a=i.findType(Wu).selectRange;if(n.format.setTitle(e),a){l.begin();var s=l.cellDataProxy;c.getCellOrNewCellByViewRange({rectRange:a,callback:function(e,n,r){var o=r.clone();o.format=t,s.setCell(e,n,o)}}),l.end(),o.render()}}}}),n.font=new pn({contextMenu:{onUpdate:function(t){var e=r.getActiveSheet().table,o=e.xScreen,i=e.getStyleCellsHelper(),c=e.getTableDataSnapshot(),l=o.findType(Wu).selectRange;if(n.font.setTitle(t),l){c.begin();var a=c.cellDataProxy;i.getCellOrNewCellByViewRange({rectRange:l,callback:function(e,n,r){var o=r.clone();o.fontAttr.name=t,a.setCell(e,n,o)}}),c.end(),e.render()}}}}),n.dprFontSize=new Pn({contextMenu:{onUpdate:function(t){var e=r.getActiveSheet().table,o=e.xScreen,i=e.getStyleCellsHelper(),c=e.getTableDataSnapshot(),l=o.findType(Wu).selectRange;if(n.dprFontSize.setTitle(t),l){c.begin();var a=c.cellDataProxy;i.getCellOrNewCellByViewRange({rectRange:l,callback:function(e,n,r){var o=r.clone();o.fontAttr.size=t,a.setCell(e,n,o)}}),c.end(),e.render()}}}}),n.fontColor=new Wr({contextMenu:{onUpdate:function(t){var e=r.getActiveSheet().table,o=e.xScreen,i=e.getStyleCellsHelper(),c=e.getTableDataSnapshot(),l=o.findType(Wu).selectRange;if(n.fontColor.setColor(t),l){c.begin();var a=c.cellDataProxy;i.getCellOrNewCellByViewRange({rectRange:l,callback:function(e,n,r){var o=r.clone();o.fontAttr.color=t,a.setCell(e,n,o)}}),c.end(),e.render()}}}}),n.fillColor=new ro({contextMenu:{onUpdate:function(t){var e=r.getActiveSheet().table,o=e.xScreen,i=e.getStyleCellsHelper(),c=e.getTableDataSnapshot(),l=o.findType(Wu).selectRange;if(n.fillColor.setColor(t),l){c.begin();var a=c.cellDataProxy;i.getCellOrNewCellByViewRange({rectRange:l,callback:function(e,n,r){var o=r.clone();o.background=t,a.setCell(e,n,o)}}),c.end(),e.render()}}}}),n.border=new Tc({contextMenu:{onUpdate:function(t,e,n){var o=r.getActiveSheet().table,i=o.xScreen,c=o.getOperateCellsHelper(),l=o.getTableDataSnapshot(),a=i.findType(Wu).selectRange;if(a){l.begin();var s=l.cellDataProxy,u=a,f=oc.LINE_WIDTH_TYPE.low,h=ac.SOLID_LINE;switch(n){case"line1":f=oc.LINE_WIDTH_TYPE.low,h=ac.SOLID_LINE;break;case"line2":f=oc.LINE_WIDTH_TYPE.medium,h=ac.SOLID_LINE;break;case"line3":f=oc.LINE_WIDTH_TYPE.high,h=ac.SOLID_LINE;break;case"line4":h=ac.DOTTED_LINE;break;case"line5":h=ac.POINT_LINE;break;case"line6":h=ac.DOUBLE_LINE}switch(t){case"border1":c.getCellOrNewCellByViewRange({rectRange:u,callback:function(t,n,r){var o=r.clone(),i=o.borderAttr;i.setAllDisplay(!0),i.setAllColor(e),i.setAllWidthType(f),i.setAllType(h),s.setCell(t,n,o)}});break;case"border2":c.getCellOrNewCellByViewRange({rectRange:u,callback:function(t,n,r){var o=r.clone(),i=o.borderAttr;t!==u.sri&&(i.setTDisplay(!0),i.setTColor(e),i.setTWidthType(f),i.setTType(h)),t!==u.eri&&(i.setBDisplay(!0),i.setBColor(e),i.setBWidthType(f),i.setBType(h)),n!==u.sci&&(i.setLDisplay(!0),i.setLColor(e),i.setLWidthType(f),i.setLType(h)),n!==u.eci&&(i.setRDisplay(!0),i.setRColor(e),i.setRWidthType(f),i.setRType(h)),s.setCell(t,n,o)}});break;case"border3":c.getCellOrNewCellByViewRange({rectRange:u,callback:function(t,n,r){var o=r.clone().borderAttr;t!==u.sri&&(o.setTDisplay(!0),o.setTColor(e),o.setTWidthType(f),o.setTType(h)),t!==u.eri&&(o.setBDisplay(!0),o.setBColor(e),o.setBWidthType(f),o.setBType(h))}});break;case"border4":c.getCellOrNewCellByViewRange({rectRange:u,callback:function(t,n,r){var o=r.clone(),i=o.borderAttr;n!==u.sci&&(i.setLDisplay(!0),i.setLColor(e),i.setLWidthType(f),i.setLType(h)),n!==u.eci&&(i.setRDisplay(!0),i.setRColor(e),i.setRWidthType(f),i.setRType(h)),s.setCell(t,n,o)}});break;case"border5":c.getCellOrNewCellByViewRange({rectRange:u,callback:function(t,n,r){var o=r.clone(),i=o.borderAttr;t===u.sri&&(i.setTDisplay(!0),i.setTColor(e),i.setTWidthType(f),i.setTType(h)),t===u.eri&&(i.setBDisplay(!0),i.setBColor(e),i.setBWidthType(f),i.setBType(h)),n===u.sci&&(i.setLDisplay(!0),i.setLColor(e),i.setLWidthType(f),i.setLType(h)),n===u.eci&&(i.setRDisplay(!0),i.setRColor(e),i.setRWidthType(f),i.setRType(h)),s.setCell(t,n,o)}});break;case"border6":c.getCellOrNewCellByViewRange({rectRange:u,callback:function(t,n,r){var o=r.clone(),i=o.borderAttr;n===u.sci&&(i.setLDisplay(!0),i.setLColor(e),i.setLWidthType(f),i.setLType(h)),s.setCell(t,n,o)}});break;case"border7":c.getCellOrNewCellByViewRange({rectRange:u,callback:function(t,n,r){var o=r.clone(),i=o.borderAttr;t===u.sri&&(i.setTDisplay(!0),i.setTColor(e),i.setTWidthType(f),i.setTType(h)),s.setCell(t,n,o)}});break;case"border8":c.getCellOrNewCellByViewRange({rectRange:u,callback:function(t,n,r){var o=r.clone(),i=o.borderAttr;n===u.eci&&(i.setRDisplay(!0),i.setRColor(e),i.setRWidthType(f),i.setRType(h)),s.setCell(t,n,o)}});break;case"border9":c.getCellOrNewCellByViewRange({rectRange:u,callback:function(t,n,r){var o=r.clone(),i=o.borderAttr;t===u.eri&&(i.setBDisplay(!0),i.setBColor(e),i.setBWidthType(f),i.setBType(h)),s.setCell(t,n,o)}});break;case"border10":c.getCellOrNewCellByViewRange({rectRange:u,callback:function(t,e,n){var r=n.clone();r.borderAttr.setAllDisplay(!1),s.setCell(t,e,r)}})}l.end(),o.render()}}}}),n.fontBold=new Rn,n.fontItalic=new Mn,n.underLine=new Un,n.fontStrike=new Zn,n.merge=new kc,n.horizontalAlign=new il({contextMenu:{onUpdate:function(t){var e=r.getActiveSheet().table,o=e.xScreen,i=e.getStyleCellsHelper(),c=e.getTableDataSnapshot(),l=o.findType(Wu).selectRange;switch(t){case Zc.ALIGN.left:n.horizontalAlign.setIcon(new nt("align-left"));break;case Zc.ALIGN.center:n.horizontalAlign.setIcon(new nt("align-center"));break;case Zc.ALIGN.right:n.horizontalAlign.setIcon(new nt("align-right"))}if(l){c.begin();var a=c.cellDataProxy;i.getCellOrNewCellByViewRange({rectRange:l,callback:function(e,n,r){var o=r.clone();o.fontAttr.align=t,a.setCell(e,n,o)}}),c.end(),e.render()}}}}),n.verticalAlign=new Il({contextMenu:{onUpdate:function(t){var e=r.getActiveSheet().table,o=e.xScreen,i=e.getStyleCellsHelper(),c=e.getTableDataSnapshot(),l=o.findType(Wu).selectRange;switch(t){case Zc.VERTICAL_ALIGN.top:n.verticalAlign.setIcon(new nt("align-top"));break;case Zc.VERTICAL_ALIGN.center:n.verticalAlign.setIcon(new nt("align-middle"));break;case Zc.VERTICAL_ALIGN.bottom:n.verticalAlign.setIcon(new nt("align-bottom"))}if(l){c.begin();var a=c.cellDataProxy;i.getCellOrNewCellByViewRange({rectRange:l,callback:function(e,n,r){var o=r.clone();o.fontAttr.verticalAlign=t,a.setCell(e,n,o)}}),c.end(),e.render()}}}}),n.textWrapping=new fa({contextMenu:{onUpdate:function(t){var e,o=r.getActiveSheet().table,i=o.xScreen,c=o.getStyleCellsHelper(),l=o.getTableDataSnapshot(),a=i.findType(Wu).selectRange;switch(t){case Zc.TEXT_WRAP.TRUNCATE:e=new nt("truncate");break;case Zc.TEXT_WRAP.WORD_WRAP:e=new nt("text-wrap");break;case Zc.TEXT_WRAP.OVER_FLOW:e=new nt("overflow")}if(n.textWrapping.setIcon(e),a){l.begin();var s=l.cellDataProxy;c.getCellOrNewCellByViewRange({rectRange:a,callback:function(e,n,r){var o=r.clone();o.fontAttr.textWrap=t,s.setCell(e,n,o)}}),l.end(),o.render()}}}}),n.fixed=new da,n.filter=new Oa,n.functions=new xa,n.children(n.undo),n.children(n.redo),n.children(new cf),n.children(n.scale),n.children(n.paintFormat),n.children(n.clearFormat),n.children(n.format),n.children(new cf),n.children(n.font),n.children(n.dprFontSize),n.children(new cf),n.children(n.fontBold),n.children(n.fontItalic),n.children(n.underLine),n.children(n.fontStrike),n.children(n.fontColor),n.children(new cf),n.children(n.fillColor),n.children(n.border),n.children(n.merge),n.children(n.horizontalAlign),n.children(n.verticalAlign),n.children(n.textWrapping),n.children(n.fixed),n.children(n.filter),n.children(n.functions),n}var n,i,c;return rf(e,t),n=e,(i=[{key:"onAttach",value:function(){this.bind()}},{key:"bind",value:function(){var t=this,e=this.workTop.work.body,n=e.sheetView;Vt.bind(e,r.WORK_BODY_EVENT_TYPE.CHANGE_ACTIVE,(function(){t.setStatus()})),Vt.bind(e,r.TABLE_EVENT_TYPE.DATA_CHANGE,(function(){t.setStatus()})),Vt.bind(e,r.TABLE_EVENT_TYPE.SELECT_DOWN,(function(){t.setFormatStatus(),t.setFontStatus(),t.setFontSizeStatus(),t.setFontBoldStatus(),t.setFontItalicStatus(),t.setUnderLineStatus(),t.setFontStrikeStatus(),t.setFontColorStatus(),t.setFillColorStatus(),t.setHorizontalAlignStatus(),t.setVerticalAlignStatus(),t.setTextWrappingStatus()})),Vt.bind(this.undo,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){var t=n.getActiveSheet().table.getTableDataSnapshot();t.canBack()&&t.back()})),Vt.bind(this.redo,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){var t=n.getActiveSheet().table.getTableDataSnapshot();t.canGo()&&t.go()})),Vt.bind(this.scale,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.scale.scaleContextMenu,r=n.elPopUp;ye.closeAll([r]),n.isOpen()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),Vt.bind(this.paintFormat,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){var e=n.getActiveSheet(),o=e.table,i=o.xScreen,c=o.getTableMerges(),l=o.getTableCells(),a=o.getTableDataSnapshot(),s=i.findType(Ku),u=i.findType(Wu);u.selectRange&&(s.showCopyStyle(),t.paintFormat.active(!0),t.paintFormat.addSheet(e),o.on(r.TABLE_EVENT_TYPE.SELECT_OVER,(function(){s.hideCopyStyle(),t.paintFormat.active(!1),t.paintFormat.removeSheet(e);var n=s.selectRange,r=u.selectRange;a.begin();for(var i=a.cellDataProxy,f=r.sri,h=n.sri;f<=r.eri;f+=1,h+=1)for(var p=r.sci,y=n.sci;p<=r.eci;p+=1,y+=1){var b=c.getFirstIncludes(f,p),d=null;if(b?b.sri===f&&b.sci===p&&(d=l.getCell(f,p)):d=l.getCell(f,p),d){var v=l.getCellOrNew(h,y),g=d.clone();g.text=v.text,i.setCell(h,y,g)}}a.end(),o.render()})))})),Vt.bind(this.clearFormat,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){var t=n.getActiveSheet().table,e=t.xScreen,r=t.getStyleCellsHelper(),o=t.getTableDataSnapshot(),i=e.findType(Wu).selectRange;if(i){o.begin();var c=o.cellDataProxy;r.getCellOrNewCellByViewRange({rectRange:i,callback:function(t,e,n){var r=n.text;c.setCell(t,e,new Va({text:r}))}}),o.end(),t.render()}})),Vt.bind(this.format,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.format.formatContextMenu,r=n.elPopUp;ye.closeAll([r]),n.isOpen()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),Vt.bind(this.font,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.font.fontContextMenu,r=n.elPopUp;ye.closeAll([r]),n.isOpen()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),Vt.bind(this.dprFontSize,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.dprFontSize.fontSizeContextMenu,r=n.elPopUp;ye.closeAll([r]),n.isOpen()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),Vt.bind(this.fontBold,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){var t=n.getActiveSheet().table,e=t.xScreen,r=t.getStyleCellsHelper(),o=t.getTableCells(),i=t.getTableDataSnapshot(),c=e.findType(Wu).selectRange;if(c){var l=!o.getCellOrNew(c.sri,c.sci).fontAttr.bold;i.begin();var a=i.cellDataProxy;r.getCellOrNewCellByViewRange({rectRange:c,callback:function(t,e,n){var r=n.clone();r.fontAttr.bold=l,a.setCell(t,e,r)}}),i.end(),t.render()}})),Vt.bind(this.fontItalic,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){var t=n.getActiveSheet().table,e=t.xScreen,r=t.getStyleCellsHelper(),o=t.getTableCells(),i=t.getTableDataSnapshot(),c=e.findType(Wu).selectRange;if(c){var l=!o.getCellOrNew(c.sri,c.sci).fontAttr.italic;i.begin();var a=i.cellDataProxy;r.getCellOrNewCellByViewRange({rectRange:c,callback:function(t,e,n){var r=n.clone();r.fontAttr.italic=l,a.setCell(t,e,r)}}),i.end(),t.render()}})),Vt.bind(this.underLine,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){var t=n.getActiveSheet().table,e=t.xScreen,r=t.getStyleCellsHelper(),o=t.getTableCells(),i=t.getTableDataSnapshot(),c=e.findType(Wu).selectRange;if(c){var l=!o.getCellOrNew(c.sri,c.sci).fontAttr.underline;i.begin();var a=i.cellDataProxy;r.getCellOrNewCellByViewRange({rectRange:c,callback:function(t,e,n){var r=n.clone();r.fontAttr.underline=l,a.setCell(t,e,r)}}),i.end(),t.render()}})),Vt.bind(this.fontStrike,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){var t=n.getActiveSheet().table,e=t.xScreen,r=t.getStyleCellsHelper(),o=t.getTableCells(),i=t.getTableDataSnapshot(),c=e.findType(Wu).selectRange;if(c){var l=!o.getCellOrNew(c.sri,c.sci).fontAttr.strikethrough;i.begin();var a=i.cellDataProxy;r.getCellOrNewCellByViewRange({rectRange:c,callback:function(t,e,n){var r=n.clone();r.fontAttr.strikethrough=l,a.setCell(t,e,r)}}),i.end(),t.render()}})),Vt.bind(this.fontColor,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.fontColor.fontColorContextMenu,r=n.elPopUp;ye.closeAll([r]),n.isOpen()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),Vt.bind(this.fillColor,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.fillColor.fillColorContextMenu,r=n.elPopUp;ye.closeAll([r]),n.isOpen()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),Vt.bind(this.border,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.border.borderTypeContextMenu,r=n.elPopUp;ye.closeAll([r]),n.isOpen()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),Vt.bind(this.merge,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(t){var e=n.getActiveSheet().table,r=e.xScreen,o=e.getTableMerges(),i=e.getTableDataSnapshot(),c=r.findType(Wu).selectRange;if(c){var l=c.clone(),a=o.getFirstIncludes(l.sri,l.sci);i.begin();var s=i.mergeDataProxy;_.isNotUnDef(a)&&l.equals(a)?s.deleteMerge(a):s.addMerge(l),i.end(),e.render()}t.stopPropagation(),t.preventDefault()})),Vt.bind(this.horizontalAlign,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.horizontalAlign.horizontalContextMenu,r=n.elPopUp;ye.closeAll([r]),n.isOpen()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),Vt.bind(this.verticalAlign,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.verticalAlign.verticalContextMenu,r=n.elPopUp;ye.closeAll([r]),n.isOpen()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),Vt.bind(this.textWrapping,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.textWrapping.textWrappingContextMenu,r=n.elPopUp;ye.closeAll([r]),n.isOpen()?n.open():n.close(),e.stopPropagation(),e.preventDefault()}))}},{key:"setHorizontalAlignStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.xScreen,n=t.getTableCells(),r=e.findType(Wu).selectRange,o=new nt("align-left");if(r)switch(n.getCellOrNew(r.sri,r.sci).fontAttr.align){case Zc.ALIGN.left:o=new nt("align-left");break;case Zc.ALIGN.center:o=new nt("align-center");break;case Zc.ALIGN.right:o=new nt("align-right")}this.horizontalAlign.setIcon(o)}},{key:"setVerticalAlignStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.xScreen,n=t.getTableCells(),r=e.findType(Wu).selectRange,o=new nt("align-middle");if(r)switch(n.getCellOrNew(r.sri,r.sci).fontAttr.verticalAlign){case Zc.VERTICAL_ALIGN.top:o=new nt("align-top");break;case Zc.VERTICAL_ALIGN.center:o=new nt("align-middle");break;case Zc.VERTICAL_ALIGN.bottom:o=new nt("align-bottom")}this.verticalAlign.setIcon(o)}},{key:"setTextWrappingStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.xScreen,n=t.getTableCells(),r=e.findType(Wu).selectRange,o=new nt("text-wrap");if(r)switch(n.getCellOrNew(r.sri,r.sci).fontAttr.textWrap){case Zc.TEXT_WRAP.TRUNCATE:o=new nt("truncate");break;case Zc.TEXT_WRAP.WORD_WRAP:o=new nt("text-wrap");break;case Zc.TEXT_WRAP.OVER_FLOW:o=new nt("overflow")}this.textWrapping.setIcon(o)}},{key:"setUndoStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table.getTableDataSnapshot();this.undo.active(t.canBack())}},{key:"setRedoStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table.getTableDataSnapshot();this.redo.active(t.canGo())}},{key:"setScaleStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table.scale.goto(100);this.scale.setTitle("".concat(t,"%"))}},{key:"setPaintFormatStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet();this.paintFormat.active(this.paintFormat.includeSheet(t))}},{key:"setFormatStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.xScreen,n=t.getTableCells(),r=e.findType(Wu).selectRange,o="常规",i="default";if(r)switch(i=n.getCellOrNew(r.sri,r.sci).format){case"default":o="常规";break;case"text":o="文本";break;case"number":o="数字";break;case"percentage":o="百分比";break;case"fraction":o="分数";break;case"ENotation":o="科学计数";break;case"rmb":o="人民币";break;case"hk":o="港币";break;case"dollar":o="美元";break;case"date1":case"date2":case"date3":case"date4":case"date5":o="日期";break;case"time":o="时间"}this.format.setTitle(o),this.format.formatContextMenu.setActiveByType(i)}},{key:"setFontStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.xScreen,n=t.getTableCells(),r=e.findType(Wu).selectRange,o="Arial";r&&(o=n.getCellOrNew(r.sri,r.sci).fontAttr.name),this.font.setTitle(o),this.font.fontContextMenu.setActiveByType(o)}},{key:"setStatus",value:function(){this.setUndoStatus(),this.setRedoStatus(),this.setScaleStatus(),this.setPaintFormatStatus(),this.setFormatStatus(),this.setFontStatus(),this.setFontSizeStatus(),this.setFontBoldStatus(),this.setFontItalicStatus(),this.setUnderLineStatus(),this.setFontStrikeStatus(),this.setFontColorStatus(),this.setFillColorStatus(),this.setHorizontalAlignStatus(),this.setVerticalAlignStatus(),this.setTextWrappingStatus()}},{key:"setUnderLineStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.xScreen,n=t.getTableCells(),r=e.findType(Wu).selectRange,o=!1;r&&(o=n.getCellOrNew(r.sri,r.sci).fontAttr.underline),this.underLine.active(o)}},{key:"setFontSizeStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.xScreen,n=t.getTableCells(),r=e.findType(Wu).selectRange,o="12";r&&(o=n.getCellOrNew(r.sri,r.sci).fontAttr.size),this.dprFontSize.setTitle(o)}},{key:"setFontBoldStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.xScreen,n=t.getTableCells(),r=e.findType(Wu).selectRange,o=!1;r&&(o=n.getCellOrNew(r.sri,r.sci).fontAttr.bold),this.fontBold.active(o)}},{key:"setFontStrikeStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.xScreen,n=t.getTableCells(),r=e.findType(Wu).selectRange,o=!1;r&&(o=n.getCellOrNew(r.sri,r.sci).fontAttr.strikethrough),this.fontStrike.active(o)}},{key:"setFontColorStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.xScreen,n=t.getTableCells(),r=e.findType(Wu).selectRange,o="rgb(0, 0, 0)";r&&(o=n.getCellOrNew(r.sri,r.sci).fontAttr.color),this.fontColor.setColor(o),this.fontColor.fontColorContextMenu.setActiveByColor(o)}},{key:"setFontItalicStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.xScreen,n=t.getTableCells(),r=e.findType(Wu).selectRange,o=!1;r&&(o=n.getCellOrNew(r.sri,r.sci).fontAttr.italic),this.fontItalic.active(o)}},{key:"setFillColorStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.xScreen,n=t.getTableCells(),r=e.findType(Wu).selectRange,o="rgb(255, 255, 255)";if(r){var i=n.getCellOrNew(r.sri,r.sci);i.background&&(o=i.background)}this.fillColor.setColor(o),this.fillColor.fillColorContextMenu.setActiveByColor(o)}}])&&Ju(n.prototype,i),c&&Ju(n,c),e}(I);function af(t){return(af="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function uf(t,e){return!e||"object"!==af(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ff(t){return(ff=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hf(t,e){return(hf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pf=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=uf(this,ff(e).call(this,"".concat(o,"-option-item ").concat(t)))).title="",n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hf(t,e)}(e,t),n=e,(r=[{key:"setTitle",value:function(t){this.title=t,this.text(this.title)}}])&&sf(n.prototype,r),i&&sf(n,i),e}(I);function yf(t){return(yf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bf(t,e){return!e||"object"!==yf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function df(t){return(df=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vf(t,e){return(vf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var gf=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=bf(this,df(e).call(this,"".concat(o,"-tools-file")))).setTitle("文件"),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vf(t,e)}(e,t),e}(pf);function wf(t){return(wf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mf(t,e){return!e||"object"!==wf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Of(t){return(Of=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tf(t,e){return(Tf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ef=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=mf(this,Of(e).call(this,"".concat(o,"-tools-format")))).setTitle("格式"),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tf(t,e)}(e,t),e}(pf);function Sf(t){return(Sf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _f(t,e){return!e||"object"!==Sf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xf(t){return(xf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kf(t,e){return(kf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Cf=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=_f(this,xf(e).call(this,"".concat(o,"-tools-insert")))).setTitle("插入"),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kf(t,e)}(e,t),e}(pf);function Pf(t){return(Pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lf(t,e){return!e||"object"!==Pf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function jf(t){return(jf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Af(t,e){return(Af=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Nf=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Lf(this,jf(e).call(this,"".concat(o,"-tools-look")))).setTitle("查看"),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Af(t,e)}(e,t),e}(pf);function Rf(t){return(Rf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function If(t,e){return!e||"object"!==Rf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vf(t){return(Vf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Df(t,e){return(Df=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Hf=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=If(this,Vf(e).call(this,"".concat(o,"-tools-update")))).setTitle("修改"),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Df(t,e)}(e,t),e}(pf);function Mf(t){return(Mf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Bf(t,e){return!e||"object"!==Mf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yf(t){return(Yf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gf(t,e){return(Gf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Uf=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Bf(this,Yf(e).call(this,"".concat(o,"-option")))).workTop=t,n.title=" X-Sheet 工作簿",n.logoEle=P("div","".concat(o,"-option-logo")),n.titleEle=P("div","".concat(o,"-option-title")),n.optionsEle=P("div","".concat(o,"-option-box")),n.leftEle=P("div","".concat(o,"-option-left")),n.rightEle=P("div","".concat(o,"-option-right")),n.leftEle.children(n.logoEle),n.rightEle.children(n.titleEle,n.optionsEle),n.children(n.leftEle),n.children(n.rightEle),n.setTitle(n.title),n.file=new gf,n.format=new Ef,n.insert=new Cf,n.look=new Nf,n.update=new Hf,n.optionsEle.children(n.file),n.optionsEle.children(n.format),n.optionsEle.children(n.insert),n.optionsEle.children(n.look),n.optionsEle.children(n.update),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gf(t,e)}(e,t),n=e,(r=[{key:"setTitle",value:function(t){this.title=t,this.titleEle.text(t)}}])&&Wf(n.prototype,r),i&&Wf(n,i),e}(I);function zf(t){return(zf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ff(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xf(t,e){return!e||"object"!==zf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $f(t){return($f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zf(t,e){return(Zf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qf=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Xf(this,$f(e).call(this,"".concat(o,"-work-top")))).work=t,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zf(t,e)}(e,t),n=e,(r=[{key:"onAttach",value:function(){this.toolsMenu=new lf(this),this.option=new Uf(this),this.attach(this.option),this.attach(this.toolsMenu)}}])&&Ff(n.prototype,r),i&&Ff(n,i),e}(I);function Kf(t){return(Kf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jf(t,e){return!e||"object"!==Kf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qf(t){return(Qf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function th(t,e){return(th=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var eh=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Jf(this,Qf(e).call(this,"".concat(o,"-vertical-center-element")))).options=_.mergeDeep({style:{}},t),n.css(n.options.style),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&th(t,e)}(e,t),e}(W);function nh(t){return(nh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rh(t,e){return!e||"object"!==nh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function oh(t){return(oh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ih(t,e){return(ih=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ch=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=rh(this,oh(e).call(this,"".concat(o,"-vertical-center")))).options=_.mergeDeep({style:{}},t),n.css(n.options.style),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ih(t,e)}(e,t),e}(W);function lh(t){return(lh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ah(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function sh(t,e){return!e||"object"!==lh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function uh(t,e,n){return(uh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fh(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function fh(t){return(fh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hh(t,e){return(hh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ph=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=sh(this,fh(e).call(this,"".concat(o,"-sheet-view")))).sheetList=[],t.activeIndex=-1,t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hh(t,e)}(e,t),n=e,(i=[{key:"attach",value:function(t){var n=this;this.sheetList.push(t),uh(fh(e.prototype),"attach",this).call(this,t),t.hide(),Vt.bind(t,r.TABLE_EVENT_TYPE.CHANGE_WIDTH,(function(){n.trigger(r.TABLE_EVENT_TYPE.CHANGE_WIDTH)})),Vt.bind(t,r.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(){n.trigger(r.TABLE_EVENT_TYPE.CHANGE_HEIGHT)})),Vt.bind(t,r.TABLE_EVENT_TYPE.DATA_CHANGE,(function(){n.trigger(r.TABLE_EVENT_TYPE.DATA_CHANGE)})),Vt.bind(t,r.TABLE_EVENT_TYPE.SELECT_CHANGE,(function(){n.trigger(r.TABLE_EVENT_TYPE.SELECT_CHANGE)})),Vt.bind(t,r.TABLE_EVENT_TYPE.SELECT_DOWN,(function(){n.trigger(r.TABLE_EVENT_TYPE.SELECT_DOWN,n)}))}},{key:"setActiveSheet",value:function(t){var e=this.sheetList;return e[t]?(this.activeIndex=t,this.setActive(e[t])):null}},{key:"setActive",value:function(t){return t.show(),t.sibling().forEach((function(t){t.hide()})),t}},{key:"getActiveSheet",value:function(){return this.sheetList[this.activeIndex]}},{key:"getLastIndex",value:function(){return this.sheetList.length-1}}])&&ah(n.prototype,i),c&&ah(n,c),e}(I);function yh(t){return(yh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dh(t,e){return!e||"object"!==yh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vh(t){return(vh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gh(t,e){return(gh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wh=function(t){function e(t){var n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=dh(this,vh(e).call(this,"".concat(o,"-sheet-switch-tab")))).last=P("div","".concat(o,"-switch-tab-last-btn")),r.next=P("div","".concat(o,"-switch-tab-next-btn")),r.content=P("div","".concat(o,"-sheet-tab-content")),r.tabs=P("div","".concat(o,"-sheet-tab-tabs")),r.plus=P("div","".concat(o,"-sheet-tab-plus")),r.content.children(r.tabs),(n=r).children.apply(n,[r.last,r.next,r.content,r.plus]),r.optiions=_.mergeDeep({onAdd:function(t){return t},onSwitch:function(t){return t}},t),r.left=null,r.tabList=[],r}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gh(t,e)}(e,t),n=e,(i=[{key:"onAttach",value:function(){this.bind()}},{key:"offsetSizeLeft",value:function(){var t=this.content.offset().width,e=this.tabs.offset().width;e>t&&(this.left=-(e-t),this.tabs.css("marginLeft","".concat(this.left,"px")))}},{key:"bind",value:function(){var t=this,e=this.next,n=this.last,o=this.plus;Vt.bind(e,r.SYSTEM_EVENT_TYPE.CLICK,(function(){var e=t.content.offset().width,n=-(t.tabs.offset().width-e),r=t.left||0;(r-=30)<n&&(r=n),t.left=r,t.tabs.css("marginLeft","".concat(t.left,"px"))})),Vt.bind(n,r.SYSTEM_EVENT_TYPE.CLICK,(function(){var e=t.left||0;(e+=30)>0&&(e=0),t.left=e,t.tabs.css("marginLeft","".concat(t.left,"px"))})),Vt.bind(o,r.SYSTEM_EVENT_TYPE.CLICK,(function(){t.optiions.onAdd(),t.offsetSizeLeft()}))}},{key:"attach",value:function(t){var e=this;this.tabList.push(t),this.tabs.children(t),t.onAttach(),Vt.bind(t,r.SYSTEM_EVENT_TYPE.CLICK,(function(){e.setActive(t),e.optiions.onSwitch(t)}))}},{key:"setActiveTab",value:function(t){var e=this.tabList;return e[t]?(this.setActive(e[t]),e[t]):null}},{key:"setActive",value:function(t){t.addClass("active"),t.sibling().forEach((function(t){t.removeClass("active")}))}},{key:"getLastIndex",value:function(){return this.tabList.length-1}}])&&bh(n.prototype,i),c&&bh(n,c),e}(I);function mh(t){return(mh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Th(t,e){return!e||"object"!==mh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Eh(t){return(Eh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Sh(t,e){return(Sh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _h=0,xh=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Sheet".concat(_h+=1);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Th(this,Eh(e).call(this,"".concat(o,"-sheet-tab")))).setName(n),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sh(t,e)}(e,t),n=e,(r=[{key:"setName",value:function(t){this.name=t,this.text(this.name)}}])&&Oh(n.prototype,r),i&&Oh(n,i),e}(I);function kh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ch(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ph=function(){function t(){kh(this,t),this.value=1}var e,n,r;return e=t,(n=[{key:"back",value:function(t){return t/this.value}},{key:"goto",value:function(t){return this.value*t}},{key:"setValue",value:function(t){this.value=t}}])&&Ch(e.prototype,n),r&&Ch(e,r),t}(),Lh=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.goto,r=void 0===n?function(t){return t}:n,o=e.back,i=void 0===o?function(t){return t}:o;kh(this,t),this.goto=r,this.back=i};function jh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ah=function(){function t(e){var n=e.scaleAdapter,r=void 0===n?new Lh:n,o=e.height,i=void 0===o?33:o,c=e.width,l=void 0===c?50:c,a=e.background,s=void 0===a?"#f6f7fa":a,u=e.color,f=void 0===u?"#585757":u,h=e.size,p=void 0===h?11:h,y=e.gridColor,b=void 0===y?"#e8e8e8":y;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scaleAdapter=r,this.height=i,this.width=l,this.background=s,this.color=f,this.size=p,this.gridColor=b}var e,n,r;return e=t,(n=[{key:"getGridColor",value:function(){return this.gridColor}},{key:"getColor",value:function(){return this.color}},{key:"getSize",value:function(){var t=this.scaleAdapter,e=this.size;return t.goto(e)}},{key:"getBackground",value:function(){return this.background}},{key:"getHeight",value:function(){var t=this.scaleAdapter,e=this.height;return t.goto(e)}},{key:"getWidth",value:function(){var t=this.scaleAdapter,e=this.width;return t.goto(e)}}])&&jh(e.prototype,n),r&&jh(e,r),t}();function Nh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Rh=function(){function t(e){var n=e.scaleAdapter,r=void 0===n?new Lh:n,o=e.len,i=void 0===o?10:o,c=e.data,l=void 0===c?[]:c,a=e.height;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scaleAdapter=r,this.len=i,this.data=l,this.min=5,this.height=_.minIf(a,this.min)}var e,n,r;return e=t,(n=[{key:"getOrNew",value:function(t){return this.data[t]=this.data[t]||{},this.data[t]}},{key:"getHeight",value:function(t){var e=this.scaleAdapter,n=this.get(t);return n&&n.height?e.goto(n.height):e.goto(this.height)}},{key:"get",value:function(t){return this.data[t]}},{key:"eachHeight",value:function(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=r,i=t;i<=e;i+=1){var c=this.getHeight(i);n(i,c,o),o+=c}}},{key:"setHeight",value:function(t,e){var n=this.getOrNew(t),r=this.scaleAdapter;n.height=r.back(_.minIf(e,this.min))}},{key:"rectRangeSumHeight",value:function(t){return this.sectionSumHeight(t.sri,t.eri)}},{key:"sectionSumHeight",value:function(t,e){var n=this;return _.rangeSum(t,e+1,(function(t){return n.getHeight(t)}))}},{key:"getData",value:function(){return this.data}},{key:"setData",value:function(t){this.data=t}}])&&Nh(e.prototype,n),r&&Nh(e,r),t}();function Ih(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Vh=function(){function t(e){var n=e.scaleAdapter,r=void 0===n?new Lh:n,o=e.len,i=void 0===o?10:o,c=e.data,l=void 0===c?[]:c,a=e.width,s=void 0===a?110:a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scaleAdapter=r,this.len=i,this.data=l,this.min=5,this.width=_.minIf(s,this.min)}var e,n,r;return e=t,(n=[{key:"getOrNew",value:function(t){return this.data[t]=this.data[t]||{},this.data[t]}},{key:"getWidth",value:function(t){var e=this.scaleAdapter,n=this.data[t];return n&&n.width?e.goto(n.width):e.goto(this.width)}},{key:"get",value:function(t){return this.data[t]}},{key:"eachWidth",value:function(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=r,i=t;i<=e;i+=1){var c=this.getWidth(i);n(i,c,o),o+=c}}},{key:"setWidth",value:function(t,e){var n=this.getOrNew(t),r=this.scaleAdapter;n.width=r.back(_.minIf(e,this.min))}},{key:"rectRangeSumWidth",value:function(t){return this.sectionSumWidth(t.sci,t.eci)}},{key:"sectionSumWidth",value:function(t,e){var n=this;return _.rangeSum(t,e+1,(function(t){return n.getWidth(t)}))}},{key:"getData",value:function(){return this.data}},{key:"setData",value:function(t){this.data=t}}])&&Ih(e.prototype,n),r&&Ih(e,r),t}();var Dh=function t(e){var n=e.fxTop,r=void 0===n?-1:n,o=e.fxLeft,i=void 0===o?-1:o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fxTop=r,this.fxLeft=i};var Hh={H_LEFT:Symbol("水平方向左边滚动条"),H_RIGHT:Symbol("水平方向向右边滚动"),V_TOP:Symbol("垂直方向向上滚动"),V_BOTTOM:Symbol("垂直方向下滚动"),UN:Symbol("未知")},Mh=function t(e){var n=e.fixed;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ri=n.fxTop+1,this.ci=n.fxLeft+1,this.x=0,this.y=0,this.type=Hh.UN},Wh=n(0),Bh=n.n(Wh),Yh=n(1),Gh=n.n(Yh),Uh=n(2),zh=n.n(Uh);function Fh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Xh=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e}var e,n,r;return e=t,(n=[{key:"set",value:function(t){var e=this.table;switch(t){case"s-resize":e.css("cursor","url(".concat(Gh.a,") 2.5 7.5,auto"));break;case"cell":e.css("cursor","url(".concat(Bh.a,") 7.5 7.5,auto"));break;case"e-resize":e.css("cursor","url(".concat(zh.a,") 7.5 2.5,auto"));break;default:e.css("cursor",t)}}}])&&Fh(e.prototype,n),r&&Fh(e,r),t}();function $h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Zh=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e,this.bind()}var e,n,o;return e=t,(n=[{key:"register",value:function(t){var e=t.el,n=t.attr,r=void 0===n?{}:n,o=t.stop,i=void 0===o||o,c=t.focus,l=void 0!==c&&c;this.table.focus.register({el:e,attr:r,stop:i,focus:l})}},{key:"bind",value:function(){var t=this.table.focus;Vt.bind(document,r.SYSTEM_EVENT_TYPE.KEY_DOWN,(function(e){var n=t.activate,r=e.keyCode;if(n){var o=n.attr,i=o.key,c=o.code,l=o.callback;i?e[i]&&r===c&&l(e):r===c&&l(e)}9===r&&e.preventDefault()}))}}])&&$h(e.prototype,n),o&&$h(e,o),t}();function qh(t){return(qh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jh(t,e){return!e||"object"!==qh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qh(t){return(Qh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tp(t,e){return(tp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ep=function(t){function e(t){var n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{width:5};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Jh(this,Qh(e).call(this,"".concat(o,"-re-sizer-horizontal")))).table=t,r.options=i,r.width=i.width,r.hoverEl=P("div","".concat(o,"-re-sizer-hover")),r.lineEl=P("div","".concat(o,"-re-sizer-line")),(n=r).children.apply(n,[r.hoverEl,r.lineEl]),r}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tp(t,e)}(e,t),n=e,(i=[{key:"onAttach",value:function(){this.bind(),this.table.focus.register({el:this})}},{key:"getEventLeft",value:function(t){var e=this.table,n=e.cols,r=e.fixed,o=e.scroll,i=e.index,c=e.computeEventXy(t),l=c.x,a=c.y,s=e.getRiCiByXy(l,a),u=s.ri,f=s.ci;if(-1!==u)return{left:-1,x:l,y:a,ri:u,ci:f};var h=i.getWidth()+n.sectionSumWidth(0,f);return f>r.fxLeft&&(h-=o.x),{left:h,x:l,y:a,ri:u,ci:f}}},{key:"bind",value:function(){var t=this,e=this.table,n=e.cols,o=e.mousePointer,i=e.getTableDataSnapshot(),c=i.colsDataProxy,l=e.index,a=!1;Vt.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(r){o.set("col-resize"),a=!0;var l=t.getEventLeft(r),s=l.left,u=l.ci,f=s-n.getWidth(u)+n.min,h=e.computeEventXy(r).x;Vt.mouseMoveUp(document,(function(n){var r=e.computeEventXy(n);h=r.x,h-=t.width/2,h=Math.ceil(_.minIf(h,f)),t.css("left","".concat(h,"px")),t.lineEl.css("height","".concat(e.visualHeight(),"px")),t.lineEl.show()}),(function(r){t.lineEl.hide(),a=!1,t.css("left","".concat(h,"px")),e.computeEventXy(r).y<=0&&t.hide();var o=h-(s-n.getWidth(u))+t.width;i.begin(),c.setWidth(u,o),i.end(),e.resize()}))})),Vt.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_MOVE,(function(t){o.set("col-resize"),t.stopPropagation()})),Vt.bind(e,r.SYSTEM_EVENT_TYPE.MOUSE_LEAVE,(function(){a||t.hide()})),Vt.bind(e,r.SYSTEM_EVENT_TYPE.MOUSE_MOVE,(function(r){var o=t.getEventLeft(r),i=o.left,c=o.ci,a=i-n.getWidth(c)+n.min,s=e.visualWidth();i>s&&(i=s),-1===i||a>s||-1===c?t.hide():(t.show(),t.css("left","".concat(i-t.width,"px")),t.hoverEl.css("width","".concat(t.width,"px")),t.hoverEl.css("height","".concat(l.getHeight(),"px")))}))}}])&&Kh(n.prototype,i),c&&Kh(n,c),e}(I);function np(t){return(np="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function op(t,e){return!e||"object"!==np(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ip(t){return(ip=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cp(t,e){return(cp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var lp=function(t){function e(t){var n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{height:5};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=op(this,ip(e).call(this,"".concat(o,"-re-sizer-vertical")))).table=t,r.options=i,r.height=i.height,r.hoverEl=P("div","".concat(o,"-re-sizer-hover")),r.lineEl=P("div","".concat(o,"-re-sizer-line")),(n=r).children.apply(n,[r.hoverEl,r.lineEl]),r}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cp(t,e)}(e,t),n=e,(i=[{key:"onAttach",value:function(){this.bind(),this.table.focus.register({el:this})}},{key:"getEventTop",value:function(t){var e=this.table,n=e.rows,r=e.fixed,o=e.scroll,i=e.index,c=e.computeEventXy(t),l=c.x,a=c.y,s=e.getRiCiByXy(l,a),u=s.ri,f=s.ci;if(-1!==f)return{top:-1,x:l,y:a,ri:u,ci:f};var h=i.getHeight()+n.sectionSumHeight(0,u);return u>r.fxTop&&(h-=o.y),{top:h,x:l,y:a,ri:u,ci:f}}},{key:"bind",value:function(){var t=this,e=this.table,n=e.rows,o=e.mousePointer,i=e.getTableDataSnapshot(),c=i.rowsDataProxy,l=e.index,a=!1;Vt.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(r){o.set("row-resize"),a=!0;var l=t.getEventTop(r),s=l.top,u=l.ri,f=s-n.getHeight(u)+n.min,h=e.computeEventXy(r).y;Vt.mouseMoveUp(document,(function(n){var r=e.computeEventXy(n);h=r.y,h-=t.height/2,h=Math.ceil(_.minIf(h,f)),t.css("top","".concat(h,"px")),t.lineEl.css("width","".concat(e.visualWidth(),"px")),t.lineEl.show()}),(function(r){t.lineEl.hide(),a=!1,t.css("top","".concat(h,"px")),e.computeEventXy(r).x<=0&&t.hide();var o=h-(s-n.getHeight(u))+t.height;i.begin(),c.setHeight(u,o),i.end(),e.resize()}))})),Vt.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_MOVE,(function(t){o.set("row-resize"),t.stopPropagation()})),Vt.bind(e,r.SYSTEM_EVENT_TYPE.MOUSE_LEAVE,(function(){a||t.hide()})),Vt.bind(e,r.SYSTEM_EVENT_TYPE.MOUSE_MOVE,(function(r){var o=t.getEventTop(r),i=o.top,c=o.ri,a=i-n.getHeight(c)+n.min,s=e.visualHeight();i>s&&(i=s),-1===i||a>s||-1===c?t.hide():(t.show(),t.css("top","".concat(i-t.height,"px")),t.hoverEl.css("width","".concat(l.getWidth(),"px")),t.hoverEl.css("height","".concat(t.height,"px")))}))}}])&&rp(n.prototype,i),c&&rp(n,c),e}(I);function ap(t){return(ap="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function up(t,e){return!e||"object"!==ap(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fp(t){return(fp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hp(t,e){return(hp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pp=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=up(this,fp(e).call(this,"".concat(o,"-table-x-height-light")))).table=t,n.setSize(),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hp(t,e)}(e,t),n=e,(i=[{key:"onAttach",value:function(){this.bind(),this.hide()}},{key:"checkOut",value:function(){var t=this.table,e=t.xScreen.findType(Wu).selectRange;if(!e)return!0;var n=t.getScrollView();return e.eci<n.sci||e.sci>n.eci}},{key:"bind",value:function(){var t=this,e=this.table;Vt.bind(e,r.TABLE_EVENT_TYPE.SELECT_CHANGE,(function(){t.offsetHandle()})),Vt.bind(e,r.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(){t.offsetHandle()})),Vt.bind(e,r.TABLE_EVENT_TYPE.CHANGE_WIDTH,(function(){t.offsetHandle()})),Vt.bind(e,r.SYSTEM_EVENT_TYPE.SCROLL,(function(){t.offsetHandle()}))}},{key:"offsetHandle",value:function(){if(this.checkOut())this.hide();else{this.show();var t=this.table;this.offset({left:this.getLeft()+t.getIndexWidth(),top:0,width:this.getWidth(),height:t.getIndexHeight()})}}},{key:"setSize",value:function(){var t=this.table;this.css("height","".concat(t.getIndexHeight(),"px"))}},{key:"getLeft",value:function(){var t=this.table,e=t.xScreen,n=t.cols,r=t.fixed,o=e.findType(Wu),i=t.getScrollView(),c=o.selectRange,l=o.overGo;if(!c)return 0;var a=r.fxLeft;switch(l){case xu.LT:case xu.L:case xu.LTT:case xu.LTL:case xu.BRL:case xu.ALL:return oc.offsetToLineInside(n.sectionSumWidth(c.sci,a))}return oc.offsetToLineInside(n.sectionSumWidth(i.sci,c.sci-1))}},{key:"getWidth",value:function(){var t=this.table,e=t.xScreen,n=t.cols,r=t.fixed,o=e.findType(Wu),i=t.getScrollView(),c=o.selectRange,l=o.overGo,a=r.fxLeft,s=0;switch(l){case xu.LT:case xu.L:case xu.LTT:case xu.LTL:case xu.BRL:case xu.ALL:s=n.sectionSumWidth(c.sci,a)}var u=c.clone();return u.sri=i.sri,u.eri=i.sri,s+n.rectRangeSumWidth(i.coincide(u))}}])&&sp(n.prototype,i),c&&sp(n,c),e}(I);function yp(t){return(yp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dp(t,e){return!e||"object"!==yp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vp(t){return(vp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gp(t,e){return(gp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wp=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=dp(this,vp(e).call(this,"".concat(o,"-table-y-height-light")))).table=t,n.setSize(),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gp(t,e)}(e,t),n=e,(i=[{key:"onAttach",value:function(){this.bind(),this.hide()}},{key:"checkOut",value:function(){var t=this.table,e=t.xScreen.findType(Wu).selectRange;if(!e)return!0;var n=t.getScrollView();return e.eri<n.sri||e.sri>n.eri}},{key:"bind",value:function(){var t=this,e=this.table;Vt.bind(e,r.TABLE_EVENT_TYPE.SELECT_CHANGE,(function(){t.offsetHandle()})),Vt.bind(e,r.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(){t.offsetHandle()})),Vt.bind(e,r.TABLE_EVENT_TYPE.CHANGE_WIDTH,(function(){t.offsetHandle()})),Vt.bind(e,r.SYSTEM_EVENT_TYPE.SCROLL,(function(){t.offsetHandle()}))}},{key:"offsetHandle",value:function(){if(this.checkOut())this.hide();else{this.show();var t=this.table;this.offset({left:0,top:this.getTop()+t.getIndexHeight(),width:t.getIndexWidth(),height:this.getHeight()})}}},{key:"setSize",value:function(){var t=this.table;this.css("width","".concat(t.getIndexWidth(),"px"))}},{key:"getTop",value:function(){var t=this.table,e=t.xScreen,n=t.rows,r=t.fixed,o=e.findType(Wu),i=t.getScrollView(),c=o.selectRange,l=o.overGo;if(!c)return 0;var a=r.fxTop;switch(l){case xu.LT:case xu.T:case xu.LTT:case xu.LTL:case xu.BRL:case xu.ALL:return oc.offsetToLineInside(n.sectionSumHeight(c.sri,a))}return oc.offsetToLineInside(n.sectionSumHeight(i.sri,c.sri-1))}},{key:"getHeight",value:function(){var t=this.table,e=t.xScreen,n=t.rows,r=t.fixed,o=e.findType(Wu),i=t.getScrollView(),c=o.selectRange,l=o.overGo,a=r.fxTop,s=0;switch(l){case xu.LT:case xu.T:case xu.LTT:case xu.LTL:case xu.BRL:case xu.ALL:s=n.sectionSumHeight(c.sri,a)}var u=c.clone();return u.sci=i.sci,u.eci=i.sci,s+n.rectRangeSumHeight(i.coincide(u))}}])&&bp(n.prototype,i),c&&bp(n,c),e}(I);function mp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Op=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e,this.pool=[],this.activate=null}var e,n,o;return e=t,(n=[{key:"findByEl",value:function(t){for(var e=0;e<this.pool.length;e+=1){var n=this.pool[e];if(n.el===t)return n}return null}},{key:"register",value:function(t){var e=this,n=t.el,o=t.attr,i=void 0===o?{}:o,c=t.stop,l=void 0===c||c,a=t.focus,s=void 0!==a&&a,u=this.findByEl(n);if(u)Object.assign(u.attr,i);else{var f={el:n,attr:i};this.pool.push(f),s&&(this.activate=f),Vt.bind(n,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(t){e.activate=f,l&&t.stopPropagation()}))}}}])&&mp(e.prototype,n),o&&mp(e,o),t}();function Tp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ep(t,e,n){return e&&Tp(t.prototype,e),n&&Tp(t,n),t}var Sp={CHANGE_ADD:Symbol("change_add"),CHANGE_NOT:Symbol("change_not"),STATIC:Symbol("static"),BOUND_OUT:Symbol("bound_out")},_p=function(){function t(e){var n=e.scroll,r=e.rows,o=e.cols,i=e.getHeight,c=void 0===i?function(){return 0}:i,l=e.getWidth,a=void 0===l?function(){return 0}:l;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scroll=n,this.rows=r,this.cols=o,this.getHeight=c,this.getWidth=a}return Ep(t,null,[{key:"viewMode",value:function(t,e){return _.isUnDef(t)?Sp.CHANGE_NOT:e.equals(t)?Sp.STATIC:e.coincide(t).equals(es.EMPTY)?Sp.BOUND_OUT:e.within(t)?Sp.CHANGE_NOT:Sp.CHANGE_ADD}}]),Ep(t,[{key:"getScrollView",value:function(){for(var t=this.rows,e=this.cols,n=this.scroll,r=this.getHeight,o=this.getWidth,i=n.ri,c=n.ci,l=0,a=0,s=[t.len,e.len],u=s[0],f=s[1],h=i;h<t.len&&(u=h,!((a+=t.getHeight(h))>=r()));h+=1);for(var p=c;p<e.len&&(f=p,!((l+=e.getWidth(p))>=o()));p+=1);return new es(i,c,u,f)}}]),t}();function xp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var kp=function(){function t(e){var n=e.xTableScrollView,r=e.rows,o=e.cols,i=e.scroll;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.xTableScrollView=n,this.scroll=i,this.rows=r,this.cols=o,this.scrollView=null}var e,n,r;return e=t,(n=[{key:"reset",value:function(){this.scrollView=null}},{key:"getScrollView",value:function(){if(_.isNotUnDef(this.scrollView))return this.scrollView.clone();var t=this.xTableScrollView,e=this.cols,n=this.rows,r=t.getScrollView();return r.w=e.rectRangeSumWidth(r),r.h=n.rectRangeSumHeight(r),this.scrollView=r,r.clone()}}])&&xp(e.prototype,n),r&&xp(e,r),t}();function Cp(t){return(Cp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lp(t,e){return!e||"object"!==Cp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function jp(t){return(jp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ap(t,e){return(Ap=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Np=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Lp(this,jp(e).call(this,"".concat(o,"-table-edit")))).input=P("div","".concat(o,"-table-edit-input")),n.input.attr("contenteditable",!0),n.input.html("<p>&nbsp;</p>"),n.table=t,n.text="",n.select=null,n.children(n.input),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ap(t,e)}(e,t),n=e,(i=[{key:"onAttach",value:function(){this.bind(),this.hide()}},{key:"showEdit",value:function(){var t=this.table,e=this.input,n=t.getTableCells(),r=t.xScreen.findType(Wu).selectRange;if(this.show(),r){var o=n.getCellOrNew(r.sri,r.sci);this.select=r,this.editOffset(),this.text=o.text,this.input.attr("style",o.toCssStyle()),_.isBlank(this.text)?e.html("<p>&nbsp;</p>"):e.text(this.text),_.keepLastIndex(this.input.el)}}},{key:"hideEdit",value:function(){var t=this.select,e=this.table,n=e.getTableCells(),r=e.getTableDataSnapshot(),o=r.cellDataProxy;if(this.hide(),t){var i=n.getCellOrNew(t.sri,t.sci).clone(),c=_.trim(this.text);i.text!==c&&(r.begin(),i.text=c,o.setCell(t.sri,t.sci,i),r.end(),e.render()),this.select=null}}},{key:"bind",value:function(){var t=this,e=this.table,n=e.xScreen.findType(Wu);Vt.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(t){t.stopPropagation()})),Vt.bind(this.input,r.SYSTEM_EVENT_TYPE.INPUT,(function(){var e=t.input;_.isBlank(t.input.text())&&e.html("<p>&nbsp;</p>"),t.text=e.text()})),Vt.bind(e,r.SYSTEM_EVENT_TYPE.SCROLL,(function(){t.hideEdit()})),Vt.bind(e,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.hideEdit()})),Vt.dbClick([n.lt,n.t,n.l,n.br],(function(){t.showEdit()}))}},{key:"editOffset",value:function(){var t=this.table,e=t.xScreen.findType(Wu),n=e.selectBoundOut,r=e.targetOffset;n||this.offset({left:r.left+t.getIndexWidth()+3,top:r.top+t.getIndexHeight()+3,width:r.width-7,height:r.height-7})}}])&&Pp(n.prototype,i),c&&Pp(n,c),e}(I);function Rp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ip=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.solidLine=new sc(e,n)}var e,n,r;return e=t,(n=[{key:"horizonLine",value:function(t,e,n,r){this.solidLine.horizonLine(t,e,n,r)}},{key:"verticalLine",value:function(t,e,n,r){this.solidLine.verticalLine(t,e,n,r)}}])&&Rp(e.prototype,n),r&&Rp(e,r),t}();function Vp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Dp=function(){function t(e){var n=e.rect,r=e.draw,o=e.offset,i=void 0===o?0:o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rect=n,this.draw=r,this.offset=i}var e,n,r;return e=t,(n=[{key:"open",value:function(){var t=this.rect,e=this.draw,n=this.offset,r=t.x,o=t.y,i=t.width,c=t.height;return e.save().beginPath().rect(r,o,i+n,c+n).clip(),this}},{key:"close",value:function(){return this.draw.restore(),this}}])&&Vp(e.prototype,n),r&&Vp(e,r),t}();function Hp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Mp=function(){function t(e){var n=e.x,r=e.y,o=e.width,i=e.height;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=n,this.y=r,this.width=o,this.height=i}var e,n,r;return e=t,(n=[{key:"expandSize",value:function(t){return this.width+=t,this.height+=t,this}},{key:"disjoint",value:function(t){return this.x>t.x+t.width||this.y>this.y+t.height||t.x>this.x+this.width||t.y>this.y+this.height}},{key:"clone",value:function(){return new t({x:this.x,y:this.y,width:this.width,height:this.height})}}])&&Hp(e.prototype,n),r&&Hp(e,r),t}();function Wp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Bp=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"dateFormat",value:function(t,e){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()},r=/(y+)/.exec(t);if(r){var o=r[0],i=e.getFullYear().toString().substr(4-o.length);t=t.replace(o,i)}for(var c in n){var l=new RegExp("(".concat(c,")")).exec(t);if(l){var a=n[c].toString(),s=l[0],u=1===s.length?a:"00".concat(a).substr(a.length);t=t.replace(s,u)}}return t}},{key:"parserToDate",value:function(t,e){if(!t)return null;for(var n=new Date("1970/01/01 00:00:00"),r=[{reg:"y+"},{reg:"M+"},{reg:"d+"},{reg:"h+"},{reg:"m+"},{reg:"s+"},{reg:"S"}],o=n.getFullYear(),i=n.getMonth()+1,c=n.getDate(),l=n.getHours(),a=n.getMinutes(),s=n.getSeconds(),u=n.getMilliseconds(),f=1,h=0;h<e.length;h+=1)for(var p=e[h],y=0;y<r.length;y+=1){var b=r[y];if(b.reg[0]===p){b.index||(b.index=f,f+=1);break}}for(var d=0;d<r.length;d+=1){var v=r[d].reg,g=new RegExp("(".concat(v,")")).exec(e);if(g){var w=g[0],m="([0-9]{1,".concat(w.length,"})");e=e.replace(w,m)}}var O={},T=new RegExp(e).exec(t);if(!T)return null;for(var E=1;E<T.length;E+=1)O[E]=T[E];return r[0].index&&(o=O[r[0].index]),r[1].index&&(i=O[r[1].index]),r[2].index&&(c=O[r[2].index]),r[3].index&&(l=O[r[3].index]),r[4].index&&(a=O[r[4].index]),r[5].index&&(s=O[r[5].index]),r[6].index&&(u=O[r[6].index]),new Date(o,i-1,c,l,a,s,u)}}],(n=null)&&Wp(e.prototype,n),r&&Wp(e,r),t}();function Yp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Gp(t){var e=Bp.parserToDate(t,"yyyy/MM/dd hh:mm:ss");return e||((e=Bp.parserToDate(t,"yyyy/MM/dd"))?e:(e=Bp.parserToDate(t,"hh:mm:ss"))?e:(e=Bp.parserToDate(t,"MM月dd日"))?e:(e=Bp.parserToDate(t,"yyyy年MM月"))?e:(e=Bp.parserToDate(t,"yyyy年MM月dd日"))||null)}var Up=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"default",value:function(t){return t}},{key:"text",value:function(t){return t}},{key:"number",value:function(t){if(_.isNumber(t)){if(-1!==t.toString().indexOf(".")){var e=t.toString().lastIndexOf(".")+1;return t.toString().substring(0,e+2)}return"".concat(t,".00")}return t}},{key:"percentage",value:function(t){return _.isNumber(t)?"".concat(t,"%"):t}},{key:"fraction",value:function(t){if(_.isFraction(t)){var e=t.split("/")[0],n=t.split("/")[1];return _.parseInt(e)/_.parseInt(n)}return t}},{key:"ENotation",value:function(t){return _.isNumber(t)?_.parseFloat(t).toExponential(2):t}},{key:"rmb",value:function(t){return _.isNumber(t)?"￥".concat(t):t}},{key:"hk",value:function(t){return _.isNumber(t)?"HK".concat(t):t}},{key:"dollar",value:function(t){return _.isNumber(t)?"$".concat(t):t}},{key:"date1",value:function(t){var e=Gp(t);return e?Bp.dateFormat("yyyy/MM/dd",e):t}},{key:"date2",value:function(t){var e=Gp(t);return e?Bp.dateFormat("MM月dd日",e):t}},{key:"date3",value:function(t){var e=Gp(t);return e?Bp.dateFormat("yyyy年MM月",e):t}},{key:"date4",value:function(t){var e=Gp(t);return e?Bp.dateFormat("yyyy年MM月dd日",e):t}},{key:"date5",value:function(t){var e=Gp(t);return e?Bp.dateFormat("yyyy/MM/dd hh:mm:ss",e):t}},{key:"time",value:function(t){var e=Gp(t);return e?Bp.dateFormat("hh:mm:ss",e):t}}])&&Yp(e.prototype,n),r&&Yp(e,r),t}()),zp=function(t,e){return Up[t](e)};function Fp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Xp=function(){function t(e){var n=e.rect,r=e.draw;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.draw=r,this.rect=n,this.backgroundColor=null}var e,n,r;return e=t,(n=[{key:"drawBackgroundColor",value:function(t){if(t&&(this.backgroundColor=t,t)){var e=this.draw,n=this.rect;e.attr({fillStyle:t}),e.fillRect(n.x,n.y,n.width,n.height)}}}])&&Fp(e.prototype,n),r&&Fp(e,r),t}();function $p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Zp=function(){function t(e){var n=e.merges,r=e.cols,o=e.rows,i=e.data,c=void 0===i?[]:i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.merges=n,this.cols=r,this.rows=o,this.data=c}var e,n,r;return e=t,(n=[{key:"setCellOrNew",value:function(t,e,n){_.isUnDef(this.data[t])&&(this.data[t]=[]),this.data[t][e]=n}},{key:"setCell",value:function(t,e,n){var r=this.data[t];r&&r[e]&&(r[e]=n)}},{key:"getCellOrNew",value:function(t,e){return _.isUnDef(this.data[t])&&(this.data[t]=[]),_.isUnDef(this.data[t][e])&&(this.data[t][e]={text:""}),this.getCell(t,e)}},{key:"getCell",value:function(t,e){var n=this.data[t];if(n&&n[e]){var r=n[e];return r instanceof Va?n[e]:(_.isString(r)&&(r={text:r}),n[e]=new Va(r),n[e])}return null}},{key:"getCellBoundOutSize",value:function(t,e){var n=this.cols,r=this.getCell(t,e);if(r){var o=n.getWidth(e),i=r.contentWidth;switch(r.fontAttr.align){case Zc.ALIGN.right:case Zc.ALIGN.left:return i;case Zc.ALIGN.center:return o+(i-o)/2;default:return 0}}return 0}},{key:"getData",value:function(){return this.data}},{key:"setData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.data=t,this}}])&&$p(e.prototype,n),r&&$p(e,r),t}();function qp(t){return(qp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jp(t,e){return!e||"object"!==qp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qp(t){return(Qp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ty(t,e){return(ty=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ey=function(t){function e(t){var n,r=t.text,o=t.overflow,i=t.rect,c=t.dw,l=t.attr;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Jp(this,Qp(e).call(this,{overflow:o,text:r,rect:i,dw:c,attr:l}))).attr=_.mergeDeep({lineHeight:4,spacing:2},n.attr),n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ty(t,e)}(e,t),n=e,(r=[{key:"drawLine",value:function(t,e,n,r,o,i){var c=this.dw,l=this.attr.size,a=[0,0],s=[0,0];if("strike"===t){switch(o){case Zc.ALIGN.center:case Zc.ALIGN.left:case Zc.ALIGN.right:a[0]=e,s[0]=e+r}switch(i){case Zc.VERTICAL_ALIGN.center:case Zc.VERTICAL_ALIGN.top:case Zc.VERTICAL_ALIGN.bottom:a[1]=n+l/2,s[1]=n+l/2}}if("underline"===t){switch(o){case Zc.ALIGN.center:case Zc.ALIGN.left:case Zc.ALIGN.right:a[0]=e,s[0]=e+r}switch(i){case Zc.VERTICAL_ALIGN.center:case Zc.VERTICAL_ALIGN.top:case Zc.VERTICAL_ALIGN.bottom:a[1]=n+l,s[1]=n+l}}c.line(a,s)}},{key:"draw",value:function(){var t=this.text;if(this.isBlank(t))return 0;var e=this.dw,n=this.attr,r=n.textWrap;switch(e.attr({textAlign:Zc.ALIGN.left,textBaseline:Zc.VERTICAL_ALIGN.top,font:"".concat(n.italic?"italic":""," ").concat(n.bold?"bold":""," ").concat(n.size,"px ").concat(n.name),fillStyle:n.color,strokeStyle:n.color}),r){case Zc.TEXT_WRAP.OVER_FLOW:return this.overflowFont();case Zc.TEXT_WRAP.TRUNCATE:return this.truncateFont();case Zc.TEXT_WRAP.WORD_WRAP:return this.wrapTextFont()}return 0}},{key:"truncateFont",value:function(){for(var t=this.text,e=this.dw,n=this.attr,r=this.rect,o=n.underline,i=n.strikethrough,c=n.align,l=n.verticalAlign,a=n.padding,s=n.size,u=n.lineHeight,f=n.spacing,h=this.textBreak(t),p=[],y=r.width,b=r.height,d=h.length,v=0,g=0,w=0;v<d;){for(var m=h[v],O=m.length,T=0,E=0;E<O;){var S=m.charAt(E),_=this.textWidth(S);p.push({len:_,text:S,tx:g+(s/2-_/2),ty:T}),T+=s+f,E+=1}T>0&&(T-=f),T>w&&(w=T),g+=s+u,v+=1}g>0&&(g-=u);var x=r.x,k=r.y,C=0,P=0;switch(c){case Zc.ALIGN.center:x+=y/2-g/2,C=0;break;case Zc.ALIGN.right:x+=y-g-a,C=a;break;case Zc.ALIGN.left:x+=a,C=a}switch(l){case Zc.VERTICAL_ALIGN.center:k+=b/2-w/2,P=0;break;case Zc.VERTICAL_ALIGN.bottom:k+=b-w-a,P=a;break;case Zc.VERTICAL_ALIGN.top:k+=a,P=a}var L=p.length*(s+u)-u;if(w+P>b||L+C>y){var j=new Dp({draw:e,rect:r});j.open();for(var A=p.length,N=0;N<A;){var R=p[N];R.tx+=x,R.ty+=k,e.fillText(R.text,R.tx,R.ty),o&&this.drawLine("underline",R.tx,R.ty,R.len,c,l),i&&this.drawLine("strike",R.tx,R.ty,R.len,c,l),N+=1}j.close()}else for(var I=p.length,V=0;V<I;){var D=p[V];D.tx+=x,D.ty+=k,e.fillText(D.text,D.tx,D.ty),o&&this.drawLine("underline",D.tx,D.ty,D.len,c,l),i&&this.drawLine("strike",D.tx,D.ty,D.len,c,l),V+=1}return 0}},{key:"overflowFont",value:function(){return this.truncateFont()}},{key:"wrapTextFont",value:function(){for(var t=this.text,e=this.dw,n=this.attr,r=this.rect,o=n.underline,i=n.strikethrough,c=n.align,l=n.verticalAlign,a=n.padding,s=n.size,u=n.lineHeight,f=n.spacing,h=this.textBreak(t),p=[],y=r.width,b=r.height,d=b-2*a,v=h.length,g=0,w=0,m=0;g<v;){for(var O=h[g],T=O.length,E=0,S=0;S<T;){var _=O.charAt(S),x=this.textWidth(_),k={len:x,text:_,tx:w+(s/2-x/2),ty:E};0===S?p.push(k):(p.push(k),k.ty+s>d&&(E>0&&(E-=f),E>m&&(m=E),E=0,w+=s+u,k.tx=w,k.ty=E)),E+=s+f,S+=1}E>0&&(E-=f),E>m&&(m=E),w+=s+u,g+=1}w>0&&(w-=u);var C=r.x,P=r.y,L=0;switch(c){case Zc.ALIGN.center:C+=y/2-w/2,L=0;break;case Zc.ALIGN.right:C+=y-w-a,L=a;break;case Zc.ALIGN.left:C+=a,L=a}switch(l){case Zc.VERTICAL_ALIGN.center:P+=b/2-m/2;break;case Zc.VERTICAL_ALIGN.bottom:P+=b-m-a;break;case Zc.VERTICAL_ALIGN.top:P+=a}if(p.length*(s+u)-u+L>y){var j=new Dp({draw:e,rect:r});j.open();for(var A=p.length,N=0;N<A;){var R=p[N];R.tx+=C,R.ty+=P,e.fillText(R.text,R.tx,R.ty),o&&this.drawLine("underline",R.tx,R.ty,R.len,c,l),i&&this.drawLine("strike",R.tx,R.ty,R.len,c,l),N+=1}j.close()}else for(var I=p.length,V=0;V<I;){var D=p[V];D.tx+=C,D.ty+=P,e.fillText(D.text,D.tx,D.ty),o&&this.drawLine("underline",D.tx,D.ty,D.len,c,l),i&&this.drawLine("strike",D.tx,D.ty,D.len,c,l),V+=1}return 0}}])&&Kp(n.prototype,r),o&&Kp(n,o),e}(Zc);function ny(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ry(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function oy(t,e,n){return e&&ry(t.prototype,e),n&&ry(t,n),t}var iy=function(){function t(){ny(this,t)}return oy(t,null,[{key:"inverse",value:function(t){var e=t.tilt,n=t.angle;return Math.abs(e*Math.sin(oc.radian(n)))}},{key:"tilt",value:function(t){var e=t.inverse,n=t.angle;return Math.abs(e/Math.sin(oc.radian(n)))}}]),t}(),cy=function(){function t(){ny(this,t)}return oy(t,null,[{key:"nearby",value:function(t){var e=t.tilt,n=t.angle;return Math.abs(e*Math.cos(oc.radian(n)))}},{key:"tilt",value:function(t){var e=t.nearby,n=t.angle;return Math.abs(e/Math.cos(oc.radian(n)))}}]),t}();function ly(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ay={TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right",MIDDLE_LEFT:"middle-left",MIDDLE_CENTER:"middle-center",MIDDLE_RIGHT:"middle-right",BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right"},sy=function(){function t(e){var n=e.angle,r=e.dw,o=e.origin,i=void 0===o?ay.MIDDLE_CENTER:o,c=e.rect,l=void 0===c?new Mp({x:0,y:0,width:0,height:0}):c;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dw=r,this.origin=i,this.rect=l,this.angle=n}var e,n,r;return e=t,(n=[{key:"rotate",value:function(){var t=this.origin,e=this.dw,n=this.rect,r=this.angle,o=n.x,i=n.y,c=n.width,l=n.height;e.save();var a=0,s=0;switch(t){case ay.TOP_LEFT:a=o,s=i;break;case ay.TOP_CENTER:a=o+c/2,s=i;break;case ay.TOP_RIGHT:a=o+c,s=i;break;case ay.MIDDLE_LEFT:a=o,s=i+l/2;break;case ay.MIDDLE_CENTER:a=o+c/2,s=i+l/2;break;case ay.MIDDLE_RIGHT:a=o+c,s=i+l/2;break;case ay.BOTTOM_LEFT:a=o,s=i+l;break;case ay.BOTTOM_CENTER:a=o+c/2,s=i+l;break;case ay.BOTTOM_RIGHT:a=o+c,s=i+l}var u=e.getOffsetX(),f=e.getOffsetY();return e.translate(a+u,s+f).rotate(r).translate(-(a+u),-(s+f)),this}},{key:"revert",value:function(){return this.dw.restore(),this}}])&&ly(e.prototype,n),r&&ly(e,r),t}();function uy(t){return(uy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hy(t,e){return!e||"object"!==uy(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function py(t){return(py=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yy(t,e){return(yy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var by=function(t){function e(t){var n,r=t.overflow,o=t.text,i=t.rect,c=t.dw,l=t.attr;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=hy(this,py(e).call(this,{overflow:r,text:o,rect:i,dw:c,attr:l}))).attr=_.mergeDeep({lineHeight:4},n.attr),n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yy(t,e)}(e,t),n=e,(r=[{key:"drawLine",value:function(t,e,n,r){var o=this.dw,i=this.attr.size,c=[0,0],l=[0,0];"strike"===t&&(c[0]=e,l[0]=e+r,c[1]=n+i/2,l[1]=n+i/2),"underline"===t&&(c[0]=e,l[0]=e+r,c[1]=n+i,l[1]=n+i),o.line(c,l)}},{key:"draw",value:function(){var t=this.text;if(this.isBlank(t))return 0;var e=this.dw,n=this.attr,r=n.textWrap,o=n.angle;switch(e.attr({textAlign:Zc.ALIGN.left,textBaseline:Zc.VERTICAL_ALIGN.top,font:"".concat(n.italic?"italic":""," ").concat(n.bold?"bold":""," ").concat(n.size,"px ").concat(n.name),fillStyle:n.color,strokeStyle:n.color}),0===o?e.attr({textAlign:n.align,textBaseline:n.verticalAlign}):e.attr({textAlign:Zc.ALIGN.left,textBaseline:Zc.VERTICAL_ALIGN.top}),r){case Zc.TEXT_WRAP.OVER_FLOW:return this.overflowFont();case Zc.TEXT_WRAP.TRUNCATE:return this.truncateFont();case Zc.TEXT_WRAP.WORD_WRAP:return this.wrapTextFont()}return 0}},{key:"truncateFont",value:function(){this.overflowFont()}},{key:"overflowFont",value:function(){var t=this.text,e=this.dw,n=this.attr,r=this.rect,o=this.overflow;o||(o=r);var i=n.underline,c=n.strikethrough,l=n.align,a=n.verticalAlign,s=n.size,u=n.padding,f=n.lineHeight,h=n.angle;h>90&&(h=90),h<-90&&(h=-90);var p=r.width,y=r.height;if(h>0){for(var b=this.textBreak(t),d=[],v=b.length,g=0,w=0;g<v;){var m=b[g],O=this.textWidth(m);O>w&&(w=O),d.push({text:m,len:O,tx:0,ty:0}),g+=1}var T=d.length;if(T>1){for(var E=iy.tilt({inverse:s+f,angle:h}),S=Math.max(cy.nearby({tilt:w,angle:h}),s),_=iy.inverse({tilt:w,angle:h}),x=S+(T-1)*E,k=0,C=0;C<T;)d[C].tx=k,k+=E,C+=1;var P,L=r.x,j=r.y,A=0,N=0;switch(l){case Zc.ALIGN.center:L+=p/2-x/2,A=0;break;case Zc.ALIGN.left:L+=u,A=u;break;case Zc.ALIGN.right:L+=p-x-u,A=u}switch(a){case Zc.VERTICAL_ALIGN.center:j+=y/2-_/2,N=0;break;case Zc.VERTICAL_ALIGN.top:j+=u,N=u;break;case Zc.VERTICAL_ALIGN.bottom:j+=y-_-u,N=u}if(x+A>o.width||_+N>o.height){var R=new Dp({draw:e,rect:o});R.open();for(var I=0;I<T;){var V=d[I],D=V.tx+L,H=V.ty+j,M=0,W=0;switch(l){case Zc.ALIGN.center:M=D+S/2,W=H+_/2;break;case Zc.ALIGN.left:var B=V.len/2;M+=D+Math.max(cy.nearby({tilt:B,angle:h}),s),W+=H+_-iy.inverse({tilt:B,angle:h});break;case Zc.ALIGN.right:var Y=V.len/2;M+=D+S-Math.max(cy.nearby({tilt:Y,angle:h}),s),W+=H+iy.inverse({tilt:Y,angle:h})}var G=M-V.len/2,U=W-s/2,z=new sy({dw:e,angle:h,rect:new Mp({x:G,y:U,width:V.len,height:s})});z.rotate(),e.fillText(V.text,G,U),i&&this.drawLine("underline",G,U,V.len),c&&this.drawLine("strike",G,U,V.len),z.revert(),I+=1}R.close()}else for(var F=0;F<T;){var X=d[F],$=X.tx+L,Z=X.ty+j,q=0,K=0;switch(l){case Zc.ALIGN.center:q=$+S/2,K=Z+_/2;break;case Zc.ALIGN.left:var J=X.len/2;q+=$+Math.max(cy.nearby({tilt:J,angle:h}),s),K+=Z+_-iy.inverse({tilt:J,angle:h});break;case Zc.ALIGN.right:var Q=X.len/2;q+=$+S-Math.max(cy.nearby({tilt:Q,angle:h}),s),K+=Z+iy.inverse({tilt:Q,angle:h})}var tt=q-X.len/2,et=K-s/2,nt=new sy({dw:e,angle:h,rect:new Mp({x:tt,y:et,width:X.len,height:s})});nt.rotate(),e.fillText(X.text,tt,et),i&&this.drawLine("underline",tt,et,X.len),c&&this.drawLine("strike",tt,et,X.len),nt.revert(),F+=1}switch(l){case Zc.ALIGN.center:P=x;break;case Zc.ALIGN.right:case Zc.ALIGN.left:P=x+u}return P}var rt=this.textWidth(t),ot=Math.max(cy.nearby({tilt:rt,angle:h}),s),it=iy.inverse({tilt:rt,angle:h}),ct=r.x,lt=r.y,at=0,st=0;switch(l){case Zc.ALIGN.center:ct+=p/2-ot/2,at=0;break;case Zc.ALIGN.left:ct+=u,at=u;break;case Zc.ALIGN.right:ct+=p-ot-u,at=u}switch(a){case Zc.VERTICAL_ALIGN.center:lt+=y/2-it/2,st=0;break;case Zc.VERTICAL_ALIGN.top:lt+=u,st=u;break;case Zc.VERTICAL_ALIGN.bottom:lt+=y-it-u,st=u}if(ot+at>o.width||it+st>o.height){var ut=new Dp({draw:e,rect:o});ut.open();var ft=new sy({dw:e,angle:h,rect:new Mp({x:ct,y:lt,width:ot,height:it})});ft.rotate();var ht=ct+(ot/2-rt/2),pt=lt+(it/2-s/2);e.fillText(t,ht,pt),i&&this.drawLine("underline",ht,pt,rt),c&&this.drawLine("strike",ht,pt,rt),ft.revert(),ut.close()}else{var yt=new sy({dw:e,angle:h,rect:new Mp({x:ct,y:lt,width:ot,height:it})});yt.rotate();var bt=ct+(ot/2-rt/2),dt=lt+(it/2-s/2);e.fillText(t,bt,dt),i&&this.drawLine("underline",bt,dt,rt),c&&this.drawLine("strike",bt,dt,rt),yt.revert()}var vt=0;switch(l){case Zc.ALIGN.center:vt=ot;break;case Zc.ALIGN.right:case Zc.ALIGN.left:vt=ot+u}return vt}if(h<0){for(var gt=this.textBreak(t),wt=[],mt=gt.length,Ot=0,Tt=0;Ot<mt;){var Et=gt[Ot],St=this.textWidth(Et);St>Tt&&(Tt=St),wt.push({text:Et,len:St,tx:0,ty:0}),Ot+=1}var _t=wt.length;if(_t>1){for(var xt=iy.tilt({inverse:s+f,angle:h}),kt=Math.max(cy.nearby({tilt:Tt,angle:h}),s),Ct=iy.inverse({tilt:Tt,angle:h}),Pt=kt+(_t-1)*xt,Lt=0,jt=_t-1;jt>=0;)wt[jt].tx=Lt,Lt+=xt,jt-=1;var At=r.x,Nt=r.y,Rt=0,It=0;switch(l){case Zc.ALIGN.center:At+=p/2-Pt/2,Rt=0;break;case Zc.ALIGN.left:At+=u,Rt=u;break;case Zc.ALIGN.right:At+=p-Pt-u,Rt=u}switch(a){case Zc.VERTICAL_ALIGN.center:Nt+=y/2-Ct/2,It=0;break;case Zc.VERTICAL_ALIGN.top:Nt+=u,It=u;break;case Zc.VERTICAL_ALIGN.bottom:Nt+=y-Ct-u,It=u}if(Pt+Rt>o.width||Ct+It>o.height){var Vt=new Dp({draw:e,rect:o});Vt.open();for(var Dt=0;Dt<_t;){var Ht=wt[Dt],Mt=Ht.tx+At,Wt=Ht.ty+Nt,Bt=0,Yt=0;switch(l){case Zc.ALIGN.center:Bt=Mt+kt/2,Yt=Wt+Ct/2;break;case Zc.ALIGN.left:var Gt=Ht.len/2;Bt+=Mt+Math.max(cy.nearby({tilt:Gt,angle:h}),s),Yt+=Wt+iy.inverse({tilt:Gt,angle:h});break;case Zc.ALIGN.right:var Ut=Ht.len/2;Bt+=Mt+kt-Math.max(cy.nearby({tilt:Ut,angle:h}),s),Yt+=Wt+Ct-iy.inverse({tilt:Ut,angle:h})}var zt=Bt-Ht.len/2,Ft=Yt-s/2,Xt=new sy({dw:e,angle:h,rect:new Mp({x:zt,y:Ft,width:Ht.len,height:s})});Xt.rotate(),e.fillText(Ht.text,zt,Ft),i&&this.drawLine("underline",zt,Ft,Ht.len),c&&this.drawLine("strike",zt,Ft,Ht.len),Xt.revert(),Dt+=1}Vt.close()}else for(var $t=0;$t<_t;){var Zt=wt[$t],qt=Zt.tx+At,Kt=Zt.ty+Nt,Jt=0,Qt=0;switch(l){case Zc.ALIGN.center:Jt=qt+kt/2,Qt=Kt+Ct/2;break;case Zc.ALIGN.left:var te=Zt.len/2;Jt+=qt+Math.max(cy.nearby({tilt:te,angle:h}),s),Qt+=Kt+iy.inverse({tilt:te,angle:h});break;case Zc.ALIGN.right:var ee=Zt.len/2;Jt+=qt+kt-Math.max(cy.nearby({tilt:ee,angle:h}),s),Qt+=Kt+Ct-iy.inverse({tilt:ee,angle:h})}var ne=Jt-Zt.len/2,re=Qt-s/2,oe=new sy({dw:e,angle:h,rect:new Mp({x:ne,y:re,width:Zt.len,height:s})});oe.rotate(),e.fillText(Zt.text,ne,re),i&&this.drawLine("underline",ne,re,Zt.len),c&&this.drawLine("strike",ne,re,Zt.len),oe.revert(),$t+=1}var ie=0;switch(l){case Zc.ALIGN.center:ie=Pt;break;case Zc.ALIGN.right:case Zc.ALIGN.left:ie=Pt+u}return ie}var ce,le=this.textWidth(t),ae=Math.max(cy.nearby({tilt:le,angle:h}),s),se=iy.inverse({tilt:le,angle:h}),ue=r.x,fe=r.y,he=0,pe=0;switch(l){case Zc.ALIGN.center:ue+=p/2-ae/2,he=0;break;case Zc.ALIGN.left:ue+=u,he=u;break;case Zc.ALIGN.right:ue+=p-ae-u,he=u}switch(a){case Zc.VERTICAL_ALIGN.center:fe+=y/2-se/2,pe=0;break;case Zc.VERTICAL_ALIGN.top:fe+=u,pe=u;break;case Zc.VERTICAL_ALIGN.bottom:fe+=y-se-u,pe=u}if(ae+he>o.width||se+pe>o.height){var ye=new Dp({draw:e,rect:o});ye.open();var be=new sy({dw:e,angle:h,rect:new Mp({x:ue,y:fe,width:ae,height:se})});be.rotate();var de=ue+(ae/2-le/2),ve=fe+(se/2-s/2);e.fillText(t,de,ve),i&&this.drawLine("underline",de,ve,le),c&&this.drawLine("strike",de,ve,le),be.revert(),ye.close()}else{var ge=new sy({dw:e,angle:h,rect:new Mp({x:ue,y:fe,width:ae,height:se})});ge.rotate();var we=ue+(ae/2-le/2),me=fe+(se/2-s/2);e.fillText(t,we,me),i&&this.drawLine("underline",we,me,le),c&&this.drawLine("strike",we,me,le),ge.revert()}switch(l){case Zc.ALIGN.center:ce=ae;break;case Zc.ALIGN.right:case Zc.ALIGN.left:ce=ae+2*u}return ce}if(0===h){for(var Oe=this.textBreak(t),Te=[],Ee=r.width,Se=r.height,_e=Oe.length,xe=0,ke=0,Ce=0;xe<_e;){xe>0&&(ke+=s+f);var Pe=Oe[xe],Le={tx:0,ty:ke,text:Pe,len:this.textWidth(Pe)};Te.push(Le),Le.len>Ce&&(Ce=Le.len),xe+=1}ke>0&&(ke-=f);var je=r.x,Ae=r.y,Ne=0,Re=0;switch(l){case Zc.ALIGN.center:je+=Ee/2,Ne=0;break;case Zc.ALIGN.left:je+=u,Ne=u;break;case Zc.ALIGN.right:je+=Ee-u,Ne=u}switch(a){case Zc.VERTICAL_ALIGN.center:Ae+=Se/2-ke/2,Re=0;break;case Zc.VERTICAL_ALIGN.top:Ae+=u,Re=u;break;case Zc.VERTICAL_ALIGN.bottom:Ae+=Se-ke-u,Re=u}var Ie=Te.length*(s+f)-f,Ve=Ce+Ne>o.width||Ie+Re>o.height,De=!1;if(l===Zc.ALIGN.center){var He=Ce/2-Ee/2;He>0&&o.x>r.x-He&&(De=!0)}if(Ve||De){var Me=new Dp({draw:e,rect:o});Me.open();for(var We=Te.length,Be=0;Be<We;){var Ye=Te[Be];Ye.tx+=je,Ye.ty+=Ae,e.fillText(Ye.text,Ye.tx,Ye.ty),i&&this.drawLine("underline",Ye.tx,Ye.ty,Ye.len),c&&this.drawLine("strike",Ye.tx,Ye.ty,Ye.len),Be+=1}Me.close()}else for(var Ge=Te.length,Ue=0;Ue<Ge;){var ze=Te[Ue];ze.tx+=je,ze.ty+=Ae,e.fillText(ze.text,ze.tx,ze.ty),i&&this.drawLine("underline",ze.tx,ze.ty,ze.len),c&&this.drawLine("strike",ze.tx,ze.ty,ze.len),Ue+=1}var Fe=0;switch(l){case Zc.ALIGN.right:case Zc.ALIGN.left:Fe=u+Ce;break;case Zc.ALIGN.center:Fe=Ce}return Fe}return 0}},{key:"wrapTextFont",value:function(){var t=this.text,e=this.dw,n=this.attr,r=this.rect,o=this.overflow;o||(o=r);var i=n.underline,c=n.strikethrough,l=n.align,a=n.verticalAlign,s=n.size,u=n.padding,f=n.lineHeight,h=n.angle;h>90&&(h=90),h<-90&&(h=-90);var p=r.width,y=r.height;if(h>0){for(var b=iy.tilt({inverse:y-2*u,angle:h}),d=this.textBreak(t),v=[],g=d.length,w=0,m=0;w<g;){for(var O=d[w],T=O.length,E={len:0,start:0},S=0;S<T;){var _=E.len+this.textWidth(O.charAt(S));_>b?(0===E.len?(v.push({text:O.substring(S,S+1),len:_,tx:0,ty:0}),_>m&&(m=_),S+=1):(v.push({text:O.substring(E.start,S),len:E.len,tx:0,ty:0}),E.len>m&&(m=E.len)),E.len=0,E.start=S):(E.len=_,S+=1)}E.len>0&&v.push({text:O.substring(E.start),len:E.len,tx:0,ty:0}),E.len>m&&(m=E.len),w+=1}var x=v.length;if(x>1){for(var k=iy.tilt({inverse:s+f,angle:h}),C=Math.max(cy.nearby({tilt:m,angle:h}),s),P=iy.inverse({tilt:m,angle:h}),L=C+(x-1)*k,j=0,A=0;A<x;)v[A].tx=j,j+=k,A+=1;var N,R=r.x,I=r.y,V=0,D=0;switch(l){case Zc.ALIGN.center:R+=p/2-L/2,V=0;break;case Zc.ALIGN.left:R+=u,V=u;break;case Zc.ALIGN.right:R+=p-L-u,V=u}switch(a){case Zc.VERTICAL_ALIGN.center:I+=y/2-P/2,D=0;break;case Zc.VERTICAL_ALIGN.top:I+=u,D=u;break;case Zc.VERTICAL_ALIGN.bottom:I+=y-P-u,D=u}if(L+V>o.width||P+D>o.height){var H=new Dp({draw:e,rect:o});H.open();for(var M=0;M<x;){var W=v[M],B=W.tx+R,Y=W.ty+I,G=0,U=0;switch(l){case Zc.ALIGN.center:G=B+C/2,U=Y+P/2;break;case Zc.ALIGN.left:var z=W.len/2;G+=B+Math.max(cy.nearby({tilt:z,angle:h}),s),U+=Y+P-iy.inverse({tilt:z,angle:h});break;case Zc.ALIGN.right:var F=W.len/2;G+=B+C-Math.max(cy.nearby({tilt:F,angle:h}),s),U+=Y+iy.inverse({tilt:F,angle:h})}var X=G-W.len/2,$=U-s/2,Z=new sy({dw:e,angle:h,rect:new Mp({x:X,y:$,width:W.len,height:s})});Z.rotate(),e.fillText(W.text,X,$),i&&this.drawLine("underline",X,$,W.len),c&&this.drawLine("strike",X,$,W.len),Z.revert(),M+=1}H.close()}else for(var q=0;q<x;){var K=v[q],J=K.tx+R,Q=K.ty+I,tt=0,et=0;switch(l){case Zc.ALIGN.center:tt=J+C/2,et=Q+P/2;break;case Zc.ALIGN.left:var nt=K.len/2;tt+=J+Math.max(cy.nearby({tilt:nt,angle:h}),s),et+=Q+P-iy.inverse({tilt:nt,angle:h});break;case Zc.ALIGN.right:var rt=K.len/2;tt+=J+C-Math.max(cy.nearby({tilt:rt,angle:h}),s),et+=Q+iy.inverse({tilt:rt,angle:h})}var ot=tt-K.len/2,it=et-s/2,ct=new sy({dw:e,angle:h,rect:new Mp({x:ot,y:it,width:K.len,height:s})});ct.rotate(),e.fillText(K.text,ot,it),i&&this.drawLine("underline",ot,it,K.len),c&&this.drawLine("strike",ot,it,K.len),ct.revert(),q+=1}switch(l){case Zc.ALIGN.center:N=L;break;case Zc.ALIGN.right:case Zc.ALIGN.left:N=L+u}return N}var lt=this.textWidth(t),at=Math.max(cy.nearby({tilt:lt,angle:h}),s),st=iy.inverse({tilt:lt,angle:h}),ut=r.x,ft=r.y,ht=0,pt=0;switch(l){case Zc.ALIGN.center:ut+=p/2-at/2,ht=0;break;case Zc.ALIGN.left:ut+=u,ht=u;break;case Zc.ALIGN.right:ut+=p-at-u,ht=u}switch(a){case Zc.VERTICAL_ALIGN.center:ft+=y/2-st/2,pt=0;break;case Zc.VERTICAL_ALIGN.top:ft+=u,pt=u;break;case Zc.VERTICAL_ALIGN.bottom:ft+=y-st-u,pt=u}if(at+ht>o.width||st+pt>o.height){var yt=new Dp({draw:e,rect:o});yt.open();var bt=new sy({dw:e,angle:h,rect:new Mp({x:ut,y:ft,width:at,height:st})});bt.rotate();var dt=ut+(at/2-lt/2),vt=ft+(st/2-s/2);e.fillText(t,dt,vt),i&&this.drawLine("underline",dt,vt,lt),c&&this.drawLine("strike",dt,vt,lt),bt.revert(),yt.close()}else{var gt=new sy({dw:e,angle:h,rect:new Mp({x:ut,y:ft,width:at,height:st})});gt.rotate();var wt=ut+(at/2-lt/2),mt=ft+(st/2-s/2);e.fillText(t,wt,mt),i&&this.drawLine("underline",wt,mt,lt),c&&this.drawLine("strike",wt,mt,lt),gt.revert()}var Ot=0;switch(l){case Zc.ALIGN.center:Ot=at;break;case Zc.ALIGN.right:case Zc.ALIGN.left:Ot=at+u}return Ot}if(h<0){for(var Tt=iy.tilt({inverse:y-2*u,angle:h}),Et=this.textBreak(t),St=[],_t=Et.length,xt=0,kt=0;xt<_t;){for(var Ct=Et[xt],Pt=Ct.length,Lt={len:0,start:0},jt=0;jt<Pt;){var At=Lt.len+this.textWidth(Ct.charAt(jt));At>Tt?(0===Lt.len?(St.push({text:Ct.substring(jt,jt+1),len:At,tx:0,ty:0}),At>kt&&(kt=At),jt+=1):(St.push({text:Ct.substring(Lt.start,jt),len:Lt.len,tx:0,ty:0}),Lt.len>kt&&(kt=Lt.len)),Lt.len=0,Lt.start=jt):(Lt.len=At,jt+=1)}Lt.len>0&&St.push({text:Ct.substring(Lt.start),len:Lt.len,tx:0,ty:0}),Lt.len>kt&&(kt=Lt.len),xt+=1}var Nt=St.length;if(Nt>1){for(var Rt=iy.tilt({inverse:s+f,angle:h}),It=Math.max(cy.nearby({tilt:kt,angle:h}),s),Vt=iy.inverse({tilt:kt,angle:h}),Dt=It+(Nt-1)*Rt,Ht=0,Mt=Nt-1;Mt>=0;)St[Mt].tx=Ht,Ht+=Rt,Mt-=1;var Wt=r.x,Bt=r.y,Yt=0,Gt=0;switch(l){case Zc.ALIGN.center:Wt+=p/2-Dt/2,Yt=0;break;case Zc.ALIGN.left:Wt+=u,Yt=u;break;case Zc.ALIGN.right:Wt+=p-Dt-u,Yt=u}switch(a){case Zc.VERTICAL_ALIGN.center:Bt+=y/2-Vt/2,Gt=0;break;case Zc.VERTICAL_ALIGN.top:Bt+=u,Gt=u;break;case Zc.VERTICAL_ALIGN.bottom:Bt+=y-Vt-u,Gt=u}if(Dt+Yt>o.width||Vt+Gt>o.height){var Ut=new Dp({draw:e,rect:o});Ut.open();for(var zt=0;zt<Nt;){var Ft=St[zt],Xt=Ft.tx+Wt,$t=Ft.ty+Bt,Zt=0,qt=0;switch(l){case Zc.ALIGN.center:Zt=Xt+It/2,qt=$t+Vt/2;break;case Zc.ALIGN.left:var Kt=Ft.len/2;Zt+=Xt+Math.max(cy.nearby({tilt:Kt,angle:h}),s),qt+=$t+iy.inverse({tilt:Kt,angle:h});break;case Zc.ALIGN.right:var Jt=Ft.len/2;Zt+=Xt+It-Math.max(cy.nearby({tilt:Jt,angle:h}),s),qt+=$t+Vt-iy.inverse({tilt:Jt,angle:h})}var Qt=Zt-Ft.len/2,te=qt-s/2,ee=new sy({dw:e,angle:h,rect:new Mp({x:Qt,y:te,width:Ft.len,height:s})});ee.rotate(),e.fillText(Ft.text,Qt,te),i&&this.drawLine("underline",Qt,te,Ft.len),c&&this.drawLine("strike",Qt,te,Ft.len),ee.revert(),zt+=1}Ut.close()}else for(var ne=0;ne<Nt;){var re=St[ne],oe=re.tx+Wt,ie=re.ty+Bt,ce=0,le=0;switch(l){case Zc.ALIGN.center:ce=oe+It/2,le=ie+Vt/2;break;case Zc.ALIGN.left:var ae=re.len/2;ce+=oe+Math.max(cy.nearby({tilt:ae,angle:h}),s),le+=ie+iy.inverse({tilt:ae,angle:h});break;case Zc.ALIGN.right:var se=re.len/2;ce+=oe+It-Math.max(cy.nearby({tilt:se,angle:h}),s),le+=ie+Vt-iy.inverse({tilt:se,angle:h})}var ue=ce-re.len/2,fe=le-s/2,he=new sy({dw:e,angle:h,rect:new Mp({x:ue,y:fe,width:re.len,height:s})});he.rotate(),e.fillText(re.text,ue,fe),i&&this.drawLine("underline",ue,fe,re.len),c&&this.drawLine("strike",ue,fe,re.len),he.revert(),ne+=1}var pe=0;switch(l){case Zc.ALIGN.center:pe=Dt;break;case Zc.ALIGN.right:case Zc.ALIGN.left:pe=Dt+u}return pe}var ye,be=this.textWidth(t),de=Math.max(cy.nearby({tilt:be,angle:h}),s),ve=iy.inverse({tilt:be,angle:h}),ge=r.x,we=r.y,me=0,Oe=0;switch(l){case Zc.ALIGN.center:ge+=p/2-de/2,me=0;break;case Zc.ALIGN.left:ge+=u,me=u;break;case Zc.ALIGN.right:ge+=p-de-u,me=u}switch(a){case Zc.VERTICAL_ALIGN.center:we+=y/2-ve/2,Oe=0;break;case Zc.VERTICAL_ALIGN.top:we+=u,Oe=u;break;case Zc.VERTICAL_ALIGN.bottom:we+=y-ve-u,Oe=u}if(de+me>o.width||ve+Oe>o.height){var Te=new Dp({draw:e,rect:o});Te.open();var Ee=new sy({dw:e,angle:h,rect:new Mp({x:ge,y:we,width:de,height:ve})});Ee.rotate();var Se=ge+(de/2-be/2),_e=we+(ve/2-s/2);e.fillText(t,Se,_e),i&&this.drawLine("underline",Se,_e,be),c&&this.drawLine("strike",Se,_e,be),Ee.revert(),Te.close()}else{var xe=new sy({dw:e,angle:h,rect:new Mp({x:ge,y:we,width:de,height:ve})});xe.rotate();var ke=ge+(de/2-be/2),Ce=we+(ve/2-s/2);e.fillText(t,ke,Ce),i&&this.drawLine("underline",ke,Ce,be),c&&this.drawLine("strike",ke,Ce,be),xe.revert()}switch(l){case Zc.ALIGN.center:ye=de;break;case Zc.ALIGN.right:case Zc.ALIGN.left:ye=de+2*u}return ye}if(0===h){for(var Pe=this.textBreak(t),Le=[],je=r.width,Ae=r.height,Ne=je-2*u,Re=Pe.length,Ie=0,Ve=0;Ie<Re;){Ie>0&&(Ve+=s+f);for(var De=Pe[Ie],He=De.length,Me=0,We={len:0,start:0};Me<He;){var Be=We.len+this.textWidth(De.charAt(Me));Be>Ne?(0===We.len?(Le.push({text:De.substring(Me,Me+1),len:Be,tx:0,ty:Ve}),Me+=1):Le.push({text:De.substring(We.start,Me),len:We.len,tx:0,ty:Ve}),Ve+=s+f,We.len=0,We.start=Me):(We.len=Be,Me+=1)}We.len>0&&Le.push({text:De.substring(We.start),len:We.len,tx:0,ty:Ve}),Ie+=1}Ve>0&&(Ve-=f);var Ye=r.x,Ge=r.y,Ue=0;switch(l){case Zc.ALIGN.left:Ye+=u;break;case Zc.ALIGN.center:Ye+=je/2;break;case Zc.ALIGN.right:Ye+=je-u}switch(a){case Zc.VERTICAL_ALIGN.center:Ge+=Ae/2-Ve/2,Ue=0;break;case Zc.VERTICAL_ALIGN.top:Ge+=u,Ue=u;break;case Zc.VERTICAL_ALIGN.bottom:Ge+=Ae-Ve-u,Ue=u}if(Le.length*(s+f)-f+Ue>Ae){var ze=new Dp({draw:e,rect:r});ze.open();for(var Fe=Le.length,Xe=0;Xe<Fe;){var $e=Le[Xe];$e.tx+=Ye,$e.ty+=Ge,e.fillText($e.text,$e.tx,$e.ty),i&&this.drawLine("underline",$e.tx,$e.ty,$e.len),c&&this.drawLine("strike",$e.tx,$e.ty,$e.len),Xe+=1}ze.close()}else for(var Ze=0,qe=Le.length;Ze<qe;Ze+=1){var Ke=Le[Ze];Ke.tx+=Ye,Ke.ty+=Ge,e.fillText(Ke.text,Ke.tx,Ke.ty),i&&this.drawLine("underline",Ke.tx,Ke.ty,Ke.len),c&&this.drawLine("strike",Ke.tx,Ke.ty,Ke.len)}return 0}return 0}}])&&fy(n.prototype,r),o&&fy(n,o),e}(Zc);function dy(t){return(dy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gy(t,e){return!e||"object"!==dy(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wy(t){return(wy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function my(t,e){return(my=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Oy(t){return(Oy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ty(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ey(t,e){return!e||"object"!==Oy(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Sy(t){return(Sy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _y(t,e){return(_y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xy=function(t){function e(t){var n,r=t.overflow,o=t.text,i=t.rect,c=t.dw,l=t.attr;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ey(this,Sy(e).call(this,{overflow:r,text:o,rect:i,dw:c,attr:l}))).attr=_.mergeDeep({lineHeight:4},n.attr),n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_y(t,e)}(e,t),n=e,(r=[{key:"drawLine",value:function(t,e,n,r){var o=this.dw,i=this.attr,c=i.size,l=i.verticalAlign,a=i.align,s=[0,0],u=[0,0];if("strike"===t){switch(a){case Zc.ALIGN.right:s[0]=e-r,u[0]=e;break;case Zc.ALIGN.center:s[0]=e-r/2,u[0]=e+r/2;break;case Zc.ALIGN.left:s[0]=e,u[0]=e+r}switch(l){case Zc.VERTICAL_ALIGN.top:s[1]=n+c/2,u[1]=n+c/2;break;case Zc.VERTICAL_ALIGN.center:s[1]=n,u[1]=n;break;case Zc.VERTICAL_ALIGN.bottom:s[1]=n-c/2,u[1]=n-c/2}}if("underline"===t){switch(a){case Zc.ALIGN.right:s[0]=e-r,u[0]=e;break;case Zc.ALIGN.center:s[0]=e-r/2,u[0]=e+r/2;break;case Zc.ALIGN.left:s[0]=e,u[0]=e+r}switch(l){case Zc.VERTICAL_ALIGN.top:s[1]=n+c,u[1]=n+c;break;case Zc.VERTICAL_ALIGN.center:s[1]=n+c/2,u[1]=n+c/2;break;case Zc.VERTICAL_ALIGN.bottom:s[1]=n,u[1]=n}}o.line(s,u)}},{key:"draw",value:function(){var t=this.text;if(this.isBlank(t))return 0;var e=this.dw,n=this.attr,r=n.textWrap;switch(e.attr({textAlign:n.align,textBaseline:n.verticalAlign,font:"".concat(n.italic?"italic":""," ").concat(n.bold?"bold":""," ").concat(n.size,"px ").concat(n.name),fillStyle:n.color,strokeStyle:n.color}),r){case Zc.TEXT_WRAP.OVER_FLOW:return this.overflowFont();case Zc.TEXT_WRAP.TRUNCATE:return this.truncateFont();case Zc.TEXT_WRAP.WORD_WRAP:return this.wrapTextFont()}return 0}},{key:"truncateFont",value:function(){for(var t=this.text,e=this.dw,n=this.attr,r=this.rect,o=n.underline,i=n.strikethrough,c=n.align,l=n.verticalAlign,a=n.padding,s=n.size,u=n.lineHeight,f=this.textBreak(t),h=[],p=r.width,y=r.height,b=f.length,d=0,v=0,g=0;d<b;){d>0&&(v+=s+u);var w=this.displayFont(r,f[d]),m={tx:0,ty:v,text:w,len:this.textWidth(w)};h.push(m),m.len>g&&(g=m.len),d+=1}v>0&&(v-=u);var O=r.x,T=r.y,E=0,S=0;switch(c){case Zc.ALIGN.center:O+=p/2,E=0;break;case Zc.ALIGN.left:O+=a,E=a;break;case Zc.ALIGN.right:O+=p-a,E=a}switch(l){case Zc.VERTICAL_ALIGN.center:T+=y/2-v/2,S=0;break;case Zc.VERTICAL_ALIGN.top:T+=a,S=a;break;case Zc.VERTICAL_ALIGN.bottom:T+=y-v-a,S=a}var _=h.length*(s+u)-u;if(g+E>p||_+S>y){var x=new Dp({draw:e,rect:r});x.open();for(var k=h.length,C=0;C<k;){var P=h[C];P.tx+=O,P.ty+=T,e.fillText(P.text,P.tx,P.ty),o&&this.drawLine("underline",P.tx,P.ty,P.len),i&&this.drawLine("strike",P.tx,P.ty,P.len),C+=1}x.close()}else for(var L=h.length,j=0;j<L;){var A=h[j];A.tx+=O,A.ty+=T,e.fillText(A.text,A.tx,A.ty),o&&this.drawLine("underline",A.tx,A.ty,A.len),i&&this.drawLine("strike",A.tx,A.ty,A.len),j+=1}return 0}},{key:"overflowFont",value:function(){var t=this.text,e=this.dw,n=this.attr,r=this.rect,o=this.overflow;o||(o=r);for(var i=n.underline,c=n.strikethrough,l=n.align,a=n.verticalAlign,s=n.padding,u=n.size,f=n.lineHeight,h=this.textBreak(t),p=[],y=r.width,b=r.height,d=h.length,v=0,g=0,w=0;v<d;){v>0&&(g+=u+f);var m=h[v],O={tx:0,ty:g,text:m,len:this.textWidth(m)};p.push(O),O.len>w&&(w=O.len),v+=1}g>0&&(g-=f);var T=r.x,E=r.y,S=0,_=0;switch(l){case Zc.ALIGN.center:T+=y/2,S=0;break;case Zc.ALIGN.left:T+=s,S=s;break;case Zc.ALIGN.right:T+=y-s,S=s}switch(a){case Zc.VERTICAL_ALIGN.center:E+=b/2-g/2,_=0;break;case Zc.VERTICAL_ALIGN.top:E+=s,_=s;break;case Zc.VERTICAL_ALIGN.bottom:E+=b-g-s,_=s}var x=p.length*(u+f)-f,k=w+S>o.width||x+_>o.height,C=!1;if(l===Zc.ALIGN.center){var P=w/2-y/2;P>0&&(o.x>r.x-P?C=!0:o.x+o.width<r.x+r.width+P&&(C=!0))}if(k||C){var L=new Dp({draw:e,rect:o});L.open();for(var j=p.length,A=0;A<j;){var N=p[A];N.tx+=T,N.ty+=E,e.fillText(N.text,N.tx,N.ty),i&&this.drawLine("underline",N.tx,N.ty,N.len),c&&this.drawLine("strike",N.tx,N.ty,N.len),A+=1}L.close()}else for(var R=p.length,I=0;I<R;){var V=p[I];V.tx+=T,V.ty+=E,e.fillText(V.text,V.tx,V.ty),i&&this.drawLine("underline",V.tx,V.ty,V.len),c&&this.drawLine("strike",V.tx,V.ty,V.len),I+=1}var D=0;switch(l){case Zc.ALIGN.right:case Zc.ALIGN.left:D=s+w;break;case Zc.ALIGN.center:D=w}return D}},{key:"wrapTextFont",value:function(){for(var t=this.text,e=this.dw,n=this.attr,r=this.rect,o=n.underline,i=n.strikethrough,c=n.align,l=n.verticalAlign,a=n.padding,s=n.size,u=n.lineHeight,f=this.textBreak(t),h=[],p=r.width,y=r.height,b=p-2*a,d=f.length,v=0,g=0;v<d;){v>0&&(g+=s+u);for(var w=f[v],m=w.length,O=0,T={len:0,start:0};O<m;){var E=T.len+this.textWidth(w.charAt(O));E>b?(0===T.len?(h.push({text:w.substring(O,O+1),len:E,tx:0,ty:g}),O+=1):h.push({text:w.substring(T.start,O),len:T.len,tx:0,ty:g}),g+=s+u,T.len=0,T.start=O):(T.len=E,O+=1)}T.len>0&&h.push({text:w.substring(T.start),len:T.len,tx:0,ty:g}),v+=1}g>0&&(g-=u);var S=r.x,_=r.y,x=0;switch(c){case Zc.ALIGN.left:S+=a;break;case Zc.ALIGN.center:S+=p/2;break;case Zc.ALIGN.right:S+=p-a}switch(l){case Zc.VERTICAL_ALIGN.center:_+=y/2-g/2,x=0;break;case Zc.VERTICAL_ALIGN.top:_+=a,x=a;break;case Zc.VERTICAL_ALIGN.bottom:_+=y-g-a,x=a}if(h.length*(s+u)-u+x>y){var k=new Dp({draw:e,rect:r});k.open();for(var C=h.length,P=0;P<C;){var L=h[P];L.tx+=S,L.ty+=_,e.fillText(L.text,L.tx,L.ty),o&&this.drawLine("underline",L.tx,L.ty,L.len),i&&this.drawLine("strike",L.tx,L.ty,L.len),P+=1}k.close()}else for(var j=0,A=h.length;j<A;j+=1){var N=h[j];N.tx+=S,N.ty+=_,e.fillText(N.text,N.tx,N.ty),o&&this.drawLine("underline",N.tx,N.ty,N.len),i&&this.drawLine("strike",N.tx,N.ty,N.len)}return 0}}])&&Ty(n.prototype,r),o&&Ty(n,o),e}(function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),gy(this,wy(e).apply(this,arguments))}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&my(t,e)}(e,t),n=e,(r=[{key:"displayFont",value:function(t,e){var n=this.attr.align,r=t.width,o=e.length;switch(n){case Zc.ALIGN.center:var i=r/2-this.textWidth(e)/2;if(i<0)for(var c="",l=0;l<o;){var a=e.charAt(l);if((i+=this.textWidth(a))>0&&(c+=a,i>r))return c;l+=1}break;case Zc.ALIGN.left:for(var s=e.length,u="",f=0,h=0;f<s;){var p=e.charAt(f);if(u+=p,(h+=this.textWidth(p))>r)return u;f+=1}break;case Zc.ALIGN.right:for(var y=e.length,b="",d=0;y>0;){var v=e.charAt(y);if(b=v+b,(d+=this.textWidth(v))>r)return b;y-=1}}return e}}])&&vy(n.prototype,r),o&&vy(n,o),e}(Zc));function ky(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Cy=function(){function t(e){var n=e.overflow,r=e.text,o=e.dw,i=e.rect,c=e.attr;switch(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.attr=_.mergeDeep({},{verticalAlign:Zc.VERTICAL_ALIGN.center,direction:Zc.TEXT_DIRECTION.HORIZONTAL,name:"Arial",size:14,color:"#000000",underline:!1,strikethrough:!1,bold:!1,italic:!1,textWrap:Zc.TEXT_WRAP.TRUNCATE,align:Zc.ALIGN.left,angle:0,padding:8},c),this.font=null,c.direction){case Zc.TEXT_DIRECTION.HORIZONTAL:this.font=new xy({text:r,rect:i,dw:o,overflow:n,attr:this.attr});break;case Zc.TEXT_DIRECTION.ANGLE:this.font=new by({text:r,rect:i,dw:o,overflow:n,attr:this.attr});break;case Zc.TEXT_DIRECTION.VERTICAL:this.font=new ey({text:r,rect:i,dw:o,overflow:n,attr:this.attr})}}var e,n,r;return e=t,(n=[{key:"setTextWrap",value:function(t){this.font.setTextWrap(t)}},{key:"setSize",value:function(t){this.font.setSize(t)}},{key:"setPadding",value:function(t){this.font.setPadding(t)}},{key:"draw",value:function(){return this.font.draw()}}])&&ky(e.prototype,n),r&&ky(e,r),t}();function Py(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ly(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function jy(t,e,n){return e&&Ly(t.prototype,e),n&&Ly(t,n),t}var Ay=function(){function t(e){var n=e.scaleAdapter;Py(this,t),this.scaleAdapter=n,this.text=null,this.rect=null,this.attr=null,this.dw=null,this.overflow=null}return jy(t,[{key:"setDraw",value:function(t){this.dw=t}},{key:"setText",value:function(t){this.text=t}},{key:"setRect",value:function(t){this.rect=t}},{key:"setAttr",value:function(t){this.attr=t}},{key:"setOverFlow",value:function(t){this.overflow=t}},{key:"build",value:function(){var t=this.text,e=this.rect,n=this.attr,r=this.overflow,o=this.dw,i=this.scaleAdapter,c=new Cy({dw:o,text:t,rect:e,attr:n,overflow:r}),l=oc.rpx(i.goto(n.size)),a=oc.rpx(i.goto(n.padding));return c.setSize(l),c.setPadding(a),c}}]),t}(),Ny=function(){function t(e){var n=e.scaleAdapter,r=void 0===n?new Lh:n;Py(this,t),this.scaleAdapter=r}return jy(t,[{key:"getBuilder",value:function(){var t=this.scaleAdapter;return new Ay({scaleAdapter:t})}}]),t}();function Ry(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Iy=function(){function t(e){var n=e.cells,r=e.merges,o=e.rows,i=e.cols,c=e.xTableAreaView;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.xTableAreaView=c,this.cells=n,this.merges=r,this.rows=o,this.cols=i}var e,n,r;return e=t,(n=[{key:"getCellOverFlow",value:function(t,e,n,r){var o=this.xTableAreaView,i=r.fontAttr,c=i.direction,l=i.textWrap,a=i.angle,s=n.x,u=n.y,f=n.height;if(c===Zc.TEXT_DIRECTION.ANGLE){if(0===a){var h=this.getCellTextMaxWidth(t,e);return new Mp({x:s+h.offset,y:u,width:h.width,height:f})}var p=o.getScrollView();return new Mp({x:0,y:u,width:p.w,height:f})}if(l===Zc.TEXT_WRAP.OVER_FLOW){var y=this.getCellTextMaxWidth(t,e);return new Mp({x:s+y.offset,y:u,width:y.width,height:f})}return null}},{key:"getCellTextMaxWidth",value:function(t,e){var n=this.cells,r=this.cols,o=this.merges,i=n.getCell(t,e).fontAttr.align,c=0,l=0;if(i===Zc.ALIGN.left)for(var a=e,s=r.len;a<=s;a+=1){var u=n.getCell(t,a),f=o.getFirstIncludes(t,a);if(a===e)c+=r.getWidth(a);else{if(!_.isUnDef(u)&&!_.isBlank(u.text)||!_.isUnDef(f))break;c+=r.getWidth(a)}}else if(i===Zc.ALIGN.center){for(var h=0,p=0,y=e+1,b=r.len;y<=b;y+=1){var d=n.getCell(t,y),v=o.getFirstIncludes(t,y);if(!_.isUnDef(d)&&!_.isBlank(d.text)||!_.isUnDef(v))break;h+=r.getWidth(y)}for(var g=e-1;g>=0;g-=1){var w=n.getCell(t,g),m=o.getFirstIncludes(t,g);if(!_.isUnDef(w)&&!_.isBlank(w.text)||!_.isUnDef(m))break;var O=r.getWidth(g);p+=O,l-=O}c=r.getWidth(e)+p+h}else if(i===Zc.ALIGN.right)for(var T=e;T>=0;T-=1){var E=n.getCell(t,T),S=o.getFirstIncludes(t,T);if(T===e)c+=r.getWidth(T);else{if(!_.isUnDef(E)&&!_.isBlank(E.text)||!_.isUnDef(S))break;var x=r.getWidth(T);c+=x,l-=x}}return{width:c,offset:l}}}])&&Ry(e.prototype,n),r&&Ry(e,r),t}();function Vy(t){return(Vy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Hy(t,e){return!e||"object"!==Vy(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function My(t){return(My=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wy(t,e){return(Wy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var By=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Hy(this,My(e).apply(this,arguments))}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wy(t,e)}(e,t),n=e,(r=[{key:"getCellByViewRange",value:function(t){for(var e=t.rectRange,n=t.callback,r=t.startX,o=void 0===r?0:r,i=t.startY,c=void 0===i?0:i,l=this.rows,a=this.cols,s=this.cells,u=e.sri,f=e.eri,h=e.sci,p=e.eci,y=c,b=u;b<=f;b+=1){for(var d=l.getHeight(b),v=o,g=h;g<=p;g+=1){var w=a.getWidth(g),m=s.getCell(b,g);if(m&&!1===n(b,g,m,new Mp({x:v,y:y,width:w,height:d})))return;v+=w}y+=d}}},{key:"getCellOrNewCellByViewRange",value:function(t){for(var e=t.rectRange,n=t.callback,r=t.startX,o=void 0===r?0:r,i=t.startY,c=void 0===i?0:i,l=this.rows,a=this.cols,s=this.cells,u=e.sri,f=e.eri,h=e.sci,p=e.eci,y=c,b=u;b<=f;b+=1){for(var d=l.getHeight(b),v=o,g=h;g<=p;g+=1){var w=a.getWidth(g),m=s.getCellOrNew(b,g);if(m&&!1===n(b,g,m,new Mp({x:v,y:y,width:w,height:d})))return;v+=w}y+=d}}},{key:"getMergeCellByViewRange",value:function(t){for(var e=t.rectRange,n=t.callback,r=t.startX,o=void 0===r?0:r,i=t.startY,c=void 0===i?0:i,l=this.rows,a=this.cols,s=this.cells,u=this.merges,f=e.sri,h=e.eri,p=e.sci,y=e.eci,b=[],d=f;d<=h;d+=1)for(var v=function(t){var r=u.getFirstIncludes(d,t);if(_.isUnDef(r)||b.find((function(t){return t===r})))return"continue";var i=Math.min(e.sri,r.sri),f=Math.min(e.sci,r.sci),h=Math.max(e.sri,r.sri),p=Math.max(e.sci,r.sci);h-=1,p-=1;var y=a.sectionSumWidth(f,p),v=l.sectionSumHeight(i,h);y=e.sci>r.sci?-1*y:y,v=e.sri>r.sri?-1*v:v,y+=o,v+=c;var g=l.sectionSumHeight(r.sri,r.eri),w=a.sectionSumWidth(r.sci,r.eci),m=s.getCellOrNew(r.sri,r.sci),O=new Mp({x:y,y:v,width:w,height:g});n(O,m,r),b.push(r)},g=p;g<=y;g+=1)v(g)}},{key:"getCellSkipMergeCellByViewRange",value:function(t){var e=t.rectRange,n=t.callback,r=t.startX,o=void 0===r?0:r,i=t.startY,c=void 0===i?0:i,l=this.merges;this.getCellByViewRange({rectRange:e,callback:function(t,e,r,o,i){null===l.getFirstIncludes(t,e)&&n(t,e,r,o,i)},startX:o,startY:c})}}])&&Dy(n.prototype,r),o&&Dy(n,o),e}(Iy);function Yy(t){return(Yy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Uy(t,e){return!e||"object"!==Yy(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function zy(t){return(zy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fy(t,e){return(Fy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Xy=3,$y=1,Zy=2,qy=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Uy(this,zy(e).apply(this,arguments))}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fy(t,e)}(e,t),n=e,(r=[{key:"getCellByViewRange",value:function(t){var e=t.reverseRows,n=void 0!==e&&e,r=t.reverseCols,o=void 0!==r&&r,i=t.rectRange,c=void 0===i?new es(0,0,0,0,0,0):i,l=t.newRow,a=void 0===l?function(){}:l,s=t.newCol,u=void 0===s?function(){}:s,f=t.callback,h=void 0===f?function(){}:f,p=t.startX,y=void 0===p?0:p,b=t.startY,d=void 0===b?0:b,v=this.rows,g=this.cols,w=this.cells,m=c.sri,O=c.eri,T=c.sci,E=c.eci;if(n&&o)for(var S=d,_=O;m<=_;_-=1){var x=v.getHeight(_),k=y;a(_),S-=x;for(var C=E;T<=C;C-=1){var P=g.getWidth(C),L=w.getCell(_,C);if(u(C),k-=P,L){var j=new Mp({x:k,y:S,width:P,height:x}),A=h(_,C,L,j,this.getCellOverFlow(_,C,j,L));if(A===$y)break;if(A===Zy)return}}}else if(n)for(var N=d,R=O;m<=R;R-=1){var I=v.getHeight(R),V=y;a(R),N-=I;for(var D=T;D<=E;D+=1){var H=g.getWidth(D),M=w.getCell(R,D);if(u(D),M){var W=new Mp({x:V,y:N,width:H,height:I}),B=h(R,D,M,W,this.getCellOverFlow(R,D,W,M));if(B===$y)break;if(B===Zy)return}V+=H}}else if(o)for(var Y=d,G=m;G<=O;G+=1){var U=v.getHeight(G),z=y;a(G);for(var F=E;T<=F;F-=1){var X=g.getWidth(F),$=w.getCell(G,F);if(u(F),z-=X,$){var Z=new Mp({x:z,y:Y,width:X,height:U}),q=h(G,F,$,Z,this.getCellOverFlow(G,F,Z,$));if(q===$y)break;if(q===Zy)return}}Y+=U}else for(var K=d,J=m;J<=O;J+=1){var Q=v.getHeight(J),tt=y;a(J);for(var et=T;et<=E;et+=1){var nt=g.getWidth(et),rt=w.getCell(J,et);if(u(et),rt){var ot=new Mp({x:tt,y:K,width:nt,height:Q}),it=h(J,et,rt,ot,this.getCellOverFlow(J,et,ot,rt));if(it===$y)break;if(it===Zy)return}tt+=nt}K+=Q}}},{key:"getMergeCellByViewRange",value:function(t){for(var e=t.rectRange,n=t.callback,r=t.startX,o=void 0===r?0:r,i=t.startY,c=void 0===i?0:i,l=this.rows,a=this.cols,s=this.cells,u=this.merges,f=e.sri,h=e.eri,p=e.sci,y=e.eci,b=[],d=f;d<=h;d+=1)for(var v=function(t){var r=u.getFirstIncludes(d,t);if(_.isUnDef(r)||b.find((function(t){return t===r})))return"continue";var i=Math.min(e.sri,r.sri),f=Math.min(e.sci,r.sci),h=Math.max(e.sri,r.sri),p=Math.max(e.sci,r.sci);h-=1,p-=1;var y=a.sectionSumWidth(f,p),v=l.sectionSumHeight(i,h);y=e.sci>r.sci?-1*y:y,v=e.sri>r.sri?-1*v:v,y+=o,v+=c;var g=l.sectionSumHeight(r.sri,r.eri),w=a.sectionSumWidth(r.sci,r.eci),m=s.getCellOrNew(r.sri,r.sci),O=new Mp({x:y,y:v,width:w,height:g});n(O,m,r),b.push(r)},g=p;g<=y;g+=1)v(g)}},{key:"getCellSkipMergeCellByViewRange",value:function(t){var e=t.reverseRows,n=t.reverseCols,r=t.rectRange,o=t.newRow,i=t.newCol,c=t.callback,l=t.startX,a=t.startY,s=this.merges;this.getCellByViewRange({reverseRows:e,reverseCols:n,rectRange:r,newRow:o,newCol:i,callback:function(t,e,n,r,o){null===s.getFirstIncludes(t,e)&&c(t,e,n,r,o)},startX:l,startY:a})}}])&&Gy(n.prototype,r),o&&Gy(n,o),e}(Iy);function Ky(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Jy=function(){function t(e){var n=e.merges,r=void 0===n?[]:n,o=e.cols,i=e.rows;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rows=i,this.cols=o,this.data=r.map((function(t){return es.valueOf(t)})),this.index=new Array(i.len*o.len)}var e,n,r;return e=t,(n=[{key:"getIncludes",value:function(t,e){var n=this,r=this.index,o=this.data;t.each((function(t,i){var c=n.getOffset(t,i),l=r[c];_.isNotUnDef(l)&&e(o[l])}))}},{key:"getOffset",value:function(t,e){return t*this.cols.len+e}},{key:"getFirstIncludes",value:function(t,e){var n=this.index,r=this.data,o=n[this.getOffset(t,e)];if(_.isUnDef(o))return null;var i=r[o];return _.isUnDef(i)?null:i}},{key:"add",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.index,o=this.data;n&&this.getIncludes(t,(function(t){return e.delete(t)}));var i=o.length;o.push(t),t.each((function(t,n){var o=e.getOffset(t,n);r[o]=i}))}},{key:"delete",value:function(t){var e=this,n=this.index,r=this.data,o=t.sri,i=t.sci,c=this.getOffset(o,i),l=n[c];_.isUnDef(l)||(r.splice(l,1),t.each((function(t,r){var o=e.getOffset(t,r);n[o]=void 0})),this.sync(l))}},{key:"union",value:function(t){for(var e=this,n=t,r=[],o=function(t){var o=e.data[t];if(r.find((function(t){return t===o})))return i=t,"continue";o.intersects(n)&&(r.push(o),n=o.union(n),t=-1),i=t},i=0;i<this.data.length;i+=1)o(i);return n}},{key:"sync",value:function(){for(var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=this.index,r=this.data,o=function(e){r[e].each((function(r,o){var i=t.getOffset(r,o);n[i]=e}))},i=e;i<r.length;i+=1)o(i)}},{key:"getData",value:function(){return this.data}},{key:"setData",value:function(t){this.data=t}}])&&Ky(e.prototype,n),r&&Ky(e,r),t}();function Qy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var tb=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.change=!1}var e,n,r;return e=t,(n=[{key:"endNotice",value:function(){this.change&&(this.change=!1)}},{key:"backNotice",value:function(){this.change&&(this.change=!1)}},{key:"goNotice",value:function(){this.change&&(this.change=!1)}}])&&Qy(e.prototype,n),r&&Qy(e,r),t}();function eb(t){return(eb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rb(t,e){return!e||"object"!==eb(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ob(t,e,n){return(ob="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ib(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function ib(t){return(ib=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cb(t,e){return(cb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var lb=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{on:{setCell:function(){}}};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=rb(this,ib(e).call(this))).table=t,n.option=r,n}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cb(t,e)}(e,t),n=e,(o=[{key:"$setCell",value:function(t,e,n){this.change=!0,this.table.cells.setCellOrNew(t,e,n)}},{key:"setCell",value:function(t,e,n){var r=this.option,o=this.table,i=r.on.setCell,c=o.cells.getCell(t,e);this.$setCell(t,e,n),i(t,e,c,n)}},{key:"endNotice",value:function(){var t=this.table;this.change&&t.trigger(r.TABLE_EVENT_TYPE.DATA_CHANGE),ob(ib(e.prototype),"endNotice",this).call(this)}},{key:"goNotice",value:function(){var t=this.table;this.change&&t.trigger(r.TABLE_EVENT_TYPE.DATA_CHANGE),ob(ib(e.prototype),"goNotice",this).call(this)}},{key:"backNotice",value:function(){var t=this.table;this.change&&t.trigger(r.TABLE_EVENT_TYPE.DATA_CHANGE),ob(ib(e.prototype),"backNotice",this).call(this)}}])&&nb(n.prototype,o),i&&nb(n,i),e}(tb);var ab=function t(e){var n=e.ri,r=e.ci,o=e.oldCell,i=e.newCell;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ri=n,this.ci=r,this.oldCell=o,this.newCell=i};var sb={ADD:Symbol("添加一个合并单元格"),DELETE:Symbol("删除一个合并单元格")},ub=function t(e){var n=e.merge,r=e.recordType;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.merge=n,this.recordType=r};function fb(t){return(fb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pb(t,e){return!e||"object"!==fb(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function yb(t,e,n){return(yb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=bb(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function bb(t){return(bb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function db(t,e){return(db=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var vb=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{on:{addMerge:function(){},deleteMerge:function(){}}};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=pb(this,bb(e).call(this))).table=t,n.option=r,n}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&db(t,e)}(e,t),n=e,(o=[{key:"$addMerge",value:function(t){var e=this;this.change=!0;var n=this.table.merges;n.getIncludes(t,(function(t){return e.deleteMerge(t)})),n.add(t,!1)}},{key:"$deleteMerge",value:function(t){this.change=!0,this.table.merges.delete(t)}},{key:"deleteMerge",value:function(t){var e=this.option.on.deleteMerge;this.$deleteMerge(t),e(t)}},{key:"addMerge",value:function(t){var e=this.option.on.addMerge;this.$addMerge(t),e(t)}},{key:"endNotice",value:function(){var t=this.table;this.change&&t.trigger(r.TABLE_EVENT_TYPE.DATA_CHANGE),yb(bb(e.prototype),"endNotice",this).call(this)}},{key:"goNotice",value:function(){var t=this.table;this.change&&t.trigger(r.TABLE_EVENT_TYPE.DATA_CHANGE),yb(bb(e.prototype),"goNotice",this).call(this)}},{key:"backNotice",value:function(){var t=this.table;this.change&&t.trigger(r.TABLE_EVENT_TYPE.DATA_CHANGE),yb(bb(e.prototype),"backNotice",this).call(this)}}])&&hb(n.prototype,o),i&&hb(n,i),e}(tb);function gb(t){return(gb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mb(t,e){return!e||"object"!==gb(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ob(t,e,n){return(Ob="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Tb(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Tb(t){return(Tb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Eb(t,e){return(Eb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Sb=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{on:{setWidth:function(){}}};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=mb(this,Tb(e).call(this))).table=t,n.option=r,n}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Eb(t,e)}(e,t),n=e,(o=[{key:"$setWidth",value:function(t,e){this.change=!0,this.table.cols.setWidth(t,e)}},{key:"setWidth",value:function(t,e){var n=this.option,r=this.table,o=n.on.setWidth,i=r.cols.getWidth(t);this.$setWidth(t,e),o(t,i,e)}},{key:"endNotice",value:function(){var t=this.table;this.change&&(t.trigger(r.TABLE_EVENT_TYPE.DATA_CHANGE),t.trigger(r.TABLE_EVENT_TYPE.CHANGE_WIDTH)),Ob(Tb(e.prototype),"endNotice",this).call(this)}},{key:"backNotice",value:function(){var t=this.table;this.change&&(t.trigger(r.TABLE_EVENT_TYPE.DATA_CHANGE),t.trigger(r.TABLE_EVENT_TYPE.CHANGE_WIDTH)),Ob(Tb(e.prototype),"backNotice",this).call(this)}},{key:"goNotice",value:function(){var t=this.table;this.change&&(t.trigger(r.TABLE_EVENT_TYPE.DATA_CHANGE),t.trigger(r.TABLE_EVENT_TYPE.CHANGE_WIDTH)),Ob(Tb(e.prototype),"goNotice",this).call(this)}}])&&wb(n.prototype,o),i&&wb(n,i),e}(tb);var _b=function t(e){var n=e.ci,r=e.oldWidth,o=e.newWidth;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ci=n,this.oldWidth=r,this.newWidth=o};function xb(t){return(xb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Cb(t,e){return!e||"object"!==xb(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pb(t,e,n){return(Pb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Lb(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Lb(t){return(Lb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jb(t,e){return(jb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ab=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{on:{setHeight:function(){}}};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Cb(this,Lb(e).call(this))).table=t,n.option=r,n}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jb(t,e)}(e,t),n=e,(o=[{key:"$setHeight",value:function(t,e){this.change=!0,this.table.rows.setHeight(t,e)}},{key:"setHeight",value:function(t,e){var n=this.option,r=this.table,o=n.on.setHeight,i=r.rows.getHeight(t);this.$setHeight(t,e),o(t,i,e)}},{key:"endNotice",value:function(){var t=this.table;this.change&&(t.trigger(r.TABLE_EVENT_TYPE.DATA_CHANGE),t.trigger(r.TABLE_EVENT_TYPE.CHANGE_HEIGHT)),Pb(Lb(e.prototype),"endNotice",this).call(this)}},{key:"backNotice",value:function(){var t=this.table;this.change&&(t.trigger(r.TABLE_EVENT_TYPE.DATA_CHANGE),t.trigger(r.TABLE_EVENT_TYPE.CHANGE_HEIGHT)),Pb(Lb(e.prototype),"backNotice",this).call(this)}},{key:"goNotice",value:function(){var t=this.table;this.change&&(t.trigger(r.TABLE_EVENT_TYPE.DATA_CHANGE),t.trigger(r.TABLE_EVENT_TYPE.CHANGE_HEIGHT)),Pb(Lb(e.prototype),"goNotice",this).call(this)}}])&&kb(n.prototype,o),i&&kb(n,i),e}(tb);var Nb=function t(e){var n=e.ri,r=e.oldHeight,o=e.newHeight;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ri=n,this.oldHeight=r,this.newHeight=o};function Rb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ib=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.record=!1,this.backLayerStack=[],this.goLayerStack=[],this.recordLayer=[],this.table=e,this.mergeDataProxy=new vb(e,{on:{deleteMerge:function(t){!1!==n.record&&n.recordLayer.push(new ub({merge:t,recordType:sb.DELETE}))},addMerge:function(t){!1!==n.record&&n.recordLayer.push(new ub({merge:t,recordType:sb.ADD}))}}}),this.cellDataProxy=new lb(e,{on:{setCell:function(t,e,r,o){!1!==n.record&&n.recordLayer.push(new ab({ri:t,ci:e,oldCell:r,newCell:o}))}}}),this.colsDataProxy=new Sb(e,{on:{setWidth:function(t,e,r){!1!==n.record&&n.recordLayer.push(new _b({ci:t,oldWidth:e,newWidth:r}))}}}),this.rowsDataProxy=new Ab(e,{on:{setHeight:function(t,e,r){!1!==n.record&&n.recordLayer.push(new Nb({ri:t,oldHeight:e,newHeight:r}))}}})}var e,n,r;return e=t,(n=[{key:"back",value:function(){for(var t=this.backLayerStack,e=this.goLayerStack,n=this.table,r=t.pop(),o=r.length-1;o>=0;o-=1){var i=r[o];if(i instanceof ab){var c=i.ri,l=i.ci,a=i.oldCell;this.cellDataProxy.$setCell(c,l,a)}else if(i instanceof ub)switch(i.recordType){case sb.DELETE:var s=i.merge;this.mergeDataProxy.$addMerge(s);break;case sb.ADD:var u=i.merge;this.mergeDataProxy.$deleteMerge(u)}else if(i instanceof _b){var f=i.ci,h=i.oldWidth;this.colsDataProxy.$setWidth(f,h)}else if(i instanceof Nb){var p=i.ri,y=i.oldHeight;this.rowsDataProxy.$setHeight(p,y)}}e.push(r),this.mergeDataProxy.backNotice(),this.cellDataProxy.backNotice(),this.colsDataProxy.backNotice(),this.rowsDataProxy.backNotice(),n.render()}},{key:"go",value:function(){for(var t=this.backLayerStack,e=this.goLayerStack,n=this.table,r=e.pop(),o=0,i=r.length;o<i;o+=1){var c=r[o];if(c instanceof ab){var l=c.ri,a=c.ci,s=c.newCell;this.cellDataProxy.$setCell(l,a,s)}else if(c instanceof ub)switch(c.recordType){case sb.DELETE:var u=c.merge;this.mergeDataProxy.$deleteMerge(u);break;case sb.ADD:var f=c.merge;this.mergeDataProxy.$addMerge(f)}else if(c instanceof _b){var h=c.ci,p=c.newWidth;this.colsDataProxy.$setWidth(h,p)}else if(c instanceof Nb){var y=c.ri,b=c.newHeight;this.rowsDataProxy.$setHeight(y,b)}}t.push(r),this.mergeDataProxy.goNotice(),this.cellDataProxy.goNotice(),this.colsDataProxy.goNotice(),this.rowsDataProxy.goNotice(),n.render()}},{key:"end",value:function(){var t=this.recordLayer,e=this.backLayerStack;this.record=!1,t.length&&e.push(t),this.recordLayer=[],this.mergeDataProxy.endNotice(),this.cellDataProxy.endNotice(),this.colsDataProxy.endNotice(),this.rowsDataProxy.endNotice()}},{key:"begin",value:function(){this.record=!0,this.goLayerStack=[]}},{key:"canBack",value:function(){return 0!==this.backLayerStack.length}},{key:"canGo",value:function(){return 0!==this.goLayerStack.length}}])&&Rb(e.prototype,n),r&&Rb(e,r),t}();function Vb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Db=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.callback=e}var e,n,r;return e=t,(n=[{key:"execute",value:function(){return this.callback.apply(this,arguments)}}])&&Vb(e.prototype,n),r&&Vb(e,r),t}();function Hb(t){return(Hb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wb(t,e){return!e||"object"!==Hb(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bb(t){return(Bb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yb(t,e){return(Yb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Gb=function(t){function e(t){var n,r=t.cells,o=t.cols,i=t.merges;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Wb(this,Bb(e).call(this,(function(t,e){return!!i.getFirstIncludes(e,t-1)||n.master(e,t)&&n.right(e,t)&&n.left(e,t)})))).cells=r,n.cols=o,n.merges=i,n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yb(t,e)}(e,t),n=e,(r=[{key:"master",value:function(t,e){var n=this.cells,r=this.cols,o=n.getCell(t,e-1),i=n.getCell(t,e);if(_.isUnDef(i)||_.isBlank(i.text))return!0;var c=i.fontAttr,l=!0;if(c.direction===Zc.TEXT_DIRECTION.ANGLE){var a=c.angle;90!==a&&-90!==a||(l=!1),c.textWrap===Zc.TEXT_WRAP.TRUNCATE&&(l=!1)}else c.textWrap!==Zc.TEXT_WRAP.OVER_FLOW&&(l=!1);var s=c.align,u=r.getWidth(e);return s!==Zc.ALIGN.right&&s!==Zc.ALIGN.center&&(l=!1),!l||!(n.getCellBoundOutSize(t,e)>u&&(_.isUnDef(o)||_.isBlank(o.text)))}},{key:"right",value:function(t,e){for(var n=this.cells,r=this.cols,o=this.merges,i=r.len,c=n.getCell(t,e-1),l=n.getCell(t,e),a=r.getWidth(e+1)+r.getWidth(e),s=e+1;s<=i;s+=1,a+=r.getWidth(s)){var u=n.getCell(t,s);if(!_.isUnDef(u)){var f=o.getFirstIncludes(t,s);if(!_.isNotUnDef(f)){var h=u.text;if(!_.isBlank(h)){var p=u.fontAttr;if(p.direction===Zc.TEXT_DIRECTION.ANGLE){var y=p.angle,b=p.textWrap;if(90===y||-90===y)break;if(b===Zc.TEXT_WRAP.TRUNCATE)break;var d=p.align;if(d!==Zc.ALIGN.right&&d!==Zc.ALIGN.center)break}else{if(p.textWrap!==Zc.TEXT_WRAP.OVER_FLOW)break;var v=p.align;if(v!==Zc.ALIGN.right&&v!==Zc.ALIGN.center)break}if(n.getCellBoundOutSize(t,s)>a){var g=_.isUnDef(l)||_.isBlank(l.text),w=_.isUnDef(c)||_.isBlank(c.text);if(g&&w)return!1}break}}}}return!0}},{key:"left",value:function(t,e){for(var n=this.cells,r=this.cols,o=this.merges,i=n.getCell(t,e),c=r.getWidth(e-1),l=e-1;l>=0;l-=1,c+=r.getWidth(l)){var a=n.getCell(t,l);if(!_.isUnDef(a)){var s=o.getFirstIncludes(t,l);if(!_.isNotUnDef(s)){var u=a.text;if(!_.isBlank(u)){var f=a.fontAttr;if(f.direction===Zc.TEXT_DIRECTION.ANGLE){var h=f.angle,p=f.textWrap;if(90===h||-90===h)break;if(p===Zc.TEXT_WRAP.TRUNCATE)break;var y=f.align;if(y!==Zc.ALIGN.left&&y!==Zc.ALIGN.center)break}else{if(f.textWrap!==Zc.TEXT_WRAP.OVER_FLOW)break;var b=f.align;if(b!==Zc.ALIGN.left&&b!==Zc.ALIGN.center)break}if(n.getCellBoundOutSize(t,l)>c&&(_.isUnDef(i)||_.isBlank(i.text)))return!1;break}}}}return!0}}])&&Mb(n.prototype,r),o&&Mb(n,o),e}(Db);function Ub(t){return(Ub="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fb(t,e){return!e||"object"!==Ub(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xb(t){return(Xb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $b(t,e){return($b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zb=function(t){function e(t){var n,r=t.cells,o=t.cols,i=t.merges;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Fb(this,Xb(e).call(this,(function(t,e){return!!i.getFirstIncludes(e,t+1)||n.master(e,t)&&n.right(e,t)&&n.left(e,t)})))).cells=r,n.cols=o,n.merges=i,n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$b(t,e)}(e,t),n=e,(r=[{key:"master",value:function(t,e){var n=this.cells,r=this.cols,o=n.getCell(t,e+1),i=n.getCell(t,e);if(_.isUnDef(i)||_.isBlank(i.text))return!0;var c=i.fontAttr,l=!0;if(c.direction===Zc.TEXT_DIRECTION.ANGLE){var a=c.angle;90!==a&&-90!==a||(l=!1),c.textWrap===Zc.TEXT_WRAP.TRUNCATE&&(l=!1)}else c.textWrap!==Zc.TEXT_WRAP.OVER_FLOW&&(l=!1);var s=c.align,u=r.getWidth(e);return s!==Zc.ALIGN.left&&s!==Zc.ALIGN.center&&(l=!1),!l||!(n.getCellBoundOutSize(t,e)>u&&(_.isUnDef(o)||_.isBlank(o.text)))}},{key:"right",value:function(t,e){for(var n=this.cells,r=this.cols,o=this.merges,i=r.len,c=n.getCell(t,e),l=r.getWidth(e+1),a=e+1;a<=i;a+=1,l+=r.getWidth(a)){var s=n.getCell(t,a);if(!_.isUnDef(s)){var u=o.getFirstIncludes(t,a);if(!_.isNotUnDef(u)){var f=s.text;if(!_.isBlank(f)){var h=s.fontAttr;if(h.direction===Zc.TEXT_DIRECTION.ANGLE){var p=h.angle,y=h.textWrap;if(90===p||-90===p)break;if(y===Zc.TEXT_WRAP.TRUNCATE)break;var b=h.align;if(b!==Zc.ALIGN.right&&b!==Zc.ALIGN.center)break}else{if(h.textWrap!==Zc.TEXT_WRAP.OVER_FLOW)break;var d=h.align;if(d!==Zc.ALIGN.right&&d!==Zc.ALIGN.center)break}if(n.getCellBoundOutSize(t,a)>l&&(null===c||_.isBlank(c.text)))return!1;break}}}}return!0}},{key:"left",value:function(t,e){for(var n=this.cells,r=this.cols,o=this.merges,i=n.getCell(t,e+1),c=n.getCell(t,e),l=r.getWidth(e-1)+r.getWidth(e),a=e-1;a>=0;a-=1,l+=r.getWidth(a)){var s=n.getCell(t,a);if(!_.isUnDef(s)){var u=o.getFirstIncludes(t,a);if(!_.isNotUnDef(u)){var f=s.text;if(!_.isBlank(f)){var h=s.fontAttr;if(h.direction===Zc.TEXT_DIRECTION.ANGLE){var p=h.angle,y=h.textWrap;if(90===p||-90===p)break;if(y===Zc.TEXT_WRAP.TRUNCATE)break;var b=h.align;if(b!==Zc.ALIGN.left&&b!==Zc.ALIGN.center)break}else{if(h.textWrap!==Zc.TEXT_WRAP.OVER_FLOW)break;var d=h.align;if(d!==Zc.ALIGN.left&&d!==Zc.ALIGN.center)break}if(n.getCellBoundOutSize(t,a)>l){var v=_.isUnDef(c)||_.isBlank(c.text),g=_.isUnDef(i)||_.isBlank(i.text);if(v&&g)return!1}break}}}}return!0}}])&&zb(n.prototype,r),o&&zb(n,o),e}(Db);function qb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Kb=function(){function t(e){var n=e.merges,r=e.rows,o=e.cols,i=e.cells;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.merges=n,this.cells=i,this.rows=r,this.cols=o,this.rightOutRangeFilter=new Zb({cells:i,cols:o,merges:n}),this.leftOutRangeFilter=new Gb({cells:i,cols:o,merges:n})}var e,n,r;return e=t,(n=[{key:"getMergeCoincideRange",value:function(t){var e=t.viewRange,n=void 0===e?new es(0,0,0,0):e,r=this.merges,o=this.cols,i=this.rows,c=[],l=[];return this.horizontalIterate({viewRange:n,filter:new Db((function(t,e){var n=r.getFirstIncludes(t,e);return _.isNotUnDef(n)&&-1===c.indexOf(n)})),handle:function(t,e,a,s){var u=r.getFirstIncludes(t,e);c.push(u);var f=n.coincide(u),h=o.sectionSumWidth(f.sci,f.eci),p=i.sectionSumHeight(f.sri,f.eri),y=new Mp({x:a,y:s,width:h,height:p});l.push({rect:y,view:f,merge:u})}}),l}},{key:"getCoincideRangeBrink",value:function(t){for(var e=t.coincide,n=void 0===e?new es(0,0,0,0):e,r=this.cols,o=this.rows,i=[],c=0;c<n.length;c+=1){var l=n[c],a=l.view,s=l.rect,u=l.merge,f=a.brink(),h={view:f.top,x:s.x,y:s.y},p={view:f.left,x:s.x,y:s.y},y={view:f.bottom,x:s.x,y:s.y+s.height-o.rectRangeSumHeight(f.bottom)},b={view:f.right,x:s.x+s.width-r.rectRangeSumWidth(f.right),y:s.y},d={};u.sri===a.sri&&(d.top=h),u.sci===a.sci&&(d.left=p),u.eri===a.eri&&(d.bottom=y),u.eci===a.eci&&(d.right=b),i.push(d)}return i}},{key:"horizontalIterate",value:function(t){for(var e=t.viewRange,n=void 0===e?new es(0,0,0,0):e,r=t.newRow,o=void 0===r?function(){return!0}:r,i=t.filter,c=void 0===i?new Db((function(){return!0})):i,l=t.jump,a=void 0===l?function(){return!0}:l,s=t.handle,u=void 0===s?function(){return!0}:s,f=t.endRow,h=void 0===f?function(){return!0}:f,p=t.bx,y=void 0===p?0:p,b=t.by,d=void 0===b?0:b,v=this.cols,g=this.rows,w=n.sri,m=n.eri,O=n.sci,T=n.eci,E=d,S=w;S<=m;S+=1){var _=g.getHeight(S),x=y;o(S,E);for(var k=O;k<=T;k+=1){var C=v.getWidth(k);c.execute(S,k,x,E)?u(S,k,x,E):a(S,k,x,E),x+=C}h(),E+=_}}},{key:"verticalIterate",value:function(t){for(var e=t.viewRange,n=void 0===e?new es(0,0,0,0):e,r=t.newCol,o=void 0===r?function(){return!0}:r,i=t.filter,c=void 0===i?new Db((function(){return!0})):i,l=t.jump,a=void 0===l?function(){return!0}:l,s=t.handle,u=void 0===s?function(){return!0}:s,f=t.endCol,h=void 0===f?function(){return!0}:f,p=t.bx,y=void 0===p?0:p,b=t.by,d=void 0===b?0:b,v=this.cols,g=this.rows,w=n.sri,m=n.eri,O=n.sci,T=n.eci,E=y,S=O;S<=T;S+=1){var _=v.getWidth(S),x=d;o(S,E);for(var k=w;k<=m;k+=1){var C=g.getHeight(k);c.execute(S,k,E,x)?u(S,k,E,x):a(S,k,E,x),x+=C}h(),E+=_}}}])&&qb(e.prototype,n),r&&qb(e,r),t}();function Jb(t){return(Jb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qb(t,e){return!e||"object"!==Jb(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function td(t){return(td=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ed(t,e){return(ed=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var nd=function(t){function e(t){var n=t.merges;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Qb(this,td(e).call(this,(function(t,e){return null===n.getFirstIncludes(t,e)})))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ed(t,e)}(e,t),e}(Db);function rd(t){return(rd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function od(t,e){return!e||"object"!==rd(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function id(t){return(id=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cd(t,e){return(cd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ld=function(t){function e(t){var n=t.merges;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),od(this,id(e).call(this,(function(t,e){return null===n.getFirstIncludes(e,t)})))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cd(t,e)}(e,t),e}(Db);function ad(t){return(ad="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sd(t,e){return!e||"object"!==ad(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ud(t){return(ud=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fd(t,e){return(fd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var hd=function(t){function e(t){var n=t.cells;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),sd(this,ud(e).call(this,(function(t,e){var r=n.getCell(t+1,e),o=n.getCell(t,e),i=!1;return o&&!i&&(i=o.borderAttr.bottom.display),r&&!i&&(i=r.borderAttr.top.display),!i})))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fd(t,e)}(e,t),e}(Db);function pd(t){return(pd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yd(t,e){return!e||"object"!==pd(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function bd(t){return(bd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dd(t,e){return(dd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var vd=function(t){function e(t){var n=t.cells;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),yd(this,bd(e).call(this,(function(t,e){var r=n.getCell(e,t+1),o=n.getCell(e,t),i=!1;return o&&!i&&(i=o.borderAttr.right.display),r&&!i&&(i=r.borderAttr.left.display),!i})))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dd(t,e)}(e,t),e}(Db);function gd(t){return(gd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function md(t,e){return!e||"object"!==gd(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Od(t){return(Od=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Td(t,e){return(Td=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ed=function(t){function e(t){var n,r=t.merges,o=t.rows,i=t.cols,c=t.cells,l=t.drawCheck,a=void 0!==l&&l,s=t.getHeight,u=void 0===s?function(t){return o.getHeight(t)}:s,f=t.getWidth,h=void 0===f?function(t){return i.getWidth(t)}:f;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=md(this,Od(e).call(this,{merges:r,rows:o,cols:i,cells:c}))).drawCheck=a,n.getHeight=u,n.getWidth=h,n.horizontalBorderDisplayFilter=new hd({cells:c}),n.verticalBorderDisplayFilter=new vd({cells:c}),n.horizontalMergeFilter=new nd({merges:r}),n.verticalMergeFilter=new ld({merges:r}),n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Td(t,e)}(e,t),n=e,(r=[{key:"computerHorizontalLine",value:function(t){var e,n,r,o,i,c=t.viewRange,l=t.bx,a=void 0===l?0:l,s=t.by,u=void 0===s?0:s,f=t.filter,h=this.getWidth,p=this.getHeight,y=[];return this.horizontalIterate({viewRange:c,newRow:function(t,c){var l=p(t);r=e=a,o=n=u+c+l,i=!1},filter:f,jump:function(t,c){i&&(i=!1,y.push({sx:e,sy:n,ex:r,ey:o}));var l=h(c);r=e=r+l},handle:function(t,e){i=!0;var n=h(e);r+=n},endRow:function(){i&&y.push({sx:e,sy:n,ex:r,ey:o})}}),y}},{key:"computerVerticalLine",value:function(t){var e,n,r,o,i,c=t.viewRange,l=t.bx,a=void 0===l?0:l,s=t.by,u=void 0===s?0:s,f=t.filter,h=this.getWidth,p=this.getHeight,y=[];return this.verticalIterate({viewRange:c,newCol:function(t,c){var l=h(t);r=e=a+c+l,o=n=u,i=!1},filter:f,jump:function(t,c){i&&(i=!1,y.push({sx:e,sy:n,ex:r,ey:o}));var l=p(c);o=n=o+l},handle:function(t,e){i=!0;var n=p(e);o+=n},endCol:function(){i&&y.push({sx:e,sy:n,ex:r,ey:o})}}),y}}])&&wd(n.prototype,r),o&&wd(n,o),e}(Kb);function Sd(t){return(Sd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _d(t,e){return!e||"object"!==Sd(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xd(t){return(xd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kd(t,e){return(kd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Cd={AND:Symbol("and"),OR:Symbol("or")},Pd=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),_d(this,xd(e).call(this,(function(){var e;if(t===Cd.AND){e=!0;var r=!0,o=!1,i=void 0;try{for(var c,l=n[Symbol.iterator]();!(r=(c=l.next()).done);r=!0){var a=c.value;if(!1===a.execute.apply(a,arguments)){e=!1;break}}}catch(t){o=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}}else{e=!1;var s=!0,u=!1,f=void 0;try{for(var h,p=n[Symbol.iterator]();!(s=(h=p.next()).done);s=!0){var y=h.value;if(!0===y.execute.apply(y,arguments)){e=!0;break}}}catch(t){u=!0,f=t}finally{try{s||null==p.return||p.return()}finally{if(u)throw f}}}return e})))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kd(t,e)}(e,t),e}(Db);function Ld(t){return(Ld="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ad(t,e){return!e||"object"!==Ld(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Nd(t){return(Nd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rd(t,e){return(Rd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Id=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ad(this,Nd(e).apply(this,arguments))}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rd(t,e)}(e,t),n=e,(r=[{key:"getHorizontalLine",value:function(t){var e=t.viewRange,n=this.horizontalMergeFilter,r=this.horizontalBorderDisplayFilter;return this.drawCheck?this.computerHorizontalLine({viewRange:e,filter:new Pd(Cd.AND,[n,r])}):this.computerHorizontalLine({viewRange:e})}},{key:"getMergeHorizontalLine",value:function(t){var e=t.brink,n=[],r=this.horizontalBorderDisplayFilter;if(this.drawCheck)for(var o=0;o<e.length;o+=1){var i=e[o].bottom;if(i){var c=i.view,l=i.x,a=i.y,s=this.computerHorizontalLine({viewRange:c,bx:l,by:a,filter:r});n=n.concat(s)}}else for(var u=0;u<e.length;u+=1){var f=e[u].bottom;if(f){var h=f.view,p=f.x,y=f.y,b=this.computerHorizontalLine({viewRange:h,bx:p,by:y});n=n.concat(b)}}return n}}])&&jd(n.prototype,r),o&&jd(n,o),e}(Ed);function Vd(t){return(Vd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Hd(t,e){return!e||"object"!==Vd(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Md(t){return(Md=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wd(t,e){return(Wd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Bd=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Hd(this,Md(e).apply(this,arguments))}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wd(t,e)}(e,t),n=e,(r=[{key:"getVerticalLine",value:function(t){var e=t.viewRange,n=this.verticalMergeFilter,r=this.verticalBorderDisplayFilter,o=this.rightOutRangeFilter;return this.drawCheck?this.computerVerticalLine({viewRange:e,filter:new Pd(Cd.AND,[n,r,o])}):this.computerVerticalLine({viewRange:e})}},{key:"getMergeVerticalLine",value:function(t){var e=t.brink,n=[],r=this.verticalBorderDisplayFilter;if(this.drawCheck)for(var o=0;o<e.length;o+=1){var i=e[o].right;if(i){var c=i.view,l=i.x,a=i.y,s=this.computerVerticalLine({viewRange:c,bx:l,by:a,filter:r});n=n.concat(s)}}else for(var u=0;u<e.length;u+=1){var f=e[u].right;if(f){var h=f.view,p=f.x,y=f.y,b=this.computerVerticalLine({viewRange:h,bx:p,by:y});n=n.concat(b)}}return n}}])&&Dd(n.prototype,r),o&&Dd(n,o),e}(Ed);function Yd(t){return(Yd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gd(t,e){return!e||"object"!==Yd(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ud(t){return(Ud=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zd(t,e){return(zd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Fd=function(t){function e(t){var n=t.cells;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Gd(this,Ud(e).call(this,(function(t,e){var r=n.getCell(t+1,e),o=n.getCell(t,e);if(_.isUnDef(o))return!1;var i=o.borderAttr.bottom;if(_.isUnDef(r))return i.display;var c=r.borderAttr.top;if(!c.display)return i.display;var l=i.priority(c);return 1===l||0===l})))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zd(t,e)}(e,t),e}(Db);function Xd(t){return(Xd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $d(t,e){return!e||"object"!==Xd(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zd(t){return(Zd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qd(t,e){return(qd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Kd=function(t){function e(t){var n=t.cells;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),$d(this,Zd(e).call(this,(function(t,e){var r=n.getCell(e,t-1),o=n.getCell(e,t);if(_.isUnDef(o))return!1;var i=o.borderAttr.left;if(_.isUnDef(r))return i.display;var c=r.borderAttr.right;return c.display?1===i.priority(c):i.display})))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qd(t,e)}(e,t),e}(Db);function Jd(t){return(Jd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qd(t,e){return!e||"object"!==Jd(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function tv(t){return(tv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ev(t,e){return(ev=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var nv=function(t){function e(t){var n=t.cells;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Qd(this,tv(e).call(this,(function(t,e){var r=n.getCell(e,t+1),o=n.getCell(e,t);if(_.isUnDef(o))return!1;var i=o.borderAttr.right;if(_.isUnDef(r))return i.display;var c=r.borderAttr.left;if(!c.display)return i.display;var l=i.priority(c);return 1===l||0===l})))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ev(t,e)}(e,t),e}(Db);function rv(t){return(rv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ov(t,e){return!e||"object"!==rv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function iv(t){return(iv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cv(t,e){return(cv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var lv=function(t){function e(t){var n=t.cells;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ov(this,iv(e).call(this,(function(t,e){var r=n.getCell(t-1,e),o=n.getCell(t,e);if(_.isUnDef(o))return!1;var i=o.borderAttr.top;if(_.isUnDef(r))return i.display;var c=r.borderAttr.bottom;return c.display?1===i.priority(c):i.display})))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cv(t,e)}(e,t),e}(Db);function av(t){return(av="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function uv(t,e){return!e||"object"!==av(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fv(t){return(fv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hv(t,e){return(hv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pv=function(t){function e(t){var n,r=t.drawOptimization,o=void 0!==r&&r,i=t.merges,c=t.rows,l=t.cols,a=t.cells;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=uv(this,fv(e).call(this,{merges:i,rows:c,cols:l,cells:a}))).drawOptimization=o,n.horizontalMergeFilter=new nd({merges:i}),n.verticalMergeFilter=new ld({merges:i}),n.bottomBorderDiffFilter=new Fd({cells:a}),n.leftBorderDiffFilter=new Kd({cells:a}),n.rightBorderDiffFilter=new nv({cells:a}),n.topBorderDiffFilter=new lv({cells:a}),n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hv(t,e)}(e,t),n=e,(r=[{key:"computerTopHorizontalLine",value:function(t){var e,n,r,o,i=t.viewRange,c=void 0===i?null:i,l=t.bx,a=void 0===l?0:l,s=t.by,u=void 0===s?0:s,f=t.filter,h=void 0===f?null:f,p=this.drawOptimization,y=this.cols,b=this.cells,d=[];if(this.horizontalIterate({viewRange:c,newRow:function(t,i){r=e=a,o=n=u+i},filter:h,jump:function(t,n){var o=y.getWidth(n);r=e=r+o},handle:function(t,i){var c=y.getWidth(i),l=b.getCell(t,i).borderAttr;r+=c,d.push({sx:e,sy:n,ex:r,ey:o,row:t,col:i,borderAttr:l}),e=r}}),p)for(var v=1;v<d.length;){var g=d[v],w=d[v-1],m=g.borderAttr.top.equal(w.borderAttr.top),O=g.col-w.col==1,T=g.row===w.row;m&&O&&T?(w.ex=g.ex,w.col=g.col,d.splice(v,1)):v+=1}return d}},{key:"computerBottomHorizontalLine",value:function(t){var e,n,r,o,i=t.viewRange,c=void 0===i?null:i,l=t.bx,a=void 0===l?0:l,s=t.by,u=void 0===s?0:s,f=t.filter,h=void 0===f?null:f,p=this.drawOptimization,y=this.cols,b=this.rows,d=this.cells,v=[];if(this.horizontalIterate({viewRange:c,newRow:function(t,i){var c=b.getHeight(t);r=e=a,o=n=u+i+c},filter:h,jump:function(t,n){var o=y.getWidth(n);r=e=r+o},handle:function(t,i){var c=y.getWidth(i),l=d.getCell(t,i).borderAttr;r+=c,v.push({sx:e,sy:n,ex:r,ey:o,row:t,col:i,borderAttr:l}),e=r}}),p)for(var g=1;g<v.length;){var w=v[g],m=v[g-1],O=w.borderAttr.bottom.equal(m.borderAttr.bottom),T=w.col-m.col==1,E=w.row===m.row;O&&T&&E?(m.ex=w.ex,m.col=w.col,v.splice(g,1)):g+=1}return v}},{key:"computerLeftVerticalLine",value:function(t){var e,n,r,o,i=t.viewRange,c=void 0===i?null:i,l=t.bx,a=void 0===l?0:l,s=t.by,u=void 0===s?0:s,f=t.filter,h=void 0===f?null:f,p=this.drawOptimization,y=this.rows,b=this.cells,d=[];if(this.verticalIterate({viewRange:c,newCol:function(t,i){r=e=a+i,o=n=u},filter:h,jump:function(t,e){var r=y.getHeight(e);o=n=o+r},handle:function(t,i){var c=y.getHeight(i),l=b.getCell(i,t).borderAttr;o+=c,d.push({sx:e,sy:n,ex:r,ey:o,row:i,col:t,borderAttr:l}),n=o}}),p)for(var v=1;v<d.length;){var g=d[v],w=d[v-1],m=g.borderAttr.left.equal(w.borderAttr.left),O=g.row-w.row==1,T=g.col===w.col;m&&O&&T?(w.ey=g.ey,w.row=g.row,d.splice(v,1)):v+=1}return d}},{key:"computerRightVerticalLine",value:function(t){var e,n,r,o,i=t.viewRange,c=void 0===i?null:i,l=t.bx,a=void 0===l?0:l,s=t.by,u=void 0===s?0:s,f=t.filter,h=void 0===f?null:f,p=this.drawOptimization,y=this.rows,b=this.cols,d=this.cells,v=[];if(this.verticalIterate({viewRange:c,newCol:function(t,i){var c=b.getWidth(t);r=e=a+i+c,o=n=u},filter:h,jump:function(t,e){var r=y.getHeight(e);o=n=o+r},handle:function(t,i){var c=y.getHeight(i),l=d.getCell(i,t).borderAttr;o+=c,v.push({sx:e,sy:n,ex:r,ey:o,row:i,col:t,borderAttr:l}),n=o}}),p)for(var g=1;g<v.length;){var w=v[g],m=v[g-1],O=w.borderAttr.right.equal(m.borderAttr.right),T=w.row-m.row==1,E=w.col===m.col;O&&T&&E?(m.ey=w.ey,m.row=w.row,v.splice(g,1)):g+=1}return v}},{key:"disableOptimization",value:function(){this.drawOptimization=!1}},{key:"enableOptimization",value:function(){this.drawOptimization=!0}}])&&sv(n.prototype,r),o&&sv(n,o),e}(Kb);function yv(t){return(yv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dv(t,e){return!e||"object"!==yv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vv(t){return(vv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gv(t,e){return(gv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wv=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),dv(this,vv(e).apply(this,arguments))}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gv(t,e)}(e,t),n=e,(r=[{key:"getBottomHorizontalLine",value:function(t){var e=t.viewRange,n=this.horizontalMergeFilter,r=this.bottomBorderDiffFilter;return this.computerBottomHorizontalLine({viewRange:e,filter:new Pd(Cd.AND,[n,r])})}},{key:"getTopHorizontalLine",value:function(t){var e=t.viewRange,n=this.horizontalMergeFilter,r=this.topBorderDiffFilter;return this.computerTopHorizontalLine({viewRange:e,filter:new Pd(Cd.AND,[n,r])})}},{key:"getBottomMergeHorizontalLine",value:function(t){for(var e=t.brink,n=this.bottomBorderDiffFilter,r=[],o=0;o<e.length;o+=1){var i=e[o].bottom;if(i){var c=this.computerBottomHorizontalLine({viewRange:i.view,bx:i.x,by:i.y,filter:n});r=r.concat(c)}}return r}},{key:"getTopMergeHorizontalLine",value:function(t){for(var e=t.brink,n=this.topBorderDiffFilter,r=[],o=0;o<e.length;o+=1){var i=e[o].top;if(i){var c=this.computerTopHorizontalLine({viewRange:i.view,bx:i.x,by:i.y,filter:n});r=r.concat(c)}}return r}}])&&bv(n.prototype,r),o&&bv(n,o),e}(pv);function mv(t){return(mv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ov(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Tv(t,e){return!e||"object"!==mv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ev(t){return(Ev=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Sv(t,e){return(Sv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _v=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Tv(this,Ev(e).apply(this,arguments))}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sv(t,e)}(e,t),n=e,(r=[{key:"getRightVerticalLine",value:function(t){var e=t.viewRange,n=this.verticalMergeFilter,r=this.rightBorderDiffFilter,o=this.rightOutRangeFilter;return this.computerRightVerticalLine({viewRange:e,filter:new Pd(Cd.AND,[n,r,o])})}},{key:"getLeftVerticalLine",value:function(t){var e=t.viewRange,n=this.verticalMergeFilter,r=this.leftBorderDiffFilter,o=this.leftOutRangeFilter;return this.computerLeftVerticalLine({viewRange:e,filter:new Pd(Cd.AND,[n,r,o])})}},{key:"getRightMergeVerticalLine",value:function(t){for(var e=t.brink,n=this.rightBorderDiffFilter,r=[],o=0;o<e.length;o+=1){var i=e[o].right;if(i){var c=this.computerRightVerticalLine({viewRange:i.view,bx:i.x,by:i.y,filter:n});r=r.concat(c)}}return r}},{key:"getLeftMergeVerticalLine",value:function(t){for(var e=t.brink,n=this.leftBorderDiffFilter,r=[],o=0;o<e.length;o+=1){var i=e[o].left;if(i){var c=this.computerLeftVerticalLine({viewRange:i.view,bx:i.x,by:i.y,filter:n});r=r.concat(c)}}return r}}])&&Ov(n.prototype,r),o&&Ov(n,o),e}(pv);function xv(t){return(xv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Cv(t,e){return!e||"object"!==xv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pv(t){return(Pv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Lv(t,e){return(Lv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var jv=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Cv(this,Pv(e).apply(this,arguments))}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lv(t,e)}(e,t),n=e,(r=[{key:"getCellOrNewCellByViewRange",value:function(t){for(var e=t.rectRange,n=void 0===e?new es(-1,-1,-1,-1):e,r=t.callback,o=void 0===r?function(){}:r,i=this.cells,c=n.sri,l=n.eri,a=n.sci,s=n.eci,u=c;u<=l;u+=1)for(var f=a;f<=s;f+=1)o(u,f,i.getCellOrNew(u,f))}}])&&kv(n.prototype,r),o&&kv(n,o),e}(Iy);function Av(t){return(Av="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nv(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var c,l=t[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Rv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Iv(t,e){return!e||"object"!==Av(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vv(t,e,n){return(Vv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Dv(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Dv(t){return(Dv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hv(t,e){return(Hv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Mv=function(t){function e(t){var n,r=t.xTableScrollView,o=t.rows,i=t.cols,c=t.scroll;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Iv(this,Dv(e).call(this,{xTableScrollView:r,rows:o,cols:i,scroll:c}))).lastScrollView=null,n.enterView=null,n.scrollEnterView=null,n.leaveView=null,n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hv(t,e)}(e,t),n=e,(r=[{key:"reset",value:function(){Vv(Dv(e.prototype),"reset",this).call(this),this.scrollEnterView=null,this.enterView=null,this.leaveView=null}},{key:"getLastScrollView",value:function(){return _.isNotUnDef(this.lastScrollView)?this.lastScrollView.clone():null}},{key:"getLeaveView",value:function(){if(_.isNotUnDef(this.leaveView))return this.leaveView.clone();var t=this.getLastScrollView(),e=this.getScrollView(),n=this.cols,r=this.rows;if(t){var o=Nv(t.coincideDifference(e),1)[0];if(o)return o.w=n.rectRangeSumWidth(o),o.h=r.rectRangeSumHeight(o),this.leaveView=o,o.clone()}return null}},{key:"getEnterView",value:function(){if(_.isNotUnDef(this.enterView))return this.enterView.clone();var t=this.getLastScrollView(),e=this.getScrollView(),n=this.cols,r=this.rows;if(t){var o=Nv(e.coincideDifference(t),1)[0];if(o)return o.w=n.rectRangeSumWidth(o),o.h=r.rectRangeSumHeight(o),this.enterView=o,o.clone()}return null}},{key:"getScrollEnterView",value:function(){if(_.isNotUnDef(this.scrollEnterView))return this.scrollEnterView.clone();var t=this.cols,e=this.rows,n=this.scroll,r=this.getEnterView();if(r){switch(n.type){case Hh.H_RIGHT:r.sci-=1;break;case Hh.V_BOTTOM:r.sri-=1;break;case Hh.H_LEFT:r.eci+=1;break;case Hh.V_TOP:r.eri+=1}return r.w=t.rectRangeSumWidth(r),r.h=e.rectRangeSumHeight(r),this.scrollEnterView=r,r.clone()}return null}},{key:"undo",value:function(){this.lastScrollView=null}},{key:"record",value:function(){this.lastScrollView=this.scrollView}}])&&Rv(n.prototype,r),o&&Rv(n,o),e}(kp);function Wv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Bv(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Wv(Object(n),!0).forEach((function(e){Yv(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Yv(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gv(t,e,n){return(Gv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Xv(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Uv(t){return(Uv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zv(t,e){return!e||"object"!==Uv(e)&&"function"!=typeof e?Fv(t):e}function Fv(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xv(t){return(Xv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zv(t,e)}function Zv(t,e){return(Zv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jv(t,e,n){return e&&Kv(t.prototype,e),n&&Kv(t,n),t}var Qv={SCROLL:Symbol("scroll"),RENDER:Symbol("render"),SCALE:Symbol("scale")},tg=function(){function t(e){qv(this,t),this.table=e,this.width=null,this.height=null,this.x=null,this.y=null,this.drawX=null,this.drawY=null,this.mapOriginX=null,this.mapOriginY=null,this.mapTargetX=null,this.mapTargetY=null,this.mapWidth=null,this.mapHeight=null,this.fullScrollView=null,this.scrollView=null,this.borderView=null,this.borderX=null,this.borderY=null,this.viewMode=null}return Jv(t,[{key:"reset",value:function(){this.width=null,this.height=null,this.x=null,this.y=null,this.drawX=null,this.drawY=null,this.mapOriginX=null,this.mapOriginY=null,this.mapTargetX=null,this.mapTargetY=null,this.mapWidth=null,this.mapHeight=null,this.fullScrollView=null,this.scrollView=null,this.borderView=null,this.borderX=null,this.borderY=null,this.viewMode=null}},{key:"getWidth",value:function(){throw new TypeError("getWidth child impl")}},{key:"getHeight",value:function(){throw new TypeError("getHeight child impl")}},{key:"getX",value:function(){throw new TypeError("getX child impl")}},{key:"getY",value:function(){throw new TypeError("getY child impl")}},{key:"getDrawX",value:function(){if(_.isNumber(this.drawX))return this.drawX;var t=this.table,e=this.getX();if(t.getRenderMode()===Qv.RENDER)return this.drawX=e,e;if(t.getRenderMode()===Qv.SCALE)return this.drawX=e,e;if(this.getViewMode()===Sp.BOUND_OUT)return this.drawX=e,e;if(this.getViewMode()===Sp.CHANGE_NOT)return this.drawX=e,e;var n=t.scroll,r=this.getScrollView(),o=this.getFullScrollView(),i=0;switch(n.type){case Hh.H_RIGHT:i=o.w-r.w;break;case Hh.H_LEFT:i=0}return i=e+i,this.drawX=i,i}},{key:"getDrawY",value:function(){if(_.isNumber(this.drawY))return this.drawY;var t=this.table,e=this.getY();if(t.getRenderMode()===Qv.RENDER)return this.drawY=e,e;if(t.getRenderMode()===Qv.SCALE)return this.drawY=e,e;if(this.getViewMode()===Sp.BOUND_OUT)return this.drawY=e,e;if(this.getViewMode()===Sp.CHANGE_NOT)return this.drawY=e,e;var n=t.scroll,r=this.getScrollView(),o=this.getFullScrollView(),i=0;switch(n.type){case Hh.V_BOTTOM:i=o.h-r.h;break;case Hh.V_TOP:i=0}return i=e+i,this.drawY=i,i}},{key:"getLineX",value:function(){if(_.isNumber(this.borderX))return this.borderX;var t=this.table,e=this.getX();if(t.getRenderMode()===Qv.RENDER)return this.borderX=e,e;if(t.getRenderMode()===Qv.SCALE)return this.borderX=e,e;if(this.getViewMode()===Sp.BOUND_OUT)return this.borderX=e,e;if(this.getViewMode()===Sp.CHANGE_NOT)return this.borderX=e,e;var n=0;switch(t.scroll.type){case Hh.H_RIGHT:var r=this.getLineView();n=this.getFullScrollView().w-r.w;break;case Hh.H_LEFT:n=0}return n=e+n,this.borderX=n,n}},{key:"getLineY",value:function(){if(_.isNumber(this.borderY))return this.borderY;var t=this.table,e=this.getY();if(t.getRenderMode()===Qv.RENDER)return this.borderY=e,e;if(t.getRenderMode()===Qv.SCALE)return this.borderY=e,e;if(this.getViewMode()===Sp.BOUND_OUT)return this.borderY=e,e;if(this.getViewMode()===Sp.CHANGE_NOT)return this.borderY=e,e;var n=0;switch(t.scroll.type){case Hh.V_BOTTOM:var r=this.getLineView();n=this.getFullScrollView().h-r.h;break;case Hh.V_TOP:n=0}return n=e+n,this.borderY=n,n}},{key:"getMapOriginX",value:function(){if(_.isNumber(this.mapOriginX))return this.mapOriginX;var t=this.table,e=t.xTableAreaView,n=t.scroll,r=this.getX(),o=0;switch(n.type){case Hh.H_LEFT:o=0;break;case Hh.H_RIGHT:o=e.getLeaveView().w}return o=r+o,this.mapOriginX=o,o}},{key:"getMapOriginY",value:function(){if(_.isNumber(this.mapOriginY))return this.mapOriginY;var t=this.table,e=t.xTableAreaView,n=t.scroll,r=this.getY(),o=0;switch(n.type){case Hh.V_TOP:o=0;break;case Hh.V_BOTTOM:o=e.getLeaveView().h}return o=r+o,this.mapOriginY=o,o}},{key:"getMapTargetX",value:function(){if(_.isNumber(this.mapTargetX))return this.mapTargetX;var t=this.table,e=t.xTableAreaView,n=t.scroll,r=this.getX(),o=0;switch(n.type){case Hh.H_LEFT:o=e.getEnterView().w;break;case Hh.H_RIGHT:o=0}return o=r+o,this.mapTargetX=o,o}},{key:"getMapTargetY",value:function(){if(_.isNumber(this.mapTargetY))return this.mapTargetY;var t=this.table,e=t.xTableAreaView,n=t.scroll,r=this.getY(),o=0;switch(n.type){case Hh.V_TOP:o=e.getEnterView().h;break;case Hh.V_BOTTOM:o=0}return o=r+o,this.mapTargetY=o,o}},{key:"getMapWidth",value:function(){if(_.isNumber(this.mapWidth))return this.mapWidth;var t=this.table,e=t.xTableAreaView,n=t.scroll,r=this.getWidth();switch(n.type){case Hh.H_RIGHT:r-=e.getLeaveView().w;break;case Hh.H_LEFT:r-=e.getEnterView().w}return this.mapWidth=r,r}},{key:"getMapHeight",value:function(){if(_.isNumber(this.mapHeight))return this.mapHeight;var t=this.table,e=t.xTableAreaView,n=t.scroll,r=this.getHeight();switch(n.type){case Hh.V_BOTTOM:r-=e.getLeaveView().h;break;case Hh.V_TOP:r-=e.getEnterView().h}return this.mapHeight=r,r}},{key:"getScrollView",value:function(){throw new TypeError("getScrollView child impl")}},{key:"getFullScrollView",value:function(){throw new TypeError("getFullScrollView child impl")}},{key:"getLineView",value:function(){if(_.isNotUnDef(this.borderView))return this.borderView.clone();var t=this.table,e=t.cols,n=t.rows,r=t.getRenderMode(),o=this.getViewMode(),i=this.getScrollView();if(o===Sp.CHANGE_ADD&&r===Qv.SCROLL)switch(t.scroll.type){case Hh.V_TOP:i.eri+=1,i.h=n.rectRangeSumHeight(i);break;case Hh.V_BOTTOM:i.sri-=1,i.h=n.rectRangeSumHeight(i);break;case Hh.H_RIGHT:i.sci-=1,i.w=e.rectRangeSumWidth(i);break;case Hh.H_LEFT:i.eci+=1,i.w=e.rectRangeSumWidth(i)}return this.borderView=i,i.clone()}},{key:"getViewMode",value:function(){throw new TypeError("getViewMode child impl")}},{key:"drawMap",value:function(){var t=this.table,e=t.getRenderMode();if(this.getViewMode()===Sp.CHANGE_ADD&&e===Qv.SCROLL){var n=t.draw,r=t.el,o=this.getMapWidth(),i=this.getMapHeight(),c=this.getMapOriginX(),l=this.getMapOriginY(),a=this.getMapTargetX(),s=this.getMapTargetY();n.drawImage(r,c,l,o,i,a,s,o,i)}}},{key:"drawClear",value:function(){var t=this.table,e=t.scroll,n=t.draw,r=t.settings,o=this.getViewMode(),i=t.getRenderMode(),c=this.getDrawX(),l=this.getDrawY();if(n.attr({fillStyle:r.table.background}),i===Qv.SCROLL)switch(o){case Sp.CHANGE_NOT:case Sp.STATIC:case Sp.BOUND_OUT:var a=this.getHeight(),s=this.getWidth();n.fillRect(c,l,s,a);break;case Sp.CHANGE_ADD:switch(e.type){case Hh.V_BOTTOM:var u=this.getFullScrollView(),f=this.getScrollView(),h=t.visualHeight()-(u.h-f.h),p=this.getWidth();n.fillRect(c,l,p,h);break;case Hh.V_TOP:var y=this.getScrollView().h,b=this.getWidth();n.fillRect(c,l,b,y);break;case Hh.H_LEFT:var d=this.getScrollView(),v=this.getHeight(),g=d.w;n.fillRect(c,l,g,v);break;case Hh.H_RIGHT:var w=this.getFullScrollView(),m=this.getScrollView(),O=this.getHeight(),T=t.visualWidth()-(w.w-m.w);n.fillRect(c,l,T,O)}}else if(Qv.RENDER){var E=this.getHeight(),S=this.getWidth();n.fillRect(c,l,S,E)}}}]),t}(),eg=function(t){function e(){return qv(this,e),zv(this,Xv(e).apply(this,arguments))}return $v(e,t),Jv(e,[{key:"drawBoundOutFont",value:function(){var t=this.getScrollView(),e=this.table,n=e.draw,r=e.cols,o=e.textCellsHelper,i=e.cells,c=e.textFont,l=e.merges,a=this.getDrawX(),s=this.getDrawY();n.offset(a,s);var u,f=t.clone();(f.sci=0,f.eci=t.sci-1,f.eci>-1)&&o.getCellByViewRange({reverseCols:!0,rectRange:f,newCol:function(t){u+=r.getWidth(t)},newRow:function(){u=0},callback:function(t,e,r,o,a){if(l.getFirstIncludes(t,e))return $y;var s=r.text;if(_.isBlank(s))return Xy;var f=r.fontAttr,h=f.align,p=f.textWrap;if((h===Zc.ALIGN.left||h===Zc.ALIGN.center)&&p===Zc.TEXT_WRAP.OVER_FLOW){var y=i.getCellBoundOutSize(t,e);if(0===y||y>u){var b=r.format,d=r.text,v=r.fontAttr,g=c.getBuilder();g.setDraw(n),g.setText(zp(b,d)),g.setAttr(v),g.setRect(o),g.setOverFlow(a);var w=g.build();r.setContentWidth(w.draw())}}return $y}});var h,p=t.clone();(p.sci=t.eci+1,p.eci=r.len-1,p.sci<r.len)&&o.getCellSkipMergeCellByViewRange({rectRange:p,startX:t.w,newCol:function(t){h+=r.getWidth(t)},newRow:function(){h=0},callback:function(t,e,r,o,a){if(l.getFirstIncludes(t,e))return $y;var s=r.text;if(_.isBlank(s))return Xy;var u=r.fontAttr,f=u.align,p=u.textWrap;if((f===Zc.ALIGN.right||f===Zc.ALIGN.center)&&p===Zc.TEXT_WRAP.OVER_FLOW){var y=i.getCellBoundOutSize(t,e);if(0===y||y>h){var b=r.format,d=r.text,v=r.fontAttr,g=c.getBuilder();g.setDraw(n),g.setText(zp(b,d)),g.setAttr(v),g.setRect(o),g.setOverFlow(a);var w=g.build();r.setContentWidth(w.draw())}}return $y}});n.offset(0,0)}},{key:"drawFont",value:function(){var t=this.getScrollView(),e=this.getDrawX(),n=this.getDrawY(),r=this.table,o=r.draw,i=r.textCellsHelper,c=r.textFont;o.offset(e,n),i.getCellSkipMergeCellByViewRange({rectRange:t,callback:function(t,e,n,r,i){var l=n.format,a=n.text,s=n.fontAttr,u=c.getBuilder();u.setDraw(o),u.setText(zp(l,a)),u.setAttr(s),u.setRect(r),u.setOverFlow(i);var f=u.build();n.setContentWidth(f.draw())}}),i.getMergeCellByViewRange({rectRange:t,callback:function(t,e){var n=e.format,r=e.text,i=e.fontAttr,l=c.getBuilder();l.setDraw(o),l.setText(zp(n,r)),l.setAttr(i),l.setRect(t);var a=l.build();e.setContentWidth(a.draw())}}),o.offset(0,0)}},{key:"drawGrid",value:function(){var t=this.getLineView(),e=this.getLineX(),n=this.getLineY(),r=this.table,o=r.draw,i=r.grid,c=r.cellHorizontalGrid,l=r.cellVerticalGrid;o.offset(e,n);var a=c.getMergeCoincideRange({viewRange:t}),s=c.getCoincideRangeBrink({coincide:a}),u=c.getHorizontalLine({viewRange:t}),f=l.getVerticalLine({viewRange:t});u.forEach((function(t){i.horizonLine(t.sx,t.sy,t.ex,t.ey)})),f.forEach((function(t){i.verticalLine(t.sx,t.sy,t.ex,t.ey)}));var h=c.getMergeHorizontalLine({brink:s}),p=l.getMergeVerticalLine({brink:s});h.forEach((function(t){i.horizonLine(t.sx,t.sy,t.ex,t.ey)})),p.forEach((function(t){i.verticalLine(t.sx,t.sy,t.ex,t.ey)})),o.offset(0,0)}},{key:"drawBorder",value:function(){var t=this.getLineView(),e=this.getLineX(),n=this.getLineY(),r=this.table,o=r.draw,i=r.line,c=r.cellHorizontalBorder,l=r.cellVerticalBorder;o.offset(e,n);var a=c.getMergeCoincideRange({viewRange:t}),s=c.getCoincideRangeBrink({coincide:a}),u=c.getBottomHorizontalLine({viewRange:t}),f=c.getTopHorizontalLine({viewRange:t}),h=l.getLeftVerticalLine({viewRange:t}),p=l.getRightVerticalLine({viewRange:t});f.forEach((function(t){var e=t.borderAttr,n=t.row,r=t.col,o=e.top,c=o.color,l=o.widthType,a=o.type;i.setType(a),i.setWidthType(l),i.setColor(c),i.horizonLine(t.sx,t.sy,t.ex,t.ey,n,r,"top")})),u.forEach((function(t){var e=t.borderAttr,n=t.row,r=t.col,o=e.bottom,c=o.color,l=o.widthType,a=o.type;i.setType(a),i.setWidthType(l),i.setColor(c),i.horizonLine(t.sx,t.sy,t.ex,t.ey,n,r,"bottom")})),h.forEach((function(t){var e=t.borderAttr,n=t.row,r=t.col,o=e.left,c=o.color,l=o.widthType,a=o.type;i.setType(a),i.setWidthType(l),i.setColor(c),i.verticalLine(t.sx,t.sy,t.ex,t.ey,n,r,"left")})),p.forEach((function(t){var e=t.borderAttr,n=t.row,r=t.col,o=e.right,c=o.color,l=o.widthType,a=o.type;i.setType(a),i.setWidthType(l),i.setColor(c),i.verticalLine(t.sx,t.sy,t.ex,t.ey,n,r,"right")}));var y=c.getTopMergeHorizontalLine({brink:s}),b=c.getBottomMergeHorizontalLine({brink:s}),d=l.getLeftMergeVerticalLine({brink:s}),v=l.getRightMergeVerticalLine({brink:s});y.forEach((function(t){var e=t.borderAttr,n=t.row,r=t.col,o=e.top,c=o.color,l=o.widthType,a=o.type;i.setType(a),i.setWidthType(l),i.setColor(c),i.horizonLine(t.sx,t.sy,t.ex,t.ey,n,r,"top")})),b.forEach((function(t){var e=t.borderAttr,n=t.row,r=t.col,o=e.bottom,c=o.color,l=o.widthType,a=o.type;i.setType(a),i.setWidthType(l),i.setColor(c),i.horizonLine(t.sx,t.sy,t.ex,t.ey,n,r,"bottom")})),d.forEach((function(t){var e=t.borderAttr,n=t.row,r=t.col,o=e.left,c=o.color,l=o.widthType,a=o.type;i.setType(a),i.setWidthType(l),i.setColor(c),i.verticalLine(t.sx,t.sy,t.ex,t.ey,n,r,"left")})),v.forEach((function(t){var e=t.borderAttr,n=t.row,r=t.col,o=e.right,c=o.color,l=o.widthType,a=o.type;i.setType(a),i.setWidthType(l),i.setColor(c),i.verticalLine(t.sx,t.sy,t.ex,t.ey,n,r,"right")})),o.offset(0,0)}},{key:"drawColor",value:function(){var t=this.getScrollView(),e=this.table,n=this.getDrawX(),r=this.getDrawY(),o=e.draw,i=e.styleCellsHelper,c=e.merges;o.offset(n,r),i.getMergeCellByViewRange({rectRange:t,callback:function(t,e){var n=e.background;new Xp({draw:o,rect:t}).drawBackgroundColor(n)}}),i.getCellByViewRange({rectRange:t,callback:function(t,e,n,r){var i=c.getFirstIncludes(t,e);if(!i||i.sri===t&&i.sci===t){var l=n.background;new Xp({draw:o,rect:r}).drawBackgroundColor(l)}}}),o.offset(0,0)}},{key:"render",value:function(){var t=this.table,e=t.getRenderMode();if(this.getViewMode()!==Sp.STATIC||e!==Qv.SCROLL){this.drawMap(),this.drawClear();var n=this.getScrollView(),r=this.getDrawX(),o=this.getDrawY(),i=n.w,c=n.h,l=t.draw,a=new Dp({rect:new Mp({x:r,y:o,width:i,height:c}),draw:l});a.open(),this.drawColor(),this.drawFont(),this.drawBoundOutFont(),this.table.settings.table.showGrid&&this.drawGrid(),this.drawBorder(),a.close()}}}]),e}(tg),ng=function(t){function e(){return qv(this,e),zv(this,Xv(e).apply(this,arguments))}return $v(e,t),Jv(e,[{key:"drawFont",value:function(){throw new TypeError("drawFont child impl")}},{key:"drawColor",value:function(){throw new TypeError("drawColor child impl")}},{key:"drawGrid",value:function(){throw new TypeError("drawGrid child impl")}},{key:"render",value:function(){var t=this.table.getRenderMode();this.getViewMode()===Sp.STATIC&&t===Qv.SCROLL||(this.drawMap(),this.drawClear(),this.drawColor(),this.drawGrid(),this.drawFont())}}]),e}(tg),rg=function(t){function e(){return qv(this,e),zv(this,Xv(e).apply(this,arguments))}return $v(e,t),Jv(e,[{key:"drawFont",value:function(){var t=this.getDrawX(),e=this.getDrawY(),n=this.getScrollView(),r=this.getWidth(),o=this.table,i=o.draw,c=o.rows,l=o.index,a=n.sri,s=n.eri;i.offset(t,e),i.attr({textAlign:"center",textBaseline:"middle",font:"".concat(l.getSize(),"px Arial"),fillStyle:l.getColor()}),c.eachHeight(a,s,(function(t,e,n){i.fillText(t+1,r/2,n+e/2)})),i.offset(0,0)}},{key:"drawGrid",value:function(){var t=this.getLineView(),e=this.getLineX(),n=this.getLineY(),r=this.table,o=r.draw,i=r.indexGrid,c=r.leftIndexHorizontalGrid,l=r.leftIndexVerticalGrid;o.offset(e,n);var a=c.getHorizontalLine({viewRange:t}),s=l.getVerticalLine({viewRange:t});a.forEach((function(t){i.horizonLine(t.sx,t.sy,t.ex,t.ey)})),s.forEach((function(t){i.verticalLine(t.sx,t.sy,t.ex,t.ey)})),o.offset(0,0)}},{key:"drawColor",value:function(){var t=this.getDrawX(),e=this.getDrawY(),n=this.getScrollView().h,r=this.getWidth(),o=this.table,i=o.draw,c=o.index;i.offset(t,e),i.attr({fillStyle:c.getBackground()}),i.fillRect(0,0,r,n),i.offset(0,0)}}]),e}(ng),og=function(t){function e(){return qv(this,e),zv(this,Xv(e).apply(this,arguments))}return $v(e,t),Jv(e,[{key:"drawFont",value:function(){var t=this.getDrawX(),e=this.getDrawY(),n=this.getScrollView(),r=this.getHeight(),o=this.table,i=o.draw,c=o.cols,l=o.index,a=n.sci,s=n.eci;i.offset(t,e),i.attr({textAlign:"center",textBaseline:"middle",font:"".concat(l.getSize(),"px Arial"),fillStyle:l.getColor()}),c.eachWidth(a,s,(function(t,e,n){i.fillText(_.stringAt(t),n+e/2,r/2)})),i.offset(0,0)}},{key:"drawGrid",value:function(){var t=this.getLineView(),e=this.getLineX(),n=this.getLineY(),r=this.table,o=r.draw,i=r.indexGrid,c=r.topIndexVerticalGrid,l=r.topIndexHorizontalGrid;o.offset(e,n);var a=l.getHorizontalLine({viewRange:t}),s=c.getVerticalLine({viewRange:t});a.forEach((function(t){i.horizonLine(t.sx,t.sy,t.ex,t.ey)})),s.forEach((function(t){i.verticalLine(t.sx,t.sy,t.ex,t.ey)})),o.offset(0,0)}},{key:"drawColor",value:function(){var t=this.table,e=t.draw,n=t.index,r=this.getScrollView(),o=this.getDrawX(),i=this.getDrawY(),c=this.getHeight(),l=r.w;e.offset(o,i),e.attr({fillStyle:n.getBackground()}),e.fillRect(0,0,l,c),e.offset(0,0)}}]),e}(ng),ig=function(t){function e(){return qv(this,e),zv(this,Xv(e).apply(this,arguments))}return $v(e,t),Jv(e,[{key:"getWidth",value:function(){if(_.isNumber(this.width))return this.width;var t=this.table.index.getWidth();return this.width=t,t}},{key:"getHeight",value:function(){if(_.isNumber(this.height))return this.height;var t=this.table,e=t.fixed,n=t.rows.sectionSumHeight(0,e.fxTop);return this.height=n,n}},{key:"getX",value:function(){if(_.isNumber(this.x))return this.x;return this.x=0,0}},{key:"getY",value:function(){if(_.isNumber(this.y))return this.y;var t=this.table.index.getHeight();return this.y=t,t}},{key:"getScrollView",value:function(){if(_.isNotUnDef(this.scrollView))return this.scrollView.clone();var t=this.table,e=t.rows,n=t.cols,r=t.fixed,o=new es(0,0,r.fxTop,0);return o.w=n.rectRangeSumWidth(o),o.h=e.rectRangeSumHeight(o),this.scrollView=o,o.clone()}},{key:"getFullScrollView",value:function(){if(_.isNotUnDef(this.fullScrollView))return this.fullScrollView.clone();var t=this.getScrollView();return this.fullScrollView=t,t.clone()}},{key:"getViewMode",value:function(){return this.viewMode=Sp.STATIC,Sp.STATIC}},{key:"render",value:function(){var t=this.table.getRenderMode();t!==Qv.RENDER&&t!==Qv.SCALE||Gv(Xv(e.prototype),"render",this).call(this)}}]),e}(rg),cg=function(t){function e(){return qv(this,e),zv(this,Xv(e).apply(this,arguments))}return $v(e,t),Jv(e,[{key:"getWidth",value:function(){if(_.isNumber(this.width))return this.width;var t=this.table,e=t.fixed,n=t.rows.sectionSumHeight(0,e.fxLeft);return this.width=n,n}},{key:"getHeight",value:function(){if(_.isNumber(this.height))return this.height;var t=this.table,e=t.fixed,n=t.rows.sectionSumHeight(0,e.fxTop);return this.height=n,n}},{key:"getX",value:function(){if(_.isNumber(this.x))return this.x;var t=this.table.index.getWidth();return this.x=t,t}},{key:"getY",value:function(){if(_.isNumber(this.y))return this.y;var t=this.table.index.getHeight();return this.y=t,t}},{key:"getScrollView",value:function(){if(_.isNotUnDef(this.scrollView))return this.scrollView.clone();var t=this.table,e=t.rows,n=t.cols,r=t.fixed,o=new es(0,0,r.fxTop,r.fxLeft);return o.w=n.rectRangeSumWidth(o),o.h=e.rectRangeSumHeight(o),this.scrollView=o,o.clone()}},{key:"getFullScrollView",value:function(){if(_.isNotUnDef(this.fullScrollView))return this.fullScrollView.clone();var t=this.getScrollView();return this.fullScrollView=t,t.clone()}},{key:"getViewMode",value:function(){return this.viewMode=Sp.STATIC,Sp.STATIC}},{key:"render",value:function(){var t=this.table.getRenderMode();t!==Qv.RENDER&&t!==Qv.SCALE||Gv(Xv(e.prototype),"render",this).call(this)}}]),e}(eg),lg=function(t){function e(){return qv(this,e),zv(this,Xv(e).apply(this,arguments))}return $v(e,t),Jv(e,[{key:"getWidth",value:function(){if(_.isNumber(this.width))return this.width;var t=this.table,e=t.fixed,n=t.rows.sectionSumHeight(0,e.fxLeft);return this.width=n,n}},{key:"getHeight",value:function(){if(_.isNumber(this.height))return this.height;var t=this.table.index.getHeight();return this.height=t,t}},{key:"getX",value:function(){if(_.isNumber(this.x))return this.x;var t=this.table.index.getWidth();return this.x=t,t}},{key:"getY",value:function(){if(_.isNumber(this.y))return this.y;return this.y=0,0}},{key:"getScrollView",value:function(){if(_.isNotUnDef(this.scrollView))return this.scrollView.clone();var t=this.table,e=t.rows,n=t.cols,r=t.fixed,o=new es(0,0,0,r.fxLeft);return o.w=n.rectRangeSumWidth(o),o.h=e.rectRangeSumHeight(o),this.scrollView=o,o.clone()}},{key:"getFullScrollView",value:function(){if(_.isNotUnDef(this.fullScrollView))return this.fullScrollView.clone();var t=this.getScrollView();return this.fullScrollView=t,t.clone()}},{key:"getViewMode",value:function(){return this.viewMode=Sp.STATIC,Sp.STATIC}},{key:"render",value:function(){var t=this.table.getRenderMode();t!==Qv.RENDER&&t!==Qv.SCALE||Gv(Xv(e.prototype),"render",this).call(this)}}]),e}(og),ag=function(){function t(e){qv(this,t),this.table=e}return Jv(t,[{key:"draw",value:function(){var t=this.table,e=t.draw,n=t.indexGrid,r=t.index,o=r.getHeight(),i=r.getWidth();e.save(),e.offset(0,0),e.attr({fillStyle:"#f4f5f8"}),e.fillRect(0,0,r.getWidth(),o),e.offset(0,0),n.horizonLine(0,o,i,o),n.verticalLine(i,0,i,o),e.restore()}},{key:"render",value:function(){var t=this.table.getRenderMode();t!==Qv.RENDER&&t!==Qv.SCALE||this.draw()}}]),t}(),sg=function(t){function e(){return qv(this,e),zv(this,Xv(e).apply(this,arguments))}return $v(e,t),Jv(e,[{key:"getWidth",value:function(){if(_.isNumber(this.width))return this.width;var t=this.table.index.getWidth();return this.width=t,t}},{key:"getHeight",value:function(){if(_.isNumber(this.height))return this.height;var t=this.table,e=t.xTop,n=t.index,r=t.visualHeight()-(n.getHeight()+e.getHeight());return this.height=r,r}},{key:"getX",value:function(){if(_.isNumber(this.x))return this.x;return this.x=0,0}},{key:"getY",value:function(){if(_.isNumber(this.y))return this.y;var t=this.table,e=t.xTop,n=t.index.getHeight()+e.getHeight();return this.y=n,n}},{key:"getScrollView",value:function(){if(_.isNotUnDef(this.scrollView))return this.scrollView.clone();var t,e=this.table,n=e.xTableAreaView,r=e.index,o=e.getRenderMode(),i=n.getScrollView(),c=n.getScrollEnterView();return(t=_.isNotUnDef(c)&&o===Qv.SCROLL?c:i).sci=0,t.eci=0,t.w=r.getWidth(),this.scrollView=t,t.clone()}},{key:"getFullScrollView",value:function(){if(_.isNotUnDef(this.fullScrollView))return this.fullScrollView.clone();var t=this.table,e=t.index,n=t.xTableAreaView.getScrollView();return n.sci=0,n.eci=0,n.w=e.getWidth(),this.fullScrollView=n,n.clone()}},{key:"getViewMode",value:function(){if(_.isNotUnDef(this.viewMode))return this.viewMode;var t=this.table,e=t.xTableAreaView,n=t.cols,r=e.getLastScrollView(),o=e.getScrollView();_.isNotUnDef(r)&&(r.sci=0,r.eci=0,r.w=n.sectionSumWidth(r.sci,r.eci)),o.sci=0,o.eci=0,o.w=n.sectionSumWidth(o.sci,o.eci);var i=_p.viewMode(r,o);return this.viewMode=i,i}}]),e}(rg),ug=function(t){function e(){return qv(this,e),zv(this,Xv(e).apply(this,arguments))}return $v(e,t),Jv(e,[{key:"getWidth",value:function(){if(_.isNumber(this.width))return this.width;var t=this.table,e=t.cols,n=t.fixed,r=e.sectionSumWidth(0,n.fxLeft);return this.width=r,r}},{key:"getHeight",value:function(){if(_.isNumber(this.height))return this.height;var t=this.table,e=t.xTop,n=t.index,r=t.visualHeight()-(n.getHeight()+e.getHeight());return this.height=r,r}},{key:"getX",value:function(){if(_.isNumber(this.x))return this.x;var t=this.table.index.getWidth();return this.x=t,t}},{key:"getY",value:function(){if(_.isNumber(this.y))return this.y;var t=this.table,e=t.xTop,n=t.index.getHeight()+e.getHeight();return this.y=n,n}},{key:"getScrollView",value:function(){if(_.isNotUnDef(this.scrollView))return this.scrollView.clone();var t,e=this.table,n=e.fixed,r=e.cols,o=e.xTableAreaView,i=e.getRenderMode(),c=o.getScrollView(),l=o.getScrollEnterView();return(t=_.isNotUnDef(l)&&i===Qv.SCROLL?l:c).sci=0,t.eci=n.fxLeft,t.w=r.sectionSumWidth(t.sci,t.eci),this.scrollView=t,t.clone()}},{key:"getFullScrollView",value:function(){if(_.isNotUnDef(this.fullScrollView))return this.fullScrollView.clone();var t=this.table,e=t.fixed,n=t.cols,r=t.xTableAreaView.getScrollView();return r.sci=0,r.eci=e.fxLeft,r.w=n.sectionSumWidth(r.sci,r.eci),this.fullScrollView=r,r.clone()}},{key:"getViewMode",value:function(){if(_.isNotUnDef(this.viewMode))return this.viewMode;var t=this.table,e=t.xTableAreaView,n=t.cols,r=t.fixed,o=e.getLastScrollView(),i=e.getScrollView();_.isNotUnDef(o)&&(o.sci=0,o.eci=r.fxLeft,o.w=n.sectionSumWidth(o.sci,o.eci)),i.sci=0,i.eci=r.fxLeft,i.w=n.sectionSumWidth(i.sci,i.eci);var c=_p.viewMode(o,i);return this.viewMode=c,c}}]),e}(eg),fg=function(t){function e(){return qv(this,e),zv(this,Xv(e).apply(this,arguments))}return $v(e,t),Jv(e,[{key:"getWidth",value:function(){if(_.isNumber(this.width))return this.width;var t=this.table,e=t.index,n=t.xLeft,r=t.visualWidth()-(e.getWidth()+n.getWidth());return this.width=r,r}},{key:"getHeight",value:function(){if(_.isNumber(this.height))return this.height;var t=this.table,e=t.xTop,n=t.index,r=t.visualHeight()-(n.getHeight()+e.getHeight());return this.height=r,r}},{key:"getX",value:function(){if(_.isNumber(this.x))return this.x;var t=this.table,e=t.xLeft,n=t.index.getWidth()+e.getWidth();return this.x=n,n}},{key:"getY",value:function(){if(_.isNumber(this.y))return this.y;var t=this.table,e=t.xTop,n=t.index.getHeight()+e.getHeight();return this.y=n,n}},{key:"getScrollView",value:function(){if(_.isNotUnDef(this.scrollView))return this.scrollView.clone();var t,e=this.table,n=e.xTableAreaView,r=e.getRenderMode(),o=n.getScrollView(),i=n.getScrollEnterView();return t=_.isNotUnDef(i)&&r===Qv.SCROLL?i:o,this.scrollView=t,t.clone()}},{key:"getFullScrollView",value:function(){if(_.isNotUnDef(this.fullScrollView))return this.fullScrollView.clone();var t=this.table.xTableAreaView.getScrollView();return this.fullScrollView=t,t.clone()}},{key:"getViewMode",value:function(){if(_.isNotUnDef(this.viewMode))return this.viewMode;var t=this.table.xTableAreaView,e=t.getLastScrollView(),n=t.getScrollView(),r=_p.viewMode(e,n);return this.viewMode=r,r}}]),e}(eg),hg=function(t){function e(){return qv(this,e),zv(this,Xv(e).apply(this,arguments))}return $v(e,t),Jv(e,[{key:"getWidth",value:function(){if(_.isNumber(this.width))return this.width;var t=this.table,e=t.xLeft,n=t.index,r=t.visualWidth()-(n.getWidth()+e.getWidth());return this.width=r,r}},{key:"getHeight",value:function(){if(_.isNumber(this.height))return this.height;var t=this.table,e=t.fixed,n=t.rows.sectionSumHeight(0,e.fxTop);return this.height=n,n}},{key:"getX",value:function(){if(_.isNumber(this.x))return this.x;var t=this.table,e=t.xLeft,n=t.index.getWidth()+e.getWidth();return this.x=n,n}},{key:"getY",value:function(){if(_.isNumber(this.y))return this.y;var t=this.table.index.getHeight();return this.y=t,t}},{key:"getScrollView",value:function(){if(_.isNotUnDef(this.scrollView))return this.scrollView.clone();var t,e=this.table,n=e.fixed,r=e.rows,o=e.xTableAreaView,i=e.getRenderMode(),c=o.getScrollView(),l=o.getScrollEnterView();return(t=_.isNotUnDef(l)&&i===Qv.SCROLL?l:c).sri=0,t.eri=n.fxTop,t.h=r.sectionSumHeight(t.sci,t.eci),this.scrollView=t,t.clone()}},{key:"getFullScrollView",value:function(){if(_.isNotUnDef(this.fullScrollView))return this.fullScrollView.clone();var t=this.table,e=t.fixed,n=t.rows,r=t.xTableAreaView.getScrollView();return r.sri=0,r.eri=e.fxTop,r.h=n.sectionSumHeight(r.sci,r.eci),this.scrollView=r,r.clone()}},{key:"getViewMode",value:function(){if(_.isNotUnDef(this.viewMode))return this.viewMode;var t=this.table,e=t.xTableAreaView,n=t.rows,r=t.fixed,o=e.getLastScrollView(),i=e.getScrollView();_.isNotUnDef(o)&&(o.sri=0,o.eri=r.fxTop,o.h=n.sectionSumHeight(o.sci,o.eci)),i.sri=0,i.eri=r.fxTop,i.h=n.sectionSumHeight(i.sci,i.eci);var c=_p.viewMode(o,i);return this.viewMode=c,c}}]),e}(eg),pg=function(t){function e(){return qv(this,e),zv(this,Xv(e).apply(this,arguments))}return $v(e,t),Jv(e,[{key:"getWidth",value:function(){if(_.isNumber(this.width))return this.width;var t=this.table,e=t.xLeft,n=t.index,r=t.visualWidth()-(n.getWidth()+e.getWidth());return this.width=r,r}},{key:"getHeight",value:function(){if(_.isNumber(this.height))return this.height;var t=this.table.index.getHeight();return this.height=t,t}},{key:"getX",value:function(){if(_.isNumber(this.x))return this.x;var t=this.table,e=t.xLeft,n=t.index.getWidth()+e.getWidth();return this.x=n,n}},{key:"getY",value:function(){if(_.isNumber(this.y))return this.y;return this.y=0,0}},{key:"getScrollView",value:function(){if(_.isNotUnDef(this.scrollView))return this.scrollView.clone();var t,e=this.table,n=e.index,r=e.xTableAreaView,o=e.getRenderMode(),i=r.getScrollView(),c=r.getScrollEnterView();return(t=_.isNotUnDef(c)&&o===Qv.SCROLL?c:i).sri=0,t.eri=0,t.h=n.getHeight(),this.scrollView=t,t.clone()}},{key:"getFullScrollView",value:function(){if(_.isNotUnDef(this.fullScrollView))return this.fullScrollView.clone();var t=this.table,e=t.index,n=t.xTableAreaView.getScrollView();return n.sri=0,n.eri=0,n.h=e.getHeight(),this.fullScrollView=n,n.clone()}},{key:"getViewMode",value:function(){if(_.isNotUnDef(this.viewMode))return this.viewMode;var t=this.table,e=t.xTableAreaView,n=t.rows,r=e.getLastScrollView(),o=e.getScrollView();_.isNotUnDef(r)&&(r.sri=0,r.eri=0,r.h=n.sectionSumHeight(r.sri,r.eri)),o.sri=0,o.eri=0,o.h=n.sectionSumHeight(o.sri,o.eri);var i=_p.viewMode(r,o);return this.viewMode=i,i}}]),e}(og),yg=function(t){function e(t){var n,r=t.xTableScrollView,i=t.settings,c=t.fixed,l=t.scroll;qv(this,e),(n=zv(this,Xv(e).call(this,"".concat(o,"-table-canvas"),"canvas"))).settings=i,n.fixed=c,n.scroll=l,n.renderMode=Qv.RENDER,n.scale=new Ph,n.index=new Ah(Bv({scaleAdapter:new Lh({goto:function(t){return oc.rpx(n.scale.goto(t))}})},n.settings.index)),n.rows=new Rh(Bv({scaleAdapter:new Lh({goto:function(t){return oc.rpx(n.scale.goto(t))}})},n.settings.rows)),n.cols=new Vh(Bv({scaleAdapter:new Lh({goto:function(t){return oc.rpx(n.scale.goto(t))},back:function(t){return n.scale.back(t)}})},n.settings.cols)),n.merges=new Jy(Bv({},n.settings.merge,{rows:n.rows,cols:n.cols})),n.cells=new Zp({rows:n.rows,cols:n.cols,data:n.settings.data,merges:n.merges}),n.xTableAreaView=new Mv({xTableScrollView:r,scroll:n.scroll,rows:n.rows,cols:n.cols}),n.operateCellsHelper=new jv({xTableAreaView:n.xTableAreaView,cells:n.cells,merges:n.merges,rows:n.rows,cols:n.cols}),n.styleCellsHelper=new By({xTableAreaView:n.xTableAreaView,cells:n.cells,merges:n.merges,rows:n.rows,cols:n.cols}),n.textCellsHelper=new qy({xTableAreaView:n.xTableAreaView,cells:n.cells,merges:n.merges,rows:n.rows,cols:n.cols}),n.tableDataSnapshot=new Ib(Fv(n));var a=new Gb({merges:n.merges,cols:n.cols,cells:n.cells}),s=new Zb({merges:n.merges,cols:n.cols,cells:n.cells}),u=new Pd(Cd.AND,[new Db((function(t,e){var r=n.cells.getCell(t,e);return!_.isUnDef(r)&&r.borderAttr.left.display})),new Db((function(t,e){return a.execute(t,e)}))]),f=new Db((function(t,e){var r=n.cells.getCell(t,e);return!_.isUnDef(r)&&r.borderAttr.top.display})),h=new Pd(Cd.AND,[new Db((function(t,e){var r=n.cells.getCell(t,e);return!_.isUnDef(r)&&r.borderAttr.right.display})),new Db((function(t,e){return s.execute(t,e)}))]),p=new Db((function(t,e){var r=n.cells.getCell(t,e);return!_.isUnDef(r)&&r.borderAttr.bottom.display}));return n.draw=new oc(n.el),n.line=new hc(n.draw,{leftShow:function(t,e){return u.execute(t,e)},topShow:function(t,e){return f.execute(t,e)},rightShow:function(t,e){return h.execute(t,e)},bottomShow:function(t,e){return p.execute(t,e)},iFMerge:function(t,e){return null!==n.merges.getFirstIncludes(t,e)},iFMergeFirstRow:function(t,e){return n.merges.getFirstIncludes(t,e).sri===t},iFMergeLastRow:function(t,e){return n.merges.getFirstIncludes(t,e).eri===t},iFMergeFirstCol:function(t,e){return n.merges.getFirstIncludes(t,e).sci===e},iFMergeLastCol:function(t,e){return n.merges.getFirstIncludes(t,e).eci===e}}),n.indexGrid=new Ip(n.draw,{color:n.index.getGridColor()}),n.grid=new Ip(n.draw,{color:n.settings.table.gridColor}),n.textFont=new Ny({scaleAdapter:new Lh({goto:function(t){return n.scale.goto(t)}})}),n.cellHorizontalGrid=new Id({merges:n.merges,rows:n.rows,cols:n.cols,cells:n.cells,drawCheck:!0}),n.cellVerticalGrid=new Bd({merges:n.merges,rows:n.rows,cols:n.cols,cells:n.cells,drawCheck:!0}),n.topIndexHorizontalGrid=new Id({merges:n.merges,rows:n.rows,cols:n.cols,cells:n.cells,getHeight:function(){return n.index.getHeight()}}),n.topIndexVerticalGrid=new Bd({merges:n.merges,rows:n.rows,cols:n.cols,cells:n.cells,getHeight:function(){return n.index.getHeight()}}),n.leftIndexHorizontalGrid=new Id({merges:n.merges,rows:n.rows,cols:n.cols,cells:n.cells,getWidth:function(){return n.index.getWidth()}}),n.leftIndexVerticalGrid=new Bd({merges:n.merges,rows:n.rows,cols:n.cols,cells:n.cells,getWidth:function(){return n.index.getWidth()}}),n.cellHorizontalBorder=new wv({merges:n.merges,rows:n.rows,cols:n.cols,cells:n.cells,drawOptimization:!0}),n.cellVerticalBorder=new _v({merges:n.merges,rows:n.rows,cols:n.cols,cells:n.cells,drawOptimization:!0}),n.xTableFrozenFullRect=new ag(Fv(n)),n.xLeftFrozenIndex=new ig(Fv(n)),n.xTopFrozenIndex=new lg(Fv(n)),n.xTableFrozenContent=new cg(Fv(n)),n.xLeftIndex=new sg(Fv(n)),n.xTopIndex=new pg(Fv(n)),n.xLeft=new ug(Fv(n)),n.xTop=new hg(Fv(n)),n.xContent=new fg(Fv(n)),n.merges.sync(),n}return $v(e,t),Jv(e,[{key:"drawBorderOptimize",value:function(){var t=this.styleCellsHelper,e=this.xTableAreaView,n=this.cellHorizontalBorder,r=this.cellVerticalBorder,o=e.getScrollView(),i=!0;t.getCellByViewRange({rectRange:o,callback:function(t,e,n){var r=n.borderAttr,o=r.top,c=r.left,l=r.right,a=r.bottom;return o.type===ac.DOUBLE_LINE?i=!1:c.type===ac.DOUBLE_LINE?i=!1:l.type===ac.DOUBLE_LINE?i=!1:a.type!==ac.DOUBLE_LINE||(i=!1)}}),i?(n.enableOptimization(),r.enableOptimization()):(n.disableOptimization(),r.disableOptimization())}},{key:"getRenderMode",value:function(){return this.renderMode}},{key:"visualWidth",value:function(){return this.el.width}},{key:"visualHeight",value:function(){return this.el.height}},{key:"resize",value:function(){var t=this.draw,e=this.xTableAreaView,n=this.parent().box();t.resize(n.width,n.height),e.undo(),this.reset(),this.render()}},{key:"reset",value:function(){var t=this.xTableAreaView,e=this.xLeftFrozenIndex,n=this.xTopFrozenIndex,r=this.xTableFrozenContent,o=this.xLeftIndex,i=this.xTopIndex,c=this.xLeft,l=this.xTop,a=this.xContent;t.reset(),e.reset(),n.reset(),r.reset(),o.reset(),i.reset(),c.reset(),l.reset(),a.reset()}},{key:"setScale",value:function(t){this.draw.attr({fillStyle:this.settings.table.background}),this.draw.fullRect(),this.scale.setValue(t),this.renderMode=Qv.SCALE,this.resize(),this.renderMode=Qv.RENDER}},{key:"render",value:function(){var t=this.fixed,e=this.xTableFrozenFullRect,n=this.xLeftFrozenIndex,r=this.xTopFrozenIndex,o=this.xTableFrozenContent,i=this.xLeftIndex,c=this.xTopIndex,l=this.xLeft,a=this.xTop,s=this.xContent;this.drawBorderOptimize(),e.render(),t.fxLeft>-1&&t.fxTop>-1&&o.render(),t.fxTop>-1&&(n.render(),a.render()),t.fxLeft>-1&&(r.render(),l.render()),s.render(),i.render(),c.render()}},{key:"scrolling",value:function(){var t=this.xTableAreaView;this.reset(),this.renderMode=Qv.SCROLL,this.render(),t.record(),this.renderMode=Qv.RENDER,this.reset()}}]),e}(I);function bg(t){return(bg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dg(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var c,l=t[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function vg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gg(t,e){return!e||"object"!==bg(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wg(t){return(wg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mg(t,e){return(mg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Og=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=gg(this,wg(e).call(this,{table:t}))).options=_.mergeDeep({mergeForceSplit:!1,onBeforeAutoFill:function(){},onAfterAutoFill:function(){}},r),n.targetOffset={top:0,left:0,width:0,height:0},n.selectRange=es.EMPTY,n.overGo=null,n.moveDir=null,n.ltElem=new I("".concat(o,"-x-autofill-area")),n.brElem=new I("".concat(o,"-x-autofill-area")),n.lElem=new I("".concat(o,"-x-autofill-area")),n.tElem=new I("".concat(o,"-x-autofill-area")),n.blt.child(n.ltElem),n.bl.child(n.lElem),n.bt.child(n.tElem),n.bbr.child(n.brElem),n.setBorderType("dashed"),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mg(t,e)}(e,t),n=e,(i=[{key:"onAdd",value:function(){this.bind(),this.hide()}},{key:"bind",value:function(){var t=this,e=this.table,n=this.xScreen,o=e.mousePointer,i=n.findType(Wu);Vt.bind([i.ltCorner,i.tCorner,i.lCorner,i.brCorner],r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(n){t.show(),o.set("crosshair"),Vt.mouseMoveUp(document,(function(n){var r=e.computeEventXy(n),o=r.x,i=r.y;t.selectRangeHandle(o,i),t.selectOffsetHandle(),t.selectBorderHandle()}),(function(){t.autoFillTo(),t.hide()})),n.stopPropagation()})),Vt.bind([i.ltCorner,i.tCorner,i.lCorner,i.brCorner],r.SYSTEM_EVENT_TYPE.MOUSE_MOVE,(function(t){o.set("crosshair"),t.stopPropagation()}))}},{key:"selectRangeHandle",value:function(t,e){var n=this.table,r=n.xScreen.findType(Wu),o=r.selectRange,i=r.selectLocal,c=n.cols,l=n.rows,a=n.getTableMerges(),s=Mu.BR!==i||null!=a.getFirstIncludes(o.sri,o.sci),u=dg(o.size(),2),f=u[0],h=u[1],p=n.getRiCiByXy(t,e),y=p.ri,b=p.ci;y<0?y=0:y>l.len&&(y=l.len-1),b<0?b=0:b>c.len&&(b=c.len-1);var d=o.sri,v=o.sci,g=o.eri,w=o.eci;i===Mu.L&&(w=c.len-1),i===Mu.T&&(g=l.len-1);var m=es.EMPTY,O=null;if(y<d||y>g){if(y<d)if(O="top",s){var T=d-f;if(T>=0){for(var E=d-1-y,S=1;S<=E;S+=1)S%f==0&&T-f>=0&&(T-=f);m=new es(T,v,d-1,w)}}else m=new es(y,v,d-1,w);if(y>g)if(O="bottom",s){var _=g+f;if(_<=l.len-1){for(var x=y-(g+1),k=1;k<=x;k+=1)k%f==0&&_+f<=l.len-1&&(_+=f);m=new es(g+1,v,_,w)}}else m=new es(g+1,v,y,w)}else if(b<v||b>w){if(b<v)if(O="left",s){var C=v-h;if(C>=0){for(var P=v-1-b,L=1;L<=P;L+=1)L%h==0&&C-h>=0&&(C-=h);m=new es(d,C,g,v-1)}}else m=new es(d,b,g,v-1);if(b>w)if(O="right",s){var j=w+h;if(j<=c.len-1){for(var A=b-(w+1),N=1;N<=A;N+=1)N%h==0&&j+h<=c.len-1&&(j+=h);m=new es(d,w+1,g,j)}}else m=new es(d,w+1,g,b)}if(m){var R=c.sectionSumWidth(m.sci,m.eci),I=l.sectionSumHeight(m.sri,m.eri);m.w=R,m.h=I}this.selectRange=m,this.moveDir=O}},{key:"selectOffsetHandle",value:function(){var t=this.selectRange;t.equals(es.EMPTY)?this.hide():(this.show(),this.targetOffset.width=this.measureWidth(t),this.targetOffset.height=this.measureHeight(t),this.targetOffset.top=this.measureTop(t),this.targetOffset.left=this.measureLeft(t),this.setTop(this.targetOffset.top),this.setLeft(this.targetOffset.left),this.setHeight(oc.offsetToLineInside(this.targetOffset.height)),this.setWidth(oc.offsetToLineInside(this.targetOffset.width)))}},{key:"selectBorderHandle",value:function(){var t=this.selectRange;if(!t.equals(es.EMPTY)){var e=this.rangeOverGo(t),n=this.borderDisplay(t,e),r=n.top,o=n.bottom,i=n.left,c=n.right;this.hideAllBorder(),this.overGo=e,r&&this.showTBorder(e),o&&this.showBBorder(e),i&&this.showLBorder(e),c&&this.showRBorder(e)}}},{key:"autoFillTo",value:function(){if(!this.selectRange.equals(es.EMPTY)){var t=this.table,e=this.options;e.onBeforeAutoFill(),this.splitMerge(),this.copyContent(),this.copyMerge(),e.onAfterAutoFill(),t.render()}}},{key:"copyContent",value:function(){for(var t=this.table,e=this.xScreen,n=t.getTableCells(),r=t.getTableDataSnapshot().cellDataProxy,o=e.findType(Wu).selectRange,i=this.selectRange,c=o.sri,l=i.sri;l<=i.eri;){for(var a=o.sci,s=i.sci;s<=i.eci;){var u=n.getCell(c,a);if(u){var f=u.clone();r.setCell(l,s,f)}s+=1,(a+=1)>o.eci&&(a=o.sci)}l+=1,(c+=1)>o.eri&&(c=o.sri)}}},{key:"splitMerge",value:function(){var t=this.table,e=t.getTableMerges(),n=t.getTableDataSnapshot().mergeDataProxy;this.selectRange.each((function(t,r){var o=e.getFirstIncludes(t,r);o&&n.deleteMerge(o)}))}},{key:"copyMerge",value:function(){var t=this.table,e=this.xScreen,n=t.getTableMerges(),r=t.getTableDataSnapshot().mergeDataProxy,o=e.findType(Wu),i=o.selectRange,c=o.selectLocal,l=this.selectRange,a=this.moveDir,s=i.sri,u=l.sri;if(c===Mu.BR||"top"!==a&&"left"!==a)for(;u<=l.eri;){for(var f=i.sci,h=l.sci;h<=l.eci;){var p=n.getFirstIncludes(s,f);if(p&&p.sri===s&&p.sci===f){var y=dg(p.size(),2),b=y[0],d=y[1],v=new es(u,h,u+(b-=1),h+(d-=1));r.addMerge(v)}h+=1,(f+=1)>i.eci&&(f=i.sci)}u+=1,(s+=1)>i.eri&&(s=i.sri)}}}])&&vg(n.prototype,i),c&&vg(n,c),e}(Nu);function Tg(t){return(Tg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Eg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Sg(t,e){return!e||"object"!==Tg(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _g(t){return(_g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xg(t,e){return(xg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var kg=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Sg(this,_g(e).call(this,"".concat(o,"-table-row-fixed-bar")))).table=t,n.block=P("div","".concat(o,"-table-row-fixed-block")),n.children(n.block),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xg(t,e)}(e,t),n=e,(i=[{key:"bind",value:function(){var t=this,e=this.table,n=e.mousePointer,o=e.dropRowFixed,i=!0;Vt.bind(e,r.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(){t.setSize()})),Vt.bind(e,r.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(){t.setSize()})),Vt.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_MOVE,(function(e){t.setActive(!0),n.set("-webkit-grab"),e.stopPropagation()})),Vt.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_LEAVE,(function(){!1!==i&&t.setActive(!1)})),Vt.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(r){o.show(),t.setActive(!0),n.set("-webkit-grab"),i=!1;var c=e.computeEventXy(r,e).y;o.offset({top:c}),Vt.mouseMoveUp(document,(function(t){var n=e.computeEventXy(t,e),r=n.x,i=n.y,c=e.getRiCiByXy(r,i);c.ri,c.ci,o.offset({top:i}),t.stopPropagation()}),(function(){t.setActive(!1),o.hide(),i=!0})),r.stopPropagation()}))}},{key:"onAttach",value:function(){this.setSize(),this.bind()}},{key:"setSize",value:function(){var t=this.table,e=this.block,n=t.fixed.fxTop,r=t.rows,o=n>-1?t.visualWidth():t.getIndexWidth(),i=n>-1?3:6,c=r.sectionSumHeight(0,n)+t.getIndexHeight()-i;e.offset({width:t.getIndexWidth(),height:6}),this.offset({height:6,width:o,left:0,top:c})}},{key:"setActive",value:function(t){t?(this.addClass("active"),this.block.addClass("active")):(this.removeClass("active"),this.block.removeClass("active"))}}])&&Eg(n.prototype,i),c&&Eg(n,c),e}(I);function Cg(t){return(Cg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lg(t,e){return!e||"object"!==Cg(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function jg(t){return(jg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ag(t,e){return(Ag=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ng=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Lg(this,jg(e).call(this,"".concat(o,"-table-col-fixed-bar")))).table=t,n.block=P("div","".concat(o,"-table-col-fixed-block")),n.children(n.block),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ag(t,e)}(e,t),n=e,(i=[{key:"bind",value:function(){var t=this,e=this.table,n=e.mousePointer,o=e.dropColFixed,i=!0;Vt.bind(e,r.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(){t.setSize()})),Vt.bind(e,r.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(){t.setSize()})),Vt.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_MOVE,(function(e){t.setActive(!0),n.set("-webkit-grab"),e.stopPropagation()})),Vt.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_LEAVE,(function(){!1!==i&&t.setActive(!1)})),Vt.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(r){o.show(),t.setActive(!0),n.set("-webkit-grab"),i=!1;var c=e.computeEventXy(r,e).x;o.offset({left:c}),Vt.mouseMoveUp(document,(function(t){var n=e.computeEventXy(t,e),r=n.x,i=n.y,c=e.getRiCiByXy(r,i);c.ri,c.ci,o.offset({left:r})}),(function(){o.hide(),i=!0,t.setActive(!1)})),r.stopPropagation()}))}},{key:"onAttach",value:function(){this.setSize(),this.bind()}},{key:"setSize",value:function(){var t=this.table,e=this.block,n=t.fixed.fxLeft,r=t.cols,o=n>-1?t.visualHeight():t.getIndexHeight(),i=n>-1?3:6,c=r.sectionSumWidth(0,n)+t.getIndexWidth()-i;e.offset({height:t.getIndexHeight(),width:6}),this.offset({width:6,height:o,left:c,top:0})}},{key:"setActive",value:function(t){t?(this.block.addClass("active"),this.addClass("active")):(this.block.removeClass("active"),this.removeClass("active"))}}])&&Pg(n.prototype,i),c&&Pg(n,c),e}(I);function Rg(t){return(Rg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ig(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vg(t,e){return!e||"object"!==Rg(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dg(t){return(Dg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hg(t,e){return(Hg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Mg=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Vg(this,Dg(e).call(this,"".concat(o,"-table-drop-row-fixed-bar")))).block=P("div","".concat(o,"-table-drop-row-fixed-block")),n.children(n.block),n.table=t,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hg(t,e)}(e,t),n=e,(r=[{key:"onAttach",value:function(){this.setSize(),this.hide()}},{key:"setSize",value:function(){var t=this.table,e=this.block,n=t.visualWidth();e.offset({width:t.getIndexWidth(),height:6}),this.offset({height:6,width:n,left:0})}}])&&Ig(n.prototype,r),i&&Ig(n,i),e}(I);function Wg(t){return(Wg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yg(t,e){return!e||"object"!==Wg(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gg(t){return(Gg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ug(t,e){return(Ug=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var zg=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Yg(this,Gg(e).call(this,"".concat(o,"-table-drop-col-fixed-bar")))).block=P("div","".concat(o,"-table-drop-col-fixed-block")),n.children(n.block),n.table=t,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ug(t,e)}(e,t),n=e,(r=[{key:"onAttach",value:function(){this.setSize(),this.hide()}},{key:"setSize",value:function(){var t=this.table,e=this.block,n=t.visualHeight();e.offset({height:t.getIndexHeight(),width:6}),this.offset({height:n,width:6,top:0})}}])&&Bg(n.prototype,r),i&&Bg(n,i),e}(I);function Fg(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var c,l=t[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Xg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xg(Object(n),!0).forEach((function(e){Zg(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xg(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Zg(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qg(t){return(qg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kg(t,e){return!e||"object"!==qg(e)&&"function"!=typeof e?Jg(t):e}function Jg(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qg(t){return(Qg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tw(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ew(t,e)}function ew(t,e){return(ew=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function nw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ow(t,e,n){return e&&rw(t.prototype,e),n&&rw(t,n),t}var iw=function(){function t(e){nw(this,t),this.table=e,this.scrollView=null,this.width=null,this.height=null,this.x=null,this.y=null}return ow(t,[{key:"reset",value:function(){this.scrollView=null,this.width=null,this.height=null,this.x=null,this.y=null}},{key:"getX",value:function(){throw new TypeError("child impl")}},{key:"getY",value:function(){throw new TypeError("child impl")}},{key:"getHeight",value:function(){throw new TypeError("child impl")}},{key:"getWidth",value:function(){throw new TypeError("child impl")}}]),t}(),cw=function(t){function e(){return nw(this,e),Kg(this,Qg(e).apply(this,arguments))}return tw(e,t),ow(e,[{key:"getWidth",value:function(){if(_.isNumber(this.width))return this.width;var t=this.table,e=t.fixed,n=t.rows.sectionSumHeight(0,e.fxLeft);return this.width=n,n}},{key:"getHeight",value:function(){if(_.isNumber(this.height))return this.height;var t=this.table,e=t.fixed,n=t.rows.sectionSumHeight(0,e.fxTop);return this.height=n,n}},{key:"getX",value:function(){if(_.isNumber(this.x))return this.x;var t=this.table.index.getWidth();return this.x=t,t}},{key:"getY",value:function(){if(_.isNumber(this.y))return this.y;var t=this.table.index.getHeight();return this.y=t,t}},{key:"getScrollView",value:function(){if(_.isNotUnDef(this.scrollView))return this.scrollView.clone();var t=this.table,e=t.rows,n=t.cols,r=t.fixed,o=new es(0,0,r.fxTop,r.fxLeft);return o.w=n.rectRangeSumWidth(o),o.h=e.rectRangeSumHeight(o),this.scrollView=o,o.clone()}}]),e}(iw),lw=function(t){function e(){return nw(this,e),Kg(this,Qg(e).apply(this,arguments))}return tw(e,t),ow(e,[{key:"getWidth",value:function(){if(_.isNumber(this.width))return this.width;var t=this.table,e=t.xLeft,n=t.index,r=t.visualWidth()-(n.getWidth()+e.getWidth());return this.width=r,r}},{key:"getHeight",value:function(){if(_.isNumber(this.height))return this.height;var t=this.table.index.getHeight();return this.height=t,t}},{key:"getX",value:function(){if(_.isNumber(this.x))return this.x;var t=this.table,e=t.xLeft,n=t.index.getWidth()+e.getWidth();return this.x=n,n}},{key:"getY",value:function(){if(_.isNumber(this.y))return this.y;return this.y=0,0}},{key:"getScrollView",value:function(){if(_.isNotUnDef(this.scrollView))return this.scrollView.clone();var t=this.table,e=t.index,n=t.xTableAreaView.getScrollView();return n.sri=0,n.eri=0,n.h=e.getHeight(),this.scrollView=n,n.clone()}}]),e}(iw),aw=function(t){function e(){return nw(this,e),Kg(this,Qg(e).apply(this,arguments))}return tw(e,t),ow(e,[{key:"getWidth",value:function(){if(_.isNumber(this.width))return this.width;var t=this.table.index.getWidth();return this.width=t,t}},{key:"getHeight",value:function(){if(_.isNumber(this.height))return this.height;var t=this.table,e=t.xTop,n=t.index,r=t.visualHeight()-(n.getHeight()+e.getHeight());return this.height=r,r}},{key:"getX",value:function(){if(_.isNumber(this.x))return this.x;return this.x=0,0}},{key:"getY",value:function(){if(_.isNumber(this.y))return this.y;var t=this.table,e=t.xTop,n=t.index.getHeight()+e.getHeight();return this.y=n,n}},{key:"getScrollView",value:function(){if(_.isNotUnDef(this.scrollView))return this.scrollView.clone();var t=this.table,e=t.xTableAreaView,n=t.index,r=e.getScrollView();return r.sci=0,r.eci=0,r.w=n.getWidth(),this.scrollView=r,r.clone()}}]),e}(iw),sw=function(t){function e(){return nw(this,e),Kg(this,Qg(e).apply(this,arguments))}return tw(e,t),ow(e,[{key:"getWidth",value:function(){if(_.isNumber(this.width))return this.width;var t=this.table,e=t.xLeft,n=t.index,r=t.visualWidth()-(n.getWidth()+e.getWidth());return this.width=r,r}},{key:"getHeight",value:function(){if(_.isNumber(this.height))return this.height;var t=this.table,e=t.fixed,n=t.rows.sectionSumHeight(0,e.fxTop);return this.height=n,n}},{key:"getX",value:function(){if(_.isNumber(this.x))return this.x;var t=this.table,e=t.xLeft,n=t.index.getWidth()+e.getWidth();return this.x=n,n}},{key:"getY",value:function(){if(_.isNumber(this.y))return this.y;var t=this.table.index.getHeight();return this.y=t,t}},{key:"getScrollView",value:function(){if(_.isNotUnDef(this.scrollView))return this.scrollView.clone();var t=this.table,e=t.fixed,n=t.rows,r=t.xTableAreaView.getScrollView();return r.sri=0,r.eri=e.fxTop,r.h=n.sectionSumHeight(r.sci,r.eci),this.scrollView=r,r.clone()}}]),e}(iw),uw=function(t){function e(){return nw(this,e),Kg(this,Qg(e).apply(this,arguments))}return tw(e,t),ow(e,[{key:"getWidth",value:function(){if(_.isNumber(this.width))return this.width;var t=this.table,e=t.index,n=t.xLeft,r=t.visualWidth()-(e.getWidth()+n.getWidth());return this.width=r,r}},{key:"getHeight",value:function(){if(_.isNumber(this.height))return this.height;var t=this.table,e=t.xTop,n=t.index,r=t.visualHeight()-(n.getHeight()+e.getHeight());return this.height=r,r}},{key:"getX",value:function(){if(_.isNumber(this.x))return this.x;var t=this.table,e=t.xLeft,n=t.index.getWidth()+e.getWidth();return this.x=n,n}},{key:"getY",value:function(){if(_.isNumber(this.y))return this.y;var t=this.table,e=t.xTop,n=t.index.getHeight()+e.getHeight();return this.y=n,n}},{key:"getScrollView",value:function(){if(_.isNotUnDef(this.scrollView))return this.scrollView.clone();var t=this.table.xTableAreaView.getScrollView();return this.scrollView=t,t.clone()}}]),e}(iw),fw=function(t){function e(){return nw(this,e),Kg(this,Qg(e).apply(this,arguments))}return tw(e,t),ow(e,[{key:"getWidth",value:function(){if(_.isNumber(this.width))return this.width;var t=this.table,e=t.cols,n=t.fixed,r=e.sectionSumWidth(0,n.fxLeft);return this.width=r,r}},{key:"getHeight",value:function(){if(_.isNumber(this.height))return this.height;var t=this.table,e=t.xTop,n=t.index,r=t.visualHeight()-(n.getHeight()+e.getHeight());return this.height=r,r}},{key:"getX",value:function(){if(_.isNumber(this.x))return this.x;var t=this.table.index.getWidth();return this.x=t,t}},{key:"getY",value:function(){if(_.isNumber(this.y))return this.y;var t=this.table,e=t.xTop,n=t.index.getHeight()+e.getHeight();return this.y=n,n}},{key:"getScrollView",value:function(){if(_.isNotUnDef(this.scrollView))return this.scrollView.clone();var t=this.table,e=t.fixed,n=t.cols,r=t.xTableAreaView.getScrollView();return r.sci=0,r.eci=e.fxLeft,r.w=n.sectionSumWidth(r.sci,r.eci),this.scrollView=r,r.clone()}}]),e}(iw),hw=function t(e){nw(this,t);var n=e.keyboard,r=e.cols,o=e.rows,i=e.edit,c=e.screenSelector,l=e.getTableMerges(),a=0,s=null;n.register({el:e,focus:!0,stop:!1,attr:{code:9,callback:function(){i.hideEdit();var t=c.selectorAttr;if(t){var e=t,n=t.rect.clone();if(a!==e){var u=n.sri,f=n.sci;a=e,s={sri:u,sci:f}}var h=r.len-1,p=o.len-1,y=s,b=y.sri,d=y.sci,v=l.getFirstIncludes(b,d);if(v&&(d=v.eci),!(d>=h&&b>=p)){d>=h?(b+=1,d=0):d+=1,s.sri=b,s.sci=d;var g=b,w=d,m=l.getFirstIncludes(b,d);m&&(b=m.sri,d=m.sci,g=m.eri,w=m.eci),n.sri=b,n.sci=d,n.eri=g,n.eci=w,c.selectorAttr.rect=n,c.setOffset(c.selectorAttr),c.onChangeStack.forEach((function(t){return t()})),c.onSelectChangeStack.forEach((function(t){return t()})),i.showEdit()}}}}})},pw=function(t){function e(t){var n,r=t.settings;return nw(this,e),(n=Kg(this,Qg(e).call(this,"".concat(o,"-table")))).settings=_.mergeDeep({index:{height:30,width:50,gridColor:"#c5c5c5",size:10,color:"#000000"},table:{showGrid:!0,background:"#ffffff",borderColor:"#000000",gridColor:"#e1e1e1"},fixed:{fxTop:-1,fxLeft:-1},rows:{len:1e3,height:30,data:[]},cols:{len:36,width:110,data:[]},data:[],merge:{}},r),n.visualHeightCache=null,n.visualWidthCache=null,n.scale=new Ph,n.index=new Ah($g({scaleAdapter:new Lh({goto:function(t){return oc.cvCssPx(n.scale.goto(t))}})},n.settings.index)),n.rows=new Rh($g({scaleAdapter:new Lh({goto:function(t){return oc.cvCssPx(n.scale.goto(t))}})},n.settings.rows)),n.cols=new Vh($g({scaleAdapter:new Lh({goto:function(t){return oc.cvCssPx(n.scale.goto(t))}})},n.settings.cols)),n.fixed=new Dh(n.settings.fixed),n.scroll=new Mh({fixed:n.fixed}),n.xTableScrollView=new _p({scroll:n.scroll,rows:n.rows,cols:n.cols,getHeight:function(){return n.xContent.getHeight()},getWidth:function(){return n.xContent.getWidth()}}),n.xTableAreaView=new kp({xTableScrollView:n.xTableScrollView,rows:n.rows,cols:n.cols,scroll:n.scroll}),n.xTableStyle=new yg({xTableScrollView:n.xTableScrollView,settings:n.settings,scroll:n.scroll,fixed:n.fixed}),n.xTableFrozenContent=new cw(Jg(n)),n.xLeftIndex=new aw(Jg(n)),n.xTopIndex=new lw(Jg(n)),n.xLeft=new fw(Jg(n)),n.xTop=new sw(Jg(n)),n.xContent=new uw(Jg(n)),n.focus=new Op(Jg(n)),n.mousePointer=new Xh(Jg(n)),n.keyboard=new Zh(Jg(n)),n.xScreen=new Ns(Jg(n)),n.xReSizer=new ep(Jg(n)),n.yReSizer=new lp(Jg(n)),n.xHeightLight=new pp(Jg(n)),n.yHeightLight=new wp(Jg(n)),n.edit=new Np(Jg(n)),n.rowFixed=new kg(Jg(n)),n.colsFixed=new Ng(Jg(n)),n.dropRowFixed=new Mg(Jg(n)),n.dropColFixed=new zg(Jg(n)),n}return tw(e,t),ow(e,[{key:"getTableDataSnapshot",value:function(){return this.xTableStyle.tableDataSnapshot}},{key:"getTableMerges",value:function(){return this.xTableStyle.merges}},{key:"getStyleCellsHelper",value:function(){return this.xTableStyle.styleCellsHelper}},{key:"getOperateCellsHelper",value:function(){return this.xTableStyle.operateCellsHelper}},{key:"getTableCells",value:function(){return this.xTableStyle.cells}},{key:"getScrollTotalWidth",value:function(){var t=this.fixed,e=this.cols;return t.fxLeft>-1?e.sectionSumWidth(t.fxLeft,e.len-1):e.sectionSumWidth(0,e.len-1)}},{key:"getScrollTotalHeight",value:function(){var t=this.fixed,e=this.rows;return t.fxTop>-1?e.sectionSumHeight(t.fxTop,e.len-1):e.sectionSumHeight(0,e.len-1)}},{key:"getIndexWidth",value:function(){return this.index.getWidth()}},{key:"getIndexHeight",value:function(){return this.index.getHeight()}},{key:"getContentWidth",value:function(){return this.xContent.getWidth()}},{key:"getContentHeight",value:function(){return this.xContent.getHeight()}},{key:"getFixedWidth",value:function(){return this.xLeft.getWidth()}},{key:"getFixedHeight",value:function(){return this.xTop.getHeight()}},{key:"visualWidth",value:function(){if(_.isNumber(this.visualWidthCache))return this.visualWidthCache;var t=this.box().width;return this.visualWidthCache=t,t}},{key:"visualHeight",value:function(){if(_.isNumber(this.visualHeightCache))return this.visualHeightCache;var t=this.box().height;return this.visualHeightCache=t,t}},{key:"getRiCiByXy",value:function(t,e){var n=this.fixed,r=this.rows,o=this.cols,i=this.index,c=this.getFixedHeight(),l=this.getFixedWidth(),a=t,s=e,u=-1,f=-1;if(a-=i.getWidth(),s-=i.getHeight(),a<=l&&t>i.getWidth())for(var h=0,p=0;p<=n.fxLeft;p+=1){if(u=p,(h+=o.getWidth(p))>=a)break}else if(t>i.getWidth())for(var y=l,b=this.getScrollView(),d=b.sci;d<=b.eci;d+=1){if(u=d,(y+=o.getWidth(d))>=a)break}if(s<c&&e>i.getHeight())for(var v=0,g=0;g<=n.fxTop;g+=1){if(f=g,(v+=r.getHeight(g))>s)break}else if(e>i.getHeight())for(var w=c,m=this.getScrollView(),O=m.sri;O<=m.eri;O+=1){if(f=O,(w+=r.getHeight(O))>s)break}return{ri:f,ci:u}}},{key:"onAttach",value:function(){var t=this.xTableStyle;this.attach(t),this.bind(),this.attach(this.xScreen),this.xScreen.addItem(new Wu(this)),this.xScreen.addItem(new Og(this)),this.xScreen.addItem(new Ku(this)),this.attach(this.xReSizer),this.attach(this.yReSizer),this.attach(this.xHeightLight),this.attach(this.yHeightLight),this.attach(this.edit),this.attach(this.rowFixed),this.attach(this.colsFixed),this.attach(this.dropRowFixed),this.attach(this.dropColFixed),this.keyBoardTab=new hw(this)}},{key:"bind",value:function(){var t=this,e=this.mousePointer;Vt.bind(this,r.TABLE_EVENT_TYPE.CHANGE_WIDTH,(function(){t.resize()})),Vt.bind(this,r.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(){t.resize()})),Vt.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_MOVE,(function(n){var r=t.computeEventXy(n),o=r.x,i=r.y,c=t.getRiCiByXy(o,i),l=c.ri,a=c.ci;-1!==l||-1!==a?-1!==l?-1!==a?e.set("cell"):e.set("e-resize"):e.set("s-resize"):e.set("default")}))}},{key:"getScrollView",value:function(){return this.xTableAreaView.getScrollView()}},{key:"scrollX",value:function(t){var e=this.cols,n=this.fixed,r=this.scroll,o=n.fxLeft;o+=1;var i,c=Fg(_.rangeReduceIf(o,e.len,0,0,t,(function(t){return e.getWidth(t)})),3),l=c[0],a=c[1],s=c[2],u=a;t>0&&(u+=s),r.x>u?i=Hh.H_LEFT:r.x<u&&(i=Hh.H_RIGHT),r.type=i,r.ci=l,r.x=u,this.scrolling(),r.type=Hh.UN}},{key:"scrollY",value:function(t){var e=this.rows,n=this.fixed,r=this.scroll,o=n.fxTop;o+=1;var i,c=Fg(_.rangeReduceIf(o,e.len,0,0,t,(function(t){return e.getHeight(t)})),3),l=c[0],a=c[1],s=c[2],u=a;t>0&&(u+=s),r.y>u?i=Hh.V_TOP:r.y<u&&(i=Hh.V_BOTTOM),r.type=i,r.ri=l,r.y=u,this.scrolling(),r.type=Hh.UN}},{key:"getTop",value:function(){var t=this.rows,e=this.getScrollView();return t.sectionSumHeight(0,e.sri-1)}},{key:"getLeft",value:function(){var t=this.cols,e=this.getScrollView();return t.sectionSumWidth(0,e.sci-1)}},{key:"resize",value:function(){var t=this.xTableStyle;this.visualHeightCache=null,this.visualWidthCache=null,this.reset(),t.resize()}},{key:"reset",value:function(){var t=this.xTableAreaView,e=this.xTableFrozenContent,n=this.xLeftIndex,r=this.xTopIndex,o=this.xLeft,i=this.xTop,c=this.xContent;t.reset(),e.reset(),n.reset(),r.reset(),o.reset(),i.reset(),c.reset()}},{key:"setScale",value:function(t){var e=this.xTableStyle,n=this.scale,o=this.xScreen,i=this.xHeightLight,c=this.yHeightLight;this.reset(),n.setValue(t),o.setZone(),i.offsetHandle(),c.offsetHandle(),e.setScale(t),this.trigger(r.TABLE_EVENT_TYPE.SCALE_CHANGE)}},{key:"render",value:function(){this.xTableStyle.render()}},{key:"scrolling",value:function(){var t=this.xTableStyle;this.reset(),t.scrolling(),this.trigger(r.SYSTEM_EVENT_TYPE.SCROLL)}}]),e}(I);function yw(t){return(yw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dw(t,e){return!e||"object"!==yw(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vw(t){return(vw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gw(t,e){return(gw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ww=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tableConfig:{data:[]}};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=dw(this,vw(e).call(this,"".concat(o,"-sheet")))).options=n,t.table=new pw({settings:t.options.tableConfig}),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gw(t,e)}(e,t),n=e,(i=[{key:"bind",value:function(){var t=this,e=this.table;Vt.bind(e,r.TABLE_EVENT_TYPE.CHANGE_WIDTH,(function(e){t.trigger(r.TABLE_EVENT_TYPE.CHANGE_WIDTH,t),e.stopPropagation()})),Vt.bind(e,r.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(e){t.trigger(r.TABLE_EVENT_TYPE.CHANGE_HEIGHT,t),e.stopPropagation()})),Vt.bind(e,r.TABLE_EVENT_TYPE.SELECT_CHANGE,(function(e){t.trigger(r.TABLE_EVENT_TYPE.SELECT_CHANGE,t),e.stopPropagation()})),Vt.bind(e,r.TABLE_EVENT_TYPE.SELECT_DOWN,(function(e){t.trigger(r.TABLE_EVENT_TYPE.SELECT_DOWN,t),e.stopPropagation()}))}},{key:"onAttach",value:function(){var t=this.table;this.attach(t),this.bind()}}])&&bw(n.prototype,i),c&&bw(n,c),e}(I),mw=n(3),Ow=n.n(mw);function Tw(t){return(Tw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ew(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Sw(t,e){return!e||"object"!==Tw(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _w(t){return(_w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xw(t,e){return(xw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var kw=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{sheets:[]};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Sw(this,_w(e).call(this,"".concat(o,"-work-body")))).work=t,n.workConfig=r,n.sheets=n.workConfig.sheets,n.tabSheet=[],n.activeIndex=-1,n.poweredBy=P("div","".concat(o,"-powered-by-tips")),n.poweredBy.html('<a target="_blank" href="https://gitee.com/eigi/x-sheet">\n'.concat(i,"\n</a>")),n.children(n.poweredBy),n.sheetViewLayer=new Qt({style:{flexGrow:1}}),n.scrollBarYLayer=new Qt({style:{overflow:"inherit"}}),n.scrollBarXLayer=new eh,n.scrollBarXVerticalCenter=new ch,n.scrollBarXHorizontalLayer=new Qt({style:{flexGrow:2}}),n.scrollBarXVerticalCenter.children(n.scrollBarXLayer),n.scrollBarXHorizontalLayer.children(n.scrollBarXVerticalCenter),n.sheetSwitchTabLayer=new Qt({style:{flexGrow:3}}),n.horizontalLayer1=new oe,n.horizontalLayer2=new oe,n.horizontalLayer1.children(n.sheetViewLayer),n.horizontalLayer1.children(n.scrollBarYLayer),n.horizontalLayer2.children(n.sheetSwitchTabLayer),n.horizontalLayer2.children(n.scrollBarXHorizontalLayer),n.horizontalLayer1Layer=new q({style:{flexGrow:1}}),n.horizontalLayer2Layer=new q,n.layerVerticalLayer=new z,n.horizontalLayer1Layer.children(n.horizontalLayer1),n.horizontalLayer2Layer.children(n.horizontalLayer2),n.layerVerticalLayer.children(n.horizontalLayer1Layer),n.layerVerticalLayer.children(n.horizontalLayer2Layer),n.children(n.layerVerticalLayer),n.scrollBarY=new $t({scroll:function(t){n.sheetView.getActiveSheet().table.scrollY(t)}}),n.scrollBarX=new Yt({scroll:function(t){n.sheetView.getActiveSheet().table.scrollX(t)}}),n.sheetView=new ph,n.tabView=new wh({onAdd:function(){var t=new ww,e=new xh;n.addTabSheet({tab:e,sheet:t})},onSwitch:function(t){n.setActiveTab(t)}}),n}var n,c,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xw(t,e)}(e,t),n=e,(c=[{key:"updateScroll",value:function(){var t=this.sheetView.getActiveSheet();if(!_.isUnDef(t)){var e=this.scrollBarXHorizontalLayer,n=t.table;n.resize();var r=n.getScrollTotalHeight(),o=n.getScrollTotalWidth();e.display(o>n.getContentWidth()),this.scrollBarY.setSize(n.getContentHeight(),r),this.scrollBarX.setSize(n.getContentWidth(),o),this.scrollBarY.scrollMove(n.getTop()),this.scrollBarX.scrollMove(n.getLeft()),n.resize()}}},{key:"createSheet",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,o=this.sheets[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var i=r.value,c=i.name,l=new ww(i),a=new xh(c);this.addTabSheet({tab:a,sheet:l})}}catch(t){e=!0,n=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw n}}this.tabSheet.length&&this.setActiveIndex(0)}},{key:"bind",value:function(){var t=this;this.on(r.SYSTEM_EVENT_TYPE.MOUSE_WHEEL,(function(e){var n=t.sheetView.getActiveSheet();if(!_.isUnDef(n)){var r=n.table.scroll,o=t.scrollBarY.scrollTo,i=e.deltaY;e.detail&&(i=40*e.detail),i>0?t.scrollBarY.scrollMove(o+Math.abs(i)):t.scrollBarY.scrollMove(o-Math.abs(i)),r.blockTop<r.maxBlockTop&&r.blockTop>0&&(e.preventDefault(),e.stopPropagation())}})),Vt.bind(window,r.SYSTEM_EVENT_TYPE.RESIZE,(function(){_.throttle((function(){t.updateScroll()}))})),Vt.bind(this.sheetView,r.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(){t.updateScroll()})),Vt.bind(this.sheetView,r.TABLE_EVENT_TYPE.CHANGE_WIDTH,(function(){t.updateScroll()})),Vt.bind(this.sheetView,r.TABLE_EVENT_TYPE.DATA_CHANGE,(function(e){t.trigger(r.TABLE_EVENT_TYPE.DATA_CHANGE),e.stopPropagation()})),Vt.bind(this.sheetView,r.TABLE_EVENT_TYPE.SELECT_CHANGE,(function(e){t.trigger(r.TABLE_EVENT_TYPE.SELECT_CHANGE),e.stopPropagation()})),Vt.bind(this.sheetView,r.TABLE_EVENT_TYPE.SELECT_DOWN,(function(e){t.trigger(r.TABLE_EVENT_TYPE.SELECT_DOWN,t),e.stopPropagation()}))}},{key:"onAttach",value:function(){var t=this.sheetViewLayer,e=this.scrollBarYLayer,n=this.sheetSwitchTabLayer,r=this.scrollBarXLayer;e.attach(this.scrollBarY),r.attach(this.scrollBarX),n.attach(this.tabView),t.attach(this.sheetView),this.bind(),this.createSheet(),this.updateScroll()}},{key:"addTabSheet",value:function(t){var e=t.tab,n=t.sheet,r=this.tabSheet,o=this.sheetView,i=this.tabView;o.attach(n),i.attach(e),r.push({tab:e,sheet:n})}},{key:"setActiveIndex",value:function(t){var e=this.sheetView,n=this.tabView,o=e.setActiveSheet(t),i=n.setActiveTab(t);o&&i&&(this.updateScroll(),this.trigger(r.WORK_BODY_EVENT_TYPE.CHANGE_ACTIVE),this.activeIndex=t)}},{key:"setActiveTab",value:function(t){var e=this;this.tabSheet.forEach((function(n,r){n.tab===t&&e.setActiveIndex(r)}))}},{key:"toTemplate",value:function(){var t=this.activeIndex,e=this.sheetView,n=this.tabView,r=e.sheetList[t],o=n.tabList[t];if(r&&o){var i=r.table,c=i.rows,l=i.cols,a=i.settings,s=i.getTableCells(),u=i.getTableMerges(),f={name:o.name,tableConfig:{table:{showGrid:a.table.showGrid,background:a.table.background},rows:{len:c.len,height:c.height,data:c.getData()},cols:{len:l.len,width:l.width,data:l.getData()},merge:{merges:u.getData().map((function(t){return t.toString()}))},data:s.getData()}},h="window['".concat(o.name,"'] = ").concat(JSON.stringify(f));Ow()(h,"".concat(o.name,".js"),"application/x-javascript")}}},{key:"setScale",value:function(t){this.sheetView.getActiveSheet().table.setScale(t),this.updateScroll()}}])&&Ew(n.prototype,c),l&&Ew(n,l),e}(I);function Cw(t){return(Cw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lw(t,e){return!e||"object"!==Cw(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function jw(t){return(jw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Aw(t,e){return(Aw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Nw=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Lw(this,jw(e).call(this,"".concat(o,"-bottom-menu")))).workBottom=t,n.sum=P("div","".concat(o,"-bottom-sum")),n.avg=P("div","".concat(o,"-bottom-avg")),n.number=P("div","".concat(o,"-bottom-number")),n.fullScreen=P("div","".concat(o,"-bottom-full-screen")),n.grid=P("div","".concat(o,"-bottom-grid")),n.children(n.grid),n.children(n.fullScreen),n.children(n.sum),n.children(n.avg),n.children(n.number),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Aw(t,e)}(e,t),n=e,(i=[{key:"onAttach",value:function(){this.bind()}},{key:"bind",value:function(){var t=this.workBottom.work,e=t.body.sheetView;Vt.bind(this.grid,r.SYSTEM_EVENT_TYPE.CLICK,(function(){var t=e.getActiveSheet().table;t.settings.table.showGrid=!t.settings.table.showGrid,t.render()})),Vt.bind(this.fullScreen,r.SYSTEM_EVENT_TYPE.CLICK,(function(){_.isFull()?_.exitFullscreen():_.fullScreen(t.root)}))}},{key:"setSum",value:function(t){this.sum.text("求和: ".concat(t))}},{key:"setAvg",value:function(t){this.avg.text("平均数: ".concat(t))}},{key:"setNumber",value:function(t){this.number.text("数量: ".concat(t))}}])&&Pw(n.prototype,i),c&&Pw(n,c),e}(I);function Rw(t){return(Rw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Iw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vw(t,e){return!e||"object"!==Rw(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dw(t){return(Dw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hw(t,e){return(Hw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Mw=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Vw(this,Dw(e).call(this,"".concat(o,"-work-bottom")))).work=t,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hw(t,e)}(e,t),n=e,(r=[{key:"onAttach",value:function(){this.bottomMenu=new Nw(this),this.attach(this.bottomMenu)}}])&&Iw(n.prototype,r),i&&Iw(n,i),e}(I);function Ww(t){return(Ww="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yw(t){return(Yw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gw(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Uw(t,e){return(Uw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var zw=function(t){function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{body:{}};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(r=Yw(e).call(this,"".concat(o,"-work")))||"object"!==Ww(r)&&"function"!=typeof r?Gw(n):r).options=i.workConfig,t.root=null,t.topLayer=new q,t.bodyLayer=new q({style:{flexGrow:1}}),t.bottomLayer=new q,t.verticalLayer=new z,t.verticalLayer.children(t.topLayer),t.verticalLayer.children(t.bodyLayer),t.verticalLayer.children(t.bottomLayer),t.children(t.verticalLayer),t.top=new qf(Gw(t)),t.body=new kw(Gw(t),t.options.body),t.bottom=new Mw(Gw(t)),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Uw(t,e)}(e,t),n=e,(r=[{key:"onAttach",value:function(t){this.root=t;var e=this.bodyLayer,n=this.topLayer,r=this.bottomLayer;n.attach(this.top),r.attach(this.bottom),e.attach(this.body),this.bottom.bottomMenu.setSum(0),this.bottom.bottomMenu.setAvg(0),this.bottom.bottomMenu.setNumber(0)}}])&&Bw(n.prototype,r),i&&Bw(n,i),e}(I);n(4),n(5);function Fw(t){return(Fw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xw(t){return(Xw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zw(t,e){return(Zw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"XSheet",(function(){return qw}));var qw=function(t){function e(t){var n,r,i,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{workConfig:{body:{sheets:[{tableConfig:{}}]}}};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,n=!(i=Xw(e).call(this,"".concat(o)))||"object"!==Fw(i)&&"function"!=typeof i?$w(r):i;var l=t;return"string"==typeof t&&(l=document.querySelector(t)),(l=P(l)).children($w(n)),n.work=new zw(c),n.attach(n.work),ye.setRoot($w(n)),ur.setRoot($w(n)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zw(t,e)}(e,t),e}(I);qw.version=i,qw.Utils=_,window&&(window.XSheet=qw)}]);
//# sourceMappingURL=XSheet.js.map