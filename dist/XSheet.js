!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=7)}([function(t,e,n){t.exports=n.p+"c4ab8001e109540f7ae6a34181d695d3.png"},function(t,e,n){t.exports=n.p+"42b436e7c64603182355d52d31ea49f1.png"},function(t,e,n){t.exports=n.p+"9dfd8685ea7e1e5c025514eec46a4547.png"},function(t,e,n){t.exports=n.p+"51859b5219dccb48ef2a5659717d0a1b.svg"},function(t,e,n){var r,o,i;o=[],void 0===(i="function"==typeof(r=function(){return function t(e,n,r){var o,i,c=window,l="application/octet-stream",a=r||l,u=e,s=!n&&!r&&u,f=document.createElement("a"),h=function(t){return String(t)},y=c.Blob||c.MozBlob||c.WebKitBlob||h,p=n||"download";if(y=y.call?y.bind(c):Blob,"true"===String(this)&&(a=(u=[u,a])[0],u=u[1]),s&&s.length<2048&&(p=s.split("/").pop().split("?")[0],f.href=s,-1!==f.href.indexOf(s))){var b=new XMLHttpRequest;return b.open("GET",s,!0),b.responseType="blob",b.onload=function(e){t(e.target.response,p,l)},setTimeout((function(){b.send()}),0),b}if(/^data\:[\w+\-]+\/[\w+\-]+[,;]/.test(u)){if(!(u.length>2096103.424&&y!==h))return navigator.msSaveBlob?navigator.msSaveBlob(d(u),p):v(u);a=(u=d(u)).type||l}function d(t){for(var e=t.split(/[:;,]/),n=e[1],r=("base64"==e[2]?atob:decodeURIComponent)(e.pop()),o=r.length,i=0,c=new Uint8Array(o);i<o;++i)c[i]=r.charCodeAt(i);return new y([c],{type:n})}function v(t,e){if("download"in f)return f.href=t,f.setAttribute("download",p),f.className="download-js-link",f.innerHTML="downloading...",f.style.display="none",document.body.appendChild(f),setTimeout((function(){f.click(),document.body.removeChild(f),!0===e&&setTimeout((function(){c.URL.revokeObjectURL(f.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return t=t.replace(/^data:([\w\/\-\+]+)/,l),window.open(t)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=t),!0;var n=document.createElement("iframe");document.body.appendChild(n),e||(t="data:".concat(t.replace(/^data:([\w\/\-\+]+)/,l))),n.src=t,setTimeout((function(){document.body.removeChild(n)}),333)}if(o=u instanceof y?u:new y([u],{type:a}),navigator.msSaveBlob)return navigator.msSaveBlob(o,p);if(c.URL)v(c.URL.createObjectURL(o),!0);else{if("string"==typeof o||o.constructor===h)try{return v("data:".concat(a,";base64,").concat(c.btoa(o)))}catch(t){return v("data:".concat(a,",").concat(encodeURIComponent(o)))}(i=new FileReader).onload=function(t){v(this.result)},i.readAsDataURL(o)}return!0}})?r.apply(e,o):r)||(t.exports=i)},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var r={},o="x-sheet",i="".concat(o," 1.0.0-develop");function c(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var c,l=t[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return e&&b(t.prototype,e),n&&b(t,n),t}r.WORK_BODY_EVENT_TYPE={CHANGE_ACTIVE:"changeactive"},r.SYSTEM_EVENT_TYPE={MOUSE_MOVE:"mousemove",MOUSE_DOWN:"mousedown",SCROLL:"scroll",RESIZE:"resize",MOUSE_UP:"mouseup",KEY_UP:"keyup",INPUT:"input",KEY_DOWN:"keydown",MOUSE_OVER:"mouseover",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",MOUSE_ENTER:"mouseenter",CLICK:"click",DRAG_START:"dragstart",CHANGE:"change",VISIBILITY_CHANGE:"visibilitychange"},r.TABLE_EVENT_TYPE={CHANGE_HEIGHT:"changeheight",SELECT_OVER:"selectover",SCALE_CHANGE:"scalechange",FIXED_CHANGE:"fixedchange",FIXED_ROW_CHANGE:"fixedrowchange",SELECT_DOWN:"selectdown",SELECT_CHANGE:"selectchange",DATA_CHANGE:"datachange",CHANGE_WIDTH:"changewidth",RESIZE_CHANGE:"resizechange",RENDER:"render"},r.FORM_EVENT_TYPE={SEARCH_INPUT_CHANGE:"searchinputchange",PLAIN_INPUT_CHANGE:"plaininputchange",FORM_SELECT_CHANGE:"formselectchange"};var v=window.devicePixelRatio||1,g=Math.round(v),w=g+2,E=w+2,m=g/2,O=function(){function t(e){p(this,t),this.canvas=e,this.ctx=e.getContext("2d")}return d(t,null,[{key:"styleTransformCssPx",value:function(t){return t/this.dpr()}},{key:"srcTransformCssPx",value:function(t){return this.styleTransformCssPx(this.srcTransformStylePx(t))}},{key:"srcTransformStylePx",value:function(t){return this.rounding(t*this.dpr())}},{key:"rounding",value:function(t){return Math.round(t)}},{key:"radian",value:function(t){return-t*(Math.PI/180)}},{key:"dpr",value:function(){return v}},{key:"dprUpdate",value:function(){v=window.devicePixelRatio||1,g=Math.round(v),E=(w=g+2)+2,m=g/2}}]),d(t,[{key:"attr",value:function(t){for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];("string"==typeof n||n instanceof String)&&(n=n.trim()),this.ctx[e]!==n&&(this.ctx[e]=n)}return this}},{key:"resize",value:function(e,n){var r=this.canvas;return r.width=t.srcTransformStylePx(e),r.height=t.srcTransformStylePx(n),r.style.width="".concat(r.width/t.dpr(),"px"),r.style.height="".concat(r.height/t.dpr(),"px"),this}}]),t}(),T=function(t){function e(t){var n;return p(this,e),(n=s(this,f(e).call(this,t))).lineWidthType=e.LINE_WIDTH_TYPE.low,n.lineColor="#000000",n}return h(e,t),d(e,null,[{key:"offsetToLineInside",value:function(t){return g>1?t-g/2:t-1}}]),d(e,[{key:"corsLine",value:function(t,n){var r=this,o=l(t,2),i=o[0],c=o[1],a=l(n,2),u=a[0],s=a[1],f=this.lineWidthType,h=this.lineColor,y=g;switch(f){case e.LINE_WIDTH_TYPE.medium:y=w;break;case e.LINE_WIDTH_TYPE.low:y=g;break;case e.LINE_WIDTH_TYPE.high:y=E}this.attr({strokeStyle:h,lineWidth:y}),this.polyStroke((function(t){var e=l(t,2),n=e[0],o=e[1];return[O.rounding(n+r.getOffsetX())-m,O.rounding(o+r.getOffsetY())-m]}),[i,c],[u,s])}},{key:"setLineColor",value:function(t){this.lineColor=t}},{key:"setLineWidthType",value:function(t){this.lineWidthType=t}},{key:"horizonLine",value:function(t,e){var n=l(t,2),r=n[0],o=n[1],i=l(e,2),c=i[0],a=i[1];if(o!==a)throw new TypeError("Error Horizon Line");this.corsLine([r,o],[c,a])}},{key:"verticalLine",value:function(t,e){var n=l(t,2),r=n[0],o=n[1],i=l(e,2),c=i[0],a=i[1];if(r!==c)throw new TypeError("Error Vertical Line");this.corsLine([r,o],[c,a])}}]),e}(function(t){function e(){return p(this,e),s(this,f(e).apply(this,arguments))}return h(e,t),d(e,[{key:"line",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.polyStroke.apply(this,[function(e){var n=l(e,2),r=n[0],o=n[1];return[t.transformLinePx(O.rounding(r+t.getOffsetX())),t.transformLinePx(O.rounding(o+t.getOffsetY()))]}].concat(n)),this}},{key:"transformLinePx",value:function(t){return this.ctx.lineWidth%2==0?t:t-.5}}]),e}(function(t){function e(t){var n;return p(this,e),(n=s(this,f(e).call(this,t))).offsetX=0,n.offsetY=0,n}return h(e,t),d(e,[{key:"offset",value:function(t,e){this.offsetX=t,this.offsetY=e}},{key:"getOffsetX",value:function(){return this.offsetX}},{key:"getOffsetY",value:function(){return this.offsetY}},{key:"fillText",value:function(){throw TypeError("child impl")}},{key:"fillRect",value:function(){throw TypeError("child impl")}},{key:"rect",value:function(){throw TypeError("child impl")}},{key:"drawImage",value:function(){throw TypeError("child impl")}}]),e}(function(t){function e(){return p(this,e),s(this,f(e).apply(this,arguments))}return h(e,t),d(e,[{key:"polyStroke",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t){return t},e=this.ctx;if((arguments.length<=1?0:arguments.length-1)>1){this.beginPath();var n=t(arguments.length<=1?void 0:arguments[1]),r=l(n,2),o=r[0],i=r[1];e.moveTo(o,i);for(var c=1,a=arguments.length<=1?0:arguments.length-1;c<a;c+=1){var u=t(c+1<1||arguments.length<=c+1?void 0:arguments[c+1]),s=l(u,2),f=s[0],h=s[1];e.lineTo(f,h)}e.stroke()}}},{key:"polyInFill",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t){return t},e=this.ctx;if((arguments.length<=1?0:arguments.length-1)>1){this.beginPath();var n=t(arguments.length<=1?void 0:arguments[1]),r=l(n,2),o=r[0],i=r[1];e.moveTo(o,i);for(var c=1,a=arguments.length<=1?0:arguments.length-1;c<a;c+=1){var u=t(c+1<1||arguments.length<=c+1?void 0:arguments[c+1]),s=l(u,2),f=s[0],h=s[1];e.lineTo(f,h)}e.fill()}}},{key:"fullRect",value:function(){var t=this.canvas,e=t.width,n=t.height;return this.ctx.fillRect(0,0,e,n),this}},{key:"rotate",value:function(t){return a(f(e.prototype),"rotate",this).call(this,O.radian(t)),this}}]),e}(function(t){function e(t){var n;return p(this,e),(n=s(this,f(e).call(this,t))).dash=[],n}return h(e,t),d(e,[{key:"beginPath",value:function(){return this.ctx.beginPath(),this}},{key:"measureText",value:function(t){return this.ctx.measureText(t)}},{key:"save",value:function(){return this.ctx.save(),this}},{key:"restore",value:function(){return this.ctx.restore(),this}},{key:"fill",value:function(){return this.ctx.fill(),this}},{key:"clip",value:function(){return this.ctx.clip(),this}},{key:"setLineDash",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this.ctx;return this.dash=t,e.setLineDash(t),this}},{key:"scale",value:function(t,e){return this.ctx.scale(t,e),this}},{key:"translate",value:function(t,e){return this.ctx.translate(t,e),this}},{key:"rotate",value:function(t){return this.ctx.rotate(t),this}}]),e}(O)))));T.LINE_WIDTH_TYPE={low:"low",medium:"medium",high:"high"};var x=function(t){function e(){return p(this,e),s(this,f(e).apply(this,arguments))}return h(e,t),d(e,[{key:"fillText",value:function(t,n,r){return n+=this.getOffsetX(),r+=this.getOffsetY(),this.ctx.fillText(t,e.rounding(n),e.rounding(r)),this}},{key:"fillPath",value:function(t){var e=this;return this.polyInFill.apply(this,[function(t){var n=t.x,r=t.y;return[O.rounding(n+e.getOffsetX()),O.rounding(r+e.getOffsetY())]}].concat(c(t.points))),this}},{key:"fillRect",value:function(t,n,r,o){return t+=this.getOffsetX(),n+=this.getOffsetY(),this.ctx.fillRect(e.rounding(t),e.rounding(n),e.rounding(r),e.rounding(o)),this}},{key:"rect",value:function(t,n,r,o){return t+=this.getOffsetX(),n+=this.getOffsetY(),this.ctx.rect(e.rounding(t),e.rounding(n),e.rounding(r),e.rounding(o)),this}},{key:"copyImage",value:function(t,n,r,o,i,c,l,a){var u=this.ctx;return i+=this.getOffsetX(),t+=this.getOffsetX(),c+=this.getOffsetY(),n+=this.getOffsetY(),u.drawImage(this.canvas,e.rounding(t),e.rounding(n),e.rounding(r),e.rounding(o),e.rounding(i),e.rounding(c),e.rounding(l),e.rounding(a)),this}},{key:"drawImage",value:function(t,n,r,o,i,c,l,a,u){var s=this.ctx;return c+=this.getOffsetX(),l+=this.getOffsetY(),s.drawImage(t,e.rounding(n),e.rounding(r),e.rounding(o),e.rounding(i),e.rounding(c),e.rounding(l),e.rounding(a),e.rounding(u)),this}}]),e}(T);function _(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var c,l=t[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function k(){return(65536*(1+Math.random())|0).toString(16).substring(1)}var C=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],P=1,R=2,j=3,L=5,I=6,A=7,N=8,V=9,D=10,M=11,W=12,B=13,Y=14,H=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,n=null,r=[{key:"isWindows",value:function(){return/windows|win32/i.test(navigator.userAgent)}},{key:"isMac",value:function(){return/macintosh|mac os x/i.test(navigator.userAgent)}},{key:"isNotEmptyObject",value:function(e){return!t.isEmptyObject(e)}},{key:"isEmptyObject",value:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}},{key:"isUnDef",value:function(t){return null==t}},{key:"isNotUnDef",value:function(t){return!this.isUnDef(t)}},{key:"isNumber",value:function(t){return/^(-?\d+.\d+)$|^(-?\d+)$/.test(t)}},{key:"isFraction",value:function(t){return/^\d+\/\d+$/.test(t)}},{key:"isFunction",value:function(e){return t.type(e)===I}},{key:"isArray",value:function(e){return t.type(e)===L}},{key:"isBlank",value:function(e){return!!t.isUnDef(e)||""===e.toString().trim()}},{key:"isPlainObject",value:function(e){return!t.isUnDef(e)&&Object.getPrototypeOf(e)===Object.getPrototypeOf({})}},{key:"isString",value:function(e){return t.type(e)===P}},{key:"isChildType",value:function(t,e){return t instanceof e}},{key:"toLowCase",value:function(t){return t.toLowerCase()}},{key:"type",value:function(t){var e=Object.prototype.toString.call(t);switch(e){case"[object Null]":return A;case"[object Undefined]":return N;case"[object String]":return P;case"[object Boolean]":return R;case"[object Number]":return j;case"[object Function]":return I;case"[object Array]":return L;case"[object Promise]":return V;case"[object GeneratorFunction]":return D;case"[object AsyncFunction]":return M;case"[object BigInt]":return W;case"[object Symbol]":return B;default:return Y}}},{key:"copy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isUnDef(e))return{};for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t.isUnDef(r)||0===r.length?e:(r.forEach((function(n){t.isUnDef(n)||Object.keys(n).forEach((function(r){var o=n[r];"string"==typeof o||"number"==typeof o||"boolean"==typeof o?e[r]=o:"function"!=typeof o&&!Array.isArray(o)&&t.isPlainObject(o)?(e[r]=e[r]||{},t.copy(e[r],o)):e[r]=o}))})),e)}},{key:"cloneDeep",value:function(t){var e=JSON.stringify(t);return JSON.parse(e)}},{key:"sum",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t},n=0,r=0;return Object.keys(t).forEach((function(o){n+=e(t[o],o),r+=1})),[n,r]}},{key:"parseFloat",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(e){return t.isNumber(e)?parseFloat(e):0}))},{key:"parseInt",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(e){return t.isNumber(e)?parseInt(e,10):0}))},{key:"stringAt",value:function(t){for(var e="",n=t;n>=C.length;)n/=C.length,n-=1,e+=C[parseInt(n,10)%C.length];return e+=C[t%C.length]}},{key:"indexAt",value:function(t){for(var e=0,n=0;n<t.length-1;n+=1){var r=t.charCodeAt(n)-65,o=t.length-1-n;e+=Math.pow(C.length,o)+C.length*r}return e+=t.charCodeAt(t.length-1)-65}},{key:"expr2xy",value:function(e){for(var n="",r="",o=0;o<e.length;o+=1)e.charAt(o)>="0"&&e.charAt(o)<="9"?r+=e.charAt(o):n+=e.charAt(o);return[t.indexAt(n),parseInt(r,10)-1]}},{key:"xy2expr",value:function(e,n){return"".concat(t.stringAt(e)).concat(n+1)}},{key:"expr2expr",value:function(e,n,r){var o=_(t.expr2xy(e),2),i=o[0],c=o[1];return t.xy2expr(i+n,c+r)}},{key:"minIf",value:function(t,e){return t<e?e:t}},{key:"keepLastIndex",value:function(t){if(window.getSelection){t.focus();var e=window.getSelection();e.selectAllChildren(t),e.collapseToEnd()}else if(document.selection){var n=document.selection.createRange();n.moveToElementText(t),n.collapse(!1),n.select()}}},{key:"trim",value:function(t){return this.isBlank(t)?"":t.trim()}},{key:"now",value:function(){return Date.now().toString()}},{key:"viewPort",value:function(){return{width:window.innerWidth,height:window.innerHeight}}},{key:"exitFullscreen",value:function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}},{key:"fullScreen",value:function(t){t.el&&(t=t.el),t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}},{key:"isFull",value:function(){return!!(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)}},{key:"uuid",value:function(){return"".concat(k()+k()).concat(k()).concat(k()).concat(k()).concat(k()).concat(k()).concat(k())}},{key:"getExplorerInfo",value:function(){var t=window.navigator.userAgent.toLowerCase();return t.indexOf("firefox")>=0?{type:"Firefox",version:t.match(/firefox\/([\d.]+)/)[1]}:t.indexOf("chrome")>=0?{type:"Chrome",version:t.match(/chrome\/([\d.]+)/)[1]}:t.indexOf("opera")>=0?{type:"Opera",version:t.match(/opera.([\d.]+)/)[1]}:t.indexOf("Safari")>=0?{type:"Safari",version:t.match(/version\/([\d.]+)/)[1]}:t.indexOf("msie")>=0?{type:"IE",version:t.match(/msie ([\d.]+)/)[1]}:void 0}},{key:"ptToPx",value:function(t){return x.dpr()/72*t}},{key:"pxToPt",value:function(t){return t/(x.dpr()/72)}}],n&&S(e.prototype,n),r&&S(e,r),t}();function F(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function U(t,e,n){return e&&F(t.prototype,e),n&&F(t,n),t}H.EMPTY="",H.Nul=null,H.Undef=void 0,H.noop=function(){};var G=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof e?(this.el=document.createElement(e),this.el.className=n):this.el=e,this.el.data=[]}return U(t,null,[{key:"wrap",value:function(e){if(H.isArray(e)){var n=[];return e.forEach((function(e){e instanceof t?n.push(e):n.push(new t(e))})),n}return new t(e)}}]),U(t,[{key:"children",value:function(){for(var e=this,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return 0===arguments.length?t.wrap(this.el.childNodes):(r.forEach((function(t){return e.append(t)})),this)}},{key:"append",value:function(t){this.el.appendChild(t.el)}},{key:"removeClass",value:function(t){return this.el.classList.remove(t),this}},{key:"addClass",value:function(t){return this.el.classList.add(t),this}},{key:"hasClass",value:function(t){return this.el.classList.contains(t)}},{key:"data",value:function(t,e){return void 0!==e?(this.el.data[t]=e,this):this.el.data[t]}},{key:"offset",value:function(t){var e=this;if(void 0!==t)return Object.keys(t).forEach((function(n){e.css(n,"".concat(t[n],"px"))})),this;var n=this.el;return{top:n.offsetTop,left:n.offsetLeft,height:n.offsetHeight,width:n.offsetWidth}}},{key:"parent",value:function(){return t.wrap(this.el.parentNode)}},{key:"box",value:function(){return this.el.getBoundingClientRect()}},{key:"first",value:function(){return t.wrap(this.el.firstChild)}},{key:"last",value:function(){return t.wrap(this.el.lastChild)}},{key:"remove",value:function(t){return this.el.removeChild(t.el||t),this}},{key:"contains",value:function(t){return this.el.contains(t.el)}},{key:"prev",value:function(){return t.wrap(this.el.previousSibling)}},{key:"next",value:function(){return t.wrap(this.el.nextSibling)}},{key:"active",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"active";return t?this.addClass(e):this.removeClass(e),this}},{key:"text",value:function(t){return void 0!==t?(this.el.innerText=t,this):this.el.innerText}},{key:"html",value:function(t){return void 0!==t?(this.el.innerHTML=t,this):this.el.innerHTML}},{key:"focus",value:function(){this.el.focus()}},{key:"removeAttr",value:function(t){return this.el.removeAttribute(t),this}},{key:"attr",value:function(t,e){var n=this;if(void 0!==e)this.el.setAttribute(t,e);else{if("string"==typeof t)return this.el.getAttribute(t);Object.keys(t).forEach((function(e){n.el.setAttribute(e,t[e])}))}return this}},{key:"val",value:function(t){return void 0!==t?(this.el.value=t,this):this.el.value}},{key:"cssRemoveKeys",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach((function(e){return t.el.style.removeProperty(e)})),this}},{key:"css",value:function(t,e){var n=this;return void 0===e&&"string"!=typeof t?(Object.keys(t).forEach((function(e){n.el.style[e]=t[e]})),this):void 0!==e?(this.el.style[t]=e,this):this.el.style[t]}},{key:"computedStyle",value:function(){return window.getComputedStyle(this.el,null)}},{key:"show",value:function(){var t=this.computedStyle();return t&&"block"!==t.display&&this.css("display","block"),this}},{key:"hide",value:function(){var t=this.computedStyle();return t&&"none"!==t.display&&this.css("display","none"),this}},{key:"trigger",value:function(t,e){var n=new CustomEvent(t,{detail:e,bubbles:!0,cancelable:!1});this.el.dispatchEvent(n)}},{key:"find",value:function(e){var n=this.el.querySelectorAll(e);if(n&&1===n.length)return new t(n[0]);var r=[];if(n){var o=!0,i=!1,c=void 0;try{for(var l,a=n[Symbol.iterator]();!(o=(l=a.next()).done);o=!0){var u=l.value;r.push(new t(u))}}catch(t){i=!0,c=t}finally{try{o||null==a.return||a.return()}finally{if(i)throw c}}}return r}},{key:"sibling",value:function(){for(var e=this.el,n=[];null!==(e=e.previousElementSibling);)n.push(new t(e));for(e=this.el;null!==(e=e.nextElementSibling);)n.push(new t(e));return n}},{key:"is",value:function(t){return this.el===t.el}},{key:"after",value:function(t){this.el.after(t.el)}},{key:"before",value:function(t){this.el.before(t.el)}},{key:"empty",value:function(){this.html("")}}]),t}(),z=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new G(t,e)};function X(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function J(t,e,n){return e&&Z(t.prototype,e),n&&Z(t,n),t}var K=new(function(){function t(){X(this,t),this.pool=[]}return J(t,[{key:"unbind",value:function(t,e,n,r){t instanceof G&&(t=t.el);var o=this.remove(t,e,n,r);o.length?o.forEach((function(e){t.removeEventListener(e.type,e.callback,e.option)})):t.removeEventListener(e,n,r)}},{key:"bind",value:function(t,e,n,r){t instanceof G&&(t=t.el),this.pool.push({ele:t,type:e,callback:n,option:r}),t.addEventListener(e,n,r)}},{key:"remove",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=[],i=[];return this.pool.forEach((function(c){var l=t===c.ele,a=null===r||r===c.option,u="*"===e||e===c.type,s=null===n||n===c.callback;l&&u&&s&&a?i.push(c):o.push(c)})),this.pool=o,i}},{key:"multipleUnbind",value:function(t,e,n,r){var o=this;t.forEach((function(t){o.unbind(t,e,n,r)}))}},{key:"multipleBind",value:function(t,e,n,r){var o=this;t.forEach((function(t){o.bind(t,e,n,r)}))}}]),t}()),$=function(){function t(){X(this,t)}return J(t,null,[{key:"unbind",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Array.isArray(t)?K.multipleUnbind(t,e,n,r):K.unbind(t,e,n,r)}},{key:"bind",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Array.isArray(t)?K.multipleBind(t,e,n,r):K.bind(t,e,n,r)}},{key:"mouseDoubleClick",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},o=0,i=0,c=0;t.bind(e,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(t){var e=Date.now(),r=t.pageX,l=t.pageY;e-o<=300&&r===i&&l===c?(n(t),o=0,i=0,c=0):(i=r,c=l,o=e)}))}},{key:"mouseMoveUp",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=function(t){n(t),t.stopPropagation()},c=function n(c){t.unbind(e,r.SYSTEM_EVENT_TYPE.MOUSE_MOVE,i,!0),t.unbind(e,r.SYSTEM_EVENT_TYPE.MOUSE_UP,n,!0),o(c),c.stopPropagation()};t.bind(e,r.SYSTEM_EVENT_TYPE.MOUSE_MOVE,i,!0),t.bind(e,r.SYSTEM_EVENT_TYPE.MOUSE_UP,c,!0)}}]),t}();function q(t){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function et(t,e,n){return e&&tt(t.prototype,e),n&&tt(t,n),t}function nt(t,e){return!e||"object"!==q(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rt(t){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ot(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&it(t,e)}function it(t,e){return(it=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}window.XEventPool=K;var ct=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div";return Q(this,e),t=nt(this,"string"==typeof n?rt(e).call(this,r,"".concat(o,"-widget ").concat(n)):rt(e).call(this,n)),nt(t)}return ot(e,t),et(e,[{key:"eventXy",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n=e.box(),r=n.top,o=n.left;return{x:t.pageX-o,y:t.pageY-r}}},{key:"attach",value:function(t){this.children(t),t.onAttach(this)}},{key:"closestClass",value:function(t){for(var e=this;!z(document.body).is(e);){if(e.hasClass(t))return e;e=e.parent()}return null}},{key:"destroy",value:function(){$.unbind(this)}}]),e}(function(t){function e(){return Q(this,e),nt(this,rt(e).apply(this,arguments))}return ot(e,t),et(e,[{key:"onAttach",value:function(){}}]),e}(G));function lt(t){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function at(t,e){return!e||"object"!==lt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ut(t){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function st(t,e){return(st=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ft=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),at(this,ut(e).call(this,"".concat(o,"-layer ").concat(t)))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&st(t,e)}(e,t),e}(ct);function ht(t){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yt(t,e){return!e||"object"!==ht(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pt(t){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bt(t,e){return(bt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var dt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=yt(this,pt(e).call(this,"".concat(o,"-vertical-layer")))).options=H.copy({style:{}},t),n.css(n.options.style),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bt(t,e)}(e,t),e}(ft);function vt(t){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gt(t,e){return!e||"object"!==vt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wt(t){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Et(t,e){return(Et=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var mt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=gt(this,wt(e).call(this,"".concat(o,"-vertical-layer-element")))).options=H.copy({style:{flexGrow:"0"}},t),n.css(n.options.style),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Et(t,e)}(e,t),e}(ft);function Ot(t){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xt(t,e){return!e||"object"!==Ot(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _t(t){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function St(t,e){return(St=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var kt=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=xt(this,_t(e).call(this,"".concat(o,"-icon")))).iconNameEl=z("div","".concat(o,"-icon-img ").concat(n)),t.children(t.iconNameEl),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&St(t,e)}(e,t),n=e,(r=[{key:"setWidth",value:function(t){this.iconNameEl.css("width","".concat(t,"px"))}},{key:"setHeight",value:function(t){this.iconNameEl.css("height","".concat(t,"px"))}}])&&Tt(n.prototype,r),i&&Tt(n,i),e}(ct);function Ct(t){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pt(t,e){return!e||"object"!==Ct(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Rt(t){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jt(t,e){return(jt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Lt=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Pt(this,Rt(e).call(this,"".concat(o,"-tools-item ").concat(t)))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jt(t,e)}(e,t),e}(ct);function It(t){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function At(t,e){return!e||"object"!==It(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Nt(t){return(Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vt(t,e){return(Vt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Dt=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=At(this,Nt(e).call(this,"".concat(o,"-tools-undo")))).icon=new kt("undo"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vt(t,e)}(e,t),e}(Lt);function Mt(t){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wt(t,e){return!e||"object"!==Mt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bt(t){return(Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yt(t,e){return(Yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ht=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Wt(this,Bt(e).call(this,"".concat(o,"-tools-redo")))).icon=new kt("redo"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yt(t,e)}(e,t),e}(Lt);function Ft(t){return(Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Gt(t,e){return!e||"object"!==Ft(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function zt(t){return(zt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xt(t,e){return(Xt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zt=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Gt(this,zt(e).call(this,"".concat(o,"-tools-point-format")))).icon=new kt("point-format"),t.sheets=[],t.children(t.icon),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xt(t,e)}(e,t),n=e,(r=[{key:"addSheet",value:function(t){this.sheets.push(t)}},{key:"removeSheet",value:function(t){for(var e=0;e<this.sheets.length;e+=1)if(this.sheets[e]===t)return void this.sheets.splice(e,1)}},{key:"includeSheet",value:function(t){for(var e=0;e<this.sheets.length;e+=1)if(this.sheets[e]===t)return!0;return!1}}])&&Ut(n.prototype,r),i&&Ut(n,i),e}(Lt);function Jt(t){return(Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kt(t,e){return!e||"object"!==Jt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $t(t){return($t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qt(t,e){return(qt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qt=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Kt(this,$t(e).call(this,"".concat(o,"-tools-clear-format")))).icon=new kt("clear-format"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qt(t,e)}(e,t),e}(Lt);function te(t){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ee(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ne(t,e){return!e||"object"!==te(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function re(t){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function oe(t,e){return(oe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ie=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ne(this,re(e).call(this,"".concat(o,"-tools-drop-down-item ").concat(t)))).drop=z("div","".concat(o,"-tools-drop-down-item-mark")),n.title=z("div","".concat(o,"-tools-drop-down-item-title")),n.drop.children(new kt("arrow-down")),n.children(n.title),n.children(n.drop),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&oe(t,e)}(e,t),n=e,(r=[{key:"setTitle",value:function(t){this.title.text(t)}},{key:"setIcon",value:function(t){this.title.html(""),this.title.children(t)}},{key:"setWidth",value:function(t){this.title.css("width","".concat(t,"px"))}},{key:"setEllipsis",value:function(){this.title.css("overflow","hidden"),this.title.css("text-overflow","ellipsis"),this.title.css("white-space","nowrap")}},{key:"removeEllipsis",value:function(){this.title.cssRemoveKeys("overflow"),this.title.cssRemoveKeys("text-overflow"),this.title.cssRemoveKeys("white-space")}}])&&ee(n.prototype,r),i&&ee(n,i),e}(Lt);function ce(t){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function le(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ae(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ue(t,e,n){return(ue="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=se(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function se(t){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fe(t,e){return(fe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var he=H.Nul,ye=[],pe=function(t){function e(t){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,i=se(e).call(this,"".concat(o,"-el-pop-up")),(n=!i||"object"!==ce(i)&&"function"!=typeof i?ae(r):i).options=H.copy({el:H.Nul,autoWidth:!1,autoHeight:!1,position:e.POPUP_POSTION.TB},t),n.direction=H.Undef,n.status=!1,n.location=0,n.spaces=0,n.elPopUpDownHandle=function(){n.close()},ye.push(ae(n)),n.bind(),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fe(t,e)}(e,t),n=e,c=[{key:"removeInstance",value:function(t){var e=[];ye.forEach((function(n){n!==t&&e.push(n)})),ye=e}},{key:"closeAll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];ye.forEach((function(e){-1===t.indexOf(e)&&e.close()}))}},{key:"setRoot",value:function(t){t=t.el?z(t.el):z(t),he=t}}],(i=[{key:"open",value:function(){!1===this.status&&he&&(he.children(this),this.status=!0),this.elPopUpPosition(),this.elPopUpAutosize(),this.elPopUpLocation()}},{key:"close",value:function(){!0===this.status&&he&&(he.remove(this),this.status=!1)}},{key:"unbind",value:function(){$.unbind(this),$.unbind(document,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,this.elPopUpDownHandle)}},{key:"bind",value:function(){$.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(t){t.stopPropagation()})),$.bind(document,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,this.elPopUpDownHandle)}},{key:"elPopUpAutosize",value:function(){var t=this.options,e=this.direction,n=this.spaces,r=t.autoWidth,o=t.autoHeight;if(r){this.css("width","initial"),this.css("overflow-x","initial");var i=this.box().width;switch(e){case"left":case"right":i>n&&(this.css("overflow-x","auto"),this.css("width","".concat(n,"px")))}}if(o){this.css("height","initial"),this.css("overflow-y","initial");var c=this.box().height;switch(e){case"top":case"bottom":c>n&&(this.css("overflow-y","auto"),this.css("height","".concat(n,"px")))}}}},{key:"elPopUpPosition",value:function(){var t=this.options,n=t.position,r=t.el.box(),o=window.innerWidth,i=window.innerHeight;switch(this.direction=H.Undef,this.spaces=0,this.location=0,n){case e.POPUP_POSTION.LR:var c=r.width,l=r.left,a=l,u=o-(l+c);a>u?(this.direction="left",this.spaces=a,this.location=l):(this.direction="right",this.spaces=u,this.location=l+c);break;case e.POPUP_POSTION.TB:var s=r.height,f=r.top,h=f,y=i-(f+s);h>y?(this.direction="top",this.spaces=h,this.location=f):(this.direction="bottom",this.spaces=y,this.location=f+s)}}},{key:"elPopUpLocation",value:function(){var t=this.direction,e=this.location,n=this.options.el,r=this.box(),o=n.box(),i=o.left,c=o.top,l=r.width,a=r.height;switch(t){case"left":this.css("top","".concat(c,"px")),this.css("left","".concat(e-l,"px"));break;case"right":this.css("top","".concat(c,"px")),this.css("left","".concat(e,"px"));break;case"top":this.css("left","".concat(i,"px")),this.css("top","".concat(e-a,"px"));break;case"bottom":this.css("left","".concat(i,"px")),this.css("top","".concat(e,"px"))}}},{key:"setEL",value:function(t){this.options.el=t}},{key:"destroy",value:function(){ue(se(e.prototype),"destroy",this).call(this),this.unbind()}}])&&le(n.prototype,i),c&&le(n,c),e}(ct);function be(t){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function de(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ve(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ge(t,e,n){return(ge="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=we(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function we(t){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ee(t,e){return(Ee=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}pe.POPUP_POSTION={TB:Symbol("上下位置"),LR:Symbol("左右位置")};var me=function(t){function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(r=we(e).call(this,"".concat(o,"-el-context-menu ").concat(i)))||"object"!==be(r)&&"function"!=typeof r?ve(n):r).options=H.copy({},c),t.menus=[],t.elPopUp=new pe(t.options),t.elPopUp.children(ve(t)),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ee(t,e)}(e,t),n=e,(r=[{key:"isClose",value:function(){return!1===this.elPopUp.status}},{key:"addItem",value:function(t){return this.menus.push(t),this.children(t),this}},{key:"open",value:function(){return this.elPopUp.open(),this}},{key:"close",value:function(){return this.elPopUp.close(),this}},{key:"setEL",value:function(t){this.elPopUp.setEL(t)}},{key:"destroy",value:function(){ge(we(e.prototype),"destroy",this).call(this),this.elPopUp.destroy()}}])&&de(n.prototype,r),i&&de(n,i),e}(ct);function Oe(t){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Te(t,e){return!e||"object"!==Oe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xe(t){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _e(t,e){return(_e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Se=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Te(this,xe(e).call(this,"".concat(o,"-el-context-menu-item hover ").concat(t)))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_e(t,e)}(e,t),e}(ct);function ke(t){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pe(t){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Re(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function je(t,e){return(je=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Le=[],Ie=function(t){function e(t,n){var r,i,c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,(r=!(c=Pe(e).call(this,"".concat(o,"-format-context-menu-item")))||"object"!==ke(c)&&"function"!=typeof c?Re(i):c).title=t,r.desc=n,r.icon=new kt("checked"),r.iconElement=z("div","".concat(o,"-format-context-menu-item-icon")),r.iconElement.children(r.icon),r.titleElement=z("div","".concat(o,"-format-context-menu-item-title")),r.descElement=z("div","".concat(o,"-format-context-menu-item-desc")),r.titleElement.text(t),r.descElement.text(n),r.children(r.iconElement),r.children(r.titleElement),r.children(r.descElement),Le.push(Re(r)),r}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&je(t,e)}(e,t),n=e,(r=[{key:"setTitle",value:function(t){this.titleElement.text(t)}},{key:"setDesc",value:function(t){this.descElement.text(t)}},{key:"setActive",value:function(){Le.forEach((function(t){t.removeClass("active")})),this.addClass("active")}}])&&Ce(n.prototype,r),i&&Ce(n,i),e}(Se);function Ae(t){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ne(t,e){return!e||"object"!==Ae(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ve(t){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function De(t,e){return(De=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Me=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ne(this,Ve(e).call(this,"".concat(o,"-el-context-menu-item-divider")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&De(t,e)}(e,t),e}(ct);function We(t){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Be(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ye(t,e){return!e||"object"!==We(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function He(t,e,n){return(He="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Fe(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Fe(t){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ue(t,e){return(Ue=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ge=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Ye(this,Fe(e).call(this,"".concat(o,"-format-context-menu"),H.copy({onUpdate:function(){}},n)))).items=[new Ie("常规","").data("type","default"),new Ie("文本","").data("type","text"),new Me,new Ie("数值","0.59").data("type","number"),new Ie("百分比","90.00%").data("type","percentage"),new Ie("分数","1/2").data("type","fraction"),new Ie("科学计数","9.50e-01").data("type","ENotation"),new Me,new Ie("人民币","￥5.00").data("type","rmb"),new Ie("港币","HK5.00").data("type","hk"),new Ie("美元","$5.00").data("type","dollar"),new Me,new Ie("日期","2018/4/18").data("type","date1"),new Ie("日期","4月18日").data("type","date2"),new Ie("日期","2018年4月").data("type","date3"),new Ie("日期","2018年4月18日").data("type","date4"),new Ie("日期","2018/4/18 14:30:30").data("type","date5"),new Ie("时间","14:30:30").data("type","time")],t.items.forEach((function(e){t.addItem(e)})),t.init(),t.bind(),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ue(t,e)}(e,t),n=e,(i=[{key:"init",value:function(){var t=this.options,e=this.items,n=t.el,r=e[0];n.setTitle(r.title),r.setActive()}},{key:"update",value:function(t,e){this.options.onUpdate(t,e),this.close()}},{key:"unbind",value:function(){this.items.forEach((function(t){t instanceof Ie&&t.data("type")&&$.unbind(t,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN)}))}},{key:"bind",value:function(){var t=this;this.items.forEach((function(e){e instanceof Ie&&e.data("type")&&$.bind(e,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.update(e.data("type"),e.title),e.setActive()}))}))}},{key:"setActiveByType",value:function(t){this.items.forEach((function(e){e.data("type")===t&&e.setActive()}))}},{key:"destroy",value:function(){He(Fe(e.prototype),"destroy",this).call(this),this.unbind()}}])&&Be(n.prototype,i),c&&Be(n,c),e}(me);function ze(t){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ze(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Je(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ke(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $e(t,e,n){return($e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qe(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function qe(t){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qe(t,e){return(Qe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var tn=function(t){function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{contextMenu:{}};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(r=qe(e).call(this,"".concat(o,"-tools-format")))||"object"!==ze(r)&&"function"!=typeof r?Ke(n):r).options=i,t.setTitle("常规"),t.setWidth(50),t.setEllipsis(),t.formatContextMenu=new Ge(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xe(Object(n),!0).forEach((function(e){Ze(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({el:Ke(t)},t.options.contextMenu)),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qe(t,e)}(e,t),n=e,(r=[{key:"destroy",value:function(){$e(qe(e.prototype),"destroy",this).call(this),this.formatContextMenu.destroy()}}])&&Je(n.prototype,r),i&&Je(n,i),e}(ie);function en(t){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rn(t){return(rn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function on(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cn(t,e){return(cn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ln=[],an=function(t){function e(t){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(i=rn(e).call(this,"".concat(o,"-font-context-menu-item")))||"object"!==en(i)&&"function"!=typeof i?on(r):i).title=t,n.icon=new kt("checked"),n.iconElement=z("div","".concat(o,"-font-context-menu-item-icon")),n.iconElement.children(n.icon),n.titleElement=z("div","".concat(o,"-font-context-menu-item-title")),n.titleElement.text(t),n.titleElement.css("font-family",t),n.children(n.iconElement),n.children(n.titleElement),ln.push(on(n)),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cn(t,e)}(e,t),n=e,(r=[{key:"setActive",value:function(){ln.forEach((function(t){t.removeClass("active")})),this.addClass("active")}},{key:"setTitle",value:function(t){this.title=t,this.titleElement.text(t)}}])&&nn(n.prototype,r),i&&nn(n,i),e}(Se);function un(t){return(un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fn(t,e){return!e||"object"!==un(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hn(t,e,n){return(hn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function yn(t){return(yn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pn(t,e){return(pn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var bn=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=fn(this,yn(e).call(this,"".concat(o,"-font-context-menu"),H.copy({onUpdate:function(){}},n)))).items=[new an("Arial"),new an("Helvetica"),new an("Source Sans Pro"),new an("Comic Sans Ms"),new an("Courier New"),new an("Verdana"),new an("Lalo")],t.items.forEach((function(e){t.addItem(e)})),t.setActiveByType(t.items[0].title),t.bind(),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pn(t,e)}(e,t),n=e,(i=[{key:"update",value:function(t){this.options.onUpdate(t),this.close()}},{key:"unbind",value:function(){this.items.forEach((function(t){$.unbind(t)}))}},{key:"bind",value:function(){var t=this;this.items.forEach((function(e){$.bind(e,r.SYSTEM_EVENT_TYPE.CLICK,(function(){t.update(e.title),e.setActive()}))}))}},{key:"setActiveByType",value:function(t){this.items.forEach((function(e){e.title===t&&e.setActive()}))}},{key:"destroy",value:function(){hn(yn(e.prototype),"destroy",this).call(this),this.unbind()}}])&&sn(n.prototype,i),c&&sn(n,c),e}(me);function dn(t){return(dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function gn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function En(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mn(t,e,n){return(mn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=On(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function On(t){return(On=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tn(t,e){return(Tn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xn=function(t){function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{contextMenu:{}};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(r=On(e).call(this,"".concat(o,"-tools-font")))||"object"!==dn(r)&&"function"!=typeof r?En(n):r).options=i,t.setTitle("Arial"),t.setWidth(50),t.setEllipsis(),t.fontContextMenu=new bn(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vn(Object(n),!0).forEach((function(e){gn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({el:En(t)},t.options.contextMenu)),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tn(t,e)}(e,t),n=e,(r=[{key:"destroy",value:function(){mn(On(e.prototype),"destroy",this).call(this),this.fontContextMenu.destroy()}}])&&wn(n.prototype,r),i&&wn(n,i),e}(ie);function _n(t){return(_n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sn(t,e){return!e||"object"!==_n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function kn(t){return(kn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cn(t,e){return(Cn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Pn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Sn(this,kn(e).call(this,"".concat(o,"-font-size-context-menu-item")))).size=t,n.titleElement=z("div","".concat(o,"-font-size-context-menu-item-title")),n.titleElement.text(t),n.titleElement.css("text-align","center"),n.children(n.titleElement),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cn(t,e)}(e,t),e}(Se);function Rn(t){return(Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ln(t,e){return!e||"object"!==Rn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function In(t,e,n){return(In="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=An(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function An(t){return(An=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nn(t,e){return(Nn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Vn=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Ln(this,An(e).call(this,"".concat(o,"-font-size-context-menu"),H.copy({onUpdate:function(){}},n)))).items=[new Pn(6),new Pn(7),new Pn(8),new Pn(9),new Pn(10),new Pn(11),new Pn(12),new Pn(14),new Pn(15),new Pn(18),new Pn(24),new Pn(36)],t.items.forEach((function(e){t.addItem(e)})),t.bind(),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nn(t,e)}(e,t),n=e,(i=[{key:"unbind",value:function(){this.items.forEach((function(t){$.unbind(t,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN)}))}},{key:"bind",value:function(){var t=this;this.items.forEach((function(e){$.bind(e,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.update(e.size)}))}))}},{key:"update",value:function(t){this.options.onUpdate(t),this.close()}},{key:"destroy",value:function(){In(An(e.prototype),"destroy",this).call(this),this.unbind()}}])&&jn(n.prototype,i),c&&jn(n,c),e}(me);function Dn(t){return(Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Wn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hn(t,e,n){return(Hn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Fn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Fn(t){return(Fn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Un(t,e){return(Un=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Gn=function(t){function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{contextMenu:{}};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(r=Fn(e).call(this,"".concat(o,"-tools-font-size")))||"object"!==Dn(r)&&"function"!=typeof r?Yn(n):r).options=i,t.setTitle("10"),t.setWidth(30),t.setEllipsis(),t.fontSizeContextMenu=new Vn(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Mn(Object(n),!0).forEach((function(e){Wn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({el:Yn(t)},t.options.contextMenu)),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Un(t,e)}(e,t),n=e,(r=[{key:"destroy",value:function(){Hn(Fn(e.prototype),"destroy",this).call(this),this.fontSizeContextMenu.destroy()}}])&&Bn(n.prototype,r),i&&Bn(n,i),e}(ie);function zn(t){return(zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xn(t,e){return!e||"object"!==zn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zn(t){return(Zn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jn(t,e){return(Jn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Kn=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Xn(this,Zn(e).call(this,"".concat(o,"-tools-font-bold")))).icon=new kt("font-bold"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jn(t,e)}(e,t),e}(Lt);function $n(t){return($n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qn(t,e){return!e||"object"!==$n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qn(t){return(Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tr(t,e){return(tr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var er=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=qn(this,Qn(e).call(this,"".concat(o,"-tools-font-italic")))).icon=new kt("font-italic"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tr(t,e)}(e,t),e}(Lt);function nr(t){return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rr(t,e){return!e||"object"!==nr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function or(t){return(or=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ir(t,e){return(ir=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var cr=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=rr(this,or(e).call(this,"".concat(o,"-tools-under-line")))).icon=new kt("under-line"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ir(t,e)}(e,t),e}(Lt);function lr(t){return(lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ar(t,e){return!e||"object"!==lr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ur(t){return(ur=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sr(t,e){return(sr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fr=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=ar(this,ur(e).call(this,"".concat(o,"-tools-font-strike")))).icon=new kt("font-strike"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sr(t,e)}(e,t),e}(Lt);function hr(t){return(hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yr(t,e){return!e||"object"!==hr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pr(t){return(pr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function br(t,e){return(br=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var dr=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=yr(this,pr(e).call(this,"".concat(o,"-font-color-context-menu-item")))).title=t,r.icon=n,n&&(r.iconElement=z("div","".concat(o,"-font-color-context-menu-item-icon")),r.iconElement.children(r.icon),r.children(r.iconElement)),t&&(r.titleElement=z("div","".concat(o,"-font-color-context-menu-item-title")),r.titleElement.text(t),r.children(r.titleElement)),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&br(t,e)}(e,t),e}(Se);function vr(t){return(vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Er(t,e){return(Er=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function mr(t,e,n){return(mr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Or(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Or(t){return(Or=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Tr=H.Undef,xr=[],_r=function(t){function e(t){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,n=!(i=Or(e).call(this,"".concat(o,"-drag-panel")))||"object"!==vr(i)&&"function"!=typeof i?wr(r):i,xr.push(wr(n)),n.options=H.copy({position:e.DRAG_PANEL_POSITION.CENTER},t),n.status=!1,n.mask=z("div","".concat(o,"-drag-panel-mask")),n.content=z("div","".concat(o,"-drag-panel-content")),mr(Or(e.prototype),"children",wr(n)).call(wr(n),n.content),n.bind(),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Er(t,e)}(e,t),n=e,c=[{key:"removeInstance",value:function(t){var e=[];xr.forEach((function(n){n!==t&&e.push(n)})),xr=e}},{key:"closeAll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];xr.forEach((function(e){-1===t.indexOf(e)&&e.close()}))}},{key:"setRoot",value:function(t){t=t.el?z(t.el):z(t),Tr=t}}],(i=[{key:"open",value:function(){if(!1===this.status&&Tr){var t=this.mask;Tr.children(t),Tr.children(this),this.dragPanelLocation(),this.status=!0}return this}},{key:"close",value:function(){if(!0===this.status&&Tr){var t=this.mask;Tr.remove(this),Tr.remove(t),this.status=!1}return this}},{key:"unbind",value:function(){var t=this.mask;$.unbind(t)}},{key:"bind",value:function(){var t=this,e=this.mask;$.bind(e,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.close(),e.stopPropagation()})),$.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){if(0===e.button){var n=t.eventXy(e,t);$.mouseMoveUp(z(document),(function(e){var r=e.pageY-n.y,o=e.pageX-n.x;t.offset({top:r,left:o}),e.stopPropagation()})),e.stopPropagation()}}))}},{key:"dragPanelLocation",value:function(){var t=this.options.position,n=H.viewPort(),r=n.width,o=n.height,i=this.box();switch(t){case e.DRAG_PANEL_POSITION.LEFT:case e.DRAG_PANEL_POSITION.RIGHT:case e.DRAG_PANEL_POSITION.TOP:break;case e.DRAG_PANEL_POSITION.CENTER:this.offset({left:r/2-i.width/2,top:o/2-i.height/2})}return this}},{key:"children",value:function(){var t;return(t=this.content).children.apply(t,arguments),this}},{key:"destroy",value:function(){mr(Or(e.prototype),"destroy",this).call(this),this.unbind(),e.removeInstance(this)}}])&&gr(n.prototype,i),c&&gr(n,c),e}(ct);function Sr(t){return(Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Cr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pr(t,e,n){return(Pr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Rr(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Rr(t){return(Rr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jr(t,e){return(jr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}_r.DRAG_PANEL_POSITION={LEFT:1,TOP:2,RIGHT:3,CENTER:4};var Lr=function(t){function e(t){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(i=Rr(e).call(this,"".concat(o,"-color-picker")))||"object"!==Sr(i)&&"function"!=typeof i?Cr(r):i).options=H.copy({selectCb:function(){}},t),n.dragPanel=new _r,n.color=[360,0,100],n.preViewColorPoint=z("div","".concat(o,"-color-picker-pre-view-color-point")),n.colorValueTips=z("div","".concat(o,"-color-picker-color-value-tips")),n.colorValueTips.text("十六进制颜色值"),n.colorInput=z("input","".concat(o,"-color-picker-color-input")),n.top=z("div","".concat(o,"-color-picker-top")),n.top.children(n.preViewColorPoint),n.top.children(n.colorValueTips),n.top.children(n.colorInput),n.selectColorPoint=z("div","".concat(o,"-color-picker-select-color-point")),n.selectColorArea1=z("div","".concat(o,"-color-picker-select-color-area area1")),n.selectColorArea2=z("div","".concat(o,"-color-picker-select-color-area area2")),n.selectColorArea3=z("div","".concat(o,"-color-picker-select-color-area area3")),n.center=z("div","".concat(o,"-color-picker-center")),n.center.children(n.selectColorArea1),n.center.children(n.selectColorArea2),n.center.children(n.selectColorArea3),n.center.children(n.selectColorPoint),n.colorHuxTips=z("div","".concat(o,"-color-picker-color-hux-tips")),n.colorBar=z("div","".concat(o,"-color-picker-color-bar")),n.colorBarPoint=z("div","".concat(o,"-color-picker-bar-point")),n.bottom=z("div","".concat(o,"-color-picker-bottom")),n.colorHuxTips.text("HUE"),n.colorBar.children(n.colorBarPoint),n.bottom.children(n.colorHuxTips),n.bottom.children(n.colorBar),n.cancelButton=z("div","".concat(o,"-color-picker-button cancel")),n.selectButton=z("div","".concat(o,"-color-picker-button select")),n.buttons=z("div","".concat(o,"-color-picker-buttons")),n.cancelButton.text("取消"),n.selectButton.text("确定"),n.buttons.children(n.selectButton),n.buttons.children(n.cancelButton),n.children(n.top),n.children(n.center),n.children(n.bottom),n.children(n.buttons),n.dragPanel.children(Cr(n)),n.dragPanel.css("background","#ffffff"),n.bind(),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jr(t,e)}(e,t),n=e,c=[{key:"fixHex",value:function(t){var e=6-t.length;if(e>0){for(var n=[],r=0;r<e;r+=1)n.push("0");n.push(t),t=n.join("")}return t}},{key:"fixHsx",value:function(t){return{h:Math.min(360,Math.max(0,t.h)),s:Math.min(100,Math.max(0,t.s)),x:Math.min(100,Math.max(0,t.x))}}},{key:"hexToRgb",value:function(t){return{r:(t=parseInt(t.indexOf("#")>-1?t.substring(1):t,16))>>16,g:(65280&t)>>8,b:255&t}}},{key:"hexToHsb",value:function(t){return this.rgbToHsb(this.hexToRgb(t))}},{key:"rgbToHsb",value:function(t){var e={h:0,s:0,x:0},n=Math.min(t.r,t.g,t.b),r=Math.max(t.r,t.g,t.b),o=r-n;return e.x=r,e.s=0!==r?255*o/r:0,0!==e.s?t.r===r?e.h=(t.g-t.b)/o:t.g===r?e.h=2+(t.b-t.r)/o:e.h=4+(t.r-t.g)/o:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.x*=100/255,e}},{key:"hsbToRgb",value:function(t){var e={},n=t.h,r=255*t.s/100,o=255*t.x/100;if(0===r)e.r=o,e.g=o,e.b=o;else{var i=o,c=(255-r)*o/255,l=n%60*(i-c)/60;360===n&&(n=0),n<60?(e.r=i,e.b=c,e.g=c+l):n<120?(e.g=i,e.b=c,e.r=i-l):n<180?(e.g=i,e.r=c,e.b=c+l):n<240?(e.b=i,e.r=c,e.g=i-l):n<300?(e.b=i,e.g=c,e.r=c+l):n<360?(e.r=i,e.g=c,e.b=i-l):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}}},{key:"rgbToHex",value:function(t){var e=[t.r.toString(16),t.g.toString(16),t.b.toString(16)];return e.forEach((function(t,n){1===t.length&&(e[n]="0".concat(t))})),e.join("")}},{key:"hsbToHex",value:function(t){return this.rgbToHex(this.hsbToRgb(t))}},{key:"isRgb",value:function(t){return t.startsWith("rgb")}},{key:"isHex",value:function(t){return t.startsWith("#")}},{key:"parseRgb",value:function(t){var e=t.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return{r:e[1],g:e[2],b:e[3]}}},{key:"isDark",value:function(t){if(H.isBlank(t))return!1;if(this.isHex(t)){var n=e.hexToRgb(t);t="rgb(".concat(n.r,", ").concat(n.g,", ").concat(n.b,")")}var r=e.parseRgb(t);return.299*parseInt(r.r,10)+.578*parseInt(r.g,10)+.114*parseInt(r.b,10)>=192}}],(i=[{key:"unbind",value:function(){var t=this.selectColorPoint,e=this.colorBarPoint,n=this.colorInput,r=this.cancelButton,o=this.selectButton;$.unbind(n),$.unbind(n),$.unbind(e),$.unbind(t),$.unbind(r),$.unbind(o)}},{key:"bind",value:function(){var t=this,n=this.selectColorPoint,o=this.center,i=this.colorBarPoint,c=this.colorBar,l=this.colorInput,a=this.cancelButton,u=this.selectButton;$.bind(l,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(t){t.stopPropagation()})),$.bind(l,r.SYSTEM_EVENT_TYPE.CHANGE,(function(){var e=l.val();e&&t.hexColor(e)})),$.bind(i,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.eventXy(e,c),r=c.box();n.x<0&&(n.x=0),n.x>r.width&&(n.x=r.width),t.downHue(n.x,r.width),$.mouseMoveUp(z(document),(function(e){var n=t.eventXy(e,c),r=c.box();n.x<0&&(n.x=0),n.x>r.width&&(n.x=r.width),t.moveHue(n.x,r.width)})),e.stopPropagation()})),$.bind(n,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.eventXy(e,o),r=o.box();n.x<0&&(n.x=0),n.x>r.width&&(n.x=r.width),n.y<0&&(n.y=0),n.y>r.height&&(n.y=r.height),t.downSelect(n.x,n.y,r.width,r.height),$.mouseMoveUp(z(document),(function(e){var n=t.eventXy(e,o);n.x<0&&(n.x=0),n.x>r.width&&(n.x=r.width),n.y<0&&(n.y=0),n.y>r.height&&(n.y=r.height),t.moveSelect(n.x,n.y,r.width,r.height)})),e.stopPropagation()})),$.bind(a,r.SYSTEM_EVENT_TYPE.CLICK,(function(){t.close()})),$.bind(u,r.SYSTEM_EVENT_TYPE.CLICK,(function(){var n=t.color,r=e.fixHsx({h:parseInt(n[0],10),s:parseInt(n[1],10),x:parseInt(n[2],10)}),o=e.hsbToHex(r);t.options.selectCb("#".concat(o)),t.close()}))}},{key:"open",value:function(t){if(this.dragPanel.open(),t){if(e.isRgb(t)){var n=e.parseRgb(t);t=e.rgbToHex(n)}this.hexColor(t)}else this.change();return this}},{key:"close",value:function(){return this.dragPanel.close(),this}},{key:"sliderPosition",value:function(t){var e=this.colorBar,n=this.colorBarPoint,r=n.box(),o=e.box(),i=parseInt(o.width-o.width*t.h/360,10);i-=r.width/2,n.offset({left:i});var c=this.center,l=this.selectColorPoint,a=l.box(),u=c.box(),s=parseInt(u.width*t.s/100,10),f=parseInt(u.height*(100-t.x)/100,10);s-=a.width/2,f-=a.height/2,l.offset({left:s,top:f})}},{key:"hueChange",value:function(){var t=this.color,n=e.fixHsx({h:parseInt(t[0],10),s:parseInt(t[1],10),x:parseInt(t[2],10)}),r=this.colorBarPoint,o=this.selectColorPoint,i=this.preViewColorPoint,c=this.selectColorArea1,l=this.colorInput,a=e.hsbToHex(n),u=e.hsbToHex({h:n.h,s:100,x:100});o.css("backgroundColor","#".concat(a)),i.css("backgroundColor","#".concat(a)),r.css("backgroundColor","#".concat(u)),c.css("backgroundColor","#".concat(u)),l.val("#".concat(a)),this.sliderPosition(n)}},{key:"selectChange",value:function(){var t=this.color,n=e.fixHsx({h:parseInt(t[0],10),s:parseInt(t[1],10),x:parseInt(t[2],10)}),r=this.preViewColorPoint,o=this.selectColorPoint,i=this.colorInput,c=e.hsbToHex(n);o.css("backgroundColor","#".concat(c)),r.css("backgroundColor","#".concat(c)),i.val("#".concat(c)),this.sliderPosition(n)}},{key:"change",value:function(){this.hueChange(),this.selectChange()}},{key:"downSelect",value:function(t,e,n,r){var o=this.color;o[1]=parseInt(100*t/n,10),o[2]=parseInt(100*(r-e)/r,10),this.selectChange()}},{key:"moveSelect",value:function(t,e,n,r){var o=this.color;o[1]=parseInt(100*Math.max(0,Math.min(n,t))/n,10),o[2]=parseInt(100*(r-Math.max(0,Math.min(r,e)))/r,10),this.selectChange()}},{key:"downHue",value:function(t,e){this.color[0]=parseInt(360*(e-t)/e,10),this.hueChange()}},{key:"moveHue",value:function(t,e){this.color[0]=parseInt(360*(e-Math.max(0,Math.min(e,t)))/e,10),this.hueChange()}},{key:"hexColor",value:function(t){var n=this.color,r=e.hexToHsb(e.fixHex(t));n[0]=r.h,n[1]=r.s,n[2]=r.x,this.change()}},{key:"destroy",value:function(){Pr(Rr(e.prototype),"destroy",this).call(this),this.unbind(),this.dragPanel.destroy()}}])&&kr(n.prototype,i),c&&kr(n,c),e}(ct);function Ir(t){return(Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ar(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Nr(t,e){return!e||"object"!==Ir(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vr(t){return(Vr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Dr(t,e){return(Dr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Mr=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Nr(this,Vr(e).call(this,"".concat(o,"-color-array-item")))).options=H.copy({color:null,icon:null},t),n.color=n.options.color,n.icon=n.options.icon,n.color&&(n.css("backgroundColor",n.color),Lr.isDark(n.options.color)?(n.checkedIcon=new kt("checked-dark"),n.children(n.checkedIcon)):(n.checkedIcon=new kt("checked-light"),n.children(n.checkedIcon)),n.checkedIcon.hide()),n.icon&&n.children(n.options.icon),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dr(t,e)}(e,t),n=e,(r=[{key:"setActive",value:function(t){this.checkedIcon&&(t?this.checkedIcon.show():this.checkedIcon.hide())}}])&&Ar(n.prototype,r),i&&Ar(n,i),e}(ct);function Wr(t){return(Wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Br(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yr(t,e){return!e||"object"!==Wr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Hr(t,e,n){return(Hr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Fr(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Fr(t){return(Fr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ur(t,e){return(Ur=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Gr=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Yr(this,Fr(e).call(this,"".concat(o,"-color-array")))).options=H.copy({colors:[new Mr({color:"rgb(0,0,0)"}),new Mr({color:"rgb(67, 67, 67)"}),new Mr({color:"rgb(102, 102, 102)"}),new Mr({color:"rgb(153, 153, 153)"}),new Mr({color:"rgb(183, 183, 183)"}),new Mr({color:"rgb(204, 204, 204)"}),new Mr({color:"rgb(217, 217, 217)"}),new Mr({color:"rgb(239, 239, 239)"}),new Mr({color:"rgb(255, 255, 255)"}),new Mr({color:"rgb(152, 0, 0)"}),new Mr({color:"rgb(255, 0, 0)"}),new Mr({color:"rgb(255, 153, 0)"}),new Mr({color:"rgb(255, 255, 0)"}),new Mr({color:"rgb(0, 255, 0)"}),new Mr({color:"rgb(0, 255, 255)"}),new Mr({color:"rgb(74, 134, 232)"}),new Mr({color:"rgb(0, 0, 255)"}),new Mr({color:"rgb(153, 0, 255)"}),new Mr({color:"rgb(255, 0, 255)"}),new Mr({color:"rgb(230, 184, 175)"}),new Mr({color:"rgb(244, 204, 204)"}),new Mr({color:"rgb(252, 229, 205)"}),new Mr({color:"rgb(255, 242, 204)"}),new Mr({color:"rgb(217, 234, 211)"}),new Mr({color:"rgb(208, 224, 227)"}),new Mr({color:"rgb(201, 218, 248)"}),new Mr({color:"rgb(207, 226, 243)"}),new Mr({color:"rgb(217, 210, 233)"}),new Mr({color:"rgb(234, 209, 220)"}),new Mr({color:"rgb(221, 126, 107)"}),new Mr({color:"rgb(234, 153, 153)"}),new Mr({color:"rgb(249, 203, 156)"}),new Mr({color:"rgb(255, 229, 153)"}),new Mr({color:"rgb(182, 215, 168)"}),new Mr({color:"rgb(162, 196, 201)"}),new Mr({color:"rgb(164, 194, 244)"}),new Mr({color:"rgb(159, 197, 232)"}),new Mr({color:"rgb(180, 167, 214)"}),new Mr({color:"rgb(213, 166, 189)"}),new Mr({color:"rgb(204, 65, 37)"}),new Mr({color:"rgb(224, 102, 102)"}),new Mr({color:"rgb(246, 178, 107)"}),new Mr({color:"rgb(255, 217, 102)"}),new Mr({color:"rgb(147, 196, 125)"}),new Mr({color:"rgb(118, 165, 175)"}),new Mr({color:"rgb(109, 158, 235)"}),new Mr({color:"rgb(111, 168, 220)"}),new Mr({color:"rgb(142, 124, 195)"}),new Mr({color:"rgb(194, 123, 160)"}),new Mr({color:"rgb(166, 28, 0)"}),new Mr({color:"rgb(204, 0, 0)"}),new Mr({color:"rgb(230, 145, 56)"}),new Mr({color:"rgb(241, 194, 50)"}),new Mr({color:"rgb(106, 168, 79)"}),new Mr({color:"rgb(69, 129, 142)"}),new Mr({color:"rgb(60, 120, 216)"}),new Mr({color:"rgb(61, 133, 198)"}),new Mr({color:"rgb(103, 78, 167)"}),new Mr({color:"rgb(166, 77, 121)"}),new Mr({color:"rgb(133, 32, 12)"}),new Mr({color:"rgb(153, 0, 0)"}),new Mr({color:"rgb(180, 95, 6)"}),new Mr({color:"rgb(191, 144, 0)"}),new Mr({color:"rgb(56, 118, 29)"}),new Mr({color:"rgb(19, 79, 92)"}),new Mr({color:"rgb(17, 85, 204)"}),new Mr({color:"rgb(11, 83, 148)"}),new Mr({color:"rgb(53, 28, 117)"}),new Mr({color:"rgb(116, 27, 71)"}),new Mr({color:"rgb(91, 15, 0)"}),new Mr({color:"rgb(102, 0, 0)"}),new Mr({color:"rgb(120, 63, 4)"}),new Mr({color:"rgb(127, 96, 0)"}),new Mr({color:"rgb(39, 78, 19)"}),new Mr({color:"rgb(12, 52, 61)"}),new Mr({color:"rgb(28, 69, 135)"}),new Mr({color:"rgb(7, 55, 99)"}),new Mr({color:"rgb(32, 18, 77)"}),new Mr({color:"rgb(76, 17, 48)"})],selectCb:function(){}},t),n.colors=[],n.activeColor=null,n.options.colors.forEach((function(t){n.add(t)})),n.colors.length>0&&n.setActiveByColor(n.colors[0].options.color),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ur(t,e)}(e,t),n=e,(i=[{key:"add",value:function(t){this.colors.push(t),this.children(t),this.bind(t)}},{key:"unbind",value:function(){this.colors.forEach((function(t){$.unbind(t)}))}},{key:"bind",value:function(t){var e=this;$.bind(t,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){e.options.selectCb(t),t.options.color&&e.setActiveByColor(t.options.color)}))}},{key:"setActiveByColor",value:function(t){var e=this;this.colors.forEach((function(n){var r=n.options;r.color===t?(n.setActive(!0),e.activeColor=r.color):n.setActive(!1)}))}},{key:"destroy",value:function(){Hr(Fr(e.prototype),"destroy",this).call(this),this.unbind()}}])&&Br(n.prototype,i),c&&Br(n,c),e}(ct);function zr(t){return(zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Zr(t,e){return!e||"object"!==zr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Jr(t,e,n){return(Jr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Kr(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Kr(t){return(Kr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $r(t,e){return($r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qr=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Zr(this,Kr(e).call(this,"".concat(o,"-font-color-context-menu"),H.copy({onUpdate:function(){}},n)))).colorPicker=new Lr({selectCb:function(e){var n=new Mr({color:e});t.customizeColorArray.add(n),t.customizeColorArray.setActiveByColor(e),t.colorArray.setActiveByColor(null),t.options.onUpdate(e),t.close()}}),t.reset=new dr("重置",new kt("clear-color")),t.array=new dr,t.array.removeClass("hover"),t.colorArray=new Gr({selectCb:function(e){var n=e.options.color;n&&t.options.onUpdate(n),t.customizeColorArray.setActiveByColor(null),t.close()}}),t.array.children(t.colorArray),t.title=z("div","".concat(o,"-font-color-context-menu-color-title")),t.title.text("自定义"),t.plus=new kt("plus"),t.customizeColorArray=new Gr({colors:[new Mr({icon:t.plus})],selectCb:function(e){var n=e.options.color;n?(t.options.onUpdate(n),t.colorArray.setActiveByColor(null),t.close()):t.colorPicker.open(t.customizeColorArray.activeColor)}}),t.customize=new dr,t.customize.removeClass("hover"),t.customize.children(t.title),t.customize.children(t.customizeColorArray),t.addItem(t.reset),t.addItem(t.array),t.addItem(new Me),t.addItem(t.customize),t.bind(),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$r(t,e)}(e,t),n=e,(i=[{key:"unbind",value:function(){$.unbind(this.reset)}},{key:"bind",value:function(){var t=this;$.bind(this.reset,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.options.onUpdate("rgb(0,0,0)"),t.customizeColorArray.setActiveByColor(null),t.colorArray.setActiveByColor(null)}))}},{key:"setActiveByColor",value:function(t){this.customizeColorArray.setActiveByColor(t),this.colorArray.setActiveByColor(t)}},{key:"destroy",value:function(){Jr(Kr(e.prototype),"destroy",this).call(this),this.unbind()}}])&&Xr(n.prototype,i),c&&Xr(n,c),e}(me);function Qr(t){return(Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function to(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function eo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function no(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ro(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oo(t,e,n){return(oo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=io(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function io(t){return(io=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function co(t,e){return(co=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var lo=function(t){function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{contextMenu:{}};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(r=io(e).call(this,"".concat(o,"-tools-font-color")))||"object"!==Qr(r)&&"function"!=typeof r?ro(n):r).options=i,t.icon=new kt("color"),t.setIcon(t.icon),t.setColor("rgb(0,0,0)"),t.fontColorContextMenu=new qr(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?to(Object(n),!0).forEach((function(e){eo(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):to(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({el:ro(t)},t.options.contextMenu)),t.fontColorContextMenu.setActiveByColor("rgb(0,0,0)"),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&co(t,e)}(e,t),n=e,(r=[{key:"setColor",value:function(t){this.icon.css("border-bottom","3px solid ".concat(t))}},{key:"destroy",value:function(){oo(io(e.prototype),"destroy",this).call(this),this.fontColorContextMenu.destroy()}}])&&no(n.prototype,r),i&&no(n,i),e}(ie);function ao(t){return(ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uo(t,e){return!e||"object"!==ao(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function so(t){return(so=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fo(t,e){return(fo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ho=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=uo(this,so(e).call(this,"".concat(o,"-fill-color-context-menu-item")))).title=t,r.icon=n,n&&(r.iconElement=z("div","".concat(o,"-fill-color-context-menu-item-icon")),r.iconElement.children(r.icon),r.children(r.iconElement)),t&&(r.titleElement=z("div","".concat(o,"-fill-color-context-menu-item-title")),r.titleElement.text(t),r.children(r.titleElement)),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fo(t,e)}(e,t),e}(Se);function yo(t){return(yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function po(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bo(t,e){return!e||"object"!==yo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vo(t,e,n){return(vo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=go(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function go(t){return(go=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wo(t,e){return(wo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Eo=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=bo(this,go(e).call(this,"".concat(o,"-font-color-context-menu"),H.copy({onUpdate:function(){}},n)))).colorPicker=new Lr({selectCb:function(e){var n=new Mr({color:e});t.customizeColorArray.add(n),t.customizeColorArray.setActiveByColor(e),t.colorArray.setActiveByColor(null),t.options.onUpdate(e),t.close()}}),t.reset=new ho("重置",new kt("clear-color")),t.array=new ho,t.array.removeClass("hover"),t.colorArray=new Gr({selectCb:function(e){var n=e.options.color;n&&t.options.onUpdate(n),t.customizeColorArray.setActiveByColor(null),t.close()}}),t.array.children(t.colorArray),t.title=z("div","".concat(o,"-font-color-context-menu-color-title")),t.title.text("自定义"),t.plus=new kt("plus"),t.customizeColorArray=new Gr({colors:[new Mr({icon:t.plus})],selectCb:function(e){var n=e.options.color;n?(t.options.onUpdate(n),t.colorArray.setActiveByColor(null),t.close()):t.colorPicker.open(t.customizeColorArray.activeColor)}}),t.customize=new ho,t.customize.removeClass("hover"),t.customize.children(t.title),t.customize.children(t.customizeColorArray),t.addItem(t.reset),t.addItem(t.array),t.addItem(new Me),t.addItem(t.customize),t.bind(),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wo(t,e)}(e,t),n=e,(i=[{key:"unbind",value:function(){$.bind(this.reset)}},{key:"bind",value:function(){var t=this;$.bind(this.reset,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.options.onUpdate(null),t.customizeColorArray.setActiveByColor(null),t.colorArray.setActiveByColor(null)}))}},{key:"setActiveByColor",value:function(t){this.customizeColorArray.setActiveByColor(t),this.colorArray.setActiveByColor(t)}},{key:"destroy",value:function(){vo(go(e.prototype),"destroy",this).call(this),this.unbind()}}])&&po(n.prototype,i),c&&po(n,c),e}(me);function mo(t){return(mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function To(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function So(t,e,n){return(So="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ko(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function ko(t){return(ko=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Co(t,e){return(Co=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Po=function(t){function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{contextMenu:{}};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(r=ko(e).call(this,"".concat(o,"-tools-fill-color")))||"object"!==mo(r)&&"function"!=typeof r?_o(n):r).options=i,t.icon=new kt("fill-color"),t.setIcon(t.icon),t.setColor("rgb(255, 255, 255)"),t.fillColorContextMenu=new Eo(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Oo(Object(n),!0).forEach((function(e){To(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Oo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({el:_o(t)},t.options.contextMenu)),t.fillColorContextMenu.setActiveByColor("rgb(255, 255, 255)"),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Co(t,e)}(e,t),n=e,(r=[{key:"setColor",value:function(t){this.icon.css("border-bottom","3px solid ".concat(t))}},{key:"destroy",value:function(){So(ko(e.prototype),"destroy",this).call(this),this.fillColorContextMenu.destroy()}}])&&xo(n.prototype,r),i&&xo(n,i),e}(ie);function Ro(t){return(Ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jo(t,e){return!e||"object"!==Ro(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Lo(t){return(Lo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Io(t,e){return(Io=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ao=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),jo(this,Lo(e).call(this,"".concat(o,"-border-type-context-menu-item")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Io(t,e)}(e,t),e}(Se);function No(t){return(No="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vo(t,e){return!e||"object"!==No(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Do(t){return(Do=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mo(t,e){return(Mo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Wo=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Vo(this,Do(e).call(this,"".concat(o,"-tools-border1")))).icon=new kt("border1"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mo(t,e)}(e,t),e}(Lt);function Bo(t){return(Bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yo(t,e){return!e||"object"!==Bo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ho(t){return(Ho=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fo(t,e){return(Fo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Uo=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Yo(this,Ho(e).call(this,"".concat(o,"-tools-border2")))).icon=new kt("border2"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fo(t,e)}(e,t),e}(Lt);function Go(t){return(Go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zo(t,e){return!e||"object"!==Go(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xo(t){return(Xo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zo(t,e){return(Zo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Jo=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=zo(this,Xo(e).call(this,"".concat(o,"-tools-border3")))).icon=new kt("border3"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zo(t,e)}(e,t),e}(Lt);function Ko(t){return(Ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $o(t,e){return!e||"object"!==Ko(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qo(t){return(qo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qo(t,e){return(Qo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ti=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=$o(this,qo(e).call(this,"".concat(o,"-tools-border4")))).icon=new kt("border4"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qo(t,e)}(e,t),e}(Lt);function ei(t){return(ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ni(t,e){return!e||"object"!==ei(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ri(t){return(ri=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function oi(t,e){return(oi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ii=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=ni(this,ri(e).call(this,"".concat(o,"-tools-border5")))).icon=new kt("border5"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&oi(t,e)}(e,t),e}(Lt);function ci(t){return(ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function li(t,e){return!e||"object"!==ci(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ai(t){return(ai=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ui(t,e){return(ui=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var si=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=li(this,ai(e).call(this,"".concat(o,"-tools-border6")))).icon=new kt("border6"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ui(t,e)}(e,t),e}(Lt);function fi(t){return(fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hi(t,e){return!e||"object"!==fi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function yi(t){return(yi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pi(t,e){return(pi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var bi=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=hi(this,yi(e).call(this,"".concat(o,"-tools-border7")))).icon=new kt("border7"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pi(t,e)}(e,t),e}(Lt);function di(t){return(di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vi(t,e){return!e||"object"!==di(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gi(t){return(gi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wi(t,e){return(wi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ei=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=vi(this,gi(e).call(this,"".concat(o,"-tools-border8")))).icon=new kt("border8"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wi(t,e)}(e,t),e}(Lt);function mi(t){return(mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oi(t,e){return!e||"object"!==mi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ti(t){return(Ti=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xi(t,e){return(xi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _i=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Oi(this,Ti(e).call(this,"".concat(o,"-tools-border9")))).icon=new kt("border9"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xi(t,e)}(e,t),e}(Lt);function Si(t){return(Si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ki(t,e){return!e||"object"!==Si(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ci(t){return(Ci=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pi(t,e){return(Pi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ri=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=ki(this,Ci(e).call(this,"".concat(o,"-tools-border10")))).icon=new kt("border10"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pi(t,e)}(e,t),e}(Lt);function ji(t){return(ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Li(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ii(t,e){return!e||"object"!==ji(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ai(t){return(Ai=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ni(t,e){return(Ni=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Vi=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Ii(this,Ai(e).call(this,"".concat(o,"-tools-border-color")))).icon=new kt("border-color"),t.setIcon(t.icon),t.setColor("#000000"),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ni(t,e)}(e,t),n=e,(r=[{key:"setColor",value:function(t){this.icon.css("border-bottom","3px solid ".concat(t))}}])&&Li(n.prototype,r),i&&Li(n,i),e}(ie);function Di(t){return(Di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mi(t,e){return!e||"object"!==Di(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Wi(t){return(Wi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bi(t,e){return(Bi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Yi=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Mi(this,Wi(e).call(this,"".concat(o,"-tools-border-type")))).icon=new kt("border-type"),t.setIcon(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bi(t,e)}(e,t),e}(ie);function Hi(t){return(Hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fi(t,e){return!e||"object"!==Hi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ui(t){return(Ui=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gi(t,e){return(Gi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var zi=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Fi(this,Ui(e).call(this,"".concat(o,"-border-color-context-menu-item")))).title=t,r.icon=n,n&&(r.iconElement=z("div","".concat(o,"-border-color-context-menu-item-icon")),r.iconElement.children(r.icon),r.children(r.iconElement)),t&&(r.titleElement=z("div","".concat(o,"-border-color-context-menu-item-title")),r.titleElement.text(t),r.children(r.titleElement)),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gi(t,e)}(e,t),e}(Se);function Xi(t){return(Xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ji(t,e){return!e||"object"!==Xi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ki(t,e,n){return(Ki="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$i(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function $i(t){return($i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qi(t,e){return(qi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qi=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Ji(this,$i(e).call(this,"".concat(o,"-border-color-context-menu"),H.copy({onUpdate:function(){}},n)))).colorPicker=new Lr({selectCb:function(e){var n=new Mr({color:e});t.customizeColorArray.add(n),t.customizeColorArray.setActiveByColor(e),t.colorArray.setActiveByColor(null),t.options.onUpdate(e),t.close()}}),t.reset=new zi("重置",new kt("clear-color")),t.array=new zi,t.array.removeClass("hover"),t.colorArray=new Gr({selectCb:function(e){var n=e.options.color;n&&t.options.onUpdate(n),t.customizeColorArray.setActiveByColor(null),t.close()}}),t.array.children(t.colorArray),t.title=z("div","".concat(o,"-border-color-context-menu-color-title")),t.title.text("自定义"),t.plus=new kt("plus"),t.customizeColorArray=new Gr({colors:[new Mr({icon:t.plus})],selectCb:function(e){var n=e.options.color;n?(t.options.onUpdate(n),t.colorArray.setActiveByColor(null),t.close()):t.colorPicker.open(t.customizeColorArray.activeColor)}}),t.customize=new zi,t.customize.removeClass("hover"),t.customize.children(t.title),t.customize.children(t.customizeColorArray),t.addItem(t.reset),t.addItem(t.array),t.addItem(new Me),t.addItem(t.customize),t.bind(),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qi(t,e)}(e,t),n=e,(i=[{key:"unbind",value:function(){$.unbind(this.reset)}},{key:"bind",value:function(){var t=this;$.bind(this.reset,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.options.onUpdate("rgb(0,0,0)"),t.customizeColorArray.setActiveByColor(null),t.colorArray.setActiveByColor(null)}))}},{key:"setActiveByColor",value:function(t){this.customizeColorArray.setActiveByColor(t),this.colorArray.setActiveByColor(t)}},{key:"destroy",value:function(){Ki($i(e.prototype),"destroy",this).call(this),this.unbind()}}])&&Zi(n.prototype,i),c&&Zi(n,c),e}(me);function tc(t){return(tc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ec(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nc(t){return(nc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oc(t,e){return(oc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ic=[],cc=function(t){function e(t){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(i=nc(e).call(this,"".concat(o,"-font-context-menu-item")))||"object"!==tc(i)&&"function"!=typeof i?rc(r):i).type=t,n.icon=new kt("checked"),n.typeIcon=new kt(t),n.typeIcon.setWidth(50),n.iconElement=z("div","".concat(o,"-font-context-menu-item-icon")),n.titleElement=z("div","".concat(o,"-font-context-menu-item-title")),n.iconElement.children(n.icon),n.titleElement.children(n.typeIcon),n.children(n.iconElement),n.children(n.titleElement),ic.push(rc(n)),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&oc(t,e)}(e,t),n=e,(r=[{key:"setTitle",value:function(t){this.title=t,this.titleElement.text(t)}},{key:"setActive",value:function(){ic.forEach((function(t){t.removeClass("active")})),this.addClass("active")}}])&&ec(n.prototype,r),i&&ec(n,i),e}(Se);function lc(t){return(lc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ac(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function uc(t,e){return!e||"object"!==lc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function sc(t,e,n){return(sc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fc(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function fc(t){return(fc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hc(t,e){return(hc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yc=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=uc(this,fc(e).call(this,"".concat(o,"-line-type-context-menu"),H.copy({onUpdate:function(){}},n)))).items=[new cc("line1"),new cc("line2"),new cc("line3"),new cc("line4"),new cc("line5"),new cc("line6")],t.items.forEach((function(e){t.addItem(e)})),t.setActiveByType(t.items[0].type),t.bind(),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hc(t,e)}(e,t),n=e,(i=[{key:"unbind",value:function(){this.items.forEach((function(t){$.unbind(t)}))}},{key:"bind",value:function(){var t=this;this.items.forEach((function(e){$.bind(e,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.update(e.type),e.setActive()}))}))}},{key:"update",value:function(t){this.options.onUpdate(t),this.close()}},{key:"setActiveByType",value:function(t){this.items.forEach((function(e){e.type===t&&e.setActive()}))}},{key:"destroy",value:function(){sc(fc(e.prototype),"destroy",this).call(this),this.unbind()}}])&&ac(n.prototype,i),c&&ac(n,c),e}(me);function pc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dc(t,e,n){return e&&bc(t.prototype,e),n&&bc(t,n),t}var vc={SOLID_LINE:0,DOTTED_LINE:1,POINT_LINE:2,DOUBLE_LINE:3},gc=function(){function t(e,n){pc(this,t),this.draw=e,H.copy(this,{color:"#000000",widthType:x.LINE_WIDTH_TYPE.low},n)}return dc(t,[{key:"setWidthType",value:function(t){this.widthType=t}},{key:"setColor",value:function(t){this.color=t}},{key:"horizonLine",value:function(t,e,n,r){var o=this.draw,i=this.widthType,c=this.color;o.setLineColor(c),o.setLineWidthType(i),o.setLineDash([]),o.horizonLine([t,e],[n,r])}},{key:"verticalLine",value:function(t,e,n,r){var o=this.draw,i=this.widthType,c=this.color;o.setLineColor(c),o.setLineWidthType(i),o.setLineDash([]),o.verticalLine([t,e],[n,r])}},{key:"tiltingLine",value:function(t,e,n,r){var o=this.draw,i=this.widthType,c=this.color;o.setLineColor(c),o.setLineWidthType(i),o.setLineDash([]),o.corsLine([t,e],[n,r])}}]),t}(),wc=function(){function t(e,n){pc(this,t),this.draw=e,H.copy(this,{color:"#000000",widthType:x.LINE_WIDTH_TYPE.low,dash:[5]},n)}return dc(t,[{key:"setWidthType",value:function(t){this.widthType=t}},{key:"setColor",value:function(t){this.color=t}},{key:"horizonLine",value:function(t,e,n,r){var o=this.draw,i=this.dash,c=this.widthType,l=this.color;o.setLineColor(l),o.setLineWidthType(c),o.setLineDash(i),o.horizonLine([t,e],[n,r])}},{key:"verticalLine",value:function(t,e,n,r){var o=this.draw,i=this.dash,c=this.widthType,l=this.color;o.setLineColor(l),o.setLineWidthType(c),o.setLineDash(i),o.verticalLine([t,e],[n,r])}},{key:"tiltingLine",value:function(t,e,n,r){var o=this.draw,i=this.dash,c=this.widthType,l=this.color;o.setLineColor(l),o.setLineWidthType(c),o.setLineDash(i),o.corsLine([t,e],[n,r])}}]),t}(),Ec=function(){function t(e,n){pc(this,t),this.draw=e,H.copy(this,{color:"#000000",widthType:x.LINE_WIDTH_TYPE.low,padding:1,spacing:t.spacing,leftShow:function(){return!1},topShow:function(){return!1},rightShow:function(){return!1},bottomShow:function(){return!1},iFMerge:function(){return!1},iFMergeFirstRow:function(){return!1},iFMergeLastRow:function(){return!1},iFMergeFirstCol:function(){return!1},iFMergeLastCol:function(){return!1}},n)}return dc(t,[{key:"setWidthType",value:function(t){this.widthType=t}},{key:"setColor",value:function(t){this.color=t}},{key:"handleExternal",value:function(t,e,n,r,o,i,c){var l={},a=this.leftShow,u=this.topShow,s=this.rightShow,f=this.bottomShow,h=this.iFMerge,y=this.iFMergeFirstRow,p=this.iFMergeLastRow,b=this.iFMergeFirstCol,d=this.iFMergeLastCol,v=this.spacing,g=null,w=null,E=null,m=null,O=null;switch(c){case"left":(g=h(o,i-1))&&(w=y(o,i-1),E=p(o,i-1),m=b(o,i-1),O=d(o,i-1));break;case"top":(g=h(o-1,i))&&(w=y(o-1,i),E=p(o-1,i),m=b(o-1,i),O=d(o-1,i));break;case"right":(g=h(o,i+1))&&(w=y(o,i+1),E=p(o,i+1),m=b(o,i+1),O=d(o,i+1));break;case"bottom":(g=h(o+1,i))&&(w=y(o+1,i),E=p(o+1,i),m=b(o+1,i),O=d(o+1,i))}if(g){switch(c){case"left":l.sx=t-v,l.ex=n-v;var T=f(o-1,i-1)||u(o,i-1),x=u(o,i),_=f(o-1,i);l.sy=e,(x||_)&&(l.sy=e-v),T&&w&&(l.sy=e+v);var S=u(o+1,i-1)||f(o,i-1),k=f(o,i),C=u(o+1,i);l.ey=r,(k||C)&&(l.ey=r+v),S&&E&&(l.ey=r-v);break;case"top":l.sy=e-v,l.ey=r-v;var P=s(o-1,i-1)||a(o-1,i),R=a(o,i),j=s(o,i-1);l.sx=t,(R||j)&&(l.sx=t-v),P&&m&&(l.sx=t+v);var L=a(o-1,i+1)||s(o-1,i),I=s(o,i),A=a(o,i+1);l.ex=n,(I||A)&&(l.ex=n+v),L&&O&&(l.ex=n-v);break;case"right":l.sx=t+v,l.ex=n+v;var N=f(o-1,i+1)||u(o,i+1),V=u(o,i),D=f(o-1,i);l.sy=e,(V||D)&&(l.sy=e-v),N&&w&&(l.sy=e+v);var M=u(o+1,i+1)||f(o,i+1),W=f(o,i),B=u(o+1,i);l.ey=r,(W||B)&&(l.ey=r+v),M&&E&&(l.ey=r-v);break;case"bottom":l.sy=e+v,l.ey=r+v;var Y=s(o+1,i-1)||a(o+1,i),H=a(o,i),F=s(o,i-1);l.sx=t,(H||F)&&(l.sx=t-v),Y&&m&&(l.sx=t+v);var U=a(o+1,i+1)||s(o+1,i),G=s(o,i),z=a(o,i+1);l.ex=n,(G||z)&&(l.ex=n+v),U&&O&&(l.ex=n-v)}return l}switch(c){case"left":l.sx=t-v,l.ex=n-v;var X=f(o-1,i-1)||u(o,i-1),Z=u(o,i),J=f(o-1,i);l.sy=e,(Z||J)&&(l.sy=e-v),X&&(l.sy=e+v);var K=u(o+1,i-1)||f(o,i-1),$=f(o,i),q=u(o+1,i);l.ey=r,($||q)&&(l.ey=r+v),K&&(l.ey=r-v);break;case"top":l.sy=e-v,l.ey=r-v;var Q=s(o-1,i-1)||a(o-1,i),tt=a(o,i),et=s(o,i-1);l.sx=t,(tt||et)&&(l.sx=t-v),Q&&(l.sx=t+v);var nt=a(o-1,i+1)||s(o-1,i),rt=s(o,i),ot=a(o,i+1);l.ex=n,(rt||ot)&&(l.ex=n+v),nt&&(l.ex=n-v);break;case"right":l.sx=t+v,l.ex=n+v;var it=f(o-1,i+1)||u(o,i+1),ct=u(o,i),lt=f(o-1,i);l.sy=e,(ct||lt)&&(l.sy=e-v),it&&(l.sy=e+v);var at=u(o+1,i+1)||f(o,i+1),ut=f(o,i),st=u(o+1,i);l.ey=r,(ut||st)&&(l.ey=r+v),at&&(l.ey=r-v);break;case"bottom":l.sy=e+v,l.ey=r+v;var ft=s(o+1,i-1)||a(o+1,i),ht=a(o,i),yt=s(o,i-1);l.sx=t,(ht||yt)&&(l.sx=t-v),ft&&(l.sx=t+v);var pt=a(o+1,i+1)||s(o+1,i),bt=s(o,i),dt=a(o,i+1);l.ex=n,(bt||dt)&&(l.ex=n+v),pt&&(l.ex=n-v)}return l}},{key:"handleInternal",value:function(t,e,n,r,o,i,c){var l={},a=this.leftShow,u=this.topShow,s=this.rightShow,f=this.bottomShow,h=this.iFMerge,y=this.iFMergeFirstRow,p=this.iFMergeLastRow,b=this.iFMergeFirstCol,d=this.iFMergeLastCol,v=this.spacing;if(h(o,i)){var g=y(o,i),w=p(o,i),E=b(o,i),m=d(o,i);switch(c){case"left":l.sx=t+v,l.ex=n+v;var O=f(o-1,i-1)||u(o,i-1),T=u(o,i),x=f(o-1,i);l.sy=e,O&&(l.sy=e-v),(T||x)&&g&&(l.sy=e+v);var _=u(o+1,i-1)||f(o,i-1),S=f(o,i),k=u(o+1,i);l.ey=r,_&&(l.ey=r+v),(S||k)&&w&&(l.ey=r-v);break;case"top":l.sy=e+v,l.ey=r+v;var C=s(o-1,i-1)||a(o-1,i),P=a(o,i),R=s(o,i-1);l.sx=t,C&&(l.sx=t-v),(P||R)&&E&&(l.sx=t+v);var j=a(o-1,i+1)||s(o-1,i),L=s(o,i),I=a(o,i+1);l.ex=n,j&&(l.ex=n+v),(L||I)&&m&&(l.ex=n-v);break;case"right":l.sx=t-v,l.ex=n-v;var A=f(o-1,i+1)||u(o,i+1),N=u(o,i),V=f(o-1,i);l.sy=e,A&&(l.sy=e-v),(N||V)&&g&&(l.sy=e+v);var D=u(o+1,i+1)||f(o,i+1),M=f(o,i),W=u(o+1,i);l.ey=r,D&&(l.ey=r+v),(M||W)&&w&&(l.ey=r-v);break;case"bottom":l.sy=e-v,l.ey=r-v;var B=s(o+1,i-1)||a(o+1,i),Y=a(o,i),H=s(o,i-1);l.sx=t,B&&(l.sx=t-v),(Y||H)&&E&&(l.sx=t+v);var F=a(o+1,i+1)||s(o+1,i),U=s(o,i),G=a(o,i+1);l.ex=n,F&&(l.ex=n+v),(U||G)&&m&&(l.ex=n-v)}return l}switch(c){case"left":l.sx=t+v,l.ex=n+v;var z=f(o-1,i-1)||u(o,i-1),X=u(o,i),Z=f(o-1,i);l.sy=e,z&&(l.sy=e-v),(X||Z)&&(l.sy=e+v);var J=u(o+1,i-1)||f(o,i-1),K=f(o,i),$=u(o+1,i);l.ey=r,J&&(l.ey=r+v),(K||$)&&(l.ey=r-v);break;case"top":l.sy=e+v,l.ey=r+v;var q=s(o-1,i-1)||a(o-1,i),Q=a(o,i),tt=s(o,i-1);l.sx=t,q&&(l.sx=t-v),(Q||tt)&&(l.sx=t+v);var et=a(o-1,i+1)||s(o-1,i),nt=s(o,i),rt=a(o,i+1);l.ex=n,et&&(l.ex=n+v),(nt||rt)&&(l.ex=n-v);break;case"right":l.sx=t-v,l.ex=n-v;var ot=f(o-1,i+1)||u(o,i+1),it=u(o,i),ct=f(o-1,i);l.sy=e,ot&&(l.sy=e-v),(it||ct)&&(l.sy=e+v);var lt=u(o+1,i+1)||f(o,i+1),at=f(o,i),ut=u(o+1,i);l.ey=r,lt&&(l.ey=r+v),(at||ut)&&(l.ey=r-v);break;case"bottom":l.sy=e-v,l.ey=r-v;var st=s(o+1,i-1)||a(o+1,i),ft=a(o,i),ht=s(o,i-1);l.sx=t,st&&(l.sx=t-v),(ft||ht)&&(l.sx=t+v);var yt=a(o+1,i+1)||s(o+1,i),pt=s(o,i),bt=a(o,i+1);l.ex=n,yt&&(l.ex=n+v),(pt||bt)&&(l.ex=n-v)}return l}},{key:"horizonLine",value:function(t,e,n,r,o,i,c){var l=this.draw,a=this.widthType,u=this.color;l.setLineColor(u),l.setLineWidthType(a),l.setLineDash([]);var s=this.handleExternal(t,e,n,r,o,i,c),f=this.handleInternal(t,e,n,r,o,i,c);H.isEmptyObject(f)||l.horizonLine([f.sx,f.sy],[f.ex,f.ey]),H.isEmptyObject(s)||l.horizonLine([s.sx,s.sy],[s.ex,s.ey])}},{key:"verticalLine",value:function(t,e,n,r,o,i,c){var l=this.draw,a=this.widthType,u=this.color;l.setLineColor(u),l.setLineWidthType(a),l.setLineDash([]);var s=this.handleExternal(t,e,n,r,o,i,c),f=this.handleInternal(t,e,n,r,o,i,c);H.isEmptyObject(f)||l.verticalLine([f.sx,f.sy],[f.ex,f.ey]),H.isEmptyObject(s)||l.verticalLine([s.sx,s.sy],[s.ex,s.ey])}},{key:"tiltingLine",value:function(t,e,n,r,o,i,c){}}]),t}();Ec.spacing=x.dpr()>=2?3:2;var mc=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};pc(this,t),this.widthType=x.LINE_WIDTH_TYPE.low,this.type=vc.SOLID_LINE,this.solidLine=new gc(e,H.copy({},n)),this.dottedLine=new wc(e,H.copy({dash:[5]},n)),this.pointLine=new wc(e,H.copy({dash:[2,2]},n)),this.doubleLine=new Ec(e,H.copy({},n))}return dc(t,[{key:"setWidthType",value:function(t){t&&this.type===vc.SOLID_LINE&&this.solidLine.setWidthType(t)}},{key:"setColor",value:function(t){t&&(this.solidLine.setColor(t),this.dottedLine.setColor(t),this.pointLine.setColor(t),this.doubleLine.setColor(t))}},{key:"setType",value:function(t){this.type=t}},{key:"horizonLine",value:function(t,e,n,r,o,i,c){var l=this.type,a=this.solidLine,u=this.dottedLine,s=this.pointLine,f=this.doubleLine;switch(l){case vc.SOLID_LINE:a.horizonLine(t,e,n,r);break;case vc.DOTTED_LINE:u.horizonLine(t,e,n,r);break;case vc.POINT_LINE:s.horizonLine(t,e,n,r);break;case vc.DOUBLE_LINE:f.horizonLine(t,e,n,r,o,i,c)}}},{key:"verticalLine",value:function(t,e,n,r,o,i,c){var l=this.type,a=this.solidLine,u=this.dottedLine,s=this.pointLine,f=this.doubleLine;switch(l){case vc.SOLID_LINE:a.verticalLine(t,e,n,r);break;case vc.DOTTED_LINE:u.verticalLine(t,e,n,r);break;case vc.POINT_LINE:s.verticalLine(t,e,n,r);break;case vc.DOUBLE_LINE:f.verticalLine(t,e,n,r,o,i,c)}}},{key:"tiltingLine",value:function(t,e,n,r,o,i,c){var l=this.type,a=this.solidLine,u=this.dottedLine,s=this.pointLine,f=this.doubleLine;switch(l){case vc.SOLID_LINE:a.tiltingLine(t,e,n,r);break;case vc.DOTTED_LINE:u.tiltingLine(t,e,n,r);break;case vc.POINT_LINE:s.tiltingLine(t,e,n,r);break;case vc.DOUBLE_LINE:f.tiltingLine(t,e,n,r,o,i,c)}}}]),t}();function Oc(t){return(Oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xc(t,e){return!e||"object"!==Oc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _c(t,e,n){return(_c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Sc(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Sc(t){return(Sc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kc(t,e){return(kc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Cc=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=xc(this,Sc(e).call(this,"".concat(o,"-border-type-context-menu"),H.copy({onUpdate:function(){}},n)))).type=vc.SOLID_LINE,t.color="#000000",t.borderIcon1=new Wo,t.borderIcon2=new Uo,t.borderIcon3=new Jo,t.borderIcon4=new ti,t.borderIcon5=new ii;var r=z("div","".concat(o,"-border-type-context-menu-type-icon-line"));r.children(t.borderIcon1),r.children(t.borderIcon2),r.children(t.borderIcon3),r.children(t.borderIcon4),r.children(t.borderIcon5),t.borderIcon6=new si,t.borderIcon7=new bi,t.borderIcon8=new Ei,t.borderIcon9=new _i,t.borderIcon10=new Ri;var i=z("div","".concat(o,"-border-type-context-menu-type-icon-line"));i.children(t.borderIcon6),i.children(t.borderIcon7),i.children(t.borderIcon8),i.children(t.borderIcon9),i.children(t.borderIcon10),t.borderIcons=new Ao,t.borderIcons.removeClass("hover"),t.borderIcons.children(r),t.borderIcons.children(i),t.borderColor=new Vi,t.borderType=new Yi;var c=z("div","".concat(o,"-border-type-context-menu-type-icon-line"));return c.children(t.borderColor),c.children(t.borderType),t.borderColorAndType=new Ao,t.borderColorAndType.removeClass("hover"),t.borderColorAndType.children(c),t.addItem(t.borderIcons),t.addItem(new Me),t.addItem(t.borderColorAndType),t.borderColorContextMenu=new Qi(H.copy({el:t.borderColor},{onUpdate:function(e){t.color=e,t.borderColor.setColor(e)}})),t.lineTypeContextMenu=new yc(H.copy({el:t.borderType},{onUpdate:function(e){t.type=e}})),t.bind(),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kc(t,e)}(e,t),n=e,(i=[{key:"unbind",value:function(){$.unbind(this.borderColor,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN),$.unbind(this.borderType,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN),$.unbind(this.borderIcon1,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN),$.unbind(this.borderIcon2,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN),$.unbind(this.borderIcon3,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN),$.unbind(this.borderIcon4,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN),$.unbind(this.borderIcon5,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN),$.unbind(this.borderIcon6,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN),$.unbind(this.borderIcon7,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN),$.unbind(this.borderIcon8,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN),$.unbind(this.borderIcon9,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN),$.unbind(this.borderIcon10,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN)}},{key:"bind",value:function(){var t=this;$.bind(this.borderColor,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.borderColorContextMenu,r=n.elPopUp;pe.closeAll([r,t.elPopUp]),n.isClose()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),$.bind(this.borderType,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.lineTypeContextMenu,r=n.elPopUp;pe.closeAll([r,t.elPopUp]),n.isClose()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),$.bind(this.borderIcon1,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate("border1",t.color,t.type),e.stopPropagation(),e.preventDefault()})),$.bind(this.borderIcon2,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate("border2",t.color,t.type),e.stopPropagation(),e.preventDefault()})),$.bind(this.borderIcon3,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate("border3",t.color,t.type),e.stopPropagation(),e.preventDefault()})),$.bind(this.borderIcon4,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate("border4",t.color,t.type),e.stopPropagation(),e.preventDefault()})),$.bind(this.borderIcon5,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate("border5",t.color,t.type),e.stopPropagation(),e.preventDefault()})),$.bind(this.borderIcon6,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate("border6",t.color,t.type),e.stopPropagation(),e.preventDefault()})),$.bind(this.borderIcon7,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate("border7",t.color,t.type),e.stopPropagation(),e.preventDefault()})),$.bind(this.borderIcon8,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate("border8",t.color,t.type),e.stopPropagation(),e.preventDefault()})),$.bind(this.borderIcon9,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate("border9",t.color,t.type),e.stopPropagation(),e.preventDefault()})),$.bind(this.borderIcon10,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate("border10",t.color,t.type),e.stopPropagation(),e.preventDefault()}))}},{key:"destroy",value:function(){_c(Sc(e.prototype),"destroy",this).call(this),this.unbind()}}])&&Tc(n.prototype,i),c&&Tc(n,c),e}(me);function Pc(t){return(Pc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rc(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function jc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lc(t){return(Lc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ic(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ac(t,e){return(Ac=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Nc=function(t){function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{contextMenu:{}};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(r=Lc(e).call(this,"".concat(o,"-tools-border")))||"object"!==Pc(r)&&"function"!=typeof r?Ic(n):r).options=i,t.icon=new kt("border"),t.setIcon(t.icon),t.borderTypeContextMenu=new Cc(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Rc(Object(n),!0).forEach((function(e){jc(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({el:Ic(t)},t.options.contextMenu)),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ac(t,e)}(e,t),e}(ie);function Vc(t){return(Vc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dc(t,e){return!e||"object"!==Vc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mc(t){return(Mc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wc(t,e){return(Wc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Bc=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Dc(this,Mc(e).call(this,"".concat(o,"-tools-merge")))).icon=new kt("merge"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wc(t,e)}(e,t),e}(Lt);function Yc(t){return(Yc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hc(t,e){return!e||"object"!==Yc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Fc(t){return(Fc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Uc(t,e){return(Uc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Gc=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Hc(this,Fc(e).call(this,"".concat(o,"-tools-horizontal1")))).icon=new kt("align-left"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Uc(t,e)}(e,t),e}(Lt);function zc(t){return(zc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xc(t,e){return!e||"object"!==zc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zc(t){return(Zc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jc(t,e){return(Jc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Kc=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Xc(this,Zc(e).call(this,"".concat(o,"-tools-horizontal2")))).icon=new kt("align-center"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jc(t,e)}(e,t),e}(Lt);function $c(t){return($c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qc(t,e){return!e||"object"!==$c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qc(t){return(Qc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tl(t,e){return(tl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var el=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=qc(this,Qc(e).call(this,"".concat(o,"-tools-horizontal3")))).icon=new kt("align-right"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tl(t,e)}(e,t),e}(Lt);function nl(t){return(nl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rl(t,e){return!e||"object"!==nl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ol(t){return(ol=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function il(t,e){return(il=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var cl=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),rl(this,ol(e).call(this,"".concat(o,"-horizontal-type-context-menu-item")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&il(t,e)}(e,t),e}(Se);function ll(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var al=function(){function t(e){var n=e.draw,r=e.ruler,o=e.attr;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.draw=n,this.ruler=r,this.attr=o}var e,n,r;return e=t,(n=[{key:"setRuler",value:function(t){this.ruler=t}},{key:"getAlignPadding",value:function(){return this.attr.align===t.ALIGN.center?0:this.attr.padding}},{key:"isBlank",value:function(t){return null==t||""===t.toString().trim()}},{key:"hasBreak",value:function(t){return t.indexOf("\n")>-1}},{key:"getVerticalAlignPadding",value:function(){return this.attr.verticalAlign===t.VERTICAL_ALIGN.center?0:this.attr.padding}}])&&ll(e.prototype,n),r&&ll(e,r),t}();function ul(t){return(ul="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fl(t,e){return!e||"object"!==ul(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hl(t,e,n){return(hl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yl(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function yl(t){return(yl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pl(t,e){return(pl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}al.VERTICAL_ALIGN={top:"top",center:"middle",bottom:"bottom"},al.ALIGN={left:"left",center:"center",right:"right"},al.TEXT_WRAP={OVER_FLOW:1,WORD_WRAP:2,TRUNCATE:3},al.TEXT_DIRECTION={HORIZONTAL:"horizontal",VERTICAL:"vertical",ANGLE:"angle",ANGLE_BAR:"bar"};var bl=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=fl(this,yl(e).call(this,"".concat(o,"-horizontal-type-context-menu"),H.copy({onUpdate:function(){}},n)))).horizontalIcon1=new Gc,t.horizontalIcon2=new Kc,t.horizontalIcon3=new el;var r=z("div","".concat(o,"-horizontal-type-context-menu-type-icon-line"));return r.children(t.horizontalIcon1),r.children(t.horizontalIcon2),r.children(t.horizontalIcon3),t.horizontalIcons=new cl,t.horizontalIcons.removeClass("hover"),t.horizontalIcons.children(r),t.addItem(t.horizontalIcons),t.bind(),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pl(t,e)}(e,t),n=e,(i=[{key:"unbind",value:function(){$.unbind(this.horizontalIcon1,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN),$.unbind(this.horizontalIcon2,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN),$.unbind(this.horizontalIcon3,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN)}},{key:"bind",value:function(){var t=this;$.bind(this.horizontalIcon1,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate(al.ALIGN.left),e.stopPropagation(),e.preventDefault()})),$.bind(this.horizontalIcon2,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate(al.ALIGN.center),e.stopPropagation(),e.preventDefault()})),$.bind(this.horizontalIcon3,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate(al.ALIGN.right),e.stopPropagation(),e.preventDefault()}))}},{key:"destroy",value:function(){hl(yl(e.prototype),"destroy",this).call(this),this.unbind()}}])&&sl(n.prototype,i),c&&sl(n,c),e}(me);function dl(t){return(dl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function gl(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function El(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ml(t,e,n){return(ml="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ol(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Ol(t){return(Ol=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tl(t,e){return(Tl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xl=function(t){function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{contextMenu:{}};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(r=Ol(e).call(this,"".concat(o,"-tools-horizontal-align")))||"object"!==dl(r)&&"function"!=typeof r?El(n):r).options=i,t.icon=new kt("align-left"),t.setIcon(t.icon),t.horizontalContextMenu=new bl(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vl(Object(n),!0).forEach((function(e){gl(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({el:El(t)},t.options.contextMenu)),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tl(t,e)}(e,t),n=e,(r=[{key:"destroy",value:function(){ml(Ol(e.prototype),"destroy",this).call(this),this.horizontalContextMenu.destroy()}}])&&wl(n.prototype,r),i&&wl(n,i),e}(ie);function _l(t){return(_l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sl(t,e){return!e||"object"!==_l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function kl(t){return(kl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cl(t,e){return(Cl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Pl=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Sl(this,kl(e).call(this,"".concat(o,"-vertical-type-context-menu-item")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cl(t,e)}(e,t),e}(Se);function Rl(t){return(Rl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jl(t,e){return!e||"object"!==Rl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ll(t){return(Ll=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Il(t,e){return(Il=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Al=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=jl(this,Ll(e).call(this,"".concat(o,"-tools-verticalIcon1")))).icon=new kt("align-top"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Il(t,e)}(e,t),e}(Lt);function Nl(t){return(Nl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vl(t,e){return!e||"object"!==Nl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dl(t){return(Dl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ml(t,e){return(Ml=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Wl=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Vl(this,Dl(e).call(this,"".concat(o,"-tools-verticalIcon2")))).icon=new kt("align-middle"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ml(t,e)}(e,t),e}(Lt);function Bl(t){return(Bl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yl(t,e){return!e||"object"!==Bl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Hl(t){return(Hl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fl(t,e){return(Fl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ul=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Yl(this,Hl(e).call(this,"".concat(o,"-tools-verticalIcon3")))).icon=new kt("align-bottom"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fl(t,e)}(e,t),e}(Lt);function Gl(t){return(Gl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xl(t,e){return!e||"object"!==Gl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zl(t,e,n){return(Zl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Jl(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Jl(t){return(Jl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Kl(t,e){return(Kl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $l=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Xl(this,Jl(e).call(this,"".concat(o,"-vertical-type-context-menu"),H.copy({onUpdate:function(){}},n)))).verticalIcon1=new Al,t.verticalIcon2=new Wl,t.verticalIcon3=new Ul;var r=z("div","".concat(o,"-vertical-type-context-menu-type-icon-line"));return r.children(t.verticalIcon1),r.children(t.verticalIcon2),r.children(t.verticalIcon3),t.verticalIcons=new Pl,t.verticalIcons.removeClass("hover"),t.verticalIcons.children(r),t.addItem(t.verticalIcons),t.bind(),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kl(t,e)}(e,t),n=e,(i=[{key:"unbind",value:function(){$.unbind(this.verticalIcon1,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN),$.unbind(this.verticalIcon2,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN),$.unbind(this.verticalIcon3,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN)}},{key:"bind",value:function(){var t=this;$.bind(this.verticalIcon1,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate(al.VERTICAL_ALIGN.top),e.stopPropagation(),e.preventDefault()})),$.bind(this.verticalIcon2,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate(al.VERTICAL_ALIGN.center),e.stopPropagation(),e.preventDefault()})),$.bind(this.verticalIcon3,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate(al.VERTICAL_ALIGN.bottom),e.stopPropagation(),e.preventDefault()}))}},{key:"destroy",value:function(){Zl(Jl(e.prototype),"destroy",this).call(this),this.unbind()}}])&&zl(n.prototype,i),c&&zl(n,c),e}(me);function ql(t){return(ql="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ql(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ta(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ea(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function na(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ra(t,e,n){return(ra="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=oa(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function oa(t){return(oa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ia(t,e){return(ia=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ca=function(t){function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{contextMenu:{}};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(r=oa(e).call(this,"".concat(o,"-tools-vertical-align")))||"object"!==ql(r)&&"function"!=typeof r?na(n):r).options=i,t.icon=new kt("align-middle"),t.setIcon(t.icon),t.verticalContextMenu=new $l(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ql(Object(n),!0).forEach((function(e){ta(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ql(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({el:na(t)},t.options.contextMenu)),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ia(t,e)}(e,t),n=e,(r=[{key:"destroy",value:function(){ra(oa(e.prototype),"destroy",this).call(this),this.verticalContextMenu.destroy()}}])&&ea(n.prototype,r),i&&ea(n,i),e}(ie);function la(t){return(la="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aa(t,e){return!e||"object"!==la(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ua(t){return(ua=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sa(t,e){return(sa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fa=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=aa(this,ua(e).call(this,"".concat(o,"-tools-text-wrapping1")))).icon=new kt("truncate"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sa(t,e)}(e,t),e}(Lt);function ha(t){return(ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ya(t,e){return!e||"object"!==ha(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pa(t){return(pa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ba(t,e){return(ba=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var da=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=ya(this,pa(e).call(this,"".concat(o,"-tools-text-wrapping2")))).icon=new kt("overflow"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ba(t,e)}(e,t),e}(Lt);function va(t){return(va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ga(t,e){return!e||"object"!==va(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wa(t){return(wa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ea(t,e){return(Ea=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ma=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=ga(this,wa(e).call(this,"".concat(o,"-tools-text-wrapping3")))).icon=new kt("wrap"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ea(t,e)}(e,t),e}(Lt);function Oa(t){return(Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ta(t,e){return!e||"object"!==Oa(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xa(t){return(xa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _a(t,e){return(_a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Sa=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ta(this,xa(e).call(this,"".concat(o,"-text-wrapping-context-menu-item")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_a(t,e)}(e,t),e}(Se);function ka(t){return(ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ca(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pa(t,e){return!e||"object"!==ka(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ra(t,e,n){return(Ra="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ja(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function ja(t){return(ja=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function La(t,e){return(La=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ia=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Pa(this,ja(e).call(this,"".concat(o,"-text-wrapping-context-menu"),H.copy({onUpdate:function(){}},n)))).textWrappingIcon1=new fa,t.textWrappingIcon2=new da,t.textWrappingIcon3=new ma;var r=z("div","".concat(o,"-text-wrapping-context-menu-type-icon-line"));return r.children(t.textWrappingIcon1),r.children(t.textWrappingIcon2),r.children(t.textWrappingIcon3),t.textWrappingIcons=new Sa,t.textWrappingIcons.removeClass("hover"),t.textWrappingIcons.children(r),t.addItem(t.textWrappingIcons),t.bind(),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&La(t,e)}(e,t),n=e,(i=[{key:"unbind",value:function(){$.unbind(this.textWrappingIcon1,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN),$.unbind(this.textWrappingIcon2,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN),$.unbind(this.textWrappingIcon3,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN)}},{key:"bind",value:function(){var t=this;$.bind(this.textWrappingIcon1,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate(al.TEXT_WRAP.TRUNCATE),e.stopPropagation(),e.preventDefault()})),$.bind(this.textWrappingIcon2,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate(al.TEXT_WRAP.OVER_FLOW),e.stopPropagation(),e.preventDefault()})),$.bind(this.textWrappingIcon3,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate(al.TEXT_WRAP.WORD_WRAP),e.stopPropagation(),e.preventDefault()}))}},{key:"destroy",value:function(){Ra(ja(e.prototype),"destroy",this).call(this),this.unbind()}}])&&Ca(n.prototype,i),c&&Ca(n,c),e}(me);function Aa(t){return(Aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Na(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Va(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Da(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ma(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wa(t,e,n){return(Wa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ba(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Ba(t){return(Ba=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ya(t,e){return(Ya=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ha=function(t){function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{contextMenu:{}};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(r=Ba(e).call(this,"".concat(o,"-tools-text-wrapping")))||"object"!==Aa(r)&&"function"!=typeof r?Ma(n):r).options=i,t.icon=new kt("text-wrap"),t.setIcon(t.icon),t.textWrappingContextMenu=new Ia(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Na(Object(n),!0).forEach((function(e){Va(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Na(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({el:Ma(t)},t.options.contextMenu)),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ya(t,e)}(e,t),n=e,(r=[{key:"destroy",value:function(){Wa(Ba(e.prototype),"destroy",this).call(this),this.textWrappingContextMenu.destroy()}}])&&Da(n.prototype,r),i&&Da(n,i),e}(ie);function Fa(t){return(Fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ua(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ga(t){return(Ga=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function za(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xa(t,e){return(Xa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Za=[],Ja=function(t){function e(t){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(i=Ga(e).call(this,"".concat(o,"-fixed-context-menu-item")))||"object"!==Fa(i)&&"function"!=typeof i?za(r):i).title=t,n.titleElement=z("div","".concat(o,"-fixed-context-menu-item-title")),n.titleElement.text(t),n.children(n.titleElement),Za.push(za(n)),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xa(t,e)}(e,t),n=e,(r=[{key:"setTitle",value:function(t){this.title=t,this.titleElement.text(t)}}])&&Ua(n.prototype,r),i&&Ua(n,i),e}(Se);function Ka(t){return(Ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qa(t,e){return!e||"object"!==Ka(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qa(t,e,n){return(Qa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tu(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function tu(t){return(tu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function eu(t,e){return(eu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var nu=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=qa(this,tu(e).call(this,"".concat(o,"-fixed-context-menu"),H.copy({onUpdate:function(){}},n)))).row=new Ja("冻结至当前行"),t.row1=new Ja("冻结1行"),t.row2=new Ja("冻结2行"),t.col=new Ja("冻结至当前列"),t.col1=new Ja("冻结1列"),t.col2=new Ja("冻结2列"),t.addItem(t.row),t.addItem(t.row1),t.addItem(t.row2),t.addItem(new Me),t.addItem(t.col),t.addItem(t.col1),t.addItem(t.col2),t.bind(),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&eu(t,e)}(e,t),n=e,(i=[{key:"unbind",value:function(){$.unbind(this.row,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN),$.unbind(this.row1,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN),$.unbind(this.row2,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN),$.unbind(this.col,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN),$.unbind(this.col1,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN),$.unbind(this.col2,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN)}},{key:"bind",value:function(){var t=this;$.bind(this.row,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.options.onUpdate("ROW"),t.close()})),$.bind(this.row1,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.options.onUpdate("ROW1"),t.close()})),$.bind(this.row2,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.options.onUpdate("ROW2"),t.close()})),$.bind(this.col,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.options.onUpdate("COL"),t.close()})),$.bind(this.col1,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.options.onUpdate("COL1"),t.close()})),$.bind(this.col2,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.options.onUpdate("COL2"),t.close()}))}},{key:"destroy",value:function(){Qa(tu(e.prototype),"destroy",this).call(this),this.unbind()}}])&&$a(n.prototype,i),c&&$a(n,c),e}(me);function ru(t){return(ru="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ou(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function iu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function lu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function au(t,e,n){return(au="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=uu(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function uu(t){return(uu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function su(t,e){return(su=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fu=function(t){function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{contextMenu:{}};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(r=uu(e).call(this,"".concat(o,"-tools-fixed")))||"object"!==ru(r)&&"function"!=typeof r?lu(n):r).options=i,t.icon=new kt("freeze"),t.rowStatus=!1,t.colStatus=!1,t.setIcon(t.icon),t.fixedContextMenu=new nu(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ou(Object(n),!0).forEach((function(e){iu(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ou(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({el:lu(t)},t.options.contextMenu)),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&su(t,e)}(e,t),n=e,(r=[{key:"setFixedColStatus",value:function(t){var e=this.fixedContextMenu;t?(this.colStatus=!0,e.col.setTitle("取消冻结列")):(this.colStatus=!1,e.col.setTitle("冻结至当前列"))}},{key:"setFixedRowStatus",value:function(t){var e=this.fixedContextMenu;t?(this.rowStatus=!0,e.row.setTitle("取消冻结行")):(this.rowStatus=!1,e.row.setTitle("冻结至当前行"))}},{key:"destroy",value:function(){au(uu(e.prototype),"destroy",this).call(this),this.fixedContextMenu.destroy()}}])&&cu(n.prototype,r),i&&cu(n,i),e}(ie);function hu(t){return(hu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yu(t,e){return!e||"object"!==hu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pu(t){return(pu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bu(t,e){return(bu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var du=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=yu(this,pu(e).call(this,"".concat(o,"-tools-filter")))).icon=new kt("filter"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bu(t,e)}(e,t),e}(Lt);function vu(t){return(vu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gu(t,e){return!e||"object"!==vu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wu(t){return(wu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Eu(t,e){return(Eu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var mu=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=gu(this,wu(e).call(this,"".concat(o,"-tools-format")))).icon=new kt("functions"),t.setIcon(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Eu(t,e)}(e,t),e}(ie);function Ou(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Tu=function(){function t(e){var n=e.align,r=void 0===n?al.ALIGN.left:n,o=e.verticalAlign,i=void 0===o?al.VERTICAL_ALIGN.center:o,c=e.textWrap,l=void 0===c?al.TEXT_WRAP.TRUNCATE:c,a=e.strikethrough,u=void 0!==a&&a,s=e.underline,f=void 0!==s&&s,h=e.color,y=void 0===h?"rgb(0,0,0)":h,p=e.name,b=void 0===p?"Arial":p,d=e.size,v=void 0===d?14:d,g=e.bold,w=void 0!==g&&g,E=e.italic,m=void 0!==E&&E,O=e.angle,T=void 0===O?0:O,x=e.direction,_=void 0===x?al.TEXT_DIRECTION.HORIZONTAL:x,S=e.padding,k=void 0===S?5:S;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.align=r,this.verticalAlign=i,this.textWrap=l,this.strikethrough=u,this.underline=f,this.color=y,this.name=b,this.size=v,this.bold=w,this.italic=m,this.direction=_,this.angle=T,this.padding=k}var e,n,r;return e=t,(n=[{key:"clone",value:function(){return new t({align:this.align,verticalAlign:this.verticalAlign,textWrap:this.textWrap,strikethrough:this.strikethrough,underline:this.underline,color:this.color,name:this.name,size:this.size,bold:this.bold,italic:this.italic,angle:this.angle,direction:this.direction,padding:this.padding})}}])&&Ou(e.prototype,n),r&&Ou(e,r),t}();function xu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _u(t,e,n){return e&&xu(t.prototype,e),n&&xu(t,n),t}Tu.scaleAdapter=null;var Su=0,ku=function(){function t(e){var n=e.widthType,r=void 0===n?x.LINE_WIDTH_TYPE.low:n,o=e.width,i=void 0===o?-1:o,c=e.color,l=void 0===c?"#000000":c,a=e.zIndex,u=void 0===a?0:a,s=e.display,f=void 0!==s&&s,h=e.type,y=void 0===h?vc.SOLID_LINE:h;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$zIndex=u,this.$display=f,this.$color=l,this.$type=y,this.$widthType=1===i?x.LINE_WIDTH_TYPE.low:2===i?x.LINE_WIDTH_TYPE.medium:3===i?x.LINE_WIDTH_TYPE.high:r,u>Su&&(Su=u)}return _u(t,null,[{key:"getZIndex",value:function(){return Su+=1}}]),_u(t,[{key:"equal",value:function(t){var e=this.widthType===t.widthType,n=this.color===t.color,r=this.type===t.type;return n&&e&&r}},{key:"toJSON",value:function(){return{zIndex:this.$zIndex,display:this.$display,widthType:this.$widthType,color:this.$color,type:this.$type}}},{key:"priority",value:function(t){if(H.isUnDef(t))return-2;var e=this.zIndex,n=t.zIndex;return e>n?1:n>e?-1:0}},{key:"display",get:function(){return this.$display},set:function(e){this.$zIndex=t.getZIndex(),this.$display=e}},{key:"widthType",get:function(){return this.$widthType},set:function(e){this.$zIndex=t.getZIndex(),this.$widthType=e}},{key:"color",get:function(){return this.$color},set:function(e){this.$zIndex=t.getZIndex(),this.$color=e}},{key:"type",get:function(){return this.$type},set:function(e){this.$zIndex=t.getZIndex(),this.$type=e}},{key:"zIndex",get:function(){return this.$zIndex},set:function(t){this.$zIndex=t}}]),t}();function Cu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Pu=function(){function t(e){var n=e.left,r=void 0===n?{}:n,o=e.bottom,i=void 0===o?{}:o,c=e.top,l=void 0===c?{}:c,a=e.right,u=void 0===a?{}:a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.left=new ku(r),this.bottom=new ku(i),this.top=new ku(l),this.right=new ku(u)}var e,n,r;return e=t,(n=[{key:"hasDouble",value:function(){var t=this.top,e=this.left,n=this.right,r=this.bottom;return t.type===vc.DOUBLE_LINE||e.type===vc.DOUBLE_LINE||n.type===vc.DOUBLE_LINE||r.type===vc.DOUBLE_LINE}},{key:"isDisplay",value:function(){return this.left.display||this.top.display||this.bottom.display||this.right.display}},{key:"setAllDisplay",value:function(t){this.setBDisplay(t),this.setLDisplay(t),this.setTDisplay(t),this.setRDisplay(t)}},{key:"setLDisplay",value:function(t){this.left.display=t}},{key:"setTDisplay",value:function(t){this.top.display=t}},{key:"setRDisplay",value:function(t){this.right.display=t}},{key:"setBDisplay",value:function(t){this.bottom.display=t}},{key:"setAllColor",value:function(t){this.setBColor(t),this.setLColor(t),this.setTColor(t),this.setRColor(t)}},{key:"setLColor",value:function(t){this.left.color=t}},{key:"setTColor",value:function(t){this.top.color=t}},{key:"setRColor",value:function(t){this.right.color=t}},{key:"setBColor",value:function(t){this.bottom.color=t}},{key:"setAllWidthType",value:function(t){this.setBWidthType(t),this.setLWidthType(t),this.setTWidthType(t),this.setRWidthType(t)}},{key:"setLWidthType",value:function(t){this.left.widthType=t}},{key:"setTWidthType",value:function(t){this.top.widthType=t}},{key:"setRWidthType",value:function(t){this.right.widthType=t}},{key:"setBWidthType",value:function(t){this.bottom.widthType=t}},{key:"setAllType",value:function(t){this.setBType(t),this.setLType(t),this.setTType(t),this.setRType(t)}},{key:"setLType",value:function(t){this.left.type=t}},{key:"setTType",value:function(t){this.top.type=t}},{key:"setRType",value:function(t){this.right.type=t}},{key:"setBType",value:function(t){this.bottom.type=t}},{key:"updateMaxIndex",value:function(){var t=ku.getZIndex();this.bottom.zIndex=t,this.left.zIndex=t,this.top.zIndex=t,this.right.zIndex=t}},{key:"clone",value:function(){return new t({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}}])&&Cu(e.prototype,n),r&&Cu(e,r),t}();function Ru(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ju=function(){function t(e){var n=e.x,r=e.y,o=e.width,i=e.height;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=n,this.y=r,this.width=o,this.height=i}var e,n,r;return e=t,(n=[{key:"inRectPosition",value:function(e){return new t({x:this.x-e.x,y:this.y-e.y,width:this.width,height:this.height})}},{key:"disjoint",value:function(t){return this.x>t.x+t.width||this.y>this.y+t.height||t.x>this.x+this.width||t.y>this.y+this.height}},{key:"expandSize",value:function(t){return this.width+=t,this.height+=t,this}},{key:"includePoint",value:function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height}},{key:"includeRect",value:function(t){var e=t.x,n=t.y,r=t.width,o=t.height;return this.x<=e&&this.x+this.width>=e+r&&this.y<=n&&this.y+this.height>=n+o}},{key:"clone",value:function(){return new t({x:this.x,y:this.y,width:this.width,height:this.height})}}])&&Ru(e.prototype,n),r&&Ru(e,r),t}();function Lu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Iu=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.x,r=void 0===n?0:n,o=e.y,i=void 0===o?0:o;Lu(this,t),this.x=r,this.y=i};function Au(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Nu=function(){function t(e){var n=e.rect,r=e.draw,o=e.offset,i=void 0===o?0:o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rect=n,this.draw=r,this.offset=i}var e,n,r;return e=t,(n=[{key:"open",value:function(){var t=this.rect,e=this.draw,n=this.offset,r=t.x,o=t.y,i=t.width,c=t.height;return e.save().rect(r,o,i+n,c+n).clip().beginPath(),this}},{key:"close",value:function(){return this.draw.restore(),this}}])&&Au(e.prototype,n),r&&Au(e,r),t}();function Vu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Du(t,e,n){return e&&Vu(t.prototype,e),n&&Vu(t,n),t}var Mu=function(){function t(e){var n=e.vertical,r=void 0===n?t.ICON_VERTICAL.CENTER:n,o=e.horizontal,i=void 0===o?t.ICON_HORIZONTAL.RIGHT:o,c=e.type,l=void 0===c?t.ICON_TYPE.image:c,a=e.image,u=void 0===a?H.Nul:a,s=e.focus,f=void 0===s?null:s,h=e.height,y=void 0===h?16:h,p=e.width,b=void 0===p?16:p,d=e.color,v=void 0===d?"#ffffff":d,g=e.offset,w=void 0===g?{x:0,y:0}:g,E=e.onDraw,m=void 0===E?function(){}:E,O=e.onLeave,T=void 0===O?function(){}:O,x=e.onMove,_=void 0===x?function(){}:x,S=e.onDown,k=void 0===S?function(){}:S,C=e.onEnter,P=void 0===C?function(){}:C;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vertical=r,this.horizontal=i,this.width=b,this.height=y,this.type=l,this.image=u,this.color=v,this.focus=f,this.offset=new Iu(w),this.onLeave=T,this.onMove=_,this.onDraw=m,this.onDown=k,this.onEnter=P,this.rect=null}return Du(t,null,[{key:"newInstances",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[],r=0;r<e.length;r+=1){var o=e[r];n.push(new t(o))}return n}}]),Du(t,[{key:"position",value:function(e){var n=this.horizontal,r=this.vertical,o=x.srcTransformStylePx(this.offset.x),i=x.srcTransformStylePx(this.offset.y),c=x.srcTransformStylePx(this.width),l=x.srcTransformStylePx(this.height),a=e.x,u=e.y,s=e.width,f=e.height,h=0,y=0;switch(n){case t.ICON_HORIZONTAL.CENTER:h=a+s/2-c/2;break;case t.ICON_HORIZONTAL.LEFT:h=a;break;case t.ICON_HORIZONTAL.RIGHT:h=a+s-c}switch(r){case t.ICON_VERTICAL.CENTER:y=u+f/2-l/2;break;case t.ICON_VERTICAL.TOP:y=u;break;case t.ICON_VERTICAL.BOTTOM:y=u+f-l}return new ju({x:h+=o,y:y+=i,width:c,height:l})}},{key:"loadImage",value:function(e){var n=this,r=e.load,o=e.sync,i=this.image;switch(this.type){case t.ICON_TYPE.image:if(i instanceof Image)o(i);else{var c=new Image;c.src=i,c.complete?(this.image=c,o(this.image)):(c.onload=function(){n.image=c,r(c)},c.onerror=function(){console.error("图片加载失败".concat(i))})}break;case t.ICON_TYPE.draw:o()}}},{key:"drawIcon",value:function(e){var n=e.rect,r=e.draw,o=this.type;switch(this.rect=n,o){case t.ICON_TYPE.image:this.drawImage({rect:n,draw:r});break;case t.ICON_TYPE.draw:this.drawCustom({rect:n,draw:r})}}},{key:"drawCustom",value:function(t){var e=t.rect,n=t.draw;this.onDraw({rect:e,draw:n})}},{key:"drawImage",value:function(t){var e=t.rect,n=t.draw,r=this.image,o=this.color,i=this.position(e),c=i.x,l=i.y,a=i.width,u=i.height,s=e.includeRect(i),f=new Nu({rect:e,draw:n});!1===s&&f.open(),o&&(n.attr({fillStyle:o}),n.fillRect(c,l,a,u)),n.drawImage(r,0,0,r.width,r.height,c,l,a,u),!1===s&&f.close()}},{key:"eventHandle",value:function(e){var n=e.type,r=e.x,o=e.y,i=e.native,c=this.rect,l=this.focus;if(c){var a=this.position(c),u=a.inRectPosition(c),s=l.activate;switch(n){case t.ICON_EVENT_TYPE.MOUSE_DOWN:u.includePoint(r,o)&&(l.setActivate(this),this.onDown({native:i,position:a}));break;case t.ICON_EVENT_TYPE.MOUSE_MOVE:u.includePoint(r,o)?(s!==this&&this.onEnter({native:i,position:a}),l.setActivate(this),this.onMove({native:i,position:a})):s&&(l.setActivate(null),this.onLeave({native:i,position:a}))}}}},{key:"setOnDraw",value:function(t){this.onDraw=t}},{key:"setOnDown",value:function(t){this.onDown=t}},{key:"setOnMove",value:function(t){this.onMove=t}},{key:"setOnEnter",value:function(t){this.onEnter=t}},{key:"setOnLeave",value:function(t){this.onLeave=t}},{key:"setFocus",value:function(t){this.focus=t}}]),t}();function Wu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Mu.ICON_HORIZONTAL={LEFT:0,RIGHT:1,CENTER:2},Mu.ICON_VERTICAL={TOP:3,BOTTOM:4,CENTER:5},Mu.ICON_TYPE={image:1,custom:2},Mu.ICON_EVENT_TYPE={MOUSE_DOWN:1,MOUSE_MOVE:2};var Bu=function(){function t(e){var n=e.text,r=void 0===n?H.EMPTY:n,o=e.background,i=void 0===o?H.Nul:o,c=e.format,l=void 0===c?"default":c,a=e.borderAttr,u=void 0===a?{}:a,s=e.icons,f=void 0===s?[]:s,h=e.fontAttr,y=void 0===h?{}:h,p=e.contentWidth,b=void 0===p?0:p,d=e.leftSdistWidth,v=void 0===d?0:d,g=e.rightSdistWidth,w=void 0===g?0:g,E=e.contentType,m=void 0===E?t.CONTENT_TYPE.STRING:E;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ruler=null,this.background=i,this.format=l,this.icons=Mu.newInstances(f),this.borderAttr=new Pu(u),this.fontAttr=new Tu(y),this.contentWidth=b,this.leftSdistWidth=v,this.rightSdistWidth=w,this.contentType=m,this.convert(r)}var e,n,r;return e=t,(n=[{key:"setContentWidth",value:function(t){this.contentWidth=t}},{key:"setFontAttr",value:function(t){this.fontAttr=t}},{key:"setBorderAttr",value:function(t){this.borderAttr=t}},{key:"setIcons",value:function(t){this.icons=t}},{key:"setText",value:function(t){this.convert(t),this.setContentWidth(0),this.setLeftSdistWidth(0),this.setRightSdistWidth(0)}},{key:"setRuler",value:function(t){this.ruler=t}},{key:"setLeftSdistWidth",value:function(t){this.leftSdistWidth=t}},{key:"setRightSdistWidth",value:function(t){this.rightSdistWidth=t}},{key:"clone",value:function(){return new t({background:this.background,format:this.format,text:this.text,fontAttr:this.fontAttr,borderAttr:this.borderAttr,contentWidth:this.contentWidth,icons:this.icons})}},{key:"convert",value:function(e){switch(this.contentType){case t.CONTENT_TYPE.NUMBER:this.text=H.parseFloat(e);break;case t.CONTENT_TYPE.STRING:this.text=e}}},{key:"toJSON",value:function(){return{background:this.background,format:this.format,text:this.text,fontAttr:this.fontAttr,borderAttr:this.borderAttr,contentWidth:this.contentWidth,icons:this.icons}}}])&&Wu(e.prototype,n),r&&Wu(e,r),t}();function Yu(t){return(Yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hu(t,e){return!e||"object"!==Yu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Fu(t){return(Fu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Uu(t,e){return(Uu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Bu.CONTENT_TYPE={NUMBER:0,STRING:1};var Gu=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Hu(this,Fu(e).call(this,"".concat(o,"-scale-context-menu-item")))).scale=t,n.titleElement=z("div","".concat(o,"-scale-context-menu-item-title")),n.titleElement.text("".concat(t,"%")),n.children(n.titleElement),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Uu(t,e)}(e,t),e}(Se);function zu(t){return(zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Zu(t,e){return!e||"object"!==zu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ju(t,e,n){return(Ju="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ku(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Ku(t){return(Ku=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $u(t,e){return($u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qu=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Zu(this,Ku(e).call(this,"".concat(o,"-scale-context-menu"),H.copy({onUpdate:function(){}},n)))).items=[new Gu(200),new Gu(150),new Gu(125),new Gu(100),new Gu(90),new Gu(75),new Gu(50)],t.items.forEach((function(e){t.addItem(e)})),t.bind(),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$u(t,e)}(e,t),n=e,(i=[{key:"bind",value:function(){var t=this;this.items.forEach((function(e){$.bind(e,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.update(e.scale)}))}))}},{key:"unbind",value:function(){this.items.forEach((function(t){$.unbind(t,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN)}))}},{key:"update",value:function(t){this.options.onUpdate(t),this.close()}},{key:"destroy",value:function(){Ju(Ku(e.prototype),"destroy",this).call(this),this.unbind()}}])&&Xu(n.prototype,i),c&&Xu(n,c),e}(me);function Qu(t){return(Qu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ts(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function es(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ns(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rs(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function os(t,e,n){return(os="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=is(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function is(t){return(is=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cs(t,e){return(cs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ls=function(t){function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{contextMenu:{}};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(r=is(e).call(this,"".concat(o,"-tools-scale")))||"object"!==Qu(r)&&"function"!=typeof r?rs(n):r).options=i,t.setTitle("100%"),t.setWidth(50),t.setEllipsis(),t.scaleContextMenu=new qu(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ts(Object(n),!0).forEach((function(e){es(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ts(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({el:rs(t)},t.options.contextMenu)),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cs(t,e)}(e,t),n=e,(r=[{key:"destroy",value:function(){os(is(e.prototype),"destroy",this).call(this),this.scaleContextMenu.destroy()}}])&&ns(n.prototype,r),i&&ns(n,i),e}(ie);function as(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var c,l=t[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function us(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ss=function(){function t(e,n,r,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sri=e,this.sci=n,this.eri=r,this.eci=o,this.w=i,this.h=c}var e,n,r;return e=t,r=[{key:"valueOf",value:function(e){var n=e.split(":"),r=as(H.expr2xy(n[0]),2),o=r[0],i=r[1],c=i,l=o;if(n.length>1){var a=as(H.expr2xy(n[1]),2);l=a[0],c=a[1]}return new t(i,o,c,l)}}],(n=[{key:"each",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},r=this.sri,o=this.sci,i=this.eri,c=this.eci,l=!1;t.getRowIterator().setBegin(r).setEnd(i).setLoop((function(r){return n(r)&&t.getColIterator().setBegin(o).setEnd(c).setLoop((function(t){return l=e(r,t)})).execute(),l})).execute()}},{key:"set",value:function(t,e,n,r){this.sri=t,this.sci=e,this.eri=n,this.eci=r}},{key:"multiple",value:function(){return this.eri-this.sri>0||this.eci-this.sci>0}},{key:"includes",value:function(){for(var t=0,e=0,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];if(1===r.length){var i=H.expr2xy(r[0]),c=as(i,2);e=c[0],t=c[1]}else 2===r.length&&(t=r[0],e=r[1]);var l=this.sri,a=this.sci,u=this.eri,s=this.eci;return l<=t&&t<=u&&a<=e&&e<=s}},{key:"contains",value:function(t){return this.sri<=t.sri&&this.sci<=t.sci&&this.eri>=t.eri&&this.eci>=t.eci}},{key:"within",value:function(t){return this.sri>=t.sri&&this.sci>=t.sci&&this.eri<=t.eri&&this.eci<=t.eci}},{key:"disjoint",value:function(t){return this.sri>t.eri||this.sci>t.eci||t.sri>this.eri||t.sci>this.eci}},{key:"intersects",value:function(t){return this.sri<=t.eri&&this.sci<=t.eci&&t.sri<=this.eri&&t.sci<=this.eci}},{key:"union",value:function(e){var n=this.sri,r=this.sci,o=this.eri,i=this.eci;return new t(e.sri<n?e.sri:n,e.sci<r?e.sci:r,e.eri>o?e.eri:o,e.eci>i?e.eci:i)}},{key:"coincide",value:function(e){var n=this.sri,r=this.sci,o=this.eri,i=this.eci;return this.disjoint(e)?t.EMPTY:new t(e.sri>n?e.sri:n,e.sci>r?e.sci:r,e.eri<o?e.eri:o,e.eci<i?e.eci:i)}},{key:"coincideDifference",value:function(e){return this.coincide(e).equals(t.EMPTY)?[]:this.difference(e)}},{key:"difference",value:function(e){var n=[],r=function(e,r,o,i){n.push(new t(e,r,o,i))},o=this.sri,i=this.sci,c=this.eri,l=this.eci,a=e.sri-o,u=e.sci-i,s=c-e.eri,f=l-e.eci;return a>0?(r(o,i,e.sri-1,l),s>0?(r(e.eri+1,i,c,l),u>0&&r(e.sri,i,e.eri,e.sci-1),f>0&&r(e.sri,e.eci+1,e.eri,l)):(u>0&&r(e.sri,i,c,e.sci-1),f>0&&r(e.sri,e.eci+1,c,l))):s>0&&(r(e.eri+1,i,c,l),u>0&&r(o,i,e.eri,e.sci-1),f>0&&r(o,e.eci+1,e.eri,l)),u>0?(r(o,i,c,e.sci-1),f>0?(r(o,e.eri+1,c,l),a>0&&r(o,e.sci,e.sri-1,e.eci),s>0&&r(e.sri+1,e.sci,c,e.eci)):(a>0&&r(o,e.sci,e.sri-1,l),s>0&&r(e.sri+1,e.sci,c,l))):f>0&&(r(o,e.eci+1,c,l),a>0&&r(o,i,e.sri-1,e.eci),s>0&&r(e.eri+1,i,c,e.eci)),n}},{key:"size",value:function(){return[this.eri-this.sri+1,this.eci-this.sci+1]}},{key:"brink",value:function(){var e=this.sri,n=this.eri,r=this.sci,o=this.eci,i=new t(e,r,e,o),c=new t(n,r,n,o);return{top:i,right:new t(e,o,n,o),bottom:c,left:new t(e,r,n,r)}}},{key:"equals",value:function(t){return this.eri===t.eri&&this.eci===t.eci&&this.sri===t.sri&&this.sci===t.sci}},{key:"clone",value:function(){return new t(this.sri,this.sci,this.eri,this.eci,this.w,this.h)}},{key:"toString",value:function(){var t=this.sri,e=this.sci,n=this.eri,r=this.eci,o=H.xy2expr(e,t);return this.multiple()&&(o="".concat(o,":").concat(H.xy2expr(r,n))),o}}])&&us(e.prototype,n),r&&us(e,r),t}();function fs(t){return(fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ys(t,e){return!e||"object"!==fs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ps(t){return(ps=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bs(t,e){return(bs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}ss.EMPTY=new ss(-1,-1,-1,-1);var ds=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ys(this,ps(e).call(this,"".concat(o,"-x-screen-part ").concat(t)))).xScreenZone=null,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bs(t,e)}(e,t),n=e,(r=[{key:"onAttach",value:function(t){this.xScreenZone=t}}])&&hs(n.prototype,r),i&&hs(n,i),e}(ct);function vs(t){return(vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gs(t,e){return!e||"object"!==vs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ws(t){return(ws=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Es(t,e){return(Es=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ms=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),gs(this,ws(e).call(this,"".concat(o,"-x-screen-lt-part ").concat(t)))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Es(t,e)}(e,t),e}(ds);function Os(t){return(Os="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ts(t,e){return!e||"object"!==Os(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xs(t){return(xs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _s(t,e){return(_s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ss=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ts(this,xs(e).call(this,"".concat(o,"-x-screen-br-part ").concat(t)))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_s(t,e)}(e,t),e}(ds);function ks(t){return(ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cs(t,e){return!e||"object"!==ks(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ps(t){return(Ps=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rs(t,e){return(Rs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var js=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Cs(this,Ps(e).call(this,"".concat(o,"-x-screen-l-part ").concat(t)))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rs(t,e)}(e,t),e}(ds);function Ls(t){return(Ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Is(t,e){return!e||"object"!==Ls(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function As(t){return(As=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ns(t,e){return(Ns=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Vs=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Is(this,As(e).call(this,"".concat(o,"-x-screen-br-part ").concat(t)))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ns(t,e)}(e,t),e}(ds);function Ds(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ms=function(){function t(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).table;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e,this.lt=new ms,this.t=new Ss,this.br=new Vs,this.l=new js,this.xScreen=null}var e,n,r;return e=t,(n=[{key:"onAdd",value:function(){}},{key:"hide",value:function(){this.lt.hide(),this.t.hide(),this.br.hide(),this.l.hide()}},{key:"show",value:function(){this.lt.show(),this.t.show(),this.br.show(),this.l.show()}},{key:"setXScreen",value:function(t){this.xScreen=t}},{key:"destroy",value:function(){}}])&&Ds(e.prototype,n),r&&Ds(e,r),t}();function Ws(t){return(Ws="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bs(t,e){return!e||"object"!==Ws(e)&&"function"!=typeof e?Ys(t):e}function Ys(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hs(t,e,n){return(Hs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Fs(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Fs(t){return(Fs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Us(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gs(t,e)}function Gs(t,e){return(Gs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Zs(t,e,n){return e&&Xs(t.prototype,e),n&&Xs(t,n),t}var Js=function(){function t(e){zs(this,t),this.viewEyes=e}return Zs(t,[{key:"setDisplay",value:function(t){var e=this.getXScreenViewRange().coincide(t),n=this.getPart();return e!==ss.EMPTY?(n.show(),!0):(n.hide(),!1)}},{key:"getPart",value:function(){throw new TypeError("child impl")}},{key:"getXScreenViewRange",value:function(){throw new TypeError("child impl")}}]),t}(),Ks=function(t){function e(){return zs(this,e),Bs(this,Fs(e).apply(this,arguments))}return Us(e,t),Zs(e,[{key:"setDisplay",value:function(t){var n=this.viewEyes.table.xFixedView;return!(!n.hasFixedTop()||!n.hasFixedLeft())&&Hs(Fs(e.prototype),"setDisplay",this).call(this,t)}},{key:"getPart",value:function(){return this.viewEyes.lt}},{key:"getXScreenViewRange",value:function(){var t=this.viewEyes.table.xFixedView;return t.hasFixedTop()&&t.hasFixedLeft()?t.getFixedView():ss.EMPTY}}]),e}(Js),$s=function(t){function e(){return zs(this,e),Bs(this,Fs(e).apply(this,arguments))}return Us(e,t),Zs(e,[{key:"setDisplay",value:function(t){return!!this.viewEyes.table.xFixedView.hasFixedTop()&&Hs(Fs(e.prototype),"setDisplay",this).call(this,t)}},{key:"getPart",value:function(){return this.viewEyes.t}},{key:"getXScreenViewRange",value:function(){var t=this.viewEyes.table,e=t.xFixedView;if(e.hasFixedTop()){var n=e.getFixedView(),r=t.getScrollView();return new ss(n.sri,r.sci,n.eri,r.eci)}return ss.EMPTY}}]),e}(Js),qs=function(t){function e(){return zs(this,e),Bs(this,Fs(e).apply(this,arguments))}return Us(e,t),Zs(e,[{key:"getPart",value:function(){return this.viewEyes.br}},{key:"getXScreenViewRange",value:function(){return this.viewEyes.table.getScrollView()}}]),e}(Js),Qs=function(t){function e(){return zs(this,e),Bs(this,Fs(e).apply(this,arguments))}return Us(e,t),Zs(e,[{key:"setDisplay",value:function(t){return!!this.viewEyes.table.xFixedView.hasFixedLeft()&&(Hs(Fs(e.prototype),"setDisplay",this).call(this,t),!0)}},{key:"getPart",value:function(){return this.viewEyes.l}},{key:"getXScreenViewRange",value:function(){var t=this.viewEyes.table,e=t.xFixedView;if(e.hasFixedLeft()){var n=e.getFixedView(),r=t.getScrollView();return new ss(r.sri,n.sci,r.eri,n.eci)}return ss.EMPTY}}]),e}(Js),tf=function(t){function e(){var t,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).table;return zs(this,e),(t=Bs(this,Fs(e).call(this,{table:n}))).ltDisplay=new Ks(Ys(t)),t.tDisplay=new $s(Ys(t)),t.brDisplay=new qs(Ys(t)),t.lDisplay=new Qs(Ys(t)),t}return Us(e,t),Zs(e,[{key:"setDisplay",value:function(t){var e=this.ltDisplay.setDisplay(t),n=this.tDisplay.setDisplay(t),r=this.brDisplay.setDisplay(t),o=this.lDisplay.setDisplay(t);return e||n||r||o}},{key:"setLocal",value:function(){throw new TypeError("child impl")}},{key:"setSizer",value:function(){throw new TypeError("child impl")}}]),e}(Ms);function ef(t){return(ef="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nf(t,e){return!e||"object"!==ef(e)&&"function"!=typeof e?rf(t):e}function rf(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function of(t,e,n){return(of="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cf(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function cf(t){return(cf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lf(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&af(t,e)}function af(t,e){return(af=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function uf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ff(t,e,n){return e&&sf(t.prototype,e),n&&sf(t,n),t}var hf=function(){function t(e){uf(this,t),this.viewLocal=e}return ff(t,[{key:"setLeft",value:function(t){var e=this.viewLocal.table.cols,n=this.getXScreenViewRange(),r=n.coincide(t),o=r!==ss.EMPTY?e.sectionSumWidth(n.sci,r.sci-1):0;this.getPart().offset({left:o})}},{key:"setTop",value:function(t){var e=this.viewLocal.table.rows,n=this.getXScreenViewRange(),r=n.coincide(t),o=r!==ss.EMPTY?e.sectionSumHeight(n.sri,r.sri-1):0;this.getPart().offset({top:o})}},{key:"setLocal",value:function(t){this.setTop(t),this.setLeft(t)}},{key:"getPart",value:function(){throw new TypeError("child impl")}},{key:"getXScreenViewRange",value:function(){throw new TypeError("child impl")}}]),t}(),yf=function(t){function e(){return uf(this,e),nf(this,cf(e).apply(this,arguments))}return lf(e,t),ff(e,[{key:"setLocal",value:function(t){var n=this.viewLocal.table.xFixedView;n.hasFixedTop()&&n.hasFixedLeft()&&of(cf(e.prototype),"setLocal",this).call(this,t)}},{key:"getPart",value:function(){return this.viewLocal.lt}},{key:"getXScreenViewRange",value:function(){var t=this.viewLocal.table.xFixedView;return t.hasFixedTop()&&t.hasFixedLeft()?t.getFixedView():ss.EMPTY}}]),e}(hf),pf=function(t){function e(){return uf(this,e),nf(this,cf(e).apply(this,arguments))}return lf(e,t),ff(e,[{key:"setLocal",value:function(t){this.viewLocal.table.xFixedView.hasFixedTop()&&of(cf(e.prototype),"setLocal",this).call(this,t)}},{key:"getPart",value:function(){return this.viewLocal.t}},{key:"getXScreenViewRange",value:function(){var t=this.viewLocal.table,e=t.xFixedView;if(e.hasFixedTop()){var n=e.getFixedView(),r=t.getScrollView();return new ss(n.sri,r.sci,n.eri,r.eci)}return ss.EMPTY}}]),e}(hf),bf=function(t){function e(){return uf(this,e),nf(this,cf(e).apply(this,arguments))}return lf(e,t),ff(e,[{key:"getPart",value:function(){return this.viewLocal.br}},{key:"getXScreenViewRange",value:function(){return this.viewLocal.table.getScrollView()}}]),e}(hf),df=function(t){function e(){return uf(this,e),nf(this,cf(e).apply(this,arguments))}return lf(e,t),ff(e,[{key:"setLocal",value:function(t){this.viewLocal.table.xFixedView.hasFixedLeft()&&of(cf(e.prototype),"setLocal",this).call(this,t)}},{key:"getPart",value:function(){return this.viewLocal.l}},{key:"getXScreenViewRange",value:function(){var t=this.viewLocal.table,e=t.xFixedView;if(e.hasFixedLeft()){var n=e.getFixedView(),r=t.getScrollView();return new ss(r.sri,n.sci,r.eri,n.eci)}return ss.EMPTY}}]),e}(hf),vf=function(t){function e(){var t,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).table;return uf(this,e),(t=nf(this,cf(e).call(this,{table:n}))).tlLocal=new yf(rf(t)),t.tLocal=new pf(rf(t)),t.brLocal=new bf(rf(t)),t.lLocal=new df(rf(t)),t}return lf(e,t),ff(e,[{key:"setLocal",value:function(t){this.tlLocal.setLocal(t),this.tLocal.setLocal(t),this.brLocal.setLocal(t),this.lLocal.setLocal(t)}}]),e}(tf);function gf(t){return(gf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wf(t,e){return!e||"object"!==gf(e)&&"function"!=typeof e?Ef(t):e}function Ef(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mf(t,e,n){return(mf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Of(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Of(t){return(Of=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tf(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xf(t,e)}function xf(t,e){return(xf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function kf(t,e,n){return e&&Sf(t.prototype,e),n&&Sf(t,n),t}var Cf=function(){function t(e){_f(this,t),this.viewSizer=e}return kf(t,[{key:"setSizer",value:function(t){var e=this.viewSizer.table,n=e.cols,r=e.rows,o=this.getXScreenViewRange().coincide(t),i=n.rectRangeSumWidth(o),c=r.rectRangeSumHeight(o);this.getPart().offset({width:x.offsetToLineInside(i),height:x.offsetToLineInside(c)})}},{key:"getPart",value:function(){throw new TypeError("child impl")}},{key:"getXScreenViewRange",value:function(){throw new TypeError("child impl")}}]),t}(),Pf=function(t){function e(){return _f(this,e),wf(this,Of(e).apply(this,arguments))}return Tf(e,t),kf(e,[{key:"setSizer",value:function(t){var n=this.viewSizer.table.xFixedView;n.hasFixedTop()&&n.hasFixedLeft()&&mf(Of(e.prototype),"setSizer",this).call(this,t)}},{key:"getPart",value:function(){return this.viewSizer.lt}},{key:"getXScreenViewRange",value:function(){var t=this.viewSizer.table.xFixedView;return t.hasFixedTop()&&t.hasFixedLeft()?t.getFixedView():ss.EMPTY}}]),e}(Cf),Rf=function(t){function e(){return _f(this,e),wf(this,Of(e).apply(this,arguments))}return Tf(e,t),kf(e,[{key:"setSizer",value:function(t){this.viewSizer.table.xFixedView.hasFixedTop()&&mf(Of(e.prototype),"setSizer",this).call(this,t)}},{key:"getPart",value:function(){return this.viewSizer.t}},{key:"getXScreenViewRange",value:function(){var t=this.viewSizer.table,e=t.xFixedView;if(e.hasFixedTop()){var n=e.getFixedView(),r=t.getScrollView();return new ss(n.sri,r.sci,n.eri,r.eci)}return ss.EMPTY}}]),e}(Cf),jf=function(t){function e(){return _f(this,e),wf(this,Of(e).apply(this,arguments))}return Tf(e,t),kf(e,[{key:"getPart",value:function(){return this.viewSizer.br}},{key:"getXScreenViewRange",value:function(){return this.viewSizer.table.getScrollView()}}]),e}(Cf),Lf=function(t){function e(){return _f(this,e),wf(this,Of(e).apply(this,arguments))}return Tf(e,t),kf(e,[{key:"setSizer",value:function(t){this.viewSizer.table.xFixedView.hasFixedLeft()&&mf(Of(e.prototype),"setSizer",this).call(this,t)}},{key:"getPart",value:function(){return this.viewSizer.l}},{key:"getXScreenViewRange",value:function(){var t=this.viewSizer.table,e=t.xFixedView;if(e.hasFixedLeft()){var n=e.getFixedView(),r=t.getScrollView();return new ss(r.sri,n.sci,r.eri,n.eci)}return ss.EMPTY}}]),e}(Cf),If=function(t){function e(){var t,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).table;return _f(this,e),(t=wf(this,Of(e).call(this,{table:n}))).ltSizer=new Pf(Ef(t)),t.tSizer=new Rf(Ef(t)),t.brSizer=new jf(Ef(t)),t.lSizer=new Lf(Ef(t)),t}return Tf(e,t),kf(e,[{key:"setSizer",value:function(t){this.ltSizer.setSizer(t),this.tSizer.setSizer(t),this.brSizer.setSizer(t),this.lSizer.setSizer(t)}}]),e}(vf);function Af(t){return(Af="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Df(t,e,n){return e&&Vf(t.prototype,e),n&&Vf(t,n),t}function Mf(t,e){return!e||"object"!==Af(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Wf(t){return(Wf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bf(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yf(t,e)}function Yf(t,e){return(Yf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Hf={LT:Symbol("lt"),T:Symbol("t"),BR:Symbol("br"),L:Symbol("l"),LTT:Symbol("ltt"),LTL:Symbol("ltl"),BRT:Symbol("brt"),BRL:Symbol("brl"),ALL:Symbol("all")},Ff=function(t){function e(t){var n,r=t.table,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Nf(this,e),(n=Mf(this,Wf(e).call(this,{table:r}))).blt=new ms(o),n.bt=new Ss(o),n.bl=new js(o),n.bbr=new Vs(o),n.lt.children(n.blt),n.t.children(n.bt),n.l.children(n.bl),n.br.children(n.bbr),n}return Bf(e,t),Df(e,[{key:"hideBorder",value:function(){[this.bbr,this.bt,this.bl,this.blt].forEach((function(t){t.removeClass("show-bottom-border"),t.removeClass("show-top-border"),t.removeClass("show-right-border"),t.removeClass("show-left-border")}))}},{key:"showBorder",value:function(t){var e=this.getOverGo(t),n=this.getBorderDisplay(t);return this.showBBorder(e,n),this.showTBorder(e,n),this.showLBorder(e,n),this.showRBorder(e,n),n}}]),e}(function(t){function e(){return Nf(this,e),Mf(this,Wf(e).apply(this,arguments))}return Bf(e,t),Df(e,[{key:"getBorderDisplay",value:function(t){var e=this.table.getScrollView(),n={bottom:!1,left:!1,top:!1,right:!1};switch(this.getOverGo(t)){case Hf.LT:n.bottom=!0,n.top=!0,n.left=!0,n.right=!0;break;case Hf.T:n.bottom=!0,n.top=!0,n.left=t.sci>=e.sci&&t.sci<=e.eci,n.right=t.eci<=e.eci&&t.eci>=e.sci;break;case Hf.BR:n.bottom=t.eri<=e.eri&&t.eri>=e.sri,n.top=t.sri>=e.sri&&t.sri<=e.eri,n.left=t.sci>=e.sci&&t.sci<=e.eci,n.right=t.eci<=e.eci&&t.eci>=e.sci;break;case Hf.L:n.bottom=t.eri<=e.eri&&t.eri>=e.sri,n.top=t.sri>=e.sri&&t.sri<=e.eri,n.left=!0,n.right=!0;break;case Hf.LTT:n.bottom=!0,n.top=!0,n.left=!0,n.right=t.eci<=e.eci&&t.eci>=e.sci;break;case Hf.LTL:n.bottom=t.eri<=e.eri&&t.eri>=e.sri,n.top=!0,n.left=!0,n.right=!0;break;case Hf.BRT:n.bottom=t.eri<=e.eri&&t.eri>=e.sri,n.top=!0,n.left=t.sci>=e.sci&&t.sci<=e.eci,n.right=t.eci<=e.eci&&t.eci>=e.sci;break;case Hf.BRL:n.bottom=t.eri<=e.eri&&t.eri>=e.sri,n.top=t.sri>=e.sri&&t.sri<=e.eri,n.left=!0,n.right=t.eci<=e.eci&&t.eci>=e.sci;break;case Hf.ALL:n.bottom=t.eri<=e.eri&&t.eri>=e.sri,n.top=!0,n.left=!0,n.right=t.eci<=e.eci&&t.eci>=e.sci}return n}},{key:"getOverGo",value:function(t){var e=this.table,n=e.cols,r=e.rows,o=e.xFixedView,i=r.len-1,c=n.len-1,l=o.getFixedView();if(o.hasFixedTop()&&o.hasFixedLeft()){var a=l,u=new ss(l.sri,l.eci+1,l.eri,c),s=new ss(l.eri+1,l.sci,i,l.eci),f=new ss(l.eri+1,l.eci+1,i,c);if(a.contains(t))return Hf.LT;if(u.contains(t))return Hf.T;if(f.contains(t))return Hf.BR;if(s.contains(t))return Hf.L;var h=new ss(l.sri,l.sci,l.eri,c),y=new ss(l.sri,l.sci,i,l.eci),p=new ss(l.sri,l.eci+1,i,c),b=new ss(l.eri+1,l.sci,i,c);return h.contains(t)?Hf.LTT:y.contains(t)?Hf.LTL:p.contains(t)?Hf.BRT:b.contains(t)?Hf.BRL:Hf.ALL}if(o.hasFixedTop()){var d=new ss(l.sri,l.eci,l.eri,c),v=new ss(l.eri+1,l.eci+1,i,c);return d.contains(t)?Hf.T:v.contains(t)?Hf.BR:Hf.BRT}if(o.hasFixedLeft()){var g=new ss(l.eri,l.sci,i,l.eci),w=new ss(l.eri+1,l.eci+1,i,c);return g.contains(t)?Hf.L:w.contains(t)?Hf.BR:Hf.BRL}return Hf.BR}},{key:"showBBorder",value:function(t,e){switch(t){case Hf.LT:this.blt.addClass("show-bottom-border");break;case Hf.L:this.bl.addClass("show-bottom-border");break;case Hf.T:this.bt.addClass("show-bottom-border");break;case Hf.BR:e.bottom&&this.bbr.addClass("show-bottom-border");break;case Hf.LTT:this.blt.addClass("show-bottom-border"),this.bt.addClass("show-bottom-border");break;case Hf.LTL:e.bottom&&this.bl.addClass("show-bottom-border");break;case Hf.BRT:e.bottom&&this.bbr.addClass("show-bottom-border");break;case Hf.ALL:case Hf.BRL:e.bottom&&(this.bl.addClass("show-bottom-border"),this.bbr.addClass("show-bottom-border"))}}},{key:"showTBorder",value:function(t,e){switch(t){case Hf.LT:this.blt.addClass("show-top-border");break;case Hf.L:this.bl.addClass("show-top-border");break;case Hf.T:this.bt.addClass("show-top-border");break;case Hf.BR:e.top&&this.bbr.addClass("show-top-border");break;case Hf.LTT:this.blt.addClass("show-top-border"),this.bt.addClass("show-top-border");break;case Hf.LTL:this.blt.addClass("show-top-border");break;case Hf.BRT:this.bt.addClass("show-top-border");break;case Hf.BRL:e.top&&(this.bl.addClass("show-top-border"),this.bbr.addClass("show-top-border"));break;case Hf.ALL:this.blt.addClass("show-top-border"),this.bt.addClass("show-top-border")}}},{key:"showLBorder",value:function(t,e){switch(t){case Hf.LT:this.blt.addClass("show-left-border");break;case Hf.L:this.bl.addClass("show-left-border");break;case Hf.T:e.left&&this.bt.addClass("show-left-border");break;case Hf.BR:e.left&&this.bbr.addClass("show-left-border");break;case Hf.LTT:this.blt.addClass("show-left-border");break;case Hf.LTL:this.blt.addClass("show-left-border"),this.bl.addClass("show-left-border");break;case Hf.BRT:e.left&&(this.bt.addClass("show-left-border"),this.bbr.addClass("show-left-border"));break;case Hf.BRL:this.bl.addClass("show-left-border");break;case Hf.ALL:this.blt.addClass("show-left-border"),this.bl.addClass("show-left-border")}}},{key:"showRBorder",value:function(t,e){switch(t){case Hf.LT:this.blt.addClass("show-right-border");break;case Hf.L:this.bl.addClass("show-right-border");break;case Hf.T:e.right&&this.bt.addClass("show-right-border");break;case Hf.BR:e.right&&this.bbr.addClass("show-right-border");break;case Hf.LTT:e.right&&this.bt.addClass("show-right-border");break;case Hf.LTL:this.blt.addClass("show-right-border"),this.bl.addClass("show-right-border");break;case Hf.BRT:e.right&&(this.bt.addClass("show-right-border"),this.bbr.addClass("show-right-border"));break;case Hf.BRL:e.right&&this.bbr.addClass("show-right-border");break;case Hf.ALL:e.right&&(this.bt.addClass("show-right-border"),this.bbr.addClass("show-right-border"))}}}]),e}(If));function Uf(t){return(Uf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zf(t,e){return!e||"object"!==Uf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xf(t){return(Xf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zf(t,e){return(Zf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Jf=function(t){function e(t){var n,r=t.table;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=zf(this,Xf(e).call(this,{table:r},"".concat(o,"-part-border-css")))).type="solid",n.color="#42a642",n.setBorderType(n.type),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zf(t,e)}(e,t),n=e,(r=[{key:"setBorderType",value:function(t){this.type=t,this.blt.addClass(t),this.bl.addClass(t),this.bt.addClass(t),this.bbr.addClass(t)}},{key:"setBorderColor",value:function(t){this.color=t,this.blt.css("border-color",t),this.bl.css("border-color",t),this.bt.css("border-color",t),this.bbr.css("border-color",t)}}])&&Gf(n.prototype,r),i&&Gf(n,i),e}(Ff),Kf=n(0),$f=n.n(Kf),qf=n(1),Qf=n.n(qf),th=n(2),eh=n.n(th);function nh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var rh=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.flag=null,this.table=e}var e,n,r;return e=t,(n=[{key:"lock",value:function(t){return null===this.flag&&(this.flag=t),this}},{key:"set",value:function(t,e){if(null===this.flag||this.flag===e){var n=this.table;switch(t){case"s-resize":return void n.css("cursor","url(".concat(Qf.a,") 2.5 7.5,auto"));case"cell":return void n.css("cursor","url(".concat($f.a,") 7.5 7.5,auto"));case"e-resize":return void n.css("cursor","url(".concat(eh.a,") 7.5 2.5,auto"))}n.css("cursor",t)}}},{key:"free",value:function(t){return this.flag===t&&(this.flag=null,!0)}}])&&nh(e.prototype,n),r&&nh(e,r),t}();function oh(t){return(oh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ih(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ch(t,e){return!e||"object"!==oh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lh(t,e,n){return(lh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ah(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function ah(t){return(ah=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function uh(t,e){return(uh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}rh.KEYS={cell:"cell",crosshair:"crosshair",eResize:"e-resize",sResize:"s-resize",grab:"-webkit-grab",default:"default",rowResize:"row-resize",colResize:"col-resize",pointer:"pointer"};var sh={LT:Symbol("LT"),L:Symbol("L"),T:Symbol("T"),BR:Symbol("BR")},fh=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ch(this,ah(e).call(this,{table:t}))).selectLocal=sh.BR,n.display=!1,n.border={},n.activeCorner=null,n.selectRange=null,n.downRange=null,n.moveRange=null,n.ltElem=new ct("".concat(o,"-x-select-area")),n.brElem=new ct("".concat(o,"-x-select-area")),n.lElem=new ct("".concat(o,"-x-select-area")),n.tElem=new ct("".concat(o,"-x-select-area")),n.ltHighLight=new ct("".concat(o,"-x-select-high-light")),n.lHighLight=new ct("".concat(o,"-x-select-high-light")),n.tHighLight=new ct("".concat(o,"-x-select-high-light")),n.brHighLight=new ct("".concat(o,"-x-select-high-light")),n.ltCorner=new ct("".concat(o,"-x-select-corner")),n.lCorner=new ct("".concat(o,"-x-select-corner")),n.tCorner=new ct("".concat(o,"-x-select-corner")),n.brCorner=new ct("".concat(o,"-x-select-corner")),n.blt.before(n.ltElem),n.bl.before(n.lElem),n.bt.before(n.tElem),n.bbr.before(n.brElem),n.blt.before(n.ltHighLight),n.bl.before(n.lHighLight),n.bt.before(n.tHighLight),n.bbr.before(n.brHighLight),n.blt.after(n.ltCorner),n.bl.after(n.lCorner),n.bt.after(n.tCorner),n.bbr.after(n.brCorner),n.setBorderType("solid"),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&uh(t,e)}(e,t),n=e,(i=[{key:"moveHandle",value:function(t,e){var n=this.table,r=n.rows,o=n.cols,i=this.downRange,c=this.selectLocal,l=n.getTableMerges(),a=n.getScrollView(),u=n.getRiCiByXy(t,e),s=u.ri,f=u.ci;if(-1===s&&(s=a.sri),-1===f&&(f=a.sci),c===sh.LT){var h=i.union(new ss(0,0,r.len-1,o.len-1));return this.moveRange=i.union(h),this.selectRange=this.moveRange,void(this.selectLocal=sh.LT)}if(c===sh.L){var y=i.union(new ss(s,0,s,0));return this.moveRange=i.union(y),this.selectRange=this.moveRange,void(this.selectLocal=sh.L)}if(c===sh.T){var p=i.union(new ss(0,f,0,f));return this.moveRange=i.union(p),this.selectRange=this.moveRange,void(this.selectLocal=sh.T)}var b=i.union(new ss(s,f,s,f));this.moveRange=l.union(b),this.selectRange=this.moveRange,this.selectLocal=sh.BR}},{key:"setRange",value:function(t){this.selectRange=t,this.selectLocal=sh.BR,this.offsetHandle(),this.borderHandle(),this.cornerHandle()}},{key:"downHandle",value:function(t,e){var n=this.table,r=n.rows,o=n.cols,i=n.getTableMerges(),c=n.getRiCiByXy(t,e),l=c.ri,a=c.ci;return-1===l&&-1===a?(this.downRange=new ss(0,0,r.len-1,o.len-1),this.selectRange=this.downRange,void(this.selectLocal=sh.LT)):-1===l?(this.downRange=new ss(0,a,r.len-1,a),this.selectRange=this.downRange,void(this.selectLocal=sh.T)):-1===a?(this.downRange=new ss(l,0,l,o.len-1),this.selectRange=this.downRange,void(this.selectLocal=sh.L)):(this.downRange=i.getFirstIncludes(l,a)||new ss(l,a,l,a),this.selectRange=this.downRange,void(this.selectLocal=sh.BR))}},{key:"onAdd",value:function(){var t=this.table;this.bind(),this.hide(),t.focus.register({target:this.ltCorner}),t.focus.register({target:this.lCorner}),t.focus.register({target:this.tCorner}),t.focus.register({target:this.brCorner})}},{key:"unbind",value:function(){var t=this.table;$.unbind(t)}},{key:"bind",value:function(){var t=this,n=this.table,o=n.mousePointer,i=n.focus;$.bind(n,r.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(){t.offsetHandle(),t.borderHandle(),t.cornerHandle()})),$.bind(n,r.TABLE_EVENT_TYPE.CHANGE_WIDTH,(function(){t.offsetHandle(),t.borderHandle(),t.cornerHandle()})),$.bind(n,r.TABLE_EVENT_TYPE.SCALE_CHANGE,(function(){t.offsetHandle(),t.borderHandle(),t.cornerHandle()})),$.bind(n,r.TABLE_EVENT_TYPE.FIXED_CHANGE,(function(){t.offsetHandle(),t.borderHandle(),t.cornerHandle()})),$.bind(n,r.TABLE_EVENT_TYPE.RESIZE_CHANGE,(function(){t.offsetHandle(),t.borderHandle(),t.cornerHandle()})),$.bind(n,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(c){if(0===c.button&&i.activate.target===n){var l=n.eventXy(c),a=l.x,u=l.y;t.downHandle(a,u),t.offsetHandle(),t.borderHandle(),t.cornerHandle();var s=t.selectLocal;switch(s){case sh.L:o.lock(e),o.set(rh.KEYS.eResize,e);break;case sh.T:o.lock(e),o.set(rh.KEYS.sResize,e)}n.trigger(r.TABLE_EVENT_TYPE.SELECT_DOWN),n.trigger(r.TABLE_EVENT_TYPE.SELECT_CHANGE),$.mouseMoveUp(document,(function(e){var o=n.eventXy(e),i=o.x,c=o.y;t.moveHandle(i,c),t.offsetHandle(),t.borderHandle(),t.cornerHandle(),n.trigger(r.TABLE_EVENT_TYPE.SELECT_CHANGE)}),(function(){switch(s){case sh.L:case sh.T:o.free(e)}n.trigger(r.TABLE_EVENT_TYPE.SELECT_OVER)}))}})),$.bind(n,r.SYSTEM_EVENT_TYPE.SCROLL,(function(){t.offsetHandle(),t.borderHandle(),t.cornerHandle()}))}},{key:"borderHandle",value:function(){var t=this.selectRange,e=this.display;t&&e&&(this.hideBorder(),this.border=this.showBorder(t))}},{key:"offsetHandle",value:function(){var t=this.selectRange;t&&this.setDisplay(t)?(this.display=!0,this.setSizer(t),this.setLocal(t)):this.display=!1}},{key:"cornerHandle",value:function(){var t=this.table,e=this.selectRange,n=this.selectLocal,r=this.display,o=this.border,i=t.xFixedView;if(e&&r){var c=this.getOverGo(e);switch(this.ltCorner.hide(),this.tCorner.hide(),this.lCorner.hide(),this.brCorner.hide(),n){case sh.LT:case sh.L:case sh.BR:if(!1===o.bottom)return}switch(this.brCorner.removeClass("br-pos"),this.lCorner.removeClass("br-pos"),this.tCorner.removeClass("br-pos"),this.ltCorner.removeClass("br-pos"),this.brCorner.removeClass("tr-pos"),this.lCorner.removeClass("tr-pos"),this.tCorner.removeClass("tr-pos"),this.ltCorner.removeClass("tr-pos"),this.brCorner.removeClass("bl-pos"),this.lCorner.removeClass("bl-pos"),this.tCorner.removeClass("bl-pos"),this.ltCorner.removeClass("bl-pos"),n){case sh.L:this.brCorner.addClass("bl-pos"),this.lCorner.addClass("bl-pos"),this.tCorner.addClass("bl-pos"),this.ltCorner.addClass("bl-pos");break;case sh.T:this.brCorner.addClass("tr-pos"),this.lCorner.addClass("tr-pos"),this.tCorner.addClass("tr-pos"),this.ltCorner.addClass("tr-pos");break;case sh.LT:case sh.BR:this.brCorner.addClass("br-pos"),this.lCorner.addClass("br-pos"),this.tCorner.addClass("br-pos"),this.ltCorner.addClass("br-pos")}if(i.hasFixedTop()&&i.hasFixedLeft())switch(c){case Hf.LT:this.ltCorner.show(),this.tCorner.hide(),this.brCorner.hide(),this.lCorner.hide(),this.activeCorner=this.ltCorner;break;case Hf.T:this.tCorner.show(),this.ltCorner.hide(),this.lCorner.hide(),this.brCorner.hide(),this.activeCorner=this.tCorner;break;case Hf.BR:this.brCorner.show(),this.lCorner.hide(),this.ltCorner.hide(),this.tCorner.hide(),this.activeCorner=this.brCorner;break;case Hf.L:this.lCorner.show(),this.ltCorner.hide(),this.tCorner.hide(),this.brCorner.hide(),this.activeCorner=this.lCorner;break;case Hf.LTT:n===sh.L?(this.ltCorner.show(),this.tCorner.hide(),this.lCorner.hide(),this.brCorner.hide(),this.activeCorner=this.ltCorner):(this.tCorner.show(),this.ltCorner.hide(),this.lCorner.hide(),this.brCorner.hide(),this.activeCorner=this.tCorner);break;case Hf.BRT:n===sh.T?(this.tCorner.show(),this.lCorner.hide(),this.ltCorner.hide(),this.brCorner.hide(),this.activeCorner=this.tCorner):(this.brCorner.show(),this.lCorner.hide(),this.ltCorner.hide(),this.tCorner.hide(),this.activeCorner=this.brCorner);break;case Hf.BRL:n===sh.L?(this.lCorner.show(),this.brCorner.hide(),this.ltCorner.hide(),this.tCorner.hide(),this.activeCorner=this.lCorner):(this.brCorner.show(),this.lCorner.hide(),this.ltCorner.hide(),this.tCorner.hide(),this.activeCorner=this.brCorner);break;case Hf.LTL:n===sh.T?(this.ltCorner.show(),this.lCorner.hide(),this.tCorner.hide(),this.brCorner.hide(),this.activeCorner=this.ltCorner):(this.lCorner.show(),this.ltCorner.hide(),this.tCorner.hide(),this.brCorner.hide(),this.activeCorner=this.lCorner);break;case Hf.ALL:n===sh.T?(this.tCorner.show(),this.lCorner.hide(),this.ltCorner.hide(),this.brCorner.hide(),this.activeCorner=this.tCorner):n===sh.L?(this.lCorner.show(),this.brCorner.hide(),this.ltCorner.hide(),this.tCorner.hide(),this.activeCorner=this.lCorner):(this.brCorner.show(),this.lCorner.hide(),this.ltCorner.hide(),this.tCorner.hide(),this.activeCorner=this.brCorner)}else if(i.hasFixedTop())switch(c){case Hf.LT:this.ltCorner.show(),this.tCorner.hide(),this.brCorner.hide(),this.lCorner.hide(),this.activeCorner=this.ltCorner;break;case Hf.T:this.tCorner.show(),this.ltCorner.hide(),this.lCorner.hide(),this.brCorner.hide(),this.activeCorner=this.tCorner;break;case Hf.BR:this.brCorner.show(),this.lCorner.hide(),this.ltCorner.hide(),this.tCorner.hide(),this.activeCorner=this.brCorner;break;case Hf.L:this.lCorner.show(),this.ltCorner.hide(),this.tCorner.hide(),this.brCorner.hide(),this.activeCorner=this.lCorner;break;case Hf.BRT:n===sh.T?(this.tCorner.show(),this.lCorner.hide(),this.ltCorner.hide(),this.brCorner.hide(),this.activeCorner=this.tCorner):(this.brCorner.show(),this.lCorner.hide(),this.ltCorner.hide(),this.tCorner.hide(),this.activeCorner=this.brCorner)}else if(i.hasFixedLeft())switch(c){case Hf.LT:this.ltCorner.show(),this.tCorner.hide(),this.brCorner.hide(),this.lCorner.hide(),this.activeCorner=this.ltCorner;break;case Hf.T:this.tCorner.show(),this.ltCorner.hide(),this.lCorner.hide(),this.brCorner.hide(),this.activeCorner=this.tCorner;break;case Hf.BR:this.brCorner.show(),this.lCorner.hide(),this.ltCorner.hide(),this.tCorner.hide(),this.activeCorner=this.brCorner;break;case Hf.L:this.lCorner.show(),this.ltCorner.hide(),this.tCorner.hide(),this.brCorner.hide(),this.activeCorner=this.lCorner;break;case Hf.BRL:n===sh.L?(this.lCorner.show(),this.brCorner.hide(),this.ltCorner.hide(),this.tCorner.hide(),this.activeCorner=this.lCorner):(this.brCorner.show(),this.lCorner.hide(),this.ltCorner.hide(),this.tCorner.hide(),this.activeCorner=this.brCorner)}else switch(c){case Hf.BR:this.brCorner.show(),this.lCorner.hide(),this.ltCorner.hide(),this.tCorner.hide(),this.activeCorner=this.brCorner}}}},{key:"destroy",value:function(){lh(ah(e.prototype),"destroy",this).call(this),this.unbind()}}])&&ih(n.prototype,i),c&&ih(n,c),e}(Jf);function hh(t){return(hh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ph(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bh(t,e,n){return(bh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=dh(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function dh(t){return(dh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vh(t,e){return(vh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var gh=function(t){function e(t){var n,r,i,c=t.title,l=void 0===c?"提示":c,a=t.message,u=void 0===a?"":a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(i=dh(e).call(this,"".concat(o,"-alert")))||"object"!==hh(i)&&"function"!=typeof i?ph(r):i).closeEle=z("div","".concat(o,"-alert-close")),n.titleEle=z("div","".concat(o,"-alert-title")),n.contentEle=z("div","".concat(o,"-alert-content")),n.okEle=z("div","".concat(o,"-alert-ok")),n.buttonsEle=z("div","".concat(o,"-alert-buttons")),n.titleEle.html(l),n.contentEle.html(u),n.okEle.html("确定"),n.buttonsEle.children(n.okEle),n.children(n.closeEle),n.children(n.titleEle),n.children(n.contentEle),n.children(n.buttonsEle),n.dragPanel=(new _r).children(ph(n)),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vh(t,e)}(e,t),n=e,(i=[{key:"unbind",value:function(){var t=this.okEle;$.unbind(t)}},{key:"bind",value:function(){var t=this,e=this.okEle;$.bind(e,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.close()}))}},{key:"open",value:function(){this.dragPanel.open(),this.bind()}},{key:"close",value:function(){this.dragPanel.close(),this.destroy()}},{key:"destroy",value:function(){bh(dh(e.prototype),"destroy",this).call(this),this.unbind(),this.dragPanel.destroy()}}])&&yh(n.prototype,i),c&&yh(n,c),e}(ct),wh=n(3),Eh=n.n(wh);function mh(t){return(mh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Th(t,e){return!e||"object"!==mh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xh(t){return(xh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _h(t,e){return(_h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Sh=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Th(this,xh(e).call(this,"".concat(o,"-mask")))).root=z(document.body),t.status=!1,t.css("position","absolute"),t.css("background","rgba(0,0,0,0.3)"),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_h(t,e)}(e,t),n=e,(r=[{key:"setLeft",value:function(t){return this.offset({left:t}),this}},{key:"setTop",value:function(t){return this.offset({top:t}),this}},{key:"setHeight",value:function(t){return this.offset({height:t}),this}},{key:"setWidth",value:function(t){return this.offset({width:t}),this}},{key:"setOpacity",value:function(t){return this.css("opacity",t),this}},{key:"open",value:function(){return!1===this.status&&(this.root.children(this),this.status=!0),this}},{key:"close",value:function(){return!0===this.status&&(this.root.remove(this),this.status=!1),this}},{key:"setRoot",value:function(t){return t=t.el?z(t.el):z(t),this.root=t,this}}])&&Oh(n.prototype,r),i&&Oh(n,i),e}(ct);function kh(t){return(kh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ch(t,e){return!e||"object"!==kh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ph(t){return(Ph=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rh(t,e){return(Rh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var jh=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Ch(this,Ph(e).call(this,"".concat(o,"-filter-data-menu-item ").concat(o,"-order-az")))).titleElement=z("div","".concat(o,"-filter-data-menu-item-title")),t.titleElement.text("以A->Z的顺序排序"),t.children(t.titleElement),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rh(t,e)}(e,t),e}(Se);function Lh(t){return(Lh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ih(t,e){return!e||"object"!==Lh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ah(t){return(Ah=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nh(t,e){return(Nh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Vh=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Ih(this,Ah(e).call(this,"".concat(o,"-filter-data-menu-item ").concat(o,"-order-za")))).titleElement=z("div","".concat(o,"-filter-data-menu-item-title")),t.titleElement.text("以Z->A的顺序排序"),t.children(t.titleElement),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nh(t,e)}(e,t),e}(Se);function Dh(t){return(Dh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wh(t,e){return!e||"object"!==Dh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bh(t,e,n){return(Bh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yh(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Yh(t){return(Yh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hh(t,e){return(Hh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Fh=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Wh(this,Yh(e).call(this,"".concat(o,"-form-select-menu"),H.copy({autoHeight:!0,onUpdate:function(){}},t)))).items=[],n.elPopUp.offset({width:200}),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hh(t,e)}(e,t),n=e,(i=[{key:"unbind",value:function(){this.items.forEach((function(t){$.unbind(t)}))}},{key:"bind",value:function(t){var e=this;$.bind(t,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){e.options.onUpdate(t),e.close()}))}},{key:"addItem",value:function(t){this.bind(t),this.items.push(t),this.children(t)}},{key:"destroy",value:function(){Bh(Yh(e.prototype),"destroy",this).call(this),this.unbind()}}])&&Mh(n.prototype,i),c&&Mh(n,c),e}(me);function Uh(t){return(Uh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gh(t,e){return!e||"object"!==Uh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function zh(t){return(zh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xh(t,e){return(Xh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zh=function(t){function e(t){var n,r=t.text,i=void 0===r?"":r,c=t.value,l=void 0===c?"":c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Gh(this,zh(e).call(this,"".concat(o,"-form-select-menu-item")))).value=l,n.text=i,n.textEle=z("div","".concat(o,"-form-select-menu-item-title")),n.textEle.text(i),n.children(n.textEle),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xh(t,e)}(e,t),e}(Se);function Jh(t){return(Jh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qh(t,e,n){return(qh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qh(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Qh(t){return(Qh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ty(t,e){return(ty=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ey=function(t){function e(){var t,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,r=Qh(e).call(this,"".concat(o,"-form-select")),(t=!r||"object"!==Jh(r)&&"function"!=typeof r?$h(n):r).selectValue=H.Nul,t.selectText=z("div","".concat(o,"-form-select-text")),t.selectIcon=z("div","".concat(o,"-form-select-icon")),t.children(t.selectText),t.children(t.selectIcon),t.contextMenu=new Fh({el:$h(t),onUpdate:function(e){var n=e.value;t.setSelect(n)}}),t.bind(),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ty(t,e)}(e,t),n=e,(i=[{key:"unbind",value:function(){$.unbind(this)}},{key:"bind",value:function(){var t=this;$.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.contextMenu.isClose()?t.contextMenu.open():t.contextMenu.close(),e.stopPropagation()}))}},{key:"getValue",value:function(){return this.selectValue}},{key:"setSelect",value:function(t){var e=this.contextMenu,n=this.selectText,o=e.items.find((function(e){return e.value&&e.value===t}));o&&(n.html("&nbsp;".concat(o.text)),this.selectValue=o.value,this.trigger(r.FORM_EVENT_TYPE.FORM_SELECT_CHANGE,{item:o}))}},{key:"addValue",value:function(t){var e=t.text,n=t.value,r=new Zh({text:e,value:n});this.contextMenu.addItem(r)}},{key:"addDivider",value:function(){var t=new Me;this.contextMenu.addItem(t)}},{key:"destroy",value:function(){qh(Qh(e.prototype),"destroy",this).call(this),this.unbind(),this.contextMenu.close(),this.contextMenu.destroy()}}])&&Kh(n.prototype,i),c&&Kh(n,c),e}(ct);function ny(t){return(ny="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ry(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function oy(t,e){return!e||"object"!==ny(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function iy(t,e,n){return(iy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cy(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function cy(t){return(cy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ly(t,e){return(ly=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ay=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=oy(this,cy(e).call(this,"".concat(o,"-form-plain-input")))).inputWrapEle=z("div","".concat(o,"-form-input-wrap")),t.inputInnerEle=z("div","".concat(o,"-form-input-inner")),t.inputEle=z("input","".concat(o,"-form-input-source")),t.inputInnerEle.children(t.inputEle),t.inputWrapEle.children(t.inputInnerEle),t.children(t.inputWrapEle),t.bind(),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ly(t,e)}(e,t),n=e,(i=[{key:"unbind",value:function(){var t=this.inputEle;$.unbind(t)}},{key:"bind",value:function(){var t=this,e=this.inputEle;$.bind(e,r.SYSTEM_EVENT_TYPE.INPUT,(function(){t.setValue(e.val())}))}},{key:"setValue",value:function(t){this.inputEle.val(t),this.trigger(r.FORM_EVENT_TYPE.PLAIN_INPUT_CHANGE,{value:this.inputEle.val()})}},{key:"getValue",value:function(){return this.inputEle.val()}},{key:"destroy",value:function(){iy(cy(e.prototype),"destroy",this).call(this),this.unbind()}}])&&ry(n.prototype,i),c&&ry(n,c),e}(ct);function uy(t){return(uy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fy(t,e){return!e||"object"!==uy(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hy(t,e,n){return(hy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yy(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function yy(t){return(yy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function py(t,e){return(py=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var by=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=fy(this,yy(e).call(this,"".concat(o,"-filter-data-menu-item ").concat(o,"-if-filter")))).status=!1,t.type=e.IF_TYPE.NOT,t.value=H.EMPTY,t.titleEle=z("div","".concat(o,"-if-filter-title")),t.titleTextEle=z("span","".concat(o,"-if-filter-title-text")),t.titleIconEle=z("span","".concat(o,"-if-filter-title-icon")),t.titleTextEle.text("条件过滤"),t.titleEle.children(t.titleIconEle),t.titleEle.children(t.titleTextEle),t.children(t.titleEle),t.selectEleBox=z("div","".concat(o,"-if-filter-select-box")),t.selectEle=new ey,t.selectEleBox.children(t.selectEle),t.children(t.selectEleBox),t.valueInputEleBox=z("div","".concat(o,"-if-filter-value-input-box")),t.valueInput=new ay,t.valueInputEleBox.children(t.valueInput),t.children(t.valueInputEleBox),t.selectEle.addValue({text:"无",value:e.IF_TYPE.NOT}),t.selectEle.addDivider(),t.selectEle.addValue({text:"为空",value:e.IF_TYPE.CT_EMPTY}),t.selectEle.addValue({text:"不为空",value:e.IF_TYPE.CT_NOT_EMPTY}),t.selectEle.addDivider(),t.selectEle.addValue({text:"文本包含",value:e.IF_TYPE.STR_INCLUDE}),t.selectEle.addValue({text:"文本不包含",value:e.IF_TYPE.STR_NOT_INCLUDE}),t.selectEle.addValue({text:"文本开头",value:e.IF_TYPE.STR_START}),t.selectEle.addValue({text:"文本结尾",value:e.IF_TYPE.STR_END}),t.selectEle.addValue({text:"文本相符",value:e.IF_TYPE.STR_EQ}),t.selectEle.addDivider(),t.selectEle.addValue({text:"日期为",value:e.IF_TYPE.DAT_EQ}),t.selectEle.addValue({text:"日期超前",value:e.IF_TYPE.DAT_BEFORE}),t.selectEle.addValue({text:"日期滞后",value:e.IF_TYPE.DAT_AFTER}),t.selectEle.addDivider(),t.selectEle.addValue({text:"数字大于",value:e.IF_TYPE.NUM_BEFORE}),t.selectEle.addValue({text:"数字大于等于",value:e.IF_TYPE.NUM_BEFORE_EQ}),t.selectEle.addValue({text:"数字小于",value:e.IF_TYPE.NUM_AFTER}),t.selectEle.addValue({text:"数字小于等于",value:e.IF_TYPE.NUM_AFTER_EQ}),t.selectEle.addValue({text:"数字等于",value:e.IF_TYPE.NUM_EQ}),t.selectEle.addValue({text:"数字不等于",value:e.IF_TYPE.NUM_NOT_EQ}),t.removeClass("hover"),t.bind(),t.hide(),t.selectEle.setSelect(e.IF_TYPE.NOT),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&py(t,e)}(e,t),n=e,(i=[{key:"setValue",value:function(t){H.isBlank(t)&&(t=H.EMPTY),this.valueInput.setValue(t)}},{key:"bind",value:function(){var t=this,e=this.titleEle,n=this.selectEle,o=this.valueInput;$.bind(n,r.FORM_EVENT_TYPE.FORM_SELECT_CHANGE,(function(e){var n=e.detail.item.value;t.type=n,t.switchInput()})),$.bind(o,r.FORM_EVENT_TYPE.PLAIN_INPUT_CHANGE,(function(e){var n=e.detail.value;t.value=n})),$.bind(e,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.status?t.hide():t.show()}))}},{key:"unbind",value:function(){var t=this.titleEle,e=this.selectEle;$.unbind(t),$.unbind(e)}},{key:"setType",value:function(t){H.isBlank(t)&&(t=e.IF_TYPE.NOT),this.selectEle.setSelect(t)}},{key:"switchInput",value:function(){var t=this.type,n=this.valueInputEleBox;switch(n.hide(),t){case e.IF_TYPE.STR_NOT_INCLUDE:case e.IF_TYPE.STR_INCLUDE:case e.IF_TYPE.STR_EQ:case e.IF_TYPE.STR_START:case e.IF_TYPE.STR_END:case e.IF_TYPE.DAT_EQ:case e.IF_TYPE.DAT_BEFORE:case e.IF_TYPE.DAT_AFTER:case e.IF_TYPE.NUM_BEFORE:case e.IF_TYPE.NUM_BEFORE_EQ:case e.IF_TYPE.NUM_AFTER:case e.IF_TYPE.NUM_AFTER_EQ:case e.IF_TYPE.NUM_EQ:case e.IF_TYPE.NUM_NOT_EQ:n.show();break;default:n.hide()}}},{key:"getType",value:function(){return this.type}},{key:"getValue",value:function(){return this.value}},{key:"hide",value:function(){return this.titleIconEle.removeClass("active"),this.status=!1,this.selectEleBox.hide(),this.valueInputEleBox.hide(),this}},{key:"show",value:function(){var t=this.type;return this.titleIconEle.addClass("active"),this.status=!0,this.selectEleBox.show(),this.setType(t),this}},{key:"qualified",value:function(t,n){switch(t){case e.IF_TYPE.NOT:case e.IF_TYPE.CT_NOT_EMPTY:case e.IF_TYPE.CT_EMPTY:case e.IF_TYPE.STR_NOT_INCLUDE:case e.IF_TYPE.STR_INCLUDE:case e.IF_TYPE.STR_EQ:case e.IF_TYPE.STR_START:case e.IF_TYPE.STR_END:case e.IF_TYPE.DAT_EQ:case e.IF_TYPE.DAT_BEFORE:case e.IF_TYPE.DAT_AFTER:case e.IF_TYPE.NUM_BEFORE:case e.IF_TYPE.NUM_BEFORE_EQ:case e.IF_TYPE.NUM_AFTER:case e.IF_TYPE.NUM_AFTER_EQ:case e.IF_TYPE.NUM_EQ:case e.IF_TYPE.NUM_NOT_EQ:}}},{key:"destroy",value:function(){hy(yy(e.prototype),"destroy",this).call(this),this.unbind(),this.selectEle.destroy()}}])&&sy(n.prototype,i),c&&sy(n,c),e}(Se);function dy(t){return(dy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gy(t,e){return!e||"object"!==dy(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wy(t,e,n){return(wy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ey(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Ey(t){return(Ey=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function my(t,e){return(my=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}by.IF_TYPE={NOT:1,CT_NOT_EMPTY:2,CT_EMPTY:3,STR_NOT_INCLUDE:4,STR_INCLUDE:5,STR_EQ:6,STR_START:7,STR_END:8,DAT_EQ:9,DAT_BEFORE:10,DAT_AFTER:11,NUM_BEFORE:12,NUM_BEFORE_EQ:13,NUM_AFTER:14,NUM_AFTER_EQ:15,NUM_EQ:16,NUM_NOT_EQ:17};var Oy=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=gy(this,Ey(e).call(this,"".concat(o,"-form-search-input")))).inputWrapEle=z("div","".concat(o,"-form-input-wrap")),t.inputInnerEle=z("div","".concat(o,"-form-input-inner")),t.inputEle=z("input","".concat(o,"-form-input-source")),t.searchEle=z("div","".concat(o,"-form-input-search")),t.inputInnerEle.children(t.inputEle),t.inputWrapEle.children(t.inputInnerEle),t.children(t.inputWrapEle),t.children(t.searchEle),t.bind(),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&my(t,e)}(e,t),n=e,(i=[{key:"unbind",value:function(){var t=this.searchEle,e=this.inputEle;$.unbind(t),$.unbind(e)}},{key:"bind",value:function(){var t=this,e=this.searchEle,n=this.inputEle;$.bind(e,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.setValue(n.val())})),$.bind(n,r.SYSTEM_EVENT_TYPE.INPUT,(function(){t.setValue(n.val())}))}},{key:"getValue",value:function(){return this.inputEle.val()}},{key:"setValue",value:function(t){var e=this.inputEle;e.val(t),this.trigger(r.FORM_EVENT_TYPE.SEARCH_INPUT_CHANGE,{value:e.val()})}},{key:"destroy",value:function(){wy(Ey(e.prototype),"destroy",this).call(this),this.unbind()}}])&&vy(n.prototype,i),c&&vy(n,c),e}(ct);function Ty(t){return(Ty="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _y(t,e){return!e||"object"!==Ty(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Sy(t,e,n){return(Sy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ky(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function ky(t){return(ky=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cy(t,e){return(Cy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Py=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=_y(this,ky(e).call(this,"".concat(o,"-filter-data-menu-item ").concat(o,"-value-filter")))).filterExp=null,t.items=[],t.filters=[],t.status=!0,t.value=H.EMPTY,t.titleEle=z("div","".concat(o,"-value-filter-title")),t.titleTextEle=z("span","".concat(o,"-value-filter-title-text")),t.titleIconEle=z("span","".concat(o,"-value-filter-title-icon")),t.titleTextEle.text("按值过滤"),t.titleEle.children(t.titleIconEle),t.titleEle.children(t.titleTextEle),t.children(t.titleEle),t.optionBoxEle=z("div","".concat(o,"-value-filter-option-box")),t.selectEle=z("div","".concat(o,"-value-filter-option-select")),t.flagEle=z("div","".concat(o,"-value-filter-option-flag")),t.clearEle=z("div","".concat(o,"-value-filter-option-clear")),t.clearEle.text("清空"),t.flagEle.html("&nbsp;-&nbsp;"),t.selectEle.text("全选"),t.optionBoxEle.children(t.selectEle),t.optionBoxEle.children(t.flagEle),t.optionBoxEle.children(t.clearEle),t.children(t.optionBoxEle),t.searchBoxEle=z("div","".concat(o,"-value-filter-input-box")),t.searchInput=new Oy,t.searchBoxEle.children(t.searchInput),t.children(t.searchBoxEle),t.itemsBox=z("div","".concat(o,"-value-filter-items-box")),t.children(t.itemsBox),t.hide(),t.bind(),t.removeClass("hover"),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cy(t,e)}(e,t),n=e,(i=[{key:"unbind",value:function(){var t=this.titleEle,e=this.selectEle,n=this.clearEle,r=this.searchInput;$.unbind(n),$.unbind(t),$.unbind(e),$.unbind(r)}},{key:"bind",value:function(){var t=this,e=this.titleEle,n=this.itemsBox,i=this.selectEle,c=this.clearEle,l=this.searchInput,a="".concat(o,"-value-filter-item");$.bind(i,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.selectAll()})),$.bind(e,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.status?t.hide():t.show()})),$.bind(n,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.items,r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div";return new ct(t,e)}(e.target).closestClass(a);if(r){var i=n[r.attr("".concat(o,"-value-filter-item-index"))];i.setStatus(!i.status)}})),$.bind(c,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.clearAll()})),$.bind(l,r.FORM_EVENT_TYPE.SEARCH_INPUT_CHANGE,(function(e){var n=e.detail.value;H.isBlank(n)?t.filterExp=null:t.filterExp=new RegExp(".?".concat(n,".?")),t.value=n,t.filterItems()}))}},{key:"addItem",value:function(t){t.setIndex(this.items.length),this.items.push(t),this.itemsBox.children(t)}},{key:"filterItems",value:function(){var t=this.filterExp,e=this.items,n=this.itemsBox,r=[];n.empty(),t?(e.forEach((function(e){var n=e.text;t.test(n)&&r.push(e)})),r.forEach((function(t){n.children(t)}))):e.forEach((function(t){n.children(t)})),this.filters=r}},{key:"setValue",value:function(t){var e=this.searchInput;H.isBlank(t)&&(t=H.EMPTY),e.setValue(t)}},{key:"getValue",value:function(){return this.value}},{key:"getSelectItems",value:function(){var t=this.items,e=this.filters,n=[];return e.length>0?e.forEach((function(t){t.status&&n.push(t)})):t.forEach((function(t){t.status&&n.push(t)})),n}},{key:"show",value:function(){return this.titleIconEle.addClass("active"),this.status=!0,this.optionBoxEle.show(),this.searchBoxEle.show(),this.itemsBox.show(),this}},{key:"hide",value:function(){return this.titleIconEle.removeClass("active"),this.status=!1,this.optionBoxEle.hide(),this.searchBoxEle.hide(),this.itemsBox.hide(),this}},{key:"selectAll",value:function(){this.items.forEach((function(t){t.setStatus(!0)}))}},{key:"clearAll",value:function(){this.items.forEach((function(t){t.setStatus(!1)}))}},{key:"emptyAll",value:function(){this.itemsBox.empty(),this.items=[]}},{key:"qualified",value:function(t){}},{key:"destroy",value:function(){Sy(ky(e.prototype),"destroy",this).call(this),this.unbind(),this.searchInput.destroy()}}])&&xy(n.prototype,i),c&&xy(n,c),e}(Se);function Ry(t){return(Ry="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ly(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Iy(t,e,n){return(Iy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ay(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Ay(t){return(Ay=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ny(t,e){return(Ny=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Vy=function(t){function e(t){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,i=Ay(e).call(this,"".concat(o,"-filter-data-menu"),H.copy({ok:function(){},no:function(){}},t)),(n=!i||"object"!==Ry(i)&&"function"!=typeof i?Ly(r):i).valueFilter=new Py,n.ifFilter=new by,n.orderAz=new jh,n.orderZa=new Vh,n.okEle=z("div","".concat(o,"-filter-data-menu-button ").concat(o,"-filter-data-menu-ok")),n.noEle=z("div","".concat(o,"-filter-data-menu-button ").concat(o,"-filter-data-menu-no")),n.children(n.orderAz),n.children(n.orderZa),n.children(new Me),n.children(n.ifFilter),n.children(n.valueFilter),n.children(new Me),n.children(n.noEle),n.children(n.okEle),n.okEle.html("确定"),n.noEle.html("取消"),n.okHandle=function(){var t=Ly(n),e=t.ifFilter,r=t.valueFilter,o=r.getSelectItems(),i=r.getValue(),c=e.getType(),l=e.getValue();n.options.ok({valueFilterItems:o,valueFilterValue:i,ifFilterType:c,ifFilterValue:l}),n.close()},n.noHandle=function(){n.options.no(),n.close()},n.filterDataHandle=function(){pe.closeAll([n.elPopUp])},n.bind(),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ny(t,e)}(e,t),n=e,(i=[{key:"unbind",value:function(){$.unbind(this.okEle),$.unbind(this.noEle)}},{key:"bind",value:function(){$.bind(this.okEle,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,this.okHandle),$.bind(this.noEle,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,this.noHandle),$.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,this.filterDataHandle)}},{key:"open",value:function(){Iy(Ay(e.prototype),"open",this).call(this)}},{key:"destroy",value:function(){Iy(Ay(e.prototype),"destroy",this).call(this),this.unbind(),this.valueFilter.destroy(),this.ifFilter.destroy()}}])&&jy(n.prototype,i),c&&jy(n,c),e}(me);function Dy(t){return(Dy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function My(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wy(t,e){return!e||"object"!==Dy(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function By(t){return(By=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yy(t,e){return(Yy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Hy=function(t){function e(t){var n,r=t.text,i=void 0===r?H.EMPTY:r,c=t.index,l=void 0===c?-1:c,a=t.status,u=void 0!==a&&a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Wy(this,By(e).call(this,"".concat(o,"-value-filter-item")))).text=i,n.status=u,n.index=l,n.iconEle=z("div","".concat(o,"-value-filter-item-icon")),n.textEle=z("div","".concat(o,"-value-filter-item-text")),n.textEle.text(i),n.attr("title",i),n.children(n.iconEle),n.children(n.textEle),n.setIndex(l),n.setStatus(u),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yy(t,e)}(e,t),n=e,(r=[{key:"setStatus",value:function(t){this.status=t,this.status?this.iconEle.css("opacity",1):this.iconEle.css("opacity",0)}},{key:"setIndex",value:function(t){this.index=t,this.attr("".concat(o,"-value-filter-item-index"),"".concat(this.index))}},{key:"equals",value:function(t){return this.text===t.text}}])&&My(n.prototype,r),i&&My(n,i),e}(ct);function Fy(t){return(Fy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Uy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Gy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zy(t,e,n){return(zy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Xy(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Xy(t){return(Xy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zy(t,e){return(Zy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Jy=function(t){function e(t){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,i=Xy(e).call(this,{table:t}),(n=!i||"object"!==Fy(i)&&"function"!=typeof i?Gy(r):i).display=!1,n.icons=[],n.selectRange=null,n.activeIcon=null,n.mask=(new Sh).setRoot(t),n.filter=new Vy({el:n.mask,ok:function(t){var e=t.valueFilterItems,r=t.valueFilterValue,o=t.ifFilterType,i=t.ifFilterValue,c=Gy(n).activeIcon;c.valueFilterItems=e,c.valueFilterValue=r,c.ifFilterType=o,c.ifFilterValue=i,n.filterFoldRow()}}),n.flt=new ct("".concat(o,"-x-filter ").concat(o,"-x-filter-lt")),n.ft=new ct("".concat(o,"-x-filter ").concat(o,"-x-filter-t")),n.fbr=new ct("".concat(o,"-x-filter ").concat(o,"-x-filter-br")),n.fl=new ct("".concat(o,"-x-filter ").concat(o,"-x-filter-l")),n.blt.children(n.flt),n.bl.children(n.fl),n.bt.children(n.ft),n.bbr.children(n.fbr),n.setBorderColor("#0071cf"),n.bind(),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zy(t,e)}(e,t),n=e,(i=[{key:"onAdd",value:function(){zy(Xy(e.prototype),"onAdd",this).call(this)}},{key:"unbind",value:function(){var t=this.table;$.unbind(t)}},{key:"bind",value:function(){var t=this,e=this.table;$.bind(e,r.TABLE_EVENT_TYPE.RESIZE_CHANGE,(function(){t.display&&t.xFilterOffset()})),$.bind(e,r.SYSTEM_EVENT_TYPE.SCROLL,(function(){t.display&&(pe.closeAll(),t.xFilterOffset())})),$.bind(e,r.TABLE_EVENT_TYPE.RENDER,(function(){t.display&&t.xFilterOffset()}))}},{key:"createFilterIcon",value:function(){var t=this,n=this.selectRange,r=this.table,o=this.icons;if(n){var i=n.brink().top,c=r.xIconBuilder,l=r.xIteratorBuilder,a=r.getXTableStyle().fixedCellIcon,u=r.mousePointer;i.each(l,(function(n,r){var i=c.build({image:Eh.a,offset:{x:-2,y:-2},height:18,width:18,vertical:Mu.ICON_VERTICAL.BOTTOM}),l={ri:n,ci:r,icon:i};i.setOnEnter((function(e){var n=e.position,r=x.styleTransformCssPx(n.height),o=x.styleTransformCssPx(n.width),i=x.styleTransformCssPx(n.x),c=x.styleTransformCssPx(n.y);t.mask.setLeft(i).setTop(c).setWidth(o).setHeight(r).open()})),i.setOnDown((function(e){var n=e.native;t.activeIcon=l,t.filterOpen(),n.stopPropagation()})),i.setOnMove((function(){u.set(rh.KEYS.pointer,e)})),i.setOnLeave((function(){t.mask.close(),u.free(e)})),a.addOrNewCell(n,r,i),o.push(l)})),r.render()}}},{key:"clearFilterIcon",value:function(){var t=this.table;if(this.selectRange){var e=t.getXTableStyle().fixedCellIcon;this.icons.forEach((function(t){var n=t.ri,r=t.ci,o=t.icon;e.remove(n,r,o)})),this.icons=[],t.render()}}},{key:"offsetHandle",value:function(){var t=this.selectRange;t&&(this.setDisplay(t),this.setSizer(t),this.setLocal(t))}},{key:"borderHandle",value:function(){var t=this.selectRange,e=this.display;t&&e&&(this.hideBorder(),this.showBorder(t))}},{key:"xFilterHandle",value:function(){var t=this.table,e=t.xScreen,n=t.cols,r=t.rows,o=t.xIteratorBuilder,i=e.findType(fh).selectRange,c=t.getTableCells(),l=t.getTableMerges();if(i){var a=i.clone(),u=a,s=u.sri,f=u.sci,h=u.eri,y=u.eci,p=r.len-1,b=n.len-1,d=l.getFirstIncludes(s,f)||ss.EMPTY;if(a.multiple()&&!d.equals(a))return void(this.selectRange=a);o.getColIterator().setBegin(y+1).setEnd(b).setLoop((function(t){var e=c.getCellOrMergeCell(s,t);return!H.isUnDef(e)&&!H.isBlank(e.text)&&(a=a.union(new ss(s,t,s,t)),!0)})).execute(),o.getColIterator().setBegin(f-1).setEnd(0).setLoop((function(t){var e=c.getCellOrMergeCell(s,t);return!H.isUnDef(e)&&!H.isBlank(e.text)&&(a=a.union(new ss(s,t,s,t)),!0)})).execute(),o.getRowIterator().setBegin(h+1).setEnd(p).setLoop((function(t){var e=c.getCellOrMergeCell(t,f);return!H.isUnDef(e)&&!H.isBlank(e.text)&&(a=a.union(new ss(t,f,t,f)),!0)})).execute(),o.getRowIterator().setBegin(s-1).setEnd(0).setLoop((function(t){var e=c.getCellOrMergeCell(t,f);return!H.isUnDef(e)&&!H.isBlank(e.text)&&(a=a.union(new ss(t,f,t,f)),!0)})).execute(),o.getColIterator().setBegin(a.eci+1).setEnd(b).setLoop((function(t){var e=a,n=e.sri,r=e.eri,i=!0;return o.getRowIterator().setBegin(n).setEnd(r).setLoop((function(e){var n=c.getCellOrMergeCell(e,t);H.isUnDef(n)||H.isBlank(n.text)||(a=a.union(new ss(e,t,e,t)),i=!1)})).execute(),!i})).execute(),o.getColIterator().setBegin(a.sci-1).setEnd(0).setLoop((function(t){var e=a,n=e.sri,r=e.eri,i=!0;return o.getRowIterator().setBegin(n).setEnd(r).setLoop((function(e){var n=c.getCellOrMergeCell(e,t);H.isUnDef(n)||H.isBlank(n.text)||(a=a.union(new ss(e,t,e,t)),i=!1)})).execute(),!i})).execute(),o.getRowIterator().setBegin(a.eri+1).setEnd(p).setLoop((function(t){var e=a,n=e.sci,r=e.eci,i=!0;return o.getColIterator().setBegin(n).setEnd(r).setLoop((function(e){var n=c.getCellOrMergeCell(t,e);H.isUnDef(n)||H.isBlank(n.text)||(a=a.union(new ss(t,e,t,e)),i=!1)})).execute(),!i})).execute(),o.getRowIterator().setBegin(a.sri-1).setEnd(0).setLoop((function(t){var e=a,n=e.sci,r=e.eci,i=!0;return o.getColIterator().setBegin(n).setEnd(r).setLoop((function(e){var n=c.getCellOrMergeCell(t,e);H.isUnDef(n)||H.isBlank(n.text)||(a=a.union(new ss(t,e,t,e)),i=!1)})).execute(),!i})).execute(),this.selectRange=a}else this.selectRange=null}},{key:"xFilterOffset",value:function(){this.offsetHandle(),this.borderHandle()}},{key:"filterOpen",value:function(){var t=this.selectRange,e=this.table,n=this.filter,r=this.activeIcon,o=n.valueFilter,i=n.ifFilter,c=e.xIteratorBuilder,l=e.getTableCells(),a=r.valueFilterValue,u=r.ifFilterType,s=r.ifFilterValue,f=r.valueFilterItems,h=r.ri,y=r.ci,p=t.eri,b=y,d=new Set;new ss(h,y,p,b).each(c,(function(t,e){var n=l.getCellOrMergeCell(t,e);n&&!H.isBlank(n.text)&&d.add(n.text.trim())})),o.emptyAll(),f?d.forEach((function(t){var e=new Hy({text:t});f.find((function(t){return e.equals(t)}))?e.setStatus(!0):e.setStatus(!1),o.addItem(e)})):d.forEach((function(t){var e=new Hy({text:t});e.setStatus(!0),o.addItem(e)})),o.setValue(a),i.setType(u),i.setValue(s),pe.closeAll(),n.open()}},{key:"filterFoldRow",value:function(){for(var t=this.selectRange,e=this.table,n=this.icons,r=t.sri,o=t.sci,i=t.eri,c=t.eci,l=e.getTableCells(),a=r;a<=i;a++)for(var u=o;u<=c;u++){var s=l.getCell(a,u);if(!H.isEmptyObject(s)){var f=s.text;if(!H.isBlank(f)){var h=n[u];h.valueFilterItems,h.valueFilterValue,h.ifFilterType,h.ifFilterValue}}}}},{key:"hideFilter",value:function(){this.display=!1,this.clearFilterIcon(),this.hide()}},{key:"openFilter",value:function(){var t=this.table.getTableCells();this.xFilterHandle();var e=this.selectRange;e&&(t.emptyRectRange(e)?new gh({message:"不能为空数据区创建过滤器, 请选择非空区域"}).open():(this.display=!0,this.createFilterIcon(),this.show(),this.xFilterOffset()))}},{key:"destroy",value:function(){zy(Xy(e.prototype),"destroy",this).call(this),this.unbind()}}])&&Uy(n.prototype,i),c&&Uy(n,c),e}(Jf);function Ky(t){return(Ky="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $y(t,e){return!e||"object"!==Ky(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qy(t){return(qy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qy(t,e){return(Qy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var tp='\n  <svg class="'.concat(o,'-copy-style-svg" xmlns="http://www.w3.org/2000/svg" width="100%" height="100%">\n    <line class="').concat(o,"-copy-style-stroked ").concat(o,'-copy-style-stroked-top" x1="0" y1="0" x2="100%" y2="0"/>\n    <line class="').concat(o,"-copy-style-stroked ").concat(o,'-copy-style-stroked-left" x1="0" y1="0" x2="0" y2="100%"/>\n    <line class="').concat(o,"-copy-style-stroked ").concat(o,'-copy-style-stroked-bottom" x1="0" y1="100%" x2="100%" y2="100%"/>\n    <line class="').concat(o,"-copy-style-stroked ").concat(o,'-copy-style-stroked-right" x1="100%" y1="0" x2="100%" y2="100%"/>\n  </svg>\n');function ep(t){return(ep="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function np(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rp(t,e){return!e||"object"!==ep(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function op(t,e,n){return(op="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ip(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function ip(t){return(ip=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cp(t,e){return(cp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var lp=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=rp(this,ip(e).call(this,{table:t}))).display=!1,n.selectRange=ss.EMPTY,n.ltElem=new ct("".concat(o,"-x-copy-style-area")),n.brElem=new ct("".concat(o,"-x-copy-style-area")),n.lElem=new ct("".concat(o,"-x-copy-style-area")),n.tElem=new ct("".concat(o,"-x-copy-style-area")),n.blt.children(n.ltElem),n.bl.children(n.lElem),n.bt.children(n.tElem),n.bbr.children(n.brElem),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cp(t,e)}(e,t),n=e,(i=[{key:"onAdd",value:function(){this.hideCopyStyle(),this.bind()}},{key:"unbind",value:function(){var t=this.table;$.unbind(t)}},{key:"bind",value:function(){var t=this,e=this.table;$.bind(e,r.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(){t.display&&(t.offsetHandle(),t.borderHandle())})),$.bind(e,r.TABLE_EVENT_TYPE.CHANGE_WIDTH,(function(){t.display&&(t.offsetHandle(),t.borderHandle())})),$.bind(e,r.TABLE_EVENT_TYPE.SCALE_CHANGE,(function(){t.display&&(t.offsetHandle(),t.borderHandle())})),$.bind(e,r.TABLE_EVENT_TYPE.FIXED_CHANGE,(function(){t.display&&(t.offsetHandle(),t.borderHandle())})),$.bind(e,r.TABLE_EVENT_TYPE.RESIZE_CHANGE,(function(){t.display&&(t.offsetHandle(),t.borderHandle())})),$.bind(e,r.SYSTEM_EVENT_TYPE.SCROLL,(function(){t.display&&(t.offsetHandle(),t.borderHandle())}))}},{key:"borderHandle",value:function(){var t=this.selectRange;t.equals(ss.EMPTY)||(this.hideBorder(),this.showBorder(t))}},{key:"offsetHandle",value:function(){var t=this.selectRange;t.equals(ss.EMPTY)?this.hide():(this.show(),this.setDisplay(t),this.setSizer(t),this.setLocal(t))}},{key:"hideCopyStyle",value:function(){this.display=!1,this.hide()}},{key:"showCopyStyle",value:function(){this.display=!0,this.show();var t=this.xScreen.findType(fh).selectRange;this.selectRange=t,this.offsetHandle(),this.borderHandle()}},{key:"destroy",value:function(){op(ip(e.prototype),"destroy",this).call(this),this.unbind()}}])&&np(n.prototype,i),c&&np(n,c),e}(function(t){function e(t){var n,r=t.table;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=$y(this,qy(e).call(this,{table:r},"".concat(o,"-part-border-svg")))).blt.html(tp),n.bl.html(tp),n.bt.html(tp),n.bbr.html(tp),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qy(t,e)}(e,t),e}(Ff));function ap(t){return(ap="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function up(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function sp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fp(t,e,n){return(fp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hp(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function hp(t){return(hp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yp(t,e){return(yp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pp=function(t){function e(t){var n,r,i,c=t.title,l=void 0===c?"提示":c,a=t.message,u=void 0===a?"":a,s=t.ok,f=void 0===s?function(){}:s,h=t.no,y=void 0===h?function(){}:h;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(i=hp(e).call(this,"".concat(o,"-confirm")))||"object"!==ap(i)&&"function"!=typeof i?sp(r):i).title=l,n.message=u,n.ok=f,n.no=y,n.closeEle=z("div","".concat(o,"-confirm-close")),n.titleEle=z("div","".concat(o,"-confirm-title")),n.contentEle=z("div","".concat(o,"-confirm-content")),n.okEle=z("div","".concat(o,"-confirm-button ").concat(o,"-confirm-ok")),n.noEle=z("div","".concat(o,"-confirm-button ").concat(o,"-confirm-no")),n.buttonsEle=z("div","".concat(o,"-confirm-buttons")),n.titleEle.html(l),n.contentEle.html(u),n.okEle.html("确定"),n.noEle.html("取消"),n.buttonsEle.children(n.noEle),n.buttonsEle.children(n.okEle),n.children(n.closeEle),n.children(n.titleEle),n.children(n.contentEle),n.children(n.buttonsEle),n.dragPanel=(new _r).children(sp(n)),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yp(t,e)}(e,t),n=e,(i=[{key:"unbind",value:function(){var t=this.okEle,e=this.noEle;$.unbind(t),$.unbind(e)}},{key:"bind",value:function(){var t=this,e=this.okEle,n=this.noEle;$.bind(e,r.SYSTEM_EVENT_TYPE.CLICK,(function(){t.ok(),t.close()})),$.bind(n,r.SYSTEM_EVENT_TYPE.CLICK,(function(){t.no(),t.close()}))}},{key:"open",value:function(){this.dragPanel.open(),this.bind()}},{key:"close",value:function(){this.dragPanel.close(),this.destroy()}},{key:"destroy",value:function(){fp(hp(e.prototype),"destroy",this).call(this),this.unbind(),this.dragPanel.destroy()}}])&&up(n.prototype,i),c&&up(n,c),e}(ct);function bp(t){return(bp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dp(t,e){return!e||"object"!==bp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vp(t){return(vp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gp(t,e){return(gp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wp=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),dp(this,vp(e).call(this,"".concat(o,"-font-angle-context-menu-item")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gp(t,e)}(e,t),e}(Se);function Ep(t){return(Ep="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mp(t,e){return!e||"object"!==Ep(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Op(t){return(Op=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tp(t,e){return(Tp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xp=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),mp(this,Op(e).call(this,"".concat(o,"-tools-divider")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tp(t,e)}(e,t),e}(ct);function _p(t){return(_p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sp(t,e){return!e||"object"!==_p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function kp(t){return(kp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cp(t,e){return(Cp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Pp=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Sp(this,kp(e).call(this,"".concat(o,"-tools-font-angle-divider")))).children(new xp),t.css("padding-left","0"),t.css("padding-right","0"),t.css("margin-left","0"),t.css("margin-right","0"),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cp(t,e)}(e,t),e}(Lt);function Rp(t){return(Rp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lp(t,e){return!e||"object"!==Rp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ip(t){return(Ip=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ap(t,e){return(Ap=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Np=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Lp(this,Ip(e).call(this,"".concat(o,"-tools-drop-input-item ").concat(t)))).drop=z("div","".concat(o,"-tools-drop-input-item-mark")),n.title=z("div","".concat(o,"-tools-drop-input-item-title")),n.icon=new kt("arrow-down"),n.input=z("input","".concat(o,"-tools-drop-input")),n.drop.children(n.icon),n.title.children(n.input),n.children(n.title),n.children(n.drop),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ap(t,e)}(e,t),n=e,(r=[{key:"setValue",value:function(t){return this.input.val(t),this}}])&&jp(n.prototype,r),i&&jp(n,i),e}(Lt);function Vp(t){return(Vp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dp(t,e){return!e||"object"!==Vp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mp(t){return(Mp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wp(t,e){return(Wp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Bp=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Dp(this,Mp(e).call(this,"".concat(o,"-font-angle-value-context-menu-item")))).angleValue=t,n.titleElement=z("div","".concat(o,"-font-angle-value-context-menu-item-title")),n.titleElement.text(t),n.titleElement.css("text-align","center"),n.children(n.titleElement),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wp(t,e)}(e,t),e}(Se);function Yp(t){return(Yp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fp(t,e){return!e||"object"!==Yp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Up(t,e,n){return(Up="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Gp(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Gp(t){return(Gp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zp(t,e){return(zp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Xp=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Fp(this,Gp(e).call(this,"".concat(o,"-font-angle-value-context-menu"),H.copy({onUpdate:function(){}},n)))).items=[new Bp(-90),new Bp(-75),new Bp(-60),new Bp(-45),new Bp(-30),new Bp(-15),new Bp(0),new Bp(15),new Bp(30),new Bp(45),new Bp(60),new Bp(75),new Bp(90)],t.items.forEach((function(e){t.addItem(e)})),t.bind(),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zp(t,e)}(e,t),n=e,(i=[{key:"unbind",value:function(){this.items.forEach((function(t){$.unbind(t)}))}},{key:"bind",value:function(){var t=this;this.items.forEach((function(e){$.bind(e,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.options.onUpdate(e),t.close()}))}))}},{key:"destroy",value:function(){Up(Gp(e.prototype),"destroy",this).call(this),this.unbind()}}])&&Hp(n.prototype,i),c&&Hp(n,c),e}(me);function Zp(t){return(Zp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Kp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $p(t,e,n){return($p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qp(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function qp(t){return(qp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qp(t,e){return(Qp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var tb=function(t){function e(t){var n,r,i,c=t.onChange,l=void 0===c?function(){}:c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,i=qp(e).call(this,"".concat(o,"-tools-angle-value")),(n=!i||"object"!==Zp(i)&&"function"!=typeof i?Kp(r):i).onChange=l,n.value=0,n.fontAngleValueContextMenu=new Xp({onUpdate:function(t){var e=t.angleValue;n.setValue(e),n.onChange(e)},el:Kp(n)}),n.input.val(n.value),n.input.attr("type","number"),n.bind(),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qp(t,e)}(e,t),n=e,(i=[{key:"unbind",value:function(){var t=this.icon;$.unbind(t)}},{key:"bind",value:function(){var t=this,e=this.fontAngleValueContextMenu,n=this.icon,o=this.input;$.bind(n,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){e.isClose()?e.open():e.close()})),$.bind(o,r.SYSTEM_EVENT_TYPE.CHANGE,(function(){var e=H.parseInt(o.val());t.value=e,t.onChange(e)}))}},{key:"setValue",value:function(t){return this.value=t,$p(qp(e.prototype),"setValue",this).call(this,t)}},{key:"destroy",value:function(){$p(qp(e.prototype),"destroy",this).call(this),this.unbind(),this.fontAngleValueContextMenu.destroy()}}])&&Jp(n.prototype,i),c&&Jp(n,c),e}(Np);function eb(t){return(eb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nb(t,e){return!e||"object"!==eb(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rb(t){return(rb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ob(t,e){return(ob=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ib=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=nb(this,rb(e).call(this,"".concat(o,"-tools-font-angle1")))).icon=new kt("font-angle1"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ob(t,e)}(e,t),e}(Lt);function cb(t){return(cb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lb(t,e){return!e||"object"!==cb(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ab(t){return(ab=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ub(t,e){return(ub=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var sb=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=lb(this,ab(e).call(this,"".concat(o,"-tools-font-angle2")))).icon=new kt("font-angle2"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ub(t,e)}(e,t),e}(Lt);function fb(t){return(fb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hb(t,e){return!e||"object"!==fb(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function yb(t){return(yb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pb(t,e){return(pb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var bb=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=hb(this,yb(e).call(this,"".concat(o,"-tools-font-angle3")))).icon=new kt("font-angle3"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pb(t,e)}(e,t),e}(Lt);function db(t){return(db="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vb(t,e){return!e||"object"!==db(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gb(t){return(gb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wb(t,e){return(wb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Eb=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=vb(this,gb(e).call(this,"".concat(o,"-tools-font-angle4")))).icon=new kt("font-angle4"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wb(t,e)}(e,t),e}(Lt);function mb(t){return(mb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ob(t,e){return!e||"object"!==mb(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Tb(t){return(Tb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xb(t,e){return(xb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _b=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Ob(this,Tb(e).call(this,"".concat(o,"-tools-font-angle5")))).icon=new kt("font-angle5"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xb(t,e)}(e,t),e}(Lt);function Sb(t){return(Sb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kb(t,e){return!e||"object"!==Sb(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Cb(t){return(Cb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pb(t,e){return(Pb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Rb=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=kb(this,Cb(e).call(this,"".concat(o,"-tools-font-angle6")))).icon=new kt("font-angle6"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pb(t,e)}(e,t),e}(Lt);function jb(t){return(jb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ib(t,e){return!e||"object"!==jb(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ab(t,e,n){return(Ab="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Nb(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Nb(t){return(Nb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vb(t,e){return(Vb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Db=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Ib(this,Nb(e).call(this,"".concat(o,"-font-angle-context-menu"),H.copy({onUpdateAngle:function(){},onUpdateType:function(){}},n)));var r=z("div","".concat(o,"-font-angle-context-menu-type-icon-line"));return t.angle1=new ib,t.angle2=new sb,t.angle3=new bb,t.angle4=new Eb,t.angle5=new _b,t.angle6=new Rb,t.input=new tb({onChange:function(e){t.options.onUpdateAngle(e)}}),r.children(t.angle1),r.children(t.angle2),r.children(new Pp),r.children(t.angle4),r.children(t.angle3),r.children(t.angle6),r.children(t.angle5),r.children(new Pp),r.children(t.input),t.item=new wp,t.item.children(r),t.item.removeClass("hover"),t.addItem(t.item),t.bind(),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vb(t,e)}(e,t),n=e,(i=[{key:"unbind",value:function(){var t=this.angle1,e=this.angle2,n=this.angle3,r=this.angle4,o=this.angle5,i=this.angle6;$.unbind(t),$.unbind(e),$.unbind(n),$.unbind(r),$.unbind(o),$.unbind(i)}},{key:"bind",value:function(){var t=this,e=this.angle1,n=this.angle2,o=this.angle3,i=this.angle4,c=this.angle5,l=this.angle6;$.bind(e,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.options.onUpdateType(al.TEXT_DIRECTION.HORIZONTAL)})),$.bind(n,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.options.onUpdateType(al.TEXT_DIRECTION.VERTICAL)})),$.bind(o,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.options.onUpdateAngle(-45)})),$.bind(i,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.options.onUpdateAngle(45)})),$.bind(c,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.options.onUpdateAngle(-90)})),$.bind(l,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.options.onUpdateAngle(90)}))}},{key:"setValue",value:function(t){H.isNumber(t)||(t=0),this.input.setValue(t)}},{key:"destroy",value:function(){Ab(Nb(e.prototype),"destroy",this).call(this),this.unbind(),this.input.destroy()}}])&&Lb(n.prototype,i),c&&Lb(n,c),e}(me);function Mb(t){return(Mb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Bb(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Hb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fb(t,e,n){return(Fb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ub(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Ub(t){return(Ub=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gb(t,e){return(Gb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var zb=function(t){function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{contextMenu:{}};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(r=Ub(e).call(this,"".concat(o,"-tools-angle")))||"object"!==Mb(r)&&"function"!=typeof r?Hb(n):r).options=i,t.icon=new kt("angle"),t.setIcon(t.icon),t.fontAngleContextMenu=new Db(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Wb(Object(n),!0).forEach((function(e){Bb(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wb(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({el:Hb(t)},t.options.contextMenu)),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gb(t,e)}(e,t),n=e,(r=[{key:"setValue",value:function(t){this.fontAngleContextMenu.setValue(t)}},{key:"destroy",value:function(){Fb(Ub(e.prototype),"destroy",this).call(this),this.fontAngleContextMenu.destroy()}}])&&Yb(n.prototype,r),i&&Yb(n,i),e}(ie);function Xb(t){return(Xb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zb(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var c,l=t[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Jb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Kb(t,e){return!e||"object"!==Xb(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $b(t,e,n){return($b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qb(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function qb(t){return(qb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qb(t,e){return(Qb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var td=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Kb(this,qb(e).call(this,"".concat(o,"-tools-menu")))).workTop=t;var r=n.workTop.work.body.sheetView;return n.undo=new Dt,n.redo=new Ht,n.scale=new ls({contextMenu:{onUpdate:function(t){n.scale.setTitle("".concat(t,"%")),n.workTop.work.body.setScale(t/100)}}}),n.paintFormat=new Zt,n.clearFormat=new Qt,n.format=new tn({contextMenu:{onUpdate:function(t,e){var o=r.getActiveSheet().table,i=o.xScreen,c=o.getOperateCellsHelper(),l=o.tableDataSnapshot,a=i.findType(fh).selectRange;if(n.format.setTitle(e),a){l.begin();var u=l.cellDataProxy;c.getCellOrNewCellByViewRange({rectRange:a,callback:function(e,n,r){var o=r.clone();o.format=t,u.setCell(e,n,o)}}),l.end(),o.render()}}}}),n.font=new xn({contextMenu:{onUpdate:function(t){var e=r.getActiveSheet().table,o=e.xScreen,i=e.getOperateCellsHelper(),c=e.tableDataSnapshot,l=o.findType(fh).selectRange;if(n.font.setTitle(t),l){c.begin();var a=c.cellDataProxy;i.getCellOrNewCellByViewRange({rectRange:l,callback:function(e,n,r){var o=r.clone();o.fontAttr.name=t,a.setCell(e,n,o)}}),c.end(),e.render()}}}}),n.dprFontSize=new Gn({contextMenu:{onUpdate:function(t){var e=r.getActiveSheet().table,o=e.xScreen,i=e.getOperateCellsHelper(),c=e.tableDataSnapshot,l=o.findType(fh).selectRange;if(n.dprFontSize.setTitle(t),l){c.begin();var a=c.cellDataProxy;i.getCellOrNewCellByViewRange({rectRange:l,callback:function(e,n,r){var o=r.clone();o.fontAttr.size=t,a.setCell(e,n,o)}}),c.end(),e.render()}}}}),n.fontColor=new lo({contextMenu:{onUpdate:function(t){var e=r.getActiveSheet().table,o=e.xScreen,i=e.getOperateCellsHelper(),c=e.tableDataSnapshot,l=o.findType(fh).selectRange;if(n.fontColor.setColor(t),l){c.begin();var a=c.cellDataProxy;i.getCellOrNewCellByViewRange({rectRange:l,callback:function(e,n,r){var o=r.clone();o.fontAttr.color=t,a.setCell(e,n,o)}}),c.end(),e.render()}}}}),n.fillColor=new Po({contextMenu:{onUpdate:function(t){var e=r.getActiveSheet().table,o=e.xScreen,i=e.getOperateCellsHelper(),c=e.tableDataSnapshot,l=o.findType(fh).selectRange;if(n.fillColor.setColor(t),l){c.begin();var a=c.cellDataProxy;i.getCellOrNewCellByViewRange({rectRange:l,callback:function(e,n,r){var o=r.clone();o.background=t,a.setCell(e,n,o)}}),c.end(),e.render()}}}}),n.border=new Nc({contextMenu:{onUpdate:function(t,e,n){var o=r.getActiveSheet().table,i=o.xScreen,c=o.getOperateCellsHelper(),l=o.getXTableStyle(),a=o.tableDataSnapshot,u=i.findType(fh).selectRange;if(u){a.begin();var s=a.cellDataProxy,f=u,h=x.LINE_WIDTH_TYPE.low,y=vc.SOLID_LINE;switch(n){case"line1":h=x.LINE_WIDTH_TYPE.low,y=vc.SOLID_LINE;break;case"line2":h=x.LINE_WIDTH_TYPE.medium,y=vc.SOLID_LINE;break;case"line3":h=x.LINE_WIDTH_TYPE.high,y=vc.SOLID_LINE;break;case"line4":y=vc.DOTTED_LINE;break;case"line5":y=vc.POINT_LINE;break;case"line6":y=vc.DOUBLE_LINE}var p=[];switch(t){case"border1":c.getCellOrNewCellByViewRange({rectRange:f,callback:function(t,n,r){var o=r.clone();if(l.hasAngleCell(t)&&l.isAngleBarCell(t,n))p.push({ri:t,ci:n,newCell:o});else{var i=o.borderAttr;i.setAllDisplay(!0),i.setAllColor(e),i.setAllWidthType(h),i.setAllType(y),s.setCell(t,n,o)}}}),p.forEach((function(t){var n=t.ri,r=t.ci,o=t.newCell,i=o.borderAttr;i.setAllDisplay(!0),i.setAllColor(e),i.setAllWidthType(h),i.setAllType(y),s.setCell(n,r,o)}));break;case"border2":c.getCellOrNewCellByViewRange({rectRange:f,callback:function(t,n,r){var o=r.clone();if(l.hasAngleCell(t)&&l.isAngleBarCell(t,n))p.push({ri:t,ci:n,newCell:o});else{var i=o.borderAttr;t!==f.sri&&(i.setTDisplay(!0),i.setTColor(e),i.setTWidthType(h),i.setTType(y)),t!==f.eri&&(i.setBDisplay(!0),i.setBColor(e),i.setBWidthType(h),i.setBType(y)),n!==f.sci&&(i.setLDisplay(!0),i.setLColor(e),i.setLWidthType(h),i.setLType(y)),n!==f.eci&&(i.setRDisplay(!0),i.setRColor(e),i.setRWidthType(h),i.setRType(y)),s.setCell(t,n,o)}}}),p.forEach((function(t){var n=t.ri,r=t.ci,o=t.newCell,i=o.borderAttr;n!==f.sri&&(i.setTDisplay(!0),i.setTColor(e),i.setTWidthType(h),i.setTType(y)),n!==f.eri&&(i.setBDisplay(!0),i.setBColor(e),i.setBWidthType(h),i.setBType(y)),r!==f.sci&&(i.setLDisplay(!0),i.setLColor(e),i.setLWidthType(h),i.setLType(y)),r!==f.eci&&(i.setRDisplay(!0),i.setRColor(e),i.setRWidthType(h),i.setRType(y)),s.setCell(n,r,o)}));break;case"border3":c.getCellOrNewCellByViewRange({rectRange:f,callback:function(t,n,r){var o=r.clone();if(l.hasAngleCell(t)&&l.isAngleBarCell(t,n))p.push({ri:t,ci:n,newCell:o});else{var i=o.borderAttr;t!==f.sri&&(i.setTDisplay(!0),i.setTColor(e),i.setTWidthType(h),i.setTType(y)),t!==f.eri&&(i.setBDisplay(!0),i.setBColor(e),i.setBWidthType(h),i.setBType(y))}}}),p.forEach((function(t){var n=t.ri,r=t.newCell.borderAttr;n!==f.sri&&(r.setTDisplay(!0),r.setTColor(e),r.setTWidthType(h),r.setTType(y)),n!==f.eri&&(r.setBDisplay(!0),r.setBColor(e),r.setBWidthType(h),r.setBType(y))}));break;case"border4":c.getCellOrNewCellByViewRange({rectRange:f,callback:function(t,n,r){var o=r.clone();if(l.hasAngleCell(t)&&l.isAngleBarCell(t,n))p.push({ri:t,ci:n,newCell:o});else{var i=o.borderAttr;n!==f.sci&&(i.setLDisplay(!0),i.setLColor(e),i.setLWidthType(h),i.setLType(y)),n!==f.eci&&(i.setRDisplay(!0),i.setRColor(e),i.setRWidthType(h),i.setRType(y)),s.setCell(t,n,o)}}}),p.forEach((function(t){var n=t.ri,r=t.ci,o=t.newCell,i=o.borderAttr;r!==f.sci&&(i.setLDisplay(!0),i.setLColor(e),i.setLWidthType(h),i.setLType(y)),r!==f.eci&&(i.setRDisplay(!0),i.setRColor(e),i.setRWidthType(h),i.setRType(y)),s.setCell(n,r,o)}));break;case"border5":c.getCellOrNewCellByViewRange({rectRange:f,callback:function(t,n,r){var o=r.clone();if(l.hasAngleCell(t)&&l.isAngleBarCell(t,n))p.push({ri:t,ci:n,newCell:o});else{var i=o.borderAttr;t===f.sri&&(i.setTDisplay(!0),i.setTColor(e),i.setTWidthType(h),i.setTType(y)),t===f.eri&&(i.setBDisplay(!0),i.setBColor(e),i.setBWidthType(h),i.setBType(y)),n===f.sci&&(i.setLDisplay(!0),i.setLColor(e),i.setLWidthType(h),i.setLType(y)),n===f.eci&&(i.setRDisplay(!0),i.setRColor(e),i.setRWidthType(h),i.setRType(y)),s.setCell(t,n,o)}}}),p.forEach((function(t){var n=t.ri,r=t.ci,o=t.newCell,i=o.borderAttr;n===f.sri&&(i.setTDisplay(!0),i.setTColor(e),i.setTWidthType(h),i.setTType(y)),n===f.eri&&(i.setBDisplay(!0),i.setBColor(e),i.setBWidthType(h),i.setBType(y)),r===f.sci&&(i.setLDisplay(!0),i.setLColor(e),i.setLWidthType(h),i.setLType(y)),r===f.eci&&(i.setRDisplay(!0),i.setRColor(e),i.setRWidthType(h),i.setRType(y)),s.setCell(n,r,o)}));break;case"border6":c.getCellOrNewCellByViewRange({rectRange:f,callback:function(t,n,r){var o=r.clone();if(l.hasAngleCell(t)&&l.isAngleBarCell(t,n))p.push({ri:t,ci:n,newCell:o});else{var i=o.borderAttr;n===f.sci&&(i.setLDisplay(!0),i.setLColor(e),i.setLWidthType(h),i.setLType(y)),s.setCell(t,n,o)}}}),p.forEach((function(t){var n=t.ri,r=t.ci,o=t.newCell,i=o.borderAttr;r===f.sci&&(i.setLDisplay(!0),i.setLColor(e),i.setLWidthType(h),i.setLType(y)),s.setCell(n,r,o)}));break;case"border7":c.getCellOrNewCellByViewRange({rectRange:f,callback:function(t,n,r){var o=r.clone();if(l.hasAngleCell(t)&&l.isAngleBarCell(t,n))p.push({ri:t,ci:n,newCell:o});else{var i=o.borderAttr;t===f.sri&&(i.setTDisplay(!0),i.setTColor(e),i.setTWidthType(h),i.setTType(y)),s.setCell(t,n,o)}}}),p.forEach((function(t){var n=t.ri,r=t.ci,o=t.newCell,i=o.borderAttr;n===f.sri&&(i.setTDisplay(!0),i.setTColor(e),i.setTWidthType(h),i.setTType(y)),s.setCell(n,r,o)}));break;case"border8":c.getCellOrNewCellByViewRange({rectRange:f,callback:function(t,n,r){var o=r.clone();if(l.hasAngleCell(t)&&l.isAngleBarCell(t,n))p.push({ri:t,ci:n,newCell:o});else{var i=o.borderAttr;n===f.eci&&(i.setRDisplay(!0),i.setRColor(e),i.setRWidthType(h),i.setRType(y)),s.setCell(t,n,o)}}}),p.forEach((function(t){var n=t.ri,r=t.ci,o=t.newCell,i=o.borderAttr;r===f.eci&&(i.setRDisplay(!0),i.setRColor(e),i.setRWidthType(h),i.setRType(y)),s.setCell(n,r,o)}));break;case"border9":c.getCellOrNewCellByViewRange({rectRange:f,callback:function(t,n,r){var o=r.clone();if(l.hasAngleCell(t)&&l.isAngleBarCell(t,n))p.push({ri:t,ci:n,newCell:o});else{var i=o.borderAttr;t===f.eri&&(i.setBDisplay(!0),i.setBColor(e),i.setBWidthType(h),i.setBType(y)),s.setCell(t,n,o)}}}),p.forEach((function(t){var n=t.ri,r=t.ci,o=t.newCell,i=o.borderAttr;n===f.eri&&(i.setBDisplay(!0),i.setBColor(e),i.setBWidthType(h),i.setBType(y)),s.setCell(n,r,o)}));break;case"border10":c.getCellOrNewCellByViewRange({rectRange:f,callback:function(t,e,n){var r=n.clone();l.hasAngleCell(t)&&l.isAngleBarCell(t,e)?p.push({ri:t,ci:e,newCell:r}):(r.borderAttr.setAllDisplay(!1),s.setCell(t,e,r))}}),p.forEach((function(t){var e=t.ri,n=t.ci,r=t.newCell;r.borderAttr.setAllDisplay(!1),s.setCell(e,n,r)}))}a.end(),o.render()}}}}),n.fontBold=new Kn,n.fontItalic=new er,n.underLine=new cr,n.fontStrike=new fr,n.merge=new Bc,n.horizontalAlign=new xl({contextMenu:{onUpdate:function(t){var e=r.getActiveSheet().table,o=e.xScreen,i=e.getOperateCellsHelper(),c=e.tableDataSnapshot,l=o.findType(fh).selectRange;switch(t){case al.ALIGN.left:n.horizontalAlign.setIcon(new kt("align-left"));break;case al.ALIGN.center:n.horizontalAlign.setIcon(new kt("align-center"));break;case al.ALIGN.right:n.horizontalAlign.setIcon(new kt("align-right"))}if(l){c.begin();var a=c.cellDataProxy;i.getCellOrNewCellByViewRange({rectRange:l,callback:function(e,n,r){var o=r.clone();o.fontAttr.align=t,a.setCell(e,n,o)}}),c.end(),e.render()}}}}),n.verticalAlign=new ca({contextMenu:{onUpdate:function(t){var e=r.getActiveSheet().table,o=e.xScreen,i=e.getOperateCellsHelper(),c=e.tableDataSnapshot,l=o.findType(fh).selectRange;switch(t){case al.VERTICAL_ALIGN.top:n.verticalAlign.setIcon(new kt("align-top"));break;case al.VERTICAL_ALIGN.center:n.verticalAlign.setIcon(new kt("align-middle"));break;case al.VERTICAL_ALIGN.bottom:n.verticalAlign.setIcon(new kt("align-bottom"))}if(l){c.begin();var a=c.cellDataProxy;i.getCellOrNewCellByViewRange({rectRange:l,callback:function(e,n,r){var o=r.clone();o.fontAttr.verticalAlign=t,a.setCell(e,n,o)}}),c.end(),e.render()}}}}),n.textWrapping=new Ha({contextMenu:{onUpdate:function(t){var e,o=r.getActiveSheet().table,i=o.xScreen,c=o.getOperateCellsHelper(),l=o.tableDataSnapshot,a=i.findType(fh).selectRange;switch(t){case al.TEXT_WRAP.TRUNCATE:e=new kt("truncate");break;case al.TEXT_WRAP.WORD_WRAP:e=new kt("text-wrap");break;case al.TEXT_WRAP.OVER_FLOW:e=new kt("overflow")}if(n.textWrapping.setIcon(e),a){l.begin();var u=l.cellDataProxy;c.getCellOrNewCellByViewRange({rectRange:a,callback:function(e,n,r){var o=r.clone();o.fontAttr.textWrap=t,u.setCell(e,n,o)}}),l.end(),o.render()}}}}),n.fixed=new fu({contextMenu:{onUpdate:function(t){var e=r.getActiveSheet().table,o=e.xScreen.findType(fh).selectRange;switch(t){case"ROW":if(n.fixed.rowStatus)e.setFixedRow(-1);else if(o){var i=e.getScrollView(),c=o.sri;c<i.eri-2&&c>=i.sri?e.setFixedRow(c):new gh({message:"无法在当前区域内冻结单元格, 请重新选择冻结区域"}).open()}break;case"COL":if(n.fixed.colStatus)e.setFixedCol(-1);else if(o){var l=e.getScrollView(),a=o.sci;a<l.eci-2&&a>=l.sci?e.setFixedCol(a):new gh({message:"无法在当前区域内冻结单元格, 请重新选择冻结区域"}).open()}break;case"ROW1":e.setFixedRow(0,0);break;case"ROW2":e.setFixedRow(1,0);break;case"COL1":e.setFixedCol(0,0);break;case"COL2":e.setFixedCol(1,0)}}}}),n.filter=new du,n.functions=new mu,n.fontAngle=new zb({contextMenu:{onUpdateAngle:function(t){var e=r.getActiveSheet().table,n=e.xScreen,o=e.getOperateCellsHelper(),i=e.tableDataSnapshot,c=n.findType(fh).selectRange;if(c){i.begin();var l=i.cellDataProxy;o.getCellOrNewCellByViewRange({rectRange:c,callback:function(e,n,r){var o=r.clone();0===t?(o.fontAttr.angle=t,o.fontAttr.direction=al.TEXT_DIRECTION.HORIZONTAL):(o.borderAttr.updateMaxIndex(),o.fontAttr.angle=t,o.fontAttr.direction=al.TEXT_DIRECTION.ANGLE),l.setCell(e,n,o)}}),i.end(),e.render()}},onUpdateType:function(t){var e=r.getActiveSheet().table,n=e.xScreen,o=e.getOperateCellsHelper(),i=e.tableDataSnapshot,c=n.findType(fh).selectRange;if(c){i.begin();var l=i.cellDataProxy;o.getCellOrNewCellByViewRange({rectRange:c,callback:function(e,n,r){var o=r.clone();o.fontAttr.angle=0,o.fontAttr.direction=t,l.setCell(e,n,o)}}),i.end(),e.render()}}}}),n.children(n.undo),n.children(n.redo),n.children(new xp),n.children(n.scale),n.children(n.paintFormat),n.children(n.clearFormat),n.children(n.format),n.children(new xp),n.children(n.font),n.children(n.dprFontSize),n.children(new xp),n.children(n.fontBold),n.children(n.fontItalic),n.children(n.underLine),n.children(n.fontStrike),n.children(n.fontColor),n.children(new xp),n.children(n.fillColor),n.children(n.border),n.children(n.merge),n.children(new xp),n.children(n.horizontalAlign),n.children(n.verticalAlign),n.children(n.textWrapping),n.children(n.fontAngle),n.children(new xp),n.children(n.fixed),n.children(n.filter),n.children(n.functions),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qb(t,e)}(e,t),n=e,(i=[{key:"onAttach",value:function(){this.bind()}},{key:"unbind",value:function(){var t=this.workTop.work.body;$.bind(t),$.bind(this.scale),$.bind(this.undo),$.bind(this.redo),$.bind(this.paintFormat),$.bind(this.clearFormat),$.bind(this.format),$.bind(this.font),$.bind(this.dprFontSize),$.bind(this.fontBold),$.bind(this.fontItalic),$.bind(this.underLine),$.bind(this.fontStrike),$.bind(this.fontColor),$.bind(this.fillColor),$.bind(this.border),$.bind(this.merge),$.bind(this.horizontalAlign),$.bind(this.verticalAlign),$.bind(this.textWrapping),$.bind(this.fixed),$.bind(this.filter)}},{key:"bind",value:function(){var t=this,e=this.workTop.work.body,n=e.sheetView;$.bind(e,r.WORK_BODY_EVENT_TYPE.CHANGE_ACTIVE,(function(){t.setStatus()})),$.bind(e,r.TABLE_EVENT_TYPE.SELECT_DOWN,(function(){t.setFormatStatus(),t.setFontStatus(),t.setFontSizeStatus(),t.setFontBoldStatus(),t.setFontItalicStatus(),t.setUnderLineStatus(),t.setFontStrikeStatus(),t.setFontColorStatus(),t.setFillColorStatus(),t.setHorizontalAlignStatus(),t.setVerticalAlignStatus(),t.setTextWrappingStatus(),t.setFontAngleStatus()})),$.bind(e,r.TABLE_EVENT_TYPE.DATA_CHANGE,(function(){t.setStatus()})),$.bind(e,r.TABLE_EVENT_TYPE.FIXED_CHANGE,(function(){t.setFixedStatus()})),$.bind(this.scale,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.scale.scaleContextMenu,r=n.elPopUp;pe.closeAll([r]),n.isClose()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),$.bind(this.undo,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){var t=n.getActiveSheet().table.tableDataSnapshot;t.canBack()&&t.back()})),$.bind(this.redo,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){var t=n.getActiveSheet().table.tableDataSnapshot;t.canGo()&&t.go()})),$.bind(this.paintFormat,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){var e=n.getActiveSheet(),o=e.table,i=o.xScreen,c=i.findType(fh),l=c.selectRange;if(!H.isUnDef(l)){var a=o.cellMergeCopyHelper,u=o.tableDataSnapshot,s=i.findType(lp),f=function n(){s.hideCopyStyle(),t.paintFormat.active(!1),t.paintFormat.removeSheet(e);var i=s.selectRange.clone(),l=c.selectRange.clone(),f=Zb(i.size(),2),h=f[0],y=f[1],p=Zb(l.size(),2),b=p[0],d=p[1],v=h>b?h:b,g=y>d?y:d;l.eri=l.sri+(v-1),l.eci=l.sci+(g-1),u.begin(),a.copyMergeContent({originViewRange:i,targetViewRange:l}),a.copyStylesContent({originViewRange:i,targetViewRange:l}),u.end(),o.render(),$.unbind(o,r.TABLE_EVENT_TYPE.SELECT_OVER,n)};t.paintFormat.includeSheet(e)?(s.hideCopyStyle(),t.paintFormat.active(!1),t.paintFormat.removeSheet(e),$.unbind(o,r.TABLE_EVENT_TYPE.SELECT_OVER,f)):(s.showCopyStyle(),t.paintFormat.active(!0),t.paintFormat.addSheet(e),$.bind(o,r.TABLE_EVENT_TYPE.SELECT_OVER,f))}})),$.bind(this.clearFormat,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){var t=n.getActiveSheet().table,e=t.xScreen,r=t.getOperateCellsHelper(),o=t.tableDataSnapshot,i=e.findType(fh).selectRange;if(i){o.begin();var c=o.cellDataProxy;r.getCellOrNewCellByViewRange({rectRange:i,callback:function(t,e,n){var r=n.text;c.setCell(t,e,new Bu({text:r}))}}),o.end(),t.render()}})),$.bind(this.format,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.format.formatContextMenu,r=n.elPopUp;pe.closeAll([r]),n.isClose()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),$.bind(this.font,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.font.fontContextMenu,r=n.elPopUp;pe.closeAll([r]),n.isClose()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),$.bind(this.dprFontSize,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.dprFontSize.fontSizeContextMenu,r=n.elPopUp;pe.closeAll([r]),n.isClose()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),$.bind(this.fontBold,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){var t=n.getActiveSheet().table,e=t.xScreen,r=t.getOperateCellsHelper(),o=t.getTableCells(),i=t.tableDataSnapshot,c=e.findType(fh).selectRange;if(c){var l=!o.getCellOrNew(c.sri,c.sci).fontAttr.bold;i.begin();var a=i.cellDataProxy;r.getCellOrNewCellByViewRange({rectRange:c,callback:function(t,e,n){var r=n.clone();r.fontAttr.bold=l,a.setCell(t,e,r)}}),i.end(),t.render()}})),$.bind(this.fontItalic,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){var t=n.getActiveSheet().table,e=t.xScreen,r=t.getOperateCellsHelper(),o=t.getTableCells(),i=t.tableDataSnapshot,c=e.findType(fh).selectRange;if(c){var l=!o.getCellOrNew(c.sri,c.sci).fontAttr.italic;i.begin();var a=i.cellDataProxy;r.getCellOrNewCellByViewRange({rectRange:c,callback:function(t,e,n){var r=n.clone();r.fontAttr.italic=l,a.setCell(t,e,r)}}),i.end(),t.render()}})),$.bind(this.underLine,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){var t=n.getActiveSheet().table,e=t.xScreen,r=t.getOperateCellsHelper(),o=t.getTableCells(),i=t.tableDataSnapshot,c=e.findType(fh).selectRange;if(c){var l=!o.getCellOrNew(c.sri,c.sci).fontAttr.underline;i.begin();var a=i.cellDataProxy;r.getCellOrNewCellByViewRange({rectRange:c,callback:function(t,e,n){var r=n.clone();r.fontAttr.underline=l,a.setCell(t,e,r)}}),i.end(),t.render()}})),$.bind(this.fontStrike,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){var t=n.getActiveSheet().table,e=t.xScreen,r=t.getOperateCellsHelper(),o=t.getTableCells(),i=t.tableDataSnapshot,c=e.findType(fh).selectRange;if(c){var l=!o.getCellOrNew(c.sri,c.sci).fontAttr.strikethrough;i.begin();var a=i.cellDataProxy;r.getCellOrNewCellByViewRange({rectRange:c,callback:function(t,e,n){var r=n.clone();r.fontAttr.strikethrough=l,a.setCell(t,e,r)}}),i.end(),t.render()}})),$.bind(this.fontColor,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.fontColor.fontColorContextMenu,r=n.elPopUp;pe.closeAll([r]),n.isClose()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),$.bind(this.fillColor,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.fillColor.fillColorContextMenu,r=n.elPopUp;pe.closeAll([r]),n.isClose()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),$.bind(this.border,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.border.borderTypeContextMenu,r=n.elPopUp;pe.closeAll([r]),n.isClose()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),$.bind(this.merge,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(t){var e=n.getActiveSheet().table,r=e.xScreen,o=e.getTableMerges(),i=e.getTableCells(),c=e.tableDataSnapshot,l=r.findType(fh).selectRange;if(l){var a=l.clone(),u=o.getFirstIncludes(a.sri,a.sci),s=c.mergeDataProxy;H.isNotUnDef(u)&&a.equals(u)?(c.begin(),s.deleteMerge(u),c.end(),e.render()):a.multiple()&&(i.emptyRectRange(a)?(c.begin(),s.addMerge(a),c.end(),e.render()):new pp({message:"非空单元格合并将使用左上角单元格内容",ok:function(){c.begin(),s.addMerge(a),c.end(),e.render()}}).open())}t.stopPropagation(),t.preventDefault()})),$.bind(this.horizontalAlign,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.horizontalAlign.horizontalContextMenu,r=n.elPopUp;pe.closeAll([r]),n.isClose()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),$.bind(this.verticalAlign,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.verticalAlign.verticalContextMenu,r=n.elPopUp;pe.closeAll([r]),n.isClose()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),$.bind(this.textWrapping,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.textWrapping.textWrappingContextMenu,r=n.elPopUp;pe.closeAll([r]),n.isClose()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),$.bind(this.fixed,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.fixed.fixedContextMenu,r=n.elPopUp;pe.closeAll([r]),n.isClose()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),$.bind(this.filter,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){var e=n.getActiveSheet().table.xScreen.findType(Jy);e.display?(e.hideFilter(),t.filter.active(e.display)):(e.openFilter(),t.filter.active(e.display))})),$.bind(this.fontAngle,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.fontAngle.fontAngleContextMenu,r=n.elPopUp;pe.closeAll([r]),n.isClose()?n.open():n.close(),e.stopPropagation(),e.preventDefault()}))}},{key:"setHorizontalAlignStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.xScreen,n=t.getTableCells(),r=e.findType(fh).selectRange,o=new kt("align-left");if(r)switch(n.getCellOrNew(r.sri,r.sci).fontAttr.align){case al.ALIGN.left:o=new kt("align-left");break;case al.ALIGN.center:o=new kt("align-center");break;case al.ALIGN.right:o=new kt("align-right")}this.horizontalAlign.setIcon(o)}},{key:"setVerticalAlignStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.xScreen,n=t.getTableCells(),r=e.findType(fh).selectRange,o=new kt("align-middle");if(r)switch(n.getCellOrNew(r.sri,r.sci).fontAttr.verticalAlign){case al.VERTICAL_ALIGN.top:o=new kt("align-top");break;case al.VERTICAL_ALIGN.center:o=new kt("align-middle");break;case al.VERTICAL_ALIGN.bottom:o=new kt("align-bottom")}this.verticalAlign.setIcon(o)}},{key:"setTextWrappingStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.xScreen,n=t.getTableCells(),r=e.findType(fh).selectRange,o=new kt("text-wrap");if(r)switch(n.getCellOrNew(r.sri,r.sci).fontAttr.textWrap){case al.TEXT_WRAP.TRUNCATE:o=new kt("truncate");break;case al.TEXT_WRAP.WORD_WRAP:o=new kt("text-wrap");break;case al.TEXT_WRAP.OVER_FLOW:o=new kt("overflow")}this.textWrapping.setIcon(o)}},{key:"setUndoStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table.tableDataSnapshot;this.undo.active(t.canBack())}},{key:"setRedoStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table.tableDataSnapshot;this.redo.active(t.canGo())}},{key:"setScaleStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table.scale.goto(100);this.scale.setTitle("".concat(t,"%"))}},{key:"setPaintFormatStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet();this.paintFormat.active(this.paintFormat.includeSheet(t))}},{key:"setFormatStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.xScreen,n=t.getTableCells(),r=e.findType(fh).selectRange,o="常规",i="default";if(r)switch(i=n.getCellOrNew(r.sri,r.sci).format){case"default":o="常规";break;case"text":o="文本";break;case"number":o="数字";break;case"percentage":o="百分比";break;case"fraction":o="分数";break;case"ENotation":o="科学计数";break;case"rmb":o="人民币";break;case"hk":o="港币";break;case"dollar":o="美元";break;case"date1":case"date2":case"date3":case"date4":case"date5":o="日期";break;case"time":o="时间"}this.format.setTitle(o),this.format.formatContextMenu.setActiveByType(i)}},{key:"setFontStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.xScreen,n=t.getTableCells(),r=e.findType(fh).selectRange,o="Arial";r&&(o=n.getCellOrNew(r.sri,r.sci).fontAttr.name),this.font.setTitle(o),this.font.fontContextMenu.setActiveByType(o)}},{key:"setStatus",value:function(){this.setUndoStatus(),this.setRedoStatus(),this.setScaleStatus(),this.setPaintFormatStatus(),this.setFormatStatus(),this.setFontStatus(),this.setFontSizeStatus(),this.setFontBoldStatus(),this.setFontItalicStatus(),this.setUnderLineStatus(),this.setFontStrikeStatus(),this.setFontColorStatus(),this.setFillColorStatus(),this.setHorizontalAlignStatus(),this.setVerticalAlignStatus(),this.setTextWrappingStatus(),this.setFixedStatus(),this.setFilterStatus(),this.setFontAngleStatus()}},{key:"setFixedStatus",value:function(){var t=this.workTop.work.body,e=this.fixed,n=t.sheetView.getActiveSheet().table;e.setFixedRowStatus(n.xFixedView.hasFixedTop()),e.setFixedColStatus(n.xFixedView.hasFixedLeft())}},{key:"setFilterStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table.xScreen.findType(Jy);this.filter.active(t.display)}},{key:"setUnderLineStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.xScreen,n=t.getTableCells(),r=e.findType(fh).selectRange,o=!1;r&&(o=n.getCellOrNew(r.sri,r.sci).fontAttr.underline),this.underLine.active(o)}},{key:"setFontSizeStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.xScreen,n=t.getTableCells(),r=e.findType(fh).selectRange,o="12";r&&(o=n.getCellOrNew(r.sri,r.sci).fontAttr.size),this.dprFontSize.setTitle(o)}},{key:"setFontBoldStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.xScreen,n=t.getTableCells(),r=e.findType(fh).selectRange,o=!1;r&&(o=n.getCellOrNew(r.sri,r.sci).fontAttr.bold),this.fontBold.active(o)}},{key:"setFontStrikeStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.xScreen,n=t.getTableCells(),r=e.findType(fh).selectRange,o=!1;r&&(o=n.getCellOrNew(r.sri,r.sci).fontAttr.strikethrough),this.fontStrike.active(o)}},{key:"setFontColorStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.xScreen,n=t.getTableCells(),r=e.findType(fh).selectRange,o="rgb(0, 0, 0)";r&&(o=n.getCellOrNew(r.sri,r.sci).fontAttr.color),this.fontColor.setColor(o),this.fontColor.fontColorContextMenu.setActiveByColor(o)}},{key:"setFillColorStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.xScreen,n=t.getTableCells(),r=e.findType(fh).selectRange,o="rgb(255, 255, 255)";if(r){var i=n.getCellOrNew(r.sri,r.sci);i.background&&(o=i.background)}this.fillColor.setColor(o),this.fillColor.fillColorContextMenu.setActiveByColor(o)}},{key:"setFontItalicStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.xScreen,n=t.getTableCells(),r=e.findType(fh).selectRange,o=!1;r&&(o=n.getCellOrNew(r.sri,r.sci).fontAttr.italic),this.fontItalic.active(o)}},{key:"setFontAngleStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.xScreen,n=t.getTableCells(),r=e.findType(fh).selectRange,o=0;r&&(o=n.getCellOrNew(r.sri,r.sci).fontAttr.angle),this.fontAngle.setValue(o)}},{key:"destroy",value:function(){$b(qb(e.prototype),"destroy",this).call(this),this.unbind()}}])&&Jb(n.prototype,i),c&&Jb(n,c),e}(ct);function ed(t){return(ed="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rd(t,e){return!e||"object"!==ed(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function od(t){return(od=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function id(t,e){return(id=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var cd=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=rd(this,od(e).call(this,"".concat(o,"-option-item ").concat(t)))).title="",n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&id(t,e)}(e,t),n=e,(r=[{key:"setTitle",value:function(t){this.title=t,this.text(this.title)}}])&&nd(n.prototype,r),i&&nd(n,i),e}(ct);function ld(t){return(ld="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ad(t,e){return!e||"object"!==ld(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ud(t){return(ud=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sd(t,e){return(sd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fd=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ad(this,ud(e).call(this,"".concat(o,"-file-context-menu-item")))).scale=t,n.titleElement=z("div","".concat(o,"-file-context-menu-item-title")),n.titleElement.text("".concat(t)),n.children(n.titleElement),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sd(t,e)}(e,t),e}(Se);function hd(t){return(hd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pd(t,e){return!e||"object"!==hd(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function bd(t,e,n){return(bd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=dd(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function dd(t){return(dd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vd(t,e){return(vd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var gd=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=pd(this,dd(e).call(this,"".concat(o,"-scale-context-menu"),H.copy({onUpdate:function(){}},n)))).items=[new fd("导入xlsx文件"),new fd("导出xlsx文件"),new fd("导入cvs文件")],t.items.forEach((function(e){t.addItem(e)})),t.bind(),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vd(t,e)}(e,t),n=e,(i=[{key:"update",value:function(t){this.options.onUpdate(t),this.close()}},{key:"bind",value:function(){var t=this;this.items.forEach((function(e){$.bind(e,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.update(e)}))}))}},{key:"unbind",value:function(){this.items.forEach((function(t){$.unbind(t,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN)}))}},{key:"destroy",value:function(){bd(dd(e.prototype),"destroy",this).call(this),this.unbind()}}])&&yd(n.prototype,i),c&&yd(n,c),e}(me);function wd(t){return(wd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ed(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function md(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Od(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Td(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xd(t,e,n){return(xd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_d(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function _d(t){return(_d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Sd(t,e){return(Sd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var kd=function(t){function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{contextMenu:{}};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(r=_d(e).call(this,"".concat(o,"-tools-file")))||"object"!==wd(r)&&"function"!=typeof r?Td(n):r).options=i,t.setTitle("文件"),t.fileContextMenu=new gd(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ed(Object(n),!0).forEach((function(e){md(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ed(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({el:Td(t)},t.options.contextMenu)),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sd(t,e)}(e,t),n=e,(r=[{key:"destroy",value:function(){xd(_d(e.prototype),"destroy",this).call(this),this.fileContextMenu.destroy()}}])&&Od(n.prototype,r),i&&Od(n,i),e}(cd);function Cd(t){return(Cd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pd(t,e){return!e||"object"!==Cd(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Rd(t){return(Rd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jd(t,e){return(jd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ld=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Pd(this,Rd(e).call(this,"".concat(o,"-tools-format")))).setTitle("格式"),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jd(t,e)}(e,t),e}(cd);function Id(t){return(Id="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ad(t,e){return!e||"object"!==Id(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Nd(t){return(Nd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vd(t,e){return(Vd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Dd=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Ad(this,Nd(e).call(this,"".concat(o,"-tools-insert")))).setTitle("插入"),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vd(t,e)}(e,t),e}(cd);function Md(t){return(Md="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wd(t,e){return!e||"object"!==Md(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bd(t){return(Bd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yd(t,e){return(Yd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Hd=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Wd(this,Bd(e).call(this,"".concat(o,"-tools-look")))).setTitle("查看"),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yd(t,e)}(e,t),e}(cd);function Fd(t){return(Fd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ud(t,e){return!e||"object"!==Fd(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gd(t){return(Gd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zd(t,e){return(zd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Xd=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Ud(this,Gd(e).call(this,"".concat(o,"-tools-update")))).setTitle("修改"),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zd(t,e)}(e,t),e}(cd);function Zd(t){return(Zd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Kd(t,e){return!e||"object"!==Zd(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $d(t){return($d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qd(t,e){return(qd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qd=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Kd(this,$d(e).call(this,"".concat(o,"-option")))).workTop=t,n.title="".concat(o," 工作簿"),n.logoEle=z("div","".concat(o,"-option-logo")),n.titleEle=z("div","".concat(o,"-option-title")),n.optionsEle=z("div","".concat(o,"-option-box")),n.leftEle=z("div","".concat(o,"-option-left")),n.rightEle=z("div","".concat(o,"-option-right")),n.leftEle.children(n.logoEle),n.rightEle.children(n.titleEle,n.optionsEle),n.children(n.leftEle),n.children(n.rightEle),n.setTitle(n.title),n.file=new kd({contextMenu:{onUpdate:function(){new gh({message:"开发人员正在努力施工中...."}).open()}}}),n.format=new Ld,n.insert=new Dd,n.look=new Hd,n.update=new Xd,n.optionsEle.children(n.file),n.optionsEle.children(n.format),n.optionsEle.children(n.insert),n.optionsEle.children(n.look),n.optionsEle.children(n.update),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qd(t,e)}(e,t),n=e,(i=[{key:"onAttach",value:function(){this.bind()}},{key:"bind",value:function(){var t=this;$.bind(this.file,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.file.fileContextMenu,r=n.elPopUp;pe.closeAll([r]),n.isClose()?n.open():n.close(),e.preventDefault(),e.stopPropagation()}))}},{key:"unbind",value:function(){}},{key:"setTitle",value:function(t){this.title=t,this.titleEle.text(t)}}])&&Jd(n.prototype,i),c&&Jd(n,c),e}(ct);function tv(t){return(tv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ev(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nv(t,e){return!e||"object"!==tv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rv(t){return(rv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ov(t,e){return(ov=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var iv=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=nv(this,rv(e).call(this,"".concat(o,"-work-top")))).work=t,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ov(t,e)}(e,t),n=e,(r=[{key:"onAttach",value:function(){this.toolsMenu=new td(this),this.option=new Qd(this),this.attach(this.option),this.attach(this.toolsMenu)}}])&&ev(n.prototype,r),i&&ev(n,i),e}(ct);function cv(t){return(cv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lv(t,e){return!e||"object"!==cv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function av(t){return(av=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function uv(t,e){return(uv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var sv=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=lv(this,av(e).call(this,"".concat(o,"-horizontal-layer")))).options=H.copy({style:{}},t),n.css(n.options.style),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&uv(t,e)}(e,t),e}(ft);function fv(t){return(fv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yv(t,e){return!e||"object"!==fv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pv(t,e,n){return(pv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=bv(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function bv(t){return(bv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dv(t,e){return(dv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var vv=function(t){function e(t){var n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=yv(this,bv(e).call(this,"".concat(o,"-scroll-bar-x")))).option=H.copy({style:{},scroll:function(t){return t}},t),r.lastBut=z("div","".concat(o,"-scroll-bar-x-last-but")),r.nextBut=z("div","".concat(o,"-scroll-bar-x-next-but")),r.content=z("div","".concat(o,"-scroll-bar-x-content")),r.block=z("div","".concat(o,"-scroll-bar-x-block")),r.content.children(r.block),(n=r).children.apply(n,[r.lastBut,r.nextBut,r.content]),r.blockLeft=0,r.maxBlockLeft=0,r.blockWidth=0,r.minBlockWidth=20,r.scrollTo=0,r.contentWidth=0,r.viewPortWidth=0,r.isHide=!0,r.css(r.option.style),r}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dv(t,e)}(e,t),n=e,(i=[{key:"onAttach",value:function(){this.bind()}},{key:"setSize",value:function(t,e){if(t<e){this.isHide=!1,this.show();var n=this.content.box(),r=t/e*n.width;this.blockWidth=r<this.minBlockWidth?this.minBlockWidth:r,this.viewPortWidth=t,this.contentWidth=e,this.maxBlockLeft=n.width-this.blockWidth,this.block.css("width","".concat(this.blockWidth,"px"));var o=this.scrollTo/(e-t)*this.maxBlockLeft;this.blockLeft=o>this.maxBlockLeft?this.maxBlockLeft:o,this.scrollTo=this.computeScrollTo(this.blockLeft),this.block.css("left","".concat(this.blockLeft,"px"))}else this.isHide=!0,this.hide(),this.option.scroll(0)}},{key:"unbind",value:function(){$.unbind(this.block)}},{key:"bind",value:function(){var t=this;$.bind(this.block,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){if(0===e.button){var n=t.eventXy(e,t.block);$.mouseMoveUp(z(document),(function(e){var r=t.eventXy(e,t.content).x-n.x;r<0&&(r=0),r>t.maxBlockLeft&&(r=t.maxBlockLeft),t.blockLeft=r,t.scrollTo=t.computeScrollTo(t.blockLeft),t.block.css("left","".concat(r,"px")),t.option.scroll(t.scrollTo),e.stopPropagation(),e.preventDefault()})),e.stopPropagation(),e.preventDefault()}}))}},{key:"scrollMove",value:function(t){this.setLocal(t),this.option.scroll(this.scrollTo)}},{key:"setLocal",value:function(t){var e=t,n=this.contentWidth-this.viewPortWidth;e>n?e=n:e<0&&(e=0);var r=e/(this.contentWidth-this.viewPortWidth)*this.maxBlockLeft;this.blockLeft=r>this.maxBlockLeft?this.maxBlockLeft:r,!1===this.isHide&&(this.scrollTo=e,this.block.css("left","".concat(this.blockLeft,"px")))}},{key:"computeScrollTo",value:function(t){return t/this.maxBlockLeft*(this.contentWidth-this.viewPortWidth)}},{key:"destroy",value:function(){pv(bv(e.prototype),"destroy",this).call(this),this.unbind()}}])&&hv(n.prototype,i),c&&hv(n,c),e}(ct);function gv(t){return(gv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ev(t,e){return!e||"object"!==gv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mv(t,e,n){return(mv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ov(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Ov(t){return(Ov=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tv(t,e){return(Tv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xv=function(t){function e(t){var n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Ev(this,Ov(e).call(this,"".concat(o,"-scroll-bar-y")))).option=H.copy({style:{},scroll:function(t){return t}},t),r.lastBut=z("div","".concat(o,"-scroll-bar-y-last-but")),r.nextBut=z("div","".concat(o,"-scroll-bar-y-next-but")),r.content=z("div","".concat(o,"-scroll-bar-y-content")),r.block=z("div","".concat(o,"-scroll-bar-y-block")),r.content.children(r.block),(n=r).children.apply(n,[r.lastBut,r.nextBut,r.content]),r.blockTop=0,r.maxBlockTop=0,r.blockHeight=0,r.minBlockHeight=20,r.scrollTo=0,r.contentHeight=0,r.viewPortHeight=0,r.isHide=!0,r.css(r.option.style),r}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tv(t,e)}(e,t),n=e,(i=[{key:"setSize",value:function(t,e){if(t<e){this.isHide=!1,this.show();var n=this.content.box(),r=t/e*n.height;this.blockHeight=r<this.minBlockHeight?this.minBlockHeight:r,this.viewPortHeight=t,this.contentHeight=e,this.maxBlockTop=n.height-this.blockHeight,this.block.css("height","".concat(this.blockHeight,"px"));var o=this.scrollTo/(e-t)*this.maxBlockTop;this.blockTop=o>this.maxBlockTop?this.maxBlockTop:o,this.scrollTo=this.computeScrollTo(this.blockTop),this.block.css("top","".concat(this.blockTop,"px"))}else this.isHide=!0,this.hide(),this.option.scroll(0)}},{key:"onAttach",value:function(){this.bind()}},{key:"unbind",value:function(){$.unbind(this.block)}},{key:"bind",value:function(){var t=this;$.bind(this.block,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){if(0===e.button){var n=t.eventXy(e,t.block);$.mouseMoveUp(z(document),(function(e){var r=t.eventXy(e,t.content).y-n.y;r<0&&(r=0),r>t.maxBlockTop&&(r=t.maxBlockTop),t.blockTop=r,t.scrollTo=t.computeScrollTo(t.blockTop),t.block.css("top","".concat(r,"px")),t.option.scroll(t.scrollTo),e.stopPropagation(),e.preventDefault()}))}}))}},{key:"setLocal",value:function(t){var e=t,n=this.contentHeight-this.viewPortHeight;e>n?e=n:e<0&&(e=0);var r=e/(this.contentHeight-this.viewPortHeight)*this.maxBlockTop;this.blockTop=r>this.maxBlockTop?this.maxBlockTop:r,!1===this.isHide&&(this.scrollTo=e,this.block.css("top","".concat(this.blockTop,"px")))}},{key:"scrollMove",value:function(t){this.setLocal(t),this.option.scroll(this.scrollTo)}},{key:"computeScrollTo",value:function(t){return t/this.maxBlockTop*(this.contentHeight-this.viewPortHeight)}},{key:"destroy",value:function(){mv(Ov(e.prototype),"destroy",this).call(this),this.unbind()}}])&&wv(n.prototype,i),c&&wv(n,c),e}(ct);function _v(t){return(_v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sv(t,e){return!e||"object"!==_v(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function kv(t){return(kv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cv(t,e){return(Cv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Pv=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Sv(this,kv(e).call(this,"".concat(o,"-horizontal-layer-element")))).options=H.copy({style:{flexGrow:"0"}},t),n.css(n.options.style),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cv(t,e)}(e,t),e}(ft);function Rv(t){return(Rv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jv(t,e){return!e||"object"!==Rv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Lv(t){return(Lv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Iv(t,e){return(Iv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Av=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=jv(this,Lv(e).call(this,"".concat(o,"-vertical-center-element")))).options=H.copy({style:{}},t),n.css(n.options.style),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Iv(t,e)}(e,t),e}(ft);function Nv(t){return(Nv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vv(t,e){return!e||"object"!==Nv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dv(t){return(Dv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mv(t,e){return(Mv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Wv=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Vv(this,Dv(e).call(this,"".concat(o,"-vertical-center")))).options=H.copy({style:{}},t),n.css(n.options.style),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mv(t,e)}(e,t),e}(ft);function Bv(t){return(Bv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Hv(t,e){return!e||"object"!==Bv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Fv(t,e,n){return(Fv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Uv(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Uv(t){return(Uv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gv(t,e){return(Gv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var zv=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Hv(this,Uv(e).call(this,"".concat(o,"-sheet-view")))).sheetList=[],t.activeIndex=-1,t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gv(t,e)}(e,t),n=e,(r=[{key:"setActiveSheet",value:function(t){var e=this.sheetList;return e[t]?(this.activeIndex=t,this.setActive(e[t])):null}},{key:"attach",value:function(t){this.sheetList.push(t),Fv(Uv(e.prototype),"attach",this).call(this,t),t.hide()}},{key:"getActiveSheet",value:function(){return this.sheetList[this.activeIndex]}},{key:"setActive",value:function(t){return t.show(),t.sibling().forEach((function(t){t.hide()})),t}},{key:"getLastIndex",value:function(){return this.sheetList.length-1}}])&&Yv(n.prototype,r),i&&Yv(n,i),e}(ct);function Xv(t){return(Xv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jv(t,e){return!e||"object"!==Xv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Kv(t,e,n){return(Kv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$v(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function $v(t){return($v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qv(t,e){return(qv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qv={onAdd:function(t){return t},onSwitch:function(t){return t}},tg=function(t){function e(t){var n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Jv(this,$v(e).call(this,"".concat(o,"-sheet-switch-tab")))).last=z("div","".concat(o,"-switch-tab-last-btn")),r.next=z("div","".concat(o,"-switch-tab-next-btn")),r.content=z("div","".concat(o,"-sheet-tab-content")),r.tabs=z("div","".concat(o,"-sheet-tab-tabs")),r.plus=z("div","".concat(o,"-sheet-tab-plus")),r.content.children(r.tabs),(n=r).children.apply(n,[r.last,r.next,r.content,r.plus]),r.options=H.copy({},Qv,t),r.left=null,r.tabList=[],r}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qv(t,e)}(e,t),n=e,(i=[{key:"onAttach",value:function(){this.bind()}},{key:"offsetSizeLeft",value:function(){var t=this.content.offset().width,e=this.tabs.offset().width;e>t&&(this.left=-(e-t),this.tabs.css("marginLeft","".concat(this.left,"px")))}},{key:"unbind",value:function(){var t=this.next,e=this.last,n=this.plus;$.unbind(t),$.unbind(e),$.unbind(n)}},{key:"bind",value:function(){var t=this,e=this.next,n=this.last,o=this.plus;$.bind(e,r.SYSTEM_EVENT_TYPE.CLICK,(function(){var e=t.content.offset().width,n=-(t.tabs.offset().width-e),r=t.left||0;(r-=30)<n&&(r=n),t.left=r,t.tabs.css("marginLeft","".concat(t.left,"px"))})),$.bind(n,r.SYSTEM_EVENT_TYPE.CLICK,(function(){var e=t.left||0;(e+=30)>0&&(e=0),t.left=e,t.tabs.css("marginLeft","".concat(t.left,"px"))})),$.bind(o,r.SYSTEM_EVENT_TYPE.CLICK,(function(){t.options.onAdd(),t.offsetSizeLeft()}))}},{key:"attach",value:function(t){var e=this;this.tabList.push(t),this.tabs.children(t),t.onAttach(),$.bind(t,r.SYSTEM_EVENT_TYPE.CLICK,(function(){e.setActive(t),e.options.onSwitch(t)}))}},{key:"setActiveTab",value:function(t){var e=this.tabList;return e[t]?(this.setActive(e[t]),e[t]):null}},{key:"setActive",value:function(t){t.addClass("active"),t.sibling().forEach((function(t){t.removeClass("active")}))}},{key:"getLastIndex",value:function(){return this.tabList.length-1}},{key:"destroy",value:function(){Kv($v(e.prototype),"destroy",this).call(this),this.unbind()}}])&&Zv(n.prototype,i),c&&Zv(n,c),e}(ct);function eg(t){return(eg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ng(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rg(t,e){return!e||"object"!==eg(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function og(t){return(og=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ig(t,e){return(ig=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var cg=1,lg=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Sheet".concat(cg);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=rg(this,og(e).call(this,"".concat(o,"-sheet-tab"))),cg+=1,t.setName(n),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ig(t,e)}(e,t),n=e,(r=[{key:"setName",value:function(t){this.name=t,this.text(this.name)}}])&&ng(n.prototype,r),i&&ng(n,i),e}(ct);function ag(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ug(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var sg=function(){function t(){ag(this,t),this.value=1}var e,n,r;return e=t,(n=[{key:"back",value:function(t){return t/this.value}},{key:"goto",value:function(t){return this.value*t}},{key:"setValue",value:function(t){this.value=t}}])&&ug(e.prototype,n),r&&ug(e,r),t}(),fg=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.goto,r=void 0===n?function(t){return t}:n,o=e.back,i=void 0===o?function(t){return t}:o;ag(this,t),this.goto=r,this.back=i};function hg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var yg=function(){function t(e){var n=e.scaleAdapter,r=void 0===n?new fg:n,o=e.height,i=void 0===o?33:o,c=e.width,l=void 0===c?50:c,a=e.background,u=void 0===a?"#f6f7fa":a,s=e.color,f=void 0===s?"#585757":s,h=e.size,y=void 0===h?11:h,p=e.gridColor,b=void 0===p?"#e8e8e8":p;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scaleAdapter=r,this.height=i,this.width=l,this.background=u,this.color=f,this.size=y,this.gridColor=b}var e,n,r;return e=t,(n=[{key:"getGridColor",value:function(){return this.gridColor}},{key:"getColor",value:function(){return this.color}},{key:"getSize",value:function(){var t=this.scaleAdapter,e=this.size;return t.goto(e)}},{key:"getBackground",value:function(){return this.background}},{key:"getHeight",value:function(){var t=this.scaleAdapter,e=this.height;return t.goto(e)}},{key:"getWidth",value:function(){var t=this.scaleAdapter,e=this.width;return t.goto(e)}}])&&hg(e.prototype,n),r&&hg(e,r),t}();function pg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var bg=function(){function t(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).height,r=void 0===n?30:n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.height=r,this.row=e,this.reCkHasAngle=!0,this.hasAngelCell=!1}var e,n,r;return e=t,(n=[{key:"setHasAngelCell",value:function(t){this.hasAngelCell=t}},{key:"setReCkHasAngle",value:function(t){this.reCkHasAngle=t}}])&&pg(e.prototype,n),r&&pg(e,r),t}();function dg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var vg=function(){function t(e){var n=e.scaleAdapter,r=void 0===n?new fg:n,o=e.len,i=void 0===o?10:o,c=e.height,l=void 0===c?30:c,a=e.xIteratorBuilder,u=e.data,s=void 0===u?[]:u;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scaleAdapter=r,this.len=i,this.data=s,this.min=5,this.xIteratorBuilder=a,this.height=H.minIf(l,this.min)}var e,n,r;return e=t,(n=[{key:"sectionSumHeight",value:function(t,e){var n=this,r=0;return t>e?r:(this.xIteratorBuilder.getRowIterator().setBegin(t).setEnd(e).setLoop((function(t){r+=n.getHeight(t)})).execute(),r)}},{key:"rectRangeSumHeight",value:function(t){return t.equals(ss.EMPTY)?0:this.sectionSumHeight(t.sri,t.eri)}},{key:"get",value:function(t){var e=this.data[t];if(e){if(e instanceof bg)return e;e=new bg(t,e),this.data[t]=e}return e}},{key:"getOrNew",value:function(t){var e=this.get(t);return e||(this.data[t]=new bg(t,{height:this.height}),this.data[t])}},{key:"getHeight",value:function(t){var e=this.scaleAdapter,n=this.get(t);return n?e.goto(n.height):e.goto(this.height)}},{key:"eachHeight",value:function(t,e,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=o;this.xIteratorBuilder.getRowIterator().setBegin(t).setEnd(e).setLoop((function(t){var e=r.getHeight(t);n(t,e,i),i+=e})).execute()}},{key:"setHeight",value:function(t,e){var n=this.getOrNew(t),r=this.scaleAdapter;n.height=r.back(H.minIf(e,this.min))}},{key:"getData",value:function(){return this.data}},{key:"setData",value:function(t){this.data=t}}])&&dg(e.prototype,n),r&&dg(e,r),t}();function gg(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var wg=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,o=void 0===r?130:r;gg(this,t),this.col=e,this.width=o};function Eg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var mg=function(){function t(e){var n=e.scaleAdapter,r=void 0===n?new fg:n,o=e.len,i=void 0===o?10:o,c=e.data,l=void 0===c?[]:c,a=e.width,u=void 0===a?110:a,s=e.xIteratorBuilder;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scaleAdapter=r,this.len=i,this.data=l,this.min=5,this.xIteratorBuilder=s,this.width=H.minIf(u,this.min)}var e,n,r;return e=t,(n=[{key:"sectionSumWidth",value:function(t,e){var n=this,r=0;return t>e?r:(this.xIteratorBuilder.getColIterator().setBegin(t).setEnd(e).setLoop((function(t){r+=n.getWidth(t)})).execute(),r)}},{key:"rectRangeSumWidth",value:function(t){return t.equals(ss.EMPTY)?0:this.sectionSumWidth(t.sci,t.eci)}},{key:"get",value:function(t){var e=this.data[t];if(e){if(e instanceof wg)return e;e=new wg(t,e),this.data[t]=e}return e}},{key:"getOrNew",value:function(t){var e=this.get(t);return e||(this.data[t]=new wg(t,{width:this.width}),this.data[t])}},{key:"getWidth",value:function(t){var e=this.scaleAdapter,n=this.data[t];return n&&n.width?e.goto(n.width):e.goto(this.width)}},{key:"eachWidth",value:function(t,e,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=o;this.xIteratorBuilder.getColIterator().setBegin(t).setEnd(e).setLoop((function(t){var e=r.getWidth(t);n(t,e,i),i+=e})).execute()}},{key:"setWidth",value:function(t,e){var n=this.getOrNew(t),r=this.scaleAdapter;n.width=r.back(H.minIf(e,this.min))}},{key:"getData",value:function(){return this.data}},{key:"setData",value:function(t){this.data=t}}])&&Eg(e.prototype,n),r&&Eg(e,r),t}();var Og={H_LEFT:Symbol("水平方向左边滚动条"),H_RIGHT:Symbol("水平方向向右边滚动"),V_TOP:Symbol("垂直方向向上滚动"),V_BOTTOM:Symbol("垂直方向下滚动"),UN:Symbol("未知")},Tg=function t(e){var n=e.xFixedView;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=n.getFixedView();this.ri=r.eri+1,this.ci=r.eci+1,this.x=0,this.y=0,this.type=Og.UN};function xg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var _g=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=e.focus;this.table=e,this.pool=[],this.xTableKeyBoardDownHandle=function(t){var e=r.activate,o=t.keyCode;if(e){var i=e.target,c=n.find(i);c&&c.keyCode===o&&c.callback()}9===o&&t.preventDefault()},this.bind()}var e,n,o;return e=t,(n=[{key:"unbind",value:function(){$.unbind(document,r.SYSTEM_EVENT_TYPE.KEY_DOWN,this.xTableKeyBoardDownHandle)}},{key:"bind",value:function(){$.bind(document,r.SYSTEM_EVENT_TYPE.KEY_DOWN,this.xTableKeyBoardDownHandle)}},{key:"find",value:function(t){for(var e=this.pool,n=0;n<e.length;n+=1){var r=e[n];if(r.target===t)return r}return null}},{key:"register",value:function(t){var e=t.target,n=t.keyCode,r=t.callback;this.pool.push({target:e,keyCode:n,callback:r})}}])&&xg(e.prototype,n),o&&xg(e,o),t}();function Sg(t){return(Sg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Cg(t,e){return!e||"object"!==Sg(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pg(t,e,n){return(Pg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Rg(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Rg(t){return(Rg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jg(t,e){return(jg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Lg=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=Cg(this,Rg(e).call(this,"".concat(o,"-table-col-fixed-bar")));var r=t.xFixedView.getFixedView(),i=z("div","".concat(o,"-table-col-fixed-block"));return n.table=t,n.fxSci=r.sci,n.fxEci=r.eci,n.block=i,n.children(i),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jg(t,e)}(e,t),n=e,(i=[{key:"unbind",value:function(){var t=this.table;$.unbind(t)}},{key:"bind",value:function(){var t=this,n=this.table,o=n.mousePointer,i=n.dropColFixed,c=n.xFixedView,l=!0;$.bind(n,r.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(){t.setSize()})),$.bind(n,r.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(){t.setSize()})),$.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_MOVE,(function(){t.setActive(!0),o.lock(e),o.set(rh.KEYS.grab,e)})),$.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_LEAVE,(function(){l&&(t.setActive(!1),o.free(e))})),$.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(r){i.show(),t.setActive(!0);var a=n.getScrollView(),u=c.getFixedView();t.fxSci=u.sci,t.fxEci=u.eci,o.lock(e),o.set(rh.KEYS.grab,e);var s=n.eventXy(r,n).x;i.offset({left:s}),l=!1,c.hasFixedLeft()&&(n.scroll.x=0,n.scroll.ci=t.fxEci+1,n.resize()),$.mouseMoveUp(document,(function(e){var r=n.eventXy(e,n),o=r.x,c=r.y;i.offset({left:o});var l=n.getRiCiByXy(o,c).ci;l<a.eci-2&&(t.fxEci=l,t.setSize())}),(function(){t.setActive(!1),o.free(e),i.hide(),n.setFixedCol(t.fxEci),l=!0}))}))}},{key:"setActive",value:function(t){t?(this.block.addClass("active"),this.addClass("active")):(this.block.removeClass("active"),this.removeClass("active"))}},{key:"onAttach",value:function(){var t=this.table;this.setSize(),this.bind(),t.focus.register({target:this,stop:!1})}},{key:"setSize",value:function(){var t=this.table,n=this.block,r=this.fxSci,o=this.fxEci,i=t.cols,c=e.WIDTH,l=o>-1?t.visualHeight():t.getIndexHeight(),a=o>-1?c/2:c,u=i.sectionSumWidth(r,o)+t.getIndexWidth()-a;n.offset({height:t.getIndexHeight(),width:c}),this.offset({width:c,height:l,left:u,top:0})}},{key:"destroy",value:function(){Pg(Rg(e.prototype),"destroy",this).call(this),this.unbind()}}])&&kg(n.prototype,i),c&&kg(n,c),e}(ct);function Ig(t){return(Ig="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ag(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ng(t,e){return!e||"object"!==Ig(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vg(t,e,n){return(Vg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Dg(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Dg(t){return(Dg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mg(t,e){return(Mg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Lg.WIDTH=6;var Wg=function(t){function e(t){var n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{width:5};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Ng(this,Dg(e).call(this,"".concat(o,"-re-sizer-horizontal")))).table=t,r.options=i,r.width=i.width,r.hoverEl=z("div","".concat(o,"-re-sizer-hover")),r.lineEl=z("div","".concat(o,"-re-sizer-line")),(n=r).children.apply(n,[r.hoverEl,r.lineEl]),r}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mg(t,e)}(e,t),n=e,(i=[{key:"onAttach",value:function(){this.bind(),this.table.focus.register({target:this})}},{key:"unbind",value:function(){var t=this.table;$.unbind(t)}},{key:"bind",value:function(){var t=this,n=this.table,o=n.cols,i=n.mousePointer,c=n.focus,l=n.xFixedView,a=n.tableDataSnapshot,u=a.colsDataProxy,s=n.index;$.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(r){i.lock(e),i.set(rh.KEYS.colResize,e);var c=t.getEventLeft(r),l=c.left,s=c.ci,f=l-o.getWidth(s)+o.min,h=n.eventXy(r).x;$.mouseMoveUp(document,(function(e){var r=n.eventXy(e);h=r.x,h-=t.width/2,h=Math.ceil(H.minIf(h,f)),t.css("left","".concat(h,"px")),t.lineEl.css("height","".concat(n.visualHeight(),"px")),t.lineEl.show()}),(function(r){i.free(e),t.lineEl.hide(),t.css("left","".concat(h,"px")),n.eventXy(r).y<=0&&t.hide();var c=h-(l-o.getWidth(s))+t.width;a.begin(),u.setWidth(s,c),a.end(),n.resize()}))})),$.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_LEAVE,(function(){i.free(e)})),$.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_MOVE,(function(){i.lock(e),i.set(rh.KEYS.colResize,e)})),$.bind(n,r.SYSTEM_EVENT_TYPE.MOUSE_MOVE,(function(e){var r=t.getEventLeft(e),i=r.left,c=r.ci,a=i-o.getWidth(c)+o.min,u=n.visualWidth(),f=l.getFixedView();i>u&&(i=u),-1===i||a>u||-1===c?t.hide():(t.show(),c===f.eci?t.css("left","".concat(i-t.width-Lg.WIDTH/2,"px")):t.css("left","".concat(i-t.width,"px")),t.hoverEl.css("width","".concat(t.width,"px")),t.hoverEl.css("height","".concat(s.getHeight(),"px")))})),$.bind(n,r.SYSTEM_EVENT_TYPE.MOUSE_LEAVE,(function(){t.hide()})),$.bind(n,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){var e=c.activate.target;e!==n&&e!==t&&t.hide()}))}},{key:"getEventLeft",value:function(t){var e=this.table,n=e.cols,r=e.xFixedView,o=e.xFixedMeasure,i=e.index,c=e.eventXy(t),l=c.x,a=c.y,u=e.getRiCiByXy(l,a),s=u.ri,f=u.ci,h={ci:f,left:-1};if(-1!==s)return h;var y=o.getWidth(),p=i.getWidth(),b=r.getFixedView(),d=e.getScrollView();return r.hasFixedLeft()?f>b.eci?h.left=p+y+n.sectionSumWidth(d.sci,f):h.left=p+n.sectionSumWidth(b.sci,f):h.left=p+n.sectionSumWidth(d.sci,f),h}},{key:"destroy",value:function(){Vg(Dg(e.prototype),"destroy",this).call(this),this.unbind()}}])&&Ag(n.prototype,i),c&&Ag(n,c),e}(ct);function Bg(t){return(Bg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Hg(t,e){return!e||"object"!==Bg(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Fg(t,e,n){return(Fg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ug(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Ug(t){return(Ug=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gg(t,e){return(Gg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var zg=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=Hg(this,Ug(e).call(this,"".concat(o,"-table-row-fixed-bar")));var r=t.xFixedView.getFixedView(),i=z("div","".concat(o,"-table-row-fixed-block"));return n.table=t,n.fxSri=r.sri,n.fxEri=r.eri,n.block=i,n.children(n.block),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gg(t,e)}(e,t),n=e,(i=[{key:"unbind",value:function(){var t=this.table;$.unbind(t)}},{key:"bind",value:function(){var t=this,n=this.table,o=n.mousePointer,i=n.dropRowFixed,c=n.xFixedView,l=!0;$.bind(n,r.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(){t.setSize()})),$.bind(n,r.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(){t.setSize()})),$.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_MOVE,(function(){t.setActive(!0),o.lock(e),o.set(rh.KEYS.grab,e)})),$.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_LEAVE,(function(){l&&(t.setActive(!1),o.free(e))})),$.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(r){i.show(),t.setActive(!0);var a=n.getScrollView(),u=c.getFixedView();t.fxSri=u.sri,t.fxEri=u.eri,o.lock(e),o.set(rh.KEYS.grab,e);var s=n.eventXy(r,n).y;i.offset({top:s}),l=!1,c.hasFixedTop()&&(n.scroll.y=0,n.scroll.ri=t.fxEri+1,n.resize()),$.mouseMoveUp(document,(function(e){var r=n.eventXy(e,n),o=r.x,c=r.y;i.offset({top:c});var l=n.getRiCiByXy(o,c).ri;l<a.eri-2&&(t.fxEri=l,t.setSize())}),(function(){t.setActive(!1),o.free(e),i.hide(),n.setFixedRow(t.fxEri),l=!0}))}))}},{key:"setActive",value:function(t){t?(this.addClass("active"),this.block.addClass("active")):(this.removeClass("active"),this.block.removeClass("active"))}},{key:"onAttach",value:function(){var t=this.table;this.setSize(),this.bind(),t.focus.register({target:this,stop:!1})}},{key:"setSize",value:function(){var t=this.table,n=this.block,r=this.fxSri,o=this.fxEri,i=t.rows,c=e.HEIGHT,l=o>-1?t.visualWidth():t.getIndexWidth(),a=o>-1?c/2:c,u=i.sectionSumHeight(r,o)+t.getIndexHeight()-a;n.offset({width:t.getIndexWidth(),height:c}),this.offset({height:c,width:l,left:0,top:u})}},{key:"destroy",value:function(){Fg(Ug(e.prototype),"destroy",this).call(this),this.unbind()}}])&&Yg(n.prototype,i),c&&Yg(n,c),e}(ct);function Xg(t){return(Xg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jg(t,e){return!e||"object"!==Xg(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Kg(t,e,n){return(Kg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$g(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function $g(t){return($g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qg(t,e){return(qg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}zg.HEIGHT=6;var Qg=function(t){function e(t){var n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{height:5};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Jg(this,$g(e).call(this,"".concat(o,"-re-sizer-vertical")))).table=t,r.options=i,r.height=i.height,r.hoverEl=z("div","".concat(o,"-re-sizer-hover")),r.lineEl=z("div","".concat(o,"-re-sizer-line")),(n=r).children.apply(n,[r.hoverEl,r.lineEl]),r}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qg(t,e)}(e,t),n=e,(i=[{key:"onAttach",value:function(){this.bind(),this.table.focus.register({target:this})}},{key:"unbind",value:function(){var t=this.table;$.unbind(t)}},{key:"bind",value:function(){var t=this,n=this.table,o=n.rows,i=n.mousePointer,c=n.focus,l=n.xFixedView,a=n.tableDataSnapshot,u=a.rowsDataProxy,s=n.index;$.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(r){i.lock(e),i.set(rh.KEYS.rowResize,e);var c=t.getEventTop(r),l=c.top,s=c.ri,f=l-o.getHeight(s)+o.min,h=n.eventXy(r).y;$.mouseMoveUp(document,(function(e){var r=n.eventXy(e);h=r.y,h-=t.height/2,h=Math.ceil(H.minIf(h,f)),t.css("top","".concat(h,"px")),t.lineEl.css("width","".concat(n.visualWidth(),"px")),t.lineEl.show()}),(function(r){i.free(e),t.lineEl.hide(),t.css("top","".concat(h,"px")),n.eventXy(r).x<=0&&t.hide();var c=h-(l-o.getHeight(s))+t.height;a.begin(),u.setHeight(s,c),a.end(),n.resize()}))})),$.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_LEAVE,(function(){i.free(e)})),$.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_MOVE,(function(){i.lock(e),i.set(rh.KEYS.rowResize,e)})),$.bind(n,r.SYSTEM_EVENT_TYPE.MOUSE_MOVE,(function(e){var r=t.getEventTop(e),i=r.top,c=r.ri,a=i-o.getHeight(c)+o.min,u=n.visualHeight(),f=l.getFixedView();i>u&&(i=u),-1===i||a>u||-1===c?t.hide():(t.show(),c===f.eri?t.css("top","".concat(i-t.height-zg.HEIGHT/2,"px")):t.css("top","".concat(i-t.height,"px")),t.hoverEl.css("width","".concat(s.getWidth(),"px")),t.hoverEl.css("height","".concat(t.height,"px")))})),$.bind(n,r.SYSTEM_EVENT_TYPE.MOUSE_LEAVE,(function(){t.hide()})),$.bind(n,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){var e=c.activate.target;e!==n&&e!==t&&t.hide()}))}},{key:"getEventTop",value:function(t){var e=this.table,n=e.rows,r=e.xFixedView,o=e.xFixedMeasure,i=e.index,c=e.eventXy(t),l=c.x,a=c.y,u=e.getRiCiByXy(l,a),s=u.ri,f={ri:s,top:-1};if(-1!==u.ci)return f;var h=o.getHeight(),y=i.getHeight(),p=r.getFixedView(),b=e.getScrollView();return r.hasFixedTop()?s>p.eri?f.top=y+h+n.sectionSumHeight(b.sri,s):f.top=y+n.sectionSumHeight(p.sri,s):f.top=y+n.sectionSumHeight(b.sri,s),f}},{key:"destroy",value:function(){Kg($g(e.prototype),"destroy",this).call(this),this.unbind()}}])&&Zg(n.prototype,i),c&&Zg(n,c),e}(ct);function tw(t){return(tw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ew(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nw(t,e){return!e||"object"!==tw(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rw(t,e,n){return(rw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ow(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function ow(t){return(ow=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function iw(t,e){return(iw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var cw=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=nw(this,ow(e).call(this,"".concat(o,"-table-x-height-light")))).table=t,n.width=-1,n.left=-1,n.setSize(),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&iw(t,e)}(e,t),n=e,(i=[{key:"onAttach",value:function(){this.bind(),this.hide()}},{key:"unbind",value:function(){var t=this.table;$.unbind(t)}},{key:"bind",value:function(){var t=this,e=this.table;$.bind(e,r.TABLE_EVENT_TYPE.SELECT_CHANGE,(function(){t.offsetHandle()})),$.bind(e,r.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(){t.offsetHandle()})),$.bind(e,r.TABLE_EVENT_TYPE.CHANGE_WIDTH,(function(){t.offsetHandle()})),$.bind(e,r.SYSTEM_EVENT_TYPE.SCROLL,(function(){t.offsetHandle()})),$.bind(e,r.TABLE_EVENT_TYPE.FIXED_CHANGE,(function(){t.offsetHandle()}))}},{key:"offsetHandle",value:function(){var t=this.table;if(t.xScreen.findType(fh).selectRange){var e=this.getLeft()+t.getIndexWidth(),n=this.getWidth();e===this.left&&n===this.width||(this.show(),this.offset({top:0,left:e,width:n,height:t.getIndexHeight()})),this.left=e,this.width=n}}},{key:"setSize",value:function(){var t=this.table;this.css("height","".concat(t.getIndexHeight(),"px"))}},{key:"getLeft",value:function(){var t=this.table,e=t.xScreen,n=t.rows,r=t.xFixedView,o=t.cols,i=e.findType(fh),c=i.selectRange,l=i.getOverGo(c),a=r.getFixedView(),u=t.getScrollView();switch(u.sri=0,u.eri=n.length-1,a.sri=0,a.eri=n.length-1,l){case Hf.BRL:case Hf.LTL:case Hf.ALL:case Hf.LT:case Hf.LTT:case Hf.L:return o.sectionSumWidth(a.sci,c.sci-1);case Hf.BR:case Hf.T:case Hf.BRT:var s=u.coincide(c),f=o.sectionSumWidth(u.sci,s.sci-1);return o.sectionSumWidth(a.sci,a.eci)+f}return 0}},{key:"getWidth",value:function(){var t=this.table,e=t.xScreen,n=t.rows,r=t.xFixedView,o=t.cols,i=e.findType(fh),c=i.selectRange,l=r.getFixedView(),a=t.getScrollView(),u=i.getOverGo(c);switch(a.sri=0,a.eri=n.length-1,l.sri=0,l.eri=n.length-1,u){case Hf.LT:case Hf.L:case Hf.LTL:return o.rectRangeSumWidth(c);case Hf.BR:case Hf.T:case Hf.BRT:return o.rectRangeSumWidth(a.coincide(c));case Hf.BRL:case Hf.LTT:case Hf.ALL:return o.rectRangeSumWidth(a.coincide(c))+o.rectRangeSumWidth(l.coincide(c))}return 0}},{key:"destroy",value:function(){rw(ow(e.prototype),"destroy",this).call(this),this.unbind()}}])&&ew(n.prototype,i),c&&ew(n,c),e}(ct);function lw(t){return(lw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function uw(t,e){return!e||"object"!==lw(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function sw(t,e,n){return(sw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fw(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function fw(t){return(fw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hw(t,e){return(hw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yw=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=uw(this,fw(e).call(this,"".concat(o,"-table-y-height-light")))).table=t,n.height=-1,n.top=-1,n.setSize(),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hw(t,e)}(e,t),n=e,(i=[{key:"onAttach",value:function(){this.bind(),this.hide()}},{key:"unbind",value:function(){var t=this.table;$.unbind(t)}},{key:"bind",value:function(){var t=this,e=this.table;$.bind(e,r.TABLE_EVENT_TYPE.SELECT_CHANGE,(function(){t.offsetHandle()})),$.bind(e,r.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(){t.offsetHandle()})),$.bind(e,r.TABLE_EVENT_TYPE.CHANGE_WIDTH,(function(){t.offsetHandle()})),$.bind(e,r.SYSTEM_EVENT_TYPE.SCROLL,(function(){t.offsetHandle()})),$.bind(e,r.TABLE_EVENT_TYPE.FIXED_CHANGE,(function(){t.offsetHandle()}))}},{key:"offsetHandle",value:function(){var t=this.table;if(t.xScreen.findType(fh).selectRange){var e=this.getTop()+t.getIndexHeight(),n=this.getHeight();e===this.top&&n===this.height||(this.show(),this.offset({left:0,top:e,height:n,width:t.getIndexWidth()})),this.top=e,this.height=n}}},{key:"setSize",value:function(){var t=this.table;this.css("width","".concat(t.getIndexWidth(),"px"))}},{key:"getTop",value:function(){var t=this.table,e=t.xScreen,n=t.rows,r=t.xFixedView,o=t.cols,i=e.findType(fh),c=i.selectRange,l=i.getOverGo(c),a=r.getFixedView(),u=t.getScrollView();switch(u.sci=0,u.eci=o.length-1,a.sci=0,a.eci=o.length-1,l){case Hf.BRT:case Hf.LTL:case Hf.ALL:case Hf.LT:case Hf.LTT:case Hf.T:return n.sectionSumHeight(a.sri,c.sri-1);case Hf.BR:case Hf.L:case Hf.BRL:var s=u.coincide(c),f=n.sectionSumHeight(u.sri,s.sri-1);return n.sectionSumHeight(a.sri,a.eri)+f}return 0}},{key:"getHeight",value:function(){var t=this.table,e=t.xScreen,n=t.rows,r=t.xFixedView,o=t.cols,i=e.findType(fh),c=i.selectRange,l=r.getFixedView(),a=t.getScrollView(),u=i.getOverGo(c);switch(a.sci=0,a.eci=o.length-1,l.sci=0,l.eci=o.length-1,u){case Hf.LT:case Hf.T:case Hf.LTT:return n.rectRangeSumHeight(c);case Hf.BR:case Hf.L:case Hf.BRL:return n.rectRangeSumHeight(a.coincide(c));case Hf.BRT:case Hf.LTL:case Hf.ALL:return n.rectRangeSumHeight(a.coincide(c))+n.rectRangeSumHeight(l.coincide(c))}return 0}},{key:"destroy",value:function(){sw(fw(e.prototype),"destroy",this).call(this),this.unbind()}}])&&aw(n.prototype,i),c&&aw(n,c),e}(ct);function pw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var bw=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e,this.pool=[],this.activate={},this.xTableFocusDownHandle=function(){n.activate={}},this.bind()}var e,n,o;return e=t,(n=[{key:"remove",value:function(t){if(!(t instanceof G))throw new TypeError(" error type not Element ");for(var e=[],n=0;n<this.pool.length;n+=1){var r=this.pool[n];r.target.el!==t.el&&e.push(r)}this.pool=e}},{key:"unbind",value:function(){$.unbind(document,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,this.xTableFocusDownHandle,!0)}},{key:"bind",value:function(){$.bind(document,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,this.xTableFocusDownHandle,!0)}},{key:"add",value:function(t){return t.target instanceof G&&!this.findByNode(t.target)&&(this.pool.push(t),t.focus&&(this.activate=this.pool[this.pool.length-1]),!0)}},{key:"register",value:function(t){var e=this,n=t.attr,o=void 0===n?{}:n,i=t.target,c=t.stop,l=void 0!==c&&c,a=t.focus,u=void 0!==a&&a;this.add({attr:o,target:i,focus:u,stop:l})&&$.bind(i,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(t){var n=e.findByChild(t.target);n?(e.activate=n,l&&t.stopPropagation()):e.activate=null}))}},{key:"findByNode",value:function(t){for(var e=0;e<this.pool.length;e+=1){var n=this.pool[e];if(n.target.el===t)return n}return null}},{key:"findByChild",value:function(t){for(var e=this.table.el.parentNode;t!==e;){var n=this.findByNode(t);if(n)return n;t=t.parentNode}return null}}])&&pw(e.prototype,n),o&&pw(e,o),t}();function dw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vw(t,e,n){return e&&dw(t.prototype,e),n&&dw(t,n),t}var gw={CHANGE_ADD:Symbol("change_add"),CHANGE_NOT:Symbol("change_not"),STATIC:Symbol("static"),BOUND_OUT:Symbol("bound_out")},ww=function(){function t(e){var n=e.scroll,r=e.rows,o=e.cols,i=e.xIteratorBuilder,c=e.getHeight,l=void 0===c?function(){return 0}:c,a=e.getWidth,u=void 0===a?function(){return 0}:a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scroll=n,this.rows=r,this.cols=o,this.xIteratorBuilder=i,this.getHeight=l,this.getWidth=u}return vw(t,null,[{key:"viewMode",value:function(t,e){return H.isUnDef(t)?gw.CHANGE_NOT:e.equals(t)?gw.STATIC:e.coincide(t).equals(ss.EMPTY)?gw.BOUND_OUT:e.within(t)?gw.CHANGE_NOT:gw.CHANGE_ADD}}]),vw(t,[{key:"getScrollView",value:function(){var t=this.rows,e=this.cols,n=this.xIteratorBuilder,r=this.scroll,o=this.getHeight,i=this.getWidth,c=r.ri,l=r.ci,a=0,u=0,s=[t.len,e.len],f=s[0],h=s[1];return n.getRowIterator().setBegin(c).setEnd(t.len-1).setLoop((function(e){return u+=t.getHeight(e),f=e,u<o()})).execute(),n.getColIterator().setBegin(l).setEnd(e.len-1).setLoop((function(t){return a+=e.getWidth(t),h=t,a<i()})).execute(),new ss(c,l,f,h)}}]),t}();function Ew(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var mw=function(){function t(e){var n=e.xTableScrollView,r=e.rows,o=e.cols,i=e.scroll;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.xTableScrollView=n,this.scroll=i,this.rows=r,this.cols=o,this.scrollView=null}var e,n,r;return e=t,(n=[{key:"reset",value:function(){this.scrollView=null}},{key:"getScrollView",value:function(){if(H.isNotUnDef(this.scrollView))return this.scrollView.clone();var t=this.xTableScrollView,e=this.cols,n=this.rows,r=t.getScrollView();return r.w=e.rectRangeSumWidth(r),r.h=n.rectRangeSumHeight(r),this.scrollView=r,r.clone()}}])&&Ew(e.prototype,n),r&&Ew(e,r),t}();function Ow(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Tw=function(){function t(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).time,n=void 0===e?500:e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handle=null,this.time=n}var e,n,r;return e=t,(n=[{key:"setTime",value:function(t){this.time=t}},{key:"action",value:function(t){clearTimeout(this.handle),this.handle=setTimeout((function(){t()}),this.time)}}])&&Ow(e.prototype,n),r&&Ow(e,r),t}();function xw(t){return(xw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Sw(t,e){return!e||"object"!==xw(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function kw(t,e,n){return(kw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Cw(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Cw(t){return(Cw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pw(t,e){return(Pw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Rw=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Sw(this,Cw(e).call(this,"".concat(o,"-table-edit")))).table=t,n.cell=null,n.merge=null,n.select=null,n.throttle=new Tw({time:100}),n.attr("contenteditable",!0),n.html(H.EMPTY),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pw(t,e)}(e,t),n=e,(i=[{key:"onAttach",value:function(){this.bind(),this.hide()}},{key:"editOffset",value:function(){var t=this.table,e=this.cell,n=t.xHeightLight,r=t.yHeightLight,o=e.fontAttr.align,i=n.getLeft()+t.getIndexWidth(),c=r.getTop()+t.getIndexHeight(),l=r.getHeight(),a=n.getWidth();switch(o){case al.ALIGN.left:this.cssRemoveKeys("right");var u=t.visualHeight()-c,s=t.visualWidth()-i;this.css({left:"".concat(i,"px"),top:"".concat(c,"px"),"min-width":"".concat(x.offsetToLineInside(Math.min(a,s)),"px"),"min-height":"".concat(x.offsetToLineInside(Math.min(l,u)),"px"),"max-width":"".concat(x.offsetToLineInside(s),"px"),"max-height":"".concat(x.offsetToLineInside(u),"px")});break;case al.ALIGN.center:this.cssRemoveKeys("right");var f=this.box(),h=t.visualHeight()-c;if(f.width>a){var y=2*(t.visualWidth()-(i+a))+a,p=i-(Math.min(f.width,y)/2-a/2);this.css({left:"".concat(p,"px"),top:"".concat(c,"px"),"min-width":"".concat(x.offsetToLineInside(Math.min(a,y)),"px"),"min-height":"".concat(x.offsetToLineInside(Math.min(l,h)),"px"),"max-width":"".concat(x.offsetToLineInside(y),"px"),"max-height":"".concat(x.offsetToLineInside(h),"px")})}else{var b=t.visualWidth()-i;this.css({left:"".concat(i,"px"),top:"".concat(c,"px"),"min-width":"".concat(x.offsetToLineInside(Math.min(a,b)),"px"),"min-height":"".concat(x.offsetToLineInside(Math.min(l,h)),"px"),"max-width":"".concat(x.offsetToLineInside(b),"px"),"max-height":"".concat(x.offsetToLineInside(h),"px")})}break;case al.ALIGN.right:this.cssRemoveKeys("left");var d=i+a-t.getIndexWidth(),v=t.visualWidth()-(i+a),g=t.visualHeight()-c;this.css({right:"".concat(v,"px"),top:"".concat(c,"px"),"min-width":"".concat(x.offsetToLineInside(Math.min(a,d)),"px"),"min-height":"".concat(x.offsetToLineInside(Math.min(l,g)),"px"),"max-width":"".concat(x.offsetToLineInside(d),"px"),"max-height":"".concat(x.offsetToLineInside(g),"px")})}}},{key:"unbind",value:function(){var t=this.table,e=t.xScreen.findType(fh);$.bind(t),$.unbind([e.lt,e.t,e.l,e.br])}},{key:"bind",value:function(){var t=this,e=this.table,n=e.xScreen.findType(fh),o=e.getTableMerges();$.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_WHEEL,(function(t){t.stopPropagation()})),$.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(t){t.stopPropagation()})),$.bind(this,r.SYSTEM_EVENT_TYPE.INPUT,(function(){t.cell.fontAttr.align===al.ALIGN.center&&t.editOffset()})),$.bind(e,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.hideEdit()})),$.bind(e,r.SYSTEM_EVENT_TYPE.SCROLL,(function(){t.hideEdit()})),$.mouseDoubleClick(e,(function(){var e=n.selectRange,r=e.sri,i=e.sci;e.multiple()&&!o.getFirstIncludes(r,i)||t.showEdit()}))}},{key:"showEdit",value:function(){var t=this,e=this.table,n=e.getTableMerges(),r=e.getTableCells(),o=e.xScreen.findType(fh).selectRange;if(o){var i=o.sri,c=o.sci,l=n.getFirstIncludes(i,c),a=r.getCellOrNew(i,c);this.merge=l,this.cell=a,this.select=o,this.show(),H.isBlank(a.text)?this.html(H.EMPTY):this.html(a.text),this.attr("style",e.getCellCssStyle(i,c)),this.editOffset(),this.throttle.action((function(){H.keepLastIndex(t.el)}))}}},{key:"hideEdit",value:function(){var t=this.select,e=this.table,n=e.getTableCells(),r=e.tableDataSnapshot,o=r.cellDataProxy;if(t){var i=n.getCellOrNew(t.sri,t.sci).clone(),c=H.trim(this.text());this.hide(),i.text!==c&&(r.begin(),i.setText(c),o.setCell(t.sri,t.sci,i),r.end(),e.render()),this.select=null}}},{key:"show",value:function(){return this.css({"min-width":"0px","min-height":"0px","max-width":"0px","max-height":"0px"}),kw(Cw(e.prototype),"show",this).call(this)}},{key:"destroy",value:function(){kw(Cw(e.prototype),"destroy",this).call(this),this.unbind()}}])&&_w(n.prototype,i),c&&_w(n,c),e}(ct);function jw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Lw=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.solidLine=new gc(e,n)}var e,n,r;return e=t,(n=[{key:"horizonLine",value:function(t,e,n,r){this.solidLine.horizonLine(t,e,n,r)}},{key:"verticalLine",value:function(t,e,n,r){this.solidLine.verticalLine(t,e,n,r)}}])&&jw(e.prototype,n),r&&jw(e,r),t}();function Iw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Aw=function(){function t(e){var n=e.rect,r=e.draw,o=e.path,i=e.background;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.draw=r,this.path=o,this.rect=n,this.background=i}var e,n,r;return e=t,(n=[{key:"setPath",value:function(t){var e=t.path;this.path=e}},{key:"setRect",value:function(t){var e=t.rect;this.rect=e}},{key:"setBackground",value:function(t){var e=t.color;this.background=e}},{key:"render",value:function(){var t=this.draw,e=this.rect,n=this.path,r=this.background;if(e&&r)return t.attr({fillStyle:r}),void t.fillRect(e.x,e.y,e.width,e.height);n&&r&&(t.attr({fillStyle:r}),t.fillPath(n))}}])&&Iw(e.prototype,n),r&&Iw(e,r),t}();function Nw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Vw=function(){function t(e){var n=e.onChange,r=void 0===n?function(){}:n,o=e.table,i=e.xTableData,c=e.xIteratorBuilder;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=o,this.xTableData=i,this.onChange=r,this.xIteratorBuilder=c}var e,n,r;return e=t,(n=[{key:"emptyRectRange",value:function(t){var e=this,n=!0;return t.each(this.xIteratorBuilder,(function(t,r){var o=e.getCell(t,r);return!(H.isNotEmptyObject(o)&&!H.isBlank(o.text)&&(n=!1,1))})),n}},{key:"setCell",value:function(t,e,n){var r=this.xTableData.get(t,e);r&&(r.setCell(n),this.onChange(t,e))}},{key:"setCellOrNew",value:function(t,e,n){this.xTableData.getOrNew(t,e).setCell(n),this.onChange(t,e)}},{key:"getCellOrNew",value:function(t,e){var n=this.xTableData.getOrNew(t,e),r=n.getCell();if(r)return r;var o=new Bu({text:H.EMPTY});return n.setCell(o),o}},{key:"getCellOrMergeCell",value:function(t,e){var n=this.table.merges.getFirstIncludes(t,e);return n?this.getCell(n.sri,n.sci):this.getCell(t,e)}},{key:"getCell",value:function(t,e){var n=this.xTableData.get(t,e);return n?n.getCell():null}},{key:"getData",value:function(){return this.xTableData.wrapAll(),this.xTableData.getItems().map((function(t){return t.map((function(t){return t?t.getCell():null}))}))}}])&&Nw(e.prototype,n),r&&Nw(e,r),t}();function Dw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Mw=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"parserToDate",value:function(t,e){if(!t)return null;for(var n=new Date("1970/01/01 00:00:00"),r=[{reg:"y+"},{reg:"M+"},{reg:"d+"},{reg:"h+"},{reg:"m+"},{reg:"s+"},{reg:"S"}],o=n.getFullYear(),i=n.getMonth()+1,c=n.getDate(),l=n.getHours(),a=n.getMinutes(),u=n.getSeconds(),s=n.getMilliseconds(),f=1,h=0;h<e.length;h+=1)for(var y=e[h],p=0;p<r.length;p+=1){var b=r[p];if(b.reg[0]===y){b.index||(b.index=f,f+=1);break}}for(var d=0;d<r.length;d+=1){var v=r[d].reg,g=new RegExp("(".concat(v,")")).exec(e);if(g){var w=g[0],E="([0-9]{1,".concat(w.length,"})");e=e.replace(w,E)}}var m={},O=new RegExp(e).exec(t);if(!O)return null;for(var T=1;T<O.length;T+=1)m[T]=O[T];return r[0].index&&(o=m[r[0].index]),r[1].index&&(i=m[r[1].index]),r[2].index&&(c=m[r[2].index]),r[3].index&&(l=m[r[3].index]),r[4].index&&(a=m[r[4].index]),r[5].index&&(u=m[r[5].index]),r[6].index&&(s=m[r[6].index]),new Date(o,i-1,c,l,a,u,s)}},{key:"dateFormat",value:function(t,e){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()},r=/(y+)/.exec(t);if(r){var o=r[0],i=e.getFullYear().toString().substr(4-o.length);t=t.replace(o,i)}for(var c in n){var l=new RegExp("(".concat(c,")")).exec(t);if(l){var a=n[c].toString(),u=l[0],s=1===u.length?a:"00".concat(a).substr(a.length);t=t.replace(u,s)}}return t}}],(n=null)&&Dw(e.prototype,n),r&&Dw(e,r),t}();function Ww(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Bw(t){var e=Mw.parserToDate(t,"yyyy/MM/dd hh:mm:ss");return e||((e=Mw.parserToDate(t,"yyyy/MM/dd"))?e:(e=Mw.parserToDate(t,"hh:mm:ss"))?e:(e=Mw.parserToDate(t,"MM月dd日"))?e:(e=Mw.parserToDate(t,"yyyy年MM月"))?e:(e=Mw.parserToDate(t,"yyyy年MM月dd日"))||null)}var Yw=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"default",value:function(t){return t}},{key:"text",value:function(t){return t}},{key:"number",value:function(t){if(H.isNumber(t)){if(-1!==t.toString().indexOf(".")){var e=t.toString().lastIndexOf(".")+1;return t.toString().substring(0,e+2)}return"".concat(t,".00")}return t}},{key:"percentage",value:function(t){return H.isNumber(t)?"".concat(t,"%"):t}},{key:"fraction",value:function(t){if(H.isFraction(t)){var e=t.split("/")[0],n=t.split("/")[1];return H.parseInt(e)/H.parseInt(n)}return t}},{key:"ENotation",value:function(t){return H.isNumber(t)?H.parseFloat(t).toExponential(2):t}},{key:"rmb",value:function(t){return H.isNumber(t)?"￥".concat(t):t}},{key:"hk",value:function(t){return H.isNumber(t)?"HK".concat(t):t}},{key:"dollar",value:function(t){return H.isNumber(t)?"$".concat(t):t}},{key:"date1",value:function(t){var e=Bw(t);return e?Mw.dateFormat("yyyy/MM/dd",e):t}},{key:"date2",value:function(t){var e=Bw(t);return e?Mw.dateFormat("MM月dd日",e):t}},{key:"date3",value:function(t){var e=Bw(t);return e?Mw.dateFormat("yyyy年MM月",e):t}},{key:"date4",value:function(t){var e=Bw(t);return e?Mw.dateFormat("yyyy年MM月dd日",e):t}},{key:"date5",value:function(t){var e=Bw(t);return e?Mw.dateFormat("yyyy/MM/dd hh:mm:ss",e):t}},{key:"time",value:function(t){var e=Bw(t);return e?Mw.dateFormat("hh:mm:ss",e):t}}])&&Ww(e.prototype,n),r&&Ww(e,r),t}());function Hw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Uw(t,e,n){return e&&Fw(t.prototype,e),n&&Fw(t,n),t}var Gw=function(){function t(){Hw(this,t)}return Uw(t,null,[{key:"inverse",value:function(t){var e=t.tilt,n=t.angle;return Math.abs(e*Math.sin(x.radian(n)))}},{key:"tilt",value:function(t){var e=t.inverse,n=t.angle;return Math.abs(e/Math.sin(x.radian(n)))}}]),t}(),zw=function(){function t(){Hw(this,t)}return Uw(t,null,[{key:"nearby",value:function(t){var e=t.tilt,n=t.angle;return Math.abs(e*Math.cos(x.radian(n)))}},{key:"tilt",value:function(t){var e=t.nearby,n=t.angle;return Math.abs(e/Math.cos(x.radian(n)))}}]),t}();function Xw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Zw={TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right",MIDDLE_LEFT:"middle-left",MIDDLE_CENTER:"middle-center",MIDDLE_RIGHT:"middle-right",BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right"},Jw=function(){function t(e){var n=e.angle,r=e.draw,o=e.origin,i=void 0===o?Zw.MIDDLE_CENTER:o,c=e.rect,l=void 0===c?new ju({x:0,y:0,width:0,height:0}):c;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.draw=r,this.origin=i,this.rect=l,this.angle=n}var e,n,r;return e=t,(n=[{key:"rotate",value:function(){var t=this.origin,e=this.draw,n=this.rect,r=this.angle,o=n.x,i=n.y,c=n.width,l=n.height;e.save();var a=0,u=0;switch(t){case Zw.TOP_LEFT:a=o,u=i;break;case Zw.TOP_CENTER:a=o+c/2,u=i;break;case Zw.TOP_RIGHT:a=o+c,u=i;break;case Zw.MIDDLE_LEFT:a=o,u=i+l/2;break;case Zw.MIDDLE_CENTER:a=o+c/2,u=i+l/2;break;case Zw.MIDDLE_RIGHT:a=o+c,u=i+l/2;break;case Zw.BOTTOM_LEFT:a=o,u=i+l;break;case Zw.BOTTOM_CENTER:a=o+c/2,u=i+l;break;case Zw.BOTTOM_RIGHT:a=o+c,u=i+l}var s=e.getOffsetX(),f=e.getOffsetY();return e.translate(a+s,u+f).rotate(r).translate(-(a+s),-(u+f)),this}},{key:"revert",value:function(){return this.draw.restore(),this}}])&&Xw(e.prototype,n),r&&Xw(e,r),t}();function Kw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var $w=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width,r=void 0===n?0:n,o=e.rightSdist,i=void 0===o?0:o,c=e.leftSdist,l=void 0===c?0:c;Kw(this,t),this.width=r,this.rightSdist=i,this.leftSdist=l};function qw(t){return(qw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tE(t,e){return!e||"object"!==qw(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function eE(t){return(eE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nE(t,e){return(nE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var rE=function(t){function e(t){var n,r=t.draw,o=t.ruler,i=t.rect,c=t.overflow,l=t.lineHeight,a=void 0===l?4:l,u=t.attr;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=tE(this,eE(e).call(this,{draw:r,ruler:o,attr:u}))).rect=i,n.overflow=c,n.lineHeight=a,n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nE(t,e)}(e,t),n=e,(r=[{key:"drawingFont",value:function(){var t=this.ruler;if(t.isBlank())return new $w;var e=this.draw,n=this.attr,r=n.textWrap;if(e.attr({textAlign:al.ALIGN.left,textBaseline:al.VERTICAL_ALIGN.top,font:"".concat(n.italic?"italic":""," ").concat(n.bold?"bold":""," ").concat(n.size,"px ").concat(n.name),fillStyle:n.color,strokeStyle:n.color}),t.hasBreak())return this.textWrapDraw();switch(r){case al.TEXT_WRAP.OVER_FLOW:return this.overflowDraw();case al.TEXT_WRAP.TRUNCATE:return this.truncateDraw();case al.TEXT_WRAP.WORD_WRAP:return this.textWrapDraw()}return new $w}},{key:"drawingLine",value:function(t,e,n,r){var o=this.draw,i=this.attr.size,c=[0,0],l=[0,0];"strike"===t&&(c[0]=e,l[0]=e+r,c[1]=n+i/2,l[1]=n+i/2),"underline"===t&&(c[0]=e,l[0]=e+r,c[1]=n+i,l[1]=n+i),o.line(c,l)}},{key:"truncateDraw",value:function(){return this.overflowDraw()}},{key:"overflowDraw",value:function(){var t=this.draw,e=this.ruler,n=this.attr,r=this.rect,o=this.overflow,i=r.x,c=r.y,l=r.width,a=r.height,u=n.underline,s=n.strikethrough,f=n.align,h=n.verticalAlign,y=n.size,p=this.getVerticalAlignPadding(),b=this.getAlignPadding(),d=n.angle;if(d<-90&&(d=-90),d>90&&(d=90),0===d)throw new TypeError("文字的角度必须是在90<0或者0>90之间!");e.overflowRuler();var v=e.overflowText,g=e.overflowTextWidth,w=Math.max(zw.nearby({tilt:g,angle:d}),y),E=Gw.inverse({tilt:g,angle:d}),m=E-a,O=i,T=c;switch(f){case al.ALIGN.left:O+=b;break;case al.ALIGN.center:O+=l/2-w/2;break;case al.ALIGN.right:O+=l-w-b}switch(h){case al.VERTICAL_ALIGN.top:T+=p;break;case al.VERTICAL_ALIGN.center:T+=a/2-E/2;break;case al.VERTICAL_ALIGN.bottom:T+=a-E-p}var x=E+p>o.height,_=w+b>o.width;if(x||_){var S=new Nu({draw:t,rect:o}),k=new Jw({draw:t,angle:d,rect:new ju({x:O,y:T,width:w,height:E})});S.open(),k.rotate();var C=O+(w/2-g/2),P=T+(E/2-y/2);t.fillText(v,C,P),u&&this.drawingLine("underline",C,P,g),s&&this.drawingLine("strike",C,P,g),k.revert(),S.close()}else{var R=new Jw({draw:t,angle:d,rect:new ju({x:O,y:T,width:w,height:E})});R.rotate();var j=O+(w/2-g/2),L=T+(E/2-y/2);t.fillText(v,j,L),u&&this.drawingLine("underline",j,L,g),s&&this.drawingLine("strike",j,L,g),R.revert()}var I=w;if(m>0){var A=Gw.tilt({inverse:a,angle:d});I=zw.nearby({tilt:A,angle:d})}return new $w({width:I+b})}},{key:"textWrapDraw",value:function(){var t=this.draw,e=this.ruler,n=this.attr,r=this.rect,o=this.lineHeight,i=r.width,c=r.height,l=n.underline,a=n.strikethrough,u=n.align,s=n.verticalAlign,f=n.size,h=this.getVerticalAlignPadding(),y=this.getAlignPadding(),p=n.angle;if(p<-90&&(p=-90),p>90&&(p=90),0===p)throw new TypeError("文字的角度必须是在90<0或者0>90之间!");if(p>0){e.textWrapRuler();var b=e.textWrapTextArray,d=e.textWrapMaxLen,v=b.length;if(v>1){var g=Gw.tilt({inverse:f+o,angle:p}),w=Math.max(zw.nearby({tilt:d,angle:p}),f),E=Gw.inverse({tilt:d,angle:p}),m=w+(v-1)*g,O=r.x,T=r.y;switch(u){case al.ALIGN.left:O+=y;break;case al.ALIGN.center:O+=i/2-m/2;break;case al.ALIGN.right:O+=i-m-y}switch(s){case al.VERTICAL_ALIGN.top:T+=h;break;case al.VERTICAL_ALIGN.center:T+=c/2-E/2;break;case al.VERTICAL_ALIGN.bottom:T+=c-E-h}for(var x=0;x<v;){var _=b[x],S=_.tx+O,k=_.ty+T,C=0,P=0;switch(u){case al.ALIGN.left:var R=_.len/2;C+=S+Math.max(zw.nearby({tilt:R,angle:p}),f),P+=k+E-Gw.inverse({tilt:R,angle:p});break;case al.ALIGN.center:C=S+w/2,P=k+E/2;break;case al.ALIGN.right:var j=_.len/2;C+=S+w-Math.max(zw.nearby({tilt:j,angle:p}),f),P+=k+Gw.inverse({tilt:j,angle:p})}var L=C-_.len/2,I=P-f/2,A=new Jw({draw:t,angle:p,rect:new ju({x:L,y:I,width:_.len,height:f})});A.rotate(),t.fillText(_.text,L,I),l&&this.drawingLine("underline",L,I,_.len),a&&this.drawingLine("strike",L,I,_.len),A.revert(),x+=1}return new $w({width:m+y})}var N=e.textWrapText,V=e.textWrapTextWidth,D=Math.max(zw.nearby({tilt:V,angle:p}),f),M=Gw.inverse({tilt:V,angle:p}),W=r.x,B=r.y;switch(u){case al.ALIGN.left:W+=y;break;case al.ALIGN.center:W+=i/2-D/2;break;case al.ALIGN.right:W+=i-D-y}switch(s){case al.VERTICAL_ALIGN.top:B+=h;break;case al.VERTICAL_ALIGN.center:B+=c/2-M/2;break;case al.VERTICAL_ALIGN.bottom:B+=c-M-h}var Y=new Jw({draw:t,angle:p,rect:new ju({x:W,y:B,width:D,height:M})});Y.rotate();var H=W+(D/2-V/2),F=B+(M/2-f/2);return t.fillText(N,H,F),l&&this.drawingLine("underline",H,F,V),a&&this.drawingLine("strike",H,F,V),Y.revert(),new $w({width:D+y})}e.textWrapRuler();var U=e.textWrapTextArray,G=e.textWrapMaxLen,z=U.length;if(z>1){var X=Gw.tilt({inverse:f+o,angle:p}),Z=Math.max(zw.nearby({tilt:G,angle:p}),f),J=Gw.inverse({tilt:G,angle:p}),K=Z+(z-1)*X,$=r.x,q=r.y;switch(u){case al.ALIGN.left:$+=y;break;case al.ALIGN.center:$+=i/2-K/2;break;case al.ALIGN.right:$+=i-K-y}switch(s){case al.VERTICAL_ALIGN.top:q+=h;break;case al.VERTICAL_ALIGN.center:q+=c/2-J/2;break;case al.VERTICAL_ALIGN.bottom:q+=c-J-h}for(var Q=0;Q<z;){var tt=U[Q],et=tt.tx+$,nt=tt.ty+q,rt=0,ot=0;switch(u){case al.ALIGN.left:var it=tt.len/2;rt+=et+Math.max(zw.nearby({tilt:it,angle:p}),f),ot+=nt+Gw.inverse({tilt:it,angle:p});break;case al.ALIGN.center:rt=et+Z/2,ot=nt+J/2;break;case al.ALIGN.right:var ct=tt.len/2;rt+=et+Z-Math.max(zw.nearby({tilt:ct,angle:p}),f),ot+=nt+J-Gw.inverse({tilt:ct,angle:p})}var lt=rt-tt.len/2,at=ot-f/2,ut=new Jw({draw:t,angle:p,rect:new ju({x:lt,y:at,width:tt.len,height:f})});ut.rotate(),t.fillText(tt.text,lt,at),l&&this.drawingLine("underline",lt,at,tt.len),a&&this.drawingLine("strike",lt,at,tt.len),ut.revert(),Q+=1}return new $w({width:K+y})}var st=e.textWrapText,ft=e.textWrapTextWidth,ht=Math.max(zw.nearby({tilt:ft,angle:p}),f),yt=Gw.inverse({tilt:ft,angle:p}),pt=r.x,bt=r.y;switch(u){case al.ALIGN.left:pt+=y;break;case al.ALIGN.center:pt+=i/2-ht/2;break;case al.ALIGN.right:pt+=i-ht-y}switch(s){case al.VERTICAL_ALIGN.top:bt+=h;break;case al.VERTICAL_ALIGN.center:bt+=c/2-yt/2;break;case al.VERTICAL_ALIGN.bottom:bt+=c-yt-h}var dt=new Jw({draw:t,angle:p,rect:new ju({x:pt,y:bt,width:ht,height:yt})});dt.rotate();var vt=pt+(ht/2-ft/2),gt=bt+(yt/2-f/2);return t.fillText(st,vt,gt),l&&this.drawingLine("underline",vt,gt,ft),a&&this.drawingLine("strike",vt,gt,ft),dt.revert(),new $w({width:ht+y})}}])&&Qw(n.prototype,r),o&&Qw(n,o),e}(al);function oE(t){return(oE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cE(t,e){return!e||"object"!==oE(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lE(t){return(lE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function aE(t,e){return(aE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var uE=function(t){function e(t){var n,r=t.draw,o=t.ruler,i=t.rect,c=t.overflow,l=t.lineHeight,a=void 0===l?4:l,u=t.attr;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=cE(this,lE(e).call(this,{draw:r,ruler:o,attr:u}))).rect=i,n.overflow=c,n.lineHeight=a,n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&aE(t,e)}(e,t),n=e,(r=[{key:"drawingFont",value:function(){var t=this.ruler;if(t.isBlank())return new $w;var e=this.draw,n=this.attr,r=n.textWrap;if(e.attr({textAlign:al.ALIGN.left,textBaseline:al.VERTICAL_ALIGN.top,font:"".concat(n.italic?"italic":""," ").concat(n.bold?"bold":""," ").concat(n.size,"px ").concat(n.name),fillStyle:n.color,strokeStyle:n.color}),t.hasBreak())return this.textWrapDraw();switch(r){case al.TEXT_WRAP.OVER_FLOW:return this.overflowDraw();case al.TEXT_WRAP.TRUNCATE:return this.truncateDraw();case al.TEXT_WRAP.WORD_WRAP:return this.textWrapDraw()}return new $w}},{key:"drawingLine",value:function(t,e,n,r){var o=this.draw,i=this.attr.size,c=[0,0],l=[0,0];"strike"===t&&(c[0]=e,l[0]=e+r,c[1]=n+i/2,l[1]=n+i/2),"underline"===t&&(c[0]=e,l[0]=e+r,c[1]=n+i,l[1]=n+i),o.line(c,l)}},{key:"truncateDraw",value:function(){return this.overflowDraw()}},{key:"overflowDraw",value:function(){var t=this.draw,e=this.ruler,n=this.attr,r=this.rect,o=r.x,i=r.y,c=r.width,l=r.height,a=n.underline,u=n.strikethrough,s=n.align,f=n.verticalAlign,h=n.size,y=this.getVerticalAlignPadding(),p=this.getAlignPadding(),b=n.angle;if(b<-90&&(b=-90),b>90&&(b=90),0===b)throw new TypeError("文字的角度必须是在90<0或者0>90之间!");var d=Gw.tilt({inverse:l,angle:b}),v=zw.nearby({tilt:d,angle:b});e.overflowRuler();var g=e.overflowText,w=e.overflowTextWidth,E=Math.max(zw.nearby({tilt:w,angle:b}),h),m=Gw.inverse({tilt:w,angle:b});if(b>0){var O=new ju({x:o,y:i,width:v+c,height:l}),T=0,x=0;switch(f){case al.VERTICAL_ALIGN.top:T=o+(v-E)-y,x=i+y;break;case al.VERTICAL_ALIGN.center:T=o+(v/2-E/2)-y,x=i+(l/2-m/2)+y;break;case al.VERTICAL_ALIGN.bottom:T=o+y,x=i+(l-m)-y}switch(s){case al.ALIGN.left:T+=h/2+p;break;case al.ALIGN.center:T+=c/2;break;case al.ALIGN.right:T+=c-h/2-p}var _=m+y>O.height,S=E+p>O.width;if(_||S){var k=new Nu({draw:t,rect:O}),C=new Jw({draw:t,angle:b,rect:new ju({x:T,y:x,width:E,height:m})});k.open(),C.rotate();var P=T+(E/2-w/2),R=x+(m/2-h/2);t.fillText(g,P,R),a&&this.drawingLine("underline",P,R,w),u&&this.drawingLine("strike",P,R,w),C.revert(),k.close()}else{var j=new Jw({draw:t,angle:b,rect:new ju({x:T,y:x,width:E,height:m})});j.rotate();var L=T+(E/2-w/2),I=x+(m/2-h/2);t.fillText(g,L,I),a&&this.drawingLine("underline",L,I,w),u&&this.drawingLine("strike",L,I,w),j.revert()}return new $w({width:v+c,leftSdist:v,rightSdist:0})}var A=new ju({x:o-v,y:i,width:v+c,height:l}),N=0,V=0;switch(f){case al.VERTICAL_ALIGN.top:N=o-v+y,V=i+y;break;case al.VERTICAL_ALIGN.center:N=o-(v/2+E/2)+y,V=i+(l/2-m/2)+y;break;case al.VERTICAL_ALIGN.bottom:N=o-E-y,V=i+(l-m)-y}switch(s){case al.ALIGN.left:N+=h/2+p;break;case al.ALIGN.center:N+=c/2;break;case al.ALIGN.right:N+=c-h/2-p}var D=m+y>A.height,M=E+p>A.width;if(D||M){var W=new Nu({draw:t,rect:A}),B=new Jw({draw:t,angle:b,rect:new ju({x:N,y:V,width:E,height:m})});W.open(),B.rotate();var Y=N+(E/2-w/2),H=V+(m/2-h/2);t.fillText(g,Y,H),a&&this.drawingLine("underline",Y,H,w),u&&this.drawingLine("strike",Y,H,w),B.revert(),W.close()}else{var F=new Jw({draw:t,angle:b,rect:new ju({x:N,y:V,width:E,height:m})});F.rotate();var U=N+(E/2-w/2),G=V+(m/2-h/2);t.fillText(g,U,G),a&&this.drawingLine("underline",U,G,w),u&&this.drawingLine("strike",U,G,w),F.revert()}return new $w({width:v+c,leftSdist:0,rightSdist:v})}},{key:"textWrapDraw",value:function(){var t=this.draw,e=this.ruler,n=this.attr,r=this.rect,o=this.overflow,i=this.lineHeight,c=r.x,l=r.y,a=r.width,u=r.height,s=n.underline,f=n.strikethrough,h=n.align,y=n.verticalAlign,p=n.size,b=this.getVerticalAlignPadding(),d=this.getAlignPadding(),v=n.angle;if(v<-90&&(v=-90),v>90&&(v=90),0===v)throw new TypeError("文字的角度必须是在90<0或者0>90之间!");var g=Gw.tilt({inverse:u,angle:v}),w=zw.nearby({tilt:g,angle:v});if(v>0){e.textWrapRuler();var E=e.textWrapTextArray,m=e.textWrapMaxLen,O=E.length;if(O>1){var T=Gw.tilt({inverse:p+i,angle:v}),x=Math.max(zw.nearby({tilt:m,angle:v}),p),_=Gw.inverse({tilt:m,angle:v}),S=x+(O-1)*T,k=0,C=0;switch(y){case al.VERTICAL_ALIGN.top:k=c+(w-x)-b,C=l+b;break;case al.VERTICAL_ALIGN.center:k=c+(w/2-x/2)-b,C=l+(u/2-_/2)+b;break;case al.VERTICAL_ALIGN.bottom:k=c+b,C=l+(u-_)-b}switch(h){case al.ALIGN.left:k+=p/2+d;break;case al.ALIGN.center:k+=x/2+a/2-S/2;break;case al.ALIGN.right:k+=x/2+a-(S-x/2)-p/2-d}var P=!1;h===al.ALIGN.center&&o.x>k&&(P=!0);var R=S+b>o.height,j=S+d>o.width;if(R||j||P){var L=new Nu({draw:t,rect:o});L.open();for(var I=0;I<O;){var A=E[I],N=A.tx+k,V=A.ty+C,D=0,M=0;switch(h){case al.ALIGN.left:var W=A.len/2;D+=N+Math.max(zw.nearby({tilt:W,angle:v}),p),M+=V+_-Gw.inverse({tilt:W,angle:v});break;case al.ALIGN.center:D=N+x/2,M=V+_/2;break;case al.ALIGN.right:var B=A.len/2;D+=N+x-Math.max(zw.nearby({tilt:B,angle:v}),p),M+=V+Gw.inverse({tilt:B,angle:v})}var Y=D-A.len/2,H=M-p/2,F=new Jw({draw:t,angle:v,rect:new ju({x:Y,y:H,width:A.len,height:p})});F.rotate(),t.fillText(A.text,Y,H),s&&this.drawingLine("underline",Y,H,A.len),f&&this.drawingLine("strike",Y,H,A.len),F.revert(),I+=1}L.close()}else for(var U=0;U<O;){var G=E[U],z=G.tx+k,X=G.ty+C,Z=0,J=0;switch(h){case al.ALIGN.left:var K=G.len/2;Z+=z+Math.max(zw.nearby({tilt:K,angle:v}),p),J+=X+_-Gw.inverse({tilt:K,angle:v});break;case al.ALIGN.center:Z=z+x/2,J=X+_/2;break;case al.ALIGN.right:var $=G.len/2;Z+=z+x-Math.max(zw.nearby({tilt:$,angle:v}),p),J+=X+Gw.inverse({tilt:$,angle:v})}var q=Z-G.len/2,Q=J-p/2,tt=new Jw({draw:t,angle:v,rect:new ju({x:q,y:Q,width:G.len,height:p})});tt.rotate(),t.fillText(G.text,q,Q),s&&this.drawingLine("underline",q,Q,G.len),f&&this.drawingLine("strike",q,Q,G.len),tt.revert(),U+=1}var et=0;switch(h){case al.ALIGN.left:et=S+w/2+d;break;case al.ALIGN.center:et=S/2+w/2+a/2;break;case al.ALIGN.right:et=w+a}return et=Math.max(et,w+a),new $w({width:et,leftSdist:w,rightSdist:0})}var nt=e.textWrapText,rt=e.textWrapTextWidth,ot=Math.max(zw.nearby({tilt:rt,angle:v}),p),it=Gw.inverse({tilt:rt,angle:v}),ct=0,lt=0;switch(y){case al.VERTICAL_ALIGN.top:ct=c+(w-ot)-b,lt=l+b;break;case al.VERTICAL_ALIGN.center:ct=c+(w/2-ot/2)-b,lt=l+(u/2-it/2)+b;break;case al.VERTICAL_ALIGN.bottom:ct=c+b,lt=l+(u-it)-b}switch(h){case al.ALIGN.left:ct+=p/2+d;break;case al.ALIGN.center:ct+=a/2;break;case al.ALIGN.right:ct+=a-p/2-d}var at=new Jw({draw:t,angle:v,rect:new ju({x:ct,y:lt,width:ot,height:it})});at.rotate();var ut=ct+(ot/2-rt/2),st=lt+(it/2-p/2);return t.fillText(nt,ut,st),s&&this.drawingLine("underline",ut,st,rt),f&&this.drawingLine("strike",ut,st,rt),at.revert(),new $w({width:w+a,leftSdist:w,rightSdist:0})}e.textWrapRuler();var ft=e.textWrapTextArray,ht=e.textWrapMaxLen,yt=ft.length;if(yt>1){var pt=Gw.tilt({inverse:p+i,angle:v}),bt=Math.max(zw.nearby({tilt:ht,angle:v}),p),dt=Gw.inverse({tilt:ht,angle:v}),vt=bt+(yt-1)*pt,gt=r.x,wt=r.y;switch(y){case al.VERTICAL_ALIGN.top:gt=c-w+b,wt=l+b;break;case al.VERTICAL_ALIGN.center:gt=c-(w/2+bt/2)+b,wt=l+(u/2-dt/2)+b;break;case al.VERTICAL_ALIGN.bottom:gt=c-bt-b,wt=l+(u-dt)-b}switch(h){case al.ALIGN.left:gt+=p/2+d;break;case al.ALIGN.center:gt+=bt/2+a/2-vt/2;break;case al.ALIGN.right:gt+=bt/2+a-(vt-bt/2)-p/2-d}var Et=!1;h===al.ALIGN.center&&o.x+o.width>gt+vt&&(Et=!0);var mt=vt+b>o.height,Ot=vt+d>o.width;if(mt||Ot||Et){var Tt=new Nu({draw:t,rect:o});Tt.open();for(var xt=0;xt<yt;){var _t=ft[xt],St=_t.tx+gt,kt=_t.ty+wt,Ct=0,Pt=0;switch(h){case al.ALIGN.left:var Rt=_t.len/2;Ct+=St+Math.max(zw.nearby({tilt:Rt,angle:v}),p),Pt+=kt+Gw.inverse({tilt:Rt,angle:v});break;case al.ALIGN.center:Ct=St+bt/2,Pt=kt+dt/2;break;case al.ALIGN.right:var jt=_t.len/2;Ct+=St+bt-Math.max(zw.nearby({tilt:jt,angle:v}),p),Pt+=kt+dt-Gw.inverse({tilt:jt,angle:v})}var Lt=Ct-_t.len/2,It=Pt-p/2,At=new Jw({draw:t,angle:v,rect:new ju({x:Lt,y:It,width:_t.len,height:p})});At.rotate(),t.fillText(_t.text,Lt,It),s&&this.drawingLine("underline",Lt,It,_t.len),f&&this.drawingLine("strike",Lt,It,_t.len),At.revert(),xt+=1}Tt.close()}else for(var Nt=0;Nt<yt;){var Vt=ft[Nt],Dt=Vt.tx+gt,Mt=Vt.ty+wt,Wt=0,Bt=0;switch(h){case al.ALIGN.left:var Yt=Vt.len/2;Wt+=Dt+Math.max(zw.nearby({tilt:Yt,angle:v}),p),Bt+=Mt+Gw.inverse({tilt:Yt,angle:v});break;case al.ALIGN.center:Wt=Dt+bt/2,Bt=Mt+dt/2;break;case al.ALIGN.right:var Ht=Vt.len/2;Wt+=Dt+bt-Math.max(zw.nearby({tilt:Ht,angle:v}),p),Bt+=Mt+dt-Gw.inverse({tilt:Ht,angle:v})}var Ft=Wt-Vt.len/2,Ut=Bt-p/2,Gt=new Jw({draw:t,angle:v,rect:new ju({x:Ft,y:Ut,width:Vt.len,height:p})});Gt.rotate(),t.fillText(Vt.text,Ft,Ut),s&&this.drawingLine("underline",Ft,Ut,Vt.len),f&&this.drawingLine("strike",Ft,Ut,Vt.len),Gt.revert(),Nt+=1}var zt=0;switch(h){case al.ALIGN.left:zt=w+a;break;case al.ALIGN.center:zt=vt/2+w/2+a/2;break;case al.ALIGN.right:zt=vt+w/2+d}return zt=Math.max(zt,w+a),new $w({width:zt,leftSdist:0,rightSdist:w})}var Xt=e.textWrapText,Zt=e.textWrapTextWidth,Jt=Math.max(zw.nearby({tilt:Zt,angle:v}),p),Kt=Gw.inverse({tilt:Zt,angle:v}),$t=0,qt=0;switch(y){case al.VERTICAL_ALIGN.top:$t=c-w+b,qt=l+b;break;case al.VERTICAL_ALIGN.center:$t=c-(w/2+Jt/2)+b,qt=l+(u/2-Kt/2)+b;break;case al.VERTICAL_ALIGN.bottom:$t=c-Jt-b,qt=l+(u-Kt)-b}switch(h){case al.ALIGN.left:$t+=p/2+d;break;case al.ALIGN.center:$t+=a/2;break;case al.ALIGN.right:$t+=a-p/2-d}var Qt=new Jw({draw:t,angle:v,rect:new ju({x:$t,y:qt,width:Jt,height:Kt})});Qt.rotate();var te=$t+(Jt/2-Zt/2),ee=qt+(Kt/2-p/2);return t.fillText(Xt,te,ee),s&&this.drawingLine("underline",te,ee,Zt),f&&this.drawingLine("strike",te,ee,Zt),Qt.revert(),new $w({width:w+a,leftSdist:0,rightSdist:w})}}])&&iE(n.prototype,r),o&&iE(n,o),e}(al);function sE(t){return(sE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hE(t,e){return!e||"object"!==sE(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function yE(t){return(yE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pE(t,e){return(pE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var bE=function(t){function e(t){var n,r=t.draw,o=t.ruler,i=t.rect,c=t.overflow,l=t.lineHeight,a=void 0===l?4:l,u=t.attr;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=hE(this,yE(e).call(this,{draw:r,ruler:o,attr:u}))).rect=i,n.overflow=c,n.lineHeight=a,n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pE(t,e)}(e,t),n=e,(r=[{key:"drawingFont",value:function(){var t=this.ruler;if(t.isBlank())return new $w;var e=this.draw,n=this.attr,r=n.textWrap,o="".concat(n.italic?"italic":""," ").concat(n.bold?"bold":""," ").concat(n.size,"px ").concat(n.name).trim();if(e.attr({textAlign:n.align,textBaseline:n.verticalAlign,font:o,fillStyle:n.color,strokeStyle:n.color}),t.hasBreak())return this.textWrapDraw();switch(r){case al.TEXT_WRAP.OVER_FLOW:return this.overflowDraw();case al.TEXT_WRAP.TRUNCATE:return this.truncateDraw();case al.TEXT_WRAP.WORD_WRAP:return this.textWrapDraw()}return new $w}},{key:"drawingLine",value:function(t,e,n,r){var o=this.draw,i=this.attr,c=i.size,l=i.verticalAlign,a=i.align,u=[0,0],s=[0,0];if("strike"===t){switch(a){case al.ALIGN.right:u[0]=e-r,s[0]=e;break;case al.ALIGN.center:u[0]=e-r/2,s[0]=e+r/2;break;case al.ALIGN.left:u[0]=e,s[0]=e+r}switch(l){case al.VERTICAL_ALIGN.top:u[1]=n+c/2,s[1]=n+c/2;break;case al.VERTICAL_ALIGN.center:u[1]=n,s[1]=n;break;case al.VERTICAL_ALIGN.bottom:u[1]=n-c/2,s[1]=n-c/2}}if("underline"===t){switch(a){case al.ALIGN.right:u[0]=e-r,s[0]=e;break;case al.ALIGN.center:u[0]=e-r/2,s[0]=e+r/2;break;case al.ALIGN.left:u[0]=e,s[0]=e+r}switch(l){case al.VERTICAL_ALIGN.top:u[1]=n+c,s[1]=n+c;break;case al.VERTICAL_ALIGN.center:u[1]=n+c/2,s[1]=n+c/2;break;case al.VERTICAL_ALIGN.bottom:u[1]=n,s[1]=n}}o.line(u,s)}},{key:"truncateDraw",value:function(){var t=this.draw,e=this.ruler,n=this.attr,r=this.rect,o=r.width,i=r.height,c=n.underline,l=n.strikethrough,a=n.align,u=n.verticalAlign,s=n.size;e.truncateRuler();var f=e.truncateText,h=e.truncateTextWidth,y=this.getVerticalAlignPadding(),p=this.getAlignPadding(),b=r.x,d=r.y;switch(a){case al.ALIGN.center:b+=o/2;break;case al.ALIGN.left:b+=p;break;case al.ALIGN.right:b+=o-p}switch(u){case al.VERTICAL_ALIGN.top:d+=y;break;case al.VERTICAL_ALIGN.center:d+=i/2;break;case al.VERTICAL_ALIGN.bottom:d+=i-y}if(s+y>i||h+p>o){var v=new Nu({draw:t,rect:r});v.open(),t.fillText(f,b,d),c&&this.drawingLine("underline",b,d,h),l&&this.drawingLine("strike",b,d,h),v.close()}else t.fillText(f,b,d),c&&this.drawingLine("underline",b,d,h),l&&this.drawingLine("strike",b,d,h);return new $w}},{key:"overflowDraw",value:function(){var t=this.draw,e=this.ruler,n=this.attr,r=this.rect,o=this.overflow,i=r.width,c=r.height,l=n.underline,a=n.strikethrough,u=n.align,s=n.verticalAlign,f=n.size;e.overflowRuler();var h=e.overflowText,y=e.overflowTextWidth,p=this.getVerticalAlignPadding(),b=this.getAlignPadding(),d=r.x,v=r.y;switch(u){case al.ALIGN.left:d+=b;break;case al.ALIGN.center:d+=i/2;break;case al.ALIGN.right:d+=i-b}switch(s){case al.VERTICAL_ALIGN.top:v+=p;break;case al.VERTICAL_ALIGN.center:v+=c/2;break;case al.VERTICAL_ALIGN.bottom:v+=c-p}var g=f+p>o.height,w=y+b>o.width,E=!1;if(u===al.ALIGN.center){var m=y/2-i/2;m>0&&(o.x>r.x-m?E=!0:o.x+o.width<r.x+r.width+m&&(E=!0))}if(g||w||E){var O=new Nu({draw:t,rect:o});O.open(),t.fillText(h,d,v),l&&this.drawingLine("underline",d,v,y),a&&this.drawingLine("strike",d,v,y),O.close()}else t.fillText(h,d,v),l&&this.drawingLine("underline",d,v,y),a&&this.drawingLine("strike",d,v,y);return new $w({width:y+b})}},{key:"textWrapDraw",value:function(){var t=this.draw,e=this.ruler,n=this.attr,r=this.rect,o=this.lineHeight,i=r.width,c=r.height,l=n.underline,a=n.strikethrough,u=n.align,s=n.verticalAlign,f=n.size,h=this.getVerticalAlignPadding(),y=this.getAlignPadding();e.textWrapRuler();var p=e.textWrapTextArray,b=e.textWrapHOffset,d=r.x,v=r.y;switch(u){case al.ALIGN.left:d+=y;break;case al.ALIGN.center:d+=i/2;break;case al.ALIGN.right:d+=i-y}switch(s){case al.VERTICAL_ALIGN.center:v+=c/2-b/2;break;case al.VERTICAL_ALIGN.top:v+=h;break;case al.VERTICAL_ALIGN.bottom:v+=c-b-h}if(p.length*(f+o)-o+h>c){var g=new Nu({draw:t,rect:r});g.open();for(var w=p.length,E=0;E<w;){var m=p[E],O=m.tx+d,T=m.ty+v;t.fillText(m.text,O,T),l&&this.drawingLine("underline",O,T,m.len),a&&this.drawingLine("strike",O,T,m.len),E+=1}g.close()}else for(var x=0,_=p.length;x<_;x+=1){var S=p[x],k=S.tx+d,C=S.ty+v;t.fillText(S.text,k,C),l&&this.drawingLine("underline",k,C,S.len),a&&this.drawingLine("strike",k,C,S.len)}return new $w}}])&&fE(n.prototype,r),o&&fE(n,o),e}(al);function dE(t){return(dE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gE(t,e){return!e||"object"!==dE(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wE(t){return(wE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function EE(t,e){return(EE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var mE=function(t){function e(t){var n,r=t.draw,o=t.ruler,i=t.rect,c=t.attr;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=gE(this,wE(e).call(this,{draw:r,ruler:o,attr:c}))).rect=i,n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&EE(t,e)}(e,t),n=e,(r=[{key:"drawingFont",value:function(){var t=this.ruler;if(t.isBlank())return new $w;var e=this.draw,n=this.attr,r=n.textWrap;if(e.attr({textAlign:al.ALIGN.left,textBaseline:al.VERTICAL_ALIGN.top,font:"".concat(n.italic?"italic":""," ").concat(n.bold?"bold":""," ").concat(n.size,"px ").concat(n.name),fillStyle:n.color,strokeStyle:n.color}),t.hasBreak())return this.textWrapDraw();switch(r){case al.TEXT_WRAP.OVER_FLOW:return this.overflowDraw();case al.TEXT_WRAP.TRUNCATE:return this.truncateDraw();case al.TEXT_WRAP.WORD_WRAP:return this.textWrapDraw()}return new $w}},{key:"drawingLine",value:function(t,e,n,r,o,i){var c=this.draw,l=this.attr.size,a=[0,0],u=[0,0];if("strike"===t){switch(o){case al.ALIGN.center:case al.ALIGN.left:case al.ALIGN.right:a[0]=e,u[0]=e+r}switch(i){case al.VERTICAL_ALIGN.center:case al.VERTICAL_ALIGN.top:case al.VERTICAL_ALIGN.bottom:a[1]=n+l/2,u[1]=n+l/2}}if("underline"===t){switch(o){case al.ALIGN.center:case al.ALIGN.left:case al.ALIGN.right:a[0]=e,u[0]=e+r}switch(i){case al.VERTICAL_ALIGN.center:case al.VERTICAL_ALIGN.top:case al.VERTICAL_ALIGN.bottom:a[1]=n+l,u[1]=n+l}}c.line(a,u)}},{key:"truncateDraw",value:function(){var t=this.draw,e=this.ruler,n=this.attr,r=this.rect,o=r.width,i=r.height,c=n.underline,l=n.strikethrough,a=n.align,u=n.verticalAlign,s=n.size,f=this.getVerticalAlignPadding(),h=this.getAlignPadding();e.truncateRuler();var y=e.truncateTextArray,p=e.truncateMaxLen,b=r.x,d=r.y;switch(a){case al.ALIGN.left:b+=h;break;case al.ALIGN.center:b+=o/2-s/2;break;case al.ALIGN.right:b+=o-s-h}switch(u){case al.VERTICAL_ALIGN.top:d+=f;break;case al.VERTICAL_ALIGN.center:d+=i/2-p/2;break;case al.VERTICAL_ALIGN.bottom:d+=i-p-f}if(p+f>i||s+h>o){var v=new Nu({draw:t,rect:r});v.open();for(var g=y.length,w=0;w<g;){var E=y[w],m=E.tx+b,O=E.ty+d;t.fillText(E.text,m,O),c&&this.drawingLine("underline",m,O,E.len,a,u),l&&this.drawingLine("strike",m,O,E.len,a,u),w+=1}v.close()}else for(var T=y.length,x=0;x<T;){var _=y[x],S=_.tx+b,k=_.ty+d;t.fillText(_.text,S,k),c&&this.drawingLine("underline",S,k,_.len,a,u),l&&this.drawingLine("strike",S,k,_.len,a,u),x+=1}return new $w}},{key:"overflowDraw",value:function(){return this.truncateDraw()}},{key:"textWrapDraw",value:function(){var t=this.draw,e=this.ruler,n=this.attr,r=this.rect,o=r.width,i=r.height,c=n.size,l=n.verticalAlign,a=n.underline,u=n.strikethrough,s=n.align,f=this.getVerticalAlignPadding(),h=this.getAlignPadding();e.textWrapRuler();var y=e.textWrapTextArray,p=e.textWrapMaxLen,b=e.textWrapWOffset,d=r.x,v=r.y;switch(s){case al.ALIGN.left:d+=h;break;case al.ALIGN.center:d+=o/2-b/2;break;case al.ALIGN.right:d+=o-b-h}switch(l){case al.VERTICAL_ALIGN.top:v+=f;break;case al.VERTICAL_ALIGN.center:v+=i/2-p/2;break;case al.VERTICAL_ALIGN.bottom:v+=i-p-f}if(y.length*c+h>o){var g=y.length,w=new Nu({draw:t,rect:r});w.open();for(var E=0;E<g;){var m=y[E],O=m.tx+d,T=m.ty+v;t.fillText(m.text,O,T),a&&this.drawingLine("underline",O,T,m.len,s,l),u&&this.drawingLine("strike",O,T,m.len,s,l),E+=1}w.close()}else for(var x=y.length,_=0;_<x;){var S=y[_],k=S.tx+d,C=S.ty+v;t.fillText(S.text,k,C),a&&this.drawingLine("underline",k,C,S.len,s,l),u&&this.drawingLine("strike",k,C,S.len,s,l),_+=1}return new $w}}])&&vE(n.prototype,r),o&&vE(n,o),e}(al);function OE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var TE=function(){function t(e){var n=e.draw;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.draw=n}var e,n,r;return e=t,(n=[{key:"textWidth",value:function(t){return this.draw.measureText(t).width}}])&&OE(e.prototype,n),r&&OE(e,r),t}();function xE(t){return(xE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function SE(t,e){return!e||"object"!==xE(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function kE(t){return(kE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function CE(t,e){return(CE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}TE.USED={DEFAULT_INI:0,TRUNCATE:1,OVER_FLOW:2,TEXT_WRAP:3};var PE=function(t){function e(t){var n,r=t.draw,o=t.text;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=SE(this,kE(e).call(this,{draw:r}))).text=o,n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&CE(t,e)}(e,t),n=e,(r=[{key:"textBreak",value:function(){return this.text.split(/\n/)}},{key:"isBlank",value:function(){var t=this.text;return null==t||""===t.toString().trim()}},{key:"hasBreak",value:function(){return this.text.indexOf("\n")>-1}}])&&_E(n.prototype,r),o&&_E(n,o),e}(TE);function RE(t){return(RE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function LE(t,e){return!e||"object"!==RE(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function IE(t){return(IE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function AE(t,e){return(AE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var NE=function(t){function e(t){var n,r=t.draw,o=t.text,i=t.size,c=t.angle,l=t.rect,a=t.overflow,u=t.align,s=t.verticalAlign,f=t.textWrap,h=t.lineHeight,y=void 0===h?4:h,p=t.padding;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=LE(this,IE(e).call(this,{draw:r,text:o}))).size=i,n.angle=c,n.rect=l,n.overflow=a,n.align=u,n.verticalAlign=s,n.textWrap=f,n.lineHeight=y,n.padding=p,n.overflowText="",n.overflowTextWidth=0,n.textWrapText="",n.textWrapTextWidth=0,n.textWrapTextArray=[],n.textWrapMaxLen=0,n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&AE(t,e)}(e,t),n=e,(r=[{key:"equals",value:function(t){if(null===t)return!1;if(t.constructor!==e)return!1;if(t.text!==this.text)return!1;if(t.size!==this.size)return!1;if(t.angle!==this.angle)return!1;if(t.align!==this.align)return!1;if(t.verticalAlign!==this.verticalAlign)return!1;if(t.textWrap!==this.textWrap)return!1;if(t.padding!==this.padding)return!1;switch(this.textWrap){case al.TEXT_WRAP.TRUNCATE:var n=t.rect.width!==this.rect.width,r=t.rect.height!==this.rect.height;if(n||r)return!1;break;case al.TEXT_WRAP.OVER_FLOW:var o=t.overflow.width!==this.overflow.width,i=t.overflow.height!==this.overflow.height;if(o||i)return!1;break;case al.TEXT_WRAP.WORD_WRAP:if(t.lineHeight!==this.lineHeight)return!1}return!0}},{key:"truncateRuler",value:function(){this.overflowRuler()}},{key:"overflowRuler",value:function(){if(!this.used){var t=this.text,e=this.textWidth(t);this.overflowText=t,this.overflowTextWidth=e,this.used=TE.USED.OVER_FLOW}}},{key:"textWrapRuler",value:function(){if(!this.used){var t=this.text,e=this.size,n=this.angle,r=this.rect,o=this.lineHeight,i=this.padding,c=r.height;if(n>0){for(var l=Gw.tilt({inverse:c-2*i,angle:n}),a=this.textBreak(),u=[],s=a.length,f=0,h=0;f<s;){for(var y=a[f],p=y.length,b={str:"",len:0,start:0},d=0;d<p;){var v=b.str+y.charAt(d),g=this.textWidth(v);g>l?(0===b.len?(u.push({text:v,len:g,tx:0,ty:0}),g>h&&(h=g),d+=1):(u.push({text:b.str,len:b.len,tx:0,ty:0}),b.len>h&&(h=b.len)),b.str="",b.len=0,b.start=d):(b.str=v,b.len=g,d+=1)}b.len>0&&u.push({text:b.str,len:b.len,tx:0,ty:0}),b.len>h&&(h=b.len),f+=1}for(var w=Gw.tilt({inverse:e+o,angle:n}),E=u.length,m=0,O=0;O<E;)u[O].tx=m,m+=w,O+=1;this.textWrapTextArray=u,this.textWrapMaxLen=h}else{for(var T=Gw.tilt({inverse:c-2*i,angle:n}),x=this.textBreak(),_=[],S=x.length,k=0,C=0;k<S;){for(var P=x[k],R=P.length,j={str:"",len:0,start:0},L=0;L<R;){var I=j.str+P.charAt(L),A=this.textWidth(I);A>T?(0===j.len?(_.push({text:I,len:A,tx:0,ty:0}),A>C&&(C=A),L+=1):(_.push({text:j.str,len:j.len,tx:0,ty:0}),j.len>C&&(C=j.len)),j.str="",j.len=0,j.start=L):(j.str=I,j.len=A,L+=1)}j.len>0&&_.push({text:j.str,len:j.len,tx:0,ty:0}),j.len>C&&(C=j.len),k+=1}for(var N=Gw.tilt({inverse:e+o,angle:n}),V=0,D=_.length-1;D>=0;)_[D].tx=V,V+=N,D-=1;this.textWrapTextArray=_,this.textWrapMaxLen=C}0===this.textWrapTextArray.length&&(this.textWrapText=t,this.textWrapTextWidth=this.textWidth(t)),this.used=TE.USED.TEXT_WRAP}}}])&&jE(n.prototype,r),o&&jE(n,o),e}(PE);function VE(t){return(VE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function DE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ME(t,e){return!e||"object"!==VE(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function WE(t){return(WE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function BE(t,e){return(BE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var YE=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ME(this,WE(e).apply(this,arguments))}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&BE(t,e)}(e,t),n=e,(r=[{key:"equals",value:function(t){if(null===t)return!1;if(t.constructor!==e)return!1;if(t.text!==this.text)return!1;if(t.size!==this.size)return!1;if(t.angle!==this.angle)return!1;if(t.align!==this.align)return!1;if(t.verticalAlign!==this.verticalAlign)return!1;if(t.textWrap!==this.textWrap)return!1;if(t.padding!==this.padding)return!1;switch(this.textWrap){case al.TEXT_WRAP.TRUNCATE:var n=t.rect.width!==this.rect.width,r=t.rect.height!==this.rect.height;if(n||r)return!1;break;case al.TEXT_WRAP.OVER_FLOW:var o=t.overflow.width!==this.overflow.width,i=t.overflow.height!==this.overflow.height;if(o||i)return!1;break;case al.TEXT_WRAP.WORD_WRAP:if(t.lineHeight!==this.lineHeight)return!1}return!0}}])&&DE(n.prototype,r),o&&DE(n,o),e}(NE);function HE(t){return(HE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function FE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function UE(t,e){return!e||"object"!==HE(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function GE(t){return(GE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zE(t,e){return(zE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function XE(t){return(XE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ZE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function JE(t,e){return!e||"object"!==XE(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function KE(t){return(KE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $E(t,e){return($E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qE=function(t){function e(t){var n,r=t.draw,o=t.text,i=t.size,c=t.rect,l=t.overflow,a=t.align,u=t.textWrap,s=t.lineHeight,f=void 0===s?4:s,h=t.padding;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=JE(this,KE(e).call(this,{text:o,draw:r,align:a,padding:h}))).size=i,n.rect=c,n.overflow=l,n.textWrap=u,n.lineHeight=f,n.used=TE.USED.DEFAULT_INI,n.truncateText="",n.truncateTextWidth=0,n.overflowText="",n.overflowTextWidth=0,n.textWrapTextArray=[],n.textWrapHOffset=0,n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$E(t,e)}(e,t),n=e,(r=[{key:"equals",value:function(t){if(null===t)return!1;if(t.constructor!==e)return!1;if(t.text!==this.text)return!1;if(t.align!==this.align)return!1;if(t.size!==this.size)return!1;if(t.padding!==this.padding)return!1;if(t.textWrap!==this.textWrap)return!1;switch(this.textWrap){case al.TEXT_WRAP.TRUNCATE:var n=t.rect.width!==this.rect.width,r=t.rect.height!==this.rect.height;if(n||r)return!1;break;case al.TEXT_WRAP.OVER_FLOW:var o=t.overflow.width!==this.overflow.width,i=t.overflow.height!==this.overflow.height;if(o||i)return!1;break;case al.TEXT_WRAP.WORD_WRAP:if(t.lineHeight!==this.lineHeight)return!1}return!0}},{key:"truncateRuler",value:function(){if(!this.used){var t=this.rect,e=this.displayFont(t),n=e.text,r=e.textWidth;this.truncateText=n,this.truncateTextWidth=r,this.used=TE.USED.TRUNCATE}}},{key:"overflowRuler",value:function(){if(!this.used){var t=this.overflow,e=this.displayFont(t),n=e.text,r=e.textWidth;this.overflowText=n,this.overflowTextWidth=r,this.used=TE.USED.OVER_FLOW}}},{key:"textWrapRuler",value:function(){if(!this.used){for(var t=this.size,e=this.rect,n=this.lineHeight,r=e.width,o=this.getAlignPadding(),i=this.textBreak(),c=[],l=r-2*o,a=i.length,u=0,s=0;u<a;){u>0&&(s+=t+n);for(var f=i[u],h=f.length,y=0,p={str:"",len:0,start:0};y<h;){var b=p.str+f.charAt(y),d=this.textWidth(b);d>l?(0===p.len?(c.push({text:b,len:d,tx:0,ty:s}),y+=1):c.push({text:p.str,len:p.len,tx:0,ty:s}),s+=t+n,p.str="",p.len=0,p.start=y):(p.str=b,p.len=d,y+=1)}p.len>0&&c.push({text:p.str,len:p.len,tx:0,ty:s}),u+=1}s>0&&(s-=n),this.textWrapTextArray=c,this.textWrapHOffset=s,this.used=TE.USED.TEXT_WRAP}}}])&&ZE(n.prototype,r),o&&ZE(n,o),e}(function(t){function e(t){var n,r=t.draw,o=t.text,i=t.align,c=t.padding;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=UE(this,GE(e).call(this,{draw:r,text:o}))).align=i,n.padding=c,n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zE(t,e)}(e,t),n=e,(r=[{key:"displayFont",value:function(t){var e=this.align,n=t.width,r=this.text,o=r.length;switch(e){case al.ALIGN.left:for(var i="",c=0,l=0;l<o;){var a=i+r.charAt(l),u=this.textWidth(a);if(u>=n)break;i=a,c=u,l+=1}return{text:i,textWidth:c};case al.ALIGN.center:var s=this.textWidth(r),f=n/2-s/2;if(f<0){for(var h=0,y="";h<o;){var p=y+r.charAt(h);if(f+this.textWidth(p)>=0)break;y=p,h+=1}for(var b=h,d="",v=0;b<o;){var g=d+r.charAt(b),w=this.textWidth(g);if(w>=n)break;d=g,v=w,b+=1}return{text:d,textWidth:v}}return{text:r,textWidth:s};case al.ALIGN.right:for(var E=o-1,m="",O=0;E>=0;){var T=r.charAt(E)+m,x=this.textWidth(T);if(x>=n)break;m=T,O=x,E-=1}return{text:m,textWidth:O}}return{text:"",textWidth:0}}},{key:"getAlignPadding",value:function(){return this.align===al.ALIGN.center?0:this.padding}}])&&FE(n.prototype,r),o&&FE(n,o),e}(PE));function QE(t){return(QE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function em(t,e){return!e||"object"!==QE(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function nm(t){return(nm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rm(t,e){return(rm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function om(t){return(om="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function im(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cm(t,e){return!e||"object"!==om(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lm(t){return(lm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function am(t,e){return(am=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var um=function(t){function e(t){var n,r=t.draw,o=t.text,i=t.size,c=t.rect,l=t.verticalAlign,a=t.textWrap,u=t.spacing,s=void 0===u?2:u,f=t.lineHeight,h=void 0===f?8:f,y=t.padding;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=cm(this,lm(e).call(this,{draw:r,text:o,verticalAlign:l,padding:y}))).size=i,n.rect=c,n.textWrap=a,n.spacing=s,n.lineHeight=h,n.used=TE.USED.DEFAULT_INI,n.truncateTextArray=[],n.truncateMaxLen=0,n.textWrapTextArray=[],n.textWrapMaxLen=0,n.textWrapWOffset=0,n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&am(t,e)}(e,t),n=e,(r=[{key:"equals",value:function(t){if(null===t)return!1;if(t.constructor!==e)return!1;if(t.text!==this.text)return!1;if(t.size!==this.size)return!1;if(t.spacing!==this.spacing)return!1;if(t.padding!==this.padding)return!1;if(t.verticalAlign!==this.verticalAlign)return!1;if(t.textWrap!==this.textWrap)return!1;switch(this.textWrap){case al.TEXT_WRAP.TRUNCATE:case al.TEXT_WRAP.OVER_FLOW:var n=t.rect.width!==this.rect.width,r=t.rect.height!==this.rect.height;if(n||r)return!1;break;case al.TEXT_WRAP.WORD_WRAP:if(t.lineHeight!==this.lineHeight)return!1}return!0}},{key:"truncateRuler",value:function(){if(!this.used){for(var t=this.text,e=this.size,n=this.spacing,r=[],o=t.length,i=0,c=0,l=0;l<o;){var a=t.charAt(l),u=this.textWidth(a);r.push({len:u,text:a,tx:e/2-u/2,ty:c}),c+=e+n,l+=1}c>0&&(c-=n),c>i&&(i=c),this.truncateTextArray=r,this.truncateMaxLen=i,this.used=TE.USED.TRUNCATE}}},{key:"overflowRuler",value:function(){this.truncateRuler()}},{key:"textWrapRuler",value:function(){for(var t=this.rect,e=this.size,n=this.spacing,r=this.lineHeight,o=t.height,i=this.getVerticalAlignPadding(),c=this.textBreak(),l=[],a=o-2*i,u=c.length,s=0,f=0,h=0;h<u;){for(var y=c[h],p=y.length,b=0,d=0;d<p;){var v=y.charAt(d),g=this.textWidth(v),w={len:g,text:v,tx:f+(e/2-g/2),ty:b};l.push(w),b+e>a&&(b>s&&(s=b-n),f+=e+r,b=0,w.tx=f+(e/2-g/2),w.ty=b),b+=e+n,d+=1}b>s&&(s=b-n),f+=e,h+=1}this.textWrapTextArray=l,this.textWrapMaxLen=s,this.textWrapWOffset=f}}])&&im(n.prototype,r),o&&im(n,o),e}(function(t){function e(t){var n,r=t.draw,o=t.text,i=t.verticalAlign,c=t.padding;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=em(this,nm(e).call(this,{draw:r,text:o}))).verticalAlign=i,n.padding=c,n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rm(t,e)}(e,t),n=e,(r=[{key:"getVerticalAlignPadding",value:function(){return this.verticalAlign===al.VERTICAL_ALIGN.center?0:this.padding}}])&&tm(n.prototype,r),o&&tm(n,o),e}(PE));function sm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var fm=function(){function t(e){var n=e.draw,r=e.text,o=e.rect,i=e.overflow,c=e.attr;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.attr=Object.assign({},{verticalAlign:al.VERTICAL_ALIGN.center,direction:al.TEXT_DIRECTION.HORIZONTAL,name:"Arial",size:14,color:"#000000",underline:!1,strikethrough:!1,bold:!1,italic:!1,textWrap:al.TEXT_WRAP.TRUNCATE,align:al.ALIGN.left,angle:0,padding:8},c),this.draw=n,this.text=r,this.rect=o,this.overflow=i}var e,n,r;return e=t,(n=[{key:"setPadding",value:function(t){this.attr.padding=t}},{key:"setSize",value:function(t){this.attr.size=t}},{key:"setDirection",value:function(t){this.attr.direction=t}},{key:"buildFont",value:function(){var t=this.text,e=this.draw,n=this.rect,r=this.attr,o=this.overflow;switch(r.direction){case al.TEXT_DIRECTION.ANGLE:return new rE({draw:e,text:t,rect:n,overflow:o,attr:r});case al.TEXT_DIRECTION.ANGLE_BAR:return new uE({draw:e,text:t,rect:n,overflow:o,attr:r});case al.TEXT_DIRECTION.HORIZONTAL:return new bE({draw:e,text:t,rect:n,overflow:o,attr:r});case al.TEXT_DIRECTION.VERTICAL:return new mE({draw:e,text:t,rect:n,overflow:o,attr:r})}return null}},{key:"buildRuler",value:function(){var t=this.attr,e=this.text,n=this.draw,r=this.rect,o=this.overflow,i=t.size,c=t.align,l=t.angle,a=t.padding,u=t.textWrap;switch(t.direction){case al.TEXT_DIRECTION.ANGLE:return new NE({draw:n,text:e,size:i,angle:l,rect:r,overflow:o,align:c,textWrap:u,padding:a});case al.TEXT_DIRECTION.ANGLE_BAR:return new YE({draw:n,text:e,size:i,angle:l,rect:r,overflow:o,align:c,textWrap:u,padding:a});case al.TEXT_DIRECTION.HORIZONTAL:return new qE({draw:n,text:e,size:i,rect:r,overflow:o,align:c,textWrap:u,padding:a});case al.TEXT_DIRECTION.VERTICAL:return new um({draw:n,text:e,size:i,rect:r,overflow:o,align:c,textWrap:u,padding:a})}return null}}])&&sm(e.prototype,n),r&&sm(e,r),t}();function hm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ym(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pm(t,e,n){return e&&ym(t.prototype,e),n&&ym(t,n),t}var bm=function(){function t(e){var n=e.scaleAdapter,r=e.table;hm(this,t),this.scaleAdapter=n,this.rect=null,this.draw=null,this.cell=null,this.row=-1,this.col=-1,this.table=r,this.overflow=null}return pm(t,[{key:"setRect",value:function(t){this.rect=t}},{key:"setDraw",value:function(t){this.draw=t}},{key:"setCell",value:function(t){this.cell=t}},{key:"setCol",value:function(t){this.col=t}},{key:"setRow",value:function(t){this.row=t}},{key:"setOverFlow",value:function(t){this.overflow=t}},{key:"build",value:function(){var t,e,n=this.rect,r=this.overflow,o=this.row,i=this.col,c=this.cell,l=this.draw,a=this.scaleAdapter,u=this.table,s=c.format,f=c.text,h=c.fontAttr,y=c.ruler,p=x.srcTransformStylePx(a.goto(h.size)),b=x.srcTransformStylePx(a.goto(h.padding)),d=new fm({text:(t=s,e=f,Yw[t](e)),draw:l,overflow:r,rect:n,attr:h});d.setSize(p),d.setPadding(b),u.isAngleBarCell(o,i)&&d.setDirection(al.TEXT_DIRECTION.ANGLE_BAR);var v=d.buildRuler(),g=d.buildFont();return g.setRuler(v.equals(y)?y:v),c.setRuler(g.ruler),g}}]),t}(),dm=function(){function t(e){var n=e.scaleAdapter,r=void 0===n?new fg:n,o=e.table;hm(this,t),this.scaleAdapter=r,this.table=o}return pm(t,[{key:"getBuilder",value:function(){var t=this.scaleAdapter,e=this.table;return new bm({scaleAdapter:t,table:e})}}]),t}();function vm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var gm=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"getXTableAreaView",value:function(){throw new TypeError("child impl")}},{key:"getRows",value:function(){throw new TypeError("child impl")}},{key:"getStyleTable",value:function(){throw new TypeError("child impl")}},{key:"getCols",value:function(){throw new TypeError("child impl")}},{key:"getMerges",value:function(){throw new TypeError("child impl")}},{key:"getCells",value:function(){throw new TypeError("child impl")}},{key:"getXIteratorBuilder",value:function(){throw new TypeError("child impl")}},{key:"getAngleBarWrapWidth",value:function(t,e,n,r){var o=this.getXTableAreaView(),i=this.getMerges(),c=this.getCols(),l=i.getFirstIncludes(t,e);if(l)return l;var a=o.getScrollView().eci,u=0,s=0;return n.fontAttr.angle>0?u=c.sectionSumWidth(e,a):s=-((u=c.sectionSumWidth(0,e-1)+r.width)-r.width),{width:u,offset:s}}},{key:"getHorizontalMaxWidth",value:function(t,e,n){var r=this.getMerges(),o=this.getCols(),i=this.getCells(),c=n.fontAttr.align,l=this.getXIteratorBuilder(),a=0,u=0;switch(c){case al.ALIGN.left:l.getColIterator().setBegin(e).setEnd(o.len).setLoop((function(n){var c=r.getFirstIncludes(t,n),l=i.getCell(t,n),u=H.isUnDef(l)||H.isBlank(l.text);return n===e?(a+=o.getWidth(n),!0):!(!u||!H.isUnDef(c)||(a+=o.getWidth(n),0))})).execute();break;case al.ALIGN.center:var s=0,f=0;l.getColIterator().setBegin(e+1).setEnd(o.len).setLoop((function(e){var n=r.getFirstIncludes(t,e),c=i.getCell(t,e);return!(!H.isUnDef(c)&&!H.isBlank(c.text)||!H.isUnDef(n)||(s+=o.getWidth(e),0))})).execute(),l.getColIterator().setBegin(e-1).setEnd(0).setLoop((function(e){var n=r.getFirstIncludes(t,e),c=i.getCell(t,e);if((H.isUnDef(c)||H.isBlank(c.text))&&H.isUnDef(n)){var l=o.getWidth(e);return f+=l,u-=l,!0}return!1})).execute(),a=o.getWidth(e)+f+s;break;case al.ALIGN.right:l.getColIterator().setBegin(e).setEnd(0).setLoop((function(n){var c=r.getFirstIncludes(t,n),l=i.getCell(t,n),s=H.isUnDef(l)||H.isBlank(l.text);if(n===e)return a+=o.getWidth(n),!0;if(s&&H.isUnDef(c)){var f=o.getWidth(n);return a+=f,u-=f,!0}return!1})).execute()}return{width:a,offset:u}}},{key:"getAngleMaxWidth",value:function(t,e,n,r){var o=this.getMerges(),i=this.getCols(),c=this.getRows(),l=o.getFirstIncludes(t,e);if(l)return l;var a=this.getXIteratorBuilder(),u=n.fontAttr,s=u.angle,f=u.align,h=u.padding,y=c.getHeight(t),p=Gw.tilt({inverse:y,angle:s}),b=zw.nearby({tilt:p,angle:s}),d=0,v=0;switch(f){case al.ALIGN.left:b+=h,a.getColIterator().setBegin(e).setEnd(i.len).setLoop((function(t){var e=i.getWidth(t);return b>(d+=e)})).execute();break;case al.ALIGN.center:var g=(b-r.width)/2,w=0;a.getColIterator().setBegin(e).setEnd(i.len).setLoop((function(t){var e=i.getWidth(t);return w+=e,g+r.width>w})).execute();var E=0;a.getColIterator().setBegin(e).setEnd(0).setLoop((function(t){var e=i.getWidth(t);return E+=e,g+r.width>E})).execute(),v=-((d=w+E-r.width)/2-r.width/2);break;case al.ALIGN.right:b+=h,a.getColIterator().setBegin(e).setEnd(0).setLoop((function(t){var e=i.getWidth(t);return b>(d+=e)})).execute(),v=-(d-r.width)}return{width:d,offset:v}}},{key:"getAngleBarMaxWidth",value:function(t,e,n,r){var o=this.getMerges(),i=this.getRows(),c=o.getFirstIncludes(t,e);if(c)return c;var l=n.fontAttr.angle,a=i.getHeight(t),u=Gw.tilt({inverse:a,angle:l}),s=zw.nearby({tilt:u,angle:l}),f=0;return l<0&&(f=-(s=zw.nearby({tilt:u,angle:l})+r.width)),{width:s,offset:f}}},{key:"getCellOverFlow",value:function(t,e,n,r){var o=this.getStyleTable(),i=n.x,c=n.y,l=n.height,a=n.width,u=r.fontAttr,s=r.contentWidth,f=u.direction,h=H.isUnDef(r)||H.isBlank(r.text);switch(f){case al.TEXT_DIRECTION.HORIZONTAL:if(!1===h&&u.textWrap===al.TEXT_WRAP.OVER_FLOW&&(0===s||s>a)){var y=this.getHorizontalMaxWidth(t,e,r);return new ju({x:i+y.offset,y:c,width:y.width,height:l})}return n;case al.TEXT_DIRECTION.ANGLE:if(!1===h){var p=u.textWrap;if(o.isAngleBarCell(t,e))switch(p){case al.TEXT_WRAP.OVER_FLOW:case al.TEXT_WRAP.TRUNCATE:var b=this.getAngleBarMaxWidth(t,e,r,n);return new ju({x:i+b.offset,y:c,width:b.width,height:l});case al.TEXT_WRAP.WORD_WRAP:var d=this.getAngleBarWrapWidth(t,e,r,n);return new ju({x:i+d.offset,y:c,width:d.width,height:l})}else switch(p){case al.TEXT_WRAP.OVER_FLOW:case al.TEXT_WRAP.TRUNCATE:var v=this.getAngleMaxWidth(t,e,r,n);return new ju({x:i+v.offset,y:c,width:v.width,height:l})}}return n}return null}}])&&vm(e.prototype,n),r&&vm(e,r),t}();function wm(t){return(wm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Em(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mm(t,e){return!e||"object"!==wm(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Om(t){return(Om=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tm(t,e){return(Tm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xm=3,_m=1,Sm=2,km=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=mm(this,Om(e).call(this))).table=t,n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tm(t,e)}(e,t),n=e,(r=[{key:"getXTableAreaView",value:function(){return this.table.xTableAreaView}},{key:"getRows",value:function(){return this.table.rows}},{key:"getStyleTable",value:function(){return this.table}},{key:"getCols",value:function(){return this.table.cols}},{key:"getMerges",value:function(){return this.table.merges}},{key:"getCells",value:function(){return this.table.cells}},{key:"getXIteratorBuilder",value:function(){return this.table.xIteratorBuilder}},{key:"getCellByViewRange",value:function(t){var e=this,n=t.reverseRows,r=void 0!==n&&n,o=t.reverseCols,i=void 0!==o&&o,c=t.startX,l=void 0===c?0:c,a=t.startY,u=void 0===a?0:a,s=t.view,f=t.newRow,h=void 0===f?function(){}:f,y=t.newCol,p=void 0===y?function(){}:y,b=t.cellsINCallback,d=void 0===b?function(){}:b,v=t.mergeCallback,g=void 0===v?function(){}:v,w=t.loopINCallback,E=void 0===w?function(){}:w,m=this.table.xIteratorBuilder,O=this.getRows(),T=this.getCols(),x=this.getCells(),_=this.getMerges(),S=s.sri,k=s.eri,C=s.sci,P=s.eci,R=[],j=u;if(r&&i){var L=u;m.getRowIterator().setBegin(k).setEnd(S).setLoop((function(t){var n=O.getHeight(t),r=null,o=l;switch(L-=n,h(t),m.getColIterator().setBegin(P).setEnd(C).setLoop((function(i){var c=_.getFirstIncludes(t,i),l=T.getWidth(i),a=new ju({x:o-=l,y:L,width:l,height:n});if(p(i),E(t,i,a),c){var u=R.find((function(t){return t===c}));if(H.isUnDef(u)){R.push(c);var f=e.mergeInfo({view:s,merge:c}),h=f.rect,y=f.cell;r=g(t,i,y,h,c)}}else{var b=x.getCell(t,i);b&&(r=d(t,i,b,a))}switch(r){case Sm:case _m:return!1;default:return!0}})).execute(),r){case Sm:return!1;default:return!0}})).execute()}else if(r){var I=u;m.getRowIterator().setBegin(k).setEnd(S).setLoop((function(t){var n=O.getHeight(t),r=null,o=l;switch(h(t),I-=n,m.getColIterator().setBegin(C).setEnd(P).setLoop((function(i){var c=_.getFirstIncludes(t,i),l=T.getWidth(i),a=new ju({x:o,y:I,width:l,height:n});if(p(i),E(t,i,a),c){var u=R.find((function(t){return t===c}));if(H.isUnDef(u)){R.push(c);var f=e.mergeInfo({view:s,merge:c}),h=f.rect,y=f.cell;r=g(t,i,y,h,c)}}else{var b=x.getCell(t,i);b&&(r=d(t,i,b,a))}switch(o+=l,r){case Sm:case _m:return!1;default:return!0}})).execute(),r){case Sm:return!1;default:return!0}})).execute()}else if(i){var A=u;m.getRowIterator().setBegin(S).setEnd(k).setLoop((function(t){var n=O.getHeight(t),r=null,o=l;switch(h(t),m.getColIterator().setBegin(P).setEnd(C).setLoop((function(i){var c=_.getFirstIncludes(t,i),l=T.getWidth(i),a=new ju({x:o-=l,y:A,width:l,height:n});if(p(i),E(t,i,a),c){var u=R.find((function(t){return t===c}));if(H.isUnDef(u)){R.push(c);var f=e.mergeInfo({view:s,merge:c}),h=f.rect,y=f.cell;r=g(t,i,y,h,c)}}else{var b=x.getCell(t,i);b&&(r=d(t,i,b,a))}switch(r){case Sm:case _m:return!1;default:return!0}})).execute(),A+=n,r){case Sm:return!1;default:return!0}})).execute()}else m.getRowIterator().setBegin(S).setEnd(k).setLoop((function(t){var n=O.getHeight(t),r=null,o=l;switch(h(t),m.getColIterator().setBegin(C).setEnd(P).setLoop((function(i){var c=_.getFirstIncludes(t,i),l=T.getWidth(i),a=new ju({x:o,y:j,width:l,height:n});if(p(i),E(t,i,a),c){var u=R.find((function(t){return t===c}));if(H.isUnDef(u)){R.push(c);var f=e.mergeInfo({view:s,merge:c}),h=f.rect,y=f.cell;r=g(t,i,y,h,c)}}else{var b=x.getCell(t,i);b&&(r=d(t,i,b,a))}switch(o+=l,r){case Sm:case _m:return!1;default:return!0}})).execute(),j+=n,r){case Sm:return!1;default:return!0}})).execute()}},{key:"mergeInfo",value:function(t){var e=t.view,n=t.merge,r=this.getRows(),o=this.getCols(),i=this.getCells(),c=Math.min(e.sri,n.sri),l=Math.min(e.sci,n.sci),a=Math.max(e.sri,n.sri),u=Math.max(e.sci,n.sci);a-=1,u-=1;var s=o.sectionSumWidth(l,u),f=r.sectionSumHeight(c,a);s=e.sci>n.sci?-1*s:s,f=e.sri>n.sri?-1*f:f;var h=r.sectionSumHeight(n.sri,n.eri),y=o.sectionSumWidth(n.sci,n.eci),p=i.getCellOrNew(n.sri,n.sci);return{rect:new ju({x:s,y:f,width:y,height:h}),cell:p}}}])&&Em(n.prototype,r),o&&Em(n,o),e}(gm);function Cm(t){return(Cm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Rm(t,e){return!e||"object"!==Cm(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function jm(t){return(jm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Lm(t,e){return(Lm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Im=3,Am=1,Nm=2,Vm=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Rm(this,jm(e).call(this))).table=t,n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lm(t,e)}(e,t),n=e,(r=[{key:"getXTableAreaView",value:function(){return this.table.xTableAreaView}},{key:"getRows",value:function(){return this.table.rows}},{key:"getStyleTable",value:function(){return this.table}},{key:"getCols",value:function(){return this.table.cols}},{key:"getMerges",value:function(){return this.table.merges}},{key:"getCells",value:function(){return this.table.cells}},{key:"getXIteratorBuilder",value:function(){return this.table.xIteratorBuilder}},{key:"getCellByViewRange",value:function(t){var e=this,n=t.reverseRows,r=void 0!==n&&n,o=t.reverseCols,i=void 0!==o&&o,c=t.startX,l=void 0===c?0:c,a=t.startY,u=void 0===a?0:a,s=t.newRow,f=void 0===s?function(){}:s,h=t.newCol,y=void 0===h?function(){}:h,p=t.view,b=void 0===p?new ss(0,0,0,0,0,0):p,d=t.cellsINCallback,v=void 0===d?function(){}:d,g=t.mergeCallback,w=void 0===g?function(){}:g,E=this.getRows(),m=this.getCols(),O=this.getCells(),T=this.getMerges(),x=this.table.xIteratorBuilder,_=b.sri,S=b.eri,k=b.sci,C=b.eci,P=[];if(r&&i){var R=u;x.getRowIterator().setBegin(S).setEnd(_).setLoop((function(t){var n=E.getHeight(t),r=null,o=l;switch(R-=n,f(t),x.getColIterator().setBegin(C).setEnd(k).setLoop((function(i){var c=T.getFirstIncludes(t,i),l=m.getWidth(i);if(y(i),o-=l,c){var a=P.find((function(t){return t===c}));if(H.isUnDef(a)){P.push(c);var u=e.mergeInfo({view:b,merge:c}),s=u.rect,f=u.cell;r=w(t,i,f,s,c)}}else{var h=O.getCell(t,i);if(h){var p=e.cellsINInfo({x:o,y:R,width:l,height:n,row:t,col:i,cell:h}),d=p.rect,g=p.overflow;r=v(t,i,h,d,g)}}switch(r){case Nm:case Am:return!1;default:return!0}})).execute(),r){case Nm:return!1;default:return!0}})).execute()}else if(r){var j=u;x.getRowIterator().setBegin(S).setEnd(_).setLoop((function(t){var n=E.getHeight(t),r=null,o=l;switch(f(t),j-=n,x.getColIterator().setBegin(k).setEnd(C).setLoop((function(i){var c=T.getFirstIncludes(t,i),l=m.getWidth(i);if(y(i),c){var a=P.find((function(t){return t===c}));if(H.isUnDef(a)){P.push(c);var u=e.mergeInfo({view:b,merge:c}),s=u.rect,f=u.cell;r=w(t,i,f,s,c)}}else{var h=O.getCell(t,i);if(h){var p=e.cellsINInfo({x:o,y:j,width:l,height:n,row:t,col:i,cell:h}),d=p.rect,g=p.overflow;r=v(t,i,h,d,g)}}switch(o+=l,r){case Nm:case Am:return!1;default:return!0}})).execute(),r){case Nm:return!1;default:return!0}})).execute()}else if(i){var L=u;x.getRowIterator().setBegin(_).setEnd(S).setLoop((function(t){var n=E.getHeight(t),r=null,o=l;switch(f(t),x.getColIterator().setBegin(C).setEnd(k).setLoop((function(i){var c=T.getFirstIncludes(t,i),l=m.getWidth(i);if(y(i),o-=l,c){var a=P.find((function(t){return t===c}));if(H.isUnDef(a)){P.push(c);var u=e.mergeInfo({view:b,merge:c}),s=u.rect,f=u.cell;r=w(t,i,f,s,c)}}else{var h=O.getCell(t,i);if(h){var p=e.cellsINInfo({x:o,y:L,width:l,height:n,row:t,col:i,cell:h}),d=p.rect,g=p.overflow;r=v(t,i,h,d,g)}}switch(r){case Nm:case Am:return!1;default:return!0}})).execute(),L+=n,r){case Nm:return!1;default:return!0}})).execute()}else{var I=u;x.getRowIterator().setBegin(_).setEnd(S).setLoop((function(t){var n=E.getHeight(t),r=null,o=l;switch(f(t),x.getColIterator().setBegin(k).setEnd(C).setLoop((function(i){var c=T.getFirstIncludes(t,i),l=m.getWidth(i);if(y(i),c){var a=P.find((function(t){return t===c}));if(H.isUnDef(a)){P.push(c);var u=e.mergeInfo({view:b,merge:c}),s=u.rect,f=u.cell;r=w(t,i,f,s,c)}}else{var h=O.getCell(t,i);if(h){var p=e.cellsINInfo({x:o,y:I,width:l,height:n,row:t,col:i,cell:h}),d=p.rect,g=p.overflow;r=v(t,i,h,d,g)}}switch(o+=l,r){case Nm:case Am:return!1;default:return!0}})).execute(),I+=n,r){case Nm:return!1;default:return!0}})).execute()}}},{key:"mergeInfo",value:function(t){var e=t.view,n=t.merge,r=this.getRows(),o=this.getCols(),i=this.getCells(),c=Math.min(e.sri,n.sri),l=Math.min(e.sci,n.sci),a=Math.max(e.sri,n.sri),u=Math.max(e.sci,n.sci);a-=1,u-=1;var s=o.sectionSumWidth(l,u),f=r.sectionSumHeight(c,a);s=e.sci>n.sci?-1*s:s,f=e.sri>n.sri?-1*f:f;var h=r.sectionSumHeight(n.sri,n.eri),y=o.sectionSumWidth(n.sci,n.eci),p=i.getCell(n.sri,n.sci);return{rect:new ju({x:s,y:f,width:y,height:h}),cell:p,merge:n}}},{key:"cellsINInfo",value:function(t){var e=t.width,n=t.height,r=t.col,o=t.row,i=t.x,c=t.y,l=t.cell,a=new ju({x:i,y:c,width:e,height:n});return{rect:a,overflow:this.getCellOverFlow(o,r,a,l)}}}])&&Pm(n.prototype,r),o&&Pm(n,o),e}(gm);function Dm(t){return(Dm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mm(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var c,l=t[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Wm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Bm(t,e){return!e||"object"!==Dm(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ym(t,e,n){return(Ym="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Hm(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Hm(t){return(Hm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fm(t,e){return(Fm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Um=function(t){function e(t){var n,r=t.xTableScrollView,o=t.rows,i=t.cols,c=t.scroll;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Bm(this,Hm(e).call(this,{xTableScrollView:r,rows:o,cols:i,scroll:c}))).lastScrollView=null,n.enterView=null,n.scrollEnterView=null,n.leaveView=null,n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fm(t,e)}(e,t),n=e,(r=[{key:"reset",value:function(){Ym(Hm(e.prototype),"reset",this).call(this),this.scrollEnterView=null,this.enterView=null,this.leaveView=null}},{key:"getLastScrollView",value:function(){return H.isNotUnDef(this.lastScrollView)?this.lastScrollView.clone():null}},{key:"getLeaveView",value:function(){if(H.isNotUnDef(this.leaveView))return this.leaveView.clone();var t=this.getLastScrollView(),e=this.getScrollView(),n=this.cols,r=this.rows;if(t){var o=Mm(t.coincideDifference(e),1)[0];if(o)return o.w=n.rectRangeSumWidth(o),o.h=r.rectRangeSumHeight(o),this.leaveView=o,o.clone()}return null}},{key:"getEnterView",value:function(){if(H.isNotUnDef(this.enterView))return this.enterView.clone();var t=this.getLastScrollView(),e=this.getScrollView(),n=this.cols,r=this.rows;if(t){var o=Mm(e.coincideDifference(t),1)[0];if(o)return o.w=n.rectRangeSumWidth(o),o.h=r.rectRangeSumHeight(o),this.enterView=o,o.clone()}return null}},{key:"getScrollEnterView",value:function(){if(H.isNotUnDef(this.scrollEnterView))return this.scrollEnterView.clone();var t=this.cols,e=this.rows,n=this.scroll,r=this.getEnterView();if(r){switch(n.type){case Og.H_RIGHT:r.sci-=1;break;case Og.V_BOTTOM:r.sri-=1;break;case Og.H_LEFT:r.eci+=1;break;case Og.V_TOP:r.eri+=1}return r.w=t.rectRangeSumWidth(r),r.h=e.rectRangeSumHeight(r),this.scrollEnterView=r,r.clone()}return null}},{key:"undo",value:function(){this.lastScrollView=null}},{key:"record",value:function(){this.lastScrollView=this.scrollView}}])&&Wm(n.prototype,r),o&&Wm(n,o),e}(mw);function Gm(t){return(Gm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xm(t,e){return!e||"object"!==Gm(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zm(t){return(Zm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jm(t,e){return(Jm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Km=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Xm(this,Zm(e).call(this))).table=t,n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jm(t,e)}(e,t),n=e,(r=[{key:"getCellOrNewCellByViewRange",value:function(t){var e=t.rectRange,n=void 0===e?new ss(-1,-1,-1,-1):e,r=t.callback,o=void 0===r?function(){}:r,i=this.table.xIteratorBuilder,c=this.getCells(),l=n.sri,a=n.eri,u=n.sci,s=n.eci;i.getRowIterator().setBegin(l).setEnd(a).setLoop((function(t){i.getColIterator().setBegin(u).setEnd(s).setLoop((function(e){var n=c.getCellOrNew(t,e);o(t,e,n)})).execute()})).execute()}},{key:"getXTableAreaView",value:function(){return this.table.xTableAreaView}},{key:"getRows",value:function(){return this.table.rows}},{key:"getCells",value:function(){return this.table.cells}},{key:"getCols",value:function(){return this.table.cols}},{key:"getMerges",value:function(){return this.table.merges}},{key:"getStyleTable",value:function(){return this.table}},{key:"getXIteratorBuilder",value:function(){return this.table.xIteratorBuilder}}])&&zm(n.prototype,r),o&&zm(n,o),e}(gm);function $m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var qm=function(){function t(e){var n=e.rows,r=e.cols,o=e.fixedView;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fixedView=o,this.cols=r,this.rows=n}var e,n,r;return e=t,(n=[{key:"getHeight",value:function(){return this.rows.rectRangeSumHeight(this.fixedView.getFixedView())}},{key:"getWidth",value:function(){return this.cols.rectRangeSumWidth(this.fixedView.getFixedView())}}])&&$m(e.prototype,n),r&&$m(e,r),t}();function Qm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var tO=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.rows,r=e.cols,o=e.cells;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cells=o,this.cols=r,this.data=new Array(n.len*r.len)}var e,n,r;return e=t,(n=[{key:"addOrNewCell",value:function(t,e,n){this.cells.getCellOrNew(t,e),this.add(t,e,n)}},{key:"add",value:function(t,e,n){var r=this.data;if(this.cells.getCell(t,e)){var o=this.getIcon(t,e);o?o.push(n):r[this.getOffset(t,e)]=[n]}}},{key:"getIcon",value:function(t,e){return this.data[this.getOffset(t,e)]}},{key:"getOffset",value:function(t,e){return t*this.cols.len+e}},{key:"remove",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.data,o=this.getIcon(t,e);if(o){var i=this.getOffset(t,e);n?(o=o.filter((function(t){return t!==n})),r[i]=o):r[i]=H.Undef}}}])&&Qm(e.prototype,n),r&&Qm(e,r),t}();function eO(t){return(eO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nO(t,e){return!e||"object"!==eO(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rO(t){return(rO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function oO(t,e){return(oO=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var iO=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),nO(this,rO(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&oO(t,e)}(e,t),e}(tO);function cO(t){return(cO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lO(t,e){return!e||"object"!==cO(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function aO(t){return(aO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function uO(t,e){return(uO=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var sO=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),lO(this,aO(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&uO(t,e)}(e,t),e}(tO);function fO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var hO=function(){function t(e){var n=e.logic,r=e.stack;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stack=r,this.logic=n,this.active=null}var e,n,r;return e=t,(n=[{key:"getActive",value:function(){return this.active}},{key:"run",value:function(e){var n=e.row,r=e.col,o=this.logic,i=this.stack,c=t.RETURN_TYPE.EXEC,l=null;switch(o){case t.FILTER_LOGIC.AND:c=t.RETURN_TYPE.EXEC;for(var a=0;a<i.length;a+=1){var u=i[a];if(u.run({row:n,col:r})!==t.RETURN_TYPE.EXEC){c=t.RETURN_TYPE.JUMP,l=u;break}}break;case t.FILTER_LOGIC.OR:c=t.RETURN_TYPE.JUMP;for(var s=0;s<i.length;s+=1){var f=i[s];if(f.run({row:n,col:r})===t.RETURN_TYPE.EXEC){c=t.RETURN_TYPE.EXEC,l=f;break}}}return this.active=l,c}}])&&fO(e.prototype,n),r&&fO(e,r),t}();function yO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}hO.RETURN_TYPE={EXEC:1,JUMP:2},hO.FILTER_LOGIC={AND:1,OR:2},hO.EMPTY=new hO({logic:hO.FILTER_LOGIC.AND,stack:[]});var pO=function(){function t(e){var n=e.foldOnOff,r=void 0===n||n,o=e.items,i=void 0===o?[]:o,c=e.bx,l=void 0===c?0:c,a=e.by,u=void 0===a?0:a,s=e.table,f=e.filter,h=void 0===f?hO.EMPTY:f,y=e.view,p=void 0===y?ss.EMPTY:y;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.foldOnOff=r,this.bx=l,this.by=u,this.items=i,this.table=s,this.filter=h,this.view=p}var e,n,r;return e=t,(n=[{key:"run",value:function(){var t=this,e=this.view,n=this.table,r=n.rows,o=n.cols,i=n.xIteratorBuilder,c=this.filter,l=this.foldOnOff,a=this.bx,u=this.by,s=e.sri,f=e.eri,h=e.sci,y=e.eci,p=u,b=!0,d=!1;i.getRowIterator().setBegin(s).setEnd(f).setLoop((function(e){var n=r.getHeight(e);switch(c.run({row:e})){case hO.RETURN_TYPE.EXEC:t.runNewRow(e,p),d=e===f;var l=a;i.getColIterator().setBegin(h).setEnd(y).setLoop((function(n){var r=o.getWidth(n);b&&t.runNewCol(n,l),t.runFilter(e,n,l,p),d&&t.runEndCol(n),l+=r})).execute(),b=!1,t.runEndRow(e);break;case hO.RETURN_TYPE.JUMP:}p+=n})).foldOnOff(l).execute(),this.runComplete()}},{key:"runNewRow",value:function(t,e){for(var n=this.items,r=0;r<n.length;r++)n[r].newRow({row:t,y:e})}},{key:"runNewCol",value:function(t,e){for(var n=this.items,r=0;r<n.length;r++)n[r].newCol({col:t,x:e})}},{key:"runEndRow",value:function(t){for(var e=this.items,n=0;n<e.length;n++)e[n].endRow({row:t})}},{key:"runEndCol",value:function(t){for(var e=this.items,n=0;n<e.length;n++)e[n].endCol({col:t})}},{key:"runFilter",value:function(t,e,n,r){for(var o=this.items,i=0;i<o.length;i++){var c=o[i];switch(c.filter.run({row:t,col:e})){case hO.RETURN_TYPE.EXEC:c.exec({row:t,col:e,x:n,y:r});break;case hO.RETURN_TYPE.JUMP:c.jump({row:t,col:e,x:n,y:r})}}}},{key:"runComplete",value:function(){for(var t=this.items,e=0;e<t.length;e++)t[e].complete()}}])&&yO(e.prototype,n),r&&yO(e,r),t}();function bO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var dO=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.newRow,r=void 0===n?H.noop:n,o=e.endRow,i=void 0===o?H.noop:o,c=e.filter,l=void 0===c?hO.EMPTY:c,a=e.newCol,u=void 0===a?H.noop:a,s=e.endCol,f=void 0===s?H.noop:s,h=e.jump,y=void 0===h?H.noop:h,p=e.exec,b=void 0===p?H.noop:p,d=e.complete,v=void 0===d?H.noop:d;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.newRow=r,this.endRow=i,this.filter=l,this.newCol=u,this.endCol=f,this.jump=y,this.exec=b,this.complete=v}var e,n,r;return e=t,(n=[{key:"getFilter",value:function(){return this.filter}}])&&bO(e.prototype,n),r&&bO(e,r),t}();function vO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}dO.EMPTY=new dO;var gO=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e}var e,n,r;return e=t,(n=[{key:"run",value:function(t){var e=t.row,n=t.col,r=this.table.cells.getCell(e,n);return H.isUnDef(r)?hO.RETURN_TYPE.EXEC:r.borderAttr.bottom.display?hO.RETURN_TYPE.JUMP:hO.RETURN_TYPE.EXEC}}])&&vO(e.prototype,n),r&&vO(e,r),t}();function wO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var EO=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e}var e,n,r;return e=t,(n=[{key:"run",value:function(t){var e=t.row,n=t.col,r=this.table.merges.getFirstIncludes(e,n);return r?r.eri===e?hO.RETURN_TYPE.EXEC:hO.RETURN_TYPE.JUMP:hO.RETURN_TYPE.EXEC}}])&&wO(e.prototype,n),r&&wO(e,r),t}();function mO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var OO=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e}var e,n,r;return e=t,(n=[{key:"run",value:function(t){var e=t.row,n=t.col,r=this.table.cells.getCell(e,n);return H.isUnDef(r)?hO.RETURN_TYPE.EXEC:r.borderAttr.right.display?hO.RETURN_TYPE.JUMP:hO.RETURN_TYPE.EXEC}}])&&mO(e.prototype,n),r&&mO(e,r),t}();function TO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var xO=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e}var e,n,r;return e=t,(n=[{key:"run",value:function(t){var e=t.row,n=t.col,r=this.table.merges.getFirstIncludes(e,n);return r?r.eci===n?hO.RETURN_TYPE.EXEC:hO.RETURN_TYPE.JUMP:hO.RETURN_TYPE.EXEC}}])&&TO(e.prototype,n),r&&TO(e,r),t}();var _O=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e};function SO(t){return(SO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function CO(t,e){return!e||"object"!==SO(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function PO(t){return(PO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function RO(t,e){return(RO=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var jO=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),CO(this,PO(e).apply(this,arguments))}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&RO(t,e)}(e,t),n=e,(r=[{key:"run",value:function(t){var e=t.row,n=t.col;return this.master({row:e,col:n})&&this.right({row:e,col:n})&&this.left({row:e,col:n})?hO.RETURN_TYPE.EXEC:hO.RETURN_TYPE.JUMP}},{key:"master",value:function(t){var e=t.row,n=t.col,r=this.table,o=r.cells,i=r.cols,c=o.getCell(e,n+1),l=o.getCell(e,n);if(H.isUnDef(l)||H.isBlank(l.text))return!0;var a=l.fontAttr,u=a.direction;if(u===al.TEXT_DIRECTION.ANGLE){var s=a.angle;if(r.isAngleBarCell(e,n))return s<0;if(90===s||-90===s)return!0}else if(a.textWrap!==al.TEXT_WRAP.OVER_FLOW)return!0;var f=a.align;return f!==al.ALIGN.left&&f!==al.ALIGN.center||!(r.getCellContentBoundOutWidth(e,n)>i.getWidth(n)&&(u===al.TEXT_DIRECTION.ANGLE||H.isUnDef(c)||H.isBlank(c.text)))}},{key:"left",value:function(t){var e=t.row,n=t.col,r=this.table,o=r.cells,i=r.cols,c=r.merges,l=r.xIteratorBuilder,a=o.getCell(e,n+1),u=o.getCell(e,n),s=!0,f=i.getWidth(n-1)+i.getWidth(n);return r.hasAngleCell(e)?l.getColIterator().setBegin(n-1).setEnd(0).setLoop((function(t){var n=o.getCell(e,t);if(H.isUnDef(n))return!0;var i=c.getFirstIncludes(e,t);if(H.isNotUnDef(i))return!0;var l=n.text;if(H.isBlank(l))return!0;var h=n.fontAttr,y=h.direction;if(y===al.TEXT_DIRECTION.ANGLE){var p=h.angle;if(r.isAngleBarCell(e,t)){if(p<0)return!0}else{if(90===p||-90===p)return!0;var b=h.align;if(b!==al.ALIGN.left&&b!==al.ALIGN.center)return!0}}else{if(h.textWrap!==al.TEXT_WRAP.OVER_FLOW)return!0;var d=h.align;if(d!==al.ALIGN.left&&d!==al.ALIGN.center)return!0}if(r.getCellContentBoundOutWidth(e,t)>f){var v=H.isUnDef(u)||H.isBlank(u.text),g=H.isUnDef(a)||H.isBlank(a.text);(y===al.TEXT_DIRECTION.ANGLE||v&&g)&&(s=!1)}return!1})).setNext((function(t){f+=i.getWidth(t)})).execute():l.getColIterator().setBegin(n-1).setEnd(0).setLoop((function(t){var n=o.getCell(e,t);if(H.isUnDef(n))return!0;var i=c.getFirstIncludes(e,t);if(H.isNotUnDef(i))return!0;var l=n.text;if(H.isBlank(l))return!0;var h=n.fontAttr;if(h.textWrap!==al.TEXT_WRAP.OVER_FLOW)return!1;var y=h.align;if(y!==al.ALIGN.left&&y!==al.ALIGN.center)return!1;if(r.getCellContentBoundOutWidth(e,t)>f){var p=H.isUnDef(u)||H.isBlank(u.text),b=H.isUnDef(a)||H.isBlank(a.text);p&&b&&(s=!1)}return!1})).setNext((function(t){f+=i.getWidth(t)})).execute(),s}},{key:"right",value:function(t){var e=t.row,n=t.col,r=this.table,o=r.cells,i=r.cols,c=r.merges,l=r.xIteratorBuilder,a=i.len,u=o.getCell(e,n),s=!0,f=i.getWidth(n+1);return r.hasAngleCell(e)?l.getColIterator().setBegin(n+1).setEnd(a).setLoop((function(t){var n=o.getCell(e,t);if(H.isUnDef(n))return!0;var i=c.getFirstIncludes(e,t);if(H.isNotUnDef(i))return!0;var l=n.text;if(H.isBlank(l))return!0;var a=n.fontAttr;if(a.direction===al.TEXT_DIRECTION.ANGLE){var h=a.angle;if(r.isAngleBarCell(e,t)){if(h>0)return!0}else{if(90===h||-90===h)return!0;var y=a.align;if(y!==al.ALIGN.right&&y!==al.ALIGN.center)return!0}}else{if(a.textWrap!==al.TEXT_WRAP.OVER_FLOW)return!0;var p=a.align;if(p!==al.ALIGN.right&&p!==al.ALIGN.center)return!0}return!(r.getCellContentBoundOutWidth(e,t)>f&&(H.isUnDef(u)||H.isBlank(u.text))&&(s=!1,1))})).setNext((function(t){f+=i.getWidth(t)})).execute():l.getColIterator().setBegin(n+1).setEnd(a).setLoop((function(t){var n=o.getCell(e,t);if(H.isUnDef(n))return!0;var i=c.getFirstIncludes(e,t);if(H.isNotUnDef(i))return!0;var l=n.text;if(H.isBlank(l))return!0;var a=n.fontAttr;if(a.textWrap!==al.TEXT_WRAP.OVER_FLOW)return!1;var h=a.align;return(h===al.ALIGN.right||h===al.ALIGN.center)&&(r.getCellContentBoundOutWidth(e,t)>f&&(H.isUnDef(u)||H.isBlank(u.text))&&(s=!1),!1)})).setNext((function(t){f+=i.getWidth(t)})).execute(),s}}])&&kO(n.prototype,r),o&&kO(n,o),e}(_O);function LO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var IO=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e}var e,n,r;return e=t,(n=[{key:"run",value:function(t){var e=t.row,n=t.col;return this.table.isAngleBarCell(e,n)?hO.RETURN_TYPE.JUMP:hO.RETURN_TYPE.EXEC}}])&&LO(e.prototype,n),r&&LO(e,r),t}();function AO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var NO=function(){function t(e){var n=e.table,r=e.getWidth,o=e.getHeight,i=e.bx,c=void 0===i?0:i,l=e.by,a=void 0===l?0:l;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=n,this.getHeight=o,this.getWidth=r,this.bx=c,this.by=a,this.bLine=[],this.rLine=[]}var e,n,r;return e=t,(n=[{key:"getBItem",value:function(){var t=this,e=this.table,n=this.bx,r=this.by,o=this.getWidth,i=this.getHeight,c={},l=[];return new dO({newRow:function(t){var e=t.row,o=t.y,l=i(e);c.sx=n,c.sy=r+o+l,c.ex=c.sx,c.ey=c.sy,c.breakpoint=!1},endRow:function(){if(c.breakpoint){var t=c.sx,e=c.sy,n=c.ex,r=c.ey;l.push({sx:t,sy:e,ex:n,ey:r})}},filter:new hO({logic:hO.FILTER_LOGIC.AND,stack:[new gO(e),new EO(e),new IO(e)]}),exec:function(t){var e=t.col,n=o(e);c.breakpoint=!0,c.ex+=n},jump:function(t){var e=t.col;if(c.breakpoint){var n=c.sx,r=c.sy,i=c.ex,a=c.ey;c.breakpoint=!1,l.push({sx:n,sy:r,ex:i,ey:a})}var u=o(e);c.sx=c.ex+u,c.ex=c.sx},complete:function(){t.bLine=l}})}},{key:"getRItem",value:function(){var t=this,e=this.table,n=this.bx,r=this.by,o=this.getWidth,i=this.getHeight,c=[],l=[];return new dO({newCol:function(t){var e=t.col,i=t.x,l=o(e),a=n+i+l,u=r,s=a,f=u;c[e]={sx:a,sy:u,ex:s,ey:f,breakpoint:!1}},endCol:function(t){var e=t.col,n=c[e];if(n.breakpoint){var r=n.sx,o=n.sy,i=n.ex,a=n.ey;l.push({sx:r,sy:o,ex:i,ey:a})}},filter:new hO({logic:hO.FILTER_LOGIC.AND,stack:[new OO(e),new xO(e),new IO(e),new jO(e)]}),exec:function(t){var e=t.row,n=t.col,r=c[n],o=i(e);r.breakpoint=!0,r.ey+=o},jump:function(t){var e=t.row,n=t.col,r=c[n],o=i(e);if(r.breakpoint){var a=r.sx,u=r.sy,s=r.ex,f=r.ey;r.breakpoint=!1,l.push({sx:a,sy:u,ex:s,ey:f})}r.sy=r.ey+o,r.ey=r.sy},complete:function(){t.rLine=l}})}},{key:"getItems",value:function(){return[this.getBItem(),this.getRItem()]}},{key:"getResult",value:function(){return{bLine:this.bLine,rLine:this.rLine}}}])&&AO(e.prototype,n),r&&AO(e,r),t}();function VO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var DO=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.xIteratorBuilder=e}var e,n,r;return e=t,(n=[{key:"htJoin",value:function(t){for(var e=1;e<t.length;){var n=t[e],r=t[e-1],o=n.borderAttr.top.equal(r.borderAttr.top),i=n.col-r.col==1,c=n.row===r.row;o&&i&&c?(r.ex=n.ex,r.col=n.col,t.splice(e,1)):e+=1}return t}},{key:"hbJoin",value:function(t){for(var e=1;e<t.length;){var n=t[e],r=t[e-1],o=n.borderAttr.bottom.equal(r.borderAttr.bottom),i=n.col-r.col==1,c=n.row===r.row;o&&i&&c?(r.ex=n.ex,r.col=n.col,t.splice(e,1)):e+=1}return t}},{key:"vlJoin",value:function(t){for(var e=this.xIteratorBuilder,n=1;n<t.length;){var r=t[n],o=t[n-1],i=e.getRowIterator().setBegin(o.row).setEnd(r.row).nextRow(),c=r.borderAttr.left.equal(o.borderAttr.left),l=r.row===i,a=r.col===o.col;c&&l&&a?(o.ey=r.ey,o.row=r.row,t.splice(n,1)):n+=1}return t}},{key:"vrJoin",value:function(t){for(var e=this.xIteratorBuilder,n=1;n<t.length;){var r=t[n],o=t[n-1],i=e.getRowIterator().setBegin(o.row).setEnd(r.row).nextRow(),c=r.borderAttr.right.equal(o.borderAttr.right),l=r.row===i,a=r.col===o.col;c&&l&&a?(o.ey=r.ey,o.row=r.row,t.splice(n,1)):n+=1}return t}}])&&VO(e.prototype,n),r&&VO(e,r),t}();function MO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var WO=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e}var e,n,r;return e=t,(n=[{key:"run",value:function(t){var e=t.row,n=t.col,r=this.table.cells.getCell(e,n);return H.isUnDef(r)?hO.RETURN_TYPE.JUMP:r.borderAttr.bottom.display?hO.RETURN_TYPE.EXEC:hO.RETURN_TYPE.JUMP}}])&&MO(e.prototype,n),r&&MO(e,r),t}();function BO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var YO=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e}var e,n,r;return e=t,(n=[{key:"run",value:function(t){var e=t.row,n=t.col,r=this.table.cells,o=r.getCell(e+1,n),i=r.getCell(e,n);if(H.isUnDef(o))return hO.RETURN_TYPE.EXEC;var c=o.borderAttr.top;return c.display?1===i.borderAttr.bottom.priority(c)?hO.RETURN_TYPE.EXEC:hO.RETURN_TYPE.JUMP:hO.RETURN_TYPE.EXEC}}])&&BO(e.prototype,n),r&&BO(e,r),t}();function HO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var FO=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e}var e,n,r;return e=t,(n=[{key:"run",value:function(t){var e=t.row,n=t.col,r=this.table.cells.getCell(e,n);return H.isUnDef(r)?hO.RETURN_TYPE.JUMP:r.borderAttr.top.display?hO.RETURN_TYPE.EXEC:hO.RETURN_TYPE.JUMP}}])&&HO(e.prototype,n),r&&HO(e,r),t}();function UO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var GO=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e}var e,n,r;return e=t,(n=[{key:"run",value:function(t){var e=t.row,n=t.col,r=this.table.cells,o=r.getCell(e-1,n),i=r.getCell(e,n);if(H.isUnDef(o))return hO.RETURN_TYPE.EXEC;var c=o.borderAttr.bottom;if(c.display){var l=i.borderAttr.top.priority(c);return 1===l||0===l?hO.RETURN_TYPE.EXEC:hO.RETURN_TYPE.JUMP}return hO.RETURN_TYPE.EXEC}}])&&UO(e.prototype,n),r&&UO(e,r),t}();function zO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var XO=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e}var e,n,r;return e=t,(n=[{key:"run",value:function(t){var e=t.row,n=t.col,r=this.table.merges.getFirstIncludes(e,n);return r?r.sri===e?hO.RETURN_TYPE.EXEC:hO.RETURN_TYPE.JUMP:hO.RETURN_TYPE.EXEC}}])&&zO(e.prototype,n),r&&zO(e,r),t}();function ZO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var JO=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e}var e,n,r;return e=t,(n=[{key:"run",value:function(t){var e=t.row,n=t.col,r=this.table.cells.getCell(e,n);return H.isUnDef(r)?hO.RETURN_TYPE.JUMP:r.borderAttr.right.display?hO.RETURN_TYPE.EXEC:hO.RETURN_TYPE.JUMP}}])&&ZO(e.prototype,n),r&&ZO(e,r),t}();function KO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var $O=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e}var e,n,r;return e=t,(n=[{key:"run",value:function(t){var e=t.row,n=t.col,r=this.table.cells,o=r.getCell(e,n+1),i=r.getCell(e,n);if(H.isUnDef(o))return hO.RETURN_TYPE.EXEC;var c=o.borderAttr.left;return c.display?1===i.borderAttr.right.priority(c)?hO.RETURN_TYPE.EXEC:hO.RETURN_TYPE.JUMP:hO.RETURN_TYPE.EXEC}}])&&KO(e.prototype,n),r&&KO(e,r),t}();function qO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var QO=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e}var e,n,r;return e=t,(n=[{key:"run",value:function(t){var e=t.row,n=t.col,r=this.table.cells,o=r.getCell(e,n-1),i=r.getCell(e,n);if(H.isUnDef(o))return hO.RETURN_TYPE.EXEC;var c=o.borderAttr.right;if(c.display){var l=i.borderAttr.left.priority(c);return 1===l||0===l?hO.RETURN_TYPE.EXEC:hO.RETURN_TYPE.JUMP}return hO.RETURN_TYPE.EXEC}}])&&qO(e.prototype,n),r&&qO(e,r),t}();function tT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var eT=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e}var e,n,r;return e=t,(n=[{key:"run",value:function(t){var e=t.row,n=t.col,r=this.table.cells.getCell(e,n);return H.isUnDef(r)?hO.RETURN_TYPE.JUMP:r.borderAttr.left.display?hO.RETURN_TYPE.EXEC:hO.RETURN_TYPE.JUMP}}])&&tT(e.prototype,n),r&&tT(e,r),t}();function nT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var rT=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e}var e,n,r;return e=t,(n=[{key:"run",value:function(t){var e=t.row,n=t.col,r=this.table.merges.getFirstIncludes(e,n);return r?r.sci===n?hO.RETURN_TYPE.EXEC:hO.RETURN_TYPE.JUMP:hO.RETURN_TYPE.EXEC}}])&&nT(e.prototype,n),r&&nT(e,r),t}();function oT(t){return(oT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cT(t,e){return!e||"object"!==oT(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lT(t){return(lT=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function aT(t,e){return(aT=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var uT=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),cT(this,lT(e).apply(this,arguments))}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&aT(t,e)}(e,t),n=e,(r=[{key:"run",value:function(t){var e=t.row,n=t.col;return this.master({row:e,col:n})&&this.right({row:e,col:n})&&this.left({row:e,col:n})?hO.RETURN_TYPE.EXEC:hO.RETURN_TYPE.JUMP}},{key:"master",value:function(t){var e=t.row,n=t.col,r=this.table,o=r.cells,i=r.cols,c=o.getCell(e,n-1),l=o.getCell(e,n);if(H.isUnDef(l)||H.isBlank(l.text))return!0;var a=l.fontAttr;if(a.direction===al.TEXT_DIRECTION.ANGLE){var u=a.angle;if(r.isAngleBarCell(e,n))return u>0;if(90===u||-90===u)return!0}else if(a.textWrap!==al.TEXT_WRAP.OVER_FLOW)return!0;var s=a.align;return s!==al.ALIGN.right&&s!==al.ALIGN.center||!(r.getCellContentBoundOutWidth(e,n)>i.getWidth(n)&&(H.isUnDef(c)||H.isBlank(c.text)))}},{key:"left",value:function(t){var e=t.row,n=t.col,r=this.table,o=r.cells,i=r.cols,c=r.merges,l=r.xIteratorBuilder,a=o.getCell(e,n),u=!0,s=i.getWidth(n-1);return r.hasAngleCell(e)?l.getColIterator().setBegin(n-1).setEnd(0).setLoop((function(t){var n=o.getCell(e,t);if(H.isUnDef(n))return!0;var i=c.getFirstIncludes(e,t);if(H.isNotUnDef(i))return!0;var l=n.text;if(H.isBlank(l))return!0;var f=n.fontAttr;if(f.direction===al.TEXT_DIRECTION.ANGLE){var h=f.angle;if(r.isAngleBarCell(e,t)){if(h<0)return!0}else{if(90===h||-90===h)return!0;var y=f.align;if(y!==al.ALIGN.left&&y!==al.ALIGN.center)return!0}}else{if(f.textWrap!==al.TEXT_WRAP.OVER_FLOW)return!0;var p=f.align;if(p!==al.ALIGN.left&&p!==al.ALIGN.center)return!0}return!(r.getCellContentBoundOutWidth(e,t)>s&&(H.isUnDef(a)||H.isBlank(a.text))&&(u=!1,1))})).setNext((function(t){s+=i.getWidth(t)})).execute():l.getColIterator().setBegin(n-1).setEnd(0).setLoop((function(t){var n=o.getCell(e,t);if(H.isUnDef(n))return!0;var i=c.getFirstIncludes(e,t);if(H.isNotUnDef(i))return!0;var l=n.text;if(H.isBlank(l))return!0;var f=n.fontAttr;if(f.textWrap!==al.TEXT_WRAP.OVER_FLOW)return!1;var h=f.align;return(h===al.ALIGN.left||h===al.ALIGN.center)&&(r.getCellContentBoundOutWidth(e,t)>s&&(H.isUnDef(a)||H.isBlank(a.text))&&(u=!1),!1)})).setNext((function(t){s+=i.getWidth(t)})).execute(),u}},{key:"right",value:function(t){var e=t.row,n=t.col,r=this.table,o=r.cells,i=r.cols,c=r.merges,l=r.xIteratorBuilder,a=i.len,u=o.getCell(e,n-1),s=o.getCell(e,n),f=!0,h=i.getWidth(n+1)+i.getWidth(n);return r.hasAngleCell(e)?l.getColIterator().setBegin(n+1).setEnd(a).setLoop((function(t){var n=o.getCell(e,t);if(H.isUnDef(n))return!0;var i=c.getFirstIncludes(e,t);if(H.isNotUnDef(i))return!0;var l=n.text;if(H.isBlank(l))return!0;var a=n.fontAttr;if(a.direction===al.TEXT_DIRECTION.ANGLE){var y=a.angle;if(r.isAngleBarCell(e,t)){if(y>0)return!0}else{if(90===y||-90===y)return!0;var p=a.align;if(p!==al.ALIGN.right&&p!==al.ALIGN.center)return!0}}else{if(a.textWrap!==al.TEXT_WRAP.OVER_FLOW)return!0;var b=a.align;if(b!==al.ALIGN.right&&b!==al.ALIGN.center)return!0}if(r.getCellContentBoundOutWidth(e,t)>h){var d=H.isUnDef(s)||H.isBlank(s.text),v=H.isUnDef(u)||H.isBlank(u.text);if(d&&v)return f=!1,!1}return!0})).setNext((function(t){h+=i.getWidth(t)})).execute():l.getColIterator().setBegin(n+1).setEnd(a).setLoop((function(t){var n=o.getCell(e,t);if(H.isUnDef(n))return!0;var i=c.getFirstIncludes(e,t);if(H.isNotUnDef(i))return!0;var l=n.text;if(H.isBlank(l))return!0;var a=n.fontAttr;if(a.textWrap!==al.TEXT_WRAP.OVER_FLOW)return!1;var y=a.align;if(y!==al.ALIGN.right&&y!==al.ALIGN.center)return!1;if(r.getCellContentBoundOutWidth(e,t)>h){var p=H.isUnDef(s)||H.isBlank(s.text),b=H.isUnDef(u)||H.isBlank(u.text);p&&b&&(f=!1)}return!1})).setNext((function(t){h+=i.getWidth(t)})).execute(),f}}])&&iT(n.prototype,r),o&&iT(n,o),e}(_O);function sT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var fT=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e}var e,n,r;return e=t,(n=[{key:"run",value:function(t){var e=t.row,n=t.col,r=this.table;return r.isAngleBarCell(e,n)||r.isAngleBarCell(e,n-1)?hO.RETURN_TYPE.JUMP:hO.RETURN_TYPE.EXEC}}])&&sT(e.prototype,n),r&&sT(e,r),t}();function hT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var yT=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e}var e,n,r;return e=t,(n=[{key:"run",value:function(t){var e=t.row,n=t.col,r=this.table;return r.isAngleBarCell(e,n)||r.isAngleBarCell(e,n+1)?hO.RETURN_TYPE.JUMP:hO.RETURN_TYPE.EXEC}}])&&hT(e.prototype,n),r&&hT(e,r),t}();function pT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var bT=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e}var e,n,r;return e=t,(n=[{key:"run",value:function(t){var e=t.row,n=t.col,r=this.table;return r.isAngleBarCell(e,n)||r.isAngleBarCell(e-1,n)?hO.RETURN_TYPE.JUMP:hO.RETURN_TYPE.EXEC}}])&&pT(e.prototype,n),r&&pT(e,r),t}();function dT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var vT=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e}var e,n,r;return e=t,(n=[{key:"run",value:function(t){var e=t.row,n=t.col,r=this.table;return r.isAngleBarCell(e,n)||r.isAngleBarCell(e+1,n)?hO.RETURN_TYPE.JUMP:hO.RETURN_TYPE.EXEC}}])&&dT(e.prototype,n),r&&dT(e,r),t}();function gT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var wT=function(){function t(e){var n=e.table,r=e.bx,o=void 0===r?0:r,i=e.by,c=void 0===i?0:i,l=e.optimize,a=void 0===l||l;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.optimize=a,this.table=n,this.lLine=[],this.tLine=[],this.rLine=[],this.bLine=[],this.bx=o,this.by=c}var e,n,r;return e=t,(n=[{key:"offsetX",value:function(t){var e=t.sx,n=t.ex,r=t.row,o=t.col,i=this.table.cells,c=i.getCell(r,o-1),l=i.getCell(r,o+1),a=e,u=n;return c&&c.borderAttr.top.display&&(a-=c.rightSdistWidth),l&&l.borderAttr.top.display&&(u+=l.leftSdistWidth),{osx:a,oex:u}}},{key:"getBItem",value:function(){var t=this,e=this.table,n=this.bx,r=this.by,o=this.optimize,i=e.cols,c=e.rows,l=e.cells,a=[],u={},s=new DO;return new dO({newRow:function(t){var e=t.row,o=t.y,i=c.getHeight(e);u.sx=n,u.sy=r+o+i,u.ex=u.sx,u.ey=u.sy},filter:new hO({logic:hO.FILTER_LOGIC.AND,stack:[new WO(e),new YO(e),new EO(e),new vT(e)]}),exec:function(t){var e=t.row,n=t.col,r=i.getWidth(n),o=l.getCell(e,n).borderAttr;u.ex+=r;var c=u.sx,s=u.sy,f=u.ex,h=u.ey;a.push({sx:c,sy:s,ex:f,ey:h,row:e,col:n,borderAttr:o}),u.sx=u.ex},jump:function(t){var e=t.col,n=i.getWidth(e);u.sx=u.ex+n,u.ex=u.sx},complete:function(){t.bLine=o?s.hbJoin(a):a}})}},{key:"getTItem",value:function(){var t=this,e=this.table,n=this.bx,r=this.by,o=this.optimize,i=e.cols,c=e.cells,l=[],a={},u=new DO;return new dO({newRow:function(t){var e=t.y;a.sx=n,a.sy=r+e,a.ex=a.sx,a.ey=a.sy},filter:new hO({logic:hO.FILTER_LOGIC.AND,stack:[new FO(e),new GO(e),new XO(e),new bT(e)]}),exec:function(e){var n=e.row,r=e.col,o=i.getWidth(r),u=c.getCell(n,r).borderAttr;a.ex+=o;var s=a.sx,f=a.sy,h=a.ex,y=a.ey,p=t.offsetX({sx:s,ex:h,row:n,col:r}),b=p.osx,d=p.oex;l.push({sx:b,sy:f,ex:d,ey:y,row:n,col:r,borderAttr:u}),a.sx=a.ex},jump:function(t){var e=t.col,n=i.getWidth(e);a.sx=a.ex+n,a.ex=a.sx},complete:function(){t.tLine=o?u.htJoin(l):l}})}},{key:"getRItem",value:function(){var t=this,e=this.table,n=this.bx,r=this.by,o=this.optimize,i=e.cols,c=e.rows,l=e.cells,a=e.xIteratorBuilder,u=[],s=new DO(a);return new dO({newCol:function(t){var e=t.col,o=t.x,c=i.getWidth(e),l=n+o+c,a=r,s=l,f=a;u[e]={sx:l,sy:a,ex:s,ey:f,rLine:[]}},filter:new hO({logic:hO.FILTER_LOGIC.AND,stack:[new JO(e),new $O(e),new xO(e),new yT(e),new jO(e)]}),exec:function(t){var e=t.row,n=t.col,r=c.getHeight(e),o=l.getCell(e,n),i=u[n],a=o.borderAttr;i.ey+=r;var s=i.sx,f=i.sy,h=i.ex,y=i.ey;i.rLine.push({sx:s,sy:f,ex:h,ey:y,row:e,col:n,borderAttr:a}),i.sy=i.ey},jump:function(t){var e=t.row,n=t.col,r=c.getHeight(e),o=u[n];o.sy=o.ey+r,o.ey=o.sy},complete:function(){for(var e=[],n=0;n<u.length;n++){var r=u[n];r&&(e=o?e.concat(s.vrJoin(r.rLine)):e.concat(r.rLine))}t.rLine=e}})}},{key:"getLItem",value:function(){var t=this,e=this.table,n=this.bx,r=this.by,o=this.optimize,i=e.rows,c=e.cells,l=e.xIteratorBuilder,a=[],u=new DO(l);return new dO({newCol:function(t){var e=t.col,o=t.x,i=n+o,c=r,l=i,u=c;a[e]={sx:i,sy:c,ex:l,ey:u,lLine:[]}},filter:new hO({logic:hO.FILTER_LOGIC.AND,stack:[new eT(e),new QO(e),new rT(e),new fT(e),new uT(e)]}),exec:function(t){var e=t.row,n=t.col,r=a[n],o=c.getCell(e,n),l=i.getHeight(e),u=o.borderAttr;r.ey+=l;var s=r.sx,f=r.sy,h=r.ex,y=r.ey;r.lLine.push({sx:s,sy:f,ex:h,ey:y,row:e,col:n,borderAttr:u}),r.sy=r.ey},jump:function(t){var e=t.row,n=t.col,r=i.getHeight(e),o=a[n];o.sy=o.ey+r,o.ey=o.sy},complete:function(){for(var e=[],n=0;n<a.length;n++){var r=a[n];r&&(e=o?e.concat(u.vlJoin(r.lLine)):e.concat(r.lLine))}t.lLine=e}})}},{key:"getItems",value:function(){return[this.getBItem(),this.getTItem(),this.getRItem(),this.getLItem()]}},{key:"getResult",value:function(){return{rLine:this.rLine,bLine:this.bLine,lLine:this.lLine,tLine:this.tLine}}}])&&gT(e.prototype,n),r&&gT(e,r),t}();function ET(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var mT=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e}var e,n,r;return e=t,(n=[{key:"run",value:function(t){var e=t.row,n=t.col;return this.table.isAngleBarCell(e,n)?hO.RETURN_TYPE.EXEC:hO.RETURN_TYPE.JUMP}}])&&ET(e.prototype,n),r&&ET(e,r),t}();function OT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var TT=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e}var e,n,r;return e=t,(n=[{key:"run",value:function(t){var e=t.row;return this.table.hasAngleCell(e)?hO.RETURN_TYPE.EXEC:hO.RETURN_TYPE.JUMP}}])&&OT(e.prototype,n),r&&OT(e,r),t}();function xT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var _T=function(){function t(e){var n=e.table,r=e.bx,o=void 0===r?0:r,i=e.by,c=void 0===i?0:i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=n,this.lLine=[],this.tLine=[],this.rLine=[],this.bLine=[],this.bx=o,this.by=c}var e,n,r;return e=t,(n=[{key:"offsetX",value:function(t){var e=t.sx,n=t.ex,r=t.row,o=t.col,i=this.table.cells.getCell(r,o);return i.fontAttr.angle>0?(e+=i.leftSdistWidth,n+=i.leftSdistWidth):(e-=i.rightSdistWidth,n-=i.rightSdistWidth),{osx:e,oex:n}}},{key:"getBItem",value:function(){var t=this,e=this.bx,n=this.by,r=this.table,o=r.cols,i=r.rows,c=r.cells,l=[],a={};return new dO({newRow:function(t){var r=t.row,o=t.y,c=i.getHeight(r);a.sx=e,a.sy=n+o+c,a.ex=a.sx,a.ey=a.sy},filter:new hO({logic:hO.FILTER_LOGIC.AND,stack:[new TT(r),new WO(r),new mT(r),new YO(r),new EO(r)]}),exec:function(t){var e=t.row,n=t.col,r=o.getWidth(n),i=c.getCell(e,n).borderAttr;a.ex+=r;var u=a.sx,s=a.sy,f=a.ex,h=a.ey;l.push({sx:u,sy:s,ex:f,ey:h,row:e,col:n,borderAttr:i}),a.sx=a.ex},jump:function(t){var e=t.col,n=o.getWidth(e);a.sx=a.ex+n,a.ex=a.sx},complete:function(){t.bLine=l}})}},{key:"getTItem",value:function(){var t=this,e=this.table,n=this.bx,r=this.by,o=e.cols,i=e.cells,c=[],l={};return new dO({newRow:function(t){var e=t.y;l.sx=n,l.sy=r+e,l.ex=l.sx,l.ey=l.sy},filter:new hO({logic:hO.FILTER_LOGIC.AND,stack:[new TT(e),new FO(e),new mT(e),new GO(e),new XO(e)]}),exec:function(e){var n=e.row,r=e.col,a=o.getWidth(r),u=i.getCell(n,r).borderAttr;l.ex+=a;var s=l.sx,f=l.sy,h=l.ex,y=l.ey,p=t.offsetX({row:n,col:r,sx:s,ex:h}),b=p.osx,d=p.oex;c.push({sx:b,sy:f,ex:d,ey:y,row:n,col:r,borderAttr:u}),l.sx=l.ex},jump:function(t){var e=t.col,n=o.getWidth(e);l.sx=l.ex+n,l.ex=l.sx},complete:function(){t.tLine=c}})}},{key:"getRItem",value:function(){var t=this,e=this.bx,n=this.by,r=this.table,o=r.cols,i=r.rows,c=r.cells,l=[];return new dO({newCol:function(t){var r=t.col,i=t.x,c=o.getWidth(r),a=e+i+c,u=n,s=a,f=u;l[r]={sx:a,sy:u,ex:s,ey:f,rLine:[]}},filter:new hO({logic:hO.FILTER_LOGIC.AND,stack:[new TT(r),new JO(r),new mT(r),new $O(r),new xO(r)]}),exec:function(e){var n=e.row,r=e.col,o=i.getHeight(n),a=c.getCell(n,r),u=l[r],s=a.borderAttr;u.ey+=o;var f=u.sx,h=u.sy,y=u.ex,p=u.ey,b=u.rLine,d=t.offsetX({row:n,col:r,sx:f,ex:y}).osx;b.push({sx:d,sy:h,ex:y,ey:p,row:n,col:r,borderAttr:s}),u.sy=u.ey},jump:function(t){var e=t.row,n=t.col,r=i.getHeight(e),o=l[n];o.sy=o.ey+r,o.ey=o.sy},complete:function(){for(var e=[],n=0;n<l.length;n++){var r=l[n];r&&(e=e.concat(r.rLine))}t.rLine=e}})}},{key:"getLItem",value:function(){var t=this,e=this.bx,n=this.by,r=this.table,o=r.rows,i=r.cells,c=[];return new dO({newCol:function(t){var r=t.col,o=t.x,i=e+o,l=n,a=i,u=l;c[r]={sx:i,sy:l,ex:a,ey:u,lLine:[]}},filter:new hO({logic:hO.FILTER_LOGIC.AND,stack:[new TT(r),new eT(r),new mT(r),new QO(r),new rT(r)]}),exec:function(e){var n=e.row,r=e.col,l=c[r],a=i.getCell(n,r),u=o.getHeight(n),s=a.borderAttr;l.ey+=u;var f=l.sx,h=l.sy,y=l.ex,p=l.ey,b=l.lLine,d=t.offsetX({row:n,col:r,sx:f,ex:y}).osx;b.push({sx:d,sy:h,ex:y,ey:p,row:n,col:r,borderAttr:s}),l.sy=l.ey},jump:function(t){var e=t.row,n=t.col,r=o.getHeight(e),i=c[n];i.sy=i.ey+r,i.ey=i.sy},complete:function(){for(var e=[],n=0;n<c.length;n++){var r=c[n];r&&(e=e.concat(r.lLine))}t.lLine=e}})}},{key:"getItems",value:function(){return[this.getBItem(),this.getTItem(),this.getRItem(),this.getLItem()]}},{key:"getResult",value:function(){return{rLine:this.rLine,bLine:this.bLine,lLine:this.lLine,tLine:this.tLine}}}])&&xT(e.prototype,n),r&&xT(e,r),t}();function ST(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var kT=function(){function t(e){var n=e.getWidth,r=e.getHeight,o=e.bx,i=void 0===o?0:o,c=e.by,l=void 0===c?0:c;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.getHeight=r,this.getWidth=n,this.bx=i,this.by=l,this.bLine=[],this.rLine=[]}var e,n,r;return e=t,(n=[{key:"getBItem",value:function(){var t=this,e=this.bx,n=this.by,r=this.getWidth,o=this.getHeight,i={},c=[];return new dO({newRow:function(t){var r=t.row,c=t.y,l=o(r);i.sx=e,i.sy=n+c+l,i.ex=i.sx,i.ey=i.sy,i.breakpoint=!1},endRow:function(){if(i.breakpoint){var t=i.sx,e=i.sy,n=i.ex,r=i.ey;c.push({sx:t,sy:e,ex:n,ey:r})}},filter:new hO({logic:hO.FILTER_LOGIC.AND,stack:[]}),exec:function(t){var e=t.col,n=r(e);i.breakpoint=!0,i.ex+=n},jump:function(t){var e=t.col;if(i.breakpoint){var n=i.sx,o=i.sy,l=i.ex,a=i.ey;i.breakpoint=!1,c.push({sx:n,sy:o,ex:l,ey:a})}var u=r(e);i.sx=i.ex+u,i.ex=i.sx},complete:function(){t.bLine=c}})}},{key:"getRItem",value:function(){var t=this,e=this.bx,n=this.by,r=this.getWidth,o=this.getHeight,i=[],c=[];return new dO({newCol:function(t){var o=t.col,c=t.x,l=r(o),a=e+c+l,u=n,s=a,f=u;i[o]={sx:a,sy:u,ex:s,ey:f,breakpoint:!1}},endCol:function(t){var e=t.col,n=i[e];if(n.breakpoint){var r=n.sx,o=n.sy,l=n.ex,a=n.ey;c.push({sx:r,sy:o,ex:l,ey:a})}},filter:new hO({logic:hO.FILTER_LOGIC.AND,stack:[]}),exec:function(t){var e=t.row,n=t.col,r=i[n],c=o(e);r.breakpoint=!0,r.ey+=c},jump:function(t){var e=t.row,n=t.col,r=i[n],l=o(e);if(r.breakpoint){var a=r.sx,u=r.sy,s=r.ex,f=r.ey;r.breakpoint=!1,c.push({sx:a,sy:u,ex:s,ey:f})}r.sy=r.ey+l,r.ey=r.sy},complete:function(){t.rLine=c}})}},{key:"getItems",value:function(){return[this.getBItem(),this.getRItem()]}},{key:"getResult",value:function(){return{bLine:this.bLine,rLine:this.rLine}}}])&&ST(e.prototype,n),r&&ST(e,r),t}();function CT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var PT=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e,this.maxWidth=0}var e,n,r;return e=t,(n=[{key:"run",value:function(t){var e=t.row,n=t.col,r=this.table,o=r.cols.getWidth(n);if(this.maxWidth+=o,!r.isAngleBarCell(e,n))return hO.RETURN_TYPE.JUMP;if(r.cells.getCell(e,n).fontAttr.angle<0)return hO.RETURN_TYPE.JUMP;var i=r.getCellContentBoundOutWidth(e,n);return 0===i||i>this.maxWidth?hO.RETURN_TYPE.EXEC:hO.RETURN_TYPE.JUMP}}])&&CT(e.prototype,n),r&&CT(e,r),t}();function RT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var jT=function(){function t(e){var n=e.table,r=e.bx,o=void 0===r?0:r,i=e.by,c=void 0===i?0:i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=n,this.lLine=[],this.tLine=[],this.rLine=[],this.bLine=[],this.bx=o,this.by=c}var e,n,r;return e=t,(n=[{key:"offsetX",value:function(t){var e=t.sx,n=t.ex,r=t.row,o=t.col,i=this.table.cells.getCell(r,o);return i.fontAttr.angle>0?(e+=i.leftSdistWidth,n+=i.leftSdistWidth):(e-=i.rightSdistWidth,n-=i.rightSdistWidth),{osx:e,oex:n}}},{key:"getBItem",value:function(){var t=this,e=this.bx,n=this.by,r=this.table,o=r.cols,i=r.rows,c=r.cells,l=[],a={};return new dO({newRow:function(t){var r=t.row,o=t.y,c=i.getHeight(r);a.sx=e,a.sy=n+o+c,a.ex=a.sx,a.ey=a.sy},filter:new hO({logic:hO.FILTER_LOGIC.AND,stack:[new TT(r),new WO(r),new mT(r),new YO(r),new EO(r),new PT(r)]}),exec:function(t){var e=t.row,n=t.col,r=o.getWidth(n),i=c.getCell(e,n).borderAttr;a.ex+=r;var u=a.sx,s=a.sy,f=a.ex,h=a.ey;l.push({sx:u,sy:s,ex:f,ey:h,row:e,col:n,borderAttr:i}),a.sx=a.ex},jump:function(t){var e=t.col,n=o.getWidth(e);a.sx=a.ex+n,a.ex=a.sx},complete:function(){t.bLine=l}})}},{key:"getTItem",value:function(){var t=this,e=this.table,n=this.bx,r=this.by,o=e.cols,i=e.cells,c=[],l={};return new dO({newRow:function(t){var e=t.y;l.sx=n,l.sy=r+e,l.ex=l.sx,l.ey=l.sy},filter:new hO({logic:hO.FILTER_LOGIC.AND,stack:[new TT(e),new FO(e),new mT(e),new GO(e),new XO(e),new PT(e)]}),exec:function(e){var n=e.row,r=e.col,a=o.getWidth(r),u=i.getCell(n,r).borderAttr;l.ex+=a;var s=l.sx,f=l.sy,h=l.ex,y=l.ey,p=t.offsetX({row:n,col:r,sx:s,ex:h}),b=p.osx,d=p.oex;c.push({sx:b,sy:f,ex:d,ey:y,row:n,col:r,borderAttr:u}),l.sx=l.ex},jump:function(t){var e=t.col,n=o.getWidth(e);l.sx=l.ex+n,l.ex=l.sx},complete:function(){t.tLine=c}})}},{key:"getRItem",value:function(){var t=this,e=this.bx,n=this.by,r=this.table,o=r.cols,i=r.rows,c=r.cells,l=[];return new dO({newCol:function(t){var r=t.col,i=t.x,c=o.getWidth(r),a=e+i+c,u=n,s=a,f=u;l[r]={sx:a,sy:u,ex:s,ey:f,rLine:[]}},filter:new hO({logic:hO.FILTER_LOGIC.AND,stack:[new TT(r),new JO(r),new mT(r),new $O(r),new xO(r),new PT(r)]}),exec:function(e){var n=e.row,r=e.col,o=i.getHeight(n),a=c.getCell(n,r),u=l[r],s=a.borderAttr;u.ey+=o;var f=u.sx,h=u.sy,y=u.ex,p=u.ey,b=u.rLine,d=t.offsetX({row:n,col:r,sx:f,ex:y}).osx;b.push({sx:d,sy:h,ex:y,ey:p,row:n,col:r,borderAttr:s}),u.sy=u.ey},jump:function(t){var e=t.row,n=t.col,r=i.getHeight(e),o=l[n];o.sy=o.ey+r,o.ey=o.sy},complete:function(){for(var e=[],n=0;n<l.length;n++){var r=l[n];r&&(e=e.concat(r.rLine))}t.rLine=e}})}},{key:"getLItem",value:function(){var t=this,e=this.bx,n=this.by,r=this.table,o=r.rows,i=r.cells,c=[];return new dO({newCol:function(t){var r=t.col,o=t.x,i=e+o,l=n,a=i,u=l;c[r]={sx:i,sy:l,ex:a,ey:u,lLine:[]}},filter:new hO({logic:hO.FILTER_LOGIC.AND,stack:[new TT(r),new eT(r),new mT(r),new QO(r),new rT(r),new PT(r)]}),exec:function(e){var n=e.row,r=e.col,l=c[r],a=i.getCell(n,r),u=o.getHeight(n),s=a.borderAttr;l.ey+=u;var f=l.sx,h=l.sy,y=l.ex,p=l.ey,b=l.lLine,d=t.offsetX({row:n,col:r,sx:f,ex:y}).osx;b.push({sx:d,sy:h,ex:y,ey:p,row:n,col:r,borderAttr:s}),l.sy=l.ey},jump:function(t){var e=t.row,n=t.col,r=o.getHeight(e),i=c[n];i.sy=i.ey+r,i.ey=i.sy},complete:function(){for(var e=[],n=0;n<c.length;n++){var r=c[n];r&&(e=e.concat(r.lLine))}t.lLine=e}})}},{key:"getItems",value:function(){return[this.getBItem(),this.getTItem(),this.getRItem(),this.getLItem()]}},{key:"getResult",value:function(){return{rLine:this.rLine,bLine:this.bLine,lLine:this.lLine,tLine:this.tLine}}}])&&RT(e.prototype,n),r&&RT(e,r),t}();function LT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var IT=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e,this.maxWidth=0}var e,n,r;return e=t,(n=[{key:"run",value:function(t){var e=t.row,n=t.col,r=this.table,o=r.cols.getWidth(n);if(this.maxWidth+=o,!r.isAngleBarCell(e,n))return hO.RETURN_TYPE.JUMP;if(r.cells.getCell(e,n).fontAttr.angle>0)return hO.RETURN_TYPE.JUMP;var i=r.getCellContentBoundOutWidth(e,n);return 0===i||i>this.maxWidth?hO.RETURN_TYPE.EXEC:hO.RETURN_TYPE.JUMP}}])&&LT(e.prototype,n),r&&LT(e,r),t}();function AT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var NT=function(){function t(e){var n=e.table,r=e.bx,o=void 0===r?0:r,i=e.by,c=void 0===i?0:i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=n,this.lLine=[],this.tLine=[],this.rLine=[],this.bLine=[],this.bx=o,this.by=c}var e,n,r;return e=t,(n=[{key:"offsetX",value:function(t){var e=t.sx,n=t.ex,r=t.row,o=t.col,i=this.table.cells.getCell(r,o);return i.fontAttr.angle>0?(e+=i.leftSdistWidth,n+=i.leftSdistWidth):(e-=i.rightSdistWidth,n-=i.rightSdistWidth),{osx:e,oex:n}}},{key:"getBItem",value:function(){var t=this,e=this.bx,n=this.by,r=this.table,o=r.cols,i=r.rows,c=r.cells,l=[],a={};return new dO({newRow:function(t){var r=t.row,o=t.y,c=i.getHeight(r);a.sx=e,a.sy=n+o+c,a.ex=a.sx,a.ey=a.sy},filter:new hO({logic:hO.FILTER_LOGIC.AND,stack:[new TT(r),new WO(r),new mT(r),new YO(r),new EO(r),new IT(r)]}),exec:function(t){var e=t.row,n=t.col,r=o.getWidth(n),i=c.getCell(e,n).borderAttr;a.ex+=r;var u=a.sx,s=a.sy,f=a.ex,h=a.ey;l.push({sx:u,sy:s,ex:f,ey:h,row:e,col:n,borderAttr:i}),a.sx=a.ex},jump:function(t){var e=t.col,n=o.getWidth(e);a.sx=a.ex+n,a.ex=a.sx},complete:function(){t.bLine=l}})}},{key:"getTItem",value:function(){var t=this,e=this.table,n=this.bx,r=this.by,o=e.cols,i=e.cells,c=[],l={};return new dO({newRow:function(t){var e=t.y;l.sx=n,l.sy=r+e,l.ex=l.sx,l.ey=l.sy},filter:new hO({logic:hO.FILTER_LOGIC.AND,stack:[new TT(e),new FO(e),new mT(e),new GO(e),new XO(e),new IT(e)]}),exec:function(e){var n=e.row,r=e.col,a=o.getWidth(r),u=i.getCell(n,r).borderAttr;l.ex+=a;var s=l.sx,f=l.sy,h=l.ex,y=l.ey,p=t.offsetX({row:n,col:r,sx:s,ex:h}),b=p.osx,d=p.oex;c.push({sx:b,sy:f,ex:d,ey:y,row:n,col:r,borderAttr:u}),l.sx=l.ex},jump:function(t){var e=t.col,n=o.getWidth(e);l.sx=l.ex+n,l.ex=l.sx},complete:function(){t.tLine=c}})}},{key:"getRItem",value:function(){var t=this,e=this.bx,n=this.by,r=this.table,o=r.cols,i=r.rows,c=r.cells,l=[];return new dO({newCol:function(t){var r=t.col,i=t.x,c=o.getWidth(r),a=e+i+c,u=n,s=a,f=u;l[r]={sx:a,sy:u,ex:s,ey:f,rLine:[]}},filter:new hO({logic:hO.FILTER_LOGIC.AND,stack:[new TT(r),new JO(r),new mT(r),new $O(r),new xO(r),new IT(r)]}),exec:function(e){var n=e.row,r=e.col,o=i.getHeight(n),a=c.getCell(n,r),u=l[r],s=a.borderAttr;u.ey+=o;var f=u.sx,h=u.sy,y=u.ex,p=u.ey,b=u.rLine,d=t.offsetX({row:n,col:r,sx:f,ex:y}).osx;b.push({sx:d,sy:h,ex:y,ey:p,row:n,col:r,borderAttr:s}),u.sy=u.ey},jump:function(t){var e=t.row,n=t.col,r=i.getHeight(e),o=l[n];o.sy=o.ey+r,o.ey=o.sy},complete:function(){for(var e=[],n=0;n<l.length;n++){var r=l[n];r&&(e=e.concat(r.rLine))}t.rLine=e}})}},{key:"getLItem",value:function(){var t=this,e=this.bx,n=this.by,r=this.table,o=r.rows,i=r.cells,c=[];return new dO({newCol:function(t){var r=t.col,o=t.x,i=e+o,l=n,a=i,u=l;c[r]={sx:i,sy:l,ex:a,ey:u,lLine:[]}},filter:new hO({logic:hO.FILTER_LOGIC.AND,stack:[new TT(r),new eT(r),new mT(r),new QO(r),new rT(r),new IT(r)]}),exec:function(e){var n=e.row,r=e.col,l=c[r],a=i.getCell(n,r),u=o.getHeight(n),s=a.borderAttr;l.ey+=u;var f=l.sx,h=l.sy,y=l.ex,p=l.ey,b=l.lLine,d=t.offsetX({row:n,col:r,sx:f,ex:y}).osx;b.push({sx:d,sy:h,ex:y,ey:p,row:n,col:r,borderAttr:s}),l.sy=l.ey},jump:function(t){var e=t.row,n=t.col,r=o.getHeight(e),i=c[n];i.sy=i.ey+r,i.ey=i.sy},complete:function(){for(var e=[],n=0;n<c.length;n++){var r=c[n];r&&(e=e.concat(r.lLine))}t.lLine=e}})}},{key:"getItems",value:function(){return[this.getBItem(),this.getTItem(),this.getRItem(),this.getLItem()]}},{key:"getResult",value:function(){return{rLine:this.rLine,bLine:this.bLine,lLine:this.lLine,tLine:this.tLine}}}])&&AT(e.prototype,n),r&&AT(e,r),t}();function VT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var DT=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"run",value:function(e){var n=e.optimize,r=void 0===n||n,o=e.scrollView,i=e.foldOnOff,c=e.table,l=e.by,a=void 0===l?0:l,u=e.bx,s=void 0===u?0:u,f=e.getHeight,h=void 0===f?function(t){return c.rows.getHeight(t)}:f,y=e.getWidth,p=void 0===y?function(t){return c.cols.getWidth(t)}:y,b=e.model;switch(void 0===b?t.MODEL.ALL:b){case t.MODEL.BORDER:var d=new wT({table:c,bx:s,by:a,optimize:r}),v=new _T({table:c,bx:s,by:a});return new pO({items:d.getItems().concat(v.getItems()),view:o,table:c,foldOnOff:i}).run(),{bResult:d.getResult(),aResult:v.getResult()};case t.MODEL.ALL:var g=new wT({table:c,bx:s,by:a,optimize:r}),w=new NO({table:c,bx:s,by:a,getWidth:p,getHeight:h}),E=new _T({table:c,bx:s,by:a});return new pO({items:g.getItems().concat(w.getItems()).concat(E.getItems()),foldOnOff:i,table:c,view:o}).run(),{gResult:w.getResult(),bResult:g.getResult(),aResult:E.getResult()};case t.MODEL.INDEX:var m=new kT({bx:s,by:a,getWidth:p,getHeight:h});return new pO({items:m.getItems(),foldOnOff:i,table:c,view:o}).run(),{iResult:m.getResult()};case t.MODEL.GRID:var O=new NO({table:c,bx:s,by:a,getWidth:p,getHeight:h});return new pO({items:O.getItems(),foldOnOff:i,table:c,view:o}).run(),{gResult:O.getResult()};case t.MODEL.OUT_ANGLE_BAR_L:var T=new jT({table:c,bx:s,by:a});return new pO({items:T.getItems(),foldOnOff:i,table:c,view:o}).run(),{alResult:T.getResult()};case t.MODEL.OUT_ANGLE_BAR_R:var x=new NT({table:c,bx:s,by:a});return new pO({items:x.getItems(),foldOnOff:i,table:c,view:o}).run(),{arResult:x.getResult()}}return null}}],(n=null)&&VT(e.prototype,n),r&&VT(e,r),t}();function MT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}DT.MODEL={BORDER:1,ALL:3,GRID:2,INDEX:4,OUT_ANGLE_BAR_L:5,OUT_ANGLE_BAR_R:6};var WT=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.xTableData=e}var e,n,r;return e=t,(n=[{key:"set",value:function(t,e,n){this.xTableData.getOrNew(t,e).setMergeId(n)}},{key:"get",value:function(t,e){var n=this.xTableData.get(t,e);return n?n.getMergeId():void 0}},{key:"clear",value:function(t,e){var n=this.xTableData.get(t,e);n&&n.setMergeId(null)}}])&&MT(e.prototype,n),r&&MT(e,r),t}();function BT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var YT=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.no=e}var e,n,r;return e=t,(n=[{key:"setNo",value:function(t){this.no=t}}])&&BT(e.prototype,n),r&&BT(e,r),t}();function HT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var FT=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.nos=[]}var e,n,r;return e=t,(n=[{key:"getNo",value:function(t){return this.nos[t]?this.nos[t]:(this.nos[t]=new YT(t),this.nos[t])}}])&&HT(e.prototype,n),r&&HT(e,r),t}();function UT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var GT=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.recovery=[],this.items=[]}var e,n,r;return e=t,(n=[{key:"get",value:function(t){return this.items[t]}},{key:"add",value:function(t){var e=this.recovery.pop();return e?(this.items[e]=t,e):(this.items.push(t),this.items.length-1)}},{key:"clear",value:function(t){this.items[t]=null,this.recovery.push(t)}},{key:"getItems",value:function(){return this.items}}])&&UT(e.prototype,n),r&&UT(e,r),t}();function zT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var XT=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.nos=[]}var e,n,r;return e=t,(n=[{key:"getNo",value:function(t){return this.nos[t]?this.nos[t]:(this.nos[t]=new YT(t),this.nos[t])}}])&&zT(e.prototype,n),r&&zT(e,r),t}();function ZT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var JT=function(){function t(e,n,r,o,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sri=e,this.sci=n,this.eri=r,this.eci=o,this.view=i}var e,n,r;return e=t,(n=[{key:"getView",value:function(){return this.view.set(this.sri.no,this.sci.no,this.eri.no,this.eci.no),this.view}}])&&ZT(e.prototype,n),r&&ZT(e,r),t}();function KT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var $T=function(){function t(e){var n=this,r=e.merges,o=void 0===r?[]:r,i=e.xTableData,c=e.xIteratorBuilder;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.xMergesNoRow=new FT,this.xMergesNoCol=new XT,this.xMergesIndex=new WT(i),this.xMergesItems=new GT,this.xIteratorBuilder=c,o.map((function(t){return ss.valueOf(t)})).forEach((function(t){return n.add(t)}))}var e,n,r;return e=t,(n=[{key:"getIncludes",value:function(t,e){var n=this;t.each(this.xIteratorBuilder,(function(t,r){var o=n.getFirstIncludes(t,r);o&&e(o)}))}},{key:"getFirstIncludes",value:function(t,e){var n=this.xMergesIndex.get(t,e);if(H.isUnDef(n))return H.Undef;var r=this.xMergesItems.get(n);return H.isUnDef(r)?H.Undef:this.xMergesItems.get(n).getView()}},{key:"add",value:function(t){var e=this,n=this.xMergesNoRow.getNo(t.sri),r=this.xMergesNoCol.getNo(t.sci),o=this.xMergesNoRow.getNo(t.eri),i=this.xMergesNoCol.getNo(t.eci),c=this.xMergesItems.add(new JT(n,r,o,i,t));t.each(this.xIteratorBuilder,(function(t,n){e.xMergesIndex.set(t,n,c)}))}},{key:"union",value:function(t){var e=this,n=t.brink(),r=n.top,o=n.right,i=n.left,c=n.bottom,l=null;return r.each(this.xIteratorBuilder,(function(n,r){var o=e.getFirstIncludes(n,r);return!!H.isUnDef(o)||!!t.contains(o)||(l=o,!1)})),l?this.union(l.union(t)):(o.each(this.xIteratorBuilder,(function(n,r){var o=e.getFirstIncludes(n,r);return!!H.isUnDef(o)||!!t.contains(o)||(l=o,!1)})),l?this.union(l.union(t)):(i.each(this.xIteratorBuilder,(function(n,r){var o=e.getFirstIncludes(n,r);return!!H.isUnDef(o)||!!t.contains(o)||(l=o,!1)})),l?this.union(l.union(t)):(c.each(this.xIteratorBuilder,(function(n,r){var o=e.getFirstIncludes(n,r);return!!H.isUnDef(o)||!!t.contains(o)||(l=o,!1)})),l?this.union(l.union(t)):t)))}},{key:"delete",value:function(t){var e=this,n=this.xMergesIndex.get(t.sri,t.sci);t.each(this.xIteratorBuilder,(function(t,n){e.xMergesIndex.clear(t,n)})),this.xMergesItems.clear(n)}},{key:"getData",value:function(){var t=[];return this.xMergesItems.getItems().forEach((function(e){e&&t.push(e.getView().toString())})),t}}])&&KT(e.prototype,n),r&&KT(e,r),t}();function qT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var QT=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cell=e,this.mergeId=n}var e,n,r;return e=t,(n=[{key:"setCell",value:function(t){this.cell=t}},{key:"setMergeId",value:function(t){this.mergeId=t}},{key:"getCell",value:function(){return this.cell}},{key:"getMergeId",value:function(){return this.mergeId}}])&&qT(e.prototype,n),r&&qT(e,r),t}();function tx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ex=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.items=e,this.canWrapAll=!0}var e,n,r;return e=t,(n=[{key:"wrap",value:function(t,e){var n=t[e];if(n instanceof QT)return n;var r=new QT;return H.isString(n)?r.setCell(new Bu({text:n})):r.setCell(new Bu(n)),t[e]=r,r}},{key:"wrapAll",value:function(){if(this.canWrapAll){var t=this.items;this.canWrapAll=!1;for(var e=0,n=t.length;e<n;e++){var r=t[e];if(r)for(var o=0,i=r.length;o<i;o++)r[o]&&this.wrap(r,o)}}}},{key:"set",value:function(t,e,n){var r=this.items[t]||[];r[e]=n,this.items[t]=r}},{key:"getItems",value:function(){return this.items}},{key:"get",value:function(t,e){var n=this.items[t];return n&&n[e]?this.wrap(n,e):void 0}},{key:"setOrNew",value:function(t,e,n){var r=this.items[t];r&&(r[e]=n)}},{key:"getOrNew",value:function(t,e){var n=this.get(t,e);if(n)return n;var r=new QT;return this.set(t,e,r),r}}])&&tx(e.prototype,n),r&&tx(e,r),t}();function nx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var rx=function(){function t(e){var n=e.points,r=void 0===n?[]:n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.points=r}var e,n,r;return e=t,(n=[{key:"set",value:function(t){var e=t.points,n=void 0===e?[]:e;this.points=n}}])&&nx(e.prototype,n),r&&nx(e,r),t}();function ox(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ix=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n}var e,n,r;return e=t,(n=[{key:"setX",value:function(t){this.x=t}},{key:"setY",value:function(t){this.y=t}}])&&ox(e.prototype,n),r&&ox(e,r),t}();function cx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function lx(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?cx(Object(n),!0).forEach((function(e){ax(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cx(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ax(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ux(t,e,n){return(ux="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yx(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function sx(t){return(sx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fx(t,e){return!e||"object"!==sx(e)&&"function"!=typeof e?hx(t):e}function hx(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yx(t){return(yx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function px(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bx(t,e)}function bx(t,e){return(bx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function dx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gx(t,e,n){return e&&vx(t.prototype,e),n&&vx(t,n),t}var wx={SCROLL:Symbol("scroll"),RENDER:Symbol("render"),SCALE:Symbol("scale")},Ex=function(){function t(e){dx(this,t),this.table=e}return gx(t,[{key:"draw",value:function(){var t=this.table,e=t.draw,n=t.indexGrid,r=t.index,o=r.getHeight(),i=r.getWidth();e.save(),e.offset(0,0),e.attr({fillStyle:"#f4f5f8"}),e.fillRect(0,0,r.getWidth(),o),e.offset(0,0),n.horizonLine(0,o,i,o),n.verticalLine(i,0,i,o),e.restore()}},{key:"render",value:function(){var t=this.table.getRenderMode();t!==wx.RENDER&&t!==wx.SCALE||this.draw()}}]),t}(),mx=function(){function t(e,n){var r=n.width,o=n.height,i=n.background,c=n.buttonColor;dx(this,t),this.table=e,this.height=o,this.width=r,this.background=i,this.buttonColor=c}return gx(t,[{key:"drawBar",value:function(){var t=this.table,e=this.height,n=this.width,r=this.background,o=t.xFixedView,i=t.draw,c=t.index,l=t.xFixedMeasure;if(o.hasFixedTop()){var a=x.srcTransformStylePx(e),u=t.visualWidth(),s=c.getWidth(),f=l.getHeight()+c.getHeight()-a/2;i.attr({fillStyle:r}),i.fillRect(s,f,u,a)}if(o.hasFixedLeft()){var h=t.visualHeight(),y=x.srcTransformStylePx(n),p=l.getWidth()+c.getWidth()-y/2,b=c.getHeight();i.attr({fillStyle:r}),i.fillRect(p,b,y,h)}}},{key:"drawButton",value:function(){var t=this.table,e=this.height,n=this.width,r=this.buttonColor,o=t.xFixedView,i=t.draw,c=t.index,l=t.xFixedMeasure;if(o.hasFixedTop()){var a=x.srcTransformStylePx(e),u=c.getWidth(),s=l.getHeight()+c.getHeight()-a/2;i.attr({fillStyle:r}),i.fillRect(0,s,u,a)}if(o.hasFixedLeft()){var f=c.getHeight(),h=x.srcTransformStylePx(n),y=l.getWidth()+c.getWidth()-h/2;i.attr({fillStyle:r}),i.fillRect(y,0,h,f)}}},{key:"render",value:function(){this.drawBar(),this.drawButton()}}]),t}(),Ox=function(){function t(e){dx(this,t),this.table=e,this.width=null,this.height=null,this.x=null,this.y=null,this.drawX=null,this.drawY=null,this.mapOriginX=null,this.mapOriginY=null,this.mapTargetX=null,this.mapTargetY=null,this.mapWidth=null,this.mapHeight=null,this.fullScrollView=null,this.scrollView=null,this.borderView=null,this.borderX=null,this.borderY=null,this.viewMode=null}return gx(t,[{key:"getFullScrollView",value:function(){throw new TypeError("getFullScrollView child impl")}},{key:"getScrollView",value:function(){throw new TypeError("getScrollView child impl")}},{key:"getLineView",value:function(){if(H.isNotUnDef(this.borderView))return this.borderView.clone();var t=this.table,e=t.cols,n=t.rows,r=t.getRenderMode(),o=this.getViewMode(),i=this.getScrollView();if(o===gw.CHANGE_ADD&&r===wx.SCROLL)switch(t.scroll.type){case Og.V_TOP:i.eri+=1,i.h=n.rectRangeSumHeight(i);break;case Og.V_BOTTOM:i.sri-=1,i.h=n.rectRangeSumHeight(i);break;case Og.H_RIGHT:i.sci-=1,i.w=e.rectRangeSumWidth(i);break;case Og.H_LEFT:i.eci+=1,i.w=e.rectRangeSumWidth(i)}return this.borderView=i,i.clone()}},{key:"getMapTargetX",value:function(){if(H.isNumber(this.mapTargetX))return this.mapTargetX;var t=this.table,e=t.xTableAreaView,n=t.scroll,r=this.getX(),o=0;switch(n.type){case Og.H_LEFT:o=e.getEnterView().w;break;case Og.H_RIGHT:o=0}return o=r+o,this.mapTargetX=o,o}},{key:"getMapTargetY",value:function(){if(H.isNumber(this.mapTargetY))return this.mapTargetY;var t=this.table,e=t.xTableAreaView,n=t.scroll,r=this.getY(),o=0;switch(n.type){case Og.V_TOP:o=e.getEnterView().h;break;case Og.V_BOTTOM:o=0}return o=r+o,this.mapTargetY=o,o}},{key:"getMapOriginX",value:function(){if(H.isNumber(this.mapOriginX))return this.mapOriginX;var t=this.table,e=t.xTableAreaView,n=t.scroll,r=this.getX(),o=0;switch(n.type){case Og.H_LEFT:o=0;break;case Og.H_RIGHT:o=e.getLeaveView().w}return o=r+o,this.mapOriginX=o,o}},{key:"getMapOriginY",value:function(){if(H.isNumber(this.mapOriginY))return this.mapOriginY;var t=this.table,e=t.xTableAreaView,n=t.scroll,r=this.getY(),o=0;switch(n.type){case Og.V_TOP:o=0;break;case Og.V_BOTTOM:o=e.getLeaveView().h}return o=r+o,this.mapOriginY=o,o}},{key:"getLineX",value:function(){if(H.isNumber(this.borderX))return this.borderX;var t=this.table,e=this.getX();if(t.getRenderMode()===wx.RENDER)return this.borderX=e,e;if(t.getRenderMode()===wx.SCALE)return this.borderX=e,e;if(this.getViewMode()===gw.BOUND_OUT)return this.borderX=e,e;if(this.getViewMode()===gw.CHANGE_NOT)return this.borderX=e,e;var n=0;switch(t.scroll.type){case Og.H_RIGHT:var r=this.getLineView();n=this.getFullScrollView().w-r.w;break;case Og.H_LEFT:n=0}return n=e+n,this.borderX=n,n}},{key:"getLineY",value:function(){if(H.isNumber(this.borderY))return this.borderY;var t=this.table,e=this.getY();if(t.getRenderMode()===wx.RENDER)return this.borderY=e,e;if(t.getRenderMode()===wx.SCALE)return this.borderY=e,e;if(this.getViewMode()===gw.BOUND_OUT)return this.borderY=e,e;if(this.getViewMode()===gw.CHANGE_NOT)return this.borderY=e,e;var n=0;switch(t.scroll.type){case Og.V_BOTTOM:var r=this.getLineView();n=this.getFullScrollView().h-r.h;break;case Og.V_TOP:n=0}return n=e+n,this.borderY=n,n}},{key:"getHeight",value:function(){throw new TypeError("getHeight child impl")}},{key:"getWidth",value:function(){throw new TypeError("getWidth child impl")}},{key:"getDrawX",value:function(){if(H.isNumber(this.drawX))return this.drawX;var t=this.table,e=this.getX();if(t.getRenderMode()===wx.RENDER)return this.drawX=e,e;if(t.getRenderMode()===wx.SCALE)return this.drawX=e,e;if(this.getViewMode()===gw.BOUND_OUT)return this.drawX=e,e;if(this.getViewMode()===gw.CHANGE_NOT)return this.drawX=e,e;var n=t.scroll,r=this.getScrollView(),o=this.getFullScrollView(),i=0;switch(n.type){case Og.H_RIGHT:i=o.w-r.w;break;case Og.H_LEFT:i=0}return i=e+i,this.drawX=i,i}},{key:"getDrawY",value:function(){if(H.isNumber(this.drawY))return this.drawY;var t=this.table,e=this.getY();if(t.getRenderMode()===wx.RENDER)return this.drawY=e,e;if(t.getRenderMode()===wx.SCALE)return this.drawY=e,e;if(this.getViewMode()===gw.BOUND_OUT)return this.drawY=e,e;if(this.getViewMode()===gw.CHANGE_NOT)return this.drawY=e,e;var n=t.scroll,r=this.getScrollView(),o=this.getFullScrollView(),i=0;switch(n.type){case Og.V_BOTTOM:i=o.h-r.h;break;case Og.V_TOP:i=0}return i=e+i,this.drawY=i,i}},{key:"getX",value:function(){throw new TypeError("getX child impl")}},{key:"getY",value:function(){throw new TypeError("getY child impl")}},{key:"getViewMode",value:function(){throw new TypeError("getViewMode child impl")}},{key:"reset",value:function(){this.width=null,this.height=null,this.x=null,this.y=null,this.drawX=null,this.drawY=null,this.mapOriginX=null,this.mapOriginY=null,this.mapTargetX=null,this.mapTargetY=null,this.mapWidth=null,this.mapHeight=null,this.fullScrollView=null,this.scrollView=null,this.borderView=null,this.borderX=null,this.borderY=null,this.viewMode=null}},{key:"getMapHeight",value:function(){if(H.isNumber(this.mapHeight))return this.mapHeight;var t=this.table,e=t.xTableAreaView,n=t.scroll,r=this.getHeight();switch(n.type){case Og.V_BOTTOM:r-=e.getLeaveView().h;break;case Og.V_TOP:r-=e.getEnterView().h}return this.mapHeight=r,r}},{key:"getMapWidth",value:function(){if(H.isNumber(this.mapWidth))return this.mapWidth;var t=this.table,e=t.xTableAreaView,n=t.scroll,r=this.getWidth();switch(n.type){case Og.H_RIGHT:r-=e.getLeaveView().w;break;case Og.H_LEFT:r-=e.getEnterView().w}return this.mapWidth=r,r}},{key:"drawClear",value:function(){var t=this.table,e=t.scroll,n=t.draw,r=t.settings,o=this.getViewMode(),i=t.getRenderMode(),c=this.getDrawX(),l=this.getDrawY();if(n.attr({fillStyle:r.table.background}),i===wx.SCROLL)switch(o){case gw.CHANGE_NOT:case gw.STATIC:case gw.BOUND_OUT:var a=this.getHeight(),u=this.getWidth();n.fillRect(c,l,u,a);break;case gw.CHANGE_ADD:switch(e.type){case Og.V_BOTTOM:var s=this.getFullScrollView(),f=this.getScrollView(),h=t.visualHeight()-(s.h-f.h),y=this.getWidth();n.fillRect(c,l,y,h);break;case Og.V_TOP:var p=this.getScrollView().h,b=this.getWidth();n.fillRect(c,l,b,p);break;case Og.H_LEFT:var d=this.getScrollView(),v=this.getHeight(),g=d.w;n.fillRect(c,l,g,v);break;case Og.H_RIGHT:var w=this.getFullScrollView(),E=this.getScrollView(),m=this.getHeight(),O=t.visualWidth()-(w.w-E.w);n.fillRect(c,l,O,m)}}else if(wx.RENDER){var T=this.getHeight(),x=this.getWidth();n.fillRect(c,l,x,T)}}},{key:"drawMap",value:function(){var t=this.table,e=t.getRenderMode();if(this.getViewMode()===gw.CHANGE_ADD&&e===wx.SCROLL){var n=t.draw,r=this.getMapWidth(),o=this.getMapHeight(),i=this.getMapOriginX(),c=this.getMapOriginY(),l=this.getMapTargetX(),a=this.getMapTargetY();n.copyImage(i,c,r,o,l,a,r,o)}}}]),t}(),Tx=function(t){function e(){return dx(this,e),fx(this,yx(e).apply(this,arguments))}return px(e,t),gx(e,[{key:"drawStaticXIcon",value:function(t,e,n,r){var o=this,i=this.table,c=i.draw,l=i.staticCellIcon.getIcon(e,n);if(l){var a=this.getX(),u=this.getY();t.x+=a,t.y+=u;for(var s=function(e){var n=l[e];n.loadImage({load:function(){r.equals(o.getFullScrollView())&&n.drawIcon({rect:t,draw:c})},sync:function(){n.drawIcon({rect:t,draw:c})}})},f=0;f<l.length;f+=1)s(f)}}},{key:"drawFixedXIcon",value:function(t,e,n,r){var o=this,i=this.table,c=i.draw,l=i.fixedCellIcon.getIcon(e,n);if(l){var a=this.getX(),u=this.getY();t.x+=a,t.y+=u;for(var s=function(e){var n=l[e];n.loadImage({load:function(){r.equals(o.getFullScrollView())&&n.drawIcon({rect:t,draw:c})},sync:function(){n.drawIcon({rect:t,draw:c})}})},f=0;f<l.length;f+=1)s(f)}}},{key:"drawCellXIcon",value:function(t,e,n){var r=this,o=this.table,i=e.icons,c=o.draw,l=this.getX(),a=this.getY();t.x+=l,t.y+=a;for(var u=function(e){var o=i[e];o.loadImage({load:function(){n.equals(r.getFullScrollView())&&o.drawIcon({rect:t,draw:c})},sync:function(){o.drawIcon({rect:t,draw:c})}})},s=0;s<i.length;s+=1)u(s)}},{key:"drawXIcon",value:function(){var t=this,e=this.table.styleCellsHelper,n=this.getFullScrollView();e.getCellByViewRange({view:n,cellsINCallback:function(e,r,o,i){var c=i.clone(),l=i.clone();t.drawStaticXIcon(c,e,r,n),t.drawCellXIcon(l,o,n)},loopINCallback:function(e,r,o){var i=o.clone();t.drawFixedXIcon(i,e,r,n)},mergeCallback:function(e,r,o,i,c){var l=c.sri,a=c.sci,u=i.clone(),s=i.clone();t.drawStaticXIcon(u,l,a,n),t.drawCellXIcon(s,o,n)}})}},{key:"drawBoundOutXFont",value:function(){var t,e=this.getScrollView(),n=this.getDrawX(),r=this.getDrawY(),o=this.table,i=o.draw,c=o.cols,l=o.textCellsHelper,a=o.textFont,u=e.clone();(u.sci=0,u.eci=e.sci-1,u.eci>-1)&&(i.offset(n,r),l.getCellByViewRange({reverseCols:!0,view:u,newCol:function(e){t+=c.getWidth(e)},newRow:function(){t=0},cellsINCallback:function(e,n,r,c,l){var u=r.text;if(H.isBlank(u))return Im;var s=r.fontAttr,f=s.align,h=s.textWrap,y=s.direction,p=f===al.ALIGN.left||f===al.ALIGN.center,b=h===al.TEXT_WRAP.OVER_FLOW,d=y===al.TEXT_DIRECTION.ANGLE;if(p&&(b||d)){var v=o.getCellContentBoundOutWidth(e,n);if(0===v||v>t){var g=a.getBuilder();g.setDraw(i),g.setRect(c),g.setCell(r),g.setRow(e),g.setCol(n),g.setOverFlow(l);var w=g.build().drawingFont();r.setContentWidth(w.width),r.setLeftSdistWidth(w.leftSdist),r.setRightSdistWidth(w.rightSdist)}}return o.hasAngleCell(e)?Im:Am},mergeCallback:function(t){return o.hasAngleCell(t)?Im:Am}}),i.offset(0,0));var s,f=e.clone();(f.sci=e.eci+1,f.eci=c.len-1,f.sci<c.len)&&(i.offset(n+e.w,r),l.getCellByViewRange({startX:e.w,view:f,newCol:function(t){s+=c.getWidth(t)},newRow:function(){s=0},cellsINCallback:function(t,e,n,r,c){var l=n.text;if(H.isBlank(l))return Im;var u=n.fontAttr,f=u.align,h=u.textWrap,y=u.direction,p=f===al.ALIGN.right||f===al.ALIGN.center,b=y===al.TEXT_DIRECTION.ANGLE,d=h===al.TEXT_WRAP.OVER_FLOW;if(p&&(d||b)){var v=o.getCellContentBoundOutWidth(t,e);if(0===v||v>s){var g=a.getBuilder();g.setDraw(i),g.setRect(r),g.setCell(n),g.setRow(t),g.setCol(e),g.setOverFlow(c);var w=g.build().drawingFont();n.setContentWidth(w.width),n.setLeftSdistWidth(w.leftSdist),n.setRightSdistWidth(w.rightSdist)}}return o.hasAngleCell(t)?Im:Am},mergeCallback:function(t){return o.hasAngleCell(t)?Im:Am}}),i.offset(0,0))}},{key:"drawBoundOutGridBorder",value:function(){var t=this.getScrollView(),e=this.getDrawX(),n=this.getDrawY(),r=this.table,o=r.draw,i=r.cols,c=r.line,l=t.clone();if(l.sci=0,l.eci=t.sci-1,l.eci>-1){var a=i.rectRangeSumWidth(l),u=DT.run({scrollView:l,foldOnOff:!0,table:r,model:DT.MODEL.OUT_ANGLE_BAR_L}).alResult;o.offset(e-a,n),u.tLine.forEach((function(t){var e=t.borderAttr,n=t.row,r=t.col,o=e.top,i=o.color,l=o.widthType,a=o.type;c.setType(a),c.setWidthType(l),c.setColor(i),c.tiltingLine(t.sx,t.sy,t.ex,t.ey,n,r,"top")})),u.lLine.forEach((function(t){var e=t.borderAttr,n=t.row,r=t.col,o=e.left,i=o.color,l=o.widthType,a=o.type;c.setType(a),c.setWidthType(l),c.setColor(i),c.tiltingLine(t.sx,t.sy,t.ex,t.ey,n,r,"left")})),u.rLine.forEach((function(t){var e=t.borderAttr,n=t.row,r=t.col,o=e.right,i=o.color,l=o.widthType,a=o.type;c.setType(a),c.setWidthType(l),c.setColor(i),c.tiltingLine(t.sx,t.sy,t.ex,t.ey,n,r,"right")})),u.bLine.forEach((function(t){var e=t.borderAttr,n=t.row,r=t.col,o=e.bottom,i=o.color,l=o.widthType,a=o.type;c.setType(a),c.setWidthType(l),c.setColor(i),c.tiltingLine(t.sx,t.sy,t.ex,t.ey,n,r,"bottom")})),o.offset(0,0)}var s=t.clone();if(s.sci=t.eci+1,s.eci=i.len-1,s.sci<i.len){var f=t.w,h=DT.run({scrollView:s,foldOnOff:!0,table:r,model:DT.MODEL.OUT_ANGLE_BAR_R}).arResult;o.offset(e+f,n),h.tLine.forEach((function(t){var e=t.borderAttr,n=t.row,r=t.col,o=e.top,i=o.color,l=o.widthType,a=o.type;c.setType(a),c.setWidthType(l),c.setColor(i),c.tiltingLine(t.sx,t.sy,t.ex,t.ey,n,r,"top")})),h.lLine.forEach((function(t){var e=t.borderAttr,n=t.row,r=t.col,o=e.left,i=o.color,l=o.widthType,a=o.type;c.setType(a),c.setWidthType(l),c.setColor(i),c.tiltingLine(t.sx,t.sy,t.ex,t.ey,n,r,"left")})),h.rLine.forEach((function(t){var e=t.borderAttr,n=t.row,r=t.col,o=e.right,i=o.color,l=o.widthType,a=o.type;c.setType(a),c.setWidthType(l),c.setColor(i),c.tiltingLine(t.sx,t.sy,t.ex,t.ey,n,r,"right")})),h.bLine.forEach((function(t){var e=t.borderAttr,n=t.row,r=t.col,o=e.bottom,i=o.color,l=o.widthType,a=o.type;c.setType(a),c.setWidthType(l),c.setColor(i),c.tiltingLine(t.sx,t.sy,t.ex,t.ey,n,r,"bottom")})),o.offset(0,0)}}},{key:"drawBoundOutBackground",value:function(){var t=this.getScrollView(),e=this.getDrawX(),n=this.getDrawY(),r=this.table,o=r.draw,i=r.cols,c=r.styleCellsHelper,l=t.clone();if(l.sci=0,l.eci=t.sci-1,l.eci>-1){var a=0;o.offset(e,n),c.getCellByViewRange({reverseCols:!0,view:l,newCol:function(t){a+=i.getWidth(t)},newRow:function(){a=0},cellsINCallback:function(t,e,n,i){if(r.hasAngleCell(t)){if(r.isAngleBarCell(t,e)){var c=r.getCellStyleBoundOutWidth(t,e),l=n.fontAttr.angle;if(c>a&&l>0){var u=n.background,s=new Aw({draw:o,background:u}),f=r.getSdistWidth(t,e),h=i.x,y=i.y,p=i.width,b=i.height,d=new ix(h+f,y),v=new ix(h+p+f,y),g=new ix(h+p,y+b),w=new ix(h,y+b),E=new rx({points:[d,v,g,w]});s.setPath({path:E}),s.render()}}return xm}return _m},mergeCallback:function(t){return r.hasAngleCell(t)?xm:_m}}),o.offset(0,0)}var u=t.clone();if(u.sci=t.eci+1,u.eci=i.len-1,u.sci<i.len){var s=0;o.offset(e+t.w,n),c.getCellByViewRange({view:u,newCol:function(t){s+=i.getWidth(t)},newRow:function(){s=0},cellsINCallback:function(t,e,n,i){if(r.hasAngleCell(t)){if(r.isAngleBarCell(t,e)){var c=r.getCellStyleBoundOutWidth(t,e),l=n.fontAttr.angle;if(c>s&&l<0){var a=n.background,u=new Aw({draw:o,background:a}),f=-r.getSdistWidth(t,e),h=i.x,y=i.y,p=i.width,b=i.height,d=new ix(h+f,y),v=new ix(h+p+f,y),g=new ix(h+p,y+b),w=new ix(h,y+b),E=new rx({points:[d,v,g,w]});u.setPath({path:E}),u.render()}}return xm}return _m},mergeCallback:function(t){return r.hasAngleCell(t)?xm:_m}}),o.offset(0,0)}}},{key:"drawXFont",value:function(){var t=this.getScrollView(),e=this.getDrawX(),n=this.getDrawY(),r=this.table,o=r.draw,i=r.textCellsHelper,c=r.textFont;o.offset(e,n),i.getCellByViewRange({view:t,cellsINCallback:function(t,e,n,r,i){var l=c.getBuilder();l.setDraw(o),l.setCell(n),l.setRect(r),l.setRow(t),l.setCol(e),l.setOverFlow(i);var a=l.build().drawingFont();n.setContentWidth(a.width),n.setLeftSdistWidth(a.leftSdist),n.setRightSdistWidth(a.rightSdist)},mergeCallback:function(t,e,n,r){var i=c.getBuilder();i.setDraw(o),i.setRect(r),i.setCell(n),i.setRow(t),i.setCol(e),i.setOverFlow(r);var l=i.build().drawingFont();n.setContentWidth(l.width),n.setLeftSdistWidth(l.leftSdist),n.setRightSdistWidth(l.rightSdist)}}),o.offset(0,0)}},{key:"drawGridBorder",value:function(){var t=this.getLineView(),e=this.getLineX(),n=this.getLineY(),r=this.table,o=r.settings,i=r.draw,c=r.grid,l=r.line,a=r.optimizeEnable;i.offset(e,n);var u=DT.run({scrollView:t,foldOnOff:!0,optimize:a,table:r,model:o.table.showGrid?DT.MODEL.ALL:DT.MODEL.BORDER}),s=u.gResult,f=u.bResult,h=u.aResult;s&&(s.bLine.forEach((function(t){c.horizonLine(t.sx,t.sy,t.ex,t.ey)})),s.rLine.forEach((function(t){c.verticalLine(t.sx,t.sy,t.ex,t.ey)}))),f.tLine.forEach((function(t){var e=t.borderAttr,n=t.row,r=t.col,o=e.top,i=o.color,c=o.widthType,a=o.type;l.setType(a),l.setWidthType(c),l.setColor(i),l.horizonLine(t.sx,t.sy,t.ex,t.ey,n,r,"top")})),f.lLine.forEach((function(t){var e=t.borderAttr,n=t.row,r=t.col,o=e.left,i=o.color,c=o.widthType,a=o.type;l.setType(a),l.setWidthType(c),l.setColor(i),l.verticalLine(t.sx,t.sy,t.ex,t.ey,n,r,"left")})),f.rLine.forEach((function(t){var e=t.borderAttr,n=t.row,r=t.col,o=e.right,i=o.color,c=o.widthType,a=o.type;l.setType(a),l.setWidthType(c),l.setColor(i),l.verticalLine(t.sx,t.sy,t.ex,t.ey,n,r,"right")})),f.bLine.forEach((function(t){var e=t.borderAttr,n=t.row,r=t.col,o=e.bottom,i=o.color,c=o.widthType,a=o.type;l.setType(a),l.setWidthType(c),l.setColor(i),l.horizonLine(t.sx,t.sy,t.ex,t.ey,n,r,"bottom")})),h.tLine.forEach((function(t){var e=t.borderAttr,n=t.row,r=t.col,o=e.top,i=o.color,c=o.widthType,a=o.type;l.setType(a),l.setWidthType(c),l.setColor(i),l.tiltingLine(t.sx,t.sy,t.ex,t.ey,n,r,"top")})),h.lLine.forEach((function(t){var e=t.borderAttr,n=t.row,r=t.col,o=e.left,i=o.color,c=o.widthType,a=o.type;l.setType(a),l.setWidthType(c),l.setColor(i),l.tiltingLine(t.sx,t.sy,t.ex,t.ey,n,r,"left")})),h.rLine.forEach((function(t){var e=t.borderAttr,n=t.row,r=t.col,o=e.right,i=o.color,c=o.widthType,a=o.type;l.setType(a),l.setWidthType(c),l.setColor(i),l.tiltingLine(t.sx,t.sy,t.ex,t.ey,n,r,"right")})),h.bLine.forEach((function(t){var e=t.borderAttr,n=t.row,r=t.col,o=e.bottom,i=o.color,c=o.widthType,a=o.type;l.setType(a),l.setWidthType(c),l.setColor(i),l.tiltingLine(t.sx,t.sy,t.ex,t.ey,n,r,"bottom")})),i.offset(0,0)}},{key:"drawBackground",value:function(){var t=this.getScrollView(),e=this.table,n=this.getDrawX(),r=this.getDrawY(),o=e.draw,i=e.styleCellsHelper;o.offset(n,r),i.getCellByViewRange({view:t,cellsINCallback:function(t,n,r,i){if(!e.hasAngleCell(t)||!e.isAngleBarCell(t,n)){var c=r.background;new Aw({draw:o,background:c,rect:i}).render()}},mergeCallback:function(t,e,n,r){var i=n.background;new Aw({draw:o,rect:r,background:i}).render()}}),i.getCellByViewRange({view:t,cellsINCallback:function(t,n,r,i){if(e.hasAngleCell(t)&&e.isAngleBarCell(t,n)){var c=r.background,l=new Aw({draw:o,background:c}),a=r.fontAttr.angle>0?e.getSdistWidth(t,n):-e.getSdistWidth(t,n),u=i.x,s=i.y,f=i.width,h=i.height,y=new ix(u+a,s),p=new ix(u+f+a,s),b=new ix(u+f,s+h),d=new ix(u,s+h),v=new rx({points:[y,p,b,d]});l.setPath({path:v}),l.render()}}}),o.offset(0,0)}},{key:"render",value:function(){var t=this.table,e=t.getRenderMode();if(this.getViewMode()!==gw.STATIC||e!==wx.SCROLL){this.drawMap(),this.drawClear();var n=this.getScrollView(),r=this.getDrawX(),o=this.getDrawY(),i=n.w,c=n.h,l=t.draw,a=new Nu({rect:new ju({x:r,y:o,width:i,height:c}),draw:l});a.open(),this.drawBackground(),this.drawBoundOutBackground(),this.drawXFont(),this.drawBoundOutXFont(),this.drawGridBorder(),this.drawBoundOutGridBorder(),this.drawXIcon(),a.close()}}}]),e}(Ox),xx=function(t){function e(){return dx(this,e),fx(this,yx(e).apply(this,arguments))}return px(e,t),gx(e,[{key:"drawGridBorder",value:function(){throw new TypeError("drawGrid child impl")}},{key:"drawColor",value:function(){throw new TypeError("drawColor child impl")}},{key:"drawFont",value:function(){throw new TypeError("drawFont child impl")}},{key:"render",value:function(){var t=this.table.getRenderMode();this.getViewMode()===gw.STATIC&&t===wx.SCROLL||(this.drawMap(),this.drawClear(),this.drawColor(),this.drawFont(),this.drawGridBorder())}}]),e}(Ox),_x=function(t){function e(){return dx(this,e),fx(this,yx(e).apply(this,arguments))}return px(e,t),gx(e,[{key:"drawGridBorder",value:function(){var t=this.getLineView(),e=this.getLineX(),n=this.getLineY(),r=this.table,o=r.draw,i=r.indexGrid,c=DT.run({scrollView:t,foldOnOff:!1,model:DT.MODEL.INDEX,table:r,getWidth:function(){return r.index.getWidth()}}).iResult;o.offset(e,n),c.bLine.forEach((function(t){i.horizonLine(t.sx,t.sy,t.ex,t.ey)})),c.rLine.forEach((function(t){i.verticalLine(t.sx,t.sy,t.ex,t.ey)})),o.offset(0,0)}},{key:"drawColor",value:function(){var t=this.getDrawX(),e=this.getDrawY(),n=this.getScrollView().h,r=this.getWidth(),o=this.table,i=o.draw,c=o.index;i.offset(t,e),i.attr({fillStyle:c.getBackground()}),i.fillRect(0,0,r,n),i.offset(0,0)}},{key:"drawFont",value:function(){var t=this.getDrawX(),e=this.getDrawY(),n=this.getScrollView(),r=this.getWidth(),o=this.table,i=o.draw,c=o.rows,l=o.index,a=n.sri,u=n.eri;i.offset(t,e),i.attr({textAlign:"center",textBaseline:"middle",font:"".concat(l.getSize(),"px Arial"),fillStyle:l.getColor()}),c.eachHeight(a,u,(function(t,e,n){i.fillText(t+1,r/2,n+e/2)})),i.offset(0,0)}}]),e}(xx),Sx=function(t){function e(){return dx(this,e),fx(this,yx(e).apply(this,arguments))}return px(e,t),gx(e,[{key:"drawGridBorder",value:function(){var t=this.getLineView(),e=this.getLineX(),n=this.getLineY(),r=this.table,o=r.draw,i=r.indexGrid,c=DT.run({scrollView:t,foldOnOff:!1,model:DT.MODEL.INDEX,table:r,getHeight:function(){return r.index.getHeight()}}).iResult;o.offset(e,n),c.bLine.forEach((function(t){i.horizonLine(t.sx,t.sy,t.ex,t.ey)})),c.rLine.forEach((function(t){i.verticalLine(t.sx,t.sy,t.ex,t.ey)})),o.offset(0,0)}},{key:"drawColor",value:function(){var t=this.table,e=t.draw,n=t.index,r=this.getScrollView(),o=this.getDrawX(),i=this.getDrawY(),c=this.getHeight(),l=r.w;e.offset(o,i),e.attr({fillStyle:n.getBackground()}),e.fillRect(0,0,l,c),e.offset(0,0)}},{key:"drawFont",value:function(){var t=this.getDrawX(),e=this.getDrawY(),n=this.getScrollView(),r=this.getHeight(),o=this.table,i=o.draw,c=o.cols,l=o.index,a=n.sci,u=n.eci;i.offset(t,e),i.attr({textAlign:"center",textBaseline:"middle",font:"".concat(l.getSize(),"px Arial"),fillStyle:l.getColor()}),c.eachWidth(a,u,(function(t,e,n){i.fillText(H.stringAt(t),n+e/2,r/2)})),i.offset(0,0)}}]),e}(xx),kx=function(t){function e(){return dx(this,e),fx(this,yx(e).apply(this,arguments))}return px(e,t),gx(e,[{key:"getWidth",value:function(){if(H.isNumber(this.width))return this.width;var t=this.table.index.getWidth();return this.width=t,t}},{key:"getHeight",value:function(){if(H.isNumber(this.height))return this.height;var t=this.table.xFixedMeasure.getHeight();return this.height=t,t}},{key:"getX",value:function(){if(H.isNumber(this.x))return this.x;return this.x=0,0}},{key:"getY",value:function(){if(H.isNumber(this.y))return this.y;var t=this.table.index.getHeight();return this.y=t,t}},{key:"getScrollView",value:function(){if(H.isNotUnDef(this.scrollView))return this.scrollView.clone();var t=this.table,e=t.rows,n=t.cols,r=t.xFixedView.getFixedView(),o=new ss(r.sri,0,r.eri,0);return o.w=n.rectRangeSumWidth(o),o.h=e.rectRangeSumHeight(o),this.scrollView=o,o.clone()}},{key:"getFullScrollView",value:function(){if(H.isNotUnDef(this.fullScrollView))return this.fullScrollView.clone();var t=this.getScrollView();return this.fullScrollView=t,t.clone()}},{key:"getViewMode",value:function(){return this.viewMode=gw.STATIC,gw.STATIC}},{key:"render",value:function(){var t=this.table.getRenderMode();t!==wx.RENDER&&t!==wx.SCALE||ux(yx(e.prototype),"render",this).call(this)}}]),e}(_x),Cx=function(t){function e(){return dx(this,e),fx(this,yx(e).apply(this,arguments))}return px(e,t),gx(e,[{key:"getWidth",value:function(){if(H.isNumber(this.width))return this.width;var t=this.table.xFixedMeasure.getWidth();return this.width=t,t}},{key:"getHeight",value:function(){if(H.isNumber(this.height))return this.height;var t=this.table.xFixedMeasure.getHeight();return this.height=t,t}},{key:"getX",value:function(){if(H.isNumber(this.x))return this.x;var t=this.table.index.getWidth();return this.x=t,t}},{key:"getY",value:function(){if(H.isNumber(this.y))return this.y;var t=this.table.index.getHeight();return this.y=t,t}},{key:"getScrollView",value:function(){if(H.isNotUnDef(this.scrollView))return this.scrollView.clone();var t=this.table,e=t.rows,n=t.cols,r=t.xFixedView.getFixedView();return r.w=n.rectRangeSumWidth(r),r.h=e.rectRangeSumHeight(r),this.scrollView=r,r.clone()}},{key:"getFullScrollView",value:function(){if(H.isNotUnDef(this.fullScrollView))return this.fullScrollView.clone();var t=this.getScrollView();return this.fullScrollView=t,t.clone()}},{key:"getViewMode",value:function(){return this.viewMode=gw.STATIC,gw.STATIC}},{key:"render",value:function(){var t=this.table.getRenderMode();t!==wx.RENDER&&t!==wx.SCALE||ux(yx(e.prototype),"render",this).call(this)}}]),e}(Tx),Px=function(t){function e(){return dx(this,e),fx(this,yx(e).apply(this,arguments))}return px(e,t),gx(e,[{key:"getWidth",value:function(){if(H.isNumber(this.width))return this.width;var t=this.table.xFixedMeasure.getWidth();return this.width=t,t}},{key:"getHeight",value:function(){if(H.isNumber(this.height))return this.height;var t=this.table.index.getHeight();return this.height=t,t}},{key:"getX",value:function(){if(H.isNumber(this.x))return this.x;var t=this.table.index.getWidth();return this.x=t,t}},{key:"getY",value:function(){if(H.isNumber(this.y))return this.y;return this.y=0,0}},{key:"getScrollView",value:function(){if(H.isNotUnDef(this.scrollView))return this.scrollView.clone();var t=this.table,e=t.rows,n=t.cols,r=t.xFixedView.getFixedView(),o=new ss(0,r.sci,0,r.eci);return o.w=n.rectRangeSumWidth(o),o.h=e.rectRangeSumHeight(o),this.scrollView=o,o.clone()}},{key:"getFullScrollView",value:function(){if(H.isNotUnDef(this.fullScrollView))return this.fullScrollView.clone();var t=this.getScrollView();return this.fullScrollView=t,t.clone()}},{key:"getViewMode",value:function(){return this.viewMode=gw.STATIC,gw.STATIC}},{key:"render",value:function(){var t=this.table.getRenderMode();t!==wx.RENDER&&t!==wx.SCALE||ux(yx(e.prototype),"render",this).call(this)}}]),e}(Sx),Rx=function(t){function e(){return dx(this,e),fx(this,yx(e).apply(this,arguments))}return px(e,t),gx(e,[{key:"getWidth",value:function(){if(H.isNumber(this.width))return this.width;var t=this.table.index.getWidth();return this.width=t,t}},{key:"getHeight",value:function(){if(H.isNumber(this.height))return this.height;var t=this.table,e=t.xTop,n=t.index,r=t.visualHeight()-(n.getHeight()+e.getHeight());return this.height=r,r}},{key:"getX",value:function(){if(H.isNumber(this.x))return this.x;return this.x=0,0}},{key:"getY",value:function(){if(H.isNumber(this.y))return this.y;var t=this.table,e=t.xTop,n=t.index.getHeight()+e.getHeight();return this.y=n,n}},{key:"getScrollView",value:function(){if(H.isNotUnDef(this.scrollView))return this.scrollView.clone();var t=this.table,e=t.xTableAreaView,n=t.index,r=t.getRenderMode(),o=e.getScrollView(),i=e.getScrollEnterView(),c=H.isNotUnDef(i)&&r===wx.SCROLL?i:o;return c.sci=0,c.eci=0,c.w=n.getWidth(),this.scrollView=c,c.clone()}},{key:"getFullScrollView",value:function(){if(H.isNotUnDef(this.fullScrollView))return this.fullScrollView.clone();var t=this.table,e=t.index,n=t.xTableAreaView.getScrollView();return n.sci=0,n.eci=0,n.w=e.getWidth(),this.fullScrollView=n,n.clone()}},{key:"getViewMode",value:function(){if(H.isNotUnDef(this.viewMode))return this.viewMode;var t=this.table,e=t.xTableAreaView,n=t.cols,r=e.getLastScrollView(),o=e.getScrollView();H.isNotUnDef(r)&&(r.sci=0,r.eci=0,r.w=n.sectionSumWidth(r.sci,r.eci)),o.sci=0,o.eci=0,o.w=n.sectionSumWidth(o.sci,o.eci);var i=ww.viewMode(r,o);return this.viewMode=i,i}}]),e}(_x),jx=function(t){function e(){return dx(this,e),fx(this,yx(e).apply(this,arguments))}return px(e,t),gx(e,[{key:"getWidth",value:function(){if(H.isNumber(this.width))return this.width;var t=this.table.xFixedMeasure.getWidth();return this.width=t,t}},{key:"getHeight",value:function(){if(H.isNumber(this.height))return this.height;var t=this.table,e=t.xTop,n=t.index,r=t.visualHeight()-(n.getHeight()+e.getHeight());return this.height=r,r}},{key:"getX",value:function(){if(H.isNumber(this.x))return this.x;var t=this.table.index.getWidth();return this.x=t,t}},{key:"getY",value:function(){if(H.isNumber(this.y))return this.y;var t=this.table,e=t.xTop,n=t.index.getHeight()+e.getHeight();return this.y=n,n}},{key:"getScrollView",value:function(){if(H.isNotUnDef(this.scrollView))return this.scrollView.clone();var t=this.table,e=t.xFixedView,n=t.cols,r=t.xTableAreaView,o=t.getRenderMode(),i=e.getFixedView(),c=r.getScrollView(),l=r.getScrollEnterView(),a=H.isNotUnDef(l)&&o===wx.SCROLL?l:c;return a.sci=i.sci,a.eci=i.eci,a.w=n.sectionSumWidth(a.sci,a.eci),this.scrollView=a,a.clone()}},{key:"getFullScrollView",value:function(){if(H.isNotUnDef(this.fullScrollView))return this.fullScrollView.clone();var t=this.table,e=t.xFixedView,n=t.cols,r=t.xTableAreaView,o=e.getFixedView(),i=r.getScrollView();return i.sci=o.sci,i.eci=o.eci,i.w=n.sectionSumWidth(i.sci,i.eci),this.fullScrollView=i,i.clone()}},{key:"getViewMode",value:function(){if(H.isNotUnDef(this.viewMode))return this.viewMode;var t=this.table,e=t.xTableAreaView,n=t.cols,r=t.xFixedView.getFixedView(),o=e.getLastScrollView(),i=e.getScrollView();H.isNotUnDef(o)&&(o.sci=r.sci,o.eci=r.eci,o.w=n.sectionSumWidth(o.sci,o.eci)),i.sci=r.sci,i.eci=r.eci,i.w=n.sectionSumWidth(i.sci,i.eci);var c=ww.viewMode(o,i);return this.viewMode=c,c}}]),e}(Tx),Lx=function(t){function e(){return dx(this,e),fx(this,yx(e).apply(this,arguments))}return px(e,t),gx(e,[{key:"getWidth",value:function(){if(H.isNumber(this.width))return this.width;var t=this.table,e=t.xLeft,n=t.index,r=t.visualWidth()-(n.getWidth()+e.getWidth());return this.width=r,r}},{key:"getHeight",value:function(){if(H.isNumber(this.height))return this.height;var t=this.table.index.getHeight();return this.height=t,t}},{key:"getX",value:function(){if(H.isNumber(this.x))return this.x;var t=this.table,e=t.xLeft,n=t.index.getWidth()+e.getWidth();return this.x=n,n}},{key:"getY",value:function(){if(H.isNumber(this.y))return this.y;return this.y=0,0}},{key:"getScrollView",value:function(){if(H.isNotUnDef(this.scrollView))return this.scrollView.clone();var t=this.table,e=t.index,n=t.xTableAreaView,r=t.getRenderMode(),o=n.getScrollView(),i=n.getScrollEnterView(),c=H.isNotUnDef(i)&&r===wx.SCROLL?i:o;return c.sri=0,c.eri=0,c.h=e.getHeight(),this.scrollView=c,c.clone()}},{key:"getFullScrollView",value:function(){if(H.isNotUnDef(this.fullScrollView))return this.fullScrollView.clone();var t=this.table,e=t.index,n=t.xTableAreaView.getScrollView();return n.sri=0,n.eri=0,n.h=e.getHeight(),this.fullScrollView=n,n.clone()}},{key:"getViewMode",value:function(){if(H.isNotUnDef(this.viewMode))return this.viewMode;var t=this.table,e=t.xTableAreaView,n=t.rows,r=e.getLastScrollView(),o=e.getScrollView();H.isNotUnDef(r)&&(r.sri=0,r.eri=0,r.h=n.sectionSumHeight(r.sri,r.eri)),o.sri=0,o.eri=0,o.h=n.sectionSumHeight(o.sri,o.eri);var i=ww.viewMode(r,o);return this.viewMode=i,i}}]),e}(Sx),Ix=function(t){function e(){return dx(this,e),fx(this,yx(e).apply(this,arguments))}return px(e,t),gx(e,[{key:"getWidth",value:function(){if(H.isNumber(this.width))return this.width;var t=this.table,e=t.xLeft,n=t.index,r=t.visualWidth()-(n.getWidth()+e.getWidth());return this.width=r,r}},{key:"getHeight",value:function(){if(H.isNumber(this.height))return this.height;var t=this.table.xFixedMeasure.getHeight();return this.height=t,t}},{key:"getX",value:function(){if(H.isNumber(this.x))return this.x;var t=this.table,e=t.xLeft,n=t.index.getWidth()+e.getWidth();return this.x=n,n}},{key:"getY",value:function(){if(H.isNumber(this.y))return this.y;var t=this.table.index.getHeight();return this.y=t,t}},{key:"getScrollView",value:function(){if(H.isNotUnDef(this.scrollView))return this.scrollView.clone();var t=this.table,e=t.xFixedView,n=t.rows,r=t.xTableAreaView,o=t.getRenderMode(),i=e.getFixedView(),c=r.getScrollView(),l=r.getScrollEnterView(),a=H.isNotUnDef(l)&&o===wx.SCROLL?l:c;return a.sri=i.sri,a.eri=i.eri,a.h=n.sectionSumHeight(a.sri,a.eri),this.scrollView=a,a.clone()}},{key:"getFullScrollView",value:function(){if(H.isNotUnDef(this.fullScrollView))return this.fullScrollView.clone();var t=this.table,e=t.xFixedView,n=t.rows,r=t.xTableAreaView,o=e.getFixedView(),i=r.getScrollView();return i.sri=o.sri,i.eri=o.eri,i.h=n.sectionSumHeight(i.sri,i.eri),this.fullScrollView=i,i.clone()}},{key:"getViewMode",value:function(){if(H.isNotUnDef(this.viewMode))return this.viewMode;var t=this.table,e=t.xTableAreaView,n=t.rows,r=t.xFixedView.getFixedView(),o=e.getLastScrollView(),i=e.getScrollView();H.isNotUnDef(o)&&(o.sri=r.sri,o.eri=r.eri,o.h=n.sectionSumHeight(o.sci,o.eci)),i.sri=r.sri,i.eri=r.eri,i.h=n.sectionSumHeight(i.sci,i.eci);var c=ww.viewMode(o,i);return this.viewMode=c,c}}]),e}(Tx),Ax=function(t){function e(){return dx(this,e),fx(this,yx(e).apply(this,arguments))}return px(e,t),gx(e,[{key:"getWidth",value:function(){if(H.isNumber(this.width))return this.width;var t=this.table,e=t.index,n=t.xLeft,r=t.visualWidth()-(e.getWidth()+n.getWidth());return this.width=r,r}},{key:"getHeight",value:function(){if(H.isNumber(this.height))return this.height;var t=this.table,e=t.xTop,n=t.index,r=t.visualHeight()-(n.getHeight()+e.getHeight());return this.height=r,r}},{key:"getX",value:function(){if(H.isNumber(this.x))return this.x;var t=this.table,e=t.xLeft,n=t.index.getWidth()+e.getWidth();return this.x=n,n}},{key:"getY",value:function(){if(H.isNumber(this.y))return this.y;var t=this.table,e=t.xTop,n=t.index.getHeight()+e.getHeight();return this.y=n,n}},{key:"getScrollView",value:function(){if(H.isNotUnDef(this.scrollView))return this.scrollView.clone();var t=this.table,e=t.xTableAreaView,n=t.getRenderMode(),r=e.getScrollView(),o=e.getScrollEnterView(),i=H.isNotUnDef(o)&&n===wx.SCROLL?o:r;return this.scrollView=i,i.clone()}},{key:"getFullScrollView",value:function(){if(H.isNotUnDef(this.fullScrollView))return this.fullScrollView.clone();var t=this.table.xTableAreaView.getScrollView();return this.fullScrollView=t,t.clone()}},{key:"getViewMode",value:function(){if(H.isNotUnDef(this.viewMode))return this.viewMode;var t=this.table.xTableAreaView,e=t.getLastScrollView(),n=t.getScrollView(),r=ww.viewMode(e,n);return this.viewMode=r,r}}]),e}(Tx),Nx=function(t){function e(t){var n,r=t.xTableScrollView,i=t.settings,c=t.xFixedView,l=t.xIteratorBuilder,a=t.scroll;dx(this,e),(n=fx(this,yx(e).call(this,"".concat(o,"-table-canvas"),"canvas"))).settings=i,n.xFixedView=c,n.scroll=a,n.renderMode=wx.RENDER,n.optimizeEnable=!0,n.xIteratorBuilder=l,n.xTableData=new ex(n.settings.data),n.scale=new sg,n.index=new yg(lx({scaleAdapter:new fg({goto:function(t){return x.srcTransformStylePx(n.scale.goto(t))}})},n.settings.index)),n.rows=new vg(lx({scaleAdapter:new fg({goto:function(t){return x.srcTransformStylePx(n.scale.goto(t))}}),xIteratorBuilder:n.xIteratorBuilder},n.settings.rows)),n.cols=new mg(lx({scaleAdapter:new fg({goto:function(t){return x.srcTransformStylePx(n.scale.goto(t))},back:function(t){return n.scale.back(t)}}),xIteratorBuilder:n.xIteratorBuilder},n.settings.cols)),n.cells=new Vw({onChange:function(t){n.rows.getOrNew(t).reCkHasAngle=!0},table:hx(n),xTableData:n.xTableData,xIteratorBuilder:n.xIteratorBuilder}),n.merges=new $T(lx({},i.merge,{xIteratorBuilder:n.xIteratorBuilder,xTableData:n.xTableData})),n.xFixedMeasure=new qm({fixedView:n.xFixedView,cols:n.cols,rows:n.rows}),n.staticCellIcon=new sO({data:[],cells:n.cells,rows:n.rows,cols:n.cols}),n.fixedCellIcon=new iO({data:[],cells:n.cells,rows:n.rows,cols:n.cols}),n.xTableAreaView=new Um({xTableScrollView:r,scroll:n.scroll,rows:n.rows,cols:n.cols}),n.operateCellsHelper=new Km(hx(n)),n.textCellsHelper=new Vm(hx(n)),n.styleCellsHelper=new km(hx(n));var u=new hO({logic:hO.FILTER_LOGIC.AND,stack:[new eT({cells:n.cells})]}),s=new hO({logic:hO.FILTER_LOGIC.AND,stack:[new JO({cells:n.cells})]}),f=new hO({logic:hO.FILTER_LOGIC.AND,stack:[new FO({cells:n.cells})]}),h=new hO({logic:hO.FILTER_LOGIC.AND,stack:[new WO({cells:n.cells})]});return n.draw=new x(n.el),n.line=new mc(n.draw,{bottomShow:function(t,e){return h.run({row:t,col:e})===hO.RETURN_TYPE.EXEC},topShow:function(t,e){return f.run({row:t,col:e})===hO.RETURN_TYPE.EXEC},leftShow:function(t,e){return u.run({row:t,col:e})===hO.RETURN_TYPE.EXEC},rightShow:function(t,e){return s.run({row:t,col:e})===hO.RETURN_TYPE.EXEC},iFMerge:function(t,e){return H.isNotEmptyObject(n.merges.getFirstIncludes(t,e))},iFMergeFirstRow:function(t,e){return n.merges.getFirstIncludes(t,e).sri===t},iFMergeLastRow:function(t,e){return n.merges.getFirstIncludes(t,e).eri===t},iFMergeFirstCol:function(t,e){return n.merges.getFirstIncludes(t,e).sci===e},iFMergeLastCol:function(t,e){return n.merges.getFirstIncludes(t,e).eci===e}}),n.indexGrid=new Lw(n.draw,{color:n.index.getGridColor()}),n.grid=new Lw(n.draw,{color:n.settings.table.gridColor}),n.textFont=new dm({scaleAdapter:new fg({goto:function(t){return n.scale.goto(t)}}),table:hx(n)}),n.xLeftFrozenIndex=new kx(hx(n)),n.xTopFrozenIndex=new Px(hx(n)),n.xTableFrozenContent=new Cx(hx(n)),n.xLeftIndex=new Rx(hx(n)),n.xTopIndex=new Lx(hx(n)),n.xLeft=new jx(hx(n)),n.xTop=new Ix(hx(n)),n.xContent=new Ax(hx(n)),n.xTableFrozenFullRect=new Ex(hx(n)),n.xTableFixedBar=new mx(hx(n),i.xFixedBar),n}return px(e,t),gx(e,[{key:"getCellContentBoundOutWidth",value:function(t,e){var n=this.cells.getCell(t,e);if(!n)return 0;var r=this.cols,o=n.contentWidth,i=n.fontAttr.align,c=0,l=r.getWidth(e);switch(i){case al.ALIGN.right:case al.ALIGN.left:c=o;break;case al.ALIGN.center:c=this.isAngleBarCell(t,e)?o:l+(o-l)/2}return c}},{key:"getCellStyleBoundOutWidth",value:function(t,e){if(!this.cells.getCell(t,e))return 0;var n=0,r=this.cols.getWidth(e);this.hasAngleCell(t)?this.isAngleBarCell(t,e)&&(n=r+this.getSdistWidth(t,e)):n=r;return n}},{key:"getSdistWidth",value:function(t,e){var n=this.cells.getCell(t,e);if(H.isUnDef(n))return 0;if(n.leftSdistWidth>0)return n.leftSdistWidth;if(n.rightSdistWidth>0)return n.rightSdistWidth;var r=this.rows,o=n.fontAttr.angle,i=Gw.tilt({inverse:r.getHeight(t),angle:o});return zw.nearby({tilt:i,angle:o})}},{key:"getRenderMode",value:function(){return this.renderMode}},{key:"visualWidth",value:function(){return this.el.width}},{key:"visualHeight",value:function(){return this.el.height}},{key:"reset",value:function(){var t=this.xTableAreaView,e=this.xLeftFrozenIndex,n=this.xTopFrozenIndex,r=this.xTableFrozenContent,o=this.xLeftIndex,i=this.xTopIndex,c=this.xLeft,l=this.xTop,a=this.xContent;t.reset(),e.reset(),n.reset(),r.reset(),o.reset(),i.reset(),c.reset(),l.reset(),a.reset()}},{key:"setScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.draw.attr({fillStyle:this.settings.table.background}),this.draw.fullRect(),this.scale.setValue(t),this.renderMode=wx.SCALE,this.resize(),this.renderMode=wx.RENDER}},{key:"resize",value:function(){var t=this.draw,e=this.xTableAreaView,n=this.parent().box();t.resize(n.width,n.height),e.undo(),this.reset(),this.render()}},{key:"optimize",value:function(){var t=this.styleCellsHelper,e=this.xTableAreaView.getScrollView(),n=!0;t.getCellByViewRange({view:e,cellsINCallback:function(t,e,r){return r.borderAttr.hasDouble()?(n=!1,Sm):xm},mergeCallback:function(t,e,r){return r.borderAttr.hasDouble()?(n=!1,Sm):xm}}),this.optimizeEnable=n}},{key:"render",value:function(){var t=this.xFixedView,e=this.xTableFrozenFullRect,n=this.xTableFixedBar,r=this.xLeftFrozenIndex,o=this.xTopFrozenIndex,i=this.xTableFrozenContent,c=this.xLeftIndex,l=this.xTopIndex,a=this.xLeft,u=this.xTop,s=this.xContent;this.optimize(),e.render(),t.hasFixedLeft()&&t.hasFixedTop()&&i.render(),t.hasFixedTop()&&(r.render(),u.render()),t.hasFixedLeft()&&(o.render(),a.render()),c.render(),l.render(),s.render(),n.render()}},{key:"scrolling",value:function(){var t=this.xTableAreaView;this.reset(),this.renderMode=wx.SCROLL,this.render(),t.record(),this.renderMode=wx.RENDER,this.reset()}},{key:"hasAngleCell",value:function(t){var e=this.rows.getOrNew(t);if(!1===e.reCkHasAngle)return e.hasAngelCell;for(var n=this.cols,r=this.cells,o=n.len,i=!1,c=0;c<o;c+=1){var l=r.getCell(t,c);if(l)if(l.fontAttr.direction===al.TEXT_DIRECTION.ANGLE){i=!0;break}}return e.setReCkHasAngle(!1),e.setHasAngelCell(i),i}},{key:"isAngleBarCell",value:function(t,e){var n=this.cells,r=this.merges.getFirstIncludes(t,e);if(H.isNotUnDef(r))return!1;var o=n.getCell(t,e);if(H.isUnDef(o))return!1;var i=o.fontAttr,c=o.borderAttr;if(i.direction!==al.TEXT_DIRECTION.ANGLE)return!1;var l=i.angle<0&&i.angle>-90,a=i.angle>0&&i.angle<90;return(l||a)&&c.isDisplay()}}]),e}(ct);function Vx(t){return(Vx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dx(t,e){return!e||"object"!==Vx(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mx(t){return(Mx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wx(t,e){return(Wx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Bx=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Dx(this,Mx(e).call(this,"".concat(o,"-x-screen-zone ").concat(t)))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wx(t,e)}(e,t),e}(ct);function Yx(t){return(Yx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hx(t,e){return!e||"object"!==Yx(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Fx(t){return(Fx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ux(t,e){return(Ux=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Gx=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Hx(this,Fx(e).call(this,"".concat(o,"-x-screen-br-zone")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ux(t,e)}(e,t),e}(Bx);function zx(t){return(zx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xx(t,e){return!e||"object"!==zx(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zx(t){return(Zx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jx(t,e){return(Jx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Kx=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Xx(this,Zx(e).call(this,"".concat(o,"-x-screen-lt-zone")))).xScreen=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jx(t,e)}(e,t),e}(Bx);function $x(t){return($x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qx(t,e){return!e||"object"!==$x(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qx(t){return(Qx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function t_(t,e){return(t_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var e_=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),qx(this,Qx(e).call(this,"".concat(o,"-x-screen-l-zone")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&t_(t,e)}(e,t),e}(Bx);function n_(t){return(n_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r_(t,e){return!e||"object"!==n_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o_(t){return(o_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i_(t,e){return(i_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c_=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r_(this,o_(e).call(this,"".concat(o,"-x-screen-t-zone")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i_(t,e)}(e,t),e}(Bx);function l_(t){return(l_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u_(t,e){return!e||"object"!==l_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s_(t,e,n){return(s_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f_(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function f_(t){return(f_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h_(t,e){return(h_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y_={BRT:Symbol("BRT"),BRL:Symbol("BRL"),BR:Symbol("br"),ALL:Symbol("ALL")},p_=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=u_(this,f_(e).call(this,"".concat(o,"-x-screen")))).pool=[],n.table=t,n.displayArea=y_.BR,n.ltZone=new Kx,n.tZone=new c_,n.brZone=new Gx,n.lZone=new e_,n.children(n.ltZone),n.children(n.tZone),n.children(n.brZone),n.children(n.lZone),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h_(t,e)}(e,t),n=e,(i=[{key:"onAttach",value:function(){this.bind(),this.setZone()}},{key:"unbind",value:function(){var t=this.table;$.unbind(t)}},{key:"bind",value:function(){var t=this,e=this.table;$.bind(e,r.TABLE_EVENT_TYPE.SCALE_CHANGE,(function(){t.setZone()})),$.bind(e,r.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(){t.setZone()})),$.bind(e,r.TABLE_EVENT_TYPE.CHANGE_WIDTH,(function(){t.setZone()}))}},{key:"addItem",value:function(t){this.pool.push(t),this.ltZone.attach(t.lt),this.tZone.attach(t.t),this.lZone.attach(t.l),this.brZone.attach(t.br),t.setXScreen(this),t.onAdd(this)}},{key:"setZone",value:function(){var t=this.table,e=t.index,n=t.getFixedHeight(),r=t.getFixedWidth(),o=e.getHeight()+n,i=e.getWidth()+r;this.brZone.offset({left:i,top:o});var c=r>0&&n>0,l=n>0,a=r>0;this.ltZone.hide(),this.lZone.hide(),this.tZone.hide();var u=x.dpr();c?(this.displayArea=y_.ALL,this.ltZone.offset({left:e.getWidth(),top:e.getHeight(),width:r,height:n}).show(),this.ltZone.css("border-width","".concat(u,"px")),this.lZone.offset({left:e.getWidth(),top:o,width:r,height:t.visualHeight()-e.getHeight()-n}).show(),this.lZone.css("border-width","".concat(u,"px")),this.tZone.offset({left:i,top:e.getHeight(),width:t.visualWidth()-e.getWidth()-r,height:n}).show(),this.tZone.css("border-width","".concat(u,"px"))):a?(this.displayArea=y_.BRL,this.lZone.offset({left:e.getWidth(),top:o,width:r,height:t.visualHeight()-e.getHeight()-n}).show(),this.lZone.css("border-width","".concat(u,"px"))):l?(this.displayArea=y_.BRL,this.tZone.offset({left:i,top:e.getHeight(),width:t.visualWidth()-e.getWidth()-r,height:n}).show(),this.tZone.css("border-width","".concat(u,"px"))):this.displayArea=y_.BR}},{key:"findType",value:function(t){var e=!0,n=!1,r=void 0;try{for(var o,i=this.pool[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var c=o.value;if(c instanceof t)return c}}catch(t){n=!0,r=t}finally{try{e||null==i.return||i.return()}finally{if(n)throw r}}return null}},{key:"destroy",value:function(){s_(f_(e.prototype),"destroy",this).call(this),this.unbind(),this.pool.forEach((function(t){t.destroy()}))}}])&&a_(n.prototype,i),c&&a_(n,c),e}(ct);function b_(t){return(b_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d_(t,e){return!e||"object"!==b_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function v_(t){return(v_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g_(t,e){return(g_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var w_=function(t){function e(t){var n,r=t.text,i=t.value;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=d_(this,v_(e).call(this,"".concat(o,"-auto-fill-menu-item")))).text=r,n.value=i,n.textEle=z("div","".concat(o,"-auto-fill-menu-item-title")),n.textEle.text(r),n.children(n.textEle),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g_(t,e)}(e,t),e}(Se);function E_(t){return(E_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function O_(t,e){return!e||"object"!==E_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function T_(t,e,n){return(T_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=x_(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function x_(t){return(x_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function __(t,e){return(__=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var S_=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{onUpdate:function(){}};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=O_(this,x_(e).call(this,"".concat(o,"-auto-fill-menu"),n))).addItem(new w_({text:"以序列的方式填充",value:e.FILL_TYPE.SERIALIZE}).attr("title","只有在起始单元格内容为数字时才生效")),t.addItem(new w_({text:"填充单元格内容",value:e.FILL_TYPE.FILLING}).attr("title","默认使用内容填充")),t.bind(),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&__(t,e)}(e,t),n=e,(i=[{key:"unbind",value:function(){this.menus.forEach((function(t){$.unbind(t)}))}},{key:"bind",value:function(){var t=this;this.menus.forEach((function(e){$.bind(e,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.options.onUpdate(e)}))}))}},{key:"destroy",value:function(){T_(x_(e.prototype),"destroy",this).call(this),this.unbind()}}])&&m_(n.prototype,i),c&&m_(n,c),e}(me);function k_(t){return(k_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function P_(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function R_(t,e,n){return(R_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=j_(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function j_(t){return(j_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function L_(t,e){return(L_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}S_.FILL_TYPE={SERIALIZE:1,FILLING:2};var I_=function(t){function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{onUpdate:function(){}};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,r=j_(e).call(this,"".concat(o,"-auto-fill-type"),i),(t=!r||"object"!==k_(r)&&"function"!=typeof r?P_(n):r).autoFillTypeMenu=new S_({el:P_(t),onUpdate:function(e){t.options.onUpdate(e),t.autoFillTypeMenu.close(),t.close()}}),t.bind(),t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&L_(t,e)}(e,t),n=e,(i=[{key:"bind",value:function(){var t=this;$.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.autoFillTypeMenu.open()}))}},{key:"destroy",value:function(){R_(j_(e.prototype),"destroy",this).call(this),this.autoFillTypeMenu.destroy()}}])&&C_(n.prototype,i),c&&C_(n,c),e}(me);function A_(t){return(A_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N_(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var c,l=t[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function V_(t,e){return!e||"object"!==A_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function D_(t){return(D_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function M_(t,e){return(M_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function W_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function B_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Y_(t,e,n){return e&&B_(t.prototype,e),n&&B_(t,n),t}var H_=function(){function t(e){var n=e.targetViewRange,r=e.originViewRange,o=e.merge,i=void 0===o?function(){}:o,c=e.master,l=void 0===c?function(){}:c,a=e.onCopy,u=void 0===a?function(){}:a,s=e.xIteratorBuilder;W_(this,t),this.targetViewRange=n,this.originViewRange=r,this.master=l,this.merge=i,this.onCopy=u,this.xIteratorBuilder=s}return Y_(t,[{key:"copyStartRow",value:function(){return this.originViewRange.sri}},{key:"copyEndRow",value:function(){return this.originViewRange.eri}},{key:"nextCopyRow",value:function(t){return t>=this.copyEndRow()?this.copyStartRow():t+1}},{key:"copyStartCol",value:function(){return this.originViewRange.sci}},{key:"copyEndCol",value:function(){return this.originViewRange.eci}},{key:"nextCopyCol",value:function(t){return t>=this.copyEndCol()?this.copyStartCol():t+1}},{key:"pasteStartRow",value:function(){return this.targetViewRange.sri}},{key:"pasteEndRow",value:function(){return this.targetViewRange.eri}},{key:"pasteStartCol",value:function(){return this.targetViewRange.sci}},{key:"pasteEndCol",value:function(){return this.targetViewRange.eci}},{key:"executeCopy",value:function(){var t=this,e=this.copyStartRow();this.xIteratorBuilder.getRowIterator().setBegin(this.pasteStartRow()).setEnd(this.pasteEndRow()).setLoop((function(n){var r=t.copyStartCol();t.xIteratorBuilder.getColIterator().setBegin(t.pasteStartCol()).setEnd(t.pasteEndCol()).setLoop((function(o){var i=t.merge(e,r);i&&t.master(e,r,i)&&t.onCopy(n,o,i)})).setNext((function(){r=t.nextCopyCol(r)})).execute()})).setNext((function(){e=t.nextCopyRow(e)})).foldOnOff(!1).execute()}}]),t}(),F_=function(){function t(e){var n=e.targetViewRange,r=e.originViewRange,o=e.onCopy,i=void 0===o?function(){}:o,c=e.xIteratorBuilder;W_(this,t),this.targetViewRange=n,this.originViewRange=r,this.onCopy=i,this.xIteratorBuilder=c}return Y_(t,[{key:"copyStartRow",value:function(){var t=this.originViewRange,e=t.sri,n=t.eri;return this.xIteratorBuilder.getRowIterator().setBegin(e-1).setEnd(n).nextRow()}},{key:"copyEndRow",value:function(){var t=this.originViewRange,e=t.sri,n=t.eri;return this.xIteratorBuilder.getRowIterator().setBegin(n+1).setEnd(e).nextRow()}},{key:"nextCopyRow",value:function(t){var e=this.copyEndRow();return t>=e?this.copyStartRow():this.xIteratorBuilder.getRowIterator().setBegin(t).setEnd(e).nextRow()}},{key:"copyStartCol",value:function(){return this.originViewRange.sci}},{key:"copyEndCol",value:function(){return this.originViewRange.eci}},{key:"nextCopyCol",value:function(t){return t>=this.copyEndCol()?this.copyStartCol():t+1}},{key:"pasteStartRow",value:function(){return this.targetViewRange.sri}},{key:"pasteEndRow",value:function(){return this.targetViewRange.eri}},{key:"pasteStartCol",value:function(){return this.targetViewRange.sci}},{key:"pasteEndCol",value:function(){return this.targetViewRange.eci}},{key:"executeCopy",value:function(){var t=this,e=this.copyStartRow();this.xIteratorBuilder.getRowIterator().setBegin(this.pasteStartRow()).setEnd(this.pasteEndRow()).setLoop((function(n){var r=t.copyStartCol();t.xIteratorBuilder.getColIterator().setBegin(t.pasteStartCol()).setEnd(t.pasteEndCol()).setLoop((function(o){t.onCopy(n,o,e,r)})).setNext((function(){r=t.nextCopyCol(r)})).execute()})).setNext((function(){e=t.nextCopyRow(e)})).execute()}}]),t}(),U_=function(){function t(e){var n=e.originViewRange,r=e.direction,o=e.getStartIndex,i=e.onSerialize,c=e.xIteratorBuilder;W_(this,t),this.originViewRange=n,this.direction=r,this.getStartIndex=o,this.onSerialize=i,this.xIteratorBuilder=c}return Y_(t,[{key:"serializeRight",value:function(){var t=this,e=this.originViewRange,n=this.onSerialize,r=this.getStartIndex,o=e.sri,i=e.sci,c=e.eri,l=e.eci,a=!0;this.xIteratorBuilder.getRowIterator().setBegin(o).setEnd(c).setLoop((function(e){var o=H.Nul;return t.xIteratorBuilder.getColIterator().setBegin(i).setEnd(l).setLoop((function(t){if(o===H.Nul){var i=r(e,t);H.isNumber(i)?o=parseInt(i,10):a=!1}else n(e,t,o+=1);return a})).execute(),a})).execute()}},{key:"serializeBottom",value:function(){var t=this,e=this.originViewRange,n=this.onSerialize,r=this.getStartIndex,o=e.sri,i=e.sci,c=e.eri,l=e.eci,a=!0;this.xIteratorBuilder.getColIterator().setBegin(i).setEnd(l).setLoop((function(e){var i=H.Nul;return t.xIteratorBuilder.getRowIterator().setBegin(o).setEnd(c).setLoop((function(t){if(i===H.Nul){var o=r(t,e);H.isNumber(o)?i=parseInt(o,10):a=!1}else n(t,e,i+=1);return a})).execute(),a})).execute()}},{key:"serializeTop",value:function(){var t=this,e=this.originViewRange,n=this.onSerialize,r=this.getStartIndex,o=e.sri,i=e.sci,c=e.eri,l=e.eci,a=!0;this.xIteratorBuilder.getColIterator().setBegin(i).setEnd(l).setLoop((function(e){var i=H.Nul;return t.xIteratorBuilder.getRowIterator().setBegin(c).setEnd(o).setLoop((function(t){if(i===H.Nul){var o=r(t,e);H.isNumber(o)?i=parseInt(o,10):a=!1}else n(t,e,i-=1);return a})).execute(),a})).execute()}},{key:"serializeLeft",value:function(){var t=this,e=this.originViewRange,n=this.onSerialize,r=this.getStartIndex,o=e.sri,i=e.sci,c=e.eri,l=e.eci,a=!0;this.xIteratorBuilder.getRowIterator().setBegin(o).setEnd(c).setLoop((function(e){var o=H.Nul;return t.xIteratorBuilder.getColIterator().setBegin(l).setEnd(i).setLoop((function(t){if(o===H.Nul){var i=r(e,t);H.isNumber(i)?o=parseInt(i,10):a=!1}else n(e,t,o-=1)})).execute(),a})).execute()}},{key:"executeSerialize",value:function(){switch(this.direction){case t.SERIALIZE_DIRECTION.LEFT:this.serializeLeft();break;case t.SERIALIZE_DIRECTION.TOP:this.serializeTop();break;case t.SERIALIZE_DIRECTION.RIGHT:this.serializeRight();break;case t.SERIALIZE_DIRECTION.BOTTOM:this.serializeBottom()}}}]),t}();U_.SERIALIZE_DIRECTION={RIGHT:3,BOTTOM:4,TOP:1,LEFT:2};var G_=function(t){function e(t){var n;return W_(this,e),(n=V_(this,D_(e).call(this))).table=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&M_(t,e)}(e,t),Y_(e,[{key:"getStyleTable",value:function(){return this.table.xTableStyle}},{key:"getTableDataSnapshot",value:function(){return this.table.tableDataSnapshot}},{key:"getXTableAreaView",value:function(){return this.table.xTableAreaView}},{key:"getRows",value:function(){return this.table.rows}},{key:"getCols",value:function(){return this.table.cols}},{key:"getCells",value:function(){return this.table.getTableCells()}},{key:"getMerges",value:function(){return this.table.getTableMerges()}},{key:"getXIteratorBuilder",value:function(){return this.table.xIteratorBuilder}},{key:"copyCellINContent",value:function(t){var e=t.originViewRange,n=t.targetViewRange,r=this.table.xIteratorBuilder,o=this.getTableDataSnapshot(),i=this.getCells(),c=o.cellDataProxy;new F_({originViewRange:e,targetViewRange:n,xIteratorBuilder:r,onCopy:function(t,e,n,r){var o=i.getCell(n,r);if(o){var l=o.clone();c.setCell(t,e,l)}}}).executeCopy()}},{key:"copyMergeContent",value:function(t){var e=t.originViewRange,n=t.targetViewRange,r=this.table.xIteratorBuilder,o=this.getTableDataSnapshot(),i=this.getMerges(),c=o.mergeDataProxy;new H_({originViewRange:e,targetViewRange:n,xIteratorBuilder:r,merge:function(t,e){return i.getFirstIncludes(t,e)},master:function(t,e,n){return n.sri===t&&n.sci===e},onCopy:function(t,e,n){var o=N_(n.size(),2),l=o[0],a=o[1],u=new ss(t,e,t+(l-=1),e+(a-=1));r.getRowIterator().setBegin(u.sri).setEnd(u.eri).hasFold()||(u.each(r,(function(t,e){var n=i.getFirstIncludes(t,e);n&&c.deleteMerge(n)})),c.addMerge(u))}}).executeCopy()}},{key:"copyStylesContent",value:function(t){var e=t.originViewRange,n=t.targetViewRange,r=this.table.xIteratorBuilder,o=this.getTableDataSnapshot(),i=this.getCells(),c=o.cellDataProxy;new F_({originViewRange:e,targetViewRange:n,xIteratorBuilder:r,onCopy:function(t,e,n,r){var o=i.getCell(n,r);if(o){var l=i.getCellOrNew(t,e),a=o.clone();a.text=l.text,c.setCell(t,e,a)}}}).executeCopy()}},{key:"serializeContent",value:function(t){var e=t.originViewRange,n=t.direction,r=this.table.xIteratorBuilder,o=this.getTableDataSnapshot(),i=this.getCells(),c=o.cellDataProxy;new U_({originViewRange:e,direction:n,xIteratorBuilder:r,getStartIndex:function(t,e){var n=i.getCell(t,e);return n?n.text:H.Nul},onSerialize:function(t,e,n){var r=i.getCellOrNew(t,e).clone();r.text="".concat(n),c.setCell(t,e,r)}}).executeSerialize()}}]),e}(gm);function z_(t){return(z_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X_(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var c,l=t[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Z_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function J_(t,e){return!e||"object"!==z_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function K_(t,e,n){return(K_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$_(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function $_(t){return($_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function q_(t,e){return(q_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Q_=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=J_(this,$_(e).call(this,{table:t}))).options=H.copy({mergeForceSplit:!1,onBeforeAutoFill:function(){},onAfterAutoFill:function(){}},r),n.moveDirection=null,n.autoFillRange=ss.EMPTY,n.display=!1,n.ltElem=new ct("".concat(o,"-x-autofill-area")),n.brElem=new ct("".concat(o,"-x-autofill-area")),n.lElem=new ct("".concat(o,"-x-autofill-area")),n.tElem=new ct("".concat(o,"-x-autofill-area")),n.blt.children(n.ltElem),n.bl.children(n.lElem),n.bt.children(n.tElem),n.bbr.children(n.brElem),n.setBorderType("dashed"),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&q_(t,e)}(e,t),n=e,(i=[{key:"onAdd",value:function(){this.bind(),this.hide()}},{key:"unbind",value:function(){var t=this.xScreen.findType(fh);$.bind([t.ltCorner,t.tCorner,t.lCorner,t.brCorner]),$.bind([t.ltCorner,t.tCorner,t.lCorner,t.brCorner]),$.bind([t.ltCorner,t.tCorner,t.lCorner,t.brCorner])}},{key:"bind",value:function(){var t=this,n=this.table,o=this.xScreen,i=n.mousePointer,c=o.findType(fh),l=new I_({onUpdate:function(e){switch(e.value){case S_.FILL_TYPE.SERIALIZE:t.serialize();break;case S_.FILL_TYPE.FILLING:}}});$.bind([c.ltCorner,c.tCorner,c.lCorner,c.brCorner],r.SYSTEM_EVENT_TYPE.MOUSE_LEAVE,(function(){i.free(e)})),$.bind([c.ltCorner,c.tCorner,c.lCorner,c.brCorner],r.SYSTEM_EVENT_TYPE.MOUSE_MOVE,(function(){i.lock(e),i.set(rh.KEYS.crosshair,e)})),$.bind([c.ltCorner,c.tCorner,c.lCorner,c.brCorner],r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(r){t.display=!0,i.lock(e),i.set(rh.KEYS.crosshair,e);var o=n.eventXy(r),a=o.x,u=o.y;t.rangeHandle(a,u),t.offsetHandle(),t.borderHandle(),$.mouseMoveUp(document,(function(e){var r=n.eventXy(e),o=r.x,i=r.y;t.rangeHandle(o,i),t.offsetHandle(),t.borderHandle()}),(function(){t.display=!1,i.free(e),t.autoFill(),t.hide();var n=t.autoFillRange;if(!n.equals(ss.EMPTY)){var r=c.selectRange;c.setRange(r.union(n));var o=c.activeCorner;l.setEL(o),l.open()}}))}))}},{key:"rangeHandle",value:function(t,e){var n=this.table,r=n.xIteratorBuilder,o=n.xScreen.findType(fh),i=n.getTableMerges(),c=o.selectRange,l=o.selectLocal,a=n.cols,u=n.rows,s=c.sri,f=c.sci,h=c.eri,y=c.eci,p=n.getRiCiByXy(t,e),b=p.ri,d=p.ci,v=i.getFirstIncludes(s,f),g=sh.BR!==l||H.isNotUnDef(v),w=X_(c.size(),2),E=w[0],m=w[1],O=b,T=d;O<0?O=0:O>u.len&&(O=u.len-1),T<0?T=0:T>a.len&&(T=a.len-1);var x=ss.EMPTY,_=H.Undef;if(O<s||b>h){if(O<s)if(_=U_.SERIALIZE_DIRECTION.TOP,g){var S=s,k=0;r.getRowIterator().setBegin(s-1).setEnd(0).setLoop((function(t){if(t<b)return!1;if(k%E==0){var e=S-E;e>=0&&(S=e)}return k+=1,!0})).foldOnOff(!1).execute(),S!==s&&(x=new ss(S,f,s-1,y))}else{var C=r.getRowIterator().setBegin(s).setEnd(0).nextRow();x=new ss(b,f,C,y)}if(O>h)if(_=U_.SERIALIZE_DIRECTION.BOTTOM,g){var P=h,R=0;r.getRowIterator().setBegin(h+1).setEnd(u.len-1).setLoop((function(t){if(t>b)return!1;if(R%E==0){var e=P+E;e>=0&&(P=e)}return R+=1,!0})).foldOnOff(!1).execute(),P!==h&&(x=new ss(h+1,f,P,y))}else{var j=r.getRowIterator().setBegin(h).setEnd(u.len-1).nextRow();x=new ss(j,f,b,y)}}else if(T<f||d>y){if(T<f)if(_=U_.SERIALIZE_DIRECTION.LEFT,g){var L=f,I=0;r.getColIterator().setBegin(f-1).setEnd(0).setLoop((function(t){if(t<d)return!1;if(I%m==0){var e=L-m;e>=0&&(L=e)}return I+=1,!0})).execute(),L!==f&&(x=new ss(s,L,h,f-1))}else{var A=r.getColIterator().setBegin(f).setEnd(0).nextRow();x=new ss(s,d,h,A)}if(T>y)if(_=U_.SERIALIZE_DIRECTION.RIGHT,g){var N=y,V=0;r.getColIterator().setBegin(y+1).setEnd(a.len-1).setLoop((function(t){if(t>d)return!1;if(V%m==0){var e=N+m;e>=0&&(N=e)}return V+=1,!0})).execute(),N!==y&&(x=new ss(s,y+1,h,N))}else{var D=r.getColIterator().setBegin(y).setEnd(a.len-1).nextRow();x=new ss(s,D,h,d)}}if(x){var M=a.sectionSumWidth(x.sci,x.eci),W=u.sectionSumHeight(x.sri,x.eri);x.w=M,x.h=W}this.autoFillRange=x,this.moveDirection=_}},{key:"borderHandle",value:function(){var t=this.xScreen,e=this.autoFillRange;if(!1===this.display||e.equals(ss.EMPTY))this.hideBorder();else{var n=t.findType(fh).selectRange.union(e);this.showBorder(n)}}},{key:"offsetHandle",value:function(){var t=this.xScreen,e=this.autoFillRange;if(!1===this.display||e.equals(ss.EMPTY))this.hide();else{var n=t.findType(fh).selectRange.union(e);this.show(),this.setDisplay(n),this.setSizer(n),this.setLocal(n)}}},{key:"serialize",value:function(){var t=this.table,e=this.xScreen,n=this.autoFillRange,r=this.moveDirection,o=t.cellMergeCopyHelper,i=t.tableDataSnapshot,c=e.findType(fh);i.begin(),o.serializeContent({originViewRange:n.union(c.selectRange),direction:r}),i.end(),t.render()}},{key:"autoFill",value:function(){if(!this.autoFillRange.equals(ss.EMPTY)){var t=this.table,e=this.options,n=t.tableDataSnapshot;e.onBeforeAutoFill(),n.begin(),this.splitMerge(),this.fillMerge(),this.fillCellIN(),n.end(),e.onAfterAutoFill(),t.render()}}},{key:"fillMerge",value:function(){var t=this.table,e=this.xScreen,n=this.autoFillRange,r=t.cellMergeCopyHelper,o=e.findType(fh);r.copyMergeContent({targetViewRange:n,originViewRange:o.selectRange})}},{key:"fillCellIN",value:function(){var t=this.table,e=this.xScreen,n=this.autoFillRange,r=t.cellMergeCopyHelper,o=e.findType(fh);r.copyCellINContent({targetViewRange:n,originViewRange:o.selectRange})}},{key:"splitMerge",value:function(){var t=this.table,e=this.autoFillRange,n=t.getTableMerges(),r=t.tableDataSnapshot.mergeDataProxy;n.getIncludes(e,(function(t){r.deleteMerge(t)}))}},{key:"destroy",value:function(){K_($_(e.prototype),"destroy",this).call(this),this.unbind()}}])&&Z_(n.prototype,i),c&&Z_(n,c),e}(Jf);function tS(t){return(tS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nS(t,e){return!e||"object"!==tS(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rS(t){return(rS=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function oS(t,e){return(oS=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var iS=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=nS(this,rS(e).call(this,"".concat(o,"-table-drop-row-fixed-bar")))).block=z("div","".concat(o,"-table-drop-row-fixed-block")),n.children(n.block),n.table=t,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&oS(t,e)}(e,t),n=e,(r=[{key:"onAttach",value:function(){this.setSize(),this.hide()}},{key:"setSize",value:function(){var t=this.table,e=this.block,n=t.visualWidth();e.offset({width:t.getIndexWidth(),height:6}),this.offset({height:6,width:n,left:0})}}])&&eS(n.prototype,r),i&&eS(n,i),e}(ct);function cS(t){return(cS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function aS(t,e){return!e||"object"!==cS(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function uS(t){return(uS=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sS(t,e){return(sS=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fS=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=aS(this,uS(e).call(this,"".concat(o,"-table-drop-col-fixed-bar")))).block=z("div","".concat(o,"-table-drop-col-fixed-block")),n.children(n.block),n.table=t,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sS(t,e)}(e,t),n=e,(r=[{key:"onAttach",value:function(){this.setSize(),this.hide()}},{key:"setSize",value:function(){var t=this.table,e=this.block,n=t.visualHeight();e.offset({height:t.getIndexHeight(),width:6}),this.offset({height:n,width:6,top:0})}}])&&lS(n.prototype,r),i&&lS(n,i),e}(ct);function hS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var yS=function(){function t(e){var n=e.fixedView,r=void 0===n?new ss(0,0,-1,-1):n,o=e.fxLeft,i=void 0===o?-1:o,c=e.fxTop,l=void 0===c?-1:c;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fixedView=r,i>-1&&(this.fixedView.eci=i),l>-1&&(this.fixedView.eri=l)}var e,n,r;return e=t,(n=[{key:"setFixedView",value:function(t){this.fixedView=t.clone()}},{key:"getFixedView",value:function(){return this.fixedView.clone()}},{key:"hasFixedLeft",value:function(){return this.fixedView.eci>-1}},{key:"hasFixedTop",value:function(){return this.fixedView.eri>-1}}])&&hS(e.prototype,n),r&&hS(e,r),t}();function pS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var bS=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.change=!1}var e,n,r;return e=t,(n=[{key:"endNotice",value:function(){this.change&&(this.change=!1)}},{key:"backNotice",value:function(){this.change&&(this.change=!1)}},{key:"goNotice",value:function(){this.change&&(this.change=!1)}}])&&pS(e.prototype,n),r&&pS(e,r),t}();function dS(t){return(dS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gS(t,e){return!e||"object"!==dS(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wS(t,e,n){return(wS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ES(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function ES(t){return(ES=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mS(t,e){return(mS=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var OS=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{on:{setCell:function(){}}};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=gS(this,ES(e).call(this))).snapshot=t,n.option=r,n}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mS(t,e)}(e,t),n=e,(o=[{key:"$setCell",value:function(t,e,n){this.change=!0,this.snapshot.cells.setCellOrNew(t,e,n)}},{key:"setCell",value:function(t,e,n){var r=this.option,o=this.snapshot,i=r.on.setCell,c=o.cells.getCell(t,e);this.$setCell(t,e,n),i(t,e,c,n)}},{key:"endNotice",value:function(){var t=this.snapshot.table;this.change&&t.trigger(r.TABLE_EVENT_TYPE.DATA_CHANGE),wS(ES(e.prototype),"endNotice",this).call(this)}},{key:"goNotice",value:function(){var t=this.snapshot.table;this.change&&t.trigger(r.TABLE_EVENT_TYPE.DATA_CHANGE),wS(ES(e.prototype),"goNotice",this).call(this)}},{key:"backNotice",value:function(){var t=this.snapshot.table;this.change&&t.trigger(r.TABLE_EVENT_TYPE.DATA_CHANGE),wS(ES(e.prototype),"backNotice",this).call(this)}}])&&vS(n.prototype,o),i&&vS(n,i),e}(bS);var TS=function t(e){var n=e.ri,r=e.ci,o=e.oldCell,i=e.newCell;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ri=n,this.ci=r,this.oldCell=o,this.newCell=i};var xS={ADD:Symbol("添加一个合并单元格"),DELETE:Symbol("删除一个合并单元格")},_S=function t(e){var n=e.merge,r=e.recordType;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.merge=n,this.recordType=r};function SS(t){return(SS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function CS(t,e){return!e||"object"!==SS(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function PS(t,e,n){return(PS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=RS(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function RS(t){return(RS=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jS(t,e){return(jS=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var LS=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{on:{addMerge:function(){},deleteMerge:function(){}}};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=CS(this,RS(e).call(this))).snapshot=t,n.option=r,n}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jS(t,e)}(e,t),n=e,(o=[{key:"$addMerge",value:function(t){var e=this;this.change=!0;var n=this.snapshot.merges;n.getIncludes(t,(function(t){return e.deleteMerge(t)})),n.add(t,!1)}},{key:"$deleteMerge",value:function(t){this.change=!0,this.snapshot.merges.delete(t)}},{key:"deleteMerge",value:function(t){var e=this.option.on.deleteMerge;this.$deleteMerge(t),e(t)}},{key:"addMerge",value:function(t){var e=this.option.on.addMerge;this.$addMerge(t),e(t)}},{key:"endNotice",value:function(){var t=this.snapshot.table;this.change&&t.trigger(r.TABLE_EVENT_TYPE.DATA_CHANGE),PS(RS(e.prototype),"endNotice",this).call(this)}},{key:"goNotice",value:function(){var t=this.snapshot.table;this.change&&t.trigger(r.TABLE_EVENT_TYPE.DATA_CHANGE),PS(RS(e.prototype),"goNotice",this).call(this)}},{key:"backNotice",value:function(){var t=this.snapshot.table;this.change&&t.trigger(r.TABLE_EVENT_TYPE.DATA_CHANGE),PS(RS(e.prototype),"backNotice",this).call(this)}}])&&kS(n.prototype,o),i&&kS(n,i),e}(bS);function IS(t){return(IS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function AS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function NS(t,e){return!e||"object"!==IS(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function VS(t,e,n){return(VS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=DS(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function DS(t){return(DS=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function MS(t,e){return(MS=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var WS=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{on:{setWidth:function(){}}};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=NS(this,DS(e).call(this))).snapshot=t,n.option=r,n}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&MS(t,e)}(e,t),n=e,(o=[{key:"$setWidth",value:function(t,e){this.change=!0,this.snapshot.cols.setWidth(t,e)}},{key:"setWidth",value:function(t,e){var n=this.option,r=this.snapshot,o=n.on.setWidth,i=r.cols.getWidth(t);this.$setWidth(t,e),o(t,i,e)}},{key:"endNotice",value:function(){var t=this.snapshot.table;this.change&&(t.trigger(r.TABLE_EVENT_TYPE.DATA_CHANGE),t.trigger(r.TABLE_EVENT_TYPE.CHANGE_WIDTH)),VS(DS(e.prototype),"endNotice",this).call(this)}},{key:"backNotice",value:function(){var t=this.snapshot.table;this.change&&(t.trigger(r.TABLE_EVENT_TYPE.DATA_CHANGE),t.trigger(r.TABLE_EVENT_TYPE.CHANGE_WIDTH)),VS(DS(e.prototype),"backNotice",this).call(this)}},{key:"goNotice",value:function(){var t=this.snapshot.table;this.change&&(t.trigger(r.TABLE_EVENT_TYPE.DATA_CHANGE),t.trigger(r.TABLE_EVENT_TYPE.CHANGE_WIDTH)),VS(DS(e.prototype),"goNotice",this).call(this)}}])&&AS(n.prototype,o),i&&AS(n,i),e}(bS);var BS=function t(e){var n=e.ci,r=e.oldWidth,o=e.newWidth;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ci=n,this.oldWidth=r,this.newWidth=o};function YS(t){return(YS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function HS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function FS(t,e){return!e||"object"!==YS(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function US(t,e,n){return(US="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=GS(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function GS(t){return(GS=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zS(t,e){return(zS=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var XS=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{on:{setHeight:function(){}}};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=FS(this,GS(e).call(this))).snapshot=t,n.option=r,n}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zS(t,e)}(e,t),n=e,(o=[{key:"$setHeight",value:function(t,e){this.change=!0,this.snapshot.rows.setHeight(t,e)}},{key:"setHeight",value:function(t,e){var n=this.option,r=this.snapshot,o=n.on.setHeight,i=r.rows.getHeight(t);this.$setHeight(t,e),o(t,i,e)}},{key:"endNotice",value:function(){var t=this.snapshot.table;this.change&&(t.trigger(r.TABLE_EVENT_TYPE.DATA_CHANGE),t.trigger(r.TABLE_EVENT_TYPE.CHANGE_HEIGHT)),US(GS(e.prototype),"endNotice",this).call(this)}},{key:"backNotice",value:function(){var t=this.snapshot.table;this.change&&(t.trigger(r.TABLE_EVENT_TYPE.DATA_CHANGE),t.trigger(r.TABLE_EVENT_TYPE.CHANGE_HEIGHT)),US(GS(e.prototype),"backNotice",this).call(this)}},{key:"goNotice",value:function(){var t=this.snapshot.table;this.change&&(t.trigger(r.TABLE_EVENT_TYPE.DATA_CHANGE),t.trigger(r.TABLE_EVENT_TYPE.CHANGE_HEIGHT)),US(GS(e.prototype),"goNotice",this).call(this)}}])&&HS(n.prototype,o),i&&HS(n,i),e}(bS);var ZS=function t(e){var n=e.ri,r=e.oldHeight,o=e.newHeight;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ri=n,this.oldHeight=r,this.newHeight=o};function JS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var KS=function(){function t(e){var n=this,r=e.table,o=e.cells,i=e.merges,c=e.cols,l=e.rows;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.record=!1,this.backLayerStack=[],this.recordLayer=[],this.goLayerStack=[],this.table=r,this.cells=o,this.merges=i,this.cols=c,this.rows=l,this.mergeDataProxy=new LS(this,{on:{deleteMerge:function(t){!1!==n.record&&n.recordLayer.push(new _S({merge:t,recordType:xS.DELETE}))},addMerge:function(t){!1!==n.record&&n.recordLayer.push(new _S({merge:t,recordType:xS.ADD}))}}}),this.cellDataProxy=new OS(this,{on:{setCell:function(t,e,r,o){!1!==n.record&&n.recordLayer.push(new TS({ri:t,ci:e,oldCell:r,newCell:o}))}}}),this.colsDataProxy=new WS(this,{on:{setWidth:function(t,e,r){!1!==n.record&&n.recordLayer.push(new BS({ci:t,oldWidth:e,newWidth:r}))}}}),this.rowsDataProxy=new XS(this,{on:{setHeight:function(t,e,r){!1!==n.record&&n.recordLayer.push(new ZS({ri:t,oldHeight:e,newHeight:r}))}}})}var e,n,r;return e=t,(n=[{key:"back",value:function(){for(var t=this.backLayerStack,e=this.goLayerStack,n=this.table,r=t.pop(),o=r.length-1;o>=0;o-=1){var i=r[o];if(i instanceof TS){var c=i.ri,l=i.ci,a=i.oldCell;this.cellDataProxy.$setCell(c,l,a)}else if(i instanceof _S)switch(i.recordType){case xS.DELETE:var u=i.merge;this.mergeDataProxy.$addMerge(u);break;case xS.ADD:var s=i.merge;this.mergeDataProxy.$deleteMerge(s)}else if(i instanceof BS){var f=i.ci,h=i.oldWidth;this.colsDataProxy.$setWidth(f,h)}else if(i instanceof ZS){var y=i.ri,p=i.oldHeight;this.rowsDataProxy.$setHeight(y,p)}}e.push(r),this.mergeDataProxy.backNotice(),this.cellDataProxy.backNotice(),this.colsDataProxy.backNotice(),this.rowsDataProxy.backNotice(),n.render()}},{key:"go",value:function(){for(var t=this.backLayerStack,e=this.goLayerStack,n=this.table,r=e.pop(),o=0,i=r.length;o<i;o+=1){var c=r[o];if(c instanceof TS){var l=c.ri,a=c.ci,u=c.newCell;this.cellDataProxy.$setCell(l,a,u)}else if(c instanceof _S)switch(c.recordType){case xS.DELETE:var s=c.merge;this.mergeDataProxy.$deleteMerge(s);break;case xS.ADD:var f=c.merge;this.mergeDataProxy.$addMerge(f)}else if(c instanceof BS){var h=c.ci,y=c.newWidth;this.colsDataProxy.$setWidth(h,y)}else if(c instanceof ZS){var p=c.ri,b=c.newHeight;this.rowsDataProxy.$setHeight(p,b)}}t.push(r),this.mergeDataProxy.goNotice(),this.cellDataProxy.goNotice(),this.colsDataProxy.goNotice(),this.rowsDataProxy.goNotice(),n.render()}},{key:"end",value:function(){var t=this.recordLayer,e=this.backLayerStack;this.record=!1,t.length&&e.push(t),this.recordLayer=[],this.mergeDataProxy.endNotice(),this.cellDataProxy.endNotice(),this.colsDataProxy.endNotice(),this.rowsDataProxy.endNotice()}},{key:"begin",value:function(){this.record=!0,this.goLayerStack=[]}},{key:"canBack",value:function(){return 0!==this.backLayerStack.length}},{key:"canGo",value:function(){return 0!==this.goLayerStack.length}}])&&JS(e.prototype,n),r&&JS(e,r),t}();function $S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var qS=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.target,r=void 0===n?document.body:n,o=e.filter,i=void 0===o?function(){return!1}:o,c=e.paste,l=void 0===c?function(){}:c;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.target=r,this.filter=i,this.paste=l,this.bind()}var e,n,r;return e=t,(n=[{key:"bind",value:function(){var t=this.target,e=this.paste,n=this.filter;$.bind(t,"paste",(function(t){n()&&e(t)}))}}])&&$S(e.prototype,n),r&&$S(e,r),t}();function QS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var tk=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.activate=e}var e,n,r;return e=t,(n=[{key:"setActivate",value:function(t){this.activate=t}}])&&QS(e.prototype,n),r&&QS(e,r),t}();function ek(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nk(t,e,n){return e&&ek(t.prototype,e),n&&ek(t,n),t}var rk=function(){function t(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).focus,n=void 0===e?new tk:e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.focus=n}return nk(t,[{key:"xIconsEvent",value:function(t){var e=t.type,n=t.native,r=t.sx,o=t.sy,i=t.fx,c=t.fy,l=t.staticIcons,a=void 0===l?[]:l,u=t.fixedIcons,s=void 0===u?[]:u;a.length+s.length===0?this.clearFocus():(a.forEach((function(t){t.eventHandle({type:e,x:r,y:o,native:n})})),s.forEach((function(t){t.eventHandle({type:e,x:i,y:c,native:n})})))}},{key:"clearFocus",value:function(){var t=this.focus,e=t.activate;e&&(t.setActivate(null),e.onLeave())}}]),nk(t,[{key:"build",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.focus,n=new Mu(t);return n.setFocus(e),n}}]),t}();function ok(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ik=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.finishCallback=function(){},this.loopCallback=function(){},this.nextCallback=function(){},this.end=0,this.begin=0}var e,n,r;return e=t,(n=[{key:"execute",value:function(){var t,e=this.loopCallback,n=this.nextCallback,r=this.begin,o=this.end;if(r>o)for(t=r;t>=o&&!1!==e(t);n(t-=1));else for(t=r;t<=o&&!1!==e(t);n(t+=1));return this.finishCallback(t),this}},{key:"setLoop",value:function(t){return this.loopCallback=t,this}},{key:"setNext",value:function(t){return this.nextCallback=t,this}},{key:"setFinish",value:function(t){return this.finishCallback=t,this}},{key:"setEnd",value:function(t){return this.end=t,this}},{key:"setBegin",value:function(t){return this.begin=t,this}}])&&ok(e.prototype,n),r&&ok(e,r),t}();function ck(t){return(ck="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lk(t,e){return!e||"object"!==ck(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ak(t){return(ak=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function uk(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function sk(t,e,n){return e&&uk(t.prototype,e),n&&uk(t,n),t}function fk(t,e){return(fk=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var hk=[],yk=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=lk(this,ak(e).call(this))).skipCallback=function(){},t.useFold=!0,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fk(t,e)}(e,t),sk(e,null,[{key:"getInstance",value:function(){return new e}},{key:"setFold",value:function(t){hk=t}}]),sk(e,[{key:"execute",value:function(){var t,e=this.loopCallback,n=this.nextCallback,r=this.skipCallback,o=this.begin,i=this.end,c=this.useFold;if(o>i)for(t=o;t>=i;n(t-=1)){if(c&&hk[t])r(t);else if(!1===e(t))break}else for(t=o;t<=i;n(t+=1)){if(c&&hk[t])r(t);else if(!1===e(t))break}return this.finishCallback(t),this}},{key:"setSkip",value:function(t){return this.skipCallback=t,this}},{key:"nextRow",value:function(){var t=this.begin,e=-1;return this.setLoop((function(n){return n===t||(e=n,!1)})).execute(),e}},{key:"hasFold",value:function(){var t=!1;return this.setLoop((function(e){return!hk[e]||(t=!0,!1)})).foldOnOff(!1).execute(),t}},{key:"foldOnOff",value:function(t){return this.useFold=t,this}}]),e}(ik);function pk(t){return(pk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bk(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dk(t,e){return!e||"object"!==pk(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vk(t){return(vk=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gk(t,e){return(gk=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wk=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),dk(this,vk(e).apply(this,arguments))}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gk(t,e)}(e,t),n=e,o=[{key:"getInstance",value:function(){return new e}}],(r=[{key:"nextRow",value:function(){var t=this.begin,e=-1;return this.setLoop((function(n){return n===t||(e=n,!1)})).execute(),e}}])&&bk(n.prototype,r),o&&bk(n,o),e}(ik);function Ek(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var mk=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"getRowIterator",value:function(){return yk.getInstance()}},{key:"getColIterator",value:function(){return wk.getInstance()}}])&&Ek(e.prototype,n),r&&Ek(e,r),t}();function Ok(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Tk=function(){function t(e){var n=e.group,r=void 0===n?1e3:n,o=e.xFixedView,i=e.rows,c=e.xIteratorBuilder;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.groupIndex=[],this.rows=i,this.group=r,this.xFixedView=o,this.xIteratorBuilder=c,this.clear()}var e,n,r;return e=t,(n=[{key:"min",value:function(){var t=this.xFixedView,e=t.getFixedView(),n=0;return t.hasFixedTop()&&(n=e.eri+1),n}},{key:"limit",value:function(t,e,n){var r=this.groupIndex,o=this.group,i=this.rows,c=r[0],l=i.len-1;return e+=i.getHeight(t),t+=1,this.xIteratorBuilder.getRowIterator().setBegin(t).setEnd(l).setSkip((function(t){t%o==0&&r.push({ri:t,top:e})})).setLoop((function(t){if(t%o==0&&(r.push({ri:t,top:e}),e>n)){var l=r.length;return c=r[l-2],!1}return e+=i.getHeight(t),!0})).execute(),c}},{key:"clear",value:function(){var t=this.min();this.groupIndex=[{ri:t,top:0}]}},{key:"get",value:function(t){var e=this.groupIndex,n=this.group,r=this.rows,o=e.length;if(r.len<=n)return e[0];if(0===t)return e[0];for(var i=0;i<o;i++)if(e[i].top>t)return e[i-1];var c=e[o-1],l=c.ri,a=c.top;return this.limit(l,a,t)}}])&&Ok(e.prototype,n),r&&Ok(e,r),t}();function xk(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var c,l=t[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Sk(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_k(Object(n),!0).forEach((function(e){kk(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function kk(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ck(t,e,n){return(Ck="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Lk(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Pk(t){return(Pk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rk(t,e){return!e||"object"!==Pk(e)&&"function"!=typeof e?jk(t):e}function jk(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Lk(t){return(Lk=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ik(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ak(t,e)}function Ak(t,e){return(Ak=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Nk(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vk(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Dk(t,e,n){return e&&Vk(t.prototype,e),n&&Vk(t,n),t}var Mk=function(){function t(e){Nk(this,t),this.table=e,this.scrollView=null,this.width=null,this.height=null,this.x=null,this.y=null}return Dk(t,[{key:"reset",value:function(){this.scrollView=null,this.width=null,this.height=null,this.x=null,this.y=null}},{key:"getX",value:function(){throw new TypeError("child impl")}},{key:"getY",value:function(){throw new TypeError("child impl")}},{key:"getHeight",value:function(){throw new TypeError("child impl")}},{key:"getWidth",value:function(){throw new TypeError("child impl")}}]),t}(),Wk=function(t){function e(){return Nk(this,e),Rk(this,Lk(e).apply(this,arguments))}return Ik(e,t),Dk(e,[{key:"getWidth",value:function(){if(H.isNumber(this.width))return this.width;var t=this.table.xFixedMeasure.getWidth();return this.width=t,t}},{key:"getHeight",value:function(){if(H.isNumber(this.height))return this.height;var t=this.table.xFixedMeasure.getHeight();return this.height=t,t}},{key:"getX",value:function(){if(H.isNumber(this.x))return this.x;var t=this.table.index.getWidth();return this.x=t,t}},{key:"getY",value:function(){if(H.isNumber(this.y))return this.y;var t=this.table.index.getHeight();return this.y=t,t}},{key:"getScrollView",value:function(){if(H.isNotUnDef(this.scrollView))return this.scrollView.clone();var t=this.table,e=t.rows,n=t.cols,r=t.xFixedView.getFixedView();return r.w=n.rectRangeSumWidth(r),r.h=e.rectRangeSumHeight(r),this.scrollView=r,r.clone()}}]),e}(Mk),Bk=function(t){function e(){return Nk(this,e),Rk(this,Lk(e).apply(this,arguments))}return Ik(e,t),Dk(e,[{key:"getWidth",value:function(){if(H.isNumber(this.width))return this.width;var t=this.table,e=t.xLeft,n=t.index,r=t.visualWidth()-(n.getWidth()+e.getWidth());return this.width=r,r}},{key:"getHeight",value:function(){if(H.isNumber(this.height))return this.height;var t=this.table.index.getHeight();return this.height=t,t}},{key:"getX",value:function(){if(H.isNumber(this.x))return this.x;var t=this.table,e=t.xLeft,n=t.index.getWidth()+e.getWidth();return this.x=n,n}},{key:"getY",value:function(){if(H.isNumber(this.y))return this.y;return this.y=0,0}},{key:"getScrollView",value:function(){if(H.isNotUnDef(this.scrollView))return this.scrollView.clone();var t=this.table,e=t.index,n=t.xTableAreaView.getScrollView();return n.sri=0,n.eri=0,n.h=e.getHeight(),this.scrollView=n,n.clone()}}]),e}(Mk),Yk=function(t){function e(){return Nk(this,e),Rk(this,Lk(e).apply(this,arguments))}return Ik(e,t),Dk(e,[{key:"getWidth",value:function(){if(H.isNumber(this.width))return this.width;var t=this.table.index.getWidth();return this.width=t,t}},{key:"getHeight",value:function(){if(H.isNumber(this.height))return this.height;var t=this.table,e=t.xTop,n=t.index,r=t.visualHeight()-(n.getHeight()+e.getHeight());return this.height=r,r}},{key:"getX",value:function(){if(H.isNumber(this.x))return this.x;return this.x=0,0}},{key:"getY",value:function(){if(H.isNumber(this.y))return this.y;var t=this.table,e=t.xTop,n=t.index.getHeight()+e.getHeight();return this.y=n,n}},{key:"getScrollView",value:function(){if(H.isNotUnDef(this.scrollView))return this.scrollView.clone();var t=this.table,e=t.xTableAreaView,n=t.index,r=e.getScrollView();return r.sci=0,r.eci=0,r.w=n.getWidth(),this.scrollView=r,r.clone()}}]),e}(Mk),Hk=function(t){function e(){return Nk(this,e),Rk(this,Lk(e).apply(this,arguments))}return Ik(e,t),Dk(e,[{key:"getWidth",value:function(){if(H.isNumber(this.width))return this.width;var t=this.table.xFixedMeasure.getWidth();return this.width=t,t}},{key:"getHeight",value:function(){if(H.isNumber(this.height))return this.height;var t=this.table,e=t.xTop,n=t.index,r=t.visualHeight()-(n.getHeight()+e.getHeight());return this.height=r,r}},{key:"getX",value:function(){if(H.isNumber(this.x))return this.x;var t=this.table.index.getWidth();return this.x=t,t}},{key:"getY",value:function(){if(H.isNumber(this.y))return this.y;var t=this.table,e=t.xTop,n=t.index.getHeight()+e.getHeight();return this.y=n,n}},{key:"getScrollView",value:function(){if(H.isNotUnDef(this.scrollView))return this.scrollView.clone();var t=this.table,e=t.xFixedView,n=t.cols,r=t.xTableAreaView.getScrollView(),o=e.getFixedView();return r.sci=o.sci,r.eci=o.eci,r.w=n.sectionSumWidth(r.sci,r.eci),this.scrollView=r,r.clone()}}]),e}(Mk),Fk=function(t){function e(){return Nk(this,e),Rk(this,Lk(e).apply(this,arguments))}return Ik(e,t),Dk(e,[{key:"getWidth",value:function(){if(H.isNumber(this.width))return this.width;var t=this.table,e=t.xLeft,n=t.index,r=t.visualWidth()-(n.getWidth()+e.getWidth());return this.width=r,r}},{key:"getHeight",value:function(){if(H.isNumber(this.height))return this.height;var t=this.table.xFixedMeasure.getHeight();return this.height=t,t}},{key:"getX",value:function(){if(H.isNumber(this.x))return this.x;var t=this.table,e=t.xLeft,n=t.index.getWidth()+e.getWidth();return this.x=n,n}},{key:"getY",value:function(){if(H.isNumber(this.y))return this.y;var t=this.table.index.getHeight();return this.y=t,t}},{key:"getScrollView",value:function(){if(H.isNotUnDef(this.scrollView))return this.scrollView.clone();var t=this.table,e=t.xFixedView,n=t.rows,r=t.xTableAreaView.getScrollView(),o=e.getFixedView();return r.sri=o.sri,r.eri=o.eri,r.h=n.sectionSumHeight(r.sri,r.eri),this.scrollView=r,r.clone()}}]),e}(Mk),Uk=function(t){function e(){return Nk(this,e),Rk(this,Lk(e).apply(this,arguments))}return Ik(e,t),Dk(e,[{key:"getWidth",value:function(){if(H.isNumber(this.width))return this.width;var t=this.table,e=t.index,n=t.xLeft,r=t.visualWidth()-(e.getWidth()+n.getWidth());return this.width=r,r}},{key:"getHeight",value:function(){if(H.isNumber(this.height))return this.height;var t=this.table,e=t.xTop,n=t.index,r=t.visualHeight()-(n.getHeight()+e.getHeight());return this.height=r,r}},{key:"getX",value:function(){if(H.isNumber(this.x))return this.x;var t=this.table,e=t.xLeft,n=t.index.getWidth()+e.getWidth();return this.x=n,n}},{key:"getY",value:function(){if(H.isNumber(this.y))return this.y;var t=this.table,e=t.xTop,n=t.index.getHeight()+e.getHeight();return this.y=n,n}},{key:"getScrollView",value:function(){if(H.isNotUnDef(this.scrollView))return this.scrollView.clone();var t=this.table.xTableAreaView.getScrollView();return this.scrollView=t,t.clone()}}]),e}(Mk),Gk=function(){function t(){Nk(this,t)}return Dk(t,null,[{key:"register",value:function(t){var e=t.keyboard,n=t.cols,r=t.rows,o=t.xScreen,i=t.edit,c=o.findType(fh),l=t.getTableMerges(),a=null;e.register({target:t,keyCode:9,callback:function(){i.hideEdit();var t=c.selectRange,e=t.tabNext,o=t.clone();if(!e){var u=o.sri,s=o.sci;a={sri:u,sci:s}}var f=n.len-1,h=r.len-1,y=a,p=y.sri,b=y.sci,d=l.getFirstIncludes(p,b);if(d&&(b=d.eci),!(b>=f&&p>=h)){b>=f?(p+=1,b=0):b+=1,a.sri=p,a.sci=b;var v=p,g=b,w=l.getFirstIncludes(p,b);w&&(p=w.sri,b=w.sci,v=w.eri,g=w.eci),o.tabNext=!0,o.sri=p,o.sci=b,o.eri=v,o.eci=g,c.setRange(o),i.showEdit()}}})}}]),t}(),zk={index:{height:30,width:50,gridColor:"#c1c1c1",size:11,color:"#000000"},table:{showGrid:!0,background:"#ffffff",borderColor:"#000000",gridColor:"#e1e1e1"},rows:{len:1e3,height:30,data:[]},cols:{len:36,width:110,data:[]},xFixedView:{fixedView:new ss(0,0,-1,-1),fxLeft:-1,fxTop:-1},xFixedBar:{height:zg.HEIGHT,width:Lg.WIDTH,background:"#eaeaea",buttonColor:"#c1c1c1"},data:[],merge:{merges:[]}},Xk=function(t){function e(t){var n;return Nk(this,e),(n=Rk(this,Lk(e).call(this,"".concat(o,"-table")))).settings=H.copy({},zk,t),n.visualHeightCache=null,n.visualWidthCache=null,n.xIconBuilder=new rk,n.xIteratorBuilder=new mk,n.scale=new sg,n.index=new yg(Sk({scaleAdapter:new fg({goto:function(t){return x.srcTransformCssPx(n.scale.goto(t))}})},n.settings.index)),n.rows=new vg(Sk({scaleAdapter:new fg({goto:function(t){return x.srcTransformCssPx(n.scale.goto(t))}}),xIteratorBuilder:n.xIteratorBuilder},n.settings.rows)),n.cols=new mg(Sk({scaleAdapter:new fg({goto:function(t){return x.srcTransformCssPx(n.scale.goto(t))}}),xIteratorBuilder:n.xIteratorBuilder},n.settings.cols)),n.xFixedView=new yS(n.settings.xFixedView),n.xFixedMeasure=new qm({fixedView:n.xFixedView,cols:n.cols,rows:n.rows}),n.scroll=new Tg({xFixedView:n.xFixedView}),n.xTableScrollView=new ww({scroll:n.scroll,rows:n.rows,cols:n.cols,xIteratorBuilder:n.xIteratorBuilder,getHeight:function(){return n.xContent.getHeight()},getWidth:function(){return n.xContent.getWidth()}}),n.xTableAreaView=new mw({xTableScrollView:n.xTableScrollView,rows:n.rows,cols:n.cols,scroll:n.scroll}),n.xTableStyle=new Nx({xTableScrollView:n.xTableScrollView,scroll:n.scroll,xIteratorBuilder:n.xIteratorBuilder,settings:n.settings,xFixedView:n.xFixedView}),n.tableDataSnapshot=new KS({merges:n.getTableMerges(),cells:n.getTableCells(),table:jk(n),cols:n.cols,rows:n.rows}),n.xTableFrozenContent=new Wk(jk(n)),n.xLeftIndex=new Yk(jk(n)),n.xTopIndex=new Bk(jk(n)),n.xLeft=new Hk(jk(n)),n.xTop=new Fk(jk(n)),n.xContent=new Uk(jk(n)),n.focus=new bw(jk(n)),n.mousePointer=new rh(jk(n)),n.keyboard=new _g(jk(n)),n.xScreen=new p_(jk(n)),n.xReSizer=new Wg(jk(n)),n.yReSizer=new Qg(jk(n)),n.xHeightLight=new cw(jk(n)),n.yHeightLight=new yw(jk(n)),n.edit=new Rw(jk(n)),n.rowFixed=new zg(jk(n)),n.colFixed=new Lg(jk(n)),n.dropColFixed=new fS(jk(n)),n.dropRowFixed=new iS(jk(n)),n.cellMergeCopyHelper=new G_(jk(n)),n.clipboard=new qS({filter:function(){return jk(n).focus.activate.target===jk(n)},paste:function(){}}),n.rowHeightGroupIndex=new Tk({rows:n.rows,xFixedView:n.xFixedView,xIteratorBuilder:n.xIteratorBuilder}),n}return Ik(e,t),Dk(e,[{key:"rowsReduceIf",value:function(t,e,n,r,o,i){var c=n,l=r,a=t;return this.xIteratorBuilder.getRowIterator().setBegin(a).setEnd(e-1).setLoop((function(t){return!(c>=o)&&(l=i(t),c+=l,!0)})).setFinish((function(t){a=t})).execute(),[a,c-l,l]}},{key:"colsReduceIf",value:function(t,e,n,r,o,i){var c=n,l=r,a=t;return this.xIteratorBuilder.getColIterator().setBegin(a).setEnd(e-1).setLoop((function(t){return!(c>=o)&&(l=i(t),c+=l,!0)})).setFinish((function(t){a=t})).execute(),[a,c-l,l]}},{key:"getOperateCellsHelper",value:function(){return this.xTableStyle.operateCellsHelper}},{key:"getStyleCellsHelper",value:function(){return this.xTableStyle.styleCellsHelper}},{key:"getXTableStyle",value:function(){return this.xTableStyle}},{key:"getTableMerges",value:function(){return this.xTableStyle.merges}},{key:"getTableCells",value:function(){return this.xTableStyle.cells}},{key:"getScrollTotalHeight",value:function(){var t,e=this.xFixedView,n=this.rows;if(e.hasFixedTop()){var r=e.getFixedView();t=n.sectionSumHeight(r.eri+1,n.len-1)}else t=n.sectionSumHeight(0,n.len-1);return t}},{key:"getScrollTotalWidth",value:function(){var t,e=this.xFixedView,n=this.cols;if(e.hasFixedLeft()){var r=e.getFixedView();t=n.sectionSumWidth(r.eci,n.len-1)}else t=n.sectionSumWidth(0,n.len-1);return t}},{key:"getCellCssStyle",value:function(t,e){var n=this.getTableCells().getCell(t,e),r=n.fontAttr,o=n.background,i=r.align,c=r.size,l=r.color,a=r.bold,u=r.italic,s=r.name,f=x.srcTransformCssPx(this.scale.goto(c)),h="left";switch(i){case al.ALIGN.left:h="left";break;case al.ALIGN.center:h="center";break;case al.ALIGN.right:h="right"}return"\n      text-align:".concat(h,";\n      color: ").concat(l,";\n      background:").concat(o,";\n      font-style: ").concat(u?"italic":"initial",";\n      font-weight: ").concat(a?"bold":"initial",";\n      font-size: ").concat(x.srcTransformCssPx(f),"px;\n      font-family: ").concat(s,";\n    ").replace(/\s/g,"")}},{key:"getIndexHeight",value:function(){return this.index.getHeight()}},{key:"getIndexWidth",value:function(){return this.index.getWidth()}},{key:"getContentHeight",value:function(){return this.xContent.getHeight()}},{key:"getContentWidth",value:function(){return this.xContent.getWidth()}},{key:"getFixedWidth",value:function(){return this.xLeft.getWidth()}},{key:"getFixedHeight",value:function(){return this.xTop.getHeight()}},{key:"visualWidth",value:function(){if(H.isNumber(this.visualWidthCache))return this.visualWidthCache;var t=this.box().width;return this.visualWidthCache=t,t}},{key:"visualHeight",value:function(){if(H.isNumber(this.visualHeightCache))return this.visualHeightCache;var t=this.box().height;return this.visualHeightCache=t,t}},{key:"xIconsEvent",value:function(t,e,n){var r=this.xIconBuilder,o=this.getXTableStyle(),i=this.getTableCells(),c=o.fixedCellIcon,l=o.staticCellIcon,a=e.ri,u=e.ci,s=e.mri,f=e.mci,h=e.fx,y=e.fy,p=e.sx,b=e.sy,d=[],v=[],g=c.getIcon(a,u);g&&(v=v.concat(g));var w=i.getCell(s,f);w&&(d=d.concat(w.icons));var E=l.getIcon(s,f);E&&(d=d.concat(E)),r.xIconsEvent({native:n,type:t,staticIcons:d,fixedIcons:v,sx:x.srcTransformStylePx(p),sy:x.srcTransformStylePx(b),fx:x.srcTransformStylePx(h),fy:x.srcTransformStylePx(y)})}},{key:"pointerEvent",value:function(t){var e=this.mousePointer,n=t.ri,r=t.ci;-1!==n||-1!==r?-1!==n?-1!==r?e.set(rh.KEYS.cell):e.set(rh.KEYS.eResize):e.set(rh.KEYS.sResize):e.set(rh.KEYS.default)}},{key:"getRiCiByXy",value:function(t,e){var n=this.xFixedView,r=this.rows,o=this.cols,i=this.index,c=n.getFixedView(),l=this.getTableMerges(),a=this.getFixedWidth(),u=this.getFixedHeight(),s=t,f=e,h=-1,y=-1;s-=i.getWidth(),f-=i.getHeight();var p=0;if(s<=a&&t>i.getWidth()){var b=0;this.xIteratorBuilder.getColIterator().setBegin(c.sci).setEnd(c.eci).setLoop((function(t){var e=o.getWidth(t);return h=t,(b+=e)<s})).execute(),p=-1*(b-o.getWidth(h)-s)}else if(t>i.getWidth()){var d=a,v=this.getScrollView();this.xIteratorBuilder.getColIterator().setBegin(v.sci).setEnd(v.eci).setLoop((function(t){var e=o.getWidth(t);return h=t,(d+=e)<s})).execute(),p=-1*(d-o.getWidth(h)-s)}var g=0;if(f<u&&e>i.getHeight()){var w=0;this.xIteratorBuilder.getRowIterator().setBegin(c.sri).setEnd(c.eri).setLoop((function(t){var e=r.getHeight(t);return y=t,(w+=e)<=f})).execute(),g=-1*(w-r.getHeight(y)-f)}else if(e>i.getHeight()){var E=u,m=this.getScrollView();this.xIteratorBuilder.getRowIterator().setBegin(m.sri).setEnd(m.eri).setLoop((function(t){var e=r.getHeight(t);return y=t,(E+=e)<=f})).execute(),g=-1*(E-r.getHeight(y)-f)}var O=l.getFirstIncludes(y,h),T=h,x=y,_=p,S=g;if(O){x=O.sri,T=O.sci;var k=this.rows,C=this.cols;S+=k.sectionSumHeight(x,y-1),_+=C.sectionSumWidth(T,h-1)}return{ri:y,ci:h,mri:x,mci:T,fx:p,fy:g,sx:_,sy:S}}},{key:"onAttach",value:function(){this.focus.register({target:this});var t=this.xTableStyle;this.attach(t),this.attach(this.xScreen),this.xScreen.addItem(new Jy(this)),this.xScreen.addItem(new fh(this)),this.xScreen.addItem(new lp(this)),this.xScreen.addItem(new Q_(this)),this.attach(this.xHeightLight),this.attach(this.yHeightLight),this.attach(this.edit),this.attach(this.rowFixed),this.attach(this.colFixed),this.attach(this.xReSizer),this.attach(this.yReSizer),this.attach(this.dropRowFixed),this.attach(this.dropColFixed),this.bind(),Gk.register(this)}},{key:"bind",value:function(){var t=this;$.bind(this,r.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(){t.resize()})),$.bind(this,r.TABLE_EVENT_TYPE.CHANGE_WIDTH,(function(){t.resize()})),$.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_MOVE,(function(e){var n=t.eventXy(e),r=n.x,o=n.y,i=t.getRiCiByXy(r,o);t.pointerEvent(i),t.xIconsEvent(Mu.ICON_EVENT_TYPE.MOUSE_MOVE,i,e)})),$.bind(this,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){if(t.focus.activate.target===t){var n=t.eventXy(e),r=n.x,o=n.y,i=t.getRiCiByXy(r,o);t.xIconsEvent(Mu.ICON_EVENT_TYPE.MOUSE_DOWN,i,e)}})),$.bind(this,r.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(){t.rowHeightGroupIndex.clear()})),$.bind(this,r.TABLE_EVENT_TYPE.FIXED_ROW_CHANGE,(function(){t.rowHeightGroupIndex.clear()}))}},{key:"unbind",value:function(){this.keyboard.unbind(),this.focus.unbind()}},{key:"getScrollView",value:function(){return this.xTableAreaView.getScrollView()}},{key:"scrollX",value:function(t){var e,n=this.cols,r=this.xFixedView,o=this.scroll,i=r.getFixedView(),c=xk(this.colsReduceIf(i.eci+1,n.len,0,0,t,(function(t){return n.getWidth(t)})),3),l=c[0],a=c[1],u=c[2],s=a;t>0&&(s+=u),o.x>s?e=Og.H_LEFT:o.x<s&&(e=Og.H_RIGHT),o.type=e,o.ci=l,o.x=s,this.scrolling(),o.type=Og.UN}},{key:"scrollY",value:function(t){var e,n=this.rows,r=this.scroll,o=this.rowHeightGroupIndex.get(t),i=xk(this.rowsReduceIf(o.ri,n.len,o.top,0,t,(function(t){return n.getHeight(t)})),3),c=i[0],l=i[1],a=i[2],u=l;t>0&&(u+=a),r.y>u?e=Og.V_TOP:r.y<u&&(e=Og.V_BOTTOM),r.type=e,r.ri=c,r.y=u,this.scrolling(),r.type=Og.UN}},{key:"getTop",value:function(){var t=this.rows,e=this.xFixedView.getFixedView(),n=this.getScrollView();return t.sectionSumHeight(e.eri+1,n.sri-1)}},{key:"getLeft",value:function(){var t=this.cols,e=this.xFixedView.getFixedView(),n=this.getScrollView();return t.sectionSumWidth(e.eci+1,n.sci-1)}},{key:"setFixedRow",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=this.xFixedView,o=this.rows,i=this.scroll,c=this.rowFixed,l=n.getFixedView();l.eri=t,e>-1&&(l.sri=e),n.setFixedView(l);var a=l.sri,u=l.eri;n.hasFixedTop()?(i.y=0,i.ri=u+1):(i.y=o.sectionSumHeight(0,a-1),i.ri=a),c.fxSri=l.sri,c.fxEri=l.eri,this.resize(),this.trigger(r.TABLE_EVENT_TYPE.FIXED_CHANGE),this.trigger(r.TABLE_EVENT_TYPE.FIXED_ROW_CHANGE)}},{key:"setFixedCol",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=this.xFixedView,o=this.rows,i=this.scroll,c=this.colFixed,l=n.getFixedView();l.eci=t,e>-1&&(l.sci=e),n.setFixedView(l);var a=l.sci,u=l.eci;n.hasFixedLeft()?(i.x=0,i.ci=u+1):(i.x=o.sectionSumHeight(0,a-1),i.ci=a),c.fxSci=l.sci,c.fxEci=l.eci,this.resize(),this.trigger(r.TABLE_EVENT_TYPE.FIXED_CHANGE)}},{key:"setScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this.yHeightLight,n=this.xHeightLight,o=this.xTableStyle,i=this.xScreen,c=this.scale,l=this.rowFixed,a=this.colFixed;this.reset(),c.setValue(t),i.setZone(),n.offsetHandle(),e.offsetHandle(),l.setSize(),a.setSize(),o.setScale(t),this.trigger(r.TABLE_EVENT_TYPE.SCALE_CHANGE)}},{key:"reset",value:function(){var t=this.xTableAreaView,e=this.xTableFrozenContent,n=this.xLeftIndex,r=this.xTopIndex,o=this.xLeft,i=this.xTop,c=this.xContent;this.visualHeightCache=null,this.visualWidthCache=null,t.reset(),e.reset(),n.reset(),r.reset(),o.reset(),i.reset(),c.reset()}},{key:"resize",value:function(){var t=this.xTableStyle,e=this.xScreen,n=this.rowFixed,o=this.colFixed;this.reset(),e.setZone(),n.setSize(),o.setSize(),t.resize(),this.trigger(r.TABLE_EVENT_TYPE.RESIZE_CHANGE)}},{key:"render",value:function(){this.xTableStyle.render(),this.trigger(r.TABLE_EVENT_TYPE.RENDER)}},{key:"scrolling",value:function(){var t=this.xTableStyle,e=this.xFixedView,n=this.scroll,o=e.getFixedView();e.hasFixedTop()||(o.sri=n.ri),e.hasFixedLeft()||(o.sci=n.ci),this.reset(),e.setFixedView(o),t.scrolling(),this.trigger(r.SYSTEM_EVENT_TYPE.SCROLL)}},{key:"destroy",value:function(){Ck(Lk(e.prototype),"destroy",this).call(this),this.unbind(),this.xScreen.destroy(),this.xReSizer.destroy(),this.yReSizer.destroy(),this.xHeightLight.destroy(),this.yHeightLight.destroy(),this.edit.destroy(),this.rowFixed.destroy(),this.colFixed.destroy()}}]),e}(ct);function Zk(t){return(Zk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jk(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Kk(t,e){return!e||"object"!==Zk(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $k(t){return($k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qk(t,e){return(qk=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qk={tableConfig:{data:[]}},tC=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Kk(this,$k(e).call(this,"".concat(o,"-sheet")))).tab=t,r.options=H.copy({},Qk,n),r.table=new Xk(r.options.tableConfig),r}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qk(t,e)}(e,t),n=e,(r=[{key:"onAttach",value:function(){var t=this.table;this.attach(t)}}])&&Jk(n.prototype,r),i&&Jk(n,i),e}(ct),eC=n(4),nC=n.n(eC);function rC(t){return(rC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function iC(t,e){return!e||"object"!==rC(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function cC(t,e,n){return(cC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=lC(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function lC(t){return(lC=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function aC(t,e){return(aC=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var uC={sheets:[]},sC=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=iC(this,lC(e).call(this,"".concat(o,"-work-body")))).work=t,r.options=H.copy({},uC,n),r.sheets=r.options.sheets,r.tabSheet=[],r.activeIndex=-1,r.version=z("div","".concat(o,"-version-tips")),r.version.html('<a target="_blank" href="https://gitee.com/eigi/x-sheet">'.concat(i,"</a>")),r.children(r.version),r.sheetViewLayer=new Pv({style:{flexGrow:1}}),r.scrollBarYLayer=new Pv({style:{overflow:"inherit"}}),r.scrollBarXLayer=new Av,r.scrollBarXVerticalCenter=new Wv,r.scrollBarXHorizontalLayer=new Pv({style:{flexGrow:2}}),r.scrollBarXVerticalCenter.children(r.scrollBarXLayer),r.scrollBarXHorizontalLayer.children(r.scrollBarXVerticalCenter),r.sheetSwitchTabLayer=new Pv({style:{flexGrow:3}}),r.horizontalLayer1=new sv,r.horizontalLayer2=new sv,r.horizontalLayer1.children(r.sheetViewLayer),r.horizontalLayer1.children(r.scrollBarYLayer),r.horizontalLayer2.children(r.sheetSwitchTabLayer),r.horizontalLayer2.children(r.scrollBarXHorizontalLayer),r.horizontalLayer1Layer=new mt({style:{flexGrow:1}}),r.horizontalLayer2Layer=new mt,r.layerVerticalLayer=new dt,r.horizontalLayer1Layer.children(r.horizontalLayer1),r.horizontalLayer2Layer.children(r.horizontalLayer2),r.layerVerticalLayer.children(r.horizontalLayer1Layer),r.layerVerticalLayer.children(r.horizontalLayer2Layer),r.children(r.layerVerticalLayer),r.sheetView=new zv,r.tabView=new tg({onAdd:function(){var t=new lg,e=new tC(t);r.addTabSheet({tab:t,sheet:e})},onSwitch:function(t){r.setActiveTab(t)}}),r.scrollBarY=new xv({scroll:function(t){r.sheetView.getActiveSheet().table.scrollY(t)}}),r.scrollBarX=new vv({scroll:function(t){r.sheetView.getActiveSheet().table.scrollX(t)}}),r}var n,c,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&aC(t,e)}(e,t),n=e,(c=[{key:"onAttach",value:function(){var t=this.sheetViewLayer,e=this.scrollBarYLayer,n=this.sheetSwitchTabLayer,r=this.scrollBarXLayer;e.attach(this.scrollBarY),r.attach(this.scrollBarX),n.attach(this.tabView),t.attach(this.sheetView),this.bind(),this.createSheet()}},{key:"bind",value:function(){var t=this,e=H.getExplorerInfo(),n=new Tw;$.bind(this.sheetView,r.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(){t.scrollBarLocal(),t.scrollBarSize()})),$.bind(this.sheetView,r.TABLE_EVENT_TYPE.CHANGE_WIDTH,(function(){t.scrollBarLocal(),t.scrollBarSize()})),$.bind(this.sheetView,r.TABLE_EVENT_TYPE.FIXED_CHANGE,(function(){t.getActiveTable()&&(t.scrollBarLocal(),t.scrollBarSize())})),$.bind(this.sheetView,r.TABLE_EVENT_TYPE.DATA_CHANGE,(function(e){t.trigger(r.TABLE_EVENT_TYPE.DATA_CHANGE),e.stopPropagation()})),$.bind(this.sheetView,r.TABLE_EVENT_TYPE.SELECT_CHANGE,(function(e){t.trigger(r.TABLE_EVENT_TYPE.SELECT_CHANGE),e.stopPropagation()})),$.bind(this.sheetView,r.TABLE_EVENT_TYPE.SELECT_DOWN,(function(e){t.trigger(r.TABLE_EVENT_TYPE.SELECT_DOWN,t),e.stopPropagation()})),$.bind(this.sheetView,r.SYSTEM_EVENT_TYPE.MOUSE_WHEEL,(function(n){var r=t.sheetView.getActiveSheet();if(!H.isUnDef(r)){var o=r.table,i=o.scroll,c=o.rows,l=o.getScrollView(),a=t.scrollBarY.scrollTo,u=n.deltaY;switch(e.type){case"Chrome":u>0?t.scrollBarY.scrollMove(a+Math.abs(u)):t.scrollBarY.scrollMove(a-Math.abs(u));break;case"Firefox":if(u>0){var s=c.getHeight(l.sri+1);t.scrollBarY.scrollMove(a+s)}else{var f=c.getHeight(l.sri-1);t.scrollBarY.scrollMove(a-f)}}i.blockTop<i.maxBlockTop&&i.blockTop>0&&n.stopPropagation(),n.preventDefault()}})),$.bind(window,r.SYSTEM_EVENT_TYPE.RESIZE,(function(){n.action((function(){x.dprUpdate();var e=t.getActiveTable();e&&(e.reset(),t.scrollBarLocal(),t.scrollBarSize(),e.resize())}))}))}},{key:"unbind",value:function(){$.unbind(this.sheetView),$.unbind(window)}},{key:"addTabSheet",value:function(t){var e=t.tab,n=t.sheet,r=this.tabSheet,o=this.sheetView,i=this.tabView;o.attach(n),i.attach(e),r.push({tab:e,sheet:n})}},{key:"scrollBarSize",value:function(){var t=this.getActiveTable(),e=this.scrollBarXHorizontalLayer,n=this.scrollBarY,r=this.scrollBarX,o=t.getScrollTotalHeight(),i=t.getScrollTotalWidth();i>t.getContentWidth()?e.show():e.hide(),n.setSize(t.getContentHeight(),o),r.setSize(t.getContentWidth(),i)}},{key:"scrollBarLocal",value:function(){var t=this.getActiveTable();this.scrollBarY.setLocal(t.getTop()),this.scrollBarX.setLocal(t.getLeft())}},{key:"createSheet",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,o=this.sheets[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var i=r.value,c=i.name,l=new lg(c),a=new tC(l,i);this.addTabSheet({tab:l,sheet:a})}}catch(t){e=!0,n=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw n}}this.tabSheet.length&&this.setActiveIndex(0)}},{key:"setActiveIndex",value:function(t){var e=this.sheetView,n=this.tabView;e.setActiveSheet(t),n.setActiveTab(t);var o=this.getActiveTable();o&&(o.reset(),this.scrollBarLocal(),this.scrollBarSize(),o.resize()),this.trigger(r.WORK_BODY_EVENT_TYPE.CHANGE_ACTIVE),this.activeIndex=t}},{key:"setScale",value:function(t){this.sheetView.getActiveSheet().table.setScale(t),this.scrollBarLocal(),this.scrollBarSize()}},{key:"setActiveTab",value:function(t){var e=this;this.tabSheet.forEach((function(n,r){n.tab===t&&e.setActiveIndex(r)}))}},{key:"getActiveSheet",value:function(){return this.sheetView.getActiveSheet()}},{key:"getActiveTable",value:function(){var t=this.getActiveSheet();return t?t.table:null}},{key:"toJSONTemplate",value:function(){var t=this.activeIndex,e=this.sheetView,n=this.tabView,r=e.sheetList[t],o=n.tabList[t];if(r&&o){var i=r.table,c=i.rows,l=i.cols,a=i.settings,u=i.getTableCells(),s=i.getTableMerges(),f={name:o.name,tableConfig:{table:{showGrid:a.table.showGrid,background:a.table.background},rows:{len:c.len,height:c.height,data:c.getData()},cols:{len:l.len,width:l.width,data:l.getData()},merge:{merges:s.getData()},data:u.getData()}},h="window['".concat(o.name,"'] = ").concat(JSON.stringify(f));nC()(h,"".concat(o.name,".js"),"application/x-javascript")}}},{key:"destroy",value:function(){cC(lC(e.prototype),"destroy",this).call(this),this.unbind()}}])&&oC(n.prototype,c),l&&oC(n,l),e}(ct);function fC(t){return(fC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yC(t,e){return!e||"object"!==fC(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pC(t,e,n){return(pC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=bC(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function bC(t){return(bC=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dC(t,e){return(dC=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var vC=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=yC(this,bC(e).call(this,"".concat(o,"-bottom-menu")))).workBottom=t,n.sum=z("div","".concat(o,"-bottom-sum")),n.avg=z("div","".concat(o,"-bottom-avg")),n.number=z("div","".concat(o,"-bottom-number")),n.fullScreen=z("div","".concat(o,"-bottom-full-screen")),n.grid=z("div","".concat(o,"-bottom-grid")),n.throttle=new Tw({time:800}),n.children(n.grid),n.children(n.fullScreen),n.children(n.sum),n.children(n.avg),n.children(n.number),n}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dC(t,e)}(e,t),n=e,(i=[{key:"onAttach",value:function(){this.bind()}},{key:"computer",value:function(){var t=this.workBottom.work.body.sheetView.getActiveSheet().table,e=t.xScreen,n=t.xIteratorBuilder,r=t.getTableMerges(),o=t.getTableCells(),i=e.findType(fh).selectRange;if(i){var c=i.sri,l=i.sci,a=i.eri,u=i.eci,s=0,f=0;n.getRowIterator().setBegin(c).setEnd(a).setLoop((function(t){n.getColIterator().setBegin(l).setEnd(u).setLoop((function(e){var n=r.getFirstIncludes(t,e);if(!n||n.sri===t&&n.sci===e){var i=o.getCell(t,e);if(i){var c=i.text,l=i.contentType;s+=1,l===Bu.CONTENT_TYPE.NUMBER&&(f+=c)}}})).execute()})).execute();var h=f/s;this.setSum(f),this.setAvg(h),this.setNumber(s)}else this.setSum(0),this.setAvg(0),this.setNumber(0)}},{key:"unbind",value:function(){var t=this.workBottom,e=this.grid,n=this.fullScreen,r=t.work.body;$.unbind(e),$.unbind(n),$.unbind(r)}},{key:"bind",value:function(){var t=this,e=this.workBottom,n=this.grid,o=this.fullScreen,i=this.throttle,c=e.work,l=c.body,a=l.sheetView;$.bind(l,r.WORK_BODY_EVENT_TYPE.CHANGE_ACTIVE,(function(){i.action((function(){t.computer()}))})),$.bind(l,r.TABLE_EVENT_TYPE.SELECT_CHANGE,(function(){i.action((function(){t.computer()}))})),$.bind(l,r.TABLE_EVENT_TYPE.DATA_CHANGE,(function(){i.action((function(){t.computer()}))})),$.bind(o,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){H.isFull()?H.exitFullscreen():H.fullScreen(c.root)})),$.bind(n,r.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){var t=a.getActiveSheet().table;t.settings.table.showGrid=!t.settings.table.showGrid,t.render()}))}},{key:"setSum",value:function(t){this.sum.text("求和: ".concat(t))}},{key:"setAvg",value:function(t){this.avg.text("平均数: ".concat(t))}},{key:"setNumber",value:function(t){this.number.text("数量: ".concat(t))}},{key:"destroy",value:function(){pC(bC(e.prototype),"destroy",this).call(this),this.unbind()}}])&&hC(n.prototype,i),c&&hC(n,c),e}(ct);function gC(t){return(gC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function EC(t,e){return!e||"object"!==gC(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mC(t){return(mC=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function OC(t,e){return(OC=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var TC=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=EC(this,mC(e).call(this,"".concat(o,"-work-bottom")))).work=t,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&OC(t,e)}(e,t),n=e,(r=[{key:"onAttach",value:function(){this.bottomMenu=new vC(this),this.attach(this.bottomMenu)}}])&&wC(n.prototype,r),i&&wC(n,i),e}(ct);function xC(t){return(xC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function SC(t){return(SC=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kC(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function CC(t,e){return(CC=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var PC={body:{}},RC=function(t){function e(t){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(i=SC(e).call(this,"".concat(o,"-work")))||"object"!==xC(i)&&"function"!=typeof i?kC(r):i).options=H.copy({},PC,t),n.root=null,n.topLayer=new mt,n.bodyLayer=new mt({style:{flexGrow:1}}),n.bottomLayer=new mt,n.verticalLayer=new dt,n.verticalLayer.children(n.topLayer),n.verticalLayer.children(n.bodyLayer),n.verticalLayer.children(n.bottomLayer),n.children(n.verticalLayer),n.top=new iv(kC(n)),n.body=new sC(kC(n),n.options.body),n.bottom=new TC(kC(n)),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&CC(t,e)}(e,t),n=e,(r=[{key:"onAttach",value:function(t){this.root=t;var e=this.bodyLayer,n=this.topLayer,r=this.bottomLayer;n.attach(this.top),r.attach(this.bottom),e.attach(this.body),this.bottom.bottomMenu.setSum(0),this.bottom.bottomMenu.setAvg(0),this.bottom.bottomMenu.setNumber(0)}}])&&_C(n.prototype,r),i&&_C(n,i),e}(ct);n(5),n(6);function jC(t){return(jC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function LC(t){return(LC=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function IC(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AC(t,e){return(AC=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"XSheet",(function(){return VC}));var NC={workConfig:{name:"x-sheet",body:{sheets:[{tableConfig:{}}]}}},VC=function(t){function e(t,n){var r,i,c;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,r=!(c=LC(e).call(this,"".concat(o)))||"object"!==jC(c)&&"function"!=typeof c?IC(i):c;var l=t;return"string"==typeof t&&(l=document.querySelector(t)),(l=z(l)).children(IC(r)),r.options=H.copy({},NC,n),r.work=new RC(r.options.workConfig),r.attach(r.work),pe.setRoot(IC(r)),_r.setRoot(IC(r)),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&AC(t,e)}(e,t),e}(ct);VC.version=i,VC.PlainUtils=H,VC.XDraw=x,VC.XIcon=Mu,VC.RectRange=ss,VC.BaseFont=al,window&&(window.XSheet=VC)}]);
//# sourceMappingURL=XSheet.js.map