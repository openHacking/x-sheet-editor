!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){t.exports=n.p+"c4ab8001e109540f7ae6a34181d695d3.png"},function(t,e,n){t.exports=n.p+"42b436e7c64603182355d52d31ea49f1.png"},function(t,e,n){t.exports=n.p+"9dfd8685ea7e1e5c025514eec46a4547.png"},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var o="x-sheet";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var c,s=t[Symbol.iterator]();!(o=(c=s.next()).done)&&(n.push(c.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var s=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],a=null,l=1,u=2,f=3,h=5,p=6,y=7,b=8,d=9,v=10,g=11,w=12,m=13,O=14,E=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,n=null,o=[{key:"type",value:function(t){var e=Object.prototype.toString.call(t);switch(e){case"[object Null]":return y;case"[object Undefined]":return b;case"[object String]":return l;case"[object Boolean]":return u;case"[object Number]":return f;case"[object Function]":return p;case"[object Array]":return h;case"[object Promise]":return d;case"[object GeneratorFunction]":return v;case"[object AsyncFunction]":return g;case"[object BigInt]":return w;case"[object Symbol]":return m;default:return O}}},{key:"cloneDeep",value:function(t){var e=JSON.stringify(t);return JSON.parse(e)}},{key:"mergeDeep",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isUnDef(e))return{};for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return t.isUnDef(o)||0===o.length?e:(o.forEach((function(n){t.isUnDef(n)||Object.keys(n).forEach((function(o){var r=n[o];"string"==typeof r||"number"==typeof r||"boolean"==typeof r?e[o]=r:"function"!=typeof r&&!Array.isArray(r)&&t.isPlainObject(r)?(e[o]=e[o]||{},t.mergeDeep(e[o],r)):e[o]=r}))})),e)}},{key:"copyProp",value:function(t,e){return Object.assign(t,e)}},{key:"isMac",value:function(){return/macintosh|mac os x/i.test(navigator.userAgent)}},{key:"isWindows",value:function(){return/windows|win32/i.test(navigator.userAgent)}},{key:"isEmptyObject",value:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}},{key:"isNotEmptyObject",value:function(e){return!t.isEmptyObject(e)}},{key:"isUnDef",value:function(t){return null==t}},{key:"isNumber",value:function(t){return/^(-?\d+.\d+)$|^(-?\d+)$/.test(t)}},{key:"isFraction",value:function(t){return/^\d+\/\d+$/.test(t)}},{key:"isFunction",value:function(e){return t.type(e)===p}},{key:"isArray",value:function(e){return t.type(e)===h}},{key:"isBlank",value:function(e){return!!t.isUnDef(e)||""===e.toString()}},{key:"isPlainObject",value:function(e){return!t.isUnDef(e)&&Object.getPrototypeOf(e)===Object.getPrototypeOf({})}},{key:"sum",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t},n=0,o=0;return Object.keys(t).forEach((function(r){n+=e(t[r],r),o+=1})),[n,o]}},{key:"rangeSum",value:function(t,e,n){for(var o=0,r=t;r<e;r+=1)o+=n(r);return o}},{key:"parseFloat",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(e){return t.isNumber(e)?parseFloat(e):0}))},{key:"parseInt",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(e){return t.isNumber(e)?parseInt(e,10):0}))},{key:"stringAt",value:function(t){for(var e="",n=t;n>=s.length;)n/=s.length,n-=1,e+=s[parseInt(n,10)%s.length];return e+=s[t%s.length]}},{key:"indexAt",value:function(t){for(var e=0,n=0;n<t.length-1;n+=1){var o=t.charCodeAt(n)-65,r=t.length-1-n;e+=Math.pow(s.length,r)+s.length*o}return e+=t.charCodeAt(t.length-1)-65}},{key:"expr2xy",value:function(e){for(var n="",o="",r=0;r<e.length;r+=1)e.charAt(r)>="0"&&e.charAt(r)<="9"?o+=e.charAt(r):n+=e.charAt(r);return[t.indexAt(n),parseInt(o,10)-1]}},{key:"xy2expr",value:function(e,n){return"".concat(t.stringAt(e)).concat(n+1)}},{key:"expr2expr",value:function(e,n,o){var r=i(t.expr2xy(e),2),c=r[0],s=r[1];return t.xy2expr(c+n,s+o)}},{key:"rangeReduceIf",value:function(t,e,n,o,r,i){for(var c=n,s=o,a=t;a<e&&!(c>=r);a+=1)c+=s=i(a);return[a,c-s,s]}},{key:"throttle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;a&&clearTimeout(a),a=setTimeout(t,e)}},{key:"contrastDifference",value:function(e,n){var o={};if(t.isUnDef(e)||t.isUnDef(n))return o;for(var r in e)if(e.hasOwnProperty(r)){var i=n[r],c=e[r];t.isUnDef(i)||t.isUnDef(c)||t.equal(i,c)||(o[r]=e[r])}return o}},{key:"minIf",value:function(t,e){return t<e?e:t}},{key:"maxIf",value:function(t,e){return t>e?e:t}},{key:"equal",value:function(t,e){var n,o,i,c;function s(t,e){var n;if(isNaN(t)&&isNaN(e)&&"number"==typeof t&&"number"==typeof e)return!0;if(t===e)return!0;if("function"==typeof t&&"function"==typeof e||t instanceof Date&&e instanceof Date||t instanceof RegExp&&e instanceof RegExp||t instanceof String&&e instanceof String||t instanceof Number&&e instanceof Number)return t.toString()===e.toString();if(!(t instanceof Object&&e instanceof Object))return!1;if(t.isPrototypeOf(e)||e.isPrototypeOf(t))return!1;if(t.constructor!==e.constructor)return!1;if(t.prototype!==e.prototype)return!1;if(i.indexOf(t)>-1||c.indexOf(e)>-1)return!1;for(n in e){if(e.hasOwnProperty(n)!==t.hasOwnProperty(n))return!1;if(r(e[n])!==r(t[n]))return!1}for(n in t){if(e.hasOwnProperty(n)!==t.hasOwnProperty(n))return!1;if(r(e[n])!==r(t[n]))return!1;switch(r(t[n])){case"object":case"function":if(i.push(t),c.push(e),!s(t[n],e[n]))return!1;i.pop(),c.pop();break;default:if(t[n]!==e[n])return!1}}return!0}if(arguments.length<1)return!0;for(n=1,o=arguments.length;n<o;n++)if(i=[],c=[],!s(arguments[0],arguments[n]))return!1;return!0}},{key:"arrayIncludeArray",value:function(e,n){if(t.isUnDef(e)||t.isUnDef(n))return!1;if(e.length!==n.length)return!1;for(var o=0;o<e.length;o+=1)if(-1===n.indexOf(e[o]))return!1;return!0}},{key:"keepLastIndex",value:function(t){if(window.getSelection){t.focus();var e=window.getSelection();e.selectAllChildren(t),e.collapseToEnd()}else if(document.selection){var n=document.selection.createRange();n.moveToElementText(t),n.collapse(!1),n.select()}}},{key:"trim",value:function(t){return this.isBlank(t)?"":t.trim()}},{key:"now",value:function(){return Date.now().toString()}},{key:"viewPort",value:function(){return{width:window.innerWidth,height:window.innerHeight}}}],n&&c(e.prototype,n),o&&c(e,o),t}();function S(t){return function(t){if(Array.isArray(t))return t}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var x=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof e?(this.el=document.createElement(e),this.el.className=n):this.el=e,this.el.data=[]}var e,n,o;return e=t,(n=[{key:"data",value:function(t,e){return void 0!==e?(this.el.data[t]=e,this):this.el.data[t]}},{key:"on",value:function(t,e){var n=S(t.split(".")),o=n[0],r=n.slice(1),i=o;return"mousewheel"===i&&/Firefox/i.test(window.navigator.userAgent)&&(i="DOMMouseScroll"),this.el.addEventListener(i,(function(t){e(t);for(var n=0;n<r.length;n+=1){var o=r[n];if("left"===o&&0!==t.button)return;if("right"===o&&2!==t.button)return;"stop"===o&&t.stopPropagation()}})),this}},{key:"offset",value:function(t){var e=this;if(void 0!==t)return Object.keys(t).forEach((function(n){e.css(n,"".concat(t[n],"px"))})),this;var n=this.el;return{top:n.offsetTop,left:n.offsetLeft,height:n.offsetHeight,width:n.offsetWidth}}},{key:"scroll",value:function(t){var e=this.el;return void 0!==t&&(void 0!==t.left&&(e.scrollLeft=t.left),void 0!==t.top&&(e.scrollTop=t.top)),{left:e.scrollLeft,top:e.scrollTop}}},{key:"scrollTop",value:function(){return this.el.scrollTop}},{key:"clientHeight",value:function(){return this.el.clientHeight}},{key:"box",value:function(){return this.el.getBoundingClientRect()}},{key:"parent",value:function(){return new t(this.el.parentNode)}},{key:"children",value:function(){for(var t=this,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return 0===arguments.length?this.el.childNodes:(n.forEach((function(e){return t.child(e)})),this)}},{key:"first",value:function(){return this.el.firstChild}},{key:"last",value:function(){return this.el.lastChild}},{key:"remove",value:function(t){return this.el.removeChild(t.el||t)}},{key:"prepend",value:function(t){var e=this.el;return e.children.length>0?e.insertBefore(t,e.firstChild):e.appendChild(t),this}},{key:"prev",value:function(){return this.el.previousSibling}},{key:"next",value:function(){return this.el.nextSibling}},{key:"child",value:function(e){var n=e;return"string"==typeof e?n=document.createTextNode(e):e instanceof t&&(n=e.el),this.el.appendChild(n),this}},{key:"contains",value:function(t){return this.el.contains(t)}},{key:"className",value:function(t){return void 0!==t?(this.el.className=t,this):this.el.className}},{key:"addClass",value:function(t){return this.el.classList.add(t),this}},{key:"hasClass",value:function(t){return this.el.classList.contains(t)}},{key:"removeClass",value:function(t){return this.el.classList.remove(t),this}},{key:"toggle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"active";return this.toggleClass(t)}},{key:"toggleClass",value:function(t){return this.el.classList.toggle(t)}},{key:"active",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"active";return t?this.addClass(e):this.removeClass(e),this}},{key:"checked",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.active(t,"checked"),this}},{key:"disabled",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t?this.addClass("disabled"):this.removeClass("disabled"),this}},{key:"attr",value:function(t,e){var n=this;if(void 0!==e)this.el.setAttribute(t,e);else{if("string"==typeof t)return this.el.getAttribute(t);Object.keys(t).forEach((function(e){n.el.setAttribute(e,t[e])}))}return this}},{key:"removeAttr",value:function(t){return this.el.removeAttribute(t),this}},{key:"html",value:function(t){return void 0!==t?(this.el.innerHTML=t,this):this.el.innerHTML}},{key:"val",value:function(t){return void 0!==t?(this.el.value=t,this):this.el.value}},{key:"cssRemoveKeys",value:function(){for(var t=this,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return n.forEach((function(e){return t.el.style.removeProperty(e)})),this}},{key:"css",value:function(t,e){var n=this;return void 0===e&&"string"!=typeof t?(Object.keys(t).forEach((function(e){n.el.style[e]=t[e]})),this):void 0!==e?(this.el.style[t]=e,this):this.el.style[t]}},{key:"computedStyle",value:function(){return window.getComputedStyle(this.el,null)}},{key:"show",value:function(){var t=this.computedStyle();return t&&"block"!==t.display&&this.css("display","block"),this}},{key:"hide",value:function(){var t=this.computedStyle();return t&&"none"!==t.display&&this.css("display","none"),this}},{key:"display",value:function(t){t?this.show():this.hide()}},{key:"text",value:function(t){return void 0===t?this.el.innerText:(this.el.innerText=t,t)}},{key:"sibling",value:function(){for(var e=this.el,n=[];null!==(e=e.previousElementSibling);)n.push(new t(e));for(e=this.el;null!==(e=e.nextElementSibling);)n.push(new t(e));return n}},{key:"position",value:function(){var t=0,e=0;return this.el.style.position&&(this.el.top&&(t=this.el.style.top.replace("%","").repeat("px","")),this.el.left&&(e=this.el.style.left.replace("%","").repeat("px","")),this.el.right&&(t=this.el.style.right.replace("%","").repeat("px","")),this.el.bottom&&(t=this.el.style.bottom.replace("%","").repeat("px",""))),{top:E.parseFloat(t),left:E.parseFloat(e),right:E.parseFloat(0),bottom:E.parseFloat(0)}}},{key:"trigger",value:function(t,e){var n=new CustomEvent(t,{detail:e,bubbles:!0,cancelable:!1});this.el.dispatchEvent(n)}},{key:"focus",value:function(){this.el.focus()}},{key:"find",value:function(e){var n=this.el.querySelectorAll(e);if(n&&1===n.length)return new t(n[0]);var o=[];if(n){var r=!0,i=!1,c=void 0;try{for(var s,a=n[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var l=s.value;o.push(new t(l))}}catch(t){i=!0,c=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw c}}}return o}},{key:"isChild",value:function(t){for(var e=t||t.el;null!=e&&e!==document.body;){if(e===this.el)return!0;e=e.parentNode}return!1}}])&&_(e.prototype,n),o&&_(e,o),t}(),T=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new x(t,e)};function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function C(t,e){return!e||"object"!==k(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function j(t,e){return(j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var R=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),C(this,A(e).call(this,"div","".concat(o,"-widget ").concat(t)))}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j(t,e)}(e,t),n=e,(r=[{key:"computeEventXy",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n=e.box(),o=n.top,r=n.left;return{x:t.pageX-r,y:t.pageY-o}}},{key:"computeWidgetXy",value:function(t){if(!t)return{x:0,y:0};var e=t.box(),n=e.top,o=e.left,r=this.box(),i=r.top;return{x:o-r.left,y:n-i}}},{key:"init",value:function(){}}])&&P(n.prototype,r),i&&P(n,i),e}(x);function L(t){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function I(t,e){return!e||"object"!==L(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function H(t,e){return(H=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var D=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=I(this,M(e).call(this,"div","".concat(o,"-vertical-layer")))).options=E.mergeDeep({layerElements:[],style:{}},t),n.init(),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&H(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){this.css(this.options.style);var t=!0,e=!1,n=void 0;try{for(var o,r=this.options.layerElements[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var i=o.value;this.children(i)}}catch(t){e=!0,n=t}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}}}])&&W(n.prototype,r),i&&W(n,i),e}(x);function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function B(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function V(t,e){return!e||"object"!==N(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Y(t){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function z(t,e){return(z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var U=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=V(this,Y(e).call(this,"div","".concat(o,"-vertical-layer-element")))).options=E.mergeDeep({style:{flexGrow:"0"}},n),r.element=t,r.init(),r}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&z(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){this.css(this.options.style),this.children(this.element)}}])&&B(n.prototype,r),i&&B(n,i),e}(x);function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function G(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function X(t,e){return!e||"object"!==F(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function K(t){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function q(t,e){return(q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Z=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=X(this,K(e).call(this,"".concat(o,"-icon")))).iconNameEl=T("div","".concat(o,"-icon-img ").concat(n)),t.child(t.iconNameEl),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&q(t,e)}(e,t),n=e,(r=[{key:"setWidth",value:function(t){this.iconNameEl.css("width","".concat(t,"px"))}},{key:"setHeight",value:function(t){this.iconNameEl.css("height","".concat(t,"px"))}}])&&G(n.prototype,r),i&&G(n,i),e}(R);function $(t){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J(t,e){return!e||"object"!==$(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Q(t){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tt(t,e){return(tt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var et=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),J(this,Q(e).call(this,"".concat(o,"-tools-item ").concat(t)))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tt(t,e)}(e,t),e}(R);function nt(t){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ot(t,e){return!e||"object"!==nt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rt(t){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function it(t,e){return(it=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ct=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=ot(this,rt(e).call(this,"".concat(o,"-tools-undo")))).icon=new Z("undo"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&it(t,e)}(e,t),e}(et);function st(t){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function at(t,e){return!e||"object"!==st(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lt(t){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ut(t,e){return(ut=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ft=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=at(this,lt(e).call(this,"".concat(o,"-tools-redo")))).icon=new Z("redo"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ut(t,e)}(e,t),e}(et);function ht(t){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function yt(t,e){return!e||"object"!==ht(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function bt(t){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dt(t,e){return(dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var vt=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=yt(this,bt(e).call(this,"".concat(o,"-tools-point-format")))).icon=new Z("point-format"),t.sheets=[],t.children(t.icon),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dt(t,e)}(e,t),n=e,(r=[{key:"addSheet",value:function(t){this.sheets.push(t)}},{key:"removeSheet",value:function(t){for(var e=0;e<this.sheets.length;e+=1)if(this.sheets[e]===t)return void this.sheets.splice(e,1)}},{key:"includeSheet",value:function(t){for(var e=0;e<this.sheets.length;e+=1)if(this.sheets[e]===t)return!0;return!1}}])&&pt(n.prototype,r),i&&pt(n,i),e}(et);function gt(t){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wt(t,e){return!e||"object"!==gt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mt(t){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ot(t,e){return(Ot=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Et=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=wt(this,mt(e).call(this,"".concat(o,"-tools-clear-format")))).icon=new Z("clear-format"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ot(t,e)}(e,t),e}(et);function St(t){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function xt(t,e){return!e||"object"!==St(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Tt(t){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kt(t,e){return(kt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Pt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=xt(this,Tt(e).call(this,"".concat(o,"-tools-drop-down-item ").concat(t)))).drop=T("div","".concat(o,"-tools-drop-down-item-mark")),n.title=T("div","".concat(o,"-tools-drop-down-item-title")),n.drop.children(new Z("arrow-down")),n.children(n.title),n.children(n.drop),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kt(t,e)}(e,t),n=e,(r=[{key:"setTitle",value:function(t){this.title.text(t)}},{key:"setIcon",value:function(t){this.title.html(""),this.title.children(t)}},{key:"setWidth",value:function(t){this.title.css("width","".concat(t,"px"))}},{key:"setEllipsis",value:function(){this.title.css("overflow","hidden"),this.title.css("text-overflow","ellipsis"),this.title.css("white-space","nowrap")}},{key:"removeEllipsis",value:function(){this.title.cssRemoveKeys("overflow"),this.title.cssRemoveKeys("text-overflow"),this.title.cssRemoveKeys("white-space")}}])&&_t(n.prototype,r),i&&_t(n,i),e}(et);var Ct=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)};function At(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}Ct.SYSTEM_EVENT_TYPE={MOUSE_MOVE:"mouseMove".toLocaleLowerCase(),MOUSE_DOWN:"mouseDown".toLocaleLowerCase(),MOUSE_UP:"mouseUp".toLocaleLowerCase(),MOUSE_OVER:"mouseOver".toLocaleLowerCase(),MOUSE_LEAVE:"mouseLeave".toLocaleLowerCase(),MOUSE_WHEEL:"mouseWheel".toLocaleLowerCase(),MOUSE_ENTER:"mouseEnter".toLocaleLowerCase(),CLICK:"click".toLocaleLowerCase(),KEY_DOWN:"keyDown".toLocaleLowerCase(),KEY_UP:"keyUp".toLocaleLowerCase(),DRAG_START:"dragStart".toLocaleLowerCase(),SCROLL:"scroll".toLocaleLowerCase(),RESIZE:"resize".toLocaleLowerCase(),CHANGE:"change".toLocaleLowerCase(),INPUT:"input".toLocaleLowerCase(),VISIBILITY_CHANGE:"visibilityChange".toLocaleLowerCase()},Ct.TABLE_EVENT_TYPE={CHANGE_HEIGHT:"tableChangeHeight".toLocaleLowerCase(),CHANGE_WIDTH:"tableChangeWidth".toLocaleLowerCase(),DATA_CHANGE:"tableDataChange".toLocaleLowerCase(),SELECT_CHANGE:"tableSelectChange".toLocaleLowerCase(),SELECT_DOWN:"tableSelectDown".toLocaleLowerCase()},Ct.WORK_BODY_TYPE={CHANGE_ACTIVE:"workBodyChangeActive".toLocaleLowerCase()};var jt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,o=[{key:"bind",value:function(t,e,n){if(Array.isArray(t)){var o=!0,r=!1,i=void 0;try{for(var c,s=t[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var a=c.value;(a.el||a).addEventListener(e,n)}}catch(t){r=!0,i=t}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}}else(t.el||t).addEventListener(e,n)}},{key:"unbind",value:function(t,e,n){if(Array.isArray(t)){var o=!0,r=!1,i=void 0;try{for(var c,s=t[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var a=c.value;(a.el||a).addEventListener(e,n)}}catch(t){r=!0,i=t}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}}else(t.el||t).removeEventListener(e,n)}},{key:"mouseMoveUp",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=function r(i){t.unbind(e,Ct.SYSTEM_EVENT_TYPE.MOUSE_MOVE,n),t.unbind(e,Ct.SYSTEM_EVENT_TYPE.MOUSE_UP,r),o(i)};t.bind(e,Ct.SYSTEM_EVENT_TYPE.MOUSE_MOVE,n),t.bind(e,Ct.SYSTEM_EVENT_TYPE.MOUSE_UP,r)}},{key:"dbClick",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},o=0;t.bind(e,Ct.SYSTEM_EVENT_TYPE.CLICK,(function(t){var e=Date.now();e-o<=300?(n(t),o=0):o=e}))}}],(n=null)&&At(e.prototype,n),o&&At(e,o),t}();function Rt(t){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Wt(t,e){return!e||"object"!==Rt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function It(t){return(It=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mt(t,e){return(Mt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ht=function(t){function e(t){var n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Wt(this,It(e).call(this,"".concat(o,"-scroll-bar-x")))).option=E.mergeDeep({style:{},scroll:function(t){return t}},t),r.lastBut=T("div","".concat(o,"-scroll-bar-x-last-but")),r.nextBut=T("div","".concat(o,"-scroll-bar-x-next-but")),r.content=T("div","".concat(o,"-scroll-bar-x-content")),r.block=T("div","".concat(o,"-scroll-bar-x-block")),r.content.children(r.block),(n=r).children.apply(n,[r.lastBut,r.nextBut,r.content]),r.blockLeft=0,r.maxBlockLeft=0,r.blockWidth=0,r.minBlockWidth=20,r.scrollTo=0,r.contentWidth=0,r.viewPortWidth=0,r.isHide=!0,r.css(r.option.style),r.hide(),r.bind(),r}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mt(t,e)}(e,t),n=e,(r=[{key:"bind",value:function(){var t=this;this.block.on(Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){if(0===e.button){var n=t.computeEventXy(e,t.block);jt.mouseMoveUp(T(document),(function(e){var o=t.computeEventXy(e,t.content).x-n.x;o<0&&(o=0),o>t.maxBlockLeft&&(o=t.maxBlockLeft),t.blockLeft=o,t.scrollTo=t.computeScrollTo(t.blockLeft),t.block.css("left","".concat(o,"px")),t.option.scroll(t.scrollTo),e.stopPropagation(),e.preventDefault()})),e.stopPropagation(),e.preventDefault()}}))}},{key:"setSize",value:function(t,e){if(t<e){this.isHide=!1,this.show();var n=this.content.box(),o=t/e*n.width;this.blockWidth=o<this.minBlockWidth?this.minBlockWidth:o,this.viewPortWidth=t,this.contentWidth=e,this.maxBlockLeft=n.width-this.blockWidth,this.block.css("width","".concat(this.blockWidth,"px"));var r=this.scrollTo/(e-t)*this.maxBlockLeft;this.blockLeft=r>this.maxBlockLeft?this.maxBlockLeft:r,this.scrollTo=this.computeScrollTo(this.blockLeft),this.block.css("left","".concat(this.blockLeft,"px"))}else this.isHide=!0,this.hide(),this.option.scroll(0)}},{key:"scrollMove",value:function(t){var e=t,n=this.contentWidth-this.viewPortWidth;e>n?e=n:e<0&&(e=0);var o=e/(this.contentWidth-this.viewPortWidth)*this.maxBlockLeft;this.blockLeft=o>this.maxBlockLeft?this.maxBlockLeft:o,this.scrollTo!==e&&(this.scrollTo=e,this.block.css("left","".concat(this.blockLeft,"px")),this.option.scroll(this.scrollTo))}},{key:"computeScrollTo",value:function(t){return t/this.maxBlockLeft*(this.contentWidth-this.viewPortWidth)}}])&&Lt(n.prototype,r),i&&Lt(n,i),e}(R);function Dt(t){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Bt(t,e){return!e||"object"!==Dt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vt(t){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yt(t,e){return(Yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var zt=function(t){function e(t){var n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Bt(this,Vt(e).call(this,"".concat(o,"-scroll-bar-y")))).option=E.mergeDeep({style:{},scroll:function(t){return t}},t),r.lastBut=T("div","".concat(o,"-scroll-bar-y-last-but")),r.nextBut=T("div","".concat(o,"-scroll-bar-y-next-but")),r.content=T("div","".concat(o,"-scroll-bar-y-content")),r.block=T("div","".concat(o,"-scroll-bar-y-block")),r.content.children(r.block),(n=r).children.apply(n,[r.lastBut,r.nextBut,r.content]),r.blockTop=0,r.maxBlockTop=0,r.blockHeight=0,r.minBlockHeight=20,r.scrollTo=0,r.contentHeight=0,r.viewPortHeight=0,r.isHide=!0,r.css(r.option.style),r.hide(),r.bind(),r}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yt(t,e)}(e,t),n=e,(r=[{key:"bind",value:function(){var t=this;jt.bind(this.block,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){if(0===e.button){var n=t.computeEventXy(e,t.block);jt.mouseMoveUp(T(document),(function(e){var o=t.computeEventXy(e,t.content).y-n.y;o<0&&(o=0),o>t.maxBlockTop&&(o=t.maxBlockTop),t.blockTop=o,t.scrollTo=t.computeScrollTo(t.blockTop),t.block.css("top","".concat(o,"px")),t.option.scroll(t.scrollTo),e.stopPropagation(),e.preventDefault()}))}}))}},{key:"setSize",value:function(t,e){if(t<e){this.isHide=!1,this.show();var n=this.content.box(),o=t/e*n.height;this.blockHeight=o<this.minBlockHeight?this.minBlockHeight:o,this.viewPortHeight=t,this.contentHeight=e,this.maxBlockTop=n.height-this.blockHeight,this.block.css("height","".concat(this.blockHeight,"px"));var r=this.scrollTo/(e-t)*this.maxBlockTop;this.blockTop=r>this.maxBlockTop?this.maxBlockTop:r,this.scrollTo=this.computeScrollTo(this.blockTop),this.block.css("top","".concat(this.blockTop,"px"))}else this.isHide=!0,this.hide(),this.option.scroll(0)}},{key:"scrollMove",value:function(t){var e=t,n=this.contentHeight-this.viewPortHeight;e>n?e=n:e<0&&(e=0);var o=e/(this.contentHeight-this.viewPortHeight)*this.maxBlockTop;this.blockTop=o>this.maxBlockTop?this.maxBlockTop:o,this.scrollTo!==e&&(this.scrollTo=e,this.block.css("top","".concat(this.blockTop,"px")),this.option.scroll(this.scrollTo))}},{key:"computeScrollTo",value:function(t){return t/this.maxBlockTop*(this.contentHeight-this.viewPortHeight)}}])&&Nt(n.prototype,r),i&&Nt(n,i),e}(R);function Ut(t){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ft(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Gt(t,e){return!e||"object"!==Ut(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xt(t){return(Xt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Kt(t,e){return(Kt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qt=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Gt(this,Xt(e).call(this,"div","".concat(o,"-horizontal-layer-element")))).options=E.mergeDeep({style:{flexGrow:"0"}},n),r.element=t,r.init(),r}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kt(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){this.css(this.options.style),this.children(this.element)}}])&&Ft(n.prototype,r),i&&Ft(n,i),e}(x);function Zt(t){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Jt(t,e){return!e||"object"!==Zt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qt(t){return(Qt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function te(t,e){return(te=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ee=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Jt(this,Qt(e).call(this,"div","".concat(o,"-horizontal-layer")))).options=E.mergeDeep({layerElements:[],style:{}},t),n.init(),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&te(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){this.css(this.options.style);var t=!0,e=!1,n=void 0;try{for(var o,r=this.options.layerElements[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var i=o.value;this.children(i)}}catch(t){e=!0,n=t}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}}}])&&$t(n.prototype,r),i&&$t(n,i),e}(x);function ne(t){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oe(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function re(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ie(t,e){return(ie=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ce(t,e,n){return(ce="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=se(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function se(t){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ae={TOP:1,LEFT:2,BOTTOM:3,RIGHT:4},le=[],ue=function(t){function e(t){var n,r,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(i=se(e).call(this,"".concat(o,"-el-pop-up")))||"object"!==ne(i)&&"function"!=typeof i?re(r):i).options=E.mergeDeep({position:ae.BOTTOM,el:null},t),n.off=!0,n.content=T("div","".concat(o,"-el-pop-up-content")),n.scrollBarX=new Ht,n.scrollBarY=new zt;var c=new qt(n.content,{style:{flexGrow:1}}),s=new qt(n.scrollBarY,{style:{overflow:"inherit"}}),a=new ee({layerElements:[c,s]}),l=new U(a),u=new U(n.scrollBarX),f=new D({layerElements:[l,u]});return ce(se(e.prototype),"children",re(n)).call(re(n),f),n.bind(),le.push(re(n)),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ie(t,e)}(e,t),n=e,i=[{key:"closeAll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];le.forEach((function(e){-1===t.indexOf(e)&&e.close()}))}}],(r=[{key:"bind",value:function(){var t=this;jt.bind(window,Ct.SYSTEM_EVENT_TYPE.RESIZE,(function(){t.position(),t.scrollbar()}))}},{key:"children",value:function(){var t;(t=this.content).children.apply(t,arguments)}},{key:"position",value:function(){var t=this.content,e=this.options,n=e.el,o=e.position,r=n.box(),i=t.box(),c=r.top,s=r.left;switch(o){case ae.TOP:c=r.top-i.height;break;case ae.LEFT:s=r.left-i.width;break;case ae.RIGHT:s=r.left+r.width;break;case ae.BOTTOM:c=r.top+r.height}var a=window.innerWidth,l=window.innerHeight;if(s<0||s+i.width>a)switch(o){case ae.LEFT:s=r.left+r.width;break;case ae.RIGHT:s=r.left-i.width}if(c<0||c+i.height>l)switch(o){case ae.TOP:c=r.top+r.height;break;case ae.BOTTOM:c=r.top-i.height}(s<0||s+i.width>a)&&(c=r.top+r.height,s=r.left),(c<0||c+i.height>l)&&(c=r.top+r.height,s=r.left),this.offset({top:c,left:s})}},{key:"scrollbar",value:function(){var t=this.content.box(),e=this.box();this.scrollBarY.setSize(e.height,t.height),this.scrollBarX.setSize(e.width,t.width)}},{key:"open",value:function(){this.off&&(T(document.body).children(this),this.position(),this.scrollbar(),this.off=!1)}},{key:"close",value:function(){!1===this.off&&(T(document.body).remove(this),this.off=!0)}}])&&oe(n.prototype,r),i&&oe(n,i),e}(R);function fe(t){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function he(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function pe(t){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ye(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function be(t,e){return(be=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var de=function(t){function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(r=pe(e).call(this,"".concat(o,"-el-context-menu ").concat(i)))||"object"!==fe(r)&&"function"!=typeof r?ye(n):r).options=E.mergeDeep({},c),t.menus=[],t.elPopUp=new ue(t.options),t.elPopUp.children(ye(t)),t.bind(),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&be(t,e)}(e,t),n=e,(r=[{key:"bind",value:function(){var t=this;jt.bind(this,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(t){t.stopPropagation(),t.preventDefault()})),jt.bind(document.body,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.close()}))}},{key:"addItem",value:function(t){return this.menus.push(t),this.children(t),this}},{key:"open",value:function(){return this.elPopUp.open(),this}},{key:"close",value:function(){return this.elPopUp.close(),this}},{key:"isOpen",value:function(){return this.elPopUp.off}}])&&he(n.prototype,r),i&&he(n,i),e}(R);function ve(t){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ge(t,e){return!e||"object"!==ve(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function we(t){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function me(t,e){return(me=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Oe=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ge(this,we(e).call(this,"".concat(o,"-el-context-menu-item hover ").concat(t)))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&me(t,e)}(e,t),e}(R);function Ee(t){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Se(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _e(t){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Te(t,e){return(Te=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ke=[],Pe=function(t){function e(t,n){var r,i,c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,(r=!(c=_e(e).call(this,"".concat(o,"-format-context-menu-item")))||"object"!==Ee(c)&&"function"!=typeof c?xe(i):c).title=t,r.desc=n,r.icon=new Z("checked"),r.iconElement=T("div","".concat(o,"-format-context-menu-item-icon")),r.iconElement.children(r.icon),r.titleElement=T("div","".concat(o,"-format-context-menu-item-title")),r.descElement=T("div","".concat(o,"-format-context-menu-item-desc")),r.titleElement.text(t),r.descElement.text(n),r.children(r.iconElement),r.children(r.titleElement),r.children(r.descElement),ke.push(xe(r)),r}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Te(t,e)}(e,t),n=e,(r=[{key:"setTitle",value:function(t){this.titleElement.text(t)}},{key:"setDesc",value:function(t){this.descElement.text(t)}},{key:"setActive",value:function(){ke.forEach((function(t){t.removeClass("active")})),this.addClass("active")}}])&&Se(n.prototype,r),i&&Se(n,i),e}(Oe);function Ce(t){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ae(t,e){return!e||"object"!==Ce(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function je(t){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Re(t,e){return(Re=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Le=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ae(this,je(e).call(this,"".concat(o,"-el-context-menu-item-divider")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Re(t,e)}(e,t),e}(R);function We(t){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ie(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Me(t,e){return!e||"object"!==We(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function He(t){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function De(t,e){return(De=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ne=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Me(this,He(e).call(this,"".concat(o,"-format-context-menu"),E.mergeDeep({onUpdate:function(){}},n)))).items=[new Pe("","").data("type","default"),new Pe("","").data("type","text"),new Le,new Pe("","0.59").data("type","number"),new Pe("","90.00%").data("type","percentage"),new Pe("","1/2").data("type","fraction"),new Pe("","9.50e-01").data("type","ENotation"),new Le,new Pe("","5.00").data("type","rmb"),new Pe("","HK5.00").data("type","hk"),new Pe("","$5.00").data("type","dollar"),new Le,new Pe("","2018/4/18").data("type","date1"),new Pe("","418").data("type","date2"),new Pe("","20184").data("type","date3"),new Pe("","2018418").data("type","date4"),new Pe("","2018/4/18 14:30:30").data("type","date5"),new Pe("","14:30:30").data("type","time"),new Le,new Pe("","")],t.items.forEach((function(e){e instanceof Pe&&e.data("type")&&e.on(Ct.SYSTEM_EVENT_TYPE.CLICK,(function(){t.update(e.data("type"),e.title),e.setActive()})),t.addItem(e)})),t.init(),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&De(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){var t=this.options,e=this.items,n=t.el,o=e[0];n.setTitle(o.title),o.setActive()}},{key:"update",value:function(t,e){this.options.onUpdate(t,e),this.close()}},{key:"setActiveByType",value:function(t){this.items.forEach((function(e){e.data("type")===t&&e.setActive()}))}}])&&Ie(n.prototype,r),i&&Ie(n,i),e}(de);function Be(t){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ve(t){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ye(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ze(t,e){return(ze=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ue=function(t){function e(t){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(i=Ve(e).call(this,"".concat(o,"-tools-format")))||"object"!==Be(i)&&"function"!=typeof i?Ye(r):i).options=E.copyProp({contextMenu:{}},t),n.setTitle(""),n.setWidth(50),n.setEllipsis(),n.formatContextMenu=new Ne(E.copyProp({el:Ye(n),position:ae.BOTTOM},n.options.contextMenu)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ze(t,e)}(e,t),e}(Pt);function Fe(t){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ge(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Xe(t){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ke(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qe(t,e){return(qe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ze=[],$e=function(t){function e(t){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(i=Xe(e).call(this,"".concat(o,"-font-context-menu-item")))||"object"!==Fe(i)&&"function"!=typeof i?Ke(r):i).title=t,n.icon=new Z("checked"),n.iconElement=T("div","".concat(o,"-font-context-menu-item-icon")),n.iconElement.children(n.icon),n.titleElement=T("div","".concat(o,"-font-context-menu-item-title")),n.titleElement.text(t),n.titleElement.css("font-family",t),n.children(n.iconElement),n.children(n.titleElement),Ze.push(Ke(n)),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qe(t,e)}(e,t),n=e,(r=[{key:"setTitle",value:function(t){this.title=t,this.titleElement.text(t)}},{key:"setActive",value:function(){Ze.forEach((function(t){t.removeClass("active")})),this.addClass("active")}}])&&Ge(n.prototype,r),i&&Ge(n,i),e}(Oe);function Je(t){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qe(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function tn(t,e){return!e||"object"!==Je(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function en(t){return(en=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nn(t,e){return(nn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var on=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=tn(this,en(e).call(this,"".concat(o,"-font-context-menu"),E.mergeDeep({onUpdate:function(){}},n)))).items=[new $e("Arial"),new $e("Helvetica"),new $e("Source Sans Pro"),new $e("Comic Sans Ms"),new $e("Courier New"),new $e("Verdana"),new $e("Lalo")],t.items.forEach((function(e){e.on(Ct.SYSTEM_EVENT_TYPE.CLICK,(function(){t.update(e.title),e.setActive()})),t.addItem(e)})),t.setActiveByType(t.items[0].title),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nn(t,e)}(e,t),n=e,(r=[{key:"update",value:function(t){this.options.onUpdate(t),this.close()}},{key:"setActiveByType",value:function(t){this.items.forEach((function(e){e.title===t&&e.setActive()}))}}])&&Qe(n.prototype,r),i&&Qe(n,i),e}(de);function rn(t){return(rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cn(t){return(cn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function an(t,e){return(an=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ln=function(t){function e(t){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(i=cn(e).call(this,"".concat(o,"-tools-font")))||"object"!==rn(i)&&"function"!=typeof i?sn(r):i).options=E.copyProp({contextMenu:{}},t),n.setTitle("Arial"),n.setWidth(50),n.setEllipsis(),n.fontContextMenu=new on(E.copyProp({el:sn(n),position:ae.BOTTOM},n.options.contextMenu)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&an(t,e)}(e,t),e}(Pt);function un(t){return(un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fn(t,e){return!e||"object"!==un(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hn(t){return(hn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pn(t,e){return(pn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=fn(this,hn(e).call(this,"".concat(o,"-font-size-context-menu-item")))).size=t,n.titleElement=T("div","".concat(o,"-font-size-context-menu-item-title")),n.titleElement.text(t),n.titleElement.css("text-align","center"),n.children(n.titleElement),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pn(t,e)}(e,t),e}(Oe);function bn(t){return(bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function vn(t,e){return!e||"object"!==bn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gn(t){return(gn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wn(t,e){return(wn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var mn=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=vn(this,gn(e).call(this,"".concat(o,"-font-size-context-menu"),E.mergeDeep({onUpdate:function(){}},n)))).items=[new yn(6),new yn(7),new yn(8),new yn(9),new yn(10),new yn(11),new yn(12),new yn(14),new yn(15),new yn(18),new yn(24),new yn(36)],t.items.forEach((function(e){e.on(Ct.SYSTEM_EVENT_TYPE.CLICK,(function(){t.update(e.size)})),t.addItem(e)})),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wn(t,e)}(e,t),n=e,(r=[{key:"update",value:function(t){this.options.onUpdate(t),this.close()}}])&&dn(n.prototype,r),i&&dn(n,i),e}(de);function On(t){return(On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function En(t){return(En=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Sn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _n(t,e){return(_n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xn=function(t){function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{contextMenu:{}};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(r=En(e).call(this,"".concat(o,"-tools-font-size")))||"object"!==On(r)&&"function"!=typeof r?Sn(n):r).options=i,t.setTitle("10"),t.setWidth(30),t.setEllipsis(),t.fontSizeContextMenu=new mn(E.copyProp({el:Sn(t),position:ae.BOTTOM},t.options.contextMenu)),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_n(t,e)}(e,t),e}(Pt);function Tn(t){return(Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kn(t,e){return!e||"object"!==Tn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pn(t){return(Pn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cn(t,e){return(Cn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var An=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=kn(this,Pn(e).call(this,"".concat(o,"-tools-font-bold")))).icon=new Z("font-bold"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cn(t,e)}(e,t),e}(et);function jn(t){return(jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rn(t,e){return!e||"object"!==jn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ln(t){return(Ln=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wn(t,e){return(Wn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var In=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Rn(this,Ln(e).call(this,"".concat(o,"-tools-font-italic")))).icon=new Z("font-italic"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wn(t,e)}(e,t),e}(et);function Mn(t){return(Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hn(t,e){return!e||"object"!==Mn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dn(t){return(Dn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nn(t,e){return(Nn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Bn=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Hn(this,Dn(e).call(this,"".concat(o,"-tools-under-line")))).icon=new Z("under-line"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nn(t,e)}(e,t),e}(et);function Vn(t){return(Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yn(t,e){return!e||"object"!==Vn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function zn(t){return(zn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Un(t,e){return(Un=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Fn=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Yn(this,zn(e).call(this,"".concat(o,"-tools-font-strike")))).icon=new Z("font-strike"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Un(t,e)}(e,t),e}(et);function Gn(t){return(Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xn(t,e){return!e||"object"!==Gn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Kn(t){return(Kn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qn(t,e){return(qn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zn=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Xn(this,Kn(e).call(this,"".concat(o,"-font-color-context-menu-item")))).title=t,r.icon=n,n&&(r.iconElement=T("div","".concat(o,"-font-color-context-menu-item-icon")),r.iconElement.children(r.icon),r.children(r.iconElement)),t&&(r.titleElement=T("div","".concat(o,"-font-color-context-menu-item-title")),r.titleElement.text(t),r.children(r.titleElement)),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qn(t,e)}(e,t),e}(Oe);function $n(t){return($n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Qn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function to(t,e){return(to=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function eo(t,e,n){return(eo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=no(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function no(t){return(no=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var oo=[],ro={LEFT:1,TOP:2,RIGHT:3,CENTER:4},io=function(t){function e(t){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(i=no(e).call(this,"".concat(o,"-drag-panel")))||"object"!==$n(i)&&"function"!=typeof i?Qn(r):i).options=E.mergeDeep({position:ro.CENTER},t),n.off=!0,n.mask=T("div","".concat(o,"-drag-panel-mask")),n.content=T("div","".concat(o,"-drag-panel-content")),eo(no(e.prototype),"children",Qn(n)).call(Qn(n),n.content),n.bind(),oo.push(Qn(n)),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&to(t,e)}(e,t),n=e,i=[{key:"closeAll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];oo.forEach((function(e){-1===t.indexOf(e)&&e.close()}))}}],(r=[{key:"bind",value:function(){var t=this,e=this.mask;jt.bind(e,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.close(),e.stopPropagation()})),jt.bind(this,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){if(0===e.button){var n=t.computeEventXy(e,t);jt.mouseMoveUp(T(document),(function(e){var o=e.pageY-n.y,r=e.pageX-n.x;t.offset({top:o,left:r}),e.stopPropagation(),e.preventDefault()})),e.stopPropagation(),e.preventDefault()}}))}},{key:"position",value:function(){var t=this.options.position,e=E.viewPort(),n=e.width,o=e.height,r=this.box();switch(t){case ro.LEFT:case ro.RIGHT:case ro.TOP:break;case ro.CENTER:this.offset({left:n/2-r.width/2,top:o/2-r.height/2})}}},{key:"open",value:function(){if(this.off){var t=this.mask;T(document.body).children(t),T(document.body).children(this),this.position(),this.off=!1}}},{key:"close",value:function(){if(!1===this.off){var t=this.mask;T(document.body).remove(this),T(document.body).remove(t),this.off=!0}}},{key:"children",value:function(){var t;(t=this.content).children.apply(t,arguments)}}])&&Jn(n.prototype,r),i&&Jn(n,i),e}(R);function co(t){return(co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function so(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ao(t){return(ao=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uo(t,e){return(uo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fo=function(t){function e(t){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(i=ao(e).call(this,"".concat(o,"-color-picker")))||"object"!==co(i)&&"function"!=typeof i?lo(r):i).options=E.mergeDeep({selectCb:function(){}},t),n.dragPanel=new io,n.color=[360,0,100],n.preViewColorPoint=T("div","".concat(o,"-color-picker-pre-view-color-point")),n.colorValueTips=T("div","".concat(o,"-color-picker-color-value-tips")),n.colorValueTips.text(""),n.colorInput=T("input","".concat(o,"-color-picker-color-input")),n.top=T("div","".concat(o,"-color-picker-top")),n.top.children(n.preViewColorPoint),n.top.children(n.colorValueTips),n.top.children(n.colorInput),n.selectColorPoint=T("div","".concat(o,"-color-picker-select-color-point")),n.selectColorArea1=T("div","".concat(o,"-color-picker-select-color-area area1")),n.selectColorArea2=T("div","".concat(o,"-color-picker-select-color-area area2")),n.selectColorArea3=T("div","".concat(o,"-color-picker-select-color-area area3")),n.center=T("div","".concat(o,"-color-picker-center")),n.center.children(n.selectColorArea1),n.center.children(n.selectColorArea2),n.center.children(n.selectColorArea3),n.center.children(n.selectColorPoint),n.colorHuxTips=T("div","".concat(o,"-color-picker-color-hux-tips")),n.colorBar=T("div","".concat(o,"-color-picker-color-bar")),n.colorBarPoint=T("div","".concat(o,"-color-picker-bar-point")),n.bottom=T("div","".concat(o,"-color-picker-bottom")),n.colorHuxTips.text("HUE"),n.colorBar.children(n.colorBarPoint),n.bottom.children(n.colorHuxTips),n.bottom.children(n.colorBar),n.cancelButton=T("div","".concat(o,"-color-picker-button cancel")),n.selectButton=T("div","".concat(o,"-color-picker-button select")),n.buttons=T("div","".concat(o,"-color-picker-buttons")),n.cancelButton.text(""),n.selectButton.text(""),n.buttons.children(n.selectButton),n.buttons.children(n.cancelButton),n.children(n.top),n.children(n.center),n.children(n.bottom),n.children(n.buttons),n.dragPanel.children(lo(n)),n.dragPanel.css("background","#ffffff"),n.bind(),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&uo(t,e)}(e,t),n=e,i=[{key:"fixHex",value:function(t){var e=6-t.length;if(e>0){for(var n=[],o=0;o<e;o+=1)n.push("0");n.push(t),t=n.join("")}return t}},{key:"fixHsx",value:function(t){return{h:Math.min(360,Math.max(0,t.h)),s:Math.min(100,Math.max(0,t.s)),x:Math.min(100,Math.max(0,t.x))}}},{key:"hexToRgb",value:function(t){return{r:(t=parseInt(t.indexOf("#")>-1?t.substring(1):t,16))>>16,g:(65280&t)>>8,b:255&t}}},{key:"hexToHsb",value:function(t){return this.rgbToHsb(this.hexToRgb(t))}},{key:"rgbToHsb",value:function(t){var e={h:0,s:0,x:0},n=Math.min(t.r,t.g,t.b),o=Math.max(t.r,t.g,t.b),r=o-n;return e.x=o,e.s=0!==o?255*r/o:0,0!==e.s?t.r===o?e.h=(t.g-t.b)/r:t.g===o?e.h=2+(t.b-t.r)/r:e.h=4+(t.r-t.g)/r:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.x*=100/255,e}},{key:"hsbToRgb",value:function(t){var e={},n=t.h,o=255*t.s/100,r=255*t.x/100;if(0===o)e.r=r,e.g=r,e.b=r;else{var i=r,c=(255-o)*r/255,s=n%60*(i-c)/60;360===n&&(n=0),n<60?(e.r=i,e.b=c,e.g=c+s):n<120?(e.g=i,e.b=c,e.r=i-s):n<180?(e.g=i,e.r=c,e.b=c+s):n<240?(e.b=i,e.r=c,e.g=i-s):n<300?(e.b=i,e.g=c,e.r=c+s):n<360?(e.r=i,e.g=c,e.b=i-s):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}}},{key:"rgbToHex",value:function(t){var e=[t.r.toString(16),t.g.toString(16),t.b.toString(16)];return e.forEach((function(t,n){1===t.length&&(e[n]="0".concat(t))})),e.join("")}},{key:"hsbToHex",value:function(t){return this.rgbToHex(this.hsbToRgb(t))}},{key:"isRgb",value:function(t){return t.startsWith("rgb")}},{key:"isHex",value:function(t){return t.startsWith("#")}},{key:"parseRgb",value:function(t){var e=t.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return{r:e[1],g:e[2],b:e[3]}}},{key:"isDark",value:function(t){if(E.isBlank(t))return!1;if(this.isHex(t)){var n=e.hexToRgb(t);t="rgb(".concat(n.r,", ").concat(n.g,", ").concat(n.b,")")}var o=e.parseRgb(t);return.299*o.r+.578*o.g+.114*o.b>=192}}],(r=[{key:"bind",value:function(){var t=this,n=this.selectColorPoint,o=this.center,r=this.colorBarPoint,i=this.colorBar,c=this.colorInput,s=this.cancelButton,a=this.selectButton;jt.bind(this,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(t){t.stopPropagation()})),jt.bind(n,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.computeEventXy(e,o),r=o.box();n.x<0&&(n.x=0),n.x>r.width&&(n.x=r.width),n.y<0&&(n.y=0),n.y>r.height&&(n.y=r.height),t.downSelect(n.x,n.y,r.width,r.height),jt.mouseMoveUp(T(document),(function(e){var n=t.computeEventXy(e,o);n.x<0&&(n.x=0),n.x>r.width&&(n.x=r.width),n.y<0&&(n.y=0),n.y>r.height&&(n.y=r.height),t.moveSelect(n.x,n.y,r.width,r.height)}))})),jt.bind(r,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.computeEventXy(e,i),o=i.box();n.x<0&&(n.x=0),n.x>o.width&&(n.x=o.width),t.downHue(n.x,o.width),jt.mouseMoveUp(T(document),(function(e){var n=t.computeEventXy(e,i),o=i.box();n.x<0&&(n.x=0),n.x>o.width&&(n.x=o.width),t.moveHue(n.x,o.width)}))})),jt.bind(c,Ct.SYSTEM_EVENT_TYPE.CHANGE,(function(){var e=c.val();e&&t.hexColor(e)})),jt.bind(s,Ct.SYSTEM_EVENT_TYPE.CLICK,(function(){t.close()})),jt.bind(a,Ct.SYSTEM_EVENT_TYPE.CLICK,(function(){var n=t.color,o=e.fixHsx({h:parseInt(n[0],10),s:parseInt(n[1],10),x:parseInt(n[2],10)}),r=e.hsbToHex(o);t.options.selectCb("#".concat(r)),t.close()}))}},{key:"open",value:function(t){if(this.dragPanel.open(),t){if(e.isRgb(t)){var n=e.parseRgb(t);t=e.rgbToHex(n)}this.hexColor(t)}else this.change();return this}},{key:"close",value:function(){return this.dragPanel.close(),this}},{key:"sliderPosition",value:function(t){var e=this.colorBar,n=this.colorBarPoint,o=n.box(),r=e.box(),i=parseInt(r.width-r.width*t.h/360,10);i-=o.width/2,n.offset({left:i});var c=this.center,s=this.selectColorPoint,a=s.box(),l=c.box(),u=parseInt(l.width*t.s/100,10),f=parseInt(l.height*(100-t.x)/100,10);u-=a.width/2,f-=a.height/2,s.offset({left:u,top:f})}},{key:"hueChange",value:function(){var t=this.color,n=e.fixHsx({h:parseInt(t[0],10),s:parseInt(t[1],10),x:parseInt(t[2],10)}),o=this.colorBarPoint,r=this.selectColorPoint,i=this.preViewColorPoint,c=this.selectColorArea1,s=this.colorInput,a=e.hsbToHex(n),l=e.hsbToHex({h:n.h,s:100,x:100});r.css("backgroundColor","#".concat(a)),i.css("backgroundColor","#".concat(a)),o.css("backgroundColor","#".concat(l)),c.css("backgroundColor","#".concat(l)),s.val("#".concat(a)),this.sliderPosition(n)}},{key:"selectChange",value:function(){var t=this.color,n=e.fixHsx({h:parseInt(t[0],10),s:parseInt(t[1],10),x:parseInt(t[2],10)}),o=this.preViewColorPoint,r=this.selectColorPoint,i=this.colorInput,c=e.hsbToHex(n);r.css("backgroundColor","#".concat(c)),o.css("backgroundColor","#".concat(c)),i.val("#".concat(c)),this.sliderPosition(n)}},{key:"change",value:function(){this.hueChange(),this.selectChange()}},{key:"downSelect",value:function(t,e,n,o){var r=this.color;r[1]=parseInt(100*t/n,10),r[2]=parseInt(100*(o-e)/o,10),this.selectChange()}},{key:"moveSelect",value:function(t,e,n,o){var r=this.color;r[1]=parseInt(100*Math.max(0,Math.min(n,t))/n,10),r[2]=parseInt(100*(o-Math.max(0,Math.min(o,e)))/o,10),this.selectChange()}},{key:"downHue",value:function(t,e){this.color[0]=parseInt(360*(e-t)/e,10),this.hueChange()}},{key:"moveHue",value:function(t,e){this.color[0]=parseInt(360*(e-Math.max(0,Math.min(e,t)))/e,10),this.hueChange()}},{key:"hexColor",value:function(t){var n=this.color,o=e.hexToHsb(e.fixHex(t));n[0]=o.h,n[1]=o.s,n[2]=o.x,this.change()}}])&&so(n.prototype,r),i&&so(n,i),e}(R);function ho(t){return(ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function po(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function yo(t,e){return!e||"object"!==ho(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function bo(t){return(bo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vo(t,e){return(vo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var go=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=yo(this,bo(e).call(this,"".concat(o,"-color-array-item")))).options=E.mergeDeep({color:null,icon:null},t),n.color=n.options.color,n.icon=n.options.icon,n.color&&(n.css("backgroundColor",n.color),fo.isDark(n.options.color)?(n.checkedIcon=new Z("checked-dark"),n.children(n.checkedIcon)):(n.checkedIcon=new Z("checked-light"),n.children(n.checkedIcon)),n.checkedIcon.hide()),n.icon&&n.children(n.options.icon),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vo(t,e)}(e,t),n=e,(r=[{key:"setActive",value:function(t){this.checkedIcon&&(t?this.checkedIcon.show():this.checkedIcon.hide())}}])&&po(n.prototype,r),i&&po(n,i),e}(R);function wo(t){return(wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mo(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Oo(t,e){return!e||"object"!==wo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Eo(t){return(Eo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function So(t,e){return(So=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _o=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Oo(this,Eo(e).call(this,"".concat(o,"-color-array")))).options=E.mergeDeep({colors:[new go({color:"rgb(0,0,0)"}),new go({color:"rgb(67, 67, 67)"}),new go({color:"rgb(102, 102, 102)"}),new go({color:"rgb(153, 153, 153)"}),new go({color:"rgb(183, 183, 183)"}),new go({color:"rgb(204, 204, 204)"}),new go({color:"rgb(217, 217, 217)"}),new go({color:"rgb(239, 239, 239)"}),new go({color:"rgb(255, 255, 255)"}),new go({color:"rgb(152, 0, 0)"}),new go({color:"rgb(255, 0, 0)"}),new go({color:"rgb(255, 153, 0)"}),new go({color:"rgb(255, 255, 0)"}),new go({color:"rgb(0, 255, 0)"}),new go({color:"rgb(0, 255, 255)"}),new go({color:"rgb(74, 134, 232)"}),new go({color:"rgb(0, 0, 255)"}),new go({color:"rgb(153, 0, 255)"}),new go({color:"rgb(255, 0, 255)"}),new go({color:"rgb(230, 184, 175)"}),new go({color:"rgb(244, 204, 204)"}),new go({color:"rgb(252, 229, 205)"}),new go({color:"rgb(255, 242, 204)"}),new go({color:"rgb(217, 234, 211)"}),new go({color:"rgb(208, 224, 227)"}),new go({color:"rgb(201, 218, 248)"}),new go({color:"rgb(207, 226, 243)"}),new go({color:"rgb(217, 210, 233)"}),new go({color:"rgb(234, 209, 220)"}),new go({color:"rgb(221, 126, 107)"}),new go({color:"rgb(234, 153, 153)"}),new go({color:"rgb(249, 203, 156)"}),new go({color:"rgb(255, 229, 153)"}),new go({color:"rgb(182, 215, 168)"}),new go({color:"rgb(162, 196, 201)"}),new go({color:"rgb(164, 194, 244)"}),new go({color:"rgb(159, 197, 232)"}),new go({color:"rgb(180, 167, 214)"}),new go({color:"rgb(213, 166, 189)"}),new go({color:"rgb(204, 65, 37)"}),new go({color:"rgb(224, 102, 102)"}),new go({color:"rgb(246, 178, 107)"}),new go({color:"rgb(255, 217, 102)"}),new go({color:"rgb(147, 196, 125)"}),new go({color:"rgb(118, 165, 175)"}),new go({color:"rgb(109, 158, 235)"}),new go({color:"rgb(111, 168, 220)"}),new go({color:"rgb(142, 124, 195)"}),new go({color:"rgb(194, 123, 160)"}),new go({color:"rgb(166, 28, 0)"}),new go({color:"rgb(204, 0, 0)"}),new go({color:"rgb(230, 145, 56)"}),new go({color:"rgb(241, 194, 50)"}),new go({color:"rgb(106, 168, 79)"}),new go({color:"rgb(69, 129, 142)"}),new go({color:"rgb(60, 120, 216)"}),new go({color:"rgb(61, 133, 198)"}),new go({color:"rgb(103, 78, 167)"}),new go({color:"rgb(166, 77, 121)"}),new go({color:"rgb(133, 32, 12)"}),new go({color:"rgb(153, 0, 0)"}),new go({color:"rgb(180, 95, 6)"}),new go({color:"rgb(191, 144, 0)"}),new go({color:"rgb(56, 118, 29)"}),new go({color:"rgb(19, 79, 92)"}),new go({color:"rgb(17, 85, 204)"}),new go({color:"rgb(11, 83, 148)"}),new go({color:"rgb(53, 28, 117)"}),new go({color:"rgb(116, 27, 71)"}),new go({color:"rgb(91, 15, 0)"}),new go({color:"rgb(102, 0, 0)"}),new go({color:"rgb(120, 63, 4)"}),new go({color:"rgb(127, 96, 0)"}),new go({color:"rgb(39, 78, 19)"}),new go({color:"rgb(12, 52, 61)"}),new go({color:"rgb(28, 69, 135)"}),new go({color:"rgb(7, 55, 99)"}),new go({color:"rgb(32, 18, 77)"}),new go({color:"rgb(76, 17, 48)"})],selectCb:function(){}},t),n.colors=n.options.colors,n.activeColor=null,n.colors.forEach((function(t){n.children(t),t.on(Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){n.options.selectCb(t),t.options.color&&n.setActiveByColor(t.options.color)}))})),n.colors.length>0&&n.setActiveByColor(n.colors[0].options.color),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&So(t,e)}(e,t),n=e,(r=[{key:"add",value:function(t){var e=this;t.on(Ct.SYSTEM_EVENT_TYPE.CLICK,(function(){e.options.selectCb(t),t.options.color&&e.setActiveByColor(t.options.color)})),this.colors.push(t),this.children(t)}},{key:"setActiveByColor",value:function(t){var e=this;this.colors.forEach((function(n){var o=n.options;o.color===t?(n.setActive(!0),e.activeColor=o.color):n.setActive(!1)}))}}])&&mo(n.prototype,r),i&&mo(n,i),e}(R);function xo(t){return(xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function To(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ko(t,e){return!e||"object"!==xo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Po(t){return(Po=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Co(t,e){return(Co=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ao=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=ko(this,Po(e).call(this,"".concat(o,"-font-color-context-menu"),E.mergeDeep({onUpdate:function(){}},n)))).colorPicker=new fo({selectCb:function(e){var n=new go({color:e});t.customizeColorArray.add(n),t.customizeColorArray.setActiveByColor(e),t.colorArray.setActiveByColor(null),t.options.onUpdate(e),t.close()}}),t.reset=new Zn("",new Z("clear-color")),t.reset.on(Ct.SYSTEM_EVENT_TYPE.CLICK,(function(){t.options.onUpdate("rgb(0,0,0)"),t.customizeColorArray.setActiveByColor(null),t.colorArray.setActiveByColor(null)})),t.array=new Zn,t.array.removeClass("hover"),t.colorArray=new _o({selectCb:function(e){var n=e.options.color;n&&t.options.onUpdate(n),t.customizeColorArray.setActiveByColor(null),t.close()}}),t.array.children(t.colorArray),t.title=T("div","".concat(o,"-font-color-context-menu-color-title")),t.title.text(""),t.plus=new Z("plus"),t.customizeColorArray=new _o({colors:[new go({icon:t.plus})],selectCb:function(e){var n=e.options.color;n?(t.options.onUpdate(n),t.colorArray.setActiveByColor(null),t.close()):t.colorPicker.open(t.customizeColorArray.activeColor)}}),t.customize=new Zn,t.customize.removeClass("hover"),t.customize.children(t.title),t.customize.children(t.customizeColorArray),t.addItem(t.reset),t.addItem(t.array),t.addItem(new Le),t.addItem(t.customize),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Co(t,e)}(e,t),n=e,(r=[{key:"setActiveByColor",value:function(t){this.customizeColorArray.setActiveByColor(t),this.colorArray.setActiveByColor(t)}}])&&To(n.prototype,r),i&&To(n,i),e}(de);function jo(t){return(jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ro(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Lo(t){return(Lo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Io(t,e){return(Io=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Mo=function(t){function e(t){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(i=Lo(e).call(this,"".concat(o,"-tools-font-color")))||"object"!==jo(i)&&"function"!=typeof i?Wo(r):i).options=E.mergeDeep({contextMenu:{}},t),n.icon=new Z("color"),n.fontColorContextMenu=new Ao(E.copyProp({el:Wo(n),position:ae.BOTTOM},n.options.contextMenu)),n.setIcon(n.icon),n.setColor("rgb(0,0,0)"),n.fontColorContextMenu.setActiveByColor("rgb(0,0,0)"),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Io(t,e)}(e,t),n=e,(r=[{key:"setColor",value:function(t){this.icon.css("border-bottom","3px solid ".concat(t))}}])&&Ro(n.prototype,r),i&&Ro(n,i),e}(Pt);function Ho(t){return(Ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Do(t,e){return!e||"object"!==Ho(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function No(t){return(No=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bo(t,e){return(Bo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Vo=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Do(this,No(e).call(this,"".concat(o,"-fill-color-context-menu-item")))).title=t,r.icon=n,n&&(r.iconElement=T("div","".concat(o,"-fill-color-context-menu-item-icon")),r.iconElement.children(r.icon),r.children(r.iconElement)),t&&(r.titleElement=T("div","".concat(o,"-fill-color-context-menu-item-title")),r.titleElement.text(t),r.children(r.titleElement)),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bo(t,e)}(e,t),e}(Oe);function Yo(t){return(Yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zo(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Uo(t,e){return!e||"object"!==Yo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Fo(t){return(Fo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Go(t,e){return(Go=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Xo=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Uo(this,Fo(e).call(this,"".concat(o,"-font-color-context-menu"),E.mergeDeep({onUpdate:function(){}},n)))).colorPicker=new fo({selectCb:function(e){var n=new go({color:e});t.customizeColorArray.add(n),t.customizeColorArray.setActiveByColor(e),t.colorArray.setActiveByColor(null),t.options.onUpdate(e),t.close()}}),t.reset=new Vo("",new Z("clear-color")),t.reset.on(Ct.SYSTEM_EVENT_TYPE.CLICK,(function(){t.options.onUpdate("rgb(0,0,0)"),t.customizeColorArray.setActiveByColor(null),t.colorArray.setActiveByColor(null)})),t.array=new Vo,t.array.removeClass("hover"),t.colorArray=new _o({selectCb:function(e){var n=e.options.color;n&&t.options.onUpdate(n),t.customizeColorArray.setActiveByColor(null),t.close()}}),t.array.children(t.colorArray),t.title=T("div","".concat(o,"-font-color-context-menu-color-title")),t.title.text(""),t.plus=new Z("plus"),t.customizeColorArray=new _o({colors:[new go({icon:t.plus})],selectCb:function(e){var n=e.options.color;n?(t.options.onUpdate(n),t.colorArray.setActiveByColor(null),t.close()):t.colorPicker.open(t.customizeColorArray.activeColor)}}),t.customize=new Vo,t.customize.removeClass("hover"),t.customize.children(t.title),t.customize.children(t.customizeColorArray),t.addItem(t.reset),t.addItem(t.array),t.addItem(new Le),t.addItem(t.customize),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Go(t,e)}(e,t),n=e,(r=[{key:"setActiveByColor",value:function(t){this.customizeColorArray.setActiveByColor(t),this.colorArray.setActiveByColor(t)}}])&&zo(n.prototype,r),i&&zo(n,i),e}(de);function Ko(t){return(Ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qo(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Zo(t){return(Zo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jo(t,e){return(Jo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qo=function(t){function e(t){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(i=Zo(e).call(this,"".concat(o,"-tools-fill-color")))||"object"!==Ko(i)&&"function"!=typeof i?$o(r):i).options=E.mergeDeep({contextMenu:{}},t),n.icon=new Z("fill-color"),n.fillColorContextMenu=new Xo(E.copyProp({el:$o(n),position:ae.BOTTOM},n.options.contextMenu)),n.setIcon(n.icon),n.setColor("rgb(255, 255, 255)"),n.fillColorContextMenu.setActiveByColor("rgb(255, 255, 255)"),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jo(t,e)}(e,t),n=e,(r=[{key:"setColor",value:function(t){this.icon.css("border-bottom","3px solid ".concat(t))}}])&&qo(n.prototype,r),i&&qo(n,i),e}(Pt);function tr(t){return(tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function er(t,e){return!e||"object"!==tr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function nr(t){return(nr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function or(t,e){return(or=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var rr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),er(this,nr(e).call(this,"".concat(o,"-border-type-context-menu-item")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&or(t,e)}(e,t),e}(Oe);function ir(t){return(ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cr(t,e){return!e||"object"!==ir(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function sr(t){return(sr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ar(t,e){return(ar=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var lr=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=cr(this,sr(e).call(this,"".concat(o,"-tools-border1")))).icon=new Z("border1"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ar(t,e)}(e,t),e}(et);function ur(t){return(ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fr(t,e){return!e||"object"!==ur(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hr(t){return(hr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pr(t,e){return(pr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yr=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=fr(this,hr(e).call(this,"".concat(o,"-tools-border2")))).icon=new Z("border2"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pr(t,e)}(e,t),e}(et);function br(t){return(br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dr(t,e){return!e||"object"!==br(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vr(t){return(vr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gr(t,e){return(gr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wr=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=dr(this,vr(e).call(this,"".concat(o,"-tools-border3")))).icon=new Z("border3"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gr(t,e)}(e,t),e}(et);function mr(t){return(mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Or(t,e){return!e||"object"!==mr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Er(t){return(Er=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Sr(t,e){return(Sr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _r=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Or(this,Er(e).call(this,"".concat(o,"-tools-border4")))).icon=new Z("border4"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sr(t,e)}(e,t),e}(et);function xr(t){return(xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tr(t,e){return!e||"object"!==xr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function kr(t){return(kr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pr(t,e){return(Pr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Cr=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Tr(this,kr(e).call(this,"".concat(o,"-tools-border5")))).icon=new Z("border5"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pr(t,e)}(e,t),e}(et);function Ar(t){return(Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jr(t,e){return!e||"object"!==Ar(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Rr(t){return(Rr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Lr(t,e){return(Lr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Wr=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=jr(this,Rr(e).call(this,"".concat(o,"-tools-border6")))).icon=new Z("border6"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lr(t,e)}(e,t),e}(et);function Ir(t){return(Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mr(t,e){return!e||"object"!==Ir(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Hr(t){return(Hr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Dr(t,e){return(Dr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Nr=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Mr(this,Hr(e).call(this,"".concat(o,"-tools-border7")))).icon=new Z("border7"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dr(t,e)}(e,t),e}(et);function Br(t){return(Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vr(t,e){return!e||"object"!==Br(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yr(t){return(Yr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zr(t,e){return(zr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ur=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Vr(this,Yr(e).call(this,"".concat(o,"-tools-border8")))).icon=new Z("border8"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zr(t,e)}(e,t),e}(et);function Fr(t){return(Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gr(t,e){return!e||"object"!==Fr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xr(t){return(Xr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Kr(t,e){return(Kr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qr=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Gr(this,Xr(e).call(this,"".concat(o,"-tools-border9")))).icon=new Z("border9"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kr(t,e)}(e,t),e}(et);function Zr(t){return(Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $r(t,e){return!e||"object"!==Zr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Jr(t){return(Jr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qr(t,e){return(Qr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ti=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=$r(this,Jr(e).call(this,"".concat(o,"-tools-border10")))).icon=new Z("border10"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qr(t,e)}(e,t),e}(et);function ei(t){return(ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ni(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function oi(t,e){return!e||"object"!==ei(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ri(t){return(ri=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ii(t,e){return(ii=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ci=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=oi(this,ri(e).call(this,"".concat(o,"-tools-border-color")))).icon=new Z("border-color"),t.setIcon(t.icon),t.setColor("#000000"),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ii(t,e)}(e,t),n=e,(r=[{key:"setColor",value:function(t){this.icon.css("border-bottom","3px solid ".concat(t))}}])&&ni(n.prototype,r),i&&ni(n,i),e}(Pt);function si(t){return(si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ai(t,e){return!e||"object"!==si(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function li(t){return(li=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ui(t,e){return(ui=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fi=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=ai(this,li(e).call(this,"".concat(o,"-tools-border-type")))).icon=new Z("border-type"),t.setIcon(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ui(t,e)}(e,t),e}(Pt);function hi(t){return(hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pi(t,e){return!e||"object"!==hi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function yi(t){return(yi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bi(t,e){return(bi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var di=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=pi(this,yi(e).call(this,"".concat(o,"-border-color-context-menu-item")))).title=t,r.icon=n,n&&(r.iconElement=T("div","".concat(o,"-border-color-context-menu-item-icon")),r.iconElement.children(r.icon),r.children(r.iconElement)),t&&(r.titleElement=T("div","".concat(o,"-border-color-context-menu-item-title")),r.titleElement.text(t),r.children(r.titleElement)),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bi(t,e)}(e,t),e}(Oe);function vi(t){return(vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gi(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function wi(t,e){return!e||"object"!==vi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mi(t){return(mi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Oi(t,e){return(Oi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ei=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=wi(this,mi(e).call(this,"".concat(o,"-border-color-context-menu"),E.mergeDeep({onUpdate:function(){}},n)))).colorPicker=new fo({selectCb:function(e){var n=new go({color:e});t.customizeColorArray.add(n),t.customizeColorArray.setActiveByColor(e),t.colorArray.setActiveByColor(null),t.options.onUpdate(e),t.close()}}),t.reset=new di("",new Z("clear-color")),t.reset.on(Ct.SYSTEM_EVENT_TYPE.CLICK,(function(){t.options.onUpdate("rgb(0,0,0)"),t.customizeColorArray.setActiveByColor(null),t.colorArray.setActiveByColor(null)})),t.array=new di,t.array.removeClass("hover"),t.colorArray=new _o({selectCb:function(e){var n=e.options.color;n&&t.options.onUpdate(n),t.customizeColorArray.setActiveByColor(null),t.close()}}),t.array.children(t.colorArray),t.title=T("div","".concat(o,"-border-color-context-menu-color-title")),t.title.text(""),t.plus=new Z("plus"),t.customizeColorArray=new _o({colors:[new go({icon:t.plus})],selectCb:function(e){var n=e.options.color;n?(t.options.onUpdate(n),t.colorArray.setActiveByColor(null),t.close()):t.colorPicker.open(t.customizeColorArray.activeColor)}}),t.customize=new di,t.customize.removeClass("hover"),t.customize.children(t.title),t.customize.children(t.customizeColorArray),t.addItem(t.reset),t.addItem(t.array),t.addItem(new Le),t.addItem(t.customize),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oi(t,e)}(e,t),n=e,(r=[{key:"setActiveByColor",value:function(t){this.customizeColorArray.setActiveByColor(t),this.colorArray.setActiveByColor(t)}}])&&gi(n.prototype,r),i&&gi(n,i),e}(de);function Si(t){return(Si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function xi(t){return(xi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ti(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ki(t,e){return(ki=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Pi=[],Ci=function(t){function e(t){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(i=xi(e).call(this,"".concat(o,"-font-context-menu-item")))||"object"!==Si(i)&&"function"!=typeof i?Ti(r):i).type=t,n.icon=new Z("checked"),n.typeIcon=new Z(t),n.typeIcon.setWidth(50),n.iconElement=T("div","".concat(o,"-font-context-menu-item-icon")),n.titleElement=T("div","".concat(o,"-font-context-menu-item-title")),n.iconElement.children(n.icon),n.titleElement.children(n.typeIcon),n.children(n.iconElement),n.children(n.titleElement),Pi.push(Ti(n)),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ki(t,e)}(e,t),n=e,(r=[{key:"setTitle",value:function(t){this.title=t,this.titleElement.text(t)}},{key:"setActive",value:function(){Pi.forEach((function(t){t.removeClass("active")})),this.addClass("active")}}])&&_i(n.prototype,r),i&&_i(n,i),e}(Oe);function Ai(t){return(Ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ji(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ri(t,e){return!e||"object"!==Ai(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Li(t){return(Li=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wi(t,e){return(Wi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ii=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Ri(this,Li(e).call(this,"".concat(o,"-line-type-context-menu"),E.mergeDeep({onUpdate:function(){}},n)))).items=[new Ci("line1"),new Ci("line2"),new Ci("line3"),new Ci("line4"),new Ci("line5"),new Ci("line6")],t.items.forEach((function(e){e.on(Ct.SYSTEM_EVENT_TYPE.CLICK,(function(){t.update(e.type),e.setActive()})),t.addItem(e)})),t.setActiveByType(t.items[0].type),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wi(t,e)}(e,t),n=e,(r=[{key:"update",value:function(t){this.options.onUpdate(t),this.close()}},{key:"setActiveByType",value:function(t){this.items.forEach((function(e){e.type===t&&e.setActive()}))}}])&&ji(n.prototype,r),i&&ji(n,i),e}(de);function Mi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hi(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Di(t,e,n){return e&&Hi(t.prototype,e),n&&Hi(t,n),t}var Ni={SOLID_LINE:0,DOTTED_LINE:1,POINT_LINE:2,DOUBLE_LINE:3},Bi=function(){function t(e,n){Mi(this,t),this.draw=e,E.mergeDeep(this,{color:"#000000",width:1},n)}return Di(t,[{key:"drawLine",value:function(t,e,n,o){var r=this.draw,i=this.width,c=this.color;r.beginPath(),r.attr({lineWidth:i,strokeStyle:c}),r.setLineDash([]),r.line([t,e],[n,o])}},{key:"setColor",value:function(t){this.color=t}},{key:"setWidth",value:function(t){this.width=t}}]),t}(),Vi=function(){function t(e,n){Mi(this,t),this.draw=e,E.mergeDeep(this,{color:"#000000",width:1,dash:[5]},n)}return Di(t,[{key:"drawLine",value:function(t,e,n,o){var r=this.draw,i=this.dash,c=this.width,s=this.color;r.beginPath(),r.attr({lineWidth:c,strokeStyle:s}),r.setLineDash(i),r.line([t,e],[n,o])}},{key:"setColor",value:function(t){this.color=t}},{key:"setWidth",value:function(t){this.width=t}}]),t}(),Yi=function(){function t(e,n){Mi(this,t),this.draw=e,E.mergeDeep(this,{color:"#000000",width:1,padding:1,spacing:1.5,leftShow:function(){return!1},topShow:function(){return!1},rightShow:function(){return!1},bottomShow:function(){return!1},iFMerge:function(){return!1},iFMergeFirstRow:function(){return!1},iFMergeLastRow:function(){return!1},iFMergeFirstCol:function(){return!1},iFMergeLastCol:function(){return!1}},n)}return Di(t,[{key:"handleExternal",value:function(t,e,n,o,r,i,c){var s={},a=this.leftShow,l=this.topShow,u=this.rightShow,f=this.bottomShow,h=this.iFMerge,p=this.iFMergeFirstRow,y=this.iFMergeLastRow,b=this.iFMergeFirstCol,d=this.iFMergeLastCol,v=this.spacing,g=null,w=null,m=null,O=null,E=null;switch(c){case"left":(g=h(r,i-1))&&(w=p(r,i-1),m=y(r,i-1),O=b(r,i-1),E=d(r,i-1));break;case"top":(g=h(r-1,i))&&(w=p(r-1,i),m=y(r-1,i),O=b(r-1,i),E=d(r-1,i));break;case"right":(g=h(r,i+1))&&(w=p(r,i+1),m=y(r,i+1),O=b(r,i+1),E=d(r,i+1));break;case"bottom":(g=h(r+1,i))&&(w=p(r+1,i),m=y(r+1,i),O=b(r+1,i),E=d(r+1,i))}if(g){switch(c){case"left":s.sx=t-v,s.ex=n-v;var S=f(r-1,i-1)||l(r,i-1),_=l(r,i),x=f(r-1,i);s.sy=e,(_||x)&&(s.sy=e-v),S&&w&&(s.sy=e+v);var T=l(r+1,i-1)||f(r,i-1),k=f(r,i),P=l(r+1,i);s.ey=o,(k||P)&&(s.ey=o+v),T&&m&&(s.ey=o-v);break;case"top":s.sy=e-v,s.ey=o-v;var C=u(r-1,i-1)||a(r-1,i),A=a(r,i),j=u(r,i-1);s.sx=t,(A||j)&&(s.sx=t-v),C&&O&&(s.sx=t+v);var R=a(r-1,i+1)||u(r-1,i),L=u(r,i),W=a(r,i+1);s.ex=n,(L||W)&&(s.ex=n+v),R&&E&&(s.ex=n-v);break;case"right":s.sx=t+v,s.ex=n+v;var I=f(r-1,i+1)||l(r,i+1),M=l(r,i),H=f(r-1,i);s.sy=e,(M||H)&&(s.sy=e-v),I&&w&&(s.sy=e+v);var D=l(r+1,i+1)||f(r,i+1),N=f(r,i),B=l(r+1,i);s.ey=o,(N||B)&&(s.ey=o+v),D&&m&&(s.ey=o-v);break;case"bottom":s.sy=e+v,s.ey=o+v;var V=u(r+1,i-1)||a(r+1,i),Y=a(r,i),z=u(r,i-1);s.sx=t,(Y||z)&&(s.sx=t-v),V&&O&&(s.sx=t+v);var U=a(r+1,i+1)||u(r+1,i),F=u(r,i),G=a(r,i+1);s.ex=n,(F||G)&&(s.ex=n+v),U&&E&&(s.ex=n-v)}return s}switch(c){case"left":s.sx=t-v,s.ex=n-v;var X=f(r-1,i-1)||l(r,i-1),K=l(r,i),q=f(r-1,i);s.sy=e,(K||q)&&(s.sy=e-v),X&&(s.sy=e+v);var Z=l(r+1,i-1)||f(r,i-1),$=f(r,i),J=l(r+1,i);s.ey=o,($||J)&&(s.ey=o+v),Z&&(s.ey=o-v);break;case"top":s.sy=e-v,s.ey=o-v;var Q=u(r-1,i-1)||a(r-1,i),tt=a(r,i),et=u(r,i-1);s.sx=t,(tt||et)&&(s.sx=t-v),Q&&(s.sx=t+v);var nt=a(r-1,i+1)||u(r-1,i),ot=u(r,i),rt=a(r,i+1);s.ex=n,(ot||rt)&&(s.ex=n+v),nt&&(s.ex=n-v);break;case"right":s.sx=t+v,s.ex=n+v;var it=f(r-1,i+1)||l(r,i+1),ct=l(r,i),st=f(r-1,i);s.sy=e,(ct||st)&&(s.sy=e-v),it&&(s.sy=e+v);var at=l(r+1,i+1)||f(r,i+1),lt=f(r,i),ut=l(r+1,i);s.ey=o,(lt||ut)&&(s.ey=o+v),at&&(s.ey=o-v);break;case"bottom":s.sy=e+v,s.ey=o+v;var ft=u(r+1,i-1)||a(r+1,i),ht=a(r,i),pt=u(r,i-1);s.sx=t,(ht||pt)&&(s.sx=t-v),ft&&(s.sx=t+v);var yt=a(r+1,i+1)||u(r+1,i),bt=u(r,i),dt=a(r,i+1);s.ex=n,(bt||dt)&&(s.ex=n+v),yt&&(s.ex=n-v)}return s}},{key:"handleInternal",value:function(t,e,n,o,r,i,c){var s={},a=this.leftShow,l=this.topShow,u=this.rightShow,f=this.bottomShow,h=this.iFMerge,p=this.iFMergeFirstRow,y=this.iFMergeLastRow,b=this.iFMergeFirstCol,d=this.iFMergeLastCol,v=this.spacing;if(h(r,i)){var g=p(r,i),w=y(r,i),m=b(r,i),O=d(r,i);switch(c){case"left":s.sx=t+v,s.ex=n+v;var E=f(r-1,i-1)||l(r,i-1),S=l(r,i),_=f(r-1,i);s.sy=e,E&&(s.sy=e-v),(S||_)&&g&&(s.sy=e+v);var x=l(r+1,i-1)||f(r,i-1),T=f(r,i),k=l(r+1,i);s.ey=o,x&&(s.ey=o+v),(T||k)&&w&&(s.ey=o-v);break;case"top":s.sy=e+v,s.ey=o+v;var P=u(r-1,i-1)||a(r-1,i),C=a(r,i),A=u(r,i-1);s.sx=t,P&&(s.sx=t-v),(C||A)&&m&&(s.sx=t+v);var j=a(r-1,i+1)||u(r-1,i),R=u(r,i),L=a(r,i+1);s.ex=n,j&&(s.ex=n+v),(R||L)&&O&&(s.ex=n-v);break;case"right":s.sx=t-v,s.ex=n-v;var W=f(r-1,i+1)||l(r,i+1),I=l(r,i),M=f(r-1,i);s.sy=e,W&&(s.sy=e-v),(I||M)&&g&&(s.sy=e+v);var H=l(r+1,i+1)||f(r,i+1),D=f(r,i),N=l(r+1,i);s.ey=o,H&&(s.ey=o+v),(D||N)&&w&&(s.ey=o-v);break;case"bottom":s.sy=e-v,s.ey=o-v;var B=u(r+1,i-1)||a(r+1,i),V=a(r,i),Y=u(r,i-1);s.sx=t,B&&(s.sx=t-v),(V||Y)&&m&&(s.sx=t+v);var z=a(r+1,i+1)||u(r+1,i),U=u(r,i),F=a(r,i+1);s.ex=n,z&&(s.ex=n+v),(U||F)&&O&&(s.ex=n-v)}return s}switch(c){case"left":s.sx=t+v,s.ex=n+v;var G=f(r-1,i-1)||l(r,i-1),X=l(r,i),K=f(r-1,i);s.sy=e,G&&(s.sy=e-v),(X||K)&&(s.sy=e+v);var q=l(r+1,i-1)||f(r,i-1),Z=f(r,i),$=l(r+1,i);s.ey=o,q&&(s.ey=o+v),(Z||$)&&(s.ey=o-v);break;case"top":s.sy=e+v,s.ey=o+v;var J=u(r-1,i-1)||a(r-1,i),Q=a(r,i),tt=u(r,i-1);s.sx=t,J&&(s.sx=t-v),(Q||tt)&&(s.sx=t+v);var et=a(r-1,i+1)||u(r-1,i),nt=u(r,i),ot=a(r,i+1);s.ex=n,et&&(s.ex=n+v),(nt||ot)&&(s.ex=n-v);break;case"right":s.sx=t-v,s.ex=n-v;var rt=f(r-1,i+1)||l(r,i+1),it=l(r,i),ct=f(r-1,i);s.sy=e,rt&&(s.sy=e-v),(it||ct)&&(s.sy=e+v);var st=l(r+1,i+1)||f(r,i+1),at=f(r,i),lt=l(r+1,i);s.ey=o,st&&(s.ey=o+v),(at||lt)&&(s.ey=o-v);break;case"bottom":s.sy=e-v,s.ey=o-v;var ut=u(r+1,i-1)||a(r+1,i),ft=a(r,i),ht=u(r,i-1);s.sx=t,ut&&(s.sx=t-v),(ft||ht)&&(s.sx=t+v);var pt=a(r+1,i+1)||u(r+1,i),yt=u(r,i),bt=a(r,i+1);s.ex=n,pt&&(s.ex=n+v),(yt||bt)&&(s.ex=n-v)}return s}},{key:"drawLine",value:function(t,e,n,o,r,i,c){var s=this.draw,a=this.width,l=this.color;s.beginPath(),s.attr({lineWidth:a,strokeStyle:l}),s.setLineDash([]);var u=this.handleExternal(t,e,n,o,r,i,c),f=this.handleInternal(t,e,n,o,r,i,c);E.isEmptyObject(f)||s.line([f.sx,f.sy],[f.ex,f.ey]),E.isEmptyObject(u)||s.line([u.sx,u.sy],[u.ex,u.ey])}},{key:"setColor",value:function(t){this.color=t}},{key:"setWidth",value:function(t){this.width=t}}]),t}(),zi=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Mi(this,t),this.type=Ni.SOLID_LINE,this.solidLine=new Bi(e,E.mergeDeep({},n)),this.dottedLine=new Vi(e,E.mergeDeep({dash:[5]},n)),this.pointLine=new Vi(e,E.mergeDeep({dash:[2,2]},n)),this.doubleLine=new Yi(e,E.mergeDeep({},n))}return Di(t,[{key:"drawLine",value:function(t,e,n,o,r,i,c){var s=this.type,a=this.solidLine,l=this.dottedLine,u=this.pointLine,f=this.doubleLine;switch(s){case Ni.SOLID_LINE:a.drawLine(t,e,n,o);break;case Ni.DOTTED_LINE:l.drawLine(t,e,n,o);break;case Ni.POINT_LINE:u.drawLine(t,e,n,o);break;case Ni.DOUBLE_LINE:f.drawLine(t,e,n,o,r,i,c)}}},{key:"setType",value:function(t){this.type=t}},{key:"setWidth",value:function(t){t&&this.type===Ni.SOLID_LINE&&this.solidLine.setWidth(t)}},{key:"setColor",value:function(t){t&&(this.solidLine.setColor(t),this.dottedLine.setColor(t),this.pointLine.setColor(t),this.doubleLine.setColor(t))}}]),t}();function Ui(t){return(Ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fi(t){return(Fi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xi(t,e){return(Xi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ki=function(t){function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,r=Fi(e).call(this,"".concat(o,"-border-type-context-menu"),E.mergeDeep({onUpdate:function(){}},i)),(t=!r||"object"!==Ui(r)&&"function"!=typeof r?Gi(n):r).type=Ni.SOLID_LINE,t.color="#000000",t.borderIcon1=new lr,t.borderIcon2=new yr,t.borderIcon3=new wr,t.borderIcon4=new _r,t.borderIcon5=new Cr;var c=T("div","".concat(o,"-border-type-context-menu-type-icon-line"));c.children(t.borderIcon1),c.children(t.borderIcon2),c.children(t.borderIcon3),c.children(t.borderIcon4),c.children(t.borderIcon5),t.borderIcon6=new Wr,t.borderIcon7=new Nr,t.borderIcon8=new Ur,t.borderIcon9=new qr,t.borderIcon10=new ti;var s=T("div","".concat(o,"-border-type-context-menu-type-icon-line"));s.children(t.borderIcon6),s.children(t.borderIcon7),s.children(t.borderIcon8),s.children(t.borderIcon9),s.children(t.borderIcon10),t.borderIcons=new rr,t.borderIcons.removeClass("hover"),t.borderIcons.children(c),t.borderIcons.children(s),t.borderColor=new ci,t.borderType=new fi;var a=T("div","".concat(o,"-border-type-context-menu-type-icon-line"));return a.children(t.borderColor),a.children(t.borderType),t.borderColorAndType=new rr,t.borderColorAndType.removeClass("hover"),t.borderColorAndType.children(a),t.addItem(t.borderIcons),t.addItem(new Le),t.addItem(t.borderColorAndType),t.borderColorContextMenu=new Ei(E.copyProp({el:t.borderColor,position:ae.BOTTOM},{onUpdate:function(e){t.color=e,t.borderColor.setColor(e)}})),t.lineTypeContextMenu=new Ii(E.copyProp({el:t.borderType,position:ae.BOTTOM},{onUpdate:function(e){t.type=e}})),jt.bind(t.borderColor,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=Gi(t).borderColorContextMenu,o=n.elPopUp;ue.closeAll([o,t.elPopUp]),n.isOpen()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),jt.bind(t.borderType,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=Gi(t).lineTypeContextMenu,o=n.elPopUp;ue.closeAll([o,t.elPopUp]),n.isOpen()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),jt.bind(t.borderIcon1,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate("border1",t.color,t.type),e.stopPropagation(),e.preventDefault()})),jt.bind(t.borderIcon2,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate("border2",t.color,t.type),e.stopPropagation(),e.preventDefault()})),jt.bind(t.borderIcon3,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate("border3",t.color,t.type),e.stopPropagation(),e.preventDefault()})),jt.bind(t.borderIcon4,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate("border4",t.color,t.type),e.stopPropagation(),e.preventDefault()})),jt.bind(t.borderIcon5,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate("border5",t.color,t.type),e.stopPropagation(),e.preventDefault()})),jt.bind(t.borderIcon6,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate("border6",t.color,t.type),e.stopPropagation(),e.preventDefault()})),jt.bind(t.borderIcon7,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate("border7",t.color,t.type),e.stopPropagation(),e.preventDefault()})),jt.bind(t.borderIcon8,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate("border8",t.color,t.type),e.stopPropagation(),e.preventDefault()})),jt.bind(t.borderIcon9,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate("border9",t.color,t.type),e.stopPropagation(),e.preventDefault()})),jt.bind(t.borderIcon10,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate("border10",t.color,t.type),e.stopPropagation(),e.preventDefault()})),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xi(t,e)}(e,t),e}(de);function qi(t){return(qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zi(t){return(Zi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ji(t,e){return(Ji=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qi=function(t){function e(t){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(i=Zi(e).call(this,"".concat(o,"-tools-border")))||"object"!==qi(i)&&"function"!=typeof i?$i(r):i).options=E.copyProp({contextMenu:{}},t),n.icon=new Z("border"),n.setIcon(n.icon),n.borderTypeContextMenu=new Ki(E.copyProp({el:$i(n),position:ae.BOTTOM},n.options.contextMenu)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ji(t,e)}(e,t),e}(Pt);function tc(t){return(tc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ec(t,e){return!e||"object"!==tc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function nc(t){return(nc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function oc(t,e){return(oc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var rc=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=ec(this,nc(e).call(this,"".concat(o,"-tools-merge")))).icon=new Z("merge"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&oc(t,e)}(e,t),e}(et);function ic(t){return(ic="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cc(t,e){return!e||"object"!==ic(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function sc(t){return(sc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ac(t,e){return(ac=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var lc=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=cc(this,sc(e).call(this,"".concat(o,"-tools-horizontal1")))).icon=new Z("align-left"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ac(t,e)}(e,t),e}(et);function uc(t){return(uc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fc(t,e){return!e||"object"!==uc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hc(t){return(hc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pc(t,e){return(pc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yc=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=fc(this,hc(e).call(this,"".concat(o,"-tools-horizontal2")))).icon=new Z("align-center"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pc(t,e)}(e,t),e}(et);function bc(t){return(bc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dc(t,e){return!e||"object"!==bc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vc(t){return(vc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gc(t,e){return(gc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wc=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=dc(this,vc(e).call(this,"".concat(o,"-tools-horizontal3")))).icon=new Z("align-right"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gc(t,e)}(e,t),e}(et);function mc(t){return(mc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oc(t,e){return!e||"object"!==mc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ec(t){return(Ec=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Sc(t,e){return(Sc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Oc(this,Ec(e).call(this,"".concat(o,"-horizontal-type-context-menu-item")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sc(t,e)}(e,t),e}(Oe);function xc(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Tc=function(){function t(e){var n=e.rect,o=e.draw,r=e.offset,i=void 0===r?0:r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rect=n,this.draw=o,this.offset=i}var e,n,o;return e=t,(n=[{key:"open",value:function(){var t=this.rect,e=this.draw,n=this.offset,o=t.x,r=t.y,i=t.width,c=t.height;return e.save(),e.rect(o,r,i+n,c+n),e.clip(),this}},{key:"close",value:function(){return this.draw.restore(),this}}])&&xc(e.prototype,n),o&&xc(e,o),t}();function kc(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var c,s=t[Symbol.iterator]();!(o=(c=s.next()).done)&&(n.push(c.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Pc(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Cc(){return window.devicePixelRatio||1}function Ac(t){return.5+t<<0}function jc(t){return Ac(t*Cc())}function Rc(t){return-t*(Math.PI/180)}var Lc=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.el=e,this.ctx=e.getContext("2d"),this.width=e.width,this.height=e.height,this.offsetX=0,this.offsetY=0}var e,n,o;return e=t,(n=[{key:"rotate",value:function(t){return this.ctx.rotate(Rc(t)),this}},{key:"offset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.offsetX=t,this.offsetY=e}},{key:"resize",value:function(t,e){var n=this.el;return this.width=t,this.height=e,n.style.width="".concat(t,"px"),n.style.height="".concat(e,"px"),n.width=jc(t),n.height=jc(e),this}},{key:"clear",value:function(){var t=this.width,e=this.height;return this.clearRect(0,0,t,e),this}},{key:"attr",value:function(t){for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];("string"==typeof n||n instanceof String)&&(n=n.trim()),this.ctx[e]!==n&&(this.ctx[e]=n)}return this}},{key:"beginPath",value:function(){return this.ctx.beginPath(),this}},{key:"save",value:function(){return this.ctx.save(),this.beginPath(),this}},{key:"restore",value:function(){return this.ctx.restore(),this}},{key:"clip",value:function(){return this.ctx.clip(),this}},{key:"fill",value:function(){this.ctx.fill()}},{key:"setLineDash",value:function(t){this.ctx.setLineDash(t)}},{key:"measureText",value:function(t){return this.ctx.measureText(t)}},{key:"line",value:function(){var t=this.ctx;if(arguments.length>1){var e=arguments.length<=0?void 0:arguments[0],n=kc(e,2),o=n[0],r=n[1];this.moveTo(o,r);for(var i=1,c=arguments.length;i<c;i+=1){var s=i<0||arguments.length<=i?void 0:arguments[i],a=kc(s,2),l=a[0],u=a[1];this.lineTo(l,u)}t.stroke()}return this}},{key:"clearRect",value:function(t,e,n,o){var r=this.offsetX,i=this.offsetY;return this.ctx.clearRect(jc(t+r),jc(e+i),jc(n),jc(o)),this}},{key:"rect",value:function(t,e,n,o){var r=this.offsetX,i=this.offsetY;return this.ctx.rect(jc(t+r),jc(e+i),jc(n),jc(o)),this}},{key:"fillRect",value:function(t,e,n,o){var r=this.offsetX,i=this.offsetY;return this.ctx.fillRect(jc(t+r),jc(e+i),jc(n),jc(o)),this}},{key:"fillText",value:function(t,e,n){var o=this.offsetX,r=this.offsetY;return this.ctx.fillText(t,jc(e+o),jc(n+r)),this}},{key:"moveTo",value:function(t,e){var n=this.ctx,o=this.offsetX,r=this.offsetY,i=n.lineWidth%2==0,c=i?jc(t+o):jc(t+o)+.5,s=i?jc(e+r):jc(e+r)+.5;n.moveTo(c,s)}},{key:"lineTo",value:function(t,e){var n=this.ctx,o=this.offsetX,r=this.offsetY,i=n.lineWidth%2==0,c=i?jc(t+o):jc(t+o)+.5,s=i?jc(e+r):jc(e+r)+.5;n.lineTo(c,s)}}])&&Pc(e.prototype,n),o&&Pc(e,o),t}();function Wc(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Ic=function(){function t(e){var n=e.x,o=e.y,r=e.width,i=e.height;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=n,this.y=o,this.width=r,this.height=i}var e,n,o;return e=t,(n=[{key:"expandSize",value:function(t){return this.width+=t,this.height+=t,this}},{key:"clone",value:function(){return new t({x:this.x,y:this.y,width:this.width,height:this.height})}}])&&Wc(e.prototype,n),o&&Wc(e,o),t}();function Mc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hc(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Dc(t,e,n){return e&&Hc(t.prototype,e),n&&Hc(t,n),t}var Nc={TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right",MIDDLE_LEFT:"middle-left",MIDDLE_CENTER:"middle-center",MIDDLE_RIGHT:"middle-right",BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right"},Bc=function(){function t(e){var n=e.dw,o=e.angle,r=e.origin,i=void 0===r?Nc.MIDDLE_CENTER:r,c=e.rect,s=void 0===c?new Ic({x:0,y:0,width:0,height:0}):c;Mc(this,t),this.dw=n,this.origin=i,this.rect=s,this.angle=o}return Dc(t,[{key:"rotate",value:function(){var t=this.origin,e=this.dw,n=this.rect,o=this.angle,r=n.x,i=n.y,c=n.width,s=n.height;e.save();var a=0,l=0;switch(t){case Nc.TOP_LEFT:a=r,l=i;break;case Nc.TOP_CENTER:a=r+c/2,l=i;break;case Nc.TOP_RIGHT:a=r+c,l=i;break;case Nc.MIDDLE_LEFT:a=r,l=i+s/2;break;case Nc.MIDDLE_CENTER:a=r+c/2,l=i+s/2;break;case Nc.MIDDLE_RIGHT:a=r+c,l=i+s/2;break;case Nc.BOTTOM_LEFT:a=r,l=i+s;break;case Nc.BOTTOM_CENTER:a=r+c/2,l=i+s;break;case Nc.BOTTOM_RIGHT:a=r+c,l=i+s}return e.ctx.translate(jc(a+e.offsetX),jc(l+e.offsetY)),e.rotate(o),e.ctx.translate(-jc(a+e.offsetX),-jc(l+e.offsetY)),this}},{key:"revert",value:function(){return this.dw.restore(),this}},{key:"setOrigin",value:function(t){return this.origin=t,this}},{key:"setRect",value:function(t){return this.rect=t,this}}],[{key:"triangleHypotenuse",value:function(t,e){var n=Math.cos(Rc(t)),o=Math.sin(Rc(t));return{width:Math.abs(n*e),height:Math.abs(o*e)}}}]),t}(),Vc=function(){function t(e){var n=e.angle,o=e.width,r=e.height;Mc(this,t),this.angle=n,this.width=o,this.height=r}return Dc(t,[{key:"sinWidthAngle",value:function(){var t=this.angle,e=this.width,n=this.height,o=Math.abs(Math.sin(Rc(t))*e);return o<1&&(o=n),o}},{key:"cosWidthAngle",value:function(){var t=this.angle,e=this.width,n=this.height,o=Math.abs(Math.cos(Rc(t))*e);return o<1&&(o=n),o}},{key:"sinHeightAngle",value:function(){var t=this.angle,e=this.height,n=this.width,o=Math.abs(e/Math.sin(Rc(t)));return o<1&&(o=n),o}},{key:"setWidth",value:function(t){this.width=t}},{key:"setHeight",value:function(t){this.height=t}},{key:"setAngle",value:function(t){this.angle=t}}]),t}();function Yc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zc(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Uc(t,e,n){return e&&zc(t.prototype,e),n&&zc(t,n),t}var Fc={left:"left",center:"center",right:"right"},Gc={top:"top",center:"middle",bottom:"bottom"},Xc={OVER_FLOW:1,WORD_WRAP:2,TRUNCATE:3},Kc={HORIZONTAL:"horizontal",VERTICAL:"vertical",ANGLE:"angle"},qc=function(){function t(e){var n=e.text,o=e.rect,r=e.dw,i=e.overflow,c=e.attr;Yc(this,t),this.text=n,this.dw=r,this.rect=o,this.overflow=i,this.attr=c}return Uc(t,[{key:"textWidth",value:function(t){return this.dw.measureText(t).width}},{key:"drawLine",value:function(t,e,n,o){var r=this.dw,i=this.attr,c=i.size,s=i.verticalAlign,a=i.align,l=[0,0],u=[0,0];if("strike"===t){switch(a){case Fc.right:l[0]=e-o,u[0]=e;break;case Fc.center:l[0]=e-o/2,u[0]=e+o/2;break;case Fc.left:l[0]=e,u[0]=e+o}switch(s){case Gc.top:l[1]=n+c/2,u[1]=n+c/2;break;case Gc.center:l[1]=n,u[1]=n;break;case Gc.bottom:l[1]=n-c/2,u[1]=n-c/2}}if("underline"===t){switch(a){case Fc.right:l[0]=e-o,u[0]=e;break;case Fc.center:l[0]=e-o/2,u[0]=e+o/2;break;case Fc.left:l[0]=e,u[0]=e+o}switch(s){case Gc.top:l[1]=n+c,u[1]=n+c;break;case Gc.center:l[1]=n+c/2,u[1]=n+c/2;break;case Gc.bottom:l[1]=n,u[1]=n}}r.line(l,u)}},{key:"drawTextTruncate",value:function(){var t=this.text,e=this.dw,n=this.attr,o=this.rect,r=n.underline,i=n.strikethrough,c=n.align,s=n.verticalAlign,a=o.width,l=o.height,u=this.textWidth(t)/Cc(),f=o.x,h=o.y;switch(c){case Fc.left:f+=8;break;case Fc.center:f+=a/2;break;case Fc.right:f+=a-8}switch(s){case Gc.top:h+=8;break;case Gc.center:h+=l/2;break;case Gc.bottom:h+=l-8}var p=new Tc({draw:e,rect:o});p.open(),e.fillText(t,f,h),(r||i)&&e.beginPath(),r&&this.drawLine("underline",f,h,u),i&&this.drawLine("strike",f,h,u),p.close()}},{key:"drawTextOverFlow",value:function(){var t=this.text,e=this.dw,n=this.attr,o=this.rect,r=this.overflow,i=n.size,c=n.underline,s=n.strikethrough,a=n.align,l=n.verticalAlign,u=o.width,f=o.height,h=this.textWidth(t)/Cc(),p=o.x,y=o.y,b=0,d=0;switch(a){case Fc.left:p+=8,b=8;break;case Fc.center:p+=u/2;break;case Fc.right:p+=u-8,b=8}switch(l){case Gc.top:y+=8,d=8;break;case Gc.center:y+=f/2;break;case Gc.bottom:y+=f-8,d=8}if(r&&(h+b>r.width||i+d>r.height)){var v=new Tc({draw:e,rect:r});v.open(),e.fillText(t,p,y),(c||s)&&e.beginPath(),c&&this.drawLine("underline",p,y,h),s&&this.drawLine("strike",p,y,h),v.close()}else e.fillText(t,p,y),(c||s)&&e.beginPath(),c&&this.drawLine("underline",p,y,h),s&&this.drawLine("strike",p,y,h)}},{key:"drawTextWarp",value:function(){for(var t=this.text,e=this.dw,n=this.attr,o=this.rect,r=n.size,i=n.underline,c=n.strikethrough,s=n.align,a=n.verticalAlign,l=o.width,u=o.height,f=l-16,h=[],p={len:0,start:0},y=t.length,b=0,d=0;d<y;){var v=this.textWidth(t.charAt(d))/Cc(),g=p.len+v;g>f?(0===p.len?(h.push({text:t.substring(d,d+1),len:g,tx:0,ty:b}),d+=1):h.push({text:t.substring(p.start,d),len:p.len,tx:0,ty:b}),b+=r+4,p.len=0,p.start=d):(p.len=g,d+=1)}p.len>0&&h.push({text:t.substring(p.start),len:p.len,tx:0,ty:b});var w=o.x,m=o.y;switch(s){case Fc.left:w+=8;break;case Fc.center:w+=l/2;break;case Fc.right:w+=l-8}switch(a){case Gc.top:m+=8;break;case Gc.center:m+=u/2-b/2;break;case Gc.bottom:m+=u-b-8}var O=new Tc({draw:e,rect:o});O.open();for(var E=0,S=h.length;E<S;E+=1){var _=h[E];_.tx+=w,_.ty+=m,e.fillText(_.text,_.tx,_.ty),(i||c)&&e.beginPath(),i&&this.drawLine("underline",_.tx,_.ty,_.len),c&&this.drawLine("strike",_.tx,_.ty,_.len)}return O.close(),b}},{key:"draw",value:function(){var t=this.dw,e=this.attr,n=e.textWrap;switch(t.attr({textAlign:e.align,textBaseline:e.verticalAlign,font:"".concat(e.italic?"italic":""," ").concat(e.bold?"bold":""," ").concat(jc(e.size),"px ").concat(e.name),fillStyle:e.color,strokeStyle:e.color}),n){case Xc.TRUNCATE:return this.drawTextTruncate();case Xc.WORD_WRAP:return this.drawTextWarp();case Xc.OVER_FLOW:default:return this.drawTextOverFlow()}}},{key:"setTextWrap",value:function(t){this.attr.textWrap=t}}]),t}(),Zc=function(){function t(e){var n=e.text,o=e.rect,r=e.dw,i=e.overflow,c=e.attr;Yc(this,t),this.text=n,this.dw=r,this.rect=o,this.overflow=i,this.attr=c}return Uc(t,[{key:"textWidth",value:function(t){return this.dw.measureText(t).width}},{key:"drawLine",value:function(t,e,n,o,r,i){var c=this.dw,s=this.attr.size,a=[0,0],l=[0,0];if("strike"===t){switch(r){case Fc.right:a[0]=e-o,l[0]=e;break;case Fc.center:a[0]=e-o/2,l[0]=e+o/2;break;case Fc.left:a[0]=e,l[0]=e+o}switch(i){case Gc.top:a[1]=n+s/2,l[1]=n+s/2;break;case Gc.center:a[1]=n,l[1]=n;break;case Gc.bottom:a[1]=n-s/2,l[1]=n-s/2}}if("underline"===t){switch(r){case Fc.right:a[0]=e-o,l[0]=e;break;case Fc.center:a[0]=e-o/2,l[0]=e+o/2;break;case Fc.left:a[0]=e,l[0]=e+o}switch(i){case Gc.top:a[1]=n+s,l[1]=n+s;break;case Gc.center:a[1]=n+s/2,l[1]=n+s/2;break;case Gc.bottom:a[1]=n,l[1]=n}}c.line(a,l)}},{key:"drawTextTruncate",value:function(){for(var t=this.text,e=this.dw,n=this.attr,o=this.rect,r=n.underline,i=n.strikethrough,c=n.align,s=n.verticalAlign,a=n.size,l=o.width,u=o.height,f=[],h=0,p=0;p<t.length;p+=1){var y=t.charAt(p);f.push({len:this.textWidth(y)/Cc(),text:y,tx:0,ty:h}),p<t.length-1?h+=a+2:h+=a}var b=o.x,d=o.y;switch(c){case Fc.left:b+=8;break;case Fc.center:b+=l/2;break;case Fc.right:b+=l-8}switch(s){case Gc.top:d+=8;break;case Gc.center:d+=u/2-h/2+8;break;case Gc.bottom:d+=u-h+8}var v=new Tc({draw:e,rect:o});v.open();for(var g=0,w=f.length;g<w;g+=1){var m=f[g];m.tx+=b,m.ty+=d,e.fillText(m.text,m.tx,m.ty),(r||i)&&e.beginPath(),r&&this.drawLine("underline",m.tx,m.ty,m.len,c,s),i&&this.drawLine("strike",m.tx,m.ty,m.len,c,s)}v.close()}},{key:"drawTextOverFlow",value:function(){for(var t=this.text,e=this.dw,n=this.attr,o=this.rect,r=this.overflow,i=n.underline,c=n.strikethrough,s=n.align,a=n.verticalAlign,l=n.size,u=o.width,f=o.height,h=[],p=0,y=0;y<t.length;y+=1){var b=t.charAt(y);h.push({len:this.textWidth(b)/Cc(),text:b,tx:0,ty:p}),y<t.length-1?p+=l+2:p+=l}var d=o.x,v=o.y,g=0,w=0;switch(s){case Fc.left:d+=8,g=8;break;case Fc.center:d+=u/2;break;case Fc.right:d+=u-8,g=8}switch(a){case Gc.top:v+=8,w=8;break;case Gc.center:v+=f/2-p/2+8;break;case Gc.bottom:v+=f-p+8,w=8}if(r&&(p+w>r.height||l+g>r.width)){var m=new Tc({draw:e,rect:r});m.open();for(var O=0,E=h.length;O<E;O+=1){var S=h[O];S.tx+=d,S.ty+=v,e.fillText(S.text,S.tx,S.ty),(i||c)&&e.beginPath(),i&&this.drawLine("underline",S.tx,S.ty,S.len,s,a),c&&this.drawLine("strike",S.tx,S.ty,S.len,s,a)}m.close()}else for(var _=0,x=h.length;_<x;_+=1){var T=h[_];T.tx+=d,T.ty+=v,e.fillText(T.text,T.tx,T.ty),(i||c)&&e.beginPath(),i&&this.drawLine("underline",T.tx,T.ty,T.len,s,a),c&&this.drawLine("strike",T.tx,T.ty,T.len,s,a)}}},{key:"drawTextWarp",value:function(){for(var t=this.text,e=this.dw,n=this.attr,o=this.rect,r=n.underline,i=n.strikethrough,c=n.align,s=n.verticalAlign,a=n.size,l=o.width,u=o.height,f=[],h=t.length,p=u-16,y=[],b=0,d=0,v=0,g=0,w=0;w<h;){var m=w===h-1,O=0===w,E=t.charAt(w),S=this.textWidth(E)/Cc(),_=void 0;(_=m?b+a:b+a+2)>p?(y.length>0&&f.push(y),b=0,O||(v+=a+0),g+=1,(y=[]).push({len:S,text:E,tx:v,ty:d=0}),b=m?a:a+2):(y.push({len:S,text:E,tx:v,ty:d}),b=_),d+=m?a:a+2,w+=1}y.length>0&&f.push(y);var x=o.x,T=o.y,k=s;switch(c){case Fc.left:x+=8;break;case Fc.center:x+=l/2-v/2;break;case Fc.right:x+=l-v-8}switch(s){case Gc.top:e.attr({textBaseline:n.verticalAlign}),T+=8,k=Gc.top;break;case Gc.center:0===g?(e.attr({textBaseline:n.verticalAlign}),T+=u/2-d/2+8,k=Gc.center):(e.attr({textBaseline:Gc.top}),T+=8,k=Gc.top);break;case Gc.bottom:0===g?(e.attr({textBaseline:Gc.bottom}),T+=u-d+8,k=Gc.bottom):(e.attr({textBaseline:Gc.top}),T+=8,k=Gc.top)}var P=new Tc({draw:e,rect:o});P.open();for(var C=0,A=f.length;C<A;C+=1)for(var j=f[C],R=0;R<j.length;R+=1){var L=j[R];L.tx+=x,L.ty+=T,e.fillText(L.text,L.tx,L.ty),(r||i)&&e.beginPath(),r&&this.drawLine("underline",L.tx,L.ty,L.len,c,k),i&&this.drawLine("strike",L.tx,L.ty,L.len,c,k)}P.close()}},{key:"draw",value:function(){var t=this.dw,e=this.attr;switch(e.textWrap){case Xc.TRUNCATE:return t.attr({textAlign:e.align,textBaseline:e.verticalAlign,font:"".concat(e.italic?"italic":""," ").concat(e.bold?"bold":""," ").concat(jc(e.size),"px ").concat(e.name),fillStyle:e.color,strokeStyle:e.color}),this.drawTextTruncate();case Xc.WORD_WRAP:return t.attr({textAlign:e.align,font:"".concat(e.italic?"italic":""," ").concat(e.bold?"bold":""," ").concat(jc(e.size),"px ").concat(e.name),fillStyle:e.color,strokeStyle:e.color}),this.drawTextWarp();case Xc.OVER_FLOW:default:return t.attr({textAlign:e.align,textBaseline:e.verticalAlign,font:"".concat(e.italic?"italic":""," ").concat(e.bold?"bold":""," ").concat(jc(e.size),"px ").concat(e.name),fillStyle:e.color,strokeStyle:e.color}),this.drawTextOverFlow()}}},{key:"setTextWrap",value:function(t){this.attr.textWrap=t}}]),t}(),$c=function(){function t(e){var n=e.text,o=e.rect,r=e.dw,i=e.overflow,c=e.attr;Yc(this,t),this.text=n,this.dw=r,this.rect=o,this.overflow=i,this.attr=c}return Uc(t,[{key:"textWidth",value:function(t){return this.dw.measureText(t).width}},{key:"drawLine",value:function(t,e,n,o){var r=this.dw,i=this.attr.size,c=[0,0],s=[0,0];"strike"===t&&(c[0]=e,s[0]=e+o,c[1]=n+i/2,s[1]=n+i/2),"underline"===t&&(c[0]=e,s[0]=e+o,c[1]=n+i,s[1]=n+i),r.line(c,s)}},{key:"drawTextTruncate",value:function(){var t=this.text,e=this.dw,n=this.attr,o=this.rect,r=n.underline,i=n.strikethrough,c=n.align,s=n.verticalAlign,a=n.angle,l=n.size,u=o.width,f=o.height,h=this.textWidth(t)/Cc(),p=new Vc({angle:a,width:h,height:l}),y=p.cosWidthAngle(),b=p.sinWidthAngle(),d=o.x,v=o.y;switch(c){case Fc.left:d+=8;break;case Fc.center:d+=u/2-y/2;break;case Fc.right:d+=u-y-8}switch(s){case Gc.top:v+=8;break;case Gc.center:v+=f/2-b/2;break;case Gc.bottom:v+=f-b-8}var g=d+(y/2-h/2),w=v+(b/2-l/2),m=new Bc({dw:e,angle:a,rect:new Ic({x:d,y:v,width:y,height:b})}),O=new Tc({draw:e,rect:o});O.open(),m.rotate(),e.fillText(t,g,w),(r||i)&&e.beginPath(),r&&this.drawLine("underline",g,w,h),i&&this.drawLine("strike",g,w,h),m.revert(),O.close()}},{key:"drawTextOverFlow",value:function(){var t=this.text,e=this.dw,n=this.attr,o=this.rect,r=this.overflow,i=n.underline,c=n.strikethrough,s=n.align,a=n.verticalAlign,l=n.angle,u=n.size,f=o.width,h=o.height,p=this.textWidth(t)/Cc(),y=new Vc({angle:l,width:p,height:u}),b=y.cosWidthAngle(),d=y.sinWidthAngle(),v=o.x,g=o.y;switch(s){case Fc.left:v+=8;break;case Fc.center:v+=f/2-b/2;break;case Fc.right:v+=f-b-8}switch(a){case Gc.top:g+=8;break;case Gc.center:g+=h/2-d/2;break;case Gc.bottom:g+=h-d-8}var w=v+(b/2-p/2),m=g+(d/2-u/2),O=new Tc({draw:e,rect:r}),E=new Bc({dw:e,angle:l,rect:new Ic({x:v,y:g,width:b,height:d})});if(r&&(b>r.width||d>r.height))O.open(),E.rotate(),e.fillText(t,w,m),(i||c)&&e.beginPath(),i&&this.drawLine("underline",w,m,p),c&&this.drawLine("strike",w,m,p),E.revert(),O.close();else{var S=new Bc({dw:e,angle:l,rect:new Ic({x:v,y:g,width:b,height:d})});S.rotate(),e.fillText(t,w,m),(i||c)&&e.beginPath(),i&&this.drawLine("underline",w,m,p),c&&this.drawLine("strike",w,m,p),S.revert()}}},{key:"drawTextWarp",value:function(){var t=this.text,e=this.dw,n=this.attr,o=this.rect,r=n.underline,i=n.strikethrough,c=n.align,s=n.verticalAlign,a=n.angle,l=n.size,u=o.width,f=o.height;if(0===a){for(var h=u-16,p=[],y={len:0,start:0},b=t.length,d=0;d<b;){var v=this.textWidth(t.charAt(d))/Cc(),g=y.len+v;g>h?(0===y.len?(p.push({text:t.substring(d,d+1),len:g,tx:0,ty:0}),d+=1):p.push({text:t.substring(y.start,d),len:y.len,tx:0,ty:0}),y.len=0,y.start=d):(y.len=g,d+=1)}y.len>0&&p.push({text:t.substring(y.start),len:y.len,tx:0,ty:0});for(var w=p.length,m=0,O=0;O<w;O+=1){p[O].ty=m,m+=l+4}var E=w*(l+4),S=new Tc({draw:e,rect:o});S.open();for(var _=0;_<w;_+=1){var x=p[_],T=o.x,k=o.y;switch(c){case Fc.left:T+=8;break;case Fc.center:T+=u/2-x.len/2;break;case Fc.right:T+=u-x.len-8}switch(s){case Gc.top:k+=x.ty+8;break;case Gc.center:k+=x.ty+(f/2-E/2);break;case Gc.bottom:k+=x.ty+(f-E-8)}e.fillText(x.text,T,k),(r||i)&&e.beginPath(),r&&this.drawLine("underline",T,k,x.len),i&&this.drawLine("strike",T,k,x.len)}S.close()}else if(a>0){var P=new Vc({angle:a});P.setWidth(u),P.setHeight(f-16);var C=P.sinHeightAngle();P.setWidth(l+4),P.setHeight(l+4);var A=P.sinHeightAngle();P.setWidth(C),P.setHeight(l);for(var j=P.cosWidthAngle(),R=P.sinWidthAngle(),L=[],W={len:0,start:0},I=t.length,M=0;M<I;){var H=this.textWidth(t.charAt(M))/Cc(),D=W.len+H;D>C?(0===W.len?(L.push({text:t.substring(M,M+1),len:D,tx:0,ty:0}),M+=1):L.push({text:t.substring(W.start,M),len:W.len,tx:0,ty:0}),W.len=0,W.start=M):(W.len=D,M+=1)}W.len>0&&L.push({text:t.substring(W.start),len:W.len,tx:0,ty:0});for(var N=L.length,B=0,V=0;V<N;V+=1){L[V].tx=B,B+=A}var Y=new Tc({draw:e,rect:o});if(Y.open(),N>1){var z=j+(L.length-1)*A,U=o.x,F=o.y;switch(c){case Fc.left:U+=8;break;case Fc.center:U+=u/2-z/2;break;case Fc.right:U+=u-z-8}switch(s){case Gc.top:F+=8;break;case Gc.center:F+=f/2-R/2;break;case Gc.bottom:F+=f-R-8}for(var G=0;G<L.length;G+=1){var X=L[G],K=X.tx+U,q=X.ty+F,Z=0,$=0;switch(c){case Fc.left:P.setWidth(X.len/2),P.setHeight(l),Z+=K+P.cosWidthAngle(),$+=q+R-P.sinWidthAngle();break;case Fc.center:Z=K+j/2,$=q+R/2;break;case Fc.right:P.setWidth(X.len/2),P.setHeight(l),Z+=K+j-P.cosWidthAngle(),$+=q+P.sinWidthAngle()}var J=Z-X.len/2,Q=$-l/2;-1===G&&(e.attr({fillStyle:"#000000"}),e.fillRect(K,q,j,R),e.attr({fillStyle:"red"}));var tt=new Bc({dw:e,angle:a,rect:new Ic({x:J,y:Q,width:X.len,height:l})});tt.rotate(),e.fillText(X.text,J,Q),(r||i)&&e.beginPath(),r&&this.drawLine("underline",J,Q,X.len),i&&this.drawLine("strike",J,Q,X.len),tt.revert()}}else{var et=this.textWidth(t)/Cc();P.setWidth(et),P.setHeight(l);var nt=P.cosWidthAngle(),ot=P.sinWidthAngle(),rt=o.x,it=o.y;switch(c){case Fc.left:rt+=8;break;case Fc.center:rt+=u/2-nt/2;break;case Fc.right:rt+=u-nt-8}switch(s){case Gc.top:it+=8;break;case Gc.center:it+=f/2-ot/2;break;case Gc.bottom:it+=f-ot-8}var ct=rt+(nt/2-et/2),st=it+(ot/2-l/2),at=new Bc({dw:e,angle:a,rect:new Ic({x:rt,y:it,width:nt,height:ot})});at.rotate(),e.fillText(t,ct,st),(r||i)&&e.beginPath(),r&&this.drawLine("underline",ct,st,et),i&&this.drawLine("strike",ct,st,et),at.revert()}Y.close()}else if(a<0){var lt=new Vc({angle:a});lt.setWidth(u),lt.setHeight(f-16);var ut=lt.sinHeightAngle();lt.setWidth(l+4),lt.setHeight(l+4);var ft=lt.sinHeightAngle();lt.setWidth(ut),lt.setHeight(l);for(var ht=lt.cosWidthAngle(),pt=lt.sinWidthAngle(),yt=[],bt={len:0,start:0},dt=t.length,vt=0;vt<dt;){var gt=this.textWidth(t.charAt(vt))/Cc(),wt=bt.len+gt;wt>ut?(0===bt.len?(yt.push({text:t.substring(vt,vt+1),len:wt,tx:0,ty:0}),vt+=1):yt.push({text:t.substring(bt.start,vt),len:bt.len,tx:0,ty:0}),bt.len=0,bt.start=vt):(bt.len=wt,vt+=1)}bt.len>0&&yt.push({text:t.substring(bt.start),len:bt.len,tx:0,ty:0});for(var mt=yt.length,Ot=0,Et=mt-1;Et>=0;Et-=1){yt[Et].tx=Ot,Ot+=ft}var St=new Tc({draw:e,rect:o});if(St.open(),mt>1){var _t=ht+(yt.length-1)*ft,xt=o.x,Tt=o.y;switch(c){case Fc.left:xt+=8;break;case Fc.center:xt+=u/2-_t/2;break;case Fc.right:xt+=u-_t-8}switch(s){case Gc.top:Tt+=8;break;case Gc.center:Tt+=f/2-pt/2;break;case Gc.bottom:Tt+=f-pt-8}for(var kt=0;kt<yt.length;kt+=1){var Pt=yt[kt],Ct=Pt.tx+xt,At=Pt.ty+Tt,jt=0,Rt=0;switch(c){case Fc.left:lt.setWidth(Pt.len/2),lt.setHeight(l),jt+=Ct+lt.cosWidthAngle(),Rt+=At+lt.sinWidthAngle();break;case Fc.center:jt=Ct+ht/2,Rt=At+pt/2;break;case Fc.right:lt.setWidth(Pt.len/2),lt.setHeight(l),jt+=Ct+ht-lt.cosWidthAngle(),Rt+=At+pt-lt.sinWidthAngle()}var Lt=jt-Pt.len/2,Wt=Rt-l/2;-1===kt&&(e.attr({fillStyle:"#000000"}),e.fillRect(Ct,At,ht,pt),e.attr({fillStyle:"red"}));var It=new Bc({dw:e,angle:a,rect:new Ic({x:Lt,y:Wt,width:Pt.len,height:l})});It.rotate(),e.fillText(Pt.text,Lt,Wt),(r||i)&&e.beginPath(),r&&this.drawLine("underline",Lt,Wt,Pt.len),i&&this.drawLine("strike",Lt,Wt,Pt.len),It.revert()}}else{var Mt=this.textWidth(t)/Cc();lt.setWidth(Mt),lt.setHeight(l);var Ht=lt.cosWidthAngle(),Dt=lt.sinWidthAngle(),Nt=o.x,Bt=o.y;switch(c){case Fc.left:Nt+=8;break;case Fc.center:Nt+=u/2-Ht/2;break;case Fc.right:Nt+=u-Ht-8}switch(s){case Gc.top:Bt+=8;break;case Gc.center:Bt+=f/2-Dt/2;break;case Gc.bottom:Bt+=f-Dt-8}var Vt=Nt+(Ht/2-Mt/2),Yt=Bt+(Dt/2-l/2),zt=new Bc({dw:e,angle:a,rect:new Ic({x:Nt,y:Bt,width:Ht,height:Dt})});zt.rotate(),e.fillText(t,Vt,Yt),(r||i)&&e.beginPath(),r&&this.drawLine("underline",Vt,Yt,Mt),i&&this.drawLine("strike",Vt,Yt,Mt),zt.revert()}St.close()}}},{key:"draw",value:function(){var t=this.dw,e=this.attr,n=e.textWrap;switch(t.attr({textAlign:Fc.left,textBaseline:Gc.top,font:"".concat(e.italic?"italic":""," ").concat(e.bold?"bold":""," ").concat(jc(e.size),"px ").concat(e.name),fillStyle:e.color,strokeStyle:e.color}),n){case Xc.TRUNCATE:return this.drawTextTruncate();case Xc.WORD_WRAP:return this.drawTextWarp();case Xc.OVER_FLOW:default:return this.drawTextOverFlow()}}}]),t}(),Jc=function(){function t(e){var n=e.text,o=e.rect,r=e.dw,i=e.overflow,c=e.attr;Yc(this,t),this.attr=E.mergeDeep({},{name:"Arial",size:jc(13),color:"#000000",bold:!1,italic:!1,textWrap:!1,underline:!1,strikethrough:!1,align:Fc.left,verticalAlign:Gc.center,direction:Kc.HORIZONTAL,angle:0},c),this.verticalFontDraw=new Zc({text:n,rect:o,dw:r,overflow:i,attr:this.attr}),this.horizontalFontDraw=new qc({text:n,rect:o,dw:r,overflow:i,attr:this.attr}),this.angleFontDraw=new $c({text:n,rect:o,dw:r,overflow:i,attr:this.attr})}return Uc(t,[{key:"draw",value:function(){switch(this.attr.direction){case Kc.VERTICAL:this.verticalFontDraw.draw();break;case Kc.HORIZONTAL:this.horizontalFontDraw.draw();break;case Kc.ANGLE:this.angleFontDraw.draw()}}},{key:"setTextWrap",value:function(t){switch(this.attr.direction){case Kc.VERTICAL:this.verticalFontDraw.setTextWrap(t);break;case Kc.HORIZONTAL:default:this.horizontalFontDraw.setTextWrap(t)}}}]),t}();function Qc(t){return(Qc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ts(t,e){return!e||"object"!==Qc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function es(t){return(es=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ns(t,e){return(ns=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var os=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=ts(this,es(e).call(this,"".concat(o,"-horizontal-type-context-menu"),E.mergeDeep({onUpdate:function(){}},n)))).horizontalIcon1=new lc,t.horizontalIcon2=new yc,t.horizontalIcon3=new wc;var r=T("div","".concat(o,"-horizontal-type-context-menu-type-icon-line"));return r.children(t.horizontalIcon1),r.children(t.horizontalIcon2),r.children(t.horizontalIcon3),t.horizontalIcons=new _c,t.horizontalIcons.removeClass("hover"),t.horizontalIcons.children(r),t.addItem(t.horizontalIcons),jt.bind(t.horizontalIcon1,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate(Fc.left),e.stopPropagation(),e.preventDefault()})),jt.bind(t.horizontalIcon2,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate(Fc.center),e.stopPropagation(),e.preventDefault()})),jt.bind(t.horizontalIcon3,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate(Fc.right),e.stopPropagation(),e.preventDefault()})),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ns(t,e)}(e,t),e}(de);function rs(t){return(rs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function is(t){return(is=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cs(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ss(t,e){return(ss=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var as=function(t){function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(r=is(e).call(this,"".concat(o,"-tools-horizontal-align")))||"object"!==rs(r)&&"function"!=typeof r?cs(n):r).options=E.mergeDeep({contextMenu:{}},i),t.icon=new Z("align-left"),t.setIcon(t.icon),t.horizontalContextMenu=new os(E.copyProp({el:cs(t),position:ae.BOTTOM},t.options.contextMenu)),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ss(t,e)}(e,t),e}(Pt);function ls(t){return(ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function us(t,e){return!e||"object"!==ls(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fs(t){return(fs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hs(t,e){return(hs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ps=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),us(this,fs(e).call(this,"".concat(o,"-vertical-type-context-menu-item")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hs(t,e)}(e,t),e}(Oe);function ys(t){return(ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bs(t,e){return!e||"object"!==ys(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ds(t){return(ds=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vs(t,e){return(vs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var gs=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=bs(this,ds(e).call(this,"".concat(o,"-tools-verticalIcon1")))).icon=new Z("align-top"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vs(t,e)}(e,t),e}(et);function ws(t){return(ws="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ms(t,e){return!e||"object"!==ws(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Os(t){return(Os=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Es(t,e){return(Es=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ss=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=ms(this,Os(e).call(this,"".concat(o,"-tools-verticalIcon2")))).icon=new Z("align-middle"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Es(t,e)}(e,t),e}(et);function _s(t){return(_s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xs(t,e){return!e||"object"!==_s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ts(t){return(Ts=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ks(t,e){return(ks=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ps=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=xs(this,Ts(e).call(this,"".concat(o,"-tools-verticalIcon3")))).icon=new Z("align-bottom"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ks(t,e)}(e,t),e}(et);function Cs(t){return(Cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function As(t,e){return!e||"object"!==Cs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function js(t){return(js=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rs(t,e){return(Rs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ls=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=As(this,js(e).call(this,"".concat(o,"-vertical-type-context-menu"),E.mergeDeep({onUpdate:function(){}},n)))).verticalIcon1=new gs,t.verticalIcon2=new Ss,t.verticalIcon3=new Ps;var r=T("div","".concat(o,"-vertical-type-context-menu-type-icon-line"));return r.children(t.verticalIcon1),r.children(t.verticalIcon2),r.children(t.verticalIcon3),t.verticalIcons=new ps,t.verticalIcons.removeClass("hover"),t.verticalIcons.children(r),t.addItem(t.verticalIcons),jt.bind(t.verticalIcon1,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate(Gc.top),e.stopPropagation(),e.preventDefault()})),jt.bind(t.verticalIcon2,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate(Gc.center),e.stopPropagation(),e.preventDefault()})),jt.bind(t.verticalIcon3,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate(Gc.bottom),e.stopPropagation(),e.preventDefault()})),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rs(t,e)}(e,t),e}(de);function Ws(t){return(Ws="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Is(t){return(Is=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ms(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hs(t,e){return(Hs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ds=function(t){function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(r=Is(e).call(this,"".concat(o,"-tools-vertical-align")))||"object"!==Ws(r)&&"function"!=typeof r?Ms(n):r).options=E.mergeDeep({contextMenu:{}},i),t.icon=new Z("align-middle"),t.setIcon(t.icon),t.verticalContextMenu=new Ls(E.copyProp({el:Ms(t),position:ae.BOTTOM},t.options.contextMenu)),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hs(t,e)}(e,t),e}(Pt);function Ns(t){return(Ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bs(t,e){return!e||"object"!==Ns(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vs(t){return(Vs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ys(t,e){return(Ys=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var zs=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Bs(this,Vs(e).call(this,"".concat(o,"-tools-text-wrapping1")))).icon=new Z("truncate"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ys(t,e)}(e,t),e}(et);function Us(t){return(Us="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fs(t,e){return!e||"object"!==Us(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gs(t){return(Gs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xs(t,e){return(Xs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ks=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Fs(this,Gs(e).call(this,"".concat(o,"-tools-text-wrapping2")))).icon=new Z("overflow"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xs(t,e)}(e,t),e}(et);function qs(t){return(qs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zs(t,e){return!e||"object"!==qs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $s(t){return($s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Js(t,e){return(Js=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qs=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Zs(this,$s(e).call(this,"".concat(o,"-tools-text-wrapping3")))).icon=new Z("wrap"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Js(t,e)}(e,t),e}(et);function ta(t){return(ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ea(t,e){return!e||"object"!==ta(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function na(t){return(na=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function oa(t,e){return(oa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ra=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ea(this,na(e).call(this,"".concat(o,"-text-wrapping-context-menu-item")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&oa(t,e)}(e,t),e}(Oe);function ia(t){return(ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ca(t,e){return!e||"object"!==ia(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function sa(t){return(sa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function aa(t,e){return(aa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var la=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=ca(this,sa(e).call(this,"".concat(o,"-text-wrapping-context-menu"),E.mergeDeep({onUpdate:function(){}},n)))).textWrappingIcon1=new zs,t.textWrappingIcon2=new Ks,t.textWrappingIcon3=new Qs;var r=T("div","".concat(o,"-text-wrapping-context-menu-type-icon-line"));return r.children(t.textWrappingIcon1),r.children(t.textWrappingIcon2),r.children(t.textWrappingIcon3),t.textWrappingIcons=new ra,t.textWrappingIcons.removeClass("hover"),t.textWrappingIcons.children(r),t.addItem(t.textWrappingIcons),jt.bind(t.textWrappingIcon1,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate(Xc.TRUNCATE),e.stopPropagation(),e.preventDefault()})),jt.bind(t.textWrappingIcon2,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate(Xc.OVER_FLOW),e.stopPropagation(),e.preventDefault()})),jt.bind(t.textWrappingIcon3,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){t.options.onUpdate(Xc.WORD_WRAP),e.stopPropagation(),e.preventDefault()})),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&aa(t,e)}(e,t),e}(de);function ua(t){return(ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fa(t){return(fa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ha(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pa(t,e){return(pa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ya=function(t){function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(r=fa(e).call(this,"".concat(o,"-tools-text-wrapping")))||"object"!==ua(r)&&"function"!=typeof r?ha(n):r).options=E.mergeDeep({contextMenu:{}},i),t.icon=new Z("text-wrap"),t.setIcon(t.icon),t.textWrappingContextMenu=new la(E.copyProp({el:ha(t),position:ae.BOTTOM},t.options.contextMenu)),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pa(t,e)}(e,t),e}(Pt);function ba(t){return(ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function da(t,e){return!e||"object"!==ba(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function va(t){return(va=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ga(t,e){return(ga=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wa=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=da(this,va(e).call(this,"".concat(o,"-tools-fixed")))).icon=new Z("freeze"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ga(t,e)}(e,t),e}(et);function ma(t){return(ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oa(t,e){return!e||"object"!==ma(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ea(t){return(Ea=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Sa(t,e){return(Sa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _a=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Oa(this,Ea(e).call(this,"".concat(o,"-tools-filter")))).icon=new Z("filter"),t.children(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sa(t,e)}(e,t),e}(et);function xa(t){return(xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ta(t,e){return!e||"object"!==xa(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ka(t){return(ka=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pa(t,e){return(Pa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ca=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Ta(this,ka(e).call(this,"".concat(o,"-tools-format")))).icon=new Z("functions"),t.setIcon(t.icon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pa(t,e)}(e,t),e}(Pt);function Aa(t){return(Aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ja(t,e){return!e||"object"!==Aa(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ra(t){return(Ra=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function La(t,e){return(La=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Wa='\n  <svg class="'.concat(o,'-copy-style-svg" xmlns="http://www.w3.org/2000/svg" width="100%" height="100%">\n    <line class="').concat(o,'-copy-style-stroked-top" x1="0" y1="0" x2="100%" y2="0"/>\n    <line class="').concat(o,'-copy-style-stroked-left" x1="0" y1="0" x2="0" y2="100%"/>\n    <line class="').concat(o,'-copy-style-stroked-bottom" x1="0" y1="100%" x2="100%" y2="100%"/>\n    <line class="').concat(o,'-copy-style-stroked-right" x1="100%" y1="0" x2="100%" y2="100%"/>\n  </svg>\n'),Ia=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ja(this,Ra(e).call(this,"".concat(o,"-copy-style")))).options=E.mergeDeep({},t),n.mask=T("div","".concat(o,"-copy-style-mask")),n.html(Wa),n.children(n.mask),n.top=n.find(".".concat(o,"-copy-style-stroked-top")),n.left=n.find(".".concat(o,"-copy-style-stroked-left")),n.bottom=n.find(".".concat(o,"-copy-style-stroked-bottom")),n.right=n.find(".".concat(o,"-copy-style-stroked-right")),n.hide(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&La(t,e)}(e,t),e}(R);function Ma(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Ha=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.screen=e,this.lt=null,this.t=null,this.l=null,this.br=null}var e,n,o;return e=t,(n=[{key:"getLT",value:function(){return this.lt}},{key:"getT",value:function(){return this.t}},{key:"getL",value:function(){return this.l}},{key:"getBR",value:function(){return this.br}}])&&Ma(e.prototype,n),o&&Ma(e,o),t}();function Da(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var c,s=t[Symbol.iterator]();!(o=(c=s.next()).done)&&(n.push(c.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Na(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Ba=function(){function t(e,n,o,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sri=e,this.sci=n,this.eri=o,this.eci=r,this.w=i,this.h=c}var e,n,o;return e=t,o=[{key:"valueOf",value:function(e){var n=e.split(":"),o=Da(E.expr2xy(n[0]),2),r=o[0],i=o[1],c=i,s=r;if(n.length>1){var a=Da(E.expr2xy(n[1]),2);s=a[0],c=a[1]}return new t(i,r,c,s)}}],(n=[{key:"set",value:function(t,e,n,o){this.sri=t,this.sci=e,this.eri=n,this.eci=o}},{key:"multiple",value:function(){return this.eri-this.sri>0||this.eci-this.sci>0}},{key:"includes",value:function(){for(var t=0,e=0,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];if(1===o.length){var i=E.expr2xy(o[0]),c=Da(i,2);e=c[0],t=c[1]}else 2===o.length&&(t=o[0],e=o[1]);var s=this.sri,a=this.sci,l=this.eri,u=this.eci;return s<=t&&t<=l&&a<=e&&e<=u}},{key:"each",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},n=this.sri,o=this.sci,r=this.eri,i=this.eci,c=n;c<=r;c+=1)if(e(c))for(var s=o;s<=i;s+=1)t(c,s)}},{key:"contains",value:function(t){return this.sri<=t.sri&&this.sci<=t.sci&&this.eri>=t.eri&&this.eci>=t.eci}},{key:"within",value:function(t){return this.sri>=t.sri&&this.sci>=t.sci&&this.eri<=t.eri&&this.eci<=t.eci}},{key:"disjoint",value:function(t){return this.sri>t.eri||this.sci>t.eci||t.sri>this.eri||t.sci>this.eci}},{key:"intersects",value:function(t){return this.sri<=t.eri&&this.sci<=t.eci&&t.sri<=this.eri&&t.sci<=this.eci}},{key:"union",value:function(e){var n=this.sri,o=this.sci,r=this.eri,i=this.eci;return new t(e.sri<n?e.sri:n,e.sci<o?e.sci:o,e.eri>r?e.eri:r,e.eci>i?e.eci:i)}},{key:"coincide",value:function(e){var n=this.sri,o=this.sci,r=this.eri,i=this.eci;return this.disjoint(e)?new t(-1,-1,-1,-1):new t(e.sri>n?e.sri:n,e.sci>o?e.sci:o,e.eri<r?e.eri:r,e.eci<i?e.eci:i)}},{key:"difference",value:function(e){var n=[],o=function(e,o,r,i){n.push(new t(e,o,r,i))},r=this.sri,i=this.sci,c=this.eri,s=this.eci,a=e.sri-r,l=e.sci-i,u=c-e.eri,f=s-e.eci;return a>0?(o(r,i,e.sri-1,s),u>0?(o(e.eri+1,i,c,s),l>0&&o(e.sri,i,e.eri,e.sci-1),f>0&&o(e.sri,e.eci+1,e.eri,s)):(l>0&&o(e.sri,i,c,e.sci-1),f>0&&o(e.sri,e.eci+1,c,s))):u>0&&(o(e.eri+1,i,c,s),l>0&&o(r,i,e.eri,e.sci-1),f>0&&o(r,e.eci+1,e.eri,s)),l>0?(o(r,i,c,e.sci-1),f>0?(o(r,e.eri+1,c,s),a>0&&o(r,e.sci,e.sri-1,e.eci),u>0&&o(e.sri+1,e.sci,c,e.eci)):(a>0&&o(r,e.sci,e.sri-1,s),u>0&&o(e.sri+1,e.sci,c,s))):f>0&&(o(c,e.eci+1,c,s),a>0&&o(r,i,e.sri-1,e.eci),u>0&&o(e.eri+1,i,c,e.eci)),n}},{key:"size",value:function(){return[this.eri-this.sri+1,this.eci-this.sci+1]}},{key:"brink",value:function(){var e=this.sri,n=this.eri,o=this.sci,r=this.eci,i=new t(e,o,e,r),c=new t(n,o,n,r);return{top:i,right:new t(e,r,n,r),bottom:c,left:new t(e,o,n,o)}}},{key:"toString",value:function(){var t=this.sri,e=this.sci,n=this.eri,o=this.eci,r=E.xy2expr(e,t);return this.multiple()&&(r="".concat(r,":").concat(E.xy2expr(o,n))),r}},{key:"clone",value:function(){return new t(this.sri,this.sci,this.eri,this.eci,this.w,this.h)}},{key:"equals",value:function(t){return this.eri===t.eri&&this.eci===t.eci&&this.sri===t.sri&&this.sci===t.sci}}])&&Na(e.prototype,n),o&&Na(e,o),t}();function Va(t){return(Va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ya(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function za(t,e){return!e||"object"!==Va(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ua(t){return(Ua=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fa(t,e){return(Fa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ga=function(t){function e(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=za(this,Ua(e).call(this,t))).options=E.mergeDeep({},o),n.lt=new Ia,n.t=new Ia,n.l=new Ia,n.br=new Ia,n.selectorAttr=null,n.bind(),n}var n,o,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fa(t,e)}(e,t),n=e,(o=[{key:"setLTOffset",value:function(t){var e=this.screen.table,n=e.frozenLeftTop,o=e.cols,r=e.rows,i=e.grid,c=n.getViewRange(),s=t.rect,a=new Ba(-1,-1,-1,-1),l=s.coincide(c);if(a.equals(l))this.lt.hide();else{var u=o.sectionSumWidth(l.sci,l.eci),f=r.sectionSumHeight(l.sri,l.eri),h=r.sectionSumHeight(c.sri,l.sri-1),p=o.sectionSumWidth(c.sci,l.sci-1);s.eci>c.eci?(this.lt.right.hide(),this.lt.mask.css("border-right","none")):(this.lt.right.show(),this.lt.mask.cssRemoveKeys("border-right")),s.eri>c.eri?(this.lt.bottom.hide(),this.lt.mask.css("border-bottom","none")):(this.lt.bottom.show(),this.lt.mask.cssRemoveKeys("border-bottom"));var y=new Ic({x:p,y:h,width:u,height:f});y.expandSize(i.lineWidth()),this.lt.offset({width:y.width,height:y.height,left:y.x,top:y.y}).show()}}},{key:"setTOffset",value:function(t){var e=this.screen.table,n=e.fixedTop,o=e.cols,r=e.rows,i=e.grid,c=n.getViewRange(),s=t.rect,a=new Ba(-1,-1,-1,-1),l=s.coincide(c);if(a.equals(l))this.t.hide();else{var u=o.sectionSumWidth(l.sci,l.eci),f=r.sectionSumHeight(l.sri,l.eri),h=r.sectionSumHeight(c.sri,l.sri-1),p=o.sectionSumWidth(c.sci,l.sci-1);s.sci<c.sci?(this.t.left.hide(),this.t.mask.css("border-left","none")):(this.t.left.show(),this.t.mask.cssRemoveKeys("border-left")),s.eri>c.eri?(this.t.bottom.hide(),this.t.mask.css("border-bottom","none")):(this.t.bottom.show(),this.t.mask.cssRemoveKeys("border-bottom")),s.eci>c.eci?(this.t.right.hide(),this.t.mask.css("border-right","none")):(this.t.right.show(),this.t.mask.cssRemoveKeys("border-right"));var y=new Ic({x:p,y:h,width:u,height:f});y.expandSize(i.lineWidth()),this.t.offset({width:y.width,height:y.height,left:y.x,top:y.y}).show()}}},{key:"setLOffset",value:function(t){var e=this.screen.table,n=e.fixedLeft,o=e.cols,r=e.rows,i=e.grid,c=n.getViewRange(),s=t.rect,a=new Ba(-1,-1,-1,-1),l=s.coincide(c);if(a.equals(l))this.l.hide();else{var u=o.sectionSumWidth(l.sci,l.eci),f=r.sectionSumHeight(l.sri,l.eri),h=r.sectionSumHeight(c.sri,l.sri-1),p=o.sectionSumWidth(c.sci,l.sci-1);s.sri<c.sri?(this.l.top.hide(),this.l.mask.css("border-top","none")):(this.l.top.show(),this.l.mask.cssRemoveKeys("border-top")),s.eci>c.eci?(this.l.right.hide(),this.l.mask.css("border-right","none")):(this.l.right.show(),this.l.mask.cssRemoveKeys("border-right")),s.eri>c.eri?(this.l.bottom.hide(),this.l.mask.css("border-bottom","none")):(this.l.bottom.show(),this.l.mask.cssRemoveKeys("border-bottom"));var y=new Ic({x:p,y:h,width:u,height:f});y.expandSize(i.lineWidth()),this.l.offset({width:y.width,height:y.height,left:y.x,top:y.y}).show()}}},{key:"setBROffset",value:function(t){var e=this.screen.table,n=e.cols,o=e.rows,r=e.grid,i=e.getViewRange(),c=t.rect,s=new Ba(-1,-1,-1,-1),a=c.coincide(i);if(s.equals(a))this.br.hide();else{var l=n.sectionSumWidth(a.sci,a.eci),u=o.sectionSumHeight(a.sri,a.eri),f=o.sectionSumHeight(i.sri,a.sri-1),h=n.sectionSumWidth(i.sci,a.sci-1);c.sci<i.sci?(this.br.left.hide(),this.br.mask.css("border-left","none")):(this.br.left.show(),this.br.mask.cssRemoveKeys("border-left")),c.sri<i.sri?(this.br.top.hide(),this.br.mask.css("border-top","none")):(this.br.top.show(),this.br.mask.cssRemoveKeys("border-top")),c.eri>i.eri?(this.br.bottom.hide(),this.br.mask.css("border-bottom","none")):(this.br.bottom.show(),this.br.mask.cssRemoveKeys("border-bottom")),c.eci>i.eci?(this.br.right.hide(),this.br.mask.css("border-right","none")):(this.br.right.show(),this.br.mask.cssRemoveKeys("border-right"));var p=new Ic({x:h,y:f,width:l,height:u});p.expandSize(r.lineWidth()),this.br.offset({width:p.width,height:p.height,left:p.x,top:p.y}).show()}}},{key:"setOffset",value:function(t){this.setLTOffset(t),this.setTOffset(t),this.setLOffset(t),this.setBROffset(t)}},{key:"bind",value:function(){var t=this,e=this.screen.table;jt.bind(e,Ct.SYSTEM_EVENT_TYPE.SCROLL,(function(){t.selectorAttr&&t.setOffset(t.selectorAttr)})),jt.bind(e,Ct.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(e){t.selectorAttr&&t.setOffset(t.selectorAttr),e.stopPropagation()})),jt.bind(e,Ct.TABLE_EVENT_TYPE.CHANGE_WIDTH,(function(e){t.selectorAttr&&t.setOffset(t.selectorAttr),e.stopPropagation()}))}},{key:"setShow",value:function(t){this.selectorAttr=t,this.setOffset(t)}},{key:"setHide",value:function(){this.selectorAttr=null,this.lt.hide(),this.t.hide(),this.l.hide(),this.br.hide()}}])&&Ya(n.prototype,o),r&&Ya(n,r),e}(Ha);function Xa(t){return(Xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ka(t,e){return!e||"object"!==Xa(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qa(t){return(qa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Za(t,e){return(Za=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $a=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Ka(this,qa(e).call(this,"".concat(o,"-selector")))).cornerEl=T("div","".concat(o,"-selector-corner")),t.areaEl=T("div","".concat(o,"-selector-area")),t.transfromData=T("div","".concat(o,"-selector-transform-data")),t.areaEl.children(t.cornerEl),t.children(t.transfromData),t.children(t.areaEl),t.hide(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Za(t,e)}(e,t),e}(R);function Ja(t){return(Ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qa(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function tl(t,e){return!e||"object"!==Ja(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function el(t){return(el=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nl(t,e){return(nl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ol=function(t){function e(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=tl(this,el(e).call(this,t))).options=o,n.selectorAttr=null,n.downSelectorAttr=null,n.onChangeStack=[],n.onSelectChangeStack=[],n.onSelectChangeOver=[],n.onDownSelectStack=[],n.lt=new $a,n.t=new $a,n.l=new $a,n.br=new $a,n.bind(),n}var n,o,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nl(t,e)}(e,t),n=e,(o=[{key:"bind",value:function(){var t=this,e=this.screen.table,n=e.mousePointType,o=e.keyboardManage,r=e.cols,i=e.rows,c=e.edit,s=e.merges;jt.bind(e,Ct.SYSTEM_EVENT_TYPE.SCROLL,(function(){t.selectorAttr&&t.setOffset(t.selectorAttr)})),jt.bind(e,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(o){if(0===o.button){var r=e.computeEventXy(o),i=r.x,c=r.y,s=t.getDownXYSelectorAttr(i,c);switch(t.setSelectAttr(s),t.setDownSelectAttr(s),t.setOffset(s),t.onDownSelectStack.forEach((function(t){return t()})),t.onChangeStack.forEach((function(t){return t()})),t.onSelectChangeStack.forEach((function(t){return t()})),s.edgeType){case"left-top":n.on(["table-cell"]);break;case"left":n.on(["table-ri"]);break;case"top":n.on(["table-ci"]);break;default:n.on(["table-cell"])}jt.mouseMoveUp(document,(function(n){var o=e.computeEventXy(n),r=o.x,i=o.y,c=t.getMoveXySelectorAttr(s,r,i);t.setSelectAttr(c),t.setOffset(c),t.onChangeStack.forEach((function(t){return t()})),t.onSelectChangeStack.forEach((function(t){return t()})),n.stopPropagation(),n.preventDefault()}),(function(){n.off(),t.onSelectChangeOver.forEach((function(t){return t()}))}))}})),jt.bind(e,Ct.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(e){t.selectorAttr&&(t.setOffset(t.selectorAttr),t.onChangeStack.forEach((function(t){return t()}))),e.stopPropagation()})),jt.bind(e,Ct.TABLE_EVENT_TYPE.CHANGE_WIDTH,(function(e){t.selectorAttr&&(t.setOffset(t.selectorAttr),t.onChangeStack.forEach((function(t){return t()}))),e.stopPropagation()}));var a=0,l=null;o.register({el:e,code:9,callback:function(){c.hideEdit();var e=t.selectorAttr,n=t.selectorAttr.rect.clone();if(a!==e){var o=n.sri,u=n.sci;a=e,l={sri:o,sci:u}}var f=r.len-1,h=i.len-1,p=l,y=p.sri,b=p.sci,d=s.getFirstIncludes(y,b);if(d&&(b=d.eci),!(b>=f&&y>=h)){b>=f?(y+=1,b=0):b+=1,l.sri=y,l.sci=b;var v=y,g=b,w=s.getFirstIncludes(y,b);w&&(y=w.sri,b=w.sci,v=w.eri,g=w.eci),n.sri=y,n.sci=b,n.eri=v,n.eci=g,t.selectorAttr.rect=n,t.setOffset(t.selectorAttr),t.onChangeStack.forEach((function(t){return t()})),t.onSelectChangeStack.forEach((function(t){return t()})),c.showEdit()}}})}},{key:"setLTOffset",value:function(t){var e=this.screen.table,n=e.frozenLeftTop,o=e.cols,r=e.rows,i=e.grid,c=n.getViewRange(),s=t.rect,a=new Ba(-1,-1,-1,-1),l=s.coincide(c);if(a.equals(l))this.lt.hide();else{var u=o.sectionSumWidth(l.sci,l.eci),f=r.sectionSumHeight(l.sri,l.eri),h=r.sectionSumHeight(c.sri,l.sri-1),p=o.sectionSumWidth(c.sci,l.sci-1);s.eci>c.eci?this.lt.areaEl.css("border-right","none"):this.lt.areaEl.cssRemoveKeys("border-right"),s.eri>c.eri?this.lt.areaEl.css("border-bottom","none"):this.lt.areaEl.cssRemoveKeys("border-bottom");var y=new Ic({x:p,y:h,width:u,height:f});y.expandSize(i.lineWidth()),this.lt.offset({width:y.width,height:y.height,left:y.x,top:y.y}).show()}}},{key:"setTOffset",value:function(t){var e=this.screen.table,n=e.fixedTop,o=e.cols,r=e.rows,i=e.grid,c=n.getViewRange(),s=t.rect,a=new Ba(-1,-1,-1,-1),l=s.coincide(c);if(a.equals(l))this.t.hide();else{var u=o.sectionSumWidth(l.sci,l.eci),f=r.sectionSumHeight(l.sri,l.eri),h=r.sectionSumHeight(c.sri,l.sri-1),p=o.sectionSumWidth(c.sci,l.sci-1);s.sci<c.sci?this.t.areaEl.css("border-left","none"):this.t.areaEl.cssRemoveKeys("border-left"),s.eri>c.eri?this.t.areaEl.css("border-bottom","none"):this.t.areaEl.cssRemoveKeys("border-bottom"),s.eci>c.eci?this.t.areaEl.css("border-right","none"):this.t.areaEl.cssRemoveKeys("border-right");var y=new Ic({x:p,y:h,width:u,height:f});y.expandSize(i.lineWidth()),this.t.offset({width:y.width,height:y.height,left:y.x,top:y.y}).show()}}},{key:"setLOffset",value:function(t){var e=this.screen.table,n=e.fixedLeft,o=e.cols,r=e.rows,i=e.grid,c=n.getViewRange(),s=t.rect,a=new Ba(-1,-1,-1,-1),l=s.coincide(c);if(a.equals(l))this.l.hide();else{var u=o.sectionSumWidth(l.sci,l.eci),f=r.sectionSumHeight(l.sri,l.eri),h=r.sectionSumHeight(c.sri,l.sri-1),p=o.sectionSumWidth(c.sci,l.sci-1);s.sri<c.sri?this.l.areaEl.css("border-top","none"):this.l.areaEl.cssRemoveKeys("border-top"),s.eci>c.eci?this.l.areaEl.css("border-right","none"):this.l.areaEl.cssRemoveKeys("border-right"),s.eri>c.eri?this.l.areaEl.css("border-bottom","none"):this.l.areaEl.cssRemoveKeys("border-bottom");var y=new Ic({x:p,y:h,width:u,height:f});y.expandSize(i.lineWidth()),this.l.offset({width:y.width,height:y.height,left:y.x,top:y.y}).show()}}},{key:"setBROffset",value:function(t){var e=this.screen.table,n=e.cols,o=e.rows,r=e.grid,i=e.getViewRange(),c=t.rect,s=new Ba(-1,-1,-1,-1),a=c.coincide(i);if(s.equals(a))this.br.hide();else{var l=n.sectionSumWidth(a.sci,a.eci),u=o.sectionSumHeight(a.sri,a.eri),f=o.sectionSumHeight(i.sri,a.sri-1),h=n.sectionSumWidth(i.sci,a.sci-1);c.sci<i.sci?this.br.areaEl.css("border-left","none"):this.br.areaEl.cssRemoveKeys("border-left"),c.sri<i.sri?this.br.areaEl.css("border-top","none"):this.br.areaEl.cssRemoveKeys("border-top"),c.eri>i.eri?this.br.areaEl.css("border-bottom","none"):this.br.areaEl.cssRemoveKeys("border-bottom"),c.eci>i.eci?this.br.areaEl.css("border-right","none"):this.br.areaEl.cssRemoveKeys("border-right");var p=new Ic({x:h,y:f,width:l,height:u});p.expandSize(r.lineWidth()),this.br.offset({width:p.width,height:p.height,left:p.x,top:p.y}).show()}}},{key:"setLTCorner",value:function(t,e){var n=this.screen.table.frozenLeftTop.getViewRange(),o=t.rect,r=t.edge,i=t.edgeType,c=new Ba(-1,-1,-1,-1),s=o.coincide(n);if(!c.equals(s))if(this.lt.cornerEl.cssRemoveKeys("left"),this.lt.cornerEl.cssRemoveKeys("top"),this.lt.cornerEl.cssRemoveKeys("right"),this.lt.cornerEl.cssRemoveKeys("bottom"),this.lt.cornerEl.hide(),r){var a="ltl"===e;"left"===i&&"ltt"===e&&(this.lt.cornerEl.show(),this.lt.cornerEl.css("left","0px"),this.lt.cornerEl.css("bottom","0px")),"top"===i&&a&&(this.lt.cornerEl.show(),this.lt.cornerEl.css("right","0px"),this.lt.cornerEl.css("top","0px"))}else"lt"===e&&(this.lt.cornerEl.show(),this.lt.cornerEl.css("right","0px"),this.lt.cornerEl.css("bottom","0px")),o.eci>n.eci&&this.lt.cornerEl.hide(),o.eri>n.eri&&this.lt.cornerEl.hide()}},{key:"setTCorner",value:function(t,e){var n=this.screen.table.fixedTop.getViewRange(),o=t.rect,r=t.edge,i=t.edgeType,c=new Ba(-1,-1,-1,-1),s=o.coincide(n);if(!c.equals(s))if(this.t.cornerEl.cssRemoveKeys("left"),this.t.cornerEl.cssRemoveKeys("top"),this.t.cornerEl.cssRemoveKeys("right"),this.t.cornerEl.cssRemoveKeys("bottom"),this.t.cornerEl.hide(),r){var a="lttlbr"===e;"top"===i&&"tbr"===e&&(this.t.cornerEl.show(),this.t.cornerEl.css("right","0px"),this.t.cornerEl.css("top","0px")),"top"===i&&a&&(this.t.cornerEl.show(),this.t.cornerEl.css("right","0px"),this.t.cornerEl.css("top","0px")),"top"===i&&o.eci>n.eci&&this.t.cornerEl.hide()}else("t"===e||"ltt"===e)&&(this.t.cornerEl.show(),this.t.cornerEl.css("right","0px"),this.t.cornerEl.css("bottom","0px")),o.eci>n.eci&&this.t.cornerEl.hide(),o.eri>n.eri&&this.t.cornerEl.hide()}},{key:"setLCorner",value:function(t,e){var n=this.screen.table.fixedLeft.getViewRange(),o=t.rect,r=t.edge,i=t.edgeType,c=new Ba(-1,-1,-1,-1),s=o.coincide(n);if(!c.equals(s))if(this.l.cornerEl.cssRemoveKeys("left"),this.l.cornerEl.cssRemoveKeys("top"),this.l.cornerEl.cssRemoveKeys("right"),this.l.cornerEl.cssRemoveKeys("bottom"),this.l.cornerEl.hide(),r){var a="lttlbr"===e;"left"===i&&"lbr"===e&&(this.l.cornerEl.show(),this.l.cornerEl.css("left","0"),this.l.cornerEl.css("bottom","0")),"left"===i&&a&&(this.l.cornerEl.show(),this.l.cornerEl.css("left","0"),this.l.cornerEl.css("bottom","0")),"left"===i&&o.eri>n.eri&&this.l.cornerEl.hide()}else("l"===e||"ltl"===e)&&(this.l.cornerEl.show(),this.l.cornerEl.css("right","0px"),this.l.cornerEl.css("bottom","0px")),o.eci>n.eci&&this.l.cornerEl.hide(),o.eri>n.eri&&this.l.cornerEl.hide()}},{key:"setBrCorner",value:function(t,e){var n=this.screen.table.getViewRange(),o=t.rect,r=t.edge,i=t.edgeType,c=new Ba(-1,-1,-1,-1),s=o.coincide(n);if(!c.equals(s))if(this.br.cornerEl.cssRemoveKeys("left"),this.br.cornerEl.cssRemoveKeys("top"),this.br.cornerEl.cssRemoveKeys("right"),this.br.cornerEl.cssRemoveKeys("bottom"),this.br.cornerEl.hide(),r){var a="br"===e,l="lttlbr"===e;"left"===i&&a&&(this.br.cornerEl.show(),this.br.cornerEl.css("left","0"),this.br.cornerEl.css("bottom","0")),"top"===i&&a&&(this.br.cornerEl.show(),this.br.cornerEl.css("right","0"),this.br.cornerEl.css("top","0")),"left-top"===i&&l&&(this.br.cornerEl.show(),this.br.cornerEl.css("right","0"),this.br.cornerEl.css("bottom","0")),"left-top"===i&&a&&(this.br.cornerEl.show(),this.br.cornerEl.css("right","0"),this.br.cornerEl.css("bottom","0")),"left"===i&&o.eri>n.eri&&this.br.cornerEl.hide(),"top"===i&&o.eci>n.eci&&this.br.cornerEl.hide()}else{var u="lbr"===e;("br"===e||"tbr"===e||u||u||"lttlbr"===e)&&(this.br.cornerEl.show(),this.br.cornerEl.css("right","0px"),this.br.cornerEl.css("bottom","0px")),o.eri>n.eri&&this.br.cornerEl.hide(),o.eci>n.eci&&this.br.cornerEl.hide()}}},{key:"setSelectAttr",value:function(t){this.selectorAttr=t,this.selectorAttr.id=Date.now()}},{key:"setDownSelectAttr",value:function(t){this.downSelectorAttr=t}},{key:"getIntersectsArea",value:function(t){var e=this.screen.table,n=e.fixed,o=e.cols,r=e.rows,i=t.rect,c="",s=new Ba(0,0,n.fxTop,n.fxLeft),a=new Ba(0,n.fxLeft+1,n.fxTop,o.len),l=new Ba(n.fxTop+1,0,r.len,n.fxLeft),u=new Ba(n.fxTop+1,n.fxLeft+1,r.len,o.len);return i.intersects(s)&&(c+="lt"),i.intersects(a)&&(c+="t"),i.intersects(l)&&(c+="l"),i.intersects(u)&&(c+="br"),c}},{key:"setOffset",value:function(t){var e=this.getIntersectsArea(t);this.setLTOffset(t),this.setTOffset(t),this.setLOffset(t),this.setBROffset(t),this.setLTCorner(t,e),this.setTCorner(t,e),this.setLCorner(t,e),this.setBrCorner(t,e)}},{key:"getViewRange",value:function(){var t=this.screen.table,e=t.cols,n=t.rows,o=t.getViewRange(),r=o.sri,i=o.sci,c=o.eri,s=o.eci;t.getFixedWidth()>0&&(r=0),t.getFixedHeight()>0&&(i=0);var a=e.sectionSumWidth(i,s),l=n.sectionSumHeight(r,c);return new Ba(r,i,c,s,a,l)}},{key:"getDownXYSelectorAttr",value:function(t,e){var n=this.screen.table,o=n.merges,r=n.rows,i=n.cols,c=n.getRiCiByXy(t,e),s=c.ri,a=c.ci;if(-1===s&&-1===a)return{rect:new Ba(0,0,r.len-1,i.len-1),edge:!0,edgeType:"left-top"};if(-1===s)return{rect:new Ba(0,a,r.len-1,a),edge:!0,edgeType:"top"};if(-1===a)return{rect:new Ba(s,0,s,i.len-1),edge:!0,edgeType:"left"};var l=o.getFirstIncludes(s,a),u=new Ba(s,a,s,a);return l&&(u=l),{rect:u}}},{key:"getMoveXySelectorAttr",value:function(t,e,n){var o=this.screen.table,r=o.merges,i=o.rows,c=o.cols,s=t.rect,a=t.edgeType,l=this.getViewRange(),u=o.getRiCiByXy(e,n),f=u.ri,h=u.ci;switch(-1===f&&(f=l.sri),-1===h&&(h=l.sci),a){case"left-top":var p=s.union(new Ba(0,0,i.len-1,c.len-1));return{rect:p=s.union(p),edge:!0,edgeType:"left-top"};case"top":var y=s.union(new Ba(0,h,0,h));return{rect:y=s.union(y),edge:!0,edgeType:"top"};case"left":var b=s.union(new Ba(f,0,f,0));return{rect:b=s.union(b),edge:!0,edgeType:"left"}}var d=s.union(new Ba(f,h,f,h));return{rect:d=r.union(d)}}},{key:"getSelectRange",value:function(){return this.selectorAttr.rect}},{key:"addDownSelectCb",value:function(t){this.onDownSelectStack.push(t)}},{key:"removeDownSelectCb",value:function(t){for(var e=0;e<this.onChangeStack.length;e+=1)if(this.onDownSelectStack[e]===t)return void this.onDownSelectStack.splice(e,1)}},{key:"addChangeCb",value:function(t){this.onChangeStack.push(t)}},{key:"removeChangeCb",value:function(t){for(var e=0;e<this.onChangeStack.length;e+=1)if(this.onChangeStack[e]===t)return void this.onChangeStack.splice(e,1)}},{key:"addSelectChangeCb",value:function(t){this.onSelectChangeStack.push(t)}},{key:"removeSelectChangeCb",value:function(t){for(var e=0;e<this.onSelectChangeStack.length;e+=1)if(this.onSelectChangeStack[e]===t)return void this.onSelectChangeStack.splice(e,1)}},{key:"addSelectChangeOverCb",value:function(t){this.onSelectChangeOver.push(t)}},{key:"removeSelectChangeOverCb",value:function(t){for(var e=0;e<this.onSelectChangeOver.length;e+=1)if(this.onSelectChangeOver[e]===t)return void this.onSelectChangeOver.splice(e,1)}}])&&Qa(n.prototype,o),r&&Qa(n,r),e}(Ha);function rl(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function il(t){return(il="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cl(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function sl(t,e){return!e||"object"!==il(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function al(t){return(al=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ll(t,e){return(ll=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ul=function(t){function e(t){var n,o=t.table,r=t.cols,i=t.rows,c=t.data,s=void 0===c?[]:c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=sl(this,al(e).call(this))).table=o,n.cols=r,n.rows=i,n._=s,n}var n,o,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ll(t,e)}(e,t),n=e,r=[{key:"getDefaultAttr",value:function(){var t={align:Fc.left,verticalAlign:Gc.center,textWrap:Xc.OVER_FLOW,strikethrough:!1,underline:!1,color:"rgb(0,0,0)",name:"Arial",size:14,bold:!1,italic:!1,direction:Kc.HORIZONTAL},e={time:E.now(),left:{display:!1,width:1,color:"#000000",type:Ni.SOLID_LINE},top:{display:!1,width:1,color:"#000000",type:Ni.SOLID_LINE},right:{display:!1,width:1,color:"#000000",type:Ni.SOLID_LINE},bottom:{display:!1,width:1,color:"#000000",type:Ni.SOLID_LINE}};return{ID:E.now(),text:"",format:"default",background:null,fontAttr:t,borderAttr:e}}}],(o=[{key:"checkAttributeIntegrity",value:function(t){return E.isUnDef(t.ID)?E.mergeDeep(e.getDefaultAttr(),t):t}},{key:"getCellHorizontalOverFlowRect",value:function(t,e){var n=this.getCell(t,e),o=this.cols,r=n.fontAttr.align,i=0,c=0;if(r===Fc.left)for(var s=e,a=o.len;s<=a;s+=1){var l=this.getCell(t,s);if(s===e)i+=o.getWidth(s);else{if(!E.isUnDef(l)&&!E.isBlank(l.text))break;i+=o.getWidth(s)}}if(r===Fc.center){for(var u=e,f=o.len;u<=f;u+=1){var h=this.getCell(t,u);if(u===e)i+=o.getWidth(u);else{if(!E.isUnDef(h)&&!E.isBlank(h.text))break;i+=o.getWidth(u)}}for(var p=e-1;p>=0;p-=1){var y=this.getCell(t,p);if(!E.isUnDef(y)&&!E.isBlank(y.text))break;var b=o.getWidth(p);i+=b,c-=b}}if(r===Fc.right)for(var d=e;d>=0;d-=1){var v=this.getCell(t,d);if(d===e)i+=o.getWidth(d);else{if(!E.isUnDef(v)&&!E.isBlank(v.text))break;var g=o.getWidth(d);i+=g,c-=g}}return{width:i,offset:c}}},{key:"getCellVerticalOverFlowRect",value:function(t,e){var n=this.getCell(t,e),o=this.rows,r=n.fontAttr.verticalAlign,i=0,c=0;if(r===Gc.top)for(var s=t,a=o.len;s<=a;s+=1){var l=this.getCell(s,e);if(s===e)i+=o.getHeight(s);else{if(!E.isUnDef(l)&&!E.isBlank(l.text))break;i+=o.getHeight(s)}}if(r===Gc.center){for(var u=t,f=o.len;u<=f;u+=1){var h=this.getCell(u,e);if(u===e)i+=o.getHeight(u);else{if(!E.isUnDef(h)&&!E.isBlank(h.text))break;i+=o.getHeight(u)}}for(var p=t-1;p>=0;p-=1){var y=this.getCell(t,p);if(!E.isUnDef(y)&&!E.isBlank(y.text))break;var b=o.getHeight(p);i+=b,c-=b}}if(r===Gc.bottom)for(var d=t;d>=0;d-=1){var v=this.getCell(t,d);if(d===e)i+=o.getHeight(d);else{if(!E.isUnDef(v)&&!E.isBlank(v.text))break;var g=o.getHeight(d);i+=g,c-=g}}return{height:i,offset:c}}},{key:"getCell",value:function(t,e){var n=this._[t];return n&&n[e]?(n[e]=this.checkAttributeIntegrity(n[e]),n[e]):null}},{key:"getMergeCellOrCell",value:function(t,e){var n=this.table.merges.getFirstIncludes(t,e);return n?this.getCell(n.sri,n.sci):this.getCell(t,e)}},{key:"getCellOrNew",value:function(t,e){return this._[t]||(this._[t]=[]),this._[t][e]||(this._[t][e]={}),this._[t][e]=this.checkAttributeIntegrity(this._[t][e]),this._[t][e]}},{key:"getCellInRectRange",value:function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.sy,i=void 0===r?0:r,c=o.sx,s=void 0===c?0:c,a=t.sri,l=t.eri,u=t.sci,f=t.eci,h=i,p=a;p<=l;p+=1){for(var y=this.rows.getHeight(p),b=s,d=u;d<=f;d+=1){var v=this.cols.getWidth(d),g=null;if(g=n?this.getCellOrNew(p,d):this.getCell(p,d)){var w=g,m=w.fontAttr,O=m.direction,E=m.textWrap,S=new Ic({x:b,y:h,width:v,height:y}),_=null;if(E===Xc.OVER_FLOW)if(O===Kc.VERTICAL){var x=this.getCellVerticalOverFlowRect(p,d);_=new Ic({x:b,y:h+x.offset,width:v,height:x.height})}else{var T=this.getCellHorizontalOverFlowRect(p,d);_=new Ic({x:b+T.offset,y:h,width:T.width,height:y})}var k=e(p,d,g,S,_);if(!1===k)return}b+=v}h+=y}}},{key:"getMergeCellInViewRange",value:function(t,e){var n=this,o=this.table,r=o.merges,i=o.cols,c=o.rows,s=[];this.getCellInRectRange(t,(function(o,a){var l=r.getFirstIncludes(o,a);if(l&&!s.find((function(t){return t===l}))){s.push(l);var u=n.getCell(l.sri,l.sci),f=Math.min(t.sri,l.sri),h=Math.max(t.sri,l.sri),p=Math.min(t.sci,l.sci),y=Math.max(t.sci,l.sci);h-=1,y-=1;var b=i.sectionSumWidth(p,y),d=c.sectionSumHeight(f,h);b=t.sci>l.sci?-1*b:b,d=t.sri>l.sri?-1*d:d;var v=i.sectionSumWidth(l.sci,l.eci),g=c.sectionSumHeight(l.sri,l.eri),w=new Ic({x:b,y:d,width:v,height:g});e(w,u)}}))}},{key:"getCellInViewRange",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.sy,i=void 0===r?0:r,c=o.sx,s=void 0===c?0:c,a=this.table,l=a.merges;this.getCellInRectRange(t,(function(t,n,o,r,i){null===l.getFirstIncludes(t,n)&&e(t,n,o,r,i)}),n,{sy:i,sx:s})}},{key:"getData",value:function(){return this._}},{key:"setData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this._=t,this}}])&&cl(n.prototype,o),r&&cl(n,r),e}(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,(n=[{key:"getMergeCellOrCell",value:function(t,e){throw new TypeError("child class implement")}},{key:"borderEqual",value:function(t,e){var n=t.color===e.color,o=t.width===e.width,r=t.type===e.type;return n&&o&&r}},{key:"borderComparisonOfTime",value:function(t,e,n,o){var r=this.getMergeCellOrCell(t,e),i=this.getMergeCellOrCell(n,o);if(E.isUnDef(r)||E.isUnDef(i))return-2;var c=r.borderAttr,s=i.borderAttr,a=c.time,l=s.time;return a>l?1:l>a?-1:0}},{key:"isDisplayLeftBorder",value:function(t,e){var n=this.getMergeCellOrCell(t,e);return!E.isUnDef(n)&&n.borderAttr.left.display}},{key:"isDisplayTopBorder",value:function(t,e){var n=this.getMergeCellOrCell(t,e);return!E.isUnDef(n)&&n.borderAttr.top.display}},{key:"isDisplayRightBorder",value:function(t,e){var n=this.getMergeCellOrCell(t,e);return!E.isUnDef(n)&&n.borderAttr.right.display}},{key:"isDisplayBottomBorder",value:function(t,e){var n=this.getMergeCellOrCell(t,e);return!E.isUnDef(n)&&n.borderAttr.bottom.display}},{key:"getLeftBorderType",value:function(t,e){var n=this.getMergeCellOrCell(t,e);return n&&n.borderAttr.left.type}},{key:"getRightBorderType",value:function(t,e){var n=this.getMergeCellOrCell(t,e);return n&&n.borderAttr.right.type}},{key:"getTopBorderType",value:function(t,e){var n=this.getMergeCellOrCell(t,e);return n&&n.borderAttr.top.type}},{key:"getBottomBorderType",value:function(t,e){var n=this.getMergeCellOrCell(t,e);return n&&n.borderAttr.bottom.type}}])&&rl(e.prototype,n),o&&rl(e,o),t}());function fl(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function hl(t){return(hl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yl(t,e){return!e||"object"!==hl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function bl(t){return(bl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dl(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vl(t,e)}function vl(t,e){return(vl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var gl=function(t){function e(){return pl(this,e),yl(this,bl(e).call(this,"".concat(o,"-tools-divider")))}return dl(e,t),e}(R),wl=function(t){function e(t){var n;pl(this,e),(n=yl(this,bl(e).call(this,"".concat(o,"-tools-menu")))).workTop=t;var r=n.workTop.work.body.sheetView;return n.undo=new ct,n.redo=new ft,n.paintFormat=new vt,n.clearFormat=new Et,n.format=new Ue({contextMenu:{onUpdate:function(t,e){var o=r.getActiveSheet().table,i=o.screen,c=o.cells,s=o.dataSnapshot,a=i.findByClass(ol).selectorAttr;n.format.setTitle(e),a&&(c.getCellInRectRange(a.rect,(function(e,n,o){o.format=t}),!0),s.snapshot(),o.render())}}}),n.font=new ln({contextMenu:{onUpdate:function(t){var e=r.getActiveSheet().table,o=e.screen,i=e.cells,c=e.dataSnapshot,s=o.findByClass(ol).selectorAttr;n.font.setTitle(t),s&&(i.getCellInRectRange(s.rect,(function(e,n,o){o.fontAttr.name=t}),!0),c.snapshot(),e.render())}}}),n.fontSize=new xn({contextMenu:{onUpdate:function(t){var e=r.getActiveSheet().table,o=e.screen,i=e.cells,c=e.dataSnapshot,s=o.findByClass(ol).selectorAttr;n.fontSize.setTitle(t),s&&(i.getCellInRectRange(s.rect,(function(e,n,o){o.fontAttr.size=t}),!0),c.snapshot(),e.render())}}}),n.fontColor=new Mo({contextMenu:{onUpdate:function(t){var e=r.getActiveSheet().table,o=e.screen,i=e.cells,c=e.dataSnapshot,s=o.findByClass(ol).selectorAttr;n.fontColor.setColor(t),s&&(i.getCellInRectRange(s.rect,(function(e,n,o){o.fontAttr.color=t}),!0),c.snapshot(),e.render())}}}),n.fillColor=new Qo({contextMenu:{onUpdate:function(t){var e=r.getActiveSheet().table,o=e.screen,i=e.cells,c=e.dataSnapshot,s=o.findByClass(ol).selectorAttr;n.fillColor.setColor(t),s&&(i.getCellInRectRange(s.rect,(function(e,n,o){o.background=t}),!0),c.snapshot(),e.render())}}}),n.border=new Qi({contextMenu:{onUpdate:function(t,e,n){var o=r.getActiveSheet().table,i=o.screen,c=o.cells,s=o.dataSnapshot,a=i.findByClass(ol).selectorAttr,l=E.now();if(a){var u=1,f=Ni.SOLID_LINE;switch(n){case"line1":u=1,f=Ni.SOLID_LINE;break;case"line2":u=2,f=Ni.SOLID_LINE;break;case"line3":u=3,f=Ni.SOLID_LINE;break;case"line4":f=Ni.DOTTED_LINE;break;case"line5":f=Ni.POINT_LINE;break;case"line6":f=Ni.DOUBLE_LINE}switch(t){case"border1":c.getCellInRectRange(a.rect,(function(t,e,n){n.borderAttr.time=l,n.borderAttr.left.display=!0,n.borderAttr.top.display=!0,n.borderAttr.right.display=!0,n.borderAttr.bottom.display=!0}),!0);break;case"border2":c.getCellInRectRange(a.rect,(function(t,e,n){n.borderAttr.time=l,a.rect.sri===t?n.borderAttr.bottom.display=!0:a.rect.eri===t?n.borderAttr.top.display=!0:(n.borderAttr.bottom.display=!0,n.borderAttr.top.display=!0),a.rect.sci===e?n.borderAttr.right.display=!0:a.rect.eci===e?n.borderAttr.left.display=!0:(n.borderAttr.right.display=!0,n.borderAttr.left.display=!0)}),!0);break;case"border3":c.getCellInRectRange(a.rect,(function(t,e,n){n.borderAttr.time=l,a.rect.sri===t?n.borderAttr.bottom.display=!0:a.rect.eri===t?n.borderAttr.top.display=!0:(n.borderAttr.bottom.display=!0,n.borderAttr.top.display=!0)}),!0);break;case"border4":c.getCellInRectRange(a.rect,(function(t,e,n){n.borderAttr.time=l,a.rect.sci===e?n.borderAttr.right.display=!0:a.rect.eci===e?n.borderAttr.left.display=!0:(n.borderAttr.right.display=!0,n.borderAttr.left.display=!0)}),!0);break;case"border5":c.getCellInRectRange(a.rect,(function(t,e,n){n.borderAttr.time=l,a.rect.sci===e?n.borderAttr.left.display=!0:a.rect.eci===e&&(n.borderAttr.right.display=!0),a.rect.sri===t?n.borderAttr.top.display=!0:a.rect.eri===t&&(n.borderAttr.bottom.display=!0)}),!0);break;case"border6":c.getCellInRectRange(a.rect,(function(t,e,n){e===a.rect.sci&&(n.borderAttr.time=l,n.borderAttr.left.display=!0)}),!0);break;case"border7":c.getCellInRectRange(a.rect,(function(t,e,n){t===a.rect.sri&&(n.borderAttr.time=l,n.borderAttr.top.display=!0)}),!0);break;case"border8":c.getCellInRectRange(a.rect,(function(t,e,n){e===a.rect.eci&&(n.borderAttr.time=l,n.borderAttr.right.display=!0)}),!0);break;case"border9":c.getCellInRectRange(a.rect,(function(t,e,n){t===a.rect.eri&&(n.borderAttr.time=l,n.borderAttr.bottom.display=!0)}),!0);break;case"border10":c.getCellInRectRange(a.rect,(function(t,e){var n=c.getCellOrNew(t,e);if(n.borderAttr.time=l,a.rect.sri===t){var o=c.getCellOrNew(t-1,e);o.borderAttr.time=l,o.borderAttr.bottom.display=!1}if(a.rect.eri===t){var r=c.getCellOrNew(t+1,e);r.borderAttr.time=l,r.borderAttr.top.display=!1}if(a.rect.sci===e){var i=c.getCellOrNew(t,e-1);i.borderAttr.time=l,i.borderAttr.right.display=!1}if(a.rect.eci===e){var s=c.getCellOrNew(t,e+1);s.borderAttr.time=l,s.borderAttr.left.display=!1}n.borderAttr.left.display=!1,n.borderAttr.top.display=!1,n.borderAttr.right.display=!1,n.borderAttr.bottom.display=!1}),!0)}switch(t){case"border1":c.getCellInRectRange(a.rect,(function(t,n,o){o.borderAttr.time=l,o.borderAttr.left.color=e,o.borderAttr.top.color=e,o.borderAttr.right.color=e,o.borderAttr.bottom.color=e}),!0);break;case"border2":c.getCellInRectRange(a.rect,(function(t,n,o){o.borderAttr.time=l,a.rect.sri===t?o.borderAttr.bottom.color=e:a.rect.eri===t?o.borderAttr.top.color=e:(o.borderAttr.bottom.color=e,o.borderAttr.top.color=e),a.rect.sci===n?o.borderAttr.right.color=e:a.rect.eci===n?o.borderAttr.left.color=e:(o.borderAttr.right.color=e,o.borderAttr.left.color=e)}),!0);break;case"border3":c.getCellInRectRange(a.rect,(function(t,n,o){o.borderAttr.time=l,a.rect.sri===t?o.borderAttr.bottom.color=e:a.rect.eri===t?o.borderAttr.top.color=e:(o.borderAttr.bottom.color=e,o.borderAttr.top.color=e)}),!0);break;case"border4":c.getCellInRectRange(a.rect,(function(t,n,o){o.borderAttr.time=l,a.rect.sci===n?o.borderAttr.right.color=e:a.rect.eci===n?o.borderAttr.left.color=e:(o.borderAttr.right.color=e,o.borderAttr.left.color=e)}),!0);break;case"border5":c.getCellInRectRange(a.rect,(function(t,n,o){o.borderAttr.time=l,a.rect.sci===n?o.borderAttr.left.color=e:a.rect.eci===n&&(o.borderAttr.right.color=e),a.rect.sri===t?o.borderAttr.top.color=e:a.rect.eri===t&&(o.borderAttr.bottom.color=e)}),!0);break;case"border6":c.getCellInRectRange(a.rect,(function(t,n,o){o.borderAttr.time=l,o.borderAttr.left.color=e}),!0);break;case"border7":c.getCellInRectRange(a.rect,(function(t,n,o){o.borderAttr.time=l,o.borderAttr.top.color=e}),!0);break;case"border8":c.getCellInRectRange(a.rect,(function(t,n,o){o.borderAttr.time=l,o.borderAttr.right.color=e}),!0);break;case"border9":c.getCellInRectRange(a.rect,(function(t,n,o){o.borderAttr.time=l,o.borderAttr.bottom.color=e}),!0);break;case"border10":c.getCellInRectRange(a.rect,(function(t,e,n){n.borderAttr.time=l,n.borderAttr.left.color=!1,n.borderAttr.top.color=!1,n.borderAttr.right.color=!1,n.borderAttr.bottom.color=!1}),!0)}switch(t){case"border1":c.getCellInRectRange(a.rect,(function(t,e,n){n.borderAttr.time=l,n.borderAttr.left.width=u,n.borderAttr.top.width=u,n.borderAttr.right.width=u,n.borderAttr.bottom.width=u}),!0);break;case"border2":c.getCellInRectRange(a.rect,(function(t,e,n){n.borderAttr.time=l,a.rect.sri===t?n.borderAttr.bottom.width=u:a.rect.eri===t?n.borderAttr.top.width=u:(n.borderAttr.bottom.width=u,n.borderAttr.top.width=u),a.rect.sci===e?n.borderAttr.right.width=u:a.rect.eci===e?n.borderAttr.left.width=u:(n.borderAttr.right.width=u,n.borderAttr.left.width=u)}),!0);break;case"border3":c.getCellInRectRange(a.rect,(function(t,e,n){n.borderAttr.time=l,a.rect.sri===t?n.borderAttr.bottom.width=u:a.rect.eri===t?n.borderAttr.top.width=u:(n.borderAttr.bottom.width=u,n.borderAttr.top.width=u)}),!0);break;case"border4":c.getCellInRectRange(a.rect,(function(t,e,n){n.borderAttr.time=l,a.rect.sci===e?n.borderAttr.right.width=u:a.rect.eci===e?n.borderAttr.left.width=u:(n.borderAttr.right.width=u,n.borderAttr.left.width=u)}),!0);break;case"border5":c.getCellInRectRange(a.rect,(function(t,e,n){n.borderAttr.time=l,a.rect.sci===e?n.borderAttr.left.width=u:a.rect.eci===e&&(n.borderAttr.right.width=u),a.rect.sri===t?n.borderAttr.top.width=u:a.rect.eri===t&&(n.borderAttr.bottom.width=u)}),!0);break;case"border6":c.getCellInRectRange(a.rect,(function(t,e,n){n.borderAttr.time=l,n.borderAttr.left.width=u}),!0);break;case"border7":c.getCellInRectRange(a.rect,(function(t,e,n){n.borderAttr.time=l,n.borderAttr.top.width=u}),!0);break;case"border8":c.getCellInRectRange(a.rect,(function(t,e,n){n.borderAttr.time=l,n.borderAttr.right.width=u}),!0);break;case"border9":c.getCellInRectRange(a.rect,(function(t,e,n){n.borderAttr.time=l,n.borderAttr.bottom.width=u}),!0);break;case"border10":c.getCellInRectRange(a.rect,(function(t,e,n){n.borderAttr.time=l,n.borderAttr.left.width=!1,n.borderAttr.top.width=!1,n.borderAttr.right.width=!1,n.borderAttr.bottom.width=!1}),!0)}switch(t){case"border1":c.getCellInRectRange(a.rect,(function(t,e,n){n.borderAttr.time=l,n.borderAttr.left.type=f,n.borderAttr.top.type=f,n.borderAttr.right.type=f,n.borderAttr.bottom.type=f}),!0);break;case"border2":c.getCellInRectRange(a.rect,(function(t,e,n){n.borderAttr.time=l,a.rect.sri===t?n.borderAttr.bottom.type=f:a.rect.eri===t?n.borderAttr.top.type=f:(n.borderAttr.bottom.type=f,n.borderAttr.top.type=f),a.rect.sci===e?n.borderAttr.right.type=f:a.rect.eci===e?n.borderAttr.left.type=f:(n.borderAttr.right.type=f,n.borderAttr.left.type=f)}),!0);break;case"border3":c.getCellInRectRange(a.rect,(function(t,e,n){n.borderAttr.time=l,a.rect.sri===t?n.borderAttr.bottom.type=f:a.rect.eri===t?n.borderAttr.top.type=f:(n.borderAttr.bottom.type=f,n.borderAttr.top.type=f)}),!0);break;case"border4":c.getCellInRectRange(a.rect,(function(t,e,n){n.borderAttr.time=l,a.rect.sci===e?n.borderAttr.right.type=f:a.rect.eci===e?n.borderAttr.left.type=f:(n.borderAttr.right.type=f,n.borderAttr.left.type=f)}),!0);break;case"border5":c.getCellInRectRange(a.rect,(function(t,e,n){n.borderAttr.time=l,a.rect.sci===e?n.borderAttr.left.type=f:a.rect.eci===e&&(n.borderAttr.right.type=f),a.rect.sri===t?n.borderAttr.top.type=f:a.rect.eri===t&&(n.borderAttr.bottom.type=f)}),!0);break;case"border6":c.getCellInRectRange(a.rect,(function(t,e,n){n.borderAttr.time=l,n.borderAttr.left.type=f}),!0);break;case"border7":c.getCellInRectRange(a.rect,(function(t,e,n){n.borderAttr.time=l,n.borderAttr.top.type=f}),!0);break;case"border8":c.getCellInRectRange(a.rect,(function(t,e,n){n.borderAttr.time=l,n.borderAttr.right.type=f}),!0);break;case"border9":c.getCellInRectRange(a.rect,(function(t,e,n){n.borderAttr.time=l,n.borderAttr.bottom.type=f}),!0);break;case"border10":c.getCellInRectRange(a.rect,(function(t,e,n){n.borderAttr.time=l,n.borderAttr.left.type=!1,n.borderAttr.top.type=!1,n.borderAttr.right.type=!1,n.borderAttr.bottom.type=!1}),!0)}s.snapshot(),o.render()}}}}),n.fontBold=new An,n.fontItalic=new In,n.underLine=new Bn,n.fontStrike=new Fn,n.merge=new rc,n.horizontalAlign=new as({contextMenu:{onUpdate:function(t){var e=r.getActiveSheet().table,o=e.screen,i=e.cells,c=e.dataSnapshot,s=o.findByClass(ol).selectorAttr;switch(t){case Fc.left:n.horizontalAlign.setIcon(new Z("align-left"));break;case Fc.center:n.horizontalAlign.setIcon(new Z("align-center"));break;case Fc.right:n.horizontalAlign.setIcon(new Z("align-right"))}s&&(i.getCellInRectRange(s.rect,(function(e,n,o){o.fontAttr.align=t}),!0),c.snapshot(),e.render())}}}),n.verticalAlign=new Ds({contextMenu:{onUpdate:function(t){var e=r.getActiveSheet().table,o=e.screen,i=e.cells,c=e.dataSnapshot,s=o.findByClass(ol).selectorAttr;switch(t){case Gc.top:n.verticalAlign.setIcon(new Z("align-top"));break;case Gc.center:n.verticalAlign.setIcon(new Z("align-middle"));break;case Gc.bottom:n.verticalAlign.setIcon(new Z("align-bottom"))}s&&(i.getCellInRectRange(s.rect,(function(e,n,o){o.fontAttr.verticalAlign=t}),!0),c.snapshot(),e.render())}}}),n.textWrapping=new ya({contextMenu:{onUpdate:function(t){var e,o=r.getActiveSheet().table,i=o.screen,c=o.cells,s=o.dataSnapshot,a=i.findByClass(ol).selectorAttr;switch(t){case Xc.TRUNCATE:e=new Z("truncate");break;case Xc.WORD_WRAP:e=new Z("text-wrap");break;case Xc.OVER_FLOW:default:e=new Z("overflow")}n.textWrapping.setIcon(e),a&&(c.getCellInRectRange(a.rect,(function(e,n,o){o.fontAttr.textWrap=t}),!0),s.snapshot(),o.render())}}}),n.fixed=new wa,n.filter=new _a,n.functions=new Ca,n.children(n.undo),n.children(n.redo),n.children(n.paintFormat),n.children(n.clearFormat),n.children(new gl),n.children(n.format),n.children(new gl),n.children(n.font),n.children(n.fontSize),n.children(new gl),n.children(n.fontBold),n.children(n.fontItalic),n.children(n.underLine),n.children(n.fontStrike),n.children(n.fontColor),n.children(new gl),n.children(n.fillColor),n.children(n.border),n.children(n.merge),n.children(n.horizontalAlign),n.children(n.verticalAlign),n.children(n.textWrapping),n.children(n.fixed),n.children(n.filter),n.children(n.functions),n.bind(),n}var n,r,i;return dl(e,t),n=e,(r=[{key:"bind",value:function(){var t=this,e=this.workTop.work.body,n=e.sheetView;jt.bind(e,Ct.WORK_BODY_TYPE.CHANGE_ACTIVE,(function(){t.setStatus()})),jt.bind(e,Ct.TABLE_EVENT_TYPE.DATA_CHANGE,(function(){t.setStatus()})),jt.bind(e,Ct.TABLE_EVENT_TYPE.SELECT_DOWN,(function(){t.setFormatStatus(),t.setFontStatus(),t.setFontSizeStatus(),t.setFontBoldStatus(),t.setFontItalicStatus(),t.setUnderLineStatus(),t.setFontStrikeStatus(),t.setFontColorStatus(),t.setFillColorStatus(),t.setHorizontalAlignStatus(),t.setVerticalAlignStatus(),t.setTextWrappingStatus()})),jt.bind(this.undo,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){var t=n.getActiveSheet().table.dataSnapshot;t.undo.length()>1&&t.undo.pop()})),jt.bind(this.redo,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){n.getActiveSheet().table.dataSnapshot.redo.pop()})),jt.bind(this.paintFormat,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){var e=n.getActiveSheet(),o=e.table,r=o.screen,i=o.cells,c=o.dataSnapshot,s=r.findByClass(Ga),a=r.findByClass(ol),l=a.selectorAttr;l&&(s.setShow(l),t.paintFormat.active(!0),t.paintFormat.addSheet(e),a.addSelectChangeOverCb((function n(){s.setHide(),t.paintFormat.active(!1),t.paintFormat.removeSheet(e),a.removeSelectChangeOverCb(n);var r=a.selectorAttr,u=i.getCellOrNew(l.rect.sri,l.rect.sci);i.getCellInRectRange(r.rect,(function(t,e,n){var o=n.text;E.mergeDeep(n,u),n.text=o}),!0),c.snapshot(),o.render()})))})),jt.bind(this.clearFormat,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){var t=n.getActiveSheet().table,e=t.screen,o=t.cells,r=e.findByClass(ol).selectorAttr;r&&(o.getCellInRectRange(r.rect,(function(t,e,n){var o=n.text;E.mergeDeep(n,ul.getDefaultAttr()),n.text=o})),t.render())})),jt.bind(this.format,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.format.formatContextMenu,o=n.elPopUp;ue.closeAll([o]),n.isOpen()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),jt.bind(this.font,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.font.fontContextMenu,o=n.elPopUp;ue.closeAll([o]),n.isOpen()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),jt.bind(this.fontSize,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.fontSize.fontSizeContextMenu,o=n.elPopUp;ue.closeAll([o]),n.isOpen()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),jt.bind(this.fontBold,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){var t=n.getActiveSheet().table,e=t.screen,o=t.cells,r=t.dataSnapshot,i=e.findByClass(ol).selectorAttr;if(i){var c=!o.getCellOrNew(i.rect.sri,i.rect.sci).fontAttr.bold;o.getCellInRectRange(i.rect,(function(t,e,n){n.fontAttr.bold=c}),!0),r.snapshot(),t.render()}})),jt.bind(this.fontItalic,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){var t=n.getActiveSheet().table,e=t.screen,o=t.cells,r=t.dataSnapshot,i=e.findByClass(ol).selectorAttr;if(i){var c=!o.getCellOrNew(i.rect.sri,i.rect.sci).fontAttr.italic;o.getCellInRectRange(i.rect,(function(t,e,n){n.fontAttr.italic=c}),!0),r.snapshot(),t.render()}})),jt.bind(this.underLine,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){var t=n.getActiveSheet().table,e=t.screen,o=t.cells,r=t.dataSnapshot,i=e.findByClass(ol).selectorAttr;if(i){var c=!o.getCellOrNew(i.rect.sri,i.rect.sci).fontAttr.underline;o.getCellInRectRange(i.rect,(function(t,e,n){n.fontAttr.underline=c}),!0),r.snapshot(),t.render()}})),jt.bind(this.fontStrike,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){var t=n.getActiveSheet().table,e=t.screen,o=t.cells,r=t.dataSnapshot,i=e.findByClass(ol).selectorAttr;if(i){var c=!o.getCellOrNew(i.rect.sri,i.rect.sci).fontAttr.strikethrough;o.getCellInRectRange(i.rect,(function(t,e,n){n.fontAttr.strikethrough=c}),!0),r.snapshot(),t.render()}})),jt.bind(this.fontColor,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.fontColor.fontColorContextMenu,o=n.elPopUp;ue.closeAll([o]),n.isOpen()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),jt.bind(this.fillColor,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.fillColor.fillColorContextMenu,o=n.elPopUp;ue.closeAll([o]),n.isOpen()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),jt.bind(this.border,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.border.borderTypeContextMenu,o=n.elPopUp;ue.closeAll([o]),n.isOpen()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),jt.bind(this.merge,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(t){var e=n.getActiveSheet().table,o=e.screen,r=e.dataSnapshot,i=e.merges,c=o.findByClass(ol).selectorAttr;if(c){var s=c.rect.clone(),a=i.getFirstIncludes(s.sri,s.sci);null!==a?i.deleteIntersects(a):s.multiple()&&i.add(s),r.snapshot(),e.render()}t.stopPropagation(),t.preventDefault()})),jt.bind(this.horizontalAlign,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.horizontalAlign.horizontalContextMenu,o=n.elPopUp;ue.closeAll([o]),n.isOpen()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),jt.bind(this.verticalAlign,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.verticalAlign.verticalContextMenu,o=n.elPopUp;ue.closeAll([o]),n.isOpen()?n.open():n.close(),e.stopPropagation(),e.preventDefault()})),jt.bind(this.textWrapping,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){var n=t.textWrapping.textWrappingContextMenu,o=n.elPopUp;ue.closeAll([o]),n.isOpen()?n.open():n.close(),e.stopPropagation(),e.preventDefault()}))}},{key:"setUndoStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table.dataSnapshot;this.undo.active(t.undo.length()>1)}},{key:"setRedoStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table.dataSnapshot;this.redo.active(!t.redo.isEmpty())}},{key:"setPaintFormatStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet();this.paintFormat.active(this.paintFormat.includeSheet(t))}},{key:"setFormatStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.screen,n=t.cells,o=e.findByClass(ol).selectorAttr,r="",i="default";if(o)switch(i=n.getCellOrNew(o.rect.sri,o.rect.sci).format){case"default":r="";break;case"text":r="";break;case"number":r="";break;case"percentage":r="";break;case"fraction":r="";break;case"ENotation":r="";break;case"rmb":r="";break;case"hk":r="";break;case"dollar":r="";break;case"date1":case"date2":case"date3":case"date4":case"date5":r="";break;case"time":r=""}this.format.setTitle(r),this.format.formatContextMenu.setActiveByType(i)}},{key:"setFontStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.screen,n=t.cells,o=e.findByClass(ol).selectorAttr,r="Arial";o&&(r=n.getCellOrNew(o.rect.sri,o.rect.sci).fontAttr.name),this.font.setTitle(r),this.font.fontContextMenu.setActiveByType(r)}},{key:"setFontSizeStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.screen,n=t.cells,o=e.findByClass(ol).selectorAttr,r="12";o&&(r=n.getCellOrNew(o.rect.sri,o.rect.sci).fontAttr.size),this.fontSize.setTitle(r)}},{key:"setFontBoldStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.screen,n=t.cells,o=e.findByClass(ol).selectorAttr,r=!1;o&&(r=n.getCellOrNew(o.rect.sri,o.rect.sci).fontAttr.bold),this.fontBold.active(r)}},{key:"setFontItalicStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.screen,n=t.cells,o=e.findByClass(ol).selectorAttr,r=!1;o&&(r=n.getCellOrNew(o.rect.sri,o.rect.sci).fontAttr.italic),this.fontItalic.active(r)}},{key:"setUnderLineStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.screen,n=t.cells,o=e.findByClass(ol).selectorAttr,r=!1;o&&(r=n.getCellOrNew(o.rect.sri,o.rect.sci).fontAttr.underline),this.underLine.active(r)}},{key:"setFontStrikeStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.screen,n=t.cells,o=e.findByClass(ol).selectorAttr,r=!1;o&&(r=n.getCellOrNew(o.rect.sri,o.rect.sci).fontAttr.strikethrough),this.fontStrike.active(r)}},{key:"setFontColorStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.screen,n=t.cells,o=e.findByClass(ol).selectorAttr,r="rgb(0, 0, 0)";o&&(r=n.getCellOrNew(o.rect.sri,o.rect.sci).fontAttr.color),this.fontColor.setColor(r),this.fontColor.fontColorContextMenu.setActiveByColor(r)}},{key:"setFillColorStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.screen,n=t.cells,o=e.findByClass(ol).selectorAttr,r="rgb(255, 255, 255)";if(o){var i=n.getCellOrNew(o.rect.sri,o.rect.sci);i.background&&(r=i.background)}this.fillColor.setColor(r),this.fillColor.fillColorContextMenu.setActiveByColor(r)}},{key:"setHorizontalAlignStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.screen,n=t.cells,o=e.findByClass(ol).selectorAttr,r=new Z("align-left");if(o)switch(n.getCellOrNew(o.rect.sri,o.rect.sci).fontAttr.align){case Fc.left:r=new Z("align-left");break;case Fc.center:r=new Z("align-center");break;case Fc.right:r=new Z("align-right")}this.horizontalAlign.setIcon(r)}},{key:"setVerticalAlignStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.screen,n=t.cells,o=e.findByClass(ol).selectorAttr,r=new Z("align-middle");if(o)switch(n.getCellOrNew(o.rect.sri,o.rect.sci).fontAttr.verticalAlign){case Gc.top:r=new Z("align-top");break;case Gc.center:r=new Z("align-middle");break;case Gc.bottom:r=new Z("align-bottom")}this.verticalAlign.setIcon(r)}},{key:"setTextWrappingStatus",value:function(){var t=this.workTop.work.body.sheetView.getActiveSheet().table,e=t.screen,n=t.cells,o=e.findByClass(ol).selectorAttr,r=new Z("text-wrap");if(o)switch(n.getCellOrNew(o.rect.sri,o.rect.sci).fontAttr.textWrap){case Xc.TRUNCATE:r=new Z("truncate");break;case Xc.WORD_WRAP:r=new Z("text-wrap");break;case Xc.OVER_FLOW:default:r=new Z("overflow")}this.textWrapping.setIcon(r)}},{key:"setStatus",value:function(){this.setUndoStatus(),this.setRedoStatus(),this.setPaintFormatStatus(),this.setFormatStatus(),this.setFontStatus(),this.setFontSizeStatus(),this.setFontBoldStatus(),this.setFontItalicStatus(),this.setUnderLineStatus(),this.setFontStrikeStatus(),this.setFontColorStatus(),this.setFillColorStatus(),this.setHorizontalAlignStatus(),this.setVerticalAlignStatus(),this.setTextWrappingStatus()}}])&&fl(n.prototype,r),i&&fl(n,i),e}(R);function ml(t){return(ml="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ol(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function El(t,e){return!e||"object"!==ml(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Sl(t){return(Sl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _l(t,e){return(_l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xl=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=El(this,Sl(e).call(this,"".concat(o,"-option-item ").concat(t)))).title="",n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_l(t,e)}(e,t),n=e,(r=[{key:"setTitle",value:function(t){this.title=t,this.text(this.title)}}])&&Ol(n.prototype,r),i&&Ol(n,i),e}(R);function Tl(t){return(Tl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kl(t,e){return!e||"object"!==Tl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pl(t){return(Pl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cl(t,e){return(Cl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Al=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=kl(this,Pl(e).call(this,"".concat(o,"-tools-file")))).setTitle(""),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cl(t,e)}(e,t),e}(xl);function jl(t){return(jl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rl(t,e){return!e||"object"!==jl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ll(t){return(Ll=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wl(t,e){return(Wl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Il=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Rl(this,Ll(e).call(this,"".concat(o,"-tools-format")))).setTitle(""),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wl(t,e)}(e,t),e}(xl);function Ml(t){return(Ml="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hl(t,e){return!e||"object"!==Ml(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dl(t){return(Dl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nl(t,e){return(Nl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Bl=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Hl(this,Dl(e).call(this,"".concat(o,"-tools-insert")))).setTitle(""),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nl(t,e)}(e,t),e}(xl);function Vl(t){return(Vl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yl(t,e){return!e||"object"!==Vl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function zl(t){return(zl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ul(t,e){return(Ul=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Fl=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Yl(this,zl(e).call(this,"".concat(o,"-tools-look")))).setTitle(""),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ul(t,e)}(e,t),e}(xl);function Gl(t){return(Gl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xl(t,e){return!e||"object"!==Gl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Kl(t){return(Kl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ql(t,e){return(ql=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zl=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Xl(this,Kl(e).call(this,"".concat(o,"-tools-update")))).setTitle(""),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ql(t,e)}(e,t),e}(xl);function $l(t){return($l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jl(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ql(t,e){return!e||"object"!==$l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function tu(t){return(tu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function eu(t,e){return(eu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var nu=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Ql(this,tu(e).call(this,"".concat(o,"-option")))).title="",t.logoEle=T("div","".concat(o,"-option-logo")),t.titleEle=T("div","".concat(o,"-option-title")),t.optionsEle=T("div","".concat(o,"-option-box")),t.leftEle=T("div","".concat(o,"-option-left")),t.rightEle=T("div","".concat(o,"-option-right")),t.leftEle.children(t.logoEle),t.rightEle.children(t.titleEle,t.optionsEle),t.children(t.leftEle),t.children(t.rightEle),t.setTitle(t.title),t.file=new Al,t.format=new Il,t.insert=new Bl,t.look=new Fl,t.update=new Zl,t.optionsEle.children(t.file),t.optionsEle.children(t.format),t.optionsEle.children(t.insert),t.optionsEle.children(t.look),t.optionsEle.children(t.update),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&eu(t,e)}(e,t),n=e,(r=[{key:"setTitle",value:function(t){this.title=t,this.titleEle.text(t)}}])&&Jl(n.prototype,r),i&&Jl(n,i),e}(R);function ou(t){return(ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ru(t){return(ru=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function iu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cu(t,e){return(cu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var su=function(t){function e(t){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(i=ru(e).call(this,"".concat(o,"-work-top")))||"object"!==ou(i)&&"function"!=typeof i?iu(r):i).work=t,n.toolsMenu=new wl(iu(n)),n.option=new nu(iu(n)),n.children(n.option),n.children(n.toolsMenu),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cu(t,e)}(e,t),e}(R);function au(t){return(au="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lu(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function uu(t,e){return!e||"object"!==au(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fu(t){return(fu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hu(t,e){return(hu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pu=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=uu(this,fu(e).call(this,"div","".concat(o,"-vertical-center-element")))).options=E.mergeDeep({style:{}},n),r.element=t,r.init(),r}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hu(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){this.css(this.options.style),this.children(this.element)}}])&&lu(n.prototype,r),i&&lu(n,i),e}(x);function yu(t){return(yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bu(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function du(t,e){return!e||"object"!==yu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vu(t){return(vu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gu(t,e){return(gu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wu=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=du(this,vu(e).call(this,"div","".concat(o,"-vertical-center")))).options=E.mergeDeep({centerElements:[],style:{}},t),n.init(),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gu(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){this.css(this.options.style);var t=!0,e=!1,n=void 0;try{for(var o,r=this.options.centerElements[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var i=o.value;this.children(i)}}catch(t){e=!0,n=t}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}}}])&&bu(n.prototype,r),i&&bu(n,i),e}(x);function mu(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Ou=function(){function t(e){var n=e.data,o=void 0===n?[]:n,r=e.len,i=void 0===r?10:r,c=e.height;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._=[],this.minHeight=5,this.height=E.minIf(c,this.minHeight),this.len=i,this.cacheTotalHeight=-1,this.setData(o)}var e,n,o;return e=t,(n=[{key:"get",value:function(t){return this._[t]}},{key:"getOrNew",value:function(t){return this._[t]=this._[t]||{},this._[t]}},{key:"getHeight",value:function(t){var e=this.get(t);return e&&e.height?e.height:this.height}},{key:"setHeight",value:function(t,e){this.getOrNew(t).height=E.minIf(e,this.minHeight),this.cacheTotalHeight=-1}},{key:"eachHeight",value:function(t,e,n){for(var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=o,i=t;i<=e;i+=1){var c=this.getHeight(i);n(i,c,r),r+=c}}},{key:"sectionSumHeight",value:function(t,e){var n=this;return E.rangeSum(t,e+1,(function(t){return n.getHeight(t)}))}},{key:"rectRangeSumHeight",value:function(t){return this.sectionSumHeight(t.sri,t.eri)}},{key:"totalHeight",value:function(){var t=this;return-1===this.cacheTotalHeight&&(this.cacheTotalHeight=E.rangeSum(0,this.len,(function(e){return t.getHeight(e)}))),this.cacheTotalHeight}},{key:"getData",value:function(){return this._}},{key:"setData",value:function(t){this._=t}}])&&mu(e.prototype,n),o&&mu(e,o),t}();function Eu(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Su=function(){function t(e){var n=e.data,o=void 0===n?[]:n,r=e.len,i=void 0===r?10:r,c=e.width;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._=[],this.minWidth=5,this.width=E.minIf(c,this.minWidth),this.len=i,this.cacheTotalWidth=-1,this.setData(o)}var e,n,o;return e=t,(n=[{key:"get",value:function(t){return this._[t]}},{key:"getOrNew",value:function(t){return this._[t]=this._[t]||{},this._[t]}},{key:"getWidth",value:function(t){var e=this._[t];return e&&e.width?e.width:this.width}},{key:"setWidth",value:function(t,e){this.getOrNew(t).width=E.minIf(e,this.minWidth),this.cacheTotalWidth=-1}},{key:"eachWidth",value:function(t,e,n){for(var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=o,i=t;i<=e;i+=1){var c=this.getWidth(i);n(i,c,r),r+=c}}},{key:"sectionSumWidth",value:function(t,e){var n=this;return E.rangeSum(t,e+1,(function(t){return n.getWidth(t)}))}},{key:"rectRangeSumWidth",value:function(t){return this.sectionSumWidth(t.sci,t.eci)}},{key:"totalWidth",value:function(){var t=this;return-1===this.cacheTotalWidth&&(this.cacheTotalWidth=E.rangeSum(0,this.len,(function(e){return t.getWidth(e)}))),this.cacheTotalWidth}},{key:"getData",value:function(){return this._}},{key:"setData",value:function(t){this._=t}}])&&Eu(e.prototype,n),o&&Eu(e,o),t}();var _u=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e,this.x=0,this.y=0,this.ri=e.fixed.fxTop+1,this.ci=e.fixed.fxLeft+1};function xu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Tu=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{fxTop:-1,fxLeft:-1,fxRight:-1};xu(this,t),this.fxTop=e.fxTop,this.fxLeft=e.fxLeft,this.fxRight=e.fxRight};function ku(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Pu=function(){function t(e){var n=e.data,o=void 0===n?[]:n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._=[],this.setData(o)}var e,n,o;return e=t,(n=[{key:"forEach",value:function(t){this._.forEach(t)}},{key:"deleteWithin",value:function(t){this._=this._.filter((function(e){return!e.within(t)}))}},{key:"getFirstIncludes",value:function(t,e){for(var n=0;n<this._.length;n+=1){var o=this._[n];if(o.includes(t,e))return o}return null}},{key:"filterIntersects",value:function(e){return new t(this._.filter((function(t){return t.intersects(e)})))}},{key:"intersects",value:function(t){for(var e=0;e<this._.length;e+=1)if(this._[e].intersects(t))return!0;return!1}},{key:"deleteIntersects",value:function(t){for(var e=0;e<this._.length;e+=1)this._[e].intersects(t)&&this._.splice(e,1)}},{key:"union",value:function(t){for(var e=this,n=t,o=[],r=function(t){var r=e._[t];if(o.find((function(t){return t===r})))return i=t,"continue";r.intersects(n)&&(o.push(r),n=r.union(n),t=-1),i=t},i=0;i<this._.length;i+=1)r(i);return n}},{key:"add",value:function(t){this.deleteWithin(t),this._.push(t)}},{key:"move",value:function(t,e,n){this._.forEach((function(o){var r=o;r.within(t)&&(r.eri+=e,r.sri+=e,r.sci+=n,r.eci+=n)}))}},{key:"shift",value:function(t,e,n,o){this._.forEach((function(r){var i=r.sri,c=r.sci,s=r.eri,a=r.eci,l=r;"row"===t?i>=e?(l.sri+=n,l.eri+=n):i<e&&e<=s&&(l.eri+=n,o(i,c,n,0)):"column"===t&&(c>=e?(l.sci+=n,l.eci+=n):c<e&&e<=a&&(l.eci+=n,o(i,c,0,n)))}))}},{key:"setData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this._=t.map((function(t){return Ba.valueOf(t)})),this}},{key:"getData",value:function(){return this._.map((function(t){return t.toString()}))}}])&&ku(e.prototype,n),o&&ku(e,o),t}();function Cu(t){return(Cu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Au(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ju(t,e){return!e||"object"!==Cu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ru(t){return(Ru=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Lu(t,e){return(Lu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Wu=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ju(this,Ru(e).call(this,"".concat(o,"-screen-element ").concat(t)))).widgets=[],n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lu(t,e)}(e,t),n=e,(r=[{key:"addWidget",value:function(t){this.widgets.push(t),this.children(t)}}])&&Au(n.prototype,r),i&&Au(n,i),e}(R);function Iu(t){return(Iu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mu(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Hu(t,e){return!e||"object"!==Iu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Du(t){return(Du=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nu(t,e){return(Nu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Bu=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Hu(this,Du(e).call(this,"".concat(o,"-screen")))).table=t,n.lt=new Wu("".concat(o,"-screen-element-lt")),n.t=new Wu("".concat(o,"-screen-element-t")),n.l=new Wu("".concat(o,"-screen-element-l")),n.br=new Wu("".concat(o,"-screen-element-br")),n.focusWidget=null,n.children(n.lt,n.t,n.l,n.br),n.widgets=[],n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nu(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){this.setDivideLayer(),this.bind()}},{key:"bind",value:function(){var t=this,e=this.table;jt.bind(window,Ct.SYSTEM_EVENT_TYPE.RESIZE,(function(){t.setDivideLayer()})),jt.bind(e,Ct.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(e){t.setDivideLayer(),e.stopPropagation()})),jt.bind(e,Ct.TABLE_EVENT_TYPE.CHANGE_WIDTH,(function(e){t.setDivideLayer(),e.stopPropagation()}))}},{key:"addWidget",value:function(t){this.widgets.push(t),this.lt.addWidget(t.getLT(this)),this.t.addWidget(t.getT(this)),this.l.addWidget(t.getL(this)),this.br.addWidget(t.getBR(this))}},{key:"setDivideLayer",value:function(){var t=this.table,e=t.settings,n=t.grid,o=e.index,r=t.getFixedWidth(),i=t.getFixedHeight(),c=o.width+r,s=o.height+i;this.br.offset({left:c,top:s}),r>0&&i>0?(this.lt.offset({left:o.width,top:o.height,width:r,height:i}).show(),this.lt.css("border-width","".concat(n.lineWidth(),"px"))):this.lt.hide(),r>0?(this.l.offset({left:o.width,top:s,width:r}).show(),this.l.css("border-width","".concat(n.lineWidth(),"px"))):this.l.hide(),i>0?(this.t.offset({left:c,top:o.height,height:i}).show(),this.t.css("border-width","".concat(n.lineWidth(),"px"))):this.t.hide()}},{key:"findByClass",value:function(t){var e=null;return this.widgets.forEach((function(n){return!(n instanceof t&&(e=n,1))})),e}}])&&Mu(n.prototype,r),i&&Mu(n,i),e}(R);function Vu(t){return(Vu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yu(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function zu(t,e){return!e||"object"!==Vu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Uu(t){return(Uu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fu(t,e){return(Fu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Gu=function(t){function e(t){var n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{width:5};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=zu(this,Uu(e).call(this,"".concat(o,"-re-sizer-horizontal")))).table=t,r.options=i,r.width=i.width,r.hoverEl=T("div","".concat(o,"-re-sizer-hover")),r.lineEl=T("div","".concat(o,"-re-sizer-line")),(n=r).children.apply(n,[r.hoverEl,r.lineEl]),r.bind(),r}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fu(t,e)}(e,t),n=e,(r=[{key:"getEventLeft",value:function(t){var e=this.table,n=e.settings,o=e.cols,r=e.fixed,i=e.scroll,c=n.index,s=e.computeEventXy(t),a=s.x,l=s.y,u=e.getRiCiByXy(a,l),f=u.ri,h=u.ci;if(-1!==f)return{left:-1,x:a,y:l,ri:f,ci:h};var p=c.width+o.sectionSumWidth(0,h);return h>r.fxLeft&&(p-=i.x),{left:p,x:a,y:l,ri:f,ci:h}}},{key:"bind",value:function(){var t=this,e=this.table,n=e.settings,o=e.cols,r=e.mousePointType,i=n.index,c=!1;jt.bind(this,Ct.SYSTEM_EVENT_TYPE.MOUSE_MOVE,(function(t){r.set("col-resize","XReSizer"),t.stopPropagation(),t.preventDefault()})),jt.bind(this,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(n){c=!0,r.on(["XReSizer"]),r.set("col-resize","XReSizer");var i=t.getEventLeft(n),s=i.left,a=i.ci,l=s-o.getWidth(a)+o.minWidth,u=e.computeEventXy(n).x;jt.mouseMoveUp(document,(function(n){var o=e.computeEventXy(n);u=o.x,u-=t.width/2,u=Ac(E.minIf(u,l)),t.css("left","".concat(u,"px")),t.lineEl.css("height","".concat(e.visualHeight(),"px")),t.lineEl.show(),n.stopPropagation(),n.preventDefault()}),(function(n){c=!1,r.off(),t.lineEl.hide(),t.css("left","".concat(u,"px")),e.computeEventXy(n).y<=0&&t.hide();var i=u-(s-o.getWidth(a))+t.width;e.setWidth(a,i)})),n.stopPropagation(),n.preventDefault()})),jt.bind(e,Ct.SYSTEM_EVENT_TYPE.MOUSE_MOVE,(function(n){if(!c){var r=t.getEventLeft(n),s=r.left,a=r.ci,l=s-o.getWidth(a)+o.minWidth,u=e.visualWidth();s>u&&(s=u),-1===s||l>u||-1===a?t.hide():(t.show(),t.css("left","".concat(s-t.width,"px")),t.hoverEl.css("width","".concat(t.width,"px")),t.hoverEl.css("height","".concat(i.height,"px")))}})),jt.bind(e,Ct.SYSTEM_EVENT_TYPE.MOUSE_LEAVE,(function(){c||t.hide()}))}}])&&Yu(n.prototype,r),i&&Yu(n,i),e}(R);function Xu(t){return(Xu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ku(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function qu(t,e){return!e||"object"!==Xu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zu(t){return(Zu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $u(t,e){return($u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ju=function(t){function e(t){var n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{height:5};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=qu(this,Zu(e).call(this,"".concat(o,"-re-sizer-vertical")))).table=t,r.options=i,r.height=i.height,r.hoverEl=T("div","".concat(o,"-re-sizer-hover")),r.lineEl=T("div","".concat(o,"-re-sizer-line")),(n=r).children.apply(n,[r.hoverEl,r.lineEl]),r.bind(),r}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$u(t,e)}(e,t),n=e,(r=[{key:"getEventTop",value:function(t){var e=this.table,n=e.settings,o=e.rows,r=e.fixed,i=e.scroll,c=n.index,s=e.computeEventXy(t),a=s.x,l=s.y,u=e.getRiCiByXy(a,l),f=u.ri,h=u.ci;if(-1!==h)return{top:-1,x:a,y:l,ri:f,ci:h};var p=c.height+o.sectionSumHeight(0,f);return f>r.fxTop&&(p-=i.y),{top:p,x:a,y:l,ri:f,ci:h}}},{key:"bind",value:function(){var t=this,e=this.table,n=e.settings,o=e.rows,r=e.mousePointType,i=n.index,c=!1;jt.bind(this,Ct.SYSTEM_EVENT_TYPE.MOUSE_MOVE,(function(t){r.set("row-resize","YReSizer"),t.stopPropagation(),t.preventDefault()})),jt.bind(this,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(n){c=!0,r.on(["YReSizer"]),r.set("row-resize","YReSizer");var i=t.getEventTop(n),s=i.top,a=i.ri,l=s-o.getHeight(a)+o.minHeight,u=e.computeEventXy(n).y;jt.mouseMoveUp(document,(function(n){var o=e.computeEventXy(n);u=o.y,u-=t.height/2,u=Ac(E.minIf(u,l)),t.css("top","".concat(u,"px")),t.lineEl.css("width","".concat(e.visualWidth(),"px")),t.lineEl.show(),n.stopPropagation(),n.preventDefault()}),(function(n){c=!1,r.off(),t.lineEl.hide(),t.css("top","".concat(u,"px")),e.computeEventXy(n).x<=0&&t.hide();var i=u-(s-o.getHeight(a))+t.height;e.setHeight(a,i)})),n.stopPropagation(),n.preventDefault()})),jt.bind(e,Ct.SYSTEM_EVENT_TYPE.MOUSE_MOVE,(function(n){if(!c){var r=t.getEventTop(n),s=r.top,a=r.ri,l=s-o.getHeight(a)+o.minHeight,u=e.visualHeight();s>u&&(s=u),-1===s||l>u||-1===a?t.hide():(t.show(),t.css("top","".concat(s-t.height,"px")),t.hoverEl.css("width","".concat(i.width,"px")),t.hoverEl.css("height","".concat(t.height,"px")))}})),jt.bind(e,Ct.SYSTEM_EVENT_TYPE.MOUSE_LEAVE,(function(){c||t.hide()}))}}])&&Ku(n.prototype,r),i&&Ku(n,i),e}(R),Qu=n(0),tf=n.n(Qu),ef=n(1),nf=n.n(ef),of=n(2),rf=n.n(of);function cf(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var sf=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e,this.switch=!1,this.ignoreNames=[]}var e,n,o;return e=t,(n=[{key:"on",value:function(t){this.switch=!0,this.ignoreNames=this.ignoreNames.concat(t)}},{key:"set",value:function(t,e){if(!this.switch||-1!==this.ignoreNames.indexOf(e)){var n=this.table;switch(t){case"cell":n.css("cursor","url(".concat(tf.a,") 7.5 7.5,auto"));break;case"s-resize":n.css("cursor","url(".concat(nf.a,") 2.5 7.5,auto"));break;case"e-resize":n.css("cursor","url(".concat(rf.a,") 7.5 2.5,auto"));break;default:n.css("cursor",t)}}}},{key:"off",value:function(){this.switch=!1,this.ignoreNames=[]}}])&&cf(e.prototype,n),o&&cf(e,o),t}();function af(t){return(af="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lf(t,e){return!e||"object"!==af(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function uf(t){return(uf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ff(t,e){return(ff=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var hf=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=lf(this,uf(e).call(this,"".concat(o,"-autofill")))).areaEl=T("div","".concat(o,"-autofill-area")),t.children(t.areaEl),t.hide(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ff(t,e)}(e,t),e}(R);function pf(t){return(pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yf(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var c,s=t[Symbol.iterator]();!(o=(c=s.next()).done)&&(n.push(c.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function bf(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function df(t,e){return!e||"object"!==pf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vf(t){return(vf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gf(t,e){return(gf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wf=function(t){function e(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=df(this,vf(e).call(this,t))).options=E.mergeDeep({mergeForceSplit:!1,onBeforeAutoFill:function(){},onAfterAutoFill:function(){}},o),n.lt=new hf,n.t=new hf,n.l=new hf,n.br=new hf,n.autoFillAttr=null,n.screenSelector=t.findByClass(ol),n.bind(),n}var n,o,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gf(t,e)}(e,t),n=e,(o=[{key:"bind",value:function(){var t=this,e=this.screen,n=this.screenSelector,o=e.table,r=o.mousePointType;jt.bind([n.lt.cornerEl,n.t.cornerEl,n.l.cornerEl,n.br.cornerEl],Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(e){r.on(["autoFill"]),r.set("crosshair","autoFill"),jt.mouseMoveUp(document,(function(e){var n=o.computeEventXy(e),r=n.x,i=n.y,c=t.getMoveAutoFillAttr(r,i);c?t.setOffset(c):(t.lt.hide(),t.t.hide(),t.l.hide(),t.br.hide()),t.autoFillAttr=c,e.stopPropagation(),e.preventDefault()}),(function(){r.off(),t.lt.hide(),t.t.hide(),t.l.hide(),t.br.hide(),t.autoFillAttr&&(t.autoFillTo(),o.render())})),e.stopPropagation(),e.preventDefault()})),jt.bind([n.lt.cornerEl,n.t.cornerEl,n.l.cornerEl,n.br.cornerEl],Ct.SYSTEM_EVENT_TYPE.MOUSE_MOVE,(function(t){r.set("crosshair","autoFill"),t.stopPropagation(),t.preventDefault()}))}},{key:"setLTOffset",value:function(t){var e=this.screen.table,n=e.frozenLeftTop,o=e.cols,r=e.rows,i=n.getViewRange(),c=t.rect,s=new Ba(-1,-1,-1,-1),a=c.coincide(i);if(s.equals(a))this.lt.hide();else{var l=o.sectionSumWidth(a.sci,a.eci),u=r.sectionSumHeight(a.sri,a.eri),f=r.sectionSumHeight(i.sri,a.sri-1),h=o.sectionSumWidth(i.sci,a.sci-1);c.eci>i.eci?this.lt.areaEl.css("border-right","none"):this.lt.areaEl.cssRemoveKeys("border-right"),c.eri>i.eri?this.lt.areaEl.css("border-bottom","none"):this.lt.areaEl.cssRemoveKeys("border-bottom"),this.lt.offset({width:l,height:u,left:h,top:f}).show()}}},{key:"setTOffset",value:function(t){var e=this.screen.table,n=e.fixedTop,o=e.cols,r=e.rows,i=n.getViewRange(),c=t.rect,s=new Ba(-1,-1,-1,-1),a=c.coincide(i);if(s.equals(a))this.t.hide();else{var l=o.sectionSumWidth(a.sci,a.eci),u=r.sectionSumHeight(a.sri,a.eri),f=r.sectionSumHeight(i.sri,a.sri-1),h=o.sectionSumWidth(i.sci,a.sci-1);c.sci<i.sci?this.t.areaEl.css("border-left","none"):this.t.areaEl.cssRemoveKeys("border-left"),c.eri>i.eri?this.t.areaEl.css("border-bottom","none"):this.t.areaEl.cssRemoveKeys("border-bottom"),c.eci>i.eci?this.t.areaEl.css("border-right","none"):this.t.areaEl.cssRemoveKeys("border-right"),this.t.offset({width:l,height:u,left:h,top:f}).show()}}},{key:"setLOffset",value:function(t){var e=this.screen.table,n=e.fixedLeft,o=e.cols,r=e.rows,i=n.getViewRange(),c=t.rect,s=new Ba(-1,-1,-1,-1),a=c.coincide(i);if(s.equals(a))this.l.hide();else{var l=o.sectionSumWidth(a.sci,a.eci),u=r.sectionSumHeight(a.sri,a.eri),f=r.sectionSumHeight(i.sri,a.sri-1),h=o.sectionSumWidth(i.sci,a.sci-1);c.sri<i.sri?this.l.areaEl.css("border-top","none"):this.l.areaEl.cssRemoveKeys("border-top"),c.eci>i.eci?this.l.areaEl.css("border-right","none"):this.l.areaEl.cssRemoveKeys("border-right"),c.eri>i.eri?this.l.areaEl.css("border-bottom","none"):this.l.areaEl.cssRemoveKeys("border-bottom"),this.l.offset({width:l,height:u,left:h,top:f}).show()}}},{key:"setBROffset",value:function(t){var e=this.screen.table,n=e.cols,o=e.rows,r=e.getViewRange(),i=t.rect,c=new Ba(-1,-1,-1,-1),s=i.coincide(r);if(c.equals(s))this.br.hide();else{var a=n.sectionSumWidth(s.sci,s.eci),l=o.sectionSumHeight(s.sri,s.eri),u=o.sectionSumHeight(r.sri,s.sri-1),f=n.sectionSumWidth(r.sci,s.sci-1);i.sci<r.sci?this.br.areaEl.css("border-left","none"):this.br.areaEl.cssRemoveKeys("border-left"),i.sri<r.sri?this.br.areaEl.css("border-top","none"):this.br.areaEl.cssRemoveKeys("border-top"),i.eri>r.eri?this.br.areaEl.css("border-bottom","none"):this.br.areaEl.cssRemoveKeys("border-bottom"),i.eci>r.eci?this.br.areaEl.css("border-right","none"):this.br.areaEl.cssRemoveKeys("border-right"),this.br.offset({width:a,height:l,left:f,top:u}).show()}}},{key:"setOffset",value:function(t){this.setLTOffset(t),this.setTOffset(t),this.setLOffset(t),this.setBROffset(t)}},{key:"getMoveAutoFillAttr",value:function(t,e){var n=this.screen,o=this.screenSelector,r=n.table,i=o.selectorAttr,c=r.cols,s=r.rows,a=r.merges,l=i.rect,u=i.edge,f=i.edgeType,h=u||a.intersects(l),p=yf(l.size(),2),y=p[0],b=p[1],d=r.getRiCiByXy(t,e),v=d.ri,g=d.ci;v<0?v=0:v>s.len&&(v=s.len-1),g<0?g=0:g>c.len&&(g=c.len-1);var w=l.sri,m=l.sci,O=l.eri,E=l.eci;"left"===f&&(E=c.len-1),"top"===f&&(O=s.len-1);var S=null,_="un";if(v<w||v>O){if(v<w)if(_="top",h){var x=w-y;if(x>=0){for(var T=w-1-v,k=1;k<=T;k+=1)k%y==0&&x-y>=0&&(x-=y);S=new Ba(x,m,w-1,E)}}else S=new Ba(v,m,w-1,E);if(v>O)if(_="bottom",h){var P=O+y;if(P<=s.len-1){for(var C=v-(O+1),A=1;A<=C;A+=1)A%y==0&&P+y<=s.len-1&&(P+=y);S=new Ba(O+1,m,P,E)}}else S=new Ba(O+1,m,v,E)}else if(g<m||g>E){if(g<m)if(_="left",h){var j=m-b;if(j>=0){for(var R=m-1-g,L=1;L<=R;L+=1)L%b==0&&j-b>=0&&(j-=b);S=new Ba(w,j,O,m-1)}}else S=new Ba(w,g,O,m-1);if(g>E)if(_="right",h){var W=E+b;if(W<=c.len-1){for(var I=g-(E+1),M=1;M<=I;M+=1)M%b==0&&W+b<=c.len-1&&(W+=b);S=new Ba(w,E+1,O,W)}}else S=new Ba(w,E+1,O,g)}if(null!==S){var H=c.sectionSumWidth(S.sci,S.eci),D=s.sectionSumHeight(S.sri,S.eri);return S.w=H,S.h=D,{rect:S,direction:_}}return null}},{key:"mergeCellForceSplit",value:function(){for(var t=this.screen,e=this.screenSelector,n=t.table.merges,o=this.autoFillAttr,r=e.selectorAttr,i=o.rect,c=r.rect,s=c.sri,a=i.sri;a<=i.eri;){for(var l=c.sci,u=i.sci;u<=i.eci;){var f=new Ba(a,u,a,u),h=n.getFirstIncludes(a,u);h&&c.intersects(h)||n.deleteIntersects(f),u+=1,(l+=1)>c.eci&&(l=c.sci)}a+=1,(s+=1)>c.eri&&(s=c.sri)}}},{key:"copyContent",value:function(){for(var t=0,e=this.screen,n=this.screenSelector,o=e.table.cells,r=this.autoFillAttr,i=n.selectorAttr,c=r.rect,s=i.rect,a=s.sri,l=c.sri;l<=c.eri;){for(var u=s.sci,f=c.sci;f<=c.eci;){var h=o.getCell(a,u),p=o.getCellOrNew(l,f);h&&(E.mergeDeep(p,h),E.isBlank(h.text)||(t+=1)),f+=1,(u+=1)>s.eci&&(u=s.sci)}l+=1,(a+=1)>s.eri&&(a=s.sri)}return t}},{key:"copyMerge",value:function(){var t=this.screen,e=this.screenSelector,n=t.table.merges,o=this.autoFillAttr,r=e.selectorAttr,i=o.rect,c=o.direction,s=r.rect,a=r.edge,l=s.sri,u=i.sri;if(!a||"top"!==c&&"left"!==c)for(;u<=i.eri;){for(var f=s.sci,h=i.sci;h<=i.eci;){var p=n.getFirstIncludes(l,f);if(p&&p.sri===l&&p.sci===f){var y=yf(p.size(),2),b=y[0],d=y[1],v=new Ba(u,h,u+(b-=1),h+(d-=1));n.intersects(v)||n.add(v)}h+=1,(f+=1)>s.eci&&(f=s.sci)}u+=1,(l+=1)>s.eri&&(l=s.sri)}}},{key:"autoFillTo",value:function(){var t=this.screen,e=this.options.mergeForceSplit,n=t.table.merges,o=this.autoFillAttr.rect,r=n.getFirstIncludes(o.sri,o.sci);if(r&&r.equals(o)){this.options.onBeforeAutoFill(),this.mergeCellForceSplit();var i=this.copyContent();this.copyMerge(),this.options.onAfterAutoFill(i)}else{if(n.intersects(o)&&!1===e)return void alert("");this.options.onBeforeAutoFill(),this.mergeCellForceSplit();var c=this.copyContent();this.copyMerge(),this.options.onAfterAutoFill(c)}}}])&&bf(n.prototype,o),r&&bf(n,r),e}(Ha);function mf(t){return(mf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Of(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ef(t,e){return!e||"object"!==mf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Sf(t){return(Sf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _f(t,e){return(_f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xf=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ef(this,Sf(e).call(this,"".concat(o,"-table-x-height-light")))).table=t,n.hide(),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_f(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){var t=this.table.settings.index;this.css("height","".concat(t.height,"px")),this.bind()}},{key:"disjoint",value:function(t,e){return t.sci>e.eci||e.sci>t.eci}},{key:"coincide",value:function(t,e){return this.disjoint(t,e)?new Ba(0,-1,0,-1):new Ba(0,e.sci>t.sci?e.sci:t.sci,0,e.eci<t.eci?e.eci:t.eci)}},{key:"offsetHeightLight",value:function(t,e){var n=this.table,o=n.settings.index,r=new Ba(0,-1,0,-1);switch(this.hide(),e){case"lt":var i=t.rect,c=n.frozenLeftTop,s=n.cols,a=c.getViewRange(),l=this.coincide(i,a);if(!r.equals(l)){var u=s.sectionSumWidth(l.sci,l.eci),f=s.sectionSumWidth(a.sci,l.sci-1)+o.width;"".concat(u,"px")!==this.css("width")&&this.css("width","".concat(u,"px")),"".concat(f,"px")!==this.css("left")&&this.css("left","".concat(f,"px")),this.show()}break;case"t":var h=t.rect,p=n.fixedTop,y=n.cols,b=p.getViewRange(),d=this.coincide(h,b);if(!r.equals(d)){var v=y.sectionSumWidth(d.sci,d.eci),g=y.sectionSumWidth(b.sci,d.sci-1)+n.getFixedWidth()+o.width;"".concat(v,"px")!==this.css("width")&&this.css("width","".concat(v,"px")),"".concat(g,"px")!==this.css("left")&&this.css("left","".concat(g,"px")),this.show()}break;case"br":var w=t.rect,m=n.cols,O=n.getViewRange(),E=this.coincide(w,O);if(!r.equals(E)){var S=m.sectionSumWidth(E.sci,E.eci),_=m.sectionSumWidth(O.sci,E.sci-1)+n.getFixedWidth()+o.width;"".concat(S,"px")!==this.css("width")&&this.css("width","".concat(S,"px")),"".concat(_,"px")!==this.css("left")&&this.css("left","".concat(_,"px")),this.show()}break;case"l":var x=t.rect,T=n.fixedLeft,k=n.cols,P=T.getViewRange(),C=this.coincide(x,P);if(!r.equals(C)){var A=k.sectionSumWidth(C.sci,C.eci),j=k.sectionSumWidth(P.sci,C.sci-1)+o.width;"".concat(A,"px")!==this.css("width")&&this.css("width","".concat(A,"px")),"".concat(j,"px")!==this.css("left")&&this.css("left","".concat(j,"px")),this.show()}break;case"ltt":var R=t.rect,L=n.frozenLeftTop,W=n.fixedTop,I=n.cols,M=L.getViewRange(),H=W.getViewRange(),D=this.coincide(R,M),N=this.coincide(R,H),B=0,V=I.sectionSumWidth(M.sci,D.sci-1)+o.width;r.equals(D)||(B+=I.sectionSumWidth(D.sci,D.eci)),r.equals(N)||(B+=I.sectionSumWidth(N.sci,N.eci)),"".concat(B,"px")!==this.css("width")&&this.css("width","".concat(B,"px")),"".concat(V,"px")!==this.css("left")&&this.css("left","".concat(V,"px")),this.show();break;case"ltl":var Y=t.rect,z=n.frozenLeftTop,U=n.cols,F=z.getViewRange(),G=this.coincide(Y,F);if(!r.equals(G)){var X=U.sectionSumWidth(G.sci,G.eci),K=U.sectionSumWidth(F.sci,G.sci-1)+o.width;"".concat(X,"px")!==this.css("width")&&this.css("width","".concat(X,"px")),"".concat(K,"px")!==this.css("left")&&this.css("left","".concat(K,"px")),this.show()}break;case"tbr":var q=t.rect,Z=n.fixedTop,$=n.cols,J=Z.getViewRange(),Q=this.coincide(q,J);if(!r.equals(Q)){var tt=$.sectionSumWidth(Q.sci,Q.eci),et=$.sectionSumWidth(J.sci,Q.sci-1)+n.getFixedWidth()+o.width;"".concat(tt,"px")!==this.css("width")&&this.css("width","".concat(tt,"px")),"".concat(et,"px")!==this.css("left")&&this.css("left","".concat(et,"px")),this.show()}break;case"lbr":var nt=t.rect,ot=n.fixedLeft,rt=n.cols,it=ot.getViewRange(),ct=n.getViewRange(),st=this.coincide(nt,it),at=this.coincide(nt,ct),lt=0,ut=rt.sectionSumWidth(it.sci,st.sci-1)+o.width;r.equals(st)||(lt+=rt.sectionSumWidth(st.sci,st.eci)),r.equals(at)||(lt+=rt.sectionSumWidth(at.sci,at.eci)),"".concat(lt,"px")!==this.css("width")&&this.css("width","".concat(lt,"px")),"".concat(ut,"px")!==this.css("left")&&this.css("left","".concat(ut,"px")),this.show();break;case"lttlbr":var ft=t.rect,ht=n.frozenLeftTop,pt=n.fixedTop,yt=n.cols,bt=ht.getViewRange(),dt=pt.getViewRange(),vt=this.coincide(ft,bt),gt=this.coincide(ft,dt),wt=0,mt=yt.sectionSumWidth(bt.sci,vt.sci-1)+o.width;r.equals(vt)||(wt+=yt.sectionSumWidth(vt.sci,vt.eci)),r.equals(gt)||(wt+=yt.sectionSumWidth(gt.sci,gt.eci)),"".concat(wt,"px")!==this.css("width")&&this.css("width","".concat(wt,"px")),"".concat(mt,"px")!==this.css("left")&&this.css("left","".concat(mt,"px")),this.show()}}},{key:"bind",value:function(){var t=this,e=this.table,n=e.screen.findByClass(ol);n.addChangeCb((function(){var e=n.selectorAttr;if(e){var o=n.getIntersectsArea(e);t.offsetHeightLight(e,o)}})),jt.bind(e,Ct.SYSTEM_EVENT_TYPE.SCROLL,(function(){var e=n.selectorAttr;if(e){var o=n.getIntersectsArea(e);t.offsetHeightLight(e,o)}}))}}])&&Of(n.prototype,r),i&&Of(n,i),e}(R);function Tf(t){return(Tf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kf(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Pf(t,e){return!e||"object"!==Tf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Cf(t){return(Cf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Af(t,e){return(Af=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var jf=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Pf(this,Cf(e).call(this,"".concat(o,"-table-y-height-light")))).table=t,n.hide(),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Af(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){var t=this.table.settings.index;this.css("width","".concat(t.width,"px")),this.bind()}},{key:"disjoint",value:function(t,e){return t.sri>e.eri||e.sri>t.eri}},{key:"coincide",value:function(t,e){return this.disjoint(t,e)?new Ba(-1,0,-1,0):new Ba(e.sri>t.sri?e.sri:t.sri,0,e.eri<t.eri?e.eri:t.eri,0)}},{key:"offsetHeightLight",value:function(t,e){var n=this.table,o=n.settings.index,r=new Ba(-1,0,-1,0);switch(this.hide(),e){case"lt":var i=t.rect,c=n.frozenLeftTop,s=n.rows,a=c.getViewRange(),l=this.coincide(i,a);if(!r.equals(l)){var u=s.sectionSumHeight(l.sri,l.eri),f=s.sectionSumHeight(a.sri,l.sri-1)+o.height;"".concat(u,"px")!==this.css("height")&&this.css("height","".concat(u,"px")),"".concat(f,"px")!==this.css("top")&&this.css("top","".concat(f,"px")),this.show()}break;case"t":var h=t.rect,p=n.fixedTop,y=n.rows,b=p.getViewRange(),d=this.coincide(h,b);if(!r.equals(d)){var v=y.sectionSumHeight(d.sri,d.eri),g=y.sectionSumHeight(b.sri,d.sri-1)+o.height;"".concat(v,"px")!==this.css("height")&&this.css("height","".concat(v,"px")),"".concat(g,"px")!==this.css("top")&&this.css("top","".concat(g,"px")),this.show()}break;case"l":var w=t.rect,m=n.fixedLeft,O=n.rows,E=m.getViewRange(),S=this.coincide(w,E);if(!r.equals(S)){var _=O.sectionSumHeight(S.sri,S.eri),x=O.sectionSumHeight(E.sri,S.sri-1)+n.getFixedHeight()+o.height;"".concat(_,"px")!==this.css("height")&&this.css("height","".concat(_,"px")),"".concat(x,"px")!==this.css("top")&&this.css("top","".concat(x,"px")),this.show()}break;case"br":var T=t.rect,k=n.rows,P=n.getViewRange(),C=this.coincide(T,P);if(!r.equals(C)){var A=k.sectionSumHeight(C.sri,C.eri),j=k.sectionSumHeight(P.sri,C.sri-1)+n.getFixedHeight()+o.height;"".concat(A,"px")!==this.css("height")&&this.css("height","".concat(A,"px")),"".concat(j,"px")!==this.css("top")&&this.css("top","".concat(j,"px")),this.show()}break;case"ltt":var R=t.rect,L=n.frozenLeftTop,W=n.rows,I=L.getViewRange(),M=this.coincide(R,I);if(!r.equals(M)){var H=W.sectionSumHeight(I.sri,M.sri-1)+o.height,D=W.sectionSumHeight(M.sri,M.eri);"".concat(D,"px")!==this.css("height")&&this.css("height","".concat(D,"px")),"".concat(H,"px")!==this.css("top")&&this.css("top","".concat(H,"px")),this.show()}break;case"ltl":var N=t.rect,B=n.frozenLeftTop,V=n.fixedLeft,Y=n.rows,z=B.getViewRange(),U=V.getViewRange(),F=this.coincide(N,z),G=this.coincide(N,U),X=Y.sectionSumHeight(z.sri,F.sri-1)+o.height,K=0;r.equals(F)||(K+=Y.sectionSumHeight(F.sri,F.eri)),r.equals(G)||(K+=Y.sectionSumHeight(G.sri,G.eri)),"".concat(K,"px")!==this.css("height")&&this.css("height","".concat(K,"px")),"".concat(X,"px")!==this.css("top")&&this.css("top","".concat(X,"px")),this.show();break;case"tbr":var q=t.rect,Z=n.fixedTop,$=n.rows,J=Z.getViewRange(),Q=n.getViewRange(),tt=this.coincide(q,J),et=this.coincide(q,Q),nt=$.sectionSumHeight(J.sri,tt.sri-1)+o.height,ot=0;r.equals(tt)||(ot+=$.sectionSumHeight(tt.sri,tt.eri)),r.equals(et)||(ot+=$.sectionSumHeight(et.sri,et.eri)),"".concat(ot,"px")!==this.css("height")&&this.css("height","".concat(ot,"px")),"".concat(nt,"px")!==this.css("top")&&this.css("top","".concat(nt,"px")),this.show();break;case"lbr":var rt=t.rect,it=n.fixedLeft,ct=n.rows,st=it.getViewRange(),at=this.coincide(rt,st);if(!r.equals(at)){var lt=ct.sectionSumHeight(at.sri,at.eri),ut=ct.sectionSumHeight(st.sri,at.sri-1)+n.getFixedHeight()+o.height;"".concat(lt,"px")!==this.css("height")&&this.css("height","".concat(lt,"px")),"".concat(ut,"px")!==this.css("top")&&this.css("top","".concat(ut,"px")),this.show()}break;case"lttlbr":var ft=t.rect,ht=n.frozenLeftTop,pt=n.fixedLeft,yt=n.rows,bt=ht.getViewRange(),dt=pt.getViewRange(),vt=this.coincide(ft,bt),gt=this.coincide(ft,dt),wt=0,mt=yt.sectionSumHeight(bt.sri,vt.sri-1)+o.height;r.equals(vt)||(wt+=yt.sectionSumHeight(vt.sri,vt.eri)),r.equals(gt)||(wt+=yt.sectionSumHeight(gt.sri,gt.eri)),"".concat(wt,"px")!==this.css("height")&&this.css("height","".concat(wt,"px")),"".concat(mt,"px")!==this.css("top")&&this.css("top","".concat(mt,"px")),this.show()}}},{key:"bind",value:function(){var t=this,e=this.table,n=e.screen.findByClass(ol);n.addChangeCb((function(){var e=n.selectorAttr;if(e){var o=n.getIntersectsArea(e);t.offsetHeightLight(e,o)}})),jt.bind(e,Ct.SYSTEM_EVENT_TYPE.SCROLL,(function(){var e=n.selectorAttr;if(e){var o=n.getIntersectsArea(e);t.offsetHeightLight(e,o)}}))}}])&&kf(n.prototype,r),i&&kf(n,i),e}(R);function Rf(t){return(Rf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lf(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Wf(t,e){return!e||"object"!==Rf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function If(t){return(If=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mf(t,e){return(Mf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Hf=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Wf(this,If(e).call(this,"".concat(o,"-table-edit")))).input=T("div","".concat(o,"-table-edit-input")),n.input.attr("contenteditable",!0),n.input.html("<p>&nbsp;</p>"),n.table=t,n.text="",n.select=null,n.children(n.input),n.hide(),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mf(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){this.bind()}},{key:"bind",value:function(){var t=this,e=this.table,n=e.screen.findByClass(ol);jt.bind(this,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(t){t.stopPropagation()})),jt.bind(this,Ct.SYSTEM_EVENT_TYPE.MOUSE_MOVE,(function(t){t.stopPropagation()})),jt.bind(this.input,Ct.SYSTEM_EVENT_TYPE.INPUT,(function(){var e=t.input;E.isBlank(t.input.text())&&e.html("<p>&nbsp;</p>"),t.text=e.text()})),jt.bind(e,Ct.SYSTEM_EVENT_TYPE.SCROLL,(function(){t.hideEdit()})),jt.bind(e,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){t.hideEdit()})),jt.dbClick([n.lt,n.t,n.l,n.br],(function(){t.showEdit()}))}},{key:"showEdit",value:function(){var t=this.table,e=this.input,n=t.screen,o=t.cells,r=n.findByClass(ol).selectorAttr;if(r){var i=r.rect,c=o.getCellOrNew(i.sri,i.sci);this.select=i,this.editOffset(i),this.text=c.text,E.isBlank(this.text)?e.html("<p>&nbsp;</p>"):e.text(this.text),E.keepLastIndex(this.input.el)}}},{key:"hideEdit",value:function(){var t=this.select,e=this.table,n=e.cells;if(t){var o=n.getCellOrNew(t.sri,t.sci),r=E.trim(this.text);o.text!==r&&e.setCell(t.sri,t.sci,{text:r})}this.hide()}},{key:"editOffset",value:function(){var t=this.table,e=t.screen.findByClass(ol),n=e.selectorAttr,o=n.rect,r=t.cols,i=t.rows;switch(e.getIntersectsArea(n)){case"lt":var c=t.frozenLeftTop.getViewRange(),s=o.coincide(c);if(new Ba(-1,-1,-1,-1).equals(s))return void this.hide();var a=r.sectionSumWidth(s.sci,s.eci)-8,l=i.sectionSumHeight(s.sri,s.eri)-8,u=i.sectionSumHeight(c.sri,s.sri-1),f=r.sectionSumWidth(c.sci,s.sci-1);u+=t.getIndexHeight()+4,f+=t.getIndexWidth()+4,this.offset({width:a,height:l,top:u,left:f}).show();break;case"t":var h=t.fixedTop.getViewRange(),p=o.coincide(h);if(new Ba(-1,-1,-1,-1).equals(p))return void this.hide();var y=r.sectionSumWidth(p.sci,p.eci)-8,b=i.sectionSumHeight(p.sri,p.eri)-8,d=i.sectionSumHeight(h.sri,p.sri-1),v=r.sectionSumWidth(h.sci,p.sci-1);d+=t.getIndexHeight()+4,v+=t.getFixedWidth()+t.getIndexWidth()+4,this.offset({width:y,height:b,top:d,left:v}).show();break;case"br":var g=t.getViewRange(),w=o.coincide(g);if(new Ba(-1,-1,-1,-1).equals(w))return void this.hide();var m=r.sectionSumWidth(w.sci,w.eci)-8,O=i.sectionSumHeight(w.sri,w.eri)-8,E=i.sectionSumHeight(g.sri,w.sri-1),S=r.sectionSumWidth(g.sci,w.sci-1);E+=t.getFixedHeight()+t.getIndexHeight()+4,S+=t.getFixedWidth()+t.getIndexWidth()+4,this.offset({width:m,height:O,top:E,left:S}).show();break;case"l":var _=t.fixedLeft.getViewRange(),x=o.coincide(_);if(new Ba(-1,-1,-1,-1).equals(x))return void this.hide();var T=r.sectionSumWidth(x.sci,x.eci)-8,k=i.sectionSumHeight(x.sri,x.eri)-8,P=i.sectionSumHeight(_.sri,x.sri-1),C=r.sectionSumWidth(_.sci,x.sci-1);P+=t.getFixedHeight()+t.getIndexHeight()+4,C+=t.getIndexWidth()+4,this.offset({width:T,height:k,top:P,left:C}).show();break;case"ltt":var A=t.frozenLeftTop,j=t.fixedTop,R=A.getViewRange(),L=o.coincide(R),W=j.getViewRange(),I=o.coincide(W),M=new Ba(-1,-1,-1,-1);if(M.equals(I)&&M.equals(L))return void this.hide();var H=r.sectionSumWidth(L.sci,L.eci),D=i.sectionSumHeight(L.sri,L.eri),N=i.sectionSumHeight(R.sri,L.sri-1),B=r.sectionSumWidth(R.sci,L.sci-1),V=r.sectionSumWidth(I.sci,I.eci);this.offset({width:H+V-8,height:D-8,top:N+t.getIndexHeight()+4,left:B+t.getIndexWidth()+4}).show();break;case"ltl":var Y=t.frozenLeftTop,z=t.fixedLeft,U=Y.getViewRange(),F=o.coincide(U),G=z.getViewRange(),X=o.coincide(G),K=new Ba(-1,-1,-1,-1);if(K.equals(F)&&K.equals(X))return void this.hide();var q=r.sectionSumWidth(F.sci,F.eci),Z=i.sectionSumHeight(F.sri,F.eri),$=i.sectionSumHeight(X.sri,X.eri),J=i.sectionSumHeight(U.sri,F.sri-1),Q=r.sectionSumWidth(U.sci,F.sci-1);J+=t.getIndexHeight()+4,Q+=t.getIndexWidth()+4,this.offset({width:q-8,height:Z+$-8,top:J,left:Q}).show();break;case"tbr":var tt=t.fixedTop,et=t.getViewRange(),nt=o.coincide(et),ot=tt.getViewRange(),rt=o.coincide(ot),it=new Ba(-1,-1,-1,-1);if(it.equals(nt)&&it.equals(rt))return void this.hide();var ct=r.sectionSumWidth(rt.sci,rt.eci),st=i.sectionSumHeight(rt.sri,rt.eri),at=i.sectionSumHeight(ot.sri,rt.sri-1),lt=r.sectionSumWidth(ot.sci,rt.sci-1),ut=i.sectionSumHeight(nt.sri,nt.eri);this.offset({width:ct-8,height:ut+st-8,top:at+t.getIndexHeight()+4,left:lt+t.getFixedWidth()+t.getIndexWidth()+4}).show();break;case"lbr":var ft=t.fixedLeft,ht=t.getViewRange(),pt=o.coincide(ht),yt=ft.getViewRange(),bt=o.coincide(yt),dt=new Ba(-1,-1,-1,-1);if(dt.equals(pt)&&dt.equals(bt))return void this.hide();var vt=r.sectionSumWidth(bt.sci,bt.eci),gt=i.sectionSumHeight(bt.sri,bt.eri),wt=i.sectionSumHeight(yt.sri,bt.sri-1),mt=r.sectionSumWidth(yt.sci,bt.sci-1),Ot=r.sectionSumWidth(pt.sci,pt.eci);this.offset({width:vt+Ot-8,height:gt-8,top:wt+t.getFixedHeight()+t.getIndexHeight()+4,left:mt+t.getIndexWidth()+4}).show();break;case"lttlbr":var Et=t.frozenLeftTop.getViewRange(),St=o.coincide(Et),_t=t.fixedTop.getViewRange(),xt=o.coincide(_t),Tt=t.fixedLeft.getViewRange(),kt=o.coincide(Tt),Pt=new Ba(-1,-1,-1,-1);if(Pt.equals(St)&&Pt.equals(xt)&&Pt.equals(kt))return void this.hide();var Ct=r.sectionSumWidth(St.sci,St.eci),At=i.sectionSumHeight(St.sri,St.eri),jt=r.sectionSumWidth(xt.sci,xt.eci),Rt=i.sectionSumHeight(kt.sri,kt.eri),Lt=i.sectionSumHeight(Et.sri,St.sri-1),Wt=r.sectionSumWidth(Et.sci,St.sci-1);this.offset({width:Ct+jt-8,height:At+Rt-8,top:Lt+t.getIndexHeight()+4,left:Wt+t.getIndexWidth()+4}).show()}}}])&&Lf(n.prototype,r),i&&Lf(n,i),e}(R);function Df(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Nf=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.draw=e,this.color="#000000",E.mergeDeep(this,n)}var e,n,o;return e=t,(n=[{key:"lineWidth",value:function(){var t=Math.floor(Cc());return t>2?t:1}},{key:"verticalLine",value:function(t,e,n,o){if(t!==n)throw new Error("coordinate errors sx should be equal to ex !!!");var r=this.draw,i=this.color,c=this.lineWidth();r.attr({fillStyle:i});var s=o-e;r.fillRect(t,e,c,s)}},{key:"horizontalLine",value:function(t,e,n,o){if(e!==o)throw new Error("coordinate errors sy should be equal to ey !!!");var r=this.draw,i=this.color,c=this.lineWidth();r.attr({fillStyle:i});var s=n-t;r.fillRect(t,e,s,c)}}])&&Df(e.prototype,n),o&&Df(e,o),t}();function Bf(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Vf=function(){function t(e){var n=e.rect,o=e.draw;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.draw=o,this.rect=n,this.backgroundColor=null}var e,n,o;return e=t,(n=[{key:"drawBackgroundColor",value:function(t){if(t){this.backgroundColor=t;var e=this.draw,n=this.rect;e.attr({fillStyle:t}),e.fillRect(n.x,n.y,n.width,n.height)}}}])&&Bf(e.prototype,n),o&&Bf(e,o),t}();function Yf(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var zf=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,o=[{key:"dateFormat",value:function(t,e){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()},o=/(y+)/.exec(t);if(o){var r=o[0],i=e.getFullYear().toString().substr(4-r.length);t=t.replace(r,i)}for(var c in n){var s=new RegExp("(".concat(c,")")).exec(t);if(s){var a=n[c].toString(),l=s[0],u=1===l.length?a:"00".concat(a).substr(a.length);t=t.replace(l,u)}}return t}},{key:"parserToDate",value:function(t,e){if(!t)return null;for(var n=new Date("1970/01/01 00:00:00"),o=[{reg:"y+"},{reg:"M+"},{reg:"d+"},{reg:"h+"},{reg:"m+"},{reg:"s+"},{reg:"S"}],r=n.getFullYear(),i=n.getMonth()+1,c=n.getDate(),s=n.getHours(),a=n.getMinutes(),l=n.getSeconds(),u=n.getMilliseconds(),f=1,h=0;h<e.length;h+=1)for(var p=e[h],y=0;y<o.length;y+=1){var b=o[y];if(b.reg[0]===p){b.index||(b.index=f,f+=1);break}}for(var d=0;d<o.length;d+=1){var v=o[d].reg,g=new RegExp("(".concat(v,")")).exec(e);if(g){var w=g[0],m="([0-9]{1,".concat(w.length,"})");e=e.replace(w,m)}}var O={},E=new RegExp(e).exec(t);if(!E)return null;for(var S=1;S<E.length;S+=1)O[S]=E[S];return o[0].index&&(r=O[o[0].index]),o[1].index&&(i=O[o[1].index]),o[2].index&&(c=O[o[2].index]),o[3].index&&(s=O[o[3].index]),o[4].index&&(a=O[o[4].index]),o[5].index&&(l=O[o[5].index]),o[6].index&&(u=O[o[6].index]),new Date(r,i-1,c,s,a,l,u)}}],(n=null)&&Yf(e.prototype,n),o&&Yf(e,o),t}();function Uf(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ff(t){var e=zf.parserToDate(t,"yyyy/MM/dd hh:mm:ss");return e||((e=zf.parserToDate(t,"yyyy/MM/dd"))?e:(e=zf.parserToDate(t,"hh:mm:ss"))?e:(e=zf.parserToDate(t,"MMdd"))?e:(e=zf.parserToDate(t,"yyyyMM"))?e:(e=zf.parserToDate(t,"yyyyMMdd"))||null)}var Gf=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,(n=[{key:"default",value:function(t){return t}},{key:"text",value:function(t){return t}},{key:"number",value:function(t){if(E.isNumber(t)){if(-1!==t.toString().indexOf(".")){var e=t.toString().lastIndexOf(".")+1;return t.toString().substring(0,e+2)}return"".concat(t,".00")}return t}},{key:"percentage",value:function(t){return E.isNumber(t)?"".concat(t,"%"):t}},{key:"fraction",value:function(t){if(E.isFraction(t)){var e=t.split("/")[0],n=t.split("/")[1];return E.parseInt(e)/E.parseInt(n)}return t}},{key:"ENotation",value:function(t){return E.isNumber(t)?E.parseFloat(t).toExponential(2):t}},{key:"rmb",value:function(t){return E.isNumber(t)?"".concat(t):t}},{key:"hk",value:function(t){return E.isNumber(t)?"HK".concat(t):t}},{key:"dollar",value:function(t){return E.isNumber(t)?"$".concat(t):t}},{key:"date1",value:function(t){var e=Ff(t);return e?zf.dateFormat("yyyy/MM/dd",e):t}},{key:"date2",value:function(t){var e=Ff(t);return e?zf.dateFormat("MMdd",e):t}},{key:"date3",value:function(t){var e=Ff(t);return e?zf.dateFormat("yyyyMM",e):t}},{key:"date4",value:function(t){var e=Ff(t);return e?zf.dateFormat("yyyyMMdd",e):t}},{key:"date5",value:function(t){var e=Ff(t);return e?zf.dateFormat("yyyy/MM/dd hh:mm:ss",e):t}},{key:"time",value:function(t){var e=Ff(t);return e?zf.dateFormat("hh:mm:ss",e):t}}])&&Uf(e.prototype,n),o&&Uf(e,o),t}()),Xf=function(t,e){return Gf[t](e)};function Kf(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var qf=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e}var e,n,o;return e=t,(n=[{key:"gridHLine",value:function(t){var e,n,o,r,i,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0},l=this.table,u=l.lineHandle,f=l.cols,h=l.rows,p=[];return u.hEach({viewRange:t,newRow:function(t,a){var l=h.getHeight(t);o=e=c,r=n=s+a+l,i=!1},filter:a,jump:function(t,c){i&&(i=!1,p.push({sx:e,sy:n,ex:o,ey:r}));var s=f.getWidth(c);o=e=o+s},handle:function(t,e){i=!0;var n=f.getWidth(e);o+=n},endRow:function(){i&&p.push({sx:e,sy:n,ex:o,ey:r})}}),p}},{key:"gridVLine",value:function(t){var e,n,o,r,i,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0},l=this.table,u=l.lineHandle,f=l.cols,h=l.rows,p=[];return u.vEach({viewRange:t,newCol:function(t,a){var l=f.getWidth(t);o=e=c+a+l,r=n=s,i=!1},filter:a,jump:function(t,c){i&&(i=!1,p.push({sx:e,sy:n,ex:o,ey:r}));var s=h.getHeight(c);r=n=r+s},handle:function(t,e){i=!0;var n=h.getHeight(e);r+=n},endCol:function(){i&&p.push({sx:e,sy:n,ex:o,ey:r})}}),p}},{key:"hLine",value:function(t){var e=this.table,n=e.merges,o=e.cells;return this.gridHLine(t,0,0,(function(t,e){var r=null===n.getFirstIncludes(t,e),i=!1===o.isDisplayBottomBorder(t,e),c=!1===o.isDisplayTopBorder(t+1,e);return r&&i&&c}))}},{key:"vLine",value:function(t){var e=this.table,n=e.merges,o=e.cells;return this.gridVLine(t,0,0,(function(t,e){var r=null===n.getFirstIncludes(e,t),i=!1===o.isDisplayRightBorder(e,t),c=!1===o.isDisplayLeftBorder(e,t+1);return r&&i&&c}))}},{key:"hMergeLine",value:function(t){for(var e=this.table.cells,n=[],o=0;o<t.length;o+=1){var r=t[o].bottom;r&&(n=n.concat(this.gridHLine(r.view,r.x,r.y,(function(t,n){var o=!1===e.isDisplayBottomBorder(t,n),r=!1===e.isDisplayTopBorder(t+1,n);return o&&r}))))}return n}},{key:"vMergeLine",value:function(t){for(var e=this.table.cells,n=[],o=0;o<t.length;o+=1){var r=t[o].right;r&&(n=n.concat(this.gridVLine(r.view,r.x,r.y,(function(t,n){var o=!1===e.isDisplayRightBorder(n,t),r=!1===e.isDisplayLeftBorder(n,t+1);return o&&r}))))}return n}}])&&Kf(e.prototype,n),o&&Kf(e,o),t}();function Zf(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var $f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._=[],this.option=E.mergeDeep({},{onAdd:function(){},onPop:function(){},onClear:function(){}},e)}var e,n,o;return e=t,(n=[{key:"add",value:function(t){this._.unshift(t),this.option.onAdd(t)}},{key:"pop",value:function(){if(!this.isEmpty()){var t=this._.shift();this.option.onPop(t)}}},{key:"get",value:function(){return this._[0]}},{key:"clear",value:function(){this._=[],this.option.onClear()}},{key:"isEmpty",value:function(){return 0===this._.length}},{key:"length",value:function(){return this._.length}}])&&Zf(e.prototype,n),o&&Zf(e,o),t}();function Jf(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Qf=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e;var o=e.cells,r=e.merges;this.undo=new $f({onPop:function(t){n.redo.add(E.cloneDeep(t));var i=n.undo.get();o.setData(E.cloneDeep(i.cells)),r.setData(E.cloneDeep(i.merges)),e.trigger(Ct.TABLE_EVENT_TYPE.DATA_CHANGE),e.render()}}),this.redo=new $f({onPop:function(t){n.undo.add(E.cloneDeep(t));var i=n.undo.get();o.setData(E.cloneDeep(i.cells)),r.setData(E.cloneDeep(i.merges)),e.trigger(Ct.TABLE_EVENT_TYPE.DATA_CHANGE),e.render()}}),this.undo.add({cells:E.cloneDeep(o.getData()),merges:E.cloneDeep(r.getData())})}var e,n,o;return e=t,(n=[{key:"snapshot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.table,n=e.cells,o=e.merges;t&&this.redo.clear(),this.undo.add({cells:E.cloneDeep(n.getData()),merges:E.cloneDeep(o.getData())}),e.trigger(Ct.TABLE_EVENT_TYPE.DATA_CHANGE)}}])&&Jf(e.prototype,n),o&&Jf(e,o),t}();function th(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var eh=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e,this.drawOptimization=!0,this.borderOptimization=!0}var e,n,o;return e=t,(n=[{key:"borderHTLine",value:function(t){var e,n,o,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0},a=this.table,l=this.drawOptimization,u=a.lineHandle,f=a.cols,h=a.cells,p=[];if(u.hEach({viewRange:t,newRow:function(t,s){o=e=i,r=n=c+s},filter:s,jump:function(t,n){var r=f.getWidth(n);o=e=o+r},handle:function(t,i){var c=f.getWidth(i),s=h.getCell(t,i).borderAttr;o+=c,p.push({sx:e,sy:n,ex:o,ey:r,row:t,col:i,borderAttr:s}),e=o}}),l)for(var y=1;y<p.length;){var b=p[y],d=p[y-1],v=h.borderEqual(b.borderAttr.top,d.borderAttr.top),g=b.col-d.col==1,w=b.row===d.row;v&&g&&w?(d.ex=b.ex,d.col=b.col,p.splice(y,1)):y+=1}return p}},{key:"borderHBLine",value:function(t){var e,n,o,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0},a=this.table,l=this.drawOptimization,u=a.lineHandle,f=a.cols,h=a.rows,p=a.cells,y=[];if(u.hEach({viewRange:t,newRow:function(t,s){var a=h.getHeight(t);o=e=i,r=n=c+s+a},filter:s,jump:function(t,n){var r=f.getWidth(n);o=e=o+r},handle:function(t,i){var c=f.getWidth(i),s=p.getCell(t,i).borderAttr;o+=c,y.push({sx:e,sy:n,ex:o,ey:r,row:t,col:i,borderAttr:s}),e=o}}),l)for(var b=1;b<y.length;){var d=y[b],v=y[b-1],g=p.borderEqual(d.borderAttr.bottom,v.borderAttr.bottom),w=d.col-v.col==1,m=d.row===v.row;g&&w&&m?(v.ex=d.ex,v.col=d.col,y.splice(b,1)):b+=1}return y}},{key:"borderVLLine",value:function(t){var e,n,o,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0},a=this.table,l=this.drawOptimization,u=a.lineHandle,f=a.rows,h=a.cells,p=[];if(u.vEach({viewRange:t,newCol:function(t,s){o=e=i+s,r=n=c},filter:s,jump:function(t,e){var o=f.getHeight(e);r=n=r+o},handle:function(t,i){var c=f.getHeight(i),s=h.getCell(i,t).borderAttr;r+=c,p.push({sx:e,sy:n,ex:o,ey:r,row:i,col:t,borderAttr:s}),n=r}}),l)for(var y=1;y<p.length;){var b=p[y],d=p[y-1],v=h.borderEqual(b.borderAttr.left,d.borderAttr.left),g=b.row-d.row==1,w=b.col===d.col;v&&g&&w?(d.ey=b.ey,d.row=b.row,p.splice(y,1)):y+=1}return p}},{key:"borderVRLine",value:function(t){var e,n,o,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0},a=this.table,l=this.drawOptimization,u=a.lineHandle,f=a.rows,h=a.cols,p=a.cells,y=[];if(u.vEach({viewRange:t,newCol:function(t,s){var a=h.getWidth(t);o=e=i+s+a,r=n=c},filter:s,jump:function(t,e){var o=f.getHeight(e);r=n=r+o},handle:function(t,i){var c=f.getHeight(i),s=p.getCell(i,t).borderAttr;r+=c,y.push({sx:e,sy:n,ex:o,ey:r,row:i,col:t,borderAttr:s}),n=r}}),l)for(var b=1;b<y.length;){var d=y[b],v=y[b-1],g=p.borderEqual(d.borderAttr.right,v.borderAttr.right),w=d.row-v.row==1,m=d.col===v.col;g&&w&&m?(v.ey=d.ey,v.row=d.row,y.splice(b,1)):b+=1}return y}},{key:"htLine",value:function(t){var e=this.table,n=this.borderOptimization,o=e.merges,r=e.cells;return this.borderHTLine(t,0,0,(function(t,e){var i=o.getFirstIncludes(t,e),c=r.isDisplayTopBorder(t,e),s=r.isDisplayBottomBorder(t-1,e),a=r.borderComparisonOfTime(t,e,t-1,e);return!i&&(n&&c&&s?1===a:c)}))}},{key:"hbLine",value:function(t){var e=this.table,n=this.borderOptimization,o=e.merges,r=e.cells;return this.borderHBLine(t,0,0,(function(t,e){var i=o.getFirstIncludes(t,e),c=r.isDisplayBottomBorder(t,e),s=r.isDisplayTopBorder(t+1,e),a=r.borderComparisonOfTime(t,e,t+1,e);return!i&&(n&&c&&s?1===a||0===a:c)}))}},{key:"vlLine",value:function(t){var e=this.table,n=this.borderOptimization,o=e.merges,r=e.cells;return this.borderVLLine(t,0,0,(function(t,e){var i=o.getFirstIncludes(e,t),c=r.isDisplayLeftBorder(e,t),s=r.isDisplayRightBorder(e,t-1),a=r.borderComparisonOfTime(e,t,e,t-1);return!i&&(n&&c&&s?1===a:c)}))}},{key:"vrLine",value:function(t){var e=this.table,n=this.borderOptimization,o=e.merges,r=e.cells;return this.borderVRLine(t,0,0,(function(t,e){var i=o.getFirstIncludes(e,t),c=r.isDisplayRightBorder(e,t),s=r.isDisplayLeftBorder(e,t+1),a=r.borderComparisonOfTime(e,t,e,t+1);return!i&&(n&&c&&s?1===a||0===a:c)}))}},{key:"htMergeLine",value:function(t){for(var e=this.table,n=this.borderOptimization,o=e.cells,r=[],i=0;i<t.length;i+=1){var c=t[i].top;c&&(r=r.concat(this.borderHTLine(c.view,c.x,c.y,(function(t,e){var r=o.isDisplayTopBorder(t,e),i=o.isDisplayBottomBorder(t-1,e),c=o.borderComparisonOfTime(t,e,t-1,e);return n&&r&&i?1===c:r}))))}return r}},{key:"hbMergeLine",value:function(t){for(var e=this.table,n=this.borderOptimization,o=e.cells,r=[],i=0;i<t.length;i+=1){var c=t[i].bottom;c&&(r=r.concat(this.borderHBLine(c.view,c.x,c.y,(function(t,e){var r=o.isDisplayBottomBorder(t,e),i=o.isDisplayTopBorder(t+1,e),c=o.borderComparisonOfTime(t,e,t+1,e);return n&&r&&i?1===c||0===c:r}))))}return r}},{key:"vlMergeLine",value:function(t){for(var e=this.table,n=this.borderOptimization,o=e.cells,r=[],i=0;i<t.length;i+=1){var c=t[i].left;c&&(r=r.concat(this.borderVLLine(c.view,c.x,c.y,(function(t,e){var r=o.isDisplayLeftBorder(e,t),i=o.isDisplayRightBorder(e,t-1),c=o.borderComparisonOfTime(e,t,e,t-1);return n&&r&&i?1===c:r}))))}return r}},{key:"vrMergeLine",value:function(t){for(var e=this.table,n=this.borderOptimization,o=e.cells,r=[],i=0;i<t.length;i+=1){var c=t[i].right;c&&(r=r.concat(this.borderVRLine(c.view,c.x,c.y,(function(t,e){var r=o.isDisplayRightBorder(e,t),i=o.isDisplayLeftBorder(e,t+1),c=o.borderComparisonOfTime(e,t,e,t+1);return n&&r&&i?1===c||0===c:r}))))}return r}},{key:"openDrawOptimization",value:function(){this.drawOptimization=!0}},{key:"closeDrawOptimization",value:function(){this.drawOptimization=!1}},{key:"openBorderOptimization",value:function(){this.borderOptimization=!0}},{key:"closeBorderOptimization",value:function(){this.borderOptimization=!1}}])&&th(e.prototype,n),o&&th(e,o),t}();function nh(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var oh=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.table=e}var e,n,o;return e=t,(n=[{key:"hEach",value:function(t){for(var e=t.viewRange,n=void 0===e?new Ba(0,0,0,0):e,o=t.newRow,r=void 0===o?function(){return!0}:o,i=t.filter,c=void 0===i?function(){return!0}:i,s=t.jump,a=void 0===s?function(){return!0}:s,l=t.handle,u=void 0===l?function(){return!0}:l,f=t.endRow,h=void 0===f?function(){return!0}:f,p=t.bx,y=void 0===p?0:p,b=t.by,d=void 0===b?0:b,v=this.table,g=v.cols,w=v.rows,m=n.sri,O=n.eri,E=n.sci,S=n.eci,_=d,x=m;x<=O;x+=1){var T=w.getHeight(x),k=y;r(x,_);for(var P=E;P<=S;P+=1){var C=g.getWidth(P);c(x,P,k,_)?u(x,P,k,_):a(x,P,k,_),k+=C}h(),_+=T}}},{key:"vEach",value:function(t){for(var e=t.viewRange,n=void 0===e?new Ba(0,0,0,0):e,o=t.newCol,r=void 0===o?function(){return!0}:o,i=t.filter,c=void 0===i?function(){return!0}:i,s=t.jump,a=void 0===s?function(){return!0}:s,l=t.handle,u=void 0===l?function(){return!0}:l,f=t.endCol,h=void 0===f?function(){return!0}:f,p=t.bx,y=void 0===p?0:p,b=t.by,d=void 0===b?0:b,v=this.table,g=v.cols,w=v.rows,m=n.sri,O=n.eri,E=n.sci,S=n.eci,_=y,x=E;x<=S;x+=1){var T=g.getWidth(x),k=d;r(x,_);for(var P=m;P<=O;P+=1){var C=w.getHeight(P);c(x,P,_,k)?u(x,P,_,k):a(x,P,_,k),k+=C}h(),_+=T}}},{key:"viewRangeAndMergeCoincideView",value:function(t){var e=t.viewRange,n=void 0===e?new Ba(0,0,0,0):e,o=this.table,r=o.merges,i=o.cols,c=o.rows,s=[],a=[];return this.hEach({viewRange:n,handle:function(t,e,o,l){var u=r.getFirstIncludes(t,e);if(u&&-1===s.indexOf(u)){s.push(u);var f=n.coincide(u),h=i.sectionSumWidth(f.sci,f.eci),p=c.sectionSumHeight(f.sri,f.eri),y=new Ic({x:o,y:l,width:h,height:p});a.push({rect:y,view:f,merge:u})}}}),a}},{key:"coincideViewBrink",value:function(t){for(var e=t.coincideView,n=this.table,o=n.cols,r=n.rows,i=[],c=0;c<e.length;c+=1){var s=e[c],a=s.view,l=s.rect,u=s.merge,f=a.brink(),h={view:f.top,x:l.x,y:l.y},p={view:f.left,x:l.x,y:l.y},y={view:f.bottom,x:l.x,y:l.y+l.height-r.rectRangeSumHeight(f.bottom)},b={view:f.right,x:l.x+l.width-o.rectRangeSumWidth(f.right),y:l.y},d={};u.sri===a.sri&&(d.top=h),u.sci===a.sci&&(d.left=p),u.eri===a.eri&&(d.bottom=y),u.eci===a.eci&&(d.right=b),i.push(d)}return i}}])&&nh(e.prototype,n),o&&nh(e,o),t}();function rh(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var ih=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pool=[],this.active=null,this.bind()}var e,n,o;return e=t,(n=[{key:"register",value:function(t){var e=this,n=t.el,o=t.key,r=void 0===o?null:o,i=t.code,c=void 0===i?null:i,s=t.callback;this.pool.push({el:n,key:r,code:c,callback:s});var a=this.pool.length-1;jt.bind(n,Ct.SYSTEM_EVENT_TYPE.MOUSE_DOWN,(function(){e.active=e.pool[a]}))}},{key:"bind",value:function(){var t=this;jt.bind(document,Ct.SYSTEM_EVENT_TYPE.KEY_DOWN,(function(e){var n=t.active,o=e.keyCode;if(n){var r=n.key,i=n.code,c=n.callback;r?e[r]&&o===i&&c(e):o===i&&c(e)}9===o&&e.preventDefault()}))}}])&&rh(e.prototype,n),o&&rh(e,o),t}();function ch(t){return(ch="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sh(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var c,s=t[Symbol.iterator]();!(o=(c=s.next()).done)&&(n.push(c.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ah(t){return(ah=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lh(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uh(t,e){return(uh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hh(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ph(t,e,n){return e&&hh(t.prototype,e),n&&hh(t,n),t}var yh=function(){function t(e){fh(this,t),this.table=e}return ph(t,[{key:"getXOffset",value:function(){return this.table.settings.index.width}},{key:"getYOffset",value:function(){return this.table.settings.index.height}},{key:"getWidth",value:function(){var t=this.table,e=t.fixed,n=t.cols,o=e.fxLeft;return n.sectionSumWidth(0,o)}},{key:"getHeight",value:function(){var t=this.table,e=t.fixed,n=t.rows,o=e.fxTop;return n.sectionSumHeight(0,o)}},{key:"getViewRange",value:function(){var t=this.getWidth(),e=this.getHeight(),n=this.table.fixed,o=n.fxTop,r=n.fxLeft;return new Ba(0,0,o,r,t,e)}},{key:"drawBackGround",value:function(t,e,n){var o=this.table,r=o.draw,i=o.grid,c=o.cells;r.save(),r.offset(e,n),c.getCellInViewRange(t,(function(t,e,n,o){o.expandSize(i.lineWidth()),new Vf({draw:r,rect:o}).drawBackgroundColor(n.background)})),c.getMergeCellInViewRange(t,(function(t,e){t.expandSize(i.lineWidth()),new Vf({draw:r,rect:t}).drawBackgroundColor(e.background)})),r.offset(0,0),r.restore()}},{key:"drawGrid",value:function(t,e,n){var o=this.table,r=o.draw,i=o.grid,c=o.lineHandle,s=o.gridLineHandle;r.save(),r.offset(e,n),r.attr({globalAlpha:.3});var a=c.viewRangeAndMergeCoincideView({viewRange:t}),l=c.coincideViewBrink({coincideView:a}),u=s.hLine(t),f=s.vLine(t);u.forEach((function(t){i.horizontalLine(t.sx,t.sy,t.ex,t.ey)})),f.forEach((function(t){i.verticalLine(t.sx,t.sy,t.ex,t.ey)}));var h=s.hMergeLine(l),p=s.vMergeLine(l);h.forEach((function(t){i.horizontalLine(t.sx,t.sy,t.ex,t.ey)})),p.forEach((function(t){i.verticalLine(t.sx,t.sy,t.ex,t.ey)})),r.offset(0,0),r.restore()}},{key:"drawBorder",value:function(t,e,n){var o=this.table,r=o.draw,i=o.line,c=o.lineHandle,s=o.borderLineHandle;r.save(),r.offset(e,n);var a=c.viewRangeAndMergeCoincideView({viewRange:t}),l=c.coincideViewBrink({coincideView:a}),u=s.htLine(t),f=s.hbLine(t),h=s.vlLine(t),p=s.vrLine(t);u.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.top,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"top")})),f.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.bottom,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"bottom")})),h.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.left,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"left")})),p.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.right,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"right")}));var y=s.htMergeLine(l),b=s.hbMergeLine(l),d=s.vlMergeLine(l),v=s.vrMergeLine(l);y.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.top,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"top")})),b.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.bottom,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"bottom")})),d.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.left,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"left")})),v.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.right,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"right")})),r.offset(0,0),r.restore()}},{key:"drawCells",value:function(t,e,n){var o=this.table,r=o.draw,i=o.cells,c=o.grid;r.save(),r.offset(e,n),i.getCellInViewRange(t,(function(t,e,n,o,i){new Jc({text:Xf(n.format,n.text),rect:o.expandSize(c.lineWidth()),dw:r,overflow:i,attr:n.fontAttr}).draw()})),i.getMergeCellInViewRange(t,(function(t,e){var n=new Jc({text:Xf(e.format,e.text),rect:t.expandSize(c.lineWidth()),dw:r,overflow:null,attr:e.fontAttr});n.setTextWrap(Xc.WORD_WRAP),n.draw()})),r.offset(0,0),r.restore()}},{key:"render",value:function(){var t=this.table,e=t.draw,n=t.grid,o=t.settings,r=this.getXOffset(),i=this.getYOffset(),c=this.getViewRange(),s=new Ic({x:r,y:i,width:c.w,height:c.h}),a=new Tc({draw:e,rect:s,offset:n.lineWidth()});a.open(),this.drawBackGround(c,r,i),o.table.showGrid&&this.drawGrid(c,r,i),this.drawBorder(c,r,i),this.drawCells(c,r,i),a.close()}}]),t}(),bh=function(){function t(e){fh(this,t),this.table=e}return ph(t,[{key:"getXOffset",value:function(){var t=this.table,e=t.fixed,n=t.settings.index,o=e.fxLeft,r=n.width;return t.cols.sectionSumWidth(0,o)+r}},{key:"getYOffset",value:function(){var t=this.table,e=t.fixed,n=t.settings.index,o=e.fxTop;return n.height+t.rows.sectionSumHeight(0,o)}},{key:"getWidth",value:function(){var t=this.table,e=t.fixed,n=t.settings.index,o=e.fxLeft,r=n.width,i=t.cols.sectionSumWidth(0,o);return t.visualWidth()-(i+r)}},{key:"getHeight",value:function(){var t=this.table,e=t.fixed,n=t.settings.index,o=e.fxTop,r=n.height,i=t.rows.sectionSumHeight(0,o);return t.visualHeight()-(r+i)}},{key:"getContentWidth",value:function(){var t=this.table,e=t.cols,n=t.fixed;return e.totalWidth()-e.sectionSumWidth(0,n.fxLeft)}},{key:"getContentHeight",value:function(){var t=this.table,e=t.rows,n=t.fixed;return e.totalHeight()-e.sectionSumHeight(0,n.fxTop)}},{key:"getViewRange",value:function(){return this.table.getViewRange()}},{key:"drawBackGround",value:function(t,e,n){var o=this.table,r=o.draw,i=o.grid,c=o.cells;r.save(),r.offset(e,n),c.getCellInViewRange(t,(function(t,e,n,o){o.expandSize(i.lineWidth()),new Vf({draw:r,rect:o}).drawBackgroundColor(n.background)})),c.getMergeCellInViewRange(t,(function(t,e){t.expandSize(i.lineWidth()),new Vf({draw:r,rect:t}).drawBackgroundColor(e.background)})),r.offset(0,0),r.restore()}},{key:"drawGrid",value:function(t,e,n){var o=this.table,r=o.draw,i=o.grid,c=o.lineHandle,s=o.gridLineHandle;r.save(),r.offset(e,n),r.attr({globalAlpha:.3});var a=c.viewRangeAndMergeCoincideView({viewRange:t}),l=c.coincideViewBrink({coincideView:a}),u=s.hLine(t),f=s.vLine(t);u.forEach((function(t){i.horizontalLine(t.sx,t.sy,t.ex,t.ey)})),f.forEach((function(t){i.verticalLine(t.sx,t.sy,t.ex,t.ey)}));var h=s.hMergeLine(l),p=s.vMergeLine(l);h.forEach((function(t){i.horizontalLine(t.sx,t.sy,t.ex,t.ey)})),p.forEach((function(t){i.verticalLine(t.sx,t.sy,t.ex,t.ey)})),r.offset(0,0),r.restore()}},{key:"drawBorder",value:function(t,e,n){var o=this.table,r=o.draw,i=o.line,c=o.lineHandle,s=o.borderLineHandle;r.save(),r.offset(e,n);var a=c.viewRangeAndMergeCoincideView({viewRange:t}),l=c.coincideViewBrink({coincideView:a}),u=s.htLine(t),f=s.hbLine(t),h=s.vlLine(t),p=s.vrLine(t);u.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.top,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"top")})),f.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.bottom,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"bottom")})),h.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.left,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"left")})),p.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.right,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"right")}));var y=s.htMergeLine(l),b=s.hbMergeLine(l),d=s.vlMergeLine(l),v=s.vrMergeLine(l);y.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.top,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"top")})),b.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.bottom,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"bottom")})),d.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.left,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"left")})),v.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.right,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"right")})),r.offset(0,0),r.restore()}},{key:"drawCells",value:function(t,e,n){var o=this.table,r=o.draw,i=o.cells,c=o.grid;r.save(),r.offset(e,n),i.getCellInViewRange(t,(function(t,e,n,o,i){new Jc({text:Xf(n.format,n.text),rect:o.expandSize(c.lineWidth()),dw:r,overflow:i,attr:n.fontAttr}).draw()})),i.getMergeCellInViewRange(t,(function(t,e){var n=new Jc({text:Xf(e.format,e.text),rect:t.expandSize(c.lineWidth()),dw:r,overflow:null,attr:e.fontAttr});n.setTextWrap(Xc.WORD_WRAP),n.draw()})),r.offset(0,0),r.restore()}},{key:"render",value:function(){var t=this.table,e=t.draw,n=t.grid,o=t.settings,r=this.getXOffset(),i=this.getYOffset(),c=this.getViewRange(),s=c.w,a=c.h,l=new Ic({x:r,y:i,width:s,height:a}),u=new Tc({draw:e,rect:l,offset:n.lineWidth()});u.open(),this.drawBackGround(c,r,i),o.table.showGrid&&this.drawGrid(c,r,i),this.drawBorder(c,r,i),this.drawCells(c,r,i),u.close()}}]),t}(),dh=function(){function t(e){fh(this,t),this.table=e}return ph(t,[{key:"getXOffset",value:function(){return this.table.settings.index.width}},{key:"getYOffset",value:function(){return this.table.content.getYOffset()}},{key:"getWidth",value:function(){var t=this.table,e=t.fixed.fxLeft;return t.cols.sectionSumWidth(0,e)}},{key:"getHeight",value:function(){return this.table.getViewRange().h}},{key:"getViewRange",value:function(){var t=this.table,e=t.fixed.fxLeft,n=t.getViewRange(),o=this.getWidth(),r=this.getHeight();return n.sci=0,n.eci=e,n.w=o,n.h=r,n}},{key:"drawBackGround",value:function(t,e,n){var o=this.table,r=o.draw,i=o.grid,c=o.cells;r.save(),r.offset(e,n),c.getCellInViewRange(t,(function(t,e,n,o){o.expandSize(i.lineWidth()),new Vf({draw:r,rect:o}).drawBackgroundColor(n.background)})),c.getMergeCellInViewRange(t,(function(t,e){t.expandSize(i.lineWidth()),new Vf({draw:r,rect:t}).drawBackgroundColor(e.background)})),r.offset(0,0),r.restore()}},{key:"drawGrid",value:function(t,e,n){var o=this.table,r=o.draw,i=o.grid,c=o.lineHandle,s=o.gridLineHandle;r.save(),r.offset(e,n),r.attr({globalAlpha:.3});var a=c.viewRangeAndMergeCoincideView({viewRange:t}),l=c.coincideViewBrink({coincideView:a}),u=s.hLine(t),f=s.vLine(t);u.forEach((function(t){i.horizontalLine(t.sx,t.sy,t.ex,t.ey)})),f.forEach((function(t){i.verticalLine(t.sx,t.sy,t.ex,t.ey)}));var h=s.hMergeLine(l),p=s.vMergeLine(l);h.forEach((function(t){i.horizontalLine(t.sx,t.sy,t.ex,t.ey)})),p.forEach((function(t){i.verticalLine(t.sx,t.sy,t.ex,t.ey)})),r.offset(0,0),r.restore()}},{key:"drawBorder",value:function(t,e,n){var o=this.table,r=o.draw,i=o.line,c=o.lineHandle,s=o.borderLineHandle;r.save(),r.offset(e,n);var a=c.viewRangeAndMergeCoincideView({viewRange:t}),l=c.coincideViewBrink({coincideView:a}),u=s.htLine(t),f=s.hbLine(t),h=s.vlLine(t),p=s.vrLine(t);u.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.top,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"top")})),f.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.bottom,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"bottom")})),h.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.left,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"left")})),p.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.right,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"right")}));var y=s.htMergeLine(l),b=s.hbMergeLine(l),d=s.vlMergeLine(l),v=s.vrMergeLine(l);y.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.top,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"top")})),b.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.bottom,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"bottom")})),d.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.left,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"left")})),v.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.right,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"right")})),r.offset(0,0),r.restore()}},{key:"drawCells",value:function(t,e,n){var o=this.table,r=o.draw,i=o.cells,c=o.grid;r.save(),r.offset(e,n),i.getCellInViewRange(t,(function(t,e,n,o,i){new Jc({text:Xf(n.format,n.text),rect:o.expandSize(c.lineWidth()),dw:r,overflow:i,attr:n.fontAttr}).draw()})),i.getMergeCellInViewRange(t,(function(t,e){var n=new Jc({text:Xf(e.format,e.text),rect:t.expandSize(c.lineWidth()),dw:r,overflow:null,attr:e.fontAttr});n.setTextWrap(Xc.WORD_WRAP),n.draw()})),r.offset(0,0),r.restore()}},{key:"render",value:function(){var t=this.table,e=t.draw,n=t.settings,o=this.getViewRange(),r=this.getXOffset(),i=this.getYOffset(),c=new Ic({x:r,y:i,width:o.w,height:o.h}),s=new Tc({draw:e,rect:c});s.open(),this.drawBackGround(o,r,i),n.table.showGrid&&this.drawGrid(o,r,i),this.drawBorder(o,r,i),this.drawCells(o,r,i),s.close()}}]),t}(),vh=function(){function t(e){fh(this,t),this.table=e}return ph(t,[{key:"getXOffset",value:function(){return this.table.content.getXOffset()}},{key:"getYOffset",value:function(){return this.table.settings.index.height}},{key:"getWidth",value:function(){return this.table.getViewRange().w}},{key:"getHeight",value:function(){var t=this.table,e=t.fixed.fxTop;return t.rows.sectionSumHeight(0,e)}},{key:"getViewRange",value:function(){var t=this.table,e=t.fixed.fxTop,n=t.getViewRange(),o=this.getWidth(),r=this.getHeight();return n.sri=0,n.eri=e,n.w=o,n.h=r,n}},{key:"drawBackGround",value:function(t,e,n){var o=this.table,r=o.draw,i=o.grid,c=o.cells;r.save(),r.offset(e,n),c.getCellInViewRange(t,(function(t,e,n,o){o.expandSize(i.lineWidth()),new Vf({draw:r,rect:o}).drawBackgroundColor(n.background)})),c.getMergeCellInViewRange(t,(function(t,e){t.expandSize(i.lineWidth()),new Vf({draw:r,rect:t}).drawBackgroundColor(e.background)})),r.offset(0,0),r.restore()}},{key:"drawGrid",value:function(t,e,n){var o=this.table,r=o.draw,i=o.grid,c=o.lineHandle,s=o.gridLineHandle;r.save(),r.offset(e,n),r.attr({globalAlpha:.3});var a=c.viewRangeAndMergeCoincideView({viewRange:t}),l=c.coincideViewBrink({coincideView:a}),u=s.hLine(t),f=s.vLine(t);u.forEach((function(t){i.horizontalLine(t.sx,t.sy,t.ex,t.ey)})),f.forEach((function(t){i.verticalLine(t.sx,t.sy,t.ex,t.ey)}));var h=s.hMergeLine(l),p=s.vMergeLine(l);h.forEach((function(t){i.horizontalLine(t.sx,t.sy,t.ex,t.ey)})),p.forEach((function(t){i.verticalLine(t.sx,t.sy,t.ex,t.ey)})),r.offset(0,0),r.restore()}},{key:"drawBorder",value:function(t,e,n){var o=this.table,r=o.draw,i=o.line,c=o.lineHandle,s=o.borderLineHandle;r.save(),r.offset(e,n);var a=c.viewRangeAndMergeCoincideView({viewRange:t}),l=c.coincideViewBrink({coincideView:a}),u=s.htLine(t),f=s.hbLine(t),h=s.vlLine(t),p=s.vrLine(t);u.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.top,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"top")})),f.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.bottom,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"bottom")})),h.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.left,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"left")})),p.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.right,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"right")}));var y=s.htMergeLine(l),b=s.hbMergeLine(l),d=s.vlMergeLine(l),v=s.vrMergeLine(l);y.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.top,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"top")})),b.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.bottom,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"bottom")})),d.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.left,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"left")})),v.forEach((function(t){var e=t.borderAttr,n=t.row,o=t.col,r=e.right,c=r.color,s=r.width,a=r.type;i.setType(a),i.setColor(c),i.setWidth(s),i.drawLine(t.sx,t.sy,t.ex,t.ey,n,o,"right")})),r.offset(0,0),r.restore()}},{key:"drawCells",value:function(t,e,n){var o=this.table,r=o.draw,i=o.cells,c=o.grid;r.save(),r.offset(e,n),i.getCellInViewRange(t,(function(t,e,n,o,i){new Jc({text:Xf(n.format,n.text),rect:o.expandSize(c.lineWidth()),dw:r,overflow:i,attr:n.fontAttr}).draw()})),i.getMergeCellInViewRange(t,(function(t,e){var n=new Jc({text:Xf(e.format,e.text),rect:t.expandSize(c.lineWidth()),dw:r,overflow:null,attr:e.fontAttr});n.setTextWrap(Xc.WORD_WRAP),n.draw()})),r.offset(0,0),r.restore()}},{key:"render",value:function(){var t=this.table,e=t.draw,n=t.grid,o=t.settings,r=this.getViewRange(),i=this.getXOffset(),c=this.getYOffset(),s=new Ic({x:i,y:c,width:r.w,height:r.h}),a=new Tc({draw:e,rect:s,offset:n.lineWidth()});a.open(),this.drawBackGround(r,i,c),o.table.showGrid&&this.drawGrid(r,i,c),this.drawBorder(r,i,c),this.drawCells(r,i,c),a.close()}}]),t}(),gh=function(){function t(e){fh(this,t),this.table=e}return ph(t,[{key:"getXOffset",value:function(){return 0}},{key:"getYOffset",value:function(){return this.table.settings.index.height}},{key:"getWidth",value:function(){return this.table.settings.index.width}},{key:"getHeight",value:function(){var t=this.table,e=t.fixed.fxTop;return t.rows.sectionSumHeight(0,e)}},{key:"draw",value:function(t,e,n,o,r){var i=this.table,c=i.draw,s=i.grid,a=i.rows,l=i.settings,u=t.sri,f=t.eri;c.save(),c.offset(e,n),c.attr({fillStyle:"#f6f7fa"}),c.fillRect(0,0,o,r),c.attr({textAlign:"center",textBaseline:"middle",font:"".concat(jc(11),"px Arial"),fillStyle:"#585757"}),a.eachHeight(u,f,(function(t,e,n){c.fillText(t+1,o/2,n+e/2)}));var h=0;c.attr({globalAlpha:.3,strokeStyle:l.table.borderColor}),a.eachHeight(u,f,(function(t,e,n){h+=e,s.horizontalLine(0,n,o,n)})),s.verticalLine(o,0,o,h),c.offset(0,0),c.restore()}},{key:"render",value:function(){var t=this.table.fixed.fxTop,e=this.getXOffset(),n=this.getYOffset(),o=this.getWidth(),r=this.getHeight(),i=new Ba(0,0,t,0,o,r);this.draw(i,e,n,o,r)}}]),t}(),wh=function(){function t(e){fh(this,t),this.table=e}return ph(t,[{key:"getXOffset",value:function(){return this.table.settings.index.width}},{key:"getYOffset",value:function(){return 0}},{key:"getWidth",value:function(){var t=this.table,e=t.fixed.fxLeft;return t.cols.sectionSumWidth(0,e)}},{key:"getHeight",value:function(){return this.table.settings.index.height}},{key:"draw",value:function(t,e,n,o,r){var i=this.table,c=i.draw,s=i.grid,a=i.cols,l=i.settings,u=t.sci,f=t.eci;c.save(),c.offset(e,n),c.attr({fillStyle:"#f6f7fa"}),c.fillRect(0,0,o,r),c.attr({textAlign:"center",textBaseline:"middle",font:"".concat(jc(11),"px Arial"),fillStyle:"#585757"}),a.eachWidth(u,f,(function(t,e,n){c.fillText(E.stringAt(t),n+e/2,r/2)}));var h=0;c.attr({globalAlpha:.3,strokeStyle:l.table.borderColor}),a.eachWidth(u,f,(function(t,e,n){h+=e,s.verticalLine(n,0,n,r)})),s.horizontalLine(0,r,h,r),c.offset(0,0),c.restore()}},{key:"render",value:function(){var t=this.table.fixed.fxLeft,e=this.getXOffset(),n=this.getYOffset(),o=this.getWidth(),r=this.getHeight(),i=new Ba(0,0,0,t,o,r);this.draw(i,e,n,o,r)}}]),t}(),mh=function(){function t(e){fh(this,t),this.table=e}return ph(t,[{key:"getXOffset",value:function(){return this.table.content.getXOffset()}},{key:"getYOffset",value:function(){return 0}},{key:"getWidth",value:function(){var t=this.table,e=t.getViewRange(),n=e.sci,o=e.eci;return t.cols.sectionSumWidth(n,o)}},{key:"getHeight",value:function(){return this.table.settings.index.height}},{key:"draw",value:function(t,e,n,o,r){var i=this.table,c=i.draw,s=i.grid,a=i.cols,l=i.settings,u=t.sci,f=t.eci;c.save(),c.offset(e,n),c.attr({fillStyle:"#f6f7fa"}),c.fillRect(0,0,o,r),c.attr({textAlign:"center",textBaseline:"middle",font:"".concat(jc(11),"px Arial"),fillStyle:"#585757"}),a.eachWidth(u,f,(function(t,e,n){c.fillText(E.stringAt(t),n+e/2,r/2)}));var h=0;c.attr({globalAlpha:.3,strokeStyle:l.table.borderColor}),a.eachWidth(u,f,(function(t,e,n){h+=e,s.verticalLine(n,0,n,r),t===f&&s.verticalLine(n+e,0,n+e,r)})),s.horizontalLine(0,r,h,r),c.offset(0,0),c.restore()}},{key:"render",value:function(){var t=this.table.getViewRange(),e=this.getXOffset(),n=this.getYOffset(),o=this.getWidth(),r=this.getHeight();t.sri=0,t.eri=0,this.draw(t,e,n,o,r)}}]),t}(),Oh=function(){function t(e){fh(this,t),this.table=e}return ph(t,[{key:"getXOffset",value:function(){return 0}},{key:"getYOffset",value:function(){return this.table.content.getYOffset()}},{key:"getWidth",value:function(){return this.table.settings.index.width}},{key:"getHeight",value:function(){var t=this.table,e=t.getViewRange(),n=e.sri,o=e.eri;return t.rows.sectionSumHeight(n,o)}},{key:"draw",value:function(t,e,n,o,r){var i=this.table,c=i.draw,s=i.grid,a=i.rows,l=i.settings,u=t.sri,f=t.eri;c.save(),c.offset(e,n),c.attr({fillStyle:"#f6f7fa"}),c.fillRect(0,0,o,r),c.attr({textAlign:"center",textBaseline:"middle",font:"".concat(jc(11),"px Arial"),fillStyle:"#585757"}),a.eachHeight(u,f,(function(t,e,n){c.fillText(t+1,o/2,n+e/2)}));var h=0;c.attr({globalAlpha:.3,strokeStyle:l.table.borderColor}),a.eachHeight(u,f,(function(t,e,n){h+=e,s.horizontalLine(0,n,o,n),t===f&&s.horizontalLine(0,n+e,o,n+e)})),s.verticalLine(o,0,o,h),c.offset(0,0),c.restore()}},{key:"render",value:function(){var t=this.table.getViewRange(),e=this.getXOffset(),n=this.getYOffset(),o=this.getWidth(),r=this.getHeight();t.sci=0,t.eci=0,this.draw(t,e,n,o,r)}}]),t}(),Eh=function(){function t(e){fh(this,t),this.table=e}return ph(t,[{key:"draw",value:function(t,e,n,o){var r=this.table.draw;r.save(),r.offset(t,e),r.attr({fillStyle:"#f4f5f8"}),r.fillRect(0,0,n,o),r.offset(0,0),r.restore()}},{key:"render",value:function(){var t=this.table.settings.index;this.draw(0,0,t.width,t.height)}}]),t}(),Sh={tipsRenderTime:!1,tipsScrollTime:!1,index:{height:30,width:50,bgColor:"#f4f5f8",color:"#000000"},table:{background:"#ffffff",borderColor:"#a7a7a7",showGrid:!0},data:[],rows:{len:1e3,height:30},cols:{len:26,width:137},merges:[],fixed:{fxTop:-1,fxLeft:-1,fxRight:-1}},_h=function(t){function e(t){var n,r,i;return fh(this,e),r=this,i=ah(e).call(this,"".concat(o,"-table")),(n=!i||"object"!==ch(i)&&"function"!=typeof i?lh(r):i).viewRange=null,n.canvas=T("canvas","".concat(o,"-table-canvas")),n.settings=E.mergeDeep({},Sh,t),n.fixed=new Tu(n.settings.fixed),n.rows=new Ou(n.settings.rows),n.cols=new Su(n.settings.cols),n.cells=new ul({table:lh(n),rows:n.rows,cols:n.cols,data:n.settings.data}),n.merges=new Pu(n.settings.merges),n.scroll=new _u(lh(n)),n.lineHandle=new oh(lh(n)),n.gridLineHandle=new qf(lh(n)),n.borderLineHandle=new eh(lh(n)),n.dataSnapshot=new Qf(lh(n)),n.mousePointType=new sf(lh(n)),n.keyboardManage=new ih,n.draw=new Lc(n.canvas.el),n.line=new zi(n.draw,{leftShow:function(t,e){return n.cells.isDisplayLeftBorder(t,e)},topShow:function(t,e){return n.cells.isDisplayTopBorder(t,e)},rightShow:function(t,e){return n.cells.isDisplayRightBorder(t,e)},bottomShow:function(t,e){return n.cells.isDisplayBottomBorder(t,e)},iFMerge:function(t,e){return null!==n.merges.getFirstIncludes(t,e)},iFMergeFirstRow:function(t,e){return n.merges.getFirstIncludes(t,e).sri===t},iFMergeLastRow:function(t,e){return n.merges.getFirstIncludes(t,e).eri===t},iFMergeFirstCol:function(t,e){return n.merges.getFirstIncludes(t,e).sci===e},iFMergeLastCol:function(t,e){return n.merges.getFirstIncludes(t,e).eci===e}}),n.grid=new Nf(n.draw,{color:n.settings.table.borderColor}),n.content=new bh(lh(n)),n.fixedLeft=new dh(lh(n)),n.fixedTop=new vh(lh(n)),n.fixedTopIndex=new mh(lh(n)),n.fixedLeftIndex=new Oh(lh(n)),n.frozenLeftTop=new yh(lh(n)),n.frozenLeftIndex=new gh(lh(n)),n.frozenTopIndex=new wh(lh(n)),n.frozenRect=new Eh(lh(n)),n.screen=new Bu(lh(n)),n.xReSizer=new Gu(lh(n)),n.yReSizer=new Ju(lh(n)),n.xHeightLight=new xf(lh(n)),n.yHeightLight=new jf(lh(n)),n.edit=new Hf(lh(n)),n.children(n.canvas),n.children(n.screen),n.children(n.xReSizer),n.children(n.yReSizer),n.children(n.xHeightLight),n.children(n.yHeightLight),n.children(n.edit),n.bind(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&uh(t,e)}(e,t),ph(e,[{key:"initScreenWidget",value:function(){var t=this,e=this.dataSnapshot,n=new ol(this.screen);n.addSelectChangeCb((function(){t.trigger(Ct.TABLE_EVENT_TYPE.SELECT_CHANGE)})),n.addDownSelectCb((function(){t.trigger(Ct.TABLE_EVENT_TYPE.SELECT_DOWN)})),this.screen.addWidget(n);var o=new wf(this.screen,{onAfterAutoFill:function(t){t>0&&e.snapshot(!0)}});this.screen.addWidget(o);var r=new Ga(this.screen,{});this.screen.addWidget(r)}},{key:"init",value:function(){this.initScreenWidget(),this.screen.init(),this.xReSizer.init(),this.yReSizer.init(),this.xHeightLight.init(),this.yHeightLight.init(),this.edit.init(),this.resize()}},{key:"checkedEnableBorderDrawOptimization",value:function(){var t=this.getViewRange(),e=!0;this.cells.getCellInRectRange(t,(function(t,n,o){var r=o.borderAttr,i=r.top,c=r.left,s=r.right,a=r.bottom;return i.type===Ni.DOUBLE_LINE?e=!1:c.type===Ni.DOUBLE_LINE?e=!1:s.type===Ni.DOUBLE_LINE?e=!1:a.type!==Ni.DOUBLE_LINE||(e=!1)})),e?this.borderLineHandle.openDrawOptimization():this.borderLineHandle.closeDrawOptimization()}},{key:"bind",value:function(){var t=this;jt.bind(this,Ct.SYSTEM_EVENT_TYPE.MOUSE_MOVE,(function(e){var n=t.computeEventXy(e),o=n.x,r=n.y,i=t.getRiCiByXy(o,r),c=i.ri,s=i.ci;-1===c&&-1===s?t.mousePointType.set("cell","table-cell"):-1===c?t.mousePointType.set("s-resize","table-ci"):-1===s?t.mousePointType.set("e-resize","table-ri"):t.mousePointType.set("cell","table-cell")})),jt.bind(this,Ct.SYSTEM_EVENT_TYPE.SCROLL,(function(){t.viewRange=null,t.render()})),jt.bind(this,Ct.TABLE_EVENT_TYPE.CHANGE_WIDTH,(function(){t.viewRange=null,t.render()})),jt.bind(this,Ct.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(){t.viewRange=null,t.render()}))}},{key:"resize",value:function(){var t=this.draw,e=[this.visualWidth(),this.visualHeight()],n=e[0],o=e[1];t.resize(n,o),this.viewRange=null,this.render()}},{key:"clear",value:function(){var t=this.draw,e=this.settings,n=t.width,o=t.height;t.attr({fillStyle:e.table.background}),t.fillRect(0,0,n,o)}},{key:"render",value:function(){var t=this.settings,e=this.fixed;t.tipsRenderTime&&console.time(),this.checkedEnableBorderDrawOptimization(),this.clear(),this.frozenRect.render(),e.fxLeft>-1&&e.fxTop>-1&&this.frozenLeftTop.render(),e.fxTop>-1&&this.fixedTop.render(),e.fxLeft>-1&&this.fixedLeft.render(),this.content.render(),e.fxTop>-1&&this.frozenTopIndex.render(),e.fxLeft>-1&&this.frozenLeftIndex.render(),this.fixedLeftIndex.render(),this.fixedTopIndex.render(),t.tipsRenderTime&&(console.log(":"),console.timeEnd())}},{key:"scrollX",value:function(t){var e=this.cols,n=this.fixed,o=this.settings,r=this.scroll;o.tipsScrollTime&&console.time();var i=n.fxLeft;i+=1;var c=sh(E.rangeReduceIf(i,e.len,0,0,t,(function(t){return e.getWidth(t)})),3),s=c[0],a=c[1],l=c[2],u=a;t>0&&(u+=l),r.ci=s,r.x=u,o.tipsScrollTime&&(console.log(":"),console.timeEnd()),this.trigger(Ct.SYSTEM_EVENT_TYPE.SCROLL)}},{key:"scrollY",value:function(t){var e=this.rows,n=this.fixed,o=this.settings,r=this.scroll;o.tipsScrollTime&&console.time();var i=n.fxTop;i+=1;var c=sh(E.rangeReduceIf(i,e.len,0,0,t,(function(t){return e.getHeight(t)})),3),s=c[0],a=c[1],l=c[2],u=a;t>0&&(u+=l),r.ri=s,r.y=u,o.tipsScrollTime&&(console.log(":"),console.timeEnd()),this.trigger(Ct.SYSTEM_EVENT_TYPE.SCROLL)}},{key:"visualHeight",value:function(){return this.box().height}},{key:"visualWidth",value:function(){return this.box().width}},{key:"getRiCiByXy",value:function(t,e){var n=this.settings,o=this.fixed,r=this.rows,i=this.cols,c=n.index,s=this.fixedTop.getHeight(),a=this.fixedLeft.getWidth(),l=t,u=e,f=-1,h=-1;if(l-=c.width,u-=c.height,l<=a&&t>c.width)for(var p=0,y=0;y<=o.fxLeft;y+=1){if(f=y,(p+=i.getWidth(y))>l)break}else if(t>c.width)for(var b=a,d=this.getViewRange(),v=d.sci;v<=d.eci;v+=1){if(f=v,(b+=i.getWidth(v))>l)break}if(u<s&&e>c.height)for(var g=0,w=0;w<=o.fxTop;w+=1){if(h=w,(g+=r.getHeight(w))>u)break}else if(e>c.height)for(var m=s,O=this.getViewRange(),E=O.sri;E<=O.eri;E+=1){if(h=E,(m+=r.getHeight(E))>u)break}return{ri:h,ci:f}}},{key:"getViewRange",value:function(){if(null===this.viewRange){for(var t=this.rows,e=this.cols,n=this.scroll,o=this.content,r=0,i=0,c=n.ri,s=n.ci,a=[t.len,e.len],l=a[0],u=a[1],f=c;f<t.len&&(l=f,!((i+=t.getHeight(f))>o.getHeight()));f+=1);for(var h=s;h<e.len&&(u=h,!((r+=e.getWidth(h))>o.getWidth()));h+=1);this.viewRange=new Ba(c,s,l,u,r,i)}return this.viewRange.clone()}},{key:"getFixedWidth",value:function(){return this.fixedLeft.getWidth()}},{key:"getFixedHeight",value:function(){return this.fixedTop.getHeight()}},{key:"getIndexWidth",value:function(){return this.settings.index.width}},{key:"getIndexHeight",value:function(){return this.settings.index.height}},{key:"getContentWidth",value:function(){return this.content.getContentWidth()}},{key:"getContentHeight",value:function(){return this.content.getContentHeight()}},{key:"getCell",value:function(t,e){var n=this.cells;return E.mergeDeep({},n.getCell(t,e))}},{key:"setCell",value:function(t,e,n){var o=this.cells,r=this.dataSnapshot;E.mergeDeep(o.getCellOrNew(t,e),n),r.snapshot(!0),this.render()}},{key:"setWidth",value:function(t,e){this.cols.setWidth(t,Ac(e)),this.trigger(Ct.TABLE_EVENT_TYPE.CHANGE_WIDTH)}},{key:"setHeight",value:function(t,e){this.rows.setHeight(t,Ac(e)),this.trigger(Ct.TABLE_EVENT_TYPE.CHANGE_HEIGHT)}},{key:"toString",value:function(){var t={rows:{data:this.rows.getData()},cols:{data:this.cols.getData()},merges:{data:this.merges.getData()}};return JSON.stringify(t)}}]),e}(R);function xh(t){return(xh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Th(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function kh(t,e){return!e||"object"!==xh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ph(t){return(Ph=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ch(t,e){return(Ch=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ah=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tableConfig:{data:[],merges:[]}};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=kh(this,Ph(e).call(this,"".concat(o,"-sheet")))).options=n,t.table=new _h(t.options.tableConfig),t.children(t.table),t.bind(),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ch(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){this.table.init()}},{key:"bind",value:function(){var t=this;jt.bind(this.table,Ct.TABLE_EVENT_TYPE.CHANGE_WIDTH,(function(e){t.trigger(Ct.TABLE_EVENT_TYPE.CHANGE_WIDTH,t),e.stopPropagation()})),jt.bind(this.table,Ct.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(e){t.trigger(Ct.TABLE_EVENT_TYPE.CHANGE_HEIGHT,t),e.stopPropagation()})),jt.bind(this.table,Ct.TABLE_EVENT_TYPE.SELECT_CHANGE,(function(e){t.trigger(Ct.TABLE_EVENT_TYPE.SELECT_CHANGE,t),e.stopPropagation()})),jt.bind(this.table,Ct.TABLE_EVENT_TYPE.SELECT_DOWN,(function(e){t.trigger(Ct.TABLE_EVENT_TYPE.SELECT_DOWN,t),e.stopPropagation()}))}}])&&Th(n.prototype,r),i&&Th(n,i),e}(R);function jh(t){return(jh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rh(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Lh(t,e){return!e||"object"!==jh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Wh(t){return(Wh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ih(t,e){return(Ih=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Mh=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Lh(this,Wh(e).call(this,"".concat(o,"-sheet-view")))).sheetList=[],t.activeIndex=-1,t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ih(t,e)}(e,t),n=e,(r=[{key:"add",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ah;return this.sheetList.push(e),this.children(e),e.init(),e.hide(),jt.bind(e,Ct.TABLE_EVENT_TYPE.CHANGE_WIDTH,(function(e){t.trigger(Ct.TABLE_EVENT_TYPE.CHANGE_WIDTH),e.stopPropagation()})),jt.bind(e,Ct.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(e){t.trigger(Ct.TABLE_EVENT_TYPE.CHANGE_HEIGHT),e.stopPropagation()})),jt.bind(e,Ct.TABLE_EVENT_TYPE.DATA_CHANGE,(function(e){t.trigger(Ct.TABLE_EVENT_TYPE.DATA_CHANGE),e.stopPropagation()})),jt.bind(e,Ct.TABLE_EVENT_TYPE.SELECT_CHANGE,(function(e){t.trigger(Ct.TABLE_EVENT_TYPE.SELECT_CHANGE),e.stopPropagation()})),jt.bind(e,Ct.TABLE_EVENT_TYPE.SELECT_DOWN,(function(e){t.trigger(Ct.TABLE_EVENT_TYPE.SELECT_DOWN,t),e.stopPropagation()})),this.sheetList.length-1}},{key:"getActiveSheet",value:function(){return this.sheetList[this.activeIndex]}},{key:"setActiveSheet",value:function(t){var e=this.sheetList;return e[t]?(this.activeIndex=t,this.setActive(e[t])):null}},{key:"setActive",value:function(t){return t.show(),t.sibling().forEach((function(t){t.hide()})),t}}])&&Rh(n.prototype,r),i&&Rh(n,i),e}(R);function Hh(t){return(Hh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dh(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Nh(t,e){return!e||"object"!==Hh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bh(t){return(Bh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vh(t,e){return(Vh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Yh=0,zh=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Sheet".concat(Yh+=1);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Nh(this,Bh(e).call(this,"".concat(o,"-sheet-tab")))).setName(n),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vh(t,e)}(e,t),n=e,(r=[{key:"setName",value:function(t){this.name=t,this.text(this.name)}}])&&Dh(n.prototype,r),i&&Dh(n,i),e}(R);function Uh(t){return(Uh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fh(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Gh(t,e){return!e||"object"!==Uh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xh(t){return(Xh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Kh(t,e){return(Kh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qh,Zh,$h,Jh,Qh,tp,ep,np,op,rp,ip,cp=function(t){function e(t){var n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Gh(this,Xh(e).call(this,"".concat(o,"-sheet-switch-tab")))).last=T("div","".concat(o,"-switch-tab-last-btn")),r.next=T("div","".concat(o,"-switch-tab-next-btn")),r.content=T("div","".concat(o,"-sheet-tab-content")),r.tabs=T("div","".concat(o,"-sheet-tab-tabs")),r.plus=T("div","".concat(o,"-sheet-tab-plus")),r.content.children(r.tabs),(n=r).children.apply(n,[r.last,r.next,r.content,r.plus]),r.optiions=E.mergeDeep({onAdd:function(t){return t},onSwitch:function(t){return t}},t),r.number=0,r.left=null,r.tabList=[],r}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kh(t,e)}(e,t),n=e,(r=[{key:"setActiveTab",value:function(t){var e=this.tabList;return e[t]?(this.setActive(e[t]),e[t]):null}},{key:"setActive",value:function(t){t.addClass("active"),t.sibling().forEach((function(t){t.removeClass("active")}))}},{key:"init",value:function(){this.bind()}},{key:"bind",value:function(){var t=this;this.plus.on("click",(function(){var e=new zh,n=t.addCurrent(e);t.optiions.onAdd(e,n)})),this.last.on("click",(function(){var e=t.left||0;(e+=30)>0&&(e=0),t.left=e,t.tabs.css("marginLeft","".concat(t.left,"px"))})),this.next.on("click",(function(){var e=t.content.offset().width,n=-(t.tabs.offset().width-e),o=t.left||0;(o-=30)<n&&(o=n),t.left=o,t.tabs.css("marginLeft","".concat(t.left,"px"))}))}},{key:"add",value:function(t){var e=this;return this.tabList.push(t),this.tabs.children(t),t.on("click",(function(){e.setActive(t),e.optiions.onSwitch(t)})),this.tabList.length-1}},{key:"addCurrent",value:function(t){var e=this.add(t),n=this.content.offset().width,o=this.tabs.offset().width;return o>n&&(this.left=-(o-n),this.tabs.css("marginLeft","".concat(this.left,"px"))),e}}])&&Fh(n.prototype,r),i&&Fh(n,i),e}(R);function sp(t){return(sp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ap(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function lp(t){return(lp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function up(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fp(t,e){return(fp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var hp=function(t){function e(t){var n,r,i,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{sheets:[]};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,i=lp(e).call(this,"".concat(o,"-work-body")),(n=!i||"object"!==sp(i)&&"function"!=typeof i?up(r):i).work=t,n.workConfig=c,n.sheets=n.workConfig.sheets,n.tabAndSheet=[],n.poweredBy=T("div","".concat(o,"-powered-by-tips")),n.poweredBy.text("X-Sheet Powered by (Svell)"),n.sheetView=new Mh,n.tabView=new cp({onAdd:function(t,e){var o=up(n).sheetView,r=new Ah,i=o.add(r);n.tabAndSheet.push({tab:t,sheet:r,tabIndex:e,sheetIndex:i})},onSwitch:function(t){n.setActiveTab(t)}}),n.scrollBarX=new Ht({scroll:function(t){n.sheetView.getActiveSheet().table.scrollX(t)}}),n.scrollBarY=new zt({scroll:function(t){n.sheetView.getActiveSheet().table.scrollY(t)}}),qh=new qt(n.sheetView,{style:{flexGrow:1}}),Zh=new qt(n.scrollBarY,{style:{overflow:"inherit"}}),$h=new ee({layerElements:[qh,Zh]}),Jh=new pu(n.scrollBarX),Qh=new wu({centerElements:[Jh]}),tp=new qt(Qh,{style:{flexGrow:2}}),ep=new qt(n.tabView,{style:{flexGrow:3}}),np=new ee({layerElements:[ep,tp]}),op=new U($h,{style:{flexGrow:1}}),rp=new U(np),ip=new D({layerElements:[op,rp]}),n.children(ip),n.bind(),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fp(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){this.sheetView.init(),this.tabView.init(),this.scrollBarX.init(),this.scrollBarY.init(),this.initSheet(),this.initScroll()}},{key:"initScroll",value:function(){var t=this.sheetView.getActiveSheet();if(!E.isUnDef(t)){var e=t.table,n=e.content,o=e.scroll;tp.display(n.getWidth()<n.getContentWidth()),this.scrollBarY.setSize(n.getHeight(),n.getContentHeight()),this.scrollBarX.setSize(n.getWidth(),n.getContentWidth()),this.scrollBarY.scrollMove(o.y),this.scrollBarX.scrollMove(o.x)}}},{key:"initSheet",value:function(){var t=this.sheetView,e=this.tabView,n=!0,o=!1,r=void 0;try{for(var i,c=this.sheets[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var s=i.value,a=s.name,l=new Ah(s),u=new zh(a),f=t.add(l),h=e.add(u);this.tabAndSheet.push({tab:u,sheet:l,tabIndex:h,sheetIndex:f})}}catch(t){o=!0,r=t}finally{try{n||null==c.return||c.return()}finally{if(o)throw r}}var p=this.tabAndSheet[0];p&&(this.setActiveTabIndex(p.tabIndex),this.setActiveSheetIndex(p.sheetIndex))}},{key:"setActiveSheetIndex",value:function(t){var e=this.sheetView;e.setActiveSheet(t),e.getActiveSheet().table.resize(),this.initScroll()}},{key:"setActiveTabIndex",value:function(t){this.tabView.setActiveTab(t)}},{key:"setActiveTab",value:function(t){var e=this;this.tabAndSheet.forEach((function(n){n.tab===t&&(e.setActiveTabIndex(n.tabIndex),e.setActiveSheetIndex(n.sheetIndex),e.trigger(Ct.WORK_BODY_TYPE.CHANGE_ACTIVE))}))}},{key:"bind",value:function(){var t=this;this.on(Ct.SYSTEM_EVENT_TYPE.MOUSE_WHEEL,(function(e){var n=t.sheetView.getActiveSheet();if(!E.isUnDef(n)){var o=n.table,r=o.rows,i=o.scroll,c=t.scrollBarY.scrollTo,s=e.deltaY;e.detail&&(s=40*e.detail),s>0?t.scrollBarY.scrollMove(c+r.getHeight(i.ri)):t.scrollBarY.scrollMove(c-r.getHeight(i.ri-1)),i.blockTop<i.maxBlockTop&&i.blockTop>0&&(e.preventDefault(),e.stopPropagation())}})),jt.bind(window,Ct.SYSTEM_EVENT_TYPE.RESIZE,(function(){t.sheetView.getActiveSheet().table.resize(),t.initScroll()})),jt.bind(document,Ct.SYSTEM_EVENT_TYPE.VISIBILITY_CHANGE,(function(){var e=t.sheetView.getActiveSheet().table;document.hidden||e.resize()})),jt.bind(this.sheetView,Ct.TABLE_EVENT_TYPE.CHANGE_HEIGHT,(function(){t.initScroll()})),jt.bind(this.sheetView,Ct.TABLE_EVENT_TYPE.CHANGE_WIDTH,(function(){t.initScroll()})),jt.bind(this.sheetView,Ct.TABLE_EVENT_TYPE.DATA_CHANGE,(function(e){t.trigger(Ct.TABLE_EVENT_TYPE.DATA_CHANGE),e.stopPropagation()})),jt.bind(this.sheetView,Ct.TABLE_EVENT_TYPE.SELECT_CHANGE,(function(e){t.trigger(Ct.TABLE_EVENT_TYPE.SELECT_CHANGE),e.stopPropagation()})),jt.bind(this.sheetView,Ct.TABLE_EVENT_TYPE.SELECT_DOWN,(function(e){t.trigger(Ct.TABLE_EVENT_TYPE.SELECT_DOWN,t),e.stopPropagation()}))}}])&&ap(n.prototype,r),i&&ap(n,i),e}(R);function pp(t){return(pp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yp(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function bp(t,e){return!e||"object"!==pp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function dp(t){return(dp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vp(t,e){return(vp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var gp=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=bp(this,dp(e).call(this,"".concat(o,"-bottom-menu")))).sum=T("div","".concat(o,"-bottom-sum")),t.avg=T("div","".concat(o,"-bottom-avg")),t.number=T("div","".concat(o,"-bottom-number")),t.children(t.sum),t.children(t.avg),t.children(t.number),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vp(t,e)}(e,t),n=e,(r=[{key:"setSum",value:function(t){this.sum.text(": ".concat(t))}},{key:"setAvg",value:function(t){this.avg.text(": ".concat(t))}},{key:"setNumber",value:function(t){this.number.text(": ".concat(t))}}])&&yp(n.prototype,r),i&&yp(n,i),e}(R);function wp(t){return(wp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mp(t,e){return!e||"object"!==wp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Op(t){return(Op=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ep(t,e){return(Ep=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Sp,_p,xp,Tp,kp=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=mp(this,Op(e).call(this,"".concat(o,"-work-bottom")))).work=t,n.bottomMenu=new gp,n.children(n.bottomMenu),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ep(t,e)}(e,t),e}(R);function Pp(t){return(Pp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cp(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ap(t){return(Ap=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rp(t,e){return(Rp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Lp=function(t){function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{body:{}};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(r=Ap(e).call(this,"".concat(o,"-work")))||"object"!==Pp(r)&&"function"!=typeof r?jp(n):r).options=i.workConfig,t.body=new hp(jp(t),t.options.body),t.bottom=new kp(jp(t)),t.top=new su(jp(t)),Sp=new U(t.top),_p=new U(t.body,{style:{flexGrow:1}}),xp=new U(t.bottom),Tp=new D({layerElements:[Sp,_p,xp]}),t.children(Tp),t.bottom.bottomMenu.setSum(0),t.bottom.bottomMenu.setAvg(0),t.bottom.bottomMenu.setNumber(0),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rp(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){this.body.init(),this.top.init(),this.bottom.init()}}])&&Cp(n.prototype,r),i&&Cp(n,i),e}(R);n(3),n(4);function Wp(t){return(Wp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ip(t){return(Ip=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hp(t,e){return(Hp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"XSheet",(function(){return Dp}));var Dp=function(t){function e(t){var n,r,i,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{workConfig:{body:{sheets:[{tableConfig:{fixed:{fxTop:1,fxLeft:1}}}]}}};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,n=!(i=Ip(e).call(this,"".concat(o)))||"object"!==Wp(i)&&"function"!=typeof i?Mp(r):i;var s=t;return"string"==typeof t&&(s=document.querySelector(t)),(s=T(s)).children(Mp(n)),n.work=new Lp(c),n.children(n.work),n.work.init(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hp(t,e)}(e,t),e}(R);window&&(window.XSheet=Dp)}]);
//# sourceMappingURL=XSheet.js.map