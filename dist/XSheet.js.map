{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./assets/svg/cell.png","webpack:///./assets/svg/s-resize.png","webpack:///./assets/svg/e-resize.png","webpack:///./src/config.js","webpack:///./src/utils/Utils.js","webpack:///./src/lib/Element.js","webpack:///./src/lib/Widget.js","webpack:///./src/lib/layer/VerticalLayer.js","webpack:///./src/lib/layer/VerticalLayerElement.js","webpack:///./src/core/work/tools/Icon.js","webpack:///./src/core/work/tools/base/Item.js","webpack:///./src/core/work/tools/Undo.js","webpack:///./src/core/work/tools/Redo.js","webpack:///./src/core/work/tools/PaintFormat.js","webpack:///./src/core/work/tools/ClearFormat.js","webpack:///./src/core/work/tools/base/DropDownItem.js","webpack:///./src/utils/Constant.js","webpack:///./src/utils/EventBind.js","webpack:///./src/component/scrollbar/ScrollBarX.js","webpack:///./src/component/scrollbar/ScrollBarY.js","webpack:///./src/lib/layer/HorizontalLayerElement.js","webpack:///./src/lib/layer/HorizontalLayer.js","webpack:///./src/component/elpopup/ElPopUp.js","webpack:///./src/component/elcontextmenu/ELContextMenu.js","webpack:///./src/component/elcontextmenu/ELContextMenuItem.js","webpack:///./src/core/work/tools/contextmenu/format/FormatContextMenuItem.js","webpack:///./src/component/elcontextmenu/ELContextMenuDivider.js","webpack:///./src/core/work/tools/contextmenu/format/FormatContextMenu.js","webpack:///./src/core/work/tools/Format.js","webpack:///./src/core/work/tools/contextmenu/font/FontContextMenuItem.js","webpack:///./src/core/work/tools/contextmenu/font/FontContextMenu.js","webpack:///./src/core/work/tools/Font.js","webpack:///./src/core/work/tools/contextmenu/fontsize/FontSizeContextMenuItem.js","webpack:///./src/core/work/tools/contextmenu/fontsize/FontSizeContextMenu.js","webpack:///./src/core/work/tools/FontSize.js","webpack:///./src/core/work/tools/FontBold.js","webpack:///./src/core/work/tools/FontItalic.js","webpack:///./src/core/work/tools/UnderLine.js","webpack:///./src/core/work/tools/FontStrike.js","webpack:///./src/core/work/tools/contextmenu/fontcolor/FontColorContextMenuItem.js","webpack:///./src/component/dragpanel/DragPanel.js","webpack:///./src/component/colorpicker/ColorPicker.js","webpack:///./src/component/colorarray/ColorItem.js","webpack:///./src/component/colorarray/ColorArray.js","webpack:///./src/core/work/tools/contextmenu/fontcolor/FontColorContextMenu.js","webpack:///./src/core/work/tools/FontColor.js","webpack:///./src/core/work/tools/contextmenu/fillcolor/FillColorContextMenuItem.js","webpack:///./src/core/work/tools/contextmenu/fillcolor/FillColorContextMenu.js","webpack:///./src/core/work/tools/FillColor.js","webpack:///./src/core/work/tools/contextmenu/border/bordertype/BorderTypeContextMenuItem.js","webpack:///./src/core/work/tools/contextmenu/icon/border/BorderIcon1.js","webpack:///./src/core/work/tools/contextmenu/icon/border/BorderIcon2.js","webpack:///./src/core/work/tools/contextmenu/icon/border/BorderIcon3.js","webpack:///./src/core/work/tools/contextmenu/icon/border/BorderIcon4.js","webpack:///./src/core/work/tools/contextmenu/icon/border/BorderIcon5.js","webpack:///./src/core/work/tools/contextmenu/icon/border/BorderIcon6.js","webpack:///./src/core/work/tools/contextmenu/icon/border/BorderIcon7.js","webpack:///./src/core/work/tools/contextmenu/icon/border/BorderIcon8.js","webpack:///./src/core/work/tools/contextmenu/icon/border/BorderIcon9.js","webpack:///./src/core/work/tools/contextmenu/icon/border/BorderIcon10.js","webpack:///./src/core/work/tools/contextmenu/icon/border/BorderColor.js","webpack:///./src/core/work/tools/contextmenu/icon/border/BorderType.js","webpack:///./src/core/work/tools/contextmenu/border/bordercolor/BorderColorContextMenuItem.js","webpack:///./src/core/work/tools/contextmenu/border/bordercolor/BorderColorContextMenu.js","webpack:///./src/core/work/tools/contextmenu/border/linetype/LineTypeContextMenuItem.js","webpack:///./src/core/work/tools/contextmenu/border/linetype/LineTypeContextMenu.js","webpack:///./src/canvas/Line.js","webpack:///./src/core/work/tools/contextmenu/border/bordertype/BorderTypeContextMenu.js","webpack:///./src/core/work/tools/contextmenu/icon/border/Border.js","webpack:///./src/core/work/tools/Merge.js","webpack:///./src/core/work/tools/contextmenu/icon/horizontal/HorizontalIcon1.js","webpack:///./src/core/work/tools/contextmenu/icon/horizontal/HorizontalIcon2.js","webpack:///./src/core/work/tools/contextmenu/icon/horizontal/HorizontalIcon3.js","webpack:///./src/core/work/tools/contextmenu/horizontal/HorizontalContextMenuItem.js","webpack:///./src/canvas/Crop.js","webpack:///./src/canvas/Draw.js","webpack:///./src/canvas/Rect.js","webpack:///./src/canvas/DrawAngle.js","webpack:///./src/canvas/Font.js","webpack:///./src/core/work/tools/contextmenu/horizontal/HorizontalContextMenu.js","webpack:///./src/core/work/tools/HorizontalAlign.js","webpack:///./src/core/work/tools/contextmenu/vertical/VerticalContextMenuItem.js","webpack:///./src/core/work/tools/contextmenu/icon/vertical/VerticalIcon1.js","webpack:///./src/core/work/tools/contextmenu/icon/vertical/VerticalIcon2.js","webpack:///./src/core/work/tools/contextmenu/icon/vertical/VerticalIcon3.js","webpack:///./src/core/work/tools/contextmenu/vertical/VerticalContextMenu.js","webpack:///./src/core/work/tools/VerticalAlign.js","webpack:///./src/core/work/tools/contextmenu/icon/textwrapping/TextWrappingIcon1.js","webpack:///./src/core/work/tools/contextmenu/icon/textwrapping/TextWrappingIcon2.js","webpack:///./src/core/work/tools/contextmenu/icon/textwrapping/TextWrappingIcon3.js","webpack:///./src/core/work/tools/contextmenu/textwrapping/TextWrappingContextMenuItem.js","webpack:///./src/core/work/tools/contextmenu/textwrapping/TextWrappingContextMenu.js","webpack:///./src/core/work/tools/TextWrapping.js","webpack:///./src/core/work/tools/Fixed.js","webpack:///./src/core/work/tools/Filter.js","webpack:///./src/core/work/tools/Functions.js","webpack:///./src/core/table/copystyle/CopyStyle.js","webpack:///./src/core/table/screen/ScreenWidget.js","webpack:///./src/core/table/RectRange.js","webpack:///./src/core/table/copystyle/ScreenCopyStyle.js","webpack:///./src/core/table/selector/Selector.js","webpack:///./src/core/table/selector/ScreenSelector.js","webpack:///./src/core/table/cells/CellFont.js","webpack:///./src/core/table/cells/Border.js","webpack:///./src/core/table/cells/CellBorder.js","webpack:///./src/core/table/cells/Cell.js","webpack:///./src/core/work/TopMenu.js","webpack:///./src/core/work/options/base/Item.js","webpack:///./src/core/work/options/File.js","webpack:///./src/core/work/options/ForMart.js","webpack:///./src/core/work/options/Insert.js","webpack:///./src/core/work/options/Look.js","webpack:///./src/core/work/options/Update.js","webpack:///./src/core/work/TopOption.js","webpack:///./src/core/work/WorkTop.js","webpack:///./src/lib/layer/center/VerticalCenterElement.js","webpack:///./src/lib/layer/center/VerticalCenter.js","webpack:///./src/utils/DateUtils.js","webpack:///./src/core/table/Format.js","webpack:///./src/core/table/Rows.js","webpack:///./src/core/table/Cols.js","webpack:///./src/core/table/Scroll.js","webpack:///./src/core/table/Fixed.js","webpack:///./src/core/table/Merges.js","webpack:///./src/core/table/screen/ScreenElement.js","webpack:///./src/core/table/screen/Screen.js","webpack:///./src/core/table/resizer/XReSizer.js","webpack:///./src/core/table/resizer/YReSizer.js","webpack:///./src/core/table/MousePoint.js","webpack:///./src/core/table/autofill/AutoFill.js","webpack:///./src/core/table/autofill/ScreenAutoFill.js","webpack:///./src/core/table/highlight/XHeightLight.js","webpack:///./src/core/table/highlight/YHeightLight.js","webpack:///./src/core/table/Edit.js","webpack:///./src/canvas/Grid.js","webpack:///./src/canvas/Box.js","webpack:///./src/core/table/History.js","webpack:///./src/core/table/DataSnapshot.js","webpack:///./src/core/table/gridborder/LineHandle.js","webpack:///./src/core/table/KeyboardManage.js","webpack:///./src/core/table/cells/Cells.js","webpack:///./src/core/table/CellsHelper.js","webpack:///./src/core/table/gridborder/GridLineHandle.js","webpack:///./src/core/table/gridborder/BorderLineHandle.js","webpack:///./src/core/table/Table.js","webpack:///./src/core/work/Sheet.js","webpack:///./src/core/work/SheetView.js","webpack:///./src/core/work/Tab.js","webpack:///./src/core/work/WorkBody.js","webpack:///./src/core/work/TabView.js","webpack:///./src/core/work/BottomMenu.js","webpack:///./src/core/work/Work.js","webpack:///./src/core/work/WorkBottom.js","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","cssPrefix","alphabets","throttleHandle","DATA_TYPE","Utils","arg","type","toString","json","JSON","stringify","parse","isUnDef","sources","length","forEach","source","keys","v","Array","isArray","isPlainObject","mergeDeep","assign","test","navigator","userAgent","isEmptyObject","e","obj","getPrototypeOf","objOrAry","cb","total","size","min","max","val","isNumber","parseFloat","parseInt","index","str","idx","ret","charCodeAt","expoNet","src","x","y","charAt","indexAt","stringAt","xn","yn","expr2xy","xy2expr","initS","initV","ifv","getV","time","clearTimeout","setTimeout","target","result","sv","tv","equal","leftChain","rightChain","compare2Objects","isNaN","Date","RegExp","String","Number","isPrototypeOf","constructor","indexOf","push","pop","arguments","a1","a2","window","getSelection","focus","range","selectAllChildren","collapseToEnd","document","selection","createRange","moveToElementText","collapse","select","this","isBlank","trim","now","width","innerWidth","height","innerHeight","EMPTY","Nul","Undef","undefined","Element","tag","className","el","createElement","data","eventNames","handler","split","fen","oen","eventName","addEventListener","evt","k","button","stopPropagation","css","top","offsetTop","left","offsetLeft","offsetHeight","offsetWidth","scrollLeft","scrollTop","clientHeight","getBoundingClientRect","parentNode","args","childNodes","ele","child","firstChild","lastChild","removeChild","children","insertBefore","appendChild","previousSibling","nextSibling","createTextNode","contains","classList","add","remove","cls","toggleClass","toggle","flag","addClass","removeClass","active","setAttribute","getAttribute","removeAttribute","content","innerHTML","style","removeProperty","getComputedStyle","computedStyle","display","on","show","hide","innerText","sibling","previousElementSibling","nextElementSibling","position","replace","repeat","right","bottom","message","event","CustomEvent","detail","bubbles","cancelable","dispatchEvent","querySelectorAll","eleArray","item","targetEl","body","h","Widget","element","box","pageX","pageY","eleTop","eleLeft","VerticalLayer","options","layerElements","init","layerElement","VerticalLayerElement","flexGrow","Icon","iconNameEl","Item","Undo","icon","Redo","PaintFormat","sheets","sheet","splice","ClearFormat","DropDownItem","drop","title","text","html","px","cssRemoveKeys","Constant","SYSTEM_EVENT_TYPE","MOUSE_MOVE","toLocaleLowerCase","MOUSE_DOWN","MOUSE_UP","MOUSE_OVER","MOUSE_LEAVE","MOUSE_WHEEL","MOUSE_ENTER","CLICK","KEY_DOWN","KEY_UP","DRAG_START","SCROLL","RESIZE","CHANGE","INPUT","VISIBILITY_CHANGE","TABLE_EVENT_TYPE","CHANGE_HEIGHT","CHANGE_WIDTH","DATA_CHANGE","SELECT_CHANGE","SELECT_DOWN","WORK_BODY_TYPE","CHANGE_ACTIVE","EventBind","fn","removeEventListener","moveFunc","upFunc","xEvtUp","unbind","func","ScrollBarX","option","scroll","to","lastBut","nextBut","block","blockLeft","maxBlockLeft","blockWidth","minBlockWidth","scrollTo","contentWidth","viewPortWidth","isHide","evt1","downEventXy","computeEventXy","mouseMoveUp","evt2","computeScrollTo","preventDefault","contentBox","move","maxTo","ScrollBarY","blockTop","maxBlockTop","blockHeight","minBlockHeight","contentHeight","viewPortHeight","HorizontalLayerElement","HorizontalLayer","EL_POPUP_POSITION","TOP","LEFT","BOTTOM","RIGHT","POOL","ElPopUp","off","scrollBarX","scrollBarY","contentLayerHorizontalElement","scrollBarYLayerHorizontalElement","overflow","horizontalLayer","contentVerticalLayerElement","scrollBarXVerticalLayerElement","verticalLayer","filter","close","scrollbar","elBox","maxWidth","maxHeight","offset","setSize","ELContextMenu","menus","elPopUp","open","ELContextMenuItem","pool","FormatContextMenuItem","desc","iconElement","titleElement","descElement","ELContextMenuDivider","FormatContextMenu","onUpdate","items","update","setActive","addItem","first","setTitle","format","Format","copyProp","contextMenu","setWidth","setEllipsis","formatContextMenu","FontContextMenuItem","FontContextMenu","setActiveByType","Font","fontContextMenu","FontSizeContextMenuItem","FontSizeContextMenu","FontSize","fontSizeContextMenu","FontBold","FontItalic","UnderLine","FontStrike","FontColorContextMenuItem","DRAG_PANEL_POSITION","CENTER","DragPanel","mask","viewPort","ColorPicker","selectCb","dragPanel","color","preViewColorPoint","colorValueTips","colorInput","selectColorPoint","selectColorArea1","selectColorArea2","selectColorArea3","center","colorHuxTips","colorBar","colorBarPoint","cancelButton","selectButton","buttons","hex","len","join","hsx","Math","substring","g","b","rgbToHsb","hexToRgb","rgb","hsb","delta","t1","t2","t3","round","nr","rgbToHex","hsbToRgb","startsWith","match","isHex","parseRgb","e1","xy","centerBox","downSelect","e2","moveSelect","colorBarBox","downHue","moveHue","hexColor","fixHsx","colorValue","hsbToHex","isRgb","change","colorBarPointBox","colorBarPointLeft","selectColorPointBox","selectColorPointLeft","selectColorPointTop","areaColorValue","sliderPosition","hueChange","selectChange","hexToHsb","fixHex","ColorItem","isDark","checkedIcon","ColorArray","colors","activeColor","setActiveByColor","FontColorContextMenu","colorPicker","customizeColorArray","colorArray","reset","array","plus","customize","FontColor","fontColorContextMenu","setIcon","setColor","FillColorContextMenuItem","FillColorContextMenu","FillColor","fillColorContextMenu","BorderTypeContextMenuItem","BorderIcon1","BorderIcon2","BorderIcon3","BorderIcon4","BorderIcon5","BorderIcon6","BorderIcon7","BorderIcon8","BorderIcon9","BorderIcon10","BorderColor","BorderType","BorderColorContextMenuItem","BorderColorContextMenu","LineTypeContextMenuItem","typeIcon","LineTypeContextMenu","LINE_TYPE","SOLID_LINE","DOTTED_LINE","POINT_LINE","DOUBLE_LINE","SolidLine","draw","attr","sx","sy","ex","ey","beginPath","lineWidth","strokeStyle","setLineDash","line","DottedLine","dash","DoubleLine","padding","spacing","leftShow","topShow","rightShow","bottomShow","iFMerge","iFMergeFirstRow","iFMergeLastRow","iFMergeFirstCol","iFMergeLastCol","row","col","pos","external","ifMerge","firstRow","lastRow","firstCol","lastCol","sTopLeftCorner","sTop","sBottom","eBottomLeftCorner","eBottom","eTop","sLeft","sRight","eTopRightCorner","eRight","eLeft","sTopRightCorner","eBottomRightCorner","sBottomLeftCorner","internal","handleExternal","handleInternal","Line","solidLine","dottedLine","pointLine","doubleLine","drawLine","BorderTypeContextMenu","borderIcon1","borderIcon2","borderIcon3","borderIcon4","borderIcon5","div1","borderIcon6","borderIcon7","borderIcon8","borderIcon9","borderIcon10","div2","borderIcons","borderColor","borderType","div3","borderColorAndType","borderColorContextMenu","lineTypeContextMenu","closeAll","isOpen","Border","borderTypeContextMenu","Merge","HorizontalIcon1","HorizontalIcon2","HorizontalIcon3","HorizontalContextMenuItem","Crop","rect","save","clip","restore","dpr","devicePixelRatio","floor","npx","angleToRadian","angle","PI","Draw","ctx","getContext","offsetX","offsetY","rotate","clearRect","fill","measureText","moveTo","x1","y1","lineTo","stroke","w","fillRect","fillText","even","nx","ny","Rect","ANGLE_ORIGIN","TOP_LEFT","TOP_CENTER","TOP_RIGHT","MIDDLE_LEFT","MIDDLE_CENTER","MIDDLE_RIGHT","BOTTOM_LEFT","BOTTOM_CENTER","BOTTOM_RIGHT","DrawAngle","dw","origin","tx","ty","translate","cos","sin","abs","TrigonometricFunction","ALIGN","VERTICAL_ALIGN","TEXT_WRAP","OVER_FLOW","WORD_WRAP","TRUNCATE","TEXT_DIRECTION","HORIZONTAL","VERTICAL","ANGLE","HorizontalFontDraw","overflowCrop","textWidth","verticalAlign","align","underline","strikethrough","PADDING","crop","paddingH","paddingV","maxTextWidth","textArray","textLine","start","hOffset","maxLen","charWidth","bx","by","textWrap","textAlign","textBaseline","font","italic","bold","fillStyle","drawTextTruncate","drawTextWarp","drawTextOverFlow","VerticalFontDraw","char","boxHeight","textItem","textLen","wOffset","column","last","textHeight","verticalAlignValue","j","AngleFontDraw","trigonometric","trigonometricWidth","cosWidthAngle","trigonometricHeight","sinWidthAngle","rtx","rty","dwAngle","revert","setHeight","textHypotenuseWidth","sinHeightAngle","lineHeight","textArrayLen","totalWidth","rx","ry","ax","ay","totalTextHeight","direction","verticalFontDraw","horizontalFontDraw","angleFontDraw","setTextWrap","setOverflowCrop","HorizontalContextMenu","horizontalIcon1","horizontalIcon2","horizontalIcon3","horizontalIcons","HorizontalAlign","horizontalContextMenu","VerticalContextMenuItem","VerticalIcon1","VerticalIcon2","VerticalIcon3","VerticalContextMenu","verticalIcon1","verticalIcon2","verticalIcon3","verticalIcons","VerticalAlign","verticalContextMenu","TextWrappingIcon1","TextWrappingIcon2","TextWrappingIcon3","TextWrappingContextMenuItem","TextWrappingContextMenu","textWrappingIcon1","textWrappingIcon2","textWrappingIcon3","textWrappingIcons","TextWrapping","textWrappingContextMenu","Fixed","Filter","Functions","svg","CopyStyle","find","ScreenWidget","screen","lt","br","RectRange","sri","sci","eri","eci","ref","refs","ri","ci","rowFilter","other","disjoint","addRet","dsr","dsc","der","dec","multiple","ScreenCopyStyle","selectorAttr","table","frozenLeftTop","cols","rows","grid","viewRange","getScrollViewRange","empty","coincideRange","coincide","equals","sectionSumWidth","sectionSumHeight","expandSize","fixedTop","fixedLeft","setLTOffset","setTOffset","setLOffset","setBROffset","setOffset","Selector","cornerEl","areaEl","transfromData","ScreenSelector","downSelectorAttr","onChangeStack","onSelectChangeStack","onSelectChangeOver","onDownSelectStack","mousePointType","keyboardManage","edit","merges","downSelectAttr","getDownXYSelectorAttr","setSelectAttr","setDownSelectAttr","edgeType","moveSelectorAttr","getMoveXySelectorAttr","tabId","tabNext","register","code","callback","hideEdit","id","clone","cLen","rLen","srcMerges","getFirstIncludes","targetMerges","showEdit","intersectsArea","edge","ltL","ltTBrL","ltTLBr","lBr","fixed","tlRange","fxTop","fxLeft","tRange","lRange","brRange","intersects","getIntersectsArea","setLTCorner","setTCorner","setLCorner","setBrCorner","getFixedWidth","getFixedHeight","getRiCiByXy","merge","selectRect","getViewRange","union","CellFont","$time","$display","$width","$color","$type","srcTime","targetTime","CellBorder","Cell","background","fontAttr","borderAttr","Divider","TopMenu","workTop","sheetView","work","undo","redo","paintFormat","clearFormat","getActiveSheet","cellsHelper","dataSnapshot","findByClass","getCellOrNewCellByViewRange","rectRange","cell","snapshot","render","fontSize","fontColor","fillColor","border","lineType","cells","getCellOrNew","fontBold","fontItalic","underLine","fontStrike","horizontalAlign","textWrapping","functions","setStatus","setFormatStatus","setFontStatus","setFontSizeStatus","setFontBoldStatus","setFontItalicStatus","setUnderLineStatus","setFontStrikeStatus","setFontColorStatus","setFillColorStatus","setHorizontalAlignStatus","setVerticalAlignStatus","setTextWrappingStatus","screenCopyStyle","screenSelector","setShow","addSheet","addSelectChangeOverCb","setHide","removeSheet","removeSelectChangeOverCb","newSelectorAttr","setCell","deleteIntersects","isEmpty","includeSheet","firstCell","setUndoStatus","setRedoStatus","setPaintFormatStatus","File","ForMart","Insert","Look","Update","TopOption","logoEle","titleEle","optionsEle","leftEle","rightEle","file","insert","look","WorkTop","toolsMenu","VerticalCenterElement","VerticalCenter","centerElements","centerElement","DateUtils","fmt","date","getMonth","getDate","getHours","getMinutes","getSeconds","S","getMilliseconds","resultYear","exec","yearFormatPart","yearVal","getFullYear","substr","res","Val","formatPart","replaceVal","dateText","defaultVal","reg","year","month","day","hours","minutes","seconds","milliseconds","oneChar","onePart","onePartReg","dataInfo","parserToDate","lastIndex","lastIndexOf","isFraction","toExponential","dateFormat","Rows","_","minHeight","minIf","cacheTotalHeight","setData","getOrNew","ei","rowHeight","getHeight","rangeSum","Cols","minWidth","cacheTotalWidth","colWidth","getWidth","Scroll","Merges","cr","it","within","includes","cellRange","deleteWithin","rn","cn","it1","cbWithin","map","valueOf","ScreenElement","widgets","widget","Screen","focusWidget","setDivideLayer","addWidget","getLT","getT","getL","getBR","settings","fixedWidth","fixedHeight","brLeft","brTop","clazz","XReSizer","hoverEl","lineEl","moveOff","set","getEventLeft","mx","visualHeight","newLeft","visualWidth","YReSizer","getEventTop","my","newTop","MousePointType","ignoreNames","ignoredNames","concat","sResize","eResize","AutoFill","ScreenAutoFill","mergeForceSplit","onBeforeAutoFill","onAfterAutoFill","autoFillAttr","moveAutoFill","getMoveAutoFillAttr","autoFillTo","selectorRect","autoFillSelectorRect","rSize","cSize","selectorSri","selectorSci","selectorEri","selectorEci","minRi","diff","maxRi","minCi","maxCi","autoFillRect","sIndexRi","tIndexRi","sIndexCi","tIndexCi","mergeRect","count","getCell","setCellOrNew","newMerge","mergeCellForceSplit","copyContent","copyMerge","alert","XHeightLight","sRect","tRect","ltViewRange","ltCoincideRange","tViewRange","tCoincideRange","cViewRange","cCoincideRange","lViewRange","lCoincideRange","addChangeCb","offsetHeightLight","YHeightLight","Edit","input","selector","dbClick","editOffset","keepLastIndex","getIndexHeight","getIndexWidth","ltWidth","ltHeight","ltTop","ltLeft","tWidth","lHeight","tHeight","tTop","tLeft","cHeight","lWidth","lTop","lLeft","cWidth","Grid","Error","Box","backgroundColor","History","onAdd","onPop","onClear","unshift","shift","DataSnapshot","cloneDeep","trigger","getData","clear","LineHandle","master","getMergeCellOrCell","next","checkedRight","checkedLeft","checked","getCellContentWidth","leftWidth","masterBlank","nextBlank","rightWidth","newRow","jump","handle","endRow","newCol","endCol","hEach","view","coincideView","brink","rectRangeSumHeight","rectRangeSumWidth","KeyboardManage","keyCode","Cells","isString","CellsHelper","tmp","getCellTextMaxHeight","getCellTextMaxWidth","startX","startY","getCellOverFlow","minSri","minSci","maxSri","maxSci","getCellByViewRange","GridLineHandle","nextCell","breakpoint","lineHandle","vEach","gridHLine","hLineBorderChecked","gridVLine","vLineBorderChecked","vLineRightOverFlowChecked","mergesBrink","BorderLineHandle","drawOptimization","borderOptimization","ck1","ck2","ck3","borderHTLine","compareTime","borderHBLine","borderVLLine","borderVRLine","FrozenLeftTop","gridLineHandle","globalAlpha","viewRangeAndMergeCoincideView","coincideViewBrink","hLine","vLine","horizontalLine","verticalLine","hMergeLine","vMergeLine","borderLineHandle","htLine","hbLine","vlLine","vrLine","setType","htMergeLine","hbMergeLine","vlMergeLine","vrMergeLine","drawBackgroundColor","getMergeCellByViewRange","getCellSkipMergeCellByViewRange","setContentWidth","getXOffset","getYOffset","drawBackGround","drawCells","showGrid","drawGrid","drawBorder","FixedLeft","getContentViewRange","Content","fixedLeftWidth","fixedTopHeight","totalHeight","scrollViewXOffset","getScrollViewXOffset","scrollViewRange","contentViewRange","FixedTop","FrozenLeftIndex","eachHeight","ch","FrozenTopIndex","eachWidth","cw","FixedTopIndex","FixedLeftIndex","FrozenRect","defaultSettings","tipsRenderTime","tipsScrollTime","bgColor","Table","canvas","fixedTopIndex","fixedLeftIndex","frozenLeftIndex","frozenTopIndex","frozenRect","xReSizer","yReSizer","xHeightLight","yHeightLight","addSelectChangeCb","addDownSelectCb","screenAutoFill","copyStyle","initScreenWidget","resize","enable","openDrawOptimization","closeDrawOptimization","console","rangeReduceIf","log","timeEnd","checkedEnableBorderDrawOptimization","clearViewRange","getContentWidth","getContentHeight","Sheet","tableConfig","SheetView","sheetList","activeIndex","number","Tab","setName","sheetViewLayerHorizontalElement","horizontalLayer1","scrollBarXLayerVerticalCenterElement","scrollBarXVerticalCenter","scrollBarXLayerHorizontalElement","sheetSwitchTabLayerHorizontalElement","horizontalLayer2","horizontalLayer1LayerVerticalElement","horizontalLayer2Layer1LayerVerticalElement","layerVerticalLayer","TabView","tabs","optiions","tab","onSwitch","tabList","addCurrent","current","WorkBody","workConfig","tabAndSheet","poweredBy","tabView","tabIndex","sheetIndex","setActiveTab","scrollX","scrollY","initSheet","initScroll","scrollMove","setActiveTabIndex","setActiveSheetIndex","setActiveSheet","deltaY","hidden","BottomMenu","sum","avg","topLayerVerticalElement","bodyLayerVerticalElement","bottomLayerVerticalElement","WorkBottom","bottomMenu","Work","setSum","setAvg","setNumber","XSheet","selectors","root","querySelector","version"],"mappings":"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","file":"XSheet.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","module.exports = __webpack_public_path__ + \"c4ab8001e109540f7ae6a34181d695d3.png\";","module.exports = __webpack_public_path__ + \"42b436e7c64603182355d52d31ea49f1.png\";","module.exports = __webpack_public_path__ + \"9dfd8685ea7e1e5c025514eec46a4547.png\";","export const cssPrefix = 'x-sheet';\r\n","// eslint-disable-next-line no-unused-vars\r\n/* global navigator document window */\r\n\r\nconst alphabets = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];\r\n\r\nlet throttleHandle = null;\r\n\r\nconst DATA_TYPE = {\r\n  String: 1,\r\n  Boolean: 2,\r\n  Number: 3,\r\n  Object: 4,\r\n  Array: 5,\r\n  Function: 6,\r\n  Null: 7,\r\n  Undefined: 8,\r\n  Promise: 9,\r\n  GeneratorFunction: 10,\r\n  AsyncFunction: 11,\r\n  BigInt: 12,\r\n  Symbol: 13,\r\n  Un: 14,\r\n};\r\n\r\nclass Utils {\r\n\r\n  static type(arg) {\r\n    const type = Object.prototype.toString.call(arg);\r\n    switch (type) {\r\n      case '[object Null]':\r\n        return DATA_TYPE.Null;\r\n      case '[object Undefined]':\r\n        return DATA_TYPE.Undefined;\r\n      case '[object String]':\r\n        return DATA_TYPE.String;\r\n      case '[object Boolean]':\r\n        return DATA_TYPE.Boolean;\r\n      case '[object Number]':\r\n        return DATA_TYPE.Number;\r\n      case '[object Function]':\r\n        return DATA_TYPE.Function;\r\n      case '[object Array]':\r\n        return DATA_TYPE.Array;\r\n      case '[object Promise]':\r\n        return DATA_TYPE.Promise;\r\n      case '[object GeneratorFunction]':\r\n        return DATA_TYPE.GeneratorFunction;\r\n      case '[object AsyncFunction]':\r\n        return DATA_TYPE.AsyncFunction;\r\n      case '[object BigInt]':\r\n        return DATA_TYPE.BigInt;\r\n      case '[object Symbol]':\r\n        return DATA_TYPE.Symbol;\r\n      default:\r\n        return DATA_TYPE.Un;\r\n    }\r\n  }\r\n\r\n  static cloneDeep(object) {\r\n    const json = JSON.stringify(object);\r\n    return JSON.parse(json);\r\n  }\r\n\r\n  static mergeDeep(object = {}, ...sources) {\r\n    if (Utils.isUnDef(object)) {\r\n      return {};\r\n    }\r\n    if (Utils.isUnDef(sources) || sources.length === 0) {\r\n      return object;\r\n    }\r\n    sources.forEach((source) => {\r\n      if (Utils.isUnDef(source)) return;\r\n      Object.keys(source).forEach((key) => {\r\n        const v = source[key];\r\n        if (typeof v === 'string' || typeof v === 'number' || typeof v === 'boolean') {\r\n          object[key] = v;\r\n        } else if (typeof v !== 'function' && !Array.isArray(v) && Utils.isPlainObject(v)) {\r\n          object[key] = object[key] || {};\r\n          Utils.mergeDeep(object[key], v);\r\n        } else {\r\n          object[key] = v;\r\n        }\r\n      });\r\n    });\r\n    return object;\r\n  }\r\n\r\n  static copyProp(t, s) {\r\n    return Object.assign(t, s);\r\n  }\r\n\r\n  static isMac() {\r\n    return /macintosh|mac os x/i.test(navigator.userAgent);\r\n  }\r\n\r\n  static isWindows() {\r\n    return /windows|win32/i.test(navigator.userAgent);\r\n  }\r\n\r\n  static isEmptyObject(object) {\r\n    // eslint-disable-next-line no-restricted-syntax\r\n    for (const key in object) {\r\n      // eslint-disable-next-line no-prototype-builtins\r\n      if (object.hasOwnProperty(key)) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  static isNotEmptyObject(object) {\r\n    return !Utils.isEmptyObject(object);\r\n  }\r\n\r\n  static isUnDef(e) {\r\n    return e === undefined || e === null;\r\n  }\r\n\r\n  static isNumber(e) {\r\n    return /^(-?\\d+.\\d+)$|^(-?\\d+)$/.test(e);\r\n  }\r\n\r\n  static isFraction(e) {\r\n    return /^\\d+\\/\\d+$/.test(e);\r\n  }\r\n\r\n  static isFunction(e) {\r\n    const type = Utils.type(e);\r\n    return type === DATA_TYPE.Function;\r\n  }\r\n\r\n  static isArray(e) {\r\n    return Utils.type(e) === DATA_TYPE.Array;\r\n  }\r\n\r\n  static isBlank(s) {\r\n    if (Utils.isUnDef(s)) {\r\n      return true;\r\n    }\r\n    return s.toString() === '';\r\n  }\r\n\r\n  static isPlainObject(obj) {\r\n    if (Utils.isUnDef(obj)) {\r\n      return false;\r\n    }\r\n    return Object.getPrototypeOf(obj) === Object.getPrototypeOf({});\r\n  }\r\n\r\n  static isString(obj) {\r\n    return Utils.type(obj) === DATA_TYPE.String;\r\n  }\r\n\r\n  static sum(objOrAry, cb = value => value) {\r\n    let total = 0;\r\n    let size = 0;\r\n    Object.keys(objOrAry).forEach((key) => {\r\n      total += cb(objOrAry[key], key);\r\n      size += 1;\r\n    });\r\n    return [total, size];\r\n  }\r\n\r\n  static rangeSum(min, max, cb) {\r\n    let s = 0;\r\n    for (let i = min; i < max; i += 1) {\r\n      s += cb(i);\r\n    }\r\n    return s;\r\n  }\r\n\r\n  static parseFloat(val) {\r\n    if (Utils.isNumber(val)) return parseFloat(val);\r\n    return 0;\r\n  }\r\n\r\n  static parseInt(val) {\r\n    if (Utils.isNumber(val)) return parseInt(val, 10);\r\n    return 0;\r\n  }\r\n\r\n  static stringAt(index) {\r\n    let str = '';\r\n    let idx = index;\r\n    while (idx >= alphabets.length) {\r\n      idx /= alphabets.length;\r\n      idx -= 1;\r\n      str += alphabets[parseInt(idx, 10) % alphabets.length];\r\n    }\r\n    const last = index % alphabets.length;\r\n    str += alphabets[last];\r\n    return str;\r\n  }\r\n\r\n  static indexAt(str) {\r\n    let ret = 0;\r\n    for (let i = 0; i < str.length - 1; i += 1) {\r\n      const idx = str.charCodeAt(i) - 65;\r\n      const expoNet = str.length - 1 - i;\r\n      ret += (alphabets.length ** expoNet) + (alphabets.length * idx);\r\n    }\r\n    ret += str.charCodeAt(str.length - 1) - 65;\r\n    return ret;\r\n  }\r\n\r\n  static expr2xy(src) {\r\n    let x = '';\r\n    let y = '';\r\n    for (let i = 0; i < src.length; i += 1) {\r\n      if (src.charAt(i) >= '0' && src.charAt(i) <= '9') {\r\n        y += src.charAt(i);\r\n      } else {\r\n        x += src.charAt(i);\r\n      }\r\n    }\r\n    return [Utils.indexAt(x), parseInt(y, 10) - 1];\r\n  }\r\n\r\n  static xy2expr(x, y) {\r\n    return `${Utils.stringAt(x)}${y + 1}`;\r\n  }\r\n\r\n  static expr2expr(src, xn, yn) {\r\n    const [x, y] = Utils.expr2xy(src);\r\n    return Utils.xy2expr(x + xn, y + yn);\r\n  }\r\n\r\n  static rangeReduceIf(min, max, initS, initV, ifv, getV) {\r\n    let s = initS;\r\n    let v = initV;\r\n    let i = min;\r\n    for (; i < max; i += 1) {\r\n      if (s >= ifv) break;\r\n      v = getV(i);\r\n      s += v;\r\n    }\r\n    return [i, s - v, v];\r\n  }\r\n\r\n  static throttle(cb = () => {}, time = 500) {\r\n    if (throttleHandle) clearTimeout(throttleHandle);\r\n    throttleHandle = setTimeout(cb, time);\r\n  }\r\n\r\n  static contrastDifference(target, src) {\r\n    const result = {};\r\n    if (Utils.isUnDef(target) || Utils.isUnDef(src)) {\r\n      return result;\r\n    }\r\n    // eslint-disable-next-line no-restricted-syntax\r\n    for (const key in target) {\r\n      // eslint-disable-next-line no-prototype-builtins\r\n      if (target.hasOwnProperty(key)) {\r\n        const sv = src[key];\r\n        const tv = target[key];\r\n        if (!Utils.isUnDef(sv) && !Utils.isUnDef(tv) && !Utils.equal(sv, tv)) {\r\n          result[key] = target[key];\r\n        }\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  static minIf(v, min) {\r\n    if (v < min) return min;\r\n    return v;\r\n  }\r\n\r\n  static maxIf(v, max) {\r\n    if (v > max) return max;\r\n    return v;\r\n  }\r\n\r\n  // eslint-disable-next-line no-unused-vars\r\n  static equal(x, y) {\r\n    let i;\r\n    let l;\r\n    let leftChain;\r\n    let rightChain;\r\n    function compare2Objects(x, y) {\r\n      let p;\r\n      // eslint-disable-next-line no-restricted-globals\r\n      if (isNaN(x) && isNaN(y) && typeof x === 'number' && typeof y === 'number') {\r\n        return true;\r\n      }\r\n      if (x === y) {\r\n        return true;\r\n      }\r\n      if ((typeof x === 'function' && typeof y === 'function')\r\n        || (x instanceof Date && y instanceof Date)\r\n        || (x instanceof RegExp && y instanceof RegExp)\r\n        || (x instanceof String && y instanceof String)\r\n        || (x instanceof Number && y instanceof Number)) {\r\n        return x.toString() === y.toString();\r\n      }\r\n      if (!(x instanceof Object && y instanceof Object)) {\r\n        return false;\r\n      }\r\n      // eslint-disable-next-line no-prototype-builtins\r\n      if (x.isPrototypeOf(y) || y.isPrototypeOf(x)) {\r\n        return false;\r\n      }\r\n      if (x.constructor !== y.constructor) {\r\n        return false;\r\n      }\r\n      if (x.prototype !== y.prototype) {\r\n        return false;\r\n      }\r\n      if (leftChain.indexOf(x) > -1 || rightChain.indexOf(y) > -1) {\r\n        return false;\r\n      }\r\n      // eslint-disable-next-line guard-for-in,no-restricted-syntax\r\n      for (p in y) {\r\n        // eslint-disable-next-line no-prototype-builtins\r\n        if (y.hasOwnProperty(p) !== x.hasOwnProperty(p)) {\r\n          return false;\r\n        }\r\n        if (typeof y[p] !== typeof x[p]) {\r\n          return false;\r\n        }\r\n      }\r\n      // eslint-disable-next-line guard-for-in,no-restricted-syntax\r\n      for (p in x) {\r\n        // eslint-disable-next-line no-prototype-builtins\r\n        if (y.hasOwnProperty(p) !== x.hasOwnProperty(p)) {\r\n          return false;\r\n        } if (typeof y[p] !== typeof x[p]) {\r\n          return false;\r\n        }\r\n        switch (typeof (x[p])) {\r\n          case 'object':\r\n          case 'function':\r\n            leftChain.push(x);\r\n            rightChain.push(y);\r\n            if (!compare2Objects(x[p], y[p])) {\r\n              return false;\r\n            }\r\n            leftChain.pop();\r\n            rightChain.pop();\r\n            break;\r\n          default:\r\n            if (x[p] !== y[p]) {\r\n              return false;\r\n            }\r\n            break;\r\n        }\r\n      }\r\n      return true;\r\n    }\r\n    if (arguments.length < 1) {\r\n      return true;\r\n    }\r\n    // eslint-disable-next-line no-plusplus\r\n    for (i = 1, l = arguments.length; i < l; i++) {\r\n      leftChain = [];\r\n      rightChain = [];\r\n      // eslint-disable-next-line prefer-rest-params\r\n      if (!compare2Objects(arguments[0], arguments[i])) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  static arrayIncludeArray(a1, a2) {\r\n    if (Utils.isUnDef(a1) || Utils.isUnDef(a2)) {\r\n      return false;\r\n    }\r\n    if (a1.length !== a2.length) {\r\n      return false;\r\n    }\r\n    for (let i = 0; i < a1.length; i += 1) {\r\n      if (a2.indexOf(a1[i]) === -1) return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  static keepLastIndex(obj) {\r\n    if (window.getSelection) {\r\n      obj.focus();\r\n      const range = window.getSelection();\r\n      range.selectAllChildren(obj);\r\n      range.collapseToEnd();\r\n    } else if (document.selection) {\r\n      const range = document.selection.createRange();\r\n      range.moveToElementText(obj);\r\n      range.collapse(false);\r\n      range.select();\r\n    }\r\n  }\r\n\r\n  static trim(s) {\r\n    if (this.isBlank(s)) return '';\r\n    return s.trim();\r\n  }\r\n\r\n  static now() {\r\n    return Date.now().toString();\r\n  }\r\n\r\n  static viewPort() {\r\n    return {\r\n      width: window.innerWidth,\r\n      height: window.innerHeight,\r\n    };\r\n  }\r\n}\r\n\r\nUtils.EMPTY = '';\r\nUtils.Nul = null;\r\nUtils.Undef = undefined;\r\n\r\nexport { Utils };\r\n","/* global document CustomEvent window */\r\n\r\nimport { Utils } from '../utils/Utils';\r\n\r\nclass Element {\r\n  constructor(tag, className = '') {\r\n    if (typeof tag === 'string') {\r\n      this.el = document.createElement(tag);\r\n      this.el.className = className;\r\n    } else {\r\n      this.el = tag;\r\n    }\r\n    this.el.data = [];\r\n  }\r\n\r\n  data(key, value) {\r\n    if (value !== undefined) {\r\n      this.el.data[key] = value;\r\n      return this;\r\n    }\r\n    return this.el.data[key];\r\n  }\r\n\r\n  on(eventNames, handler) {\r\n    const [fen, ...oen] = eventNames.split('.');\r\n    let eventName = fen;\r\n    if (eventName === 'mousewheel' && /Firefox/i.test(window.navigator.userAgent)) {\r\n      eventName = 'DOMMouseScroll';\r\n    }\r\n    this.el.addEventListener(eventName, (evt) => {\r\n      handler(evt);\r\n      for (let i = 0; i < oen.length; i += 1) {\r\n        const k = oen[i];\r\n        if (k === 'left' && evt.button !== 0) {\r\n          return;\r\n        }\r\n        if (k === 'right' && evt.button !== 2) {\r\n          return;\r\n        }\r\n        if (k === 'stop') {\r\n          evt.stopPropagation();\r\n        }\r\n      }\r\n    });\r\n    return this;\r\n  }\r\n\r\n  offset(value) {\r\n    if (value !== undefined) {\r\n      Object.keys(value).forEach((k) => {\r\n        this.css(k, `${value[k]}px`);\r\n      });\r\n      return this;\r\n    }\r\n    const {\r\n      offsetTop, offsetLeft, offsetHeight, offsetWidth,\r\n    } = this.el;\r\n    return {\r\n      top: offsetTop,\r\n      left: offsetLeft,\r\n      height: offsetHeight,\r\n      width: offsetWidth,\r\n    };\r\n  }\r\n\r\n  scroll(v) {\r\n    const { el } = this;\r\n    if (v !== undefined) {\r\n      if (v.left !== undefined) {\r\n        el.scrollLeft = v.left;\r\n      }\r\n      if (v.top !== undefined) {\r\n        el.scrollTop = v.top;\r\n      }\r\n    }\r\n    return { left: el.scrollLeft, top: el.scrollTop };\r\n  }\r\n\r\n  scrollTop() {\r\n    return this.el.scrollTop;\r\n  }\r\n\r\n  clientHeight() {\r\n    return this.el.clientHeight;\r\n  }\r\n\r\n  box() {\r\n    return this.el.getBoundingClientRect();\r\n  }\r\n\r\n  parent() {\r\n    return new Element(this.el.parentNode);\r\n  }\r\n\r\n  children(...args) {\r\n    if (arguments.length === 0) {\r\n      return this.el.childNodes;\r\n    }\r\n    args.forEach(ele => this.child(ele));\r\n    return this;\r\n  }\r\n\r\n  first() {\r\n    return this.el.firstChild;\r\n  }\r\n\r\n  last() {\r\n    return this.el.lastChild;\r\n  }\r\n\r\n  remove(ele) {\r\n    return this.el.removeChild(ele.el || ele);\r\n  }\r\n\r\n  prepend(ele) {\r\n    const { el } = this;\r\n    if (el.children.length > 0) {\r\n      el.insertBefore(ele, el.firstChild);\r\n    } else {\r\n      el.appendChild(ele);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  prev() {\r\n    return this.el.previousSibling;\r\n  }\r\n\r\n  next() {\r\n    return this.el.nextSibling;\r\n  }\r\n\r\n  child(arg) {\r\n    let ele = arg;\r\n    if (typeof arg === 'string') {\r\n      ele = document.createTextNode(arg);\r\n    } else if (arg instanceof Element) {\r\n      ele = arg.el;\r\n    }\r\n    this.el.appendChild(ele);\r\n    return this;\r\n  }\r\n\r\n  contains(ele) {\r\n    return this.el.contains(ele);\r\n  }\r\n\r\n  className(v) {\r\n    if (v !== undefined) {\r\n      this.el.className = v;\r\n      return this;\r\n    }\r\n    return this.el.className;\r\n  }\r\n\r\n  addClass(name) {\r\n    this.el.classList.add(name);\r\n    return this;\r\n  }\r\n\r\n  hasClass(name) {\r\n    return this.el.classList.contains(name);\r\n  }\r\n\r\n  removeClass(name) {\r\n    this.el.classList.remove(name);\r\n    return this;\r\n  }\r\n\r\n  toggle(cls = 'active') {\r\n    return this.toggleClass(cls);\r\n  }\r\n\r\n  toggleClass(name) {\r\n    return this.el.classList.toggle(name);\r\n  }\r\n\r\n  active(flag = true, cls = 'active') {\r\n    if (flag) this.addClass(cls);\r\n    else this.removeClass(cls);\r\n    return this;\r\n  }\r\n\r\n  checked(flag = true) {\r\n    this.active(flag, 'checked');\r\n    return this;\r\n  }\r\n\r\n  disabled(flag = true) {\r\n    if (flag) this.addClass('disabled');\r\n    else this.removeClass('disabled');\r\n    return this;\r\n  }\r\n\r\n  attr(key, value) {\r\n    if (value !== undefined) {\r\n      this.el.setAttribute(key, value);\r\n    } else {\r\n      if (typeof key === 'string') {\r\n        return this.el.getAttribute(key);\r\n      }\r\n      Object.keys(key).forEach((k) => {\r\n        this.el.setAttribute(k, key[k]);\r\n      });\r\n    }\r\n    return this;\r\n  }\r\n\r\n  removeAttr(key) {\r\n    this.el.removeAttribute(key);\r\n    return this;\r\n  }\r\n\r\n  html(content) {\r\n    if (content !== undefined) {\r\n      this.el.innerHTML = content;\r\n      return this;\r\n    }\r\n    return this.el.innerHTML;\r\n  }\r\n\r\n  val(v) {\r\n    if (v !== undefined) {\r\n      this.el.value = v;\r\n      return this;\r\n    }\r\n    return this.el.value;\r\n  }\r\n\r\n  cssRemoveKeys(...keys) {\r\n    keys.forEach(k => this.el.style.removeProperty(k));\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * set or get style attr\r\n   * @param name\r\n   * @param value\r\n   * @returns {String|Element}\r\n   */\r\n  css(name, value) {\r\n    if (value === undefined && typeof name !== 'string') {\r\n      Object.keys(name).forEach((k) => {\r\n        this.el.style[k] = name[k];\r\n      });\r\n      return this;\r\n    }\r\n    if (value !== undefined) {\r\n      this.el.style[name] = value;\r\n      return this;\r\n    }\r\n    return this.el.style[name];\r\n  }\r\n\r\n  computedStyle() {\r\n    return window.getComputedStyle(this.el, null);\r\n  }\r\n\r\n  show() {\r\n    const style = this.computedStyle();\r\n    if (style && style.display !== 'block') {\r\n      this.css('display', 'block');\r\n    }\r\n    return this;\r\n  }\r\n\r\n  hide() {\r\n    const style = this.computedStyle();\r\n    if (style && style.display !== 'none') {\r\n      this.css('display', 'none');\r\n    }\r\n    return this;\r\n  }\r\n\r\n  display(on) {\r\n    if (on) this.show(); else this.hide();\r\n  }\r\n\r\n  text(val) {\r\n    if (val === undefined) return this.el.innerText;\r\n    this.el.innerText = val;\r\n    return val;\r\n  }\r\n\r\n  sibling() {\r\n    let sibling = this.el;\r\n    const result = [];\r\n    // eslint-disable-next-line no-cond-assign\r\n    while ((sibling = sibling.previousElementSibling) !== null) result.push(new Element(sibling));\r\n    sibling = this.el;\r\n    // eslint-disable-next-line no-cond-assign\r\n    while ((sibling = sibling.nextElementSibling) !== null) result.push(new Element(sibling));\r\n    return result;\r\n  }\r\n\r\n  position() {\r\n    let top = 0; let left = 0; const right = 0; const bottom = 0;\r\n    if (this.el.style.position) {\r\n      if (this.el.top) {\r\n        top = this.el.style.top\r\n          .replace('%', '')\r\n          .repeat('px', '');\r\n      }\r\n      if (this.el.left) {\r\n        left = this.el.style.left\r\n          .replace('%', '')\r\n          .repeat('px', '');\r\n      }\r\n      if (this.el.right) {\r\n        top = this.el.style.right\r\n          .replace('%', '')\r\n          .repeat('px', '');\r\n      }\r\n      if (this.el.bottom) {\r\n        top = this.el.style.bottom\r\n          .replace('%', '')\r\n          .repeat('px', '');\r\n      }\r\n    }\r\n    return {\r\n      top: Utils.parseFloat(top),\r\n      left: Utils.parseFloat(left),\r\n      right: Utils.parseFloat(right),\r\n      bottom: Utils.parseFloat(bottom),\r\n    };\r\n  }\r\n\r\n  trigger(type, message) {\r\n    const event = new CustomEvent(type, {\r\n      detail: message,\r\n      bubbles: true,\r\n      cancelable: false,\r\n    });\r\n    this.el.dispatchEvent(event);\r\n  }\r\n\r\n  focus() {\r\n    this.el.focus();\r\n  }\r\n\r\n  find(select) {\r\n    const result = this.el.querySelectorAll(select);\r\n    if (result && result.length === 1) {\r\n      return new Element(result[0]);\r\n    }\r\n    const eleArray = [];\r\n    if (result) {\r\n      // eslint-disable-next-line no-restricted-syntax\r\n      for (const item of result) {\r\n        eleArray.push(new Element(item));\r\n      }\r\n    }\r\n    return eleArray;\r\n  }\r\n\r\n  isChild(target) {\r\n    let targetEl = target || target.el;\r\n    while (targetEl !== undefined && targetEl !== null && targetEl !== document.body) {\r\n      if (targetEl === this.el) return true;\r\n      targetEl = targetEl.parentNode;\r\n    }\r\n    return false;\r\n  }\r\n}\r\n\r\nconst h = (tag, className = '') => new Element(tag, className);\r\n\r\nexport {\r\n  Element,\r\n  h,\r\n};\r\n","import { Element } from './Element';\r\nimport { cssPrefix } from '../config';\r\n\r\nclass Widget extends Element {\r\n  constructor(className = '') {\r\n    super('div', `${cssPrefix}-widget ${className}`);\r\n  }\r\n\r\n  computeEventXy(event, element = this) {\r\n    const { top, left } = element.box();\r\n    return {\r\n      x: event.pageX - left,\r\n      y: event.pageY - top,\r\n    };\r\n  }\r\n\r\n  computeWidgetXy(element) {\r\n    if (!element) {\r\n      return {\r\n        x: 0,\r\n        y: 0,\r\n      };\r\n    }\r\n    const { top: eleTop, left: eleLeft } = element.box();\r\n    const { top, left } = this.box();\r\n    return {\r\n      x: eleLeft - left,\r\n      y: eleTop - top,\r\n    };\r\n  }\r\n\r\n  init() {}\r\n}\r\n\r\nexport { Widget };\r\n","import { Element } from '../Element';\r\nimport { cssPrefix } from '../../config';\r\nimport { Utils } from '../../utils/Utils';\r\n\r\nclass VerticalLayer extends Element {\r\n  constructor(options) {\r\n    super('div', `${cssPrefix}-vertical-layer`);\r\n    this.options = Utils.mergeDeep({\r\n      layerElements: [],\r\n      style: {},\r\n    }, options);\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    this.css(this.options.style);\r\n    // eslint-disable-next-line no-restricted-syntax\r\n    for (const layerElement of this.options.layerElements) this.children(layerElement);\r\n  }\r\n}\r\n\r\nexport { VerticalLayer };\r\n","import { Element } from '../Element';\r\nimport { cssPrefix } from '../../config';\r\nimport { Utils } from '../../utils/Utils';\r\n\r\nclass VerticalLayerElement extends Element {\r\n  constructor(element, options) {\r\n    super('div', `${cssPrefix}-vertical-layer-element`);\r\n    this.options = Utils.mergeDeep({\r\n      style: {\r\n        flexGrow: '0',\r\n      },\r\n    }, options);\r\n    this.element = element;\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    this.css(this.options.style);\r\n    this.children(this.element);\r\n  }\r\n}\r\n\r\nexport { VerticalLayerElement };\r\n","import { Widget } from '../../../lib/Widget';\r\nimport { cssPrefix } from '../../../config';\r\nimport { h } from '../../../lib/Element';\r\n\r\nclass Icon extends Widget {\r\n  constructor(className = '') {\r\n    super(`${cssPrefix}-icon`);\r\n    this.iconNameEl = h('div', `${cssPrefix}-icon-img ${className}`);\r\n    this.child(this.iconNameEl);\r\n  }\r\n\r\n  setWidth(width) {\r\n    this.iconNameEl.css('width', `${width}px`);\r\n  }\r\n\r\n  setHeight(height) {\r\n    this.iconNameEl.css('height', `${height}px`);\r\n  }\r\n}\r\n\r\nexport { Icon };\r\n","import { Widget } from '../../../../lib/Widget';\r\nimport { cssPrefix } from '../../../../config';\r\n\r\nclass Item extends Widget {\r\n  constructor(className) {\r\n    super(`${cssPrefix}-tools-item ${className}`);\r\n  }\r\n}\r\n\r\nexport { Item };\r\n","import { cssPrefix } from '../../../config';\r\nimport { Icon } from './Icon';\r\nimport { Item } from './base/Item';\r\n\r\nclass Undo extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-undo`);\r\n    this.icon = new Icon('undo');\r\n    this.children(this.icon);\r\n  }\r\n}\r\n\r\nexport { Undo };\r\n","import { cssPrefix } from '../../../config';\r\nimport { Icon } from './Icon';\r\nimport { Item } from './base/Item';\r\n\r\nclass Redo extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-redo`);\r\n    this.icon = new Icon('redo');\r\n    this.children(this.icon);\r\n  }\r\n}\r\n\r\nexport { Redo };\r\n","import { Item } from './base/Item';\r\nimport { cssPrefix } from '../../../config';\r\nimport { Icon } from './Icon';\r\n\r\nclass PaintFormat extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-point-format`);\r\n    this.icon = new Icon('point-format');\r\n    this.sheets = [];\r\n    this.children(this.icon);\r\n  }\r\n\r\n  addSheet(sheet) {\r\n    this.sheets.push(sheet);\r\n  }\r\n\r\n  removeSheet(sheet) {\r\n    for (let i = 0; i < this.sheets.length; i += 1) {\r\n      if (this.sheets[i] === sheet) {\r\n        this.sheets.splice(i, 1);\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  includeSheet(sheet) {\r\n    for (let i = 0; i < this.sheets.length; i += 1) {\r\n      if (this.sheets[i] === sheet) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n}\r\n\r\nexport { PaintFormat };\r\n","import { Item } from './base/Item';\r\nimport { cssPrefix } from '../../../config';\r\nimport { Icon } from './Icon';\r\n\r\nclass ClearFormat extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-clear-format`);\r\n    this.icon = new Icon('clear-format');\r\n    this.children(this.icon);\r\n  }\r\n}\r\n\r\nexport { ClearFormat };\r\n","import { Item } from './Item';\r\nimport { cssPrefix } from '../../../../config';\r\nimport { h } from '../../../../lib/Element';\r\nimport { Icon } from '../Icon';\r\n\r\nclass DropDownItem extends Item {\r\n  constructor(className) {\r\n    super(`${cssPrefix}-tools-drop-down-item ${className}`);\r\n    this.drop = h('div', `${cssPrefix}-tools-drop-down-item-mark`);\r\n    this.title = h('div', `${cssPrefix}-tools-drop-down-item-title`);\r\n    this.drop.children(new Icon('arrow-down'));\r\n    this.children(this.title);\r\n    this.children(this.drop);\r\n  }\r\n\r\n  setTitle(text) {\r\n    this.title.text(text);\r\n  }\r\n\r\n  setIcon(icon) {\r\n    this.title.html('');\r\n    this.title.children(icon);\r\n  }\r\n\r\n  setWidth(px) {\r\n    this.title.css('width', `${px}px`);\r\n  }\r\n\r\n  setEllipsis() {\r\n    this.title.css('overflow', 'hidden');\r\n    this.title.css('text-overflow', 'ellipsis');\r\n    this.title.css('white-space', 'nowrap');\r\n  }\r\n\r\n  removeEllipsis() {\r\n    this.title.cssRemoveKeys('overflow');\r\n    this.title.cssRemoveKeys('text-overflow');\r\n    this.title.cssRemoveKeys('white-space');\r\n  }\r\n}\r\n\r\nexport { DropDownItem };\r\n","class Constant {}\r\n\r\nConstant.SYSTEM_EVENT_TYPE = {\r\n  MOUSE_MOVE: 'mouseMove'.toLocaleLowerCase(),\r\n  MOUSE_DOWN: 'mouseDown'.toLocaleLowerCase(),\r\n  MOUSE_UP: 'mouseUp'.toLocaleLowerCase(),\r\n  MOUSE_OVER: 'mouseOver'.toLocaleLowerCase(),\r\n  MOUSE_LEAVE: 'mouseLeave'.toLocaleLowerCase(),\r\n  MOUSE_WHEEL: 'mouseWheel'.toLocaleLowerCase(),\r\n  MOUSE_ENTER: 'mouseEnter'.toLocaleLowerCase(),\r\n  CLICK: 'click'.toLocaleLowerCase(),\r\n  KEY_DOWN: 'keyDown'.toLocaleLowerCase(),\r\n  KEY_UP: 'keyUp'.toLocaleLowerCase(),\r\n  DRAG_START: 'dragStart'.toLocaleLowerCase(),\r\n  SCROLL: 'scroll'.toLocaleLowerCase(),\r\n  RESIZE: 'resize'.toLocaleLowerCase(),\r\n  CHANGE: 'change'.toLocaleLowerCase(),\r\n  INPUT: 'input'.toLocaleLowerCase(),\r\n  VISIBILITY_CHANGE: 'visibilityChange'.toLocaleLowerCase(),\r\n};\r\n\r\nConstant.TABLE_EVENT_TYPE = {\r\n  CHANGE_HEIGHT: 'tableChangeHeight'.toLocaleLowerCase(),\r\n  CHANGE_WIDTH: 'tableChangeWidth'.toLocaleLowerCase(),\r\n  DATA_CHANGE: 'tableDataChange'.toLocaleLowerCase(),\r\n  SELECT_CHANGE: 'tableSelectChange'.toLocaleLowerCase(),\r\n  SELECT_DOWN: 'tableSelectDown'.toLocaleLowerCase(),\r\n};\r\n\r\nConstant.WORK_BODY_TYPE = {\r\n  CHANGE_ACTIVE: 'workBodyChangeActive'.toLocaleLowerCase(),\r\n};\r\n\r\nexport { Constant };\r\n","import { Constant } from './Constant';\r\n\r\nclass EventBind {\r\n  static bind(target, name, fn) {\r\n    if (Array.isArray(target)) {\r\n      // eslint-disable-next-line no-restricted-syntax\r\n      for (const item of target) {\r\n        (item.el || item).addEventListener(name, fn);\r\n      }\r\n    } else {\r\n      (target.el || target).addEventListener(name, fn);\r\n    }\r\n  }\r\n\r\n  static unbind(target, name, fn) {\r\n    if (Array.isArray(target)) {\r\n      // eslint-disable-next-line no-restricted-syntax\r\n      for (const item of target) {\r\n        (item.el || item).addEventListener(name, fn);\r\n      }\r\n    } else {\r\n      (target.el || target).removeEventListener(name, fn);\r\n    }\r\n  }\r\n\r\n  static mouseMoveUp(target, moveFunc = () => {}, upFunc = () => {}) {\r\n    const xEvtUp = (evt) => {\r\n      EventBind.unbind(target, Constant.SYSTEM_EVENT_TYPE.MOUSE_MOVE, moveFunc);\r\n      EventBind.unbind(target, Constant.SYSTEM_EVENT_TYPE.MOUSE_UP, xEvtUp);\r\n      upFunc(evt);\r\n    };\r\n    EventBind.bind(target, Constant.SYSTEM_EVENT_TYPE.MOUSE_MOVE, moveFunc);\r\n    EventBind.bind(target, Constant.SYSTEM_EVENT_TYPE.MOUSE_UP, xEvtUp);\r\n  }\r\n\r\n  static dbClick(target, func = () => {}) {\r\n    let t = 0;\r\n    EventBind.bind(target, Constant.SYSTEM_EVENT_TYPE.CLICK, (e) => {\r\n      const n = Date.now();\r\n      if (n - t <= 300) {\r\n        func(e);\r\n        t = 0;\r\n      } else {\r\n        t = n;\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport { EventBind };\r\n","/* global document */\r\n\r\nimport { Widget } from '../../lib/Widget';\r\nimport { cssPrefix } from '../../config';\r\nimport { h } from '../../lib/Element';\r\nimport { Utils } from '../../utils/Utils';\r\nimport { Constant } from '../../utils/Constant';\r\nimport { EventBind } from '../../utils/EventBind';\r\n\r\nclass ScrollBarX extends Widget {\r\n  constructor(option) {\r\n    super(`${cssPrefix}-scroll-bar-x`);\r\n    this.option = Utils.mergeDeep({\r\n      style: {},\r\n      scroll: to => to,\r\n    }, option);\r\n    this.lastBut = h('div', `${cssPrefix}-scroll-bar-x-last-but`);\r\n    this.nextBut = h('div', `${cssPrefix}-scroll-bar-x-next-but`);\r\n    this.content = h('div', `${cssPrefix}-scroll-bar-x-content`);\r\n    this.block = h('div', `${cssPrefix}-scroll-bar-x-block`);\r\n    this.content.children(this.block);\r\n    this.children(...[\r\n      this.lastBut,\r\n      this.nextBut,\r\n      this.content,\r\n    ]);\r\n    this.blockLeft = 0;\r\n    this.maxBlockLeft = 0;\r\n    this.blockWidth = 0;\r\n    this.minBlockWidth = 20;\r\n    this.scrollTo = 0;\r\n    this.contentWidth = 0;\r\n    this.viewPortWidth = 0;\r\n    this.isHide = true;\r\n    this.css(this.option.style);\r\n    this.hide();\r\n    this.bind();\r\n  }\r\n\r\n  bind() {\r\n    this.block.on(Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (evt1) => {\r\n      if (evt1.button !== 0) return;\r\n      const downEventXy = this.computeEventXy(evt1, this.block);\r\n      EventBind.mouseMoveUp(h(document), (evt2) => {\r\n        // 计算移动的距离\r\n        const moveEventXy = this.computeEventXy(evt2, this.content);\r\n        let left = moveEventXy.x - downEventXy.x;\r\n        if (left < 0) left = 0;\r\n        if (left > this.maxBlockLeft) left = this.maxBlockLeft;\r\n        // 计算滑动的距离\r\n        this.blockLeft = left;\r\n        this.scrollTo = this.computeScrollTo(this.blockLeft);\r\n        this.block.css('left', `${left}px`);\r\n        this.option.scroll(this.scrollTo);\r\n        evt2.stopPropagation();\r\n        evt2.preventDefault();\r\n      });\r\n      evt1.stopPropagation();\r\n      evt1.preventDefault();\r\n    });\r\n  }\r\n\r\n  setSize(viewPortWidth, contentWidth) {\r\n    if (viewPortWidth < contentWidth) {\r\n      this.isHide = false;\r\n      this.show();\r\n      // 计算滑块宽度\r\n      const contentBox = this.content.box();\r\n      const blockWidth = viewPortWidth / contentWidth * contentBox.width;\r\n      this.blockWidth = blockWidth < this.minBlockWidth ? this.minBlockWidth : blockWidth;\r\n      this.viewPortWidth = viewPortWidth;\r\n      this.contentWidth = contentWidth;\r\n      this.maxBlockLeft = contentBox.width - this.blockWidth;\r\n      this.block.css('width', `${this.blockWidth}px`);\r\n      // 计算滑块位置\r\n      const blockLeft = (this.scrollTo / (contentWidth - viewPortWidth)) * this.maxBlockLeft;\r\n      this.blockLeft = blockLeft > this.maxBlockLeft ? this.maxBlockLeft : blockLeft;\r\n      this.scrollTo = this.computeScrollTo(this.blockLeft);\r\n      this.block.css('left', `${this.blockLeft}px`);\r\n    } else {\r\n      this.isHide = true;\r\n      this.hide();\r\n      this.option.scroll(0);\r\n    }\r\n  }\r\n\r\n  scrollMove(move) {\r\n    let to = move;\r\n    const maxTo = this.contentWidth - this.viewPortWidth;\r\n    if (to > maxTo) to = maxTo; else if (to < 0) to = 0;\r\n    const blockLeft = (to / (this.contentWidth - this.viewPortWidth)) * this.maxBlockLeft;\r\n    this.blockLeft = blockLeft > this.maxBlockLeft ? this.maxBlockLeft : blockLeft;\r\n    if (this.scrollTo !== to) {\r\n      this.scrollTo = to;\r\n      this.block.css('left', `${this.blockLeft}px`);\r\n      this.option.scroll(this.scrollTo);\r\n    }\r\n  }\r\n\r\n  computeScrollTo(move) {\r\n    return (move / this.maxBlockLeft) * (this.contentWidth - this.viewPortWidth);\r\n  }\r\n}\r\n\r\nexport { ScrollBarX };\r\n","/* global document */\r\n\r\nimport { Widget } from '../../lib/Widget';\r\nimport { cssPrefix } from '../../config';\r\nimport { h } from '../../lib/Element';\r\nimport { Constant } from '../../utils/Constant';\r\nimport { Utils } from '../../utils/Utils';\r\nimport { EventBind } from '../../utils/EventBind';\r\n\r\nclass ScrollBarY extends Widget {\r\n  constructor(option) {\r\n    super(`${cssPrefix}-scroll-bar-y`);\r\n    this.option = Utils.mergeDeep({\r\n      style: {},\r\n      scroll: to => to,\r\n    }, option);\r\n    this.lastBut = h('div', `${cssPrefix}-scroll-bar-y-last-but`);\r\n    this.nextBut = h('div', `${cssPrefix}-scroll-bar-y-next-but`);\r\n    this.content = h('div', `${cssPrefix}-scroll-bar-y-content`);\r\n    this.block = h('div', `${cssPrefix}-scroll-bar-y-block`);\r\n    this.content.children(this.block);\r\n    this.children(...[\r\n      this.lastBut,\r\n      this.nextBut,\r\n      this.content,\r\n    ]);\r\n    this.blockTop = 0;\r\n    this.maxBlockTop = 0;\r\n    this.blockHeight = 0;\r\n    this.minBlockHeight = 20;\r\n    this.scrollTo = 0;\r\n    this.contentHeight = 0;\r\n    this.viewPortHeight = 0;\r\n    this.isHide = true;\r\n    this.css(this.option.style);\r\n    this.hide();\r\n    this.bind();\r\n  }\r\n\r\n  bind() {\r\n    EventBind.bind(this.block, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (evt1) => {\r\n      if (evt1.button !== 0) return;\r\n      const downEventXy = this.computeEventXy(evt1, this.block);\r\n      EventBind.mouseMoveUp(h(document), (evt2) => {\r\n        // 计算移动的距离\r\n        const moveEventXy = this.computeEventXy(evt2, this.content);\r\n        let top = moveEventXy.y - downEventXy.y;\r\n        if (top < 0) top = 0;\r\n        if (top > this.maxBlockTop) top = this.maxBlockTop;\r\n        // 计算滑动的距离\r\n        this.blockTop = top;\r\n        this.scrollTo = this.computeScrollTo(this.blockTop);\r\n        this.block.css('top', `${top}px`);\r\n        this.option.scroll(this.scrollTo);\r\n        evt2.stopPropagation();\r\n        evt2.preventDefault();\r\n      });\r\n    });\r\n  }\r\n\r\n  setSize(viewPortHeight, contentHeight) {\r\n    if (viewPortHeight < contentHeight) {\r\n      this.isHide = false;\r\n      this.show();\r\n      // 计算滑块高度\r\n      const contentBox = this.content.box();\r\n      const blockHeight = viewPortHeight / contentHeight * contentBox.height;\r\n      this.blockHeight = blockHeight < this.minBlockHeight ? this.minBlockHeight : blockHeight;\r\n      this.viewPortHeight = viewPortHeight;\r\n      this.contentHeight = contentHeight;\r\n      this.maxBlockTop = contentBox.height - this.blockHeight;\r\n      this.block.css('height', `${this.blockHeight}px`);\r\n      // 计算滑块位置\r\n      const blockTop = (this.scrollTo / (contentHeight - viewPortHeight)) * this.maxBlockTop;\r\n      this.blockTop = blockTop > this.maxBlockTop ? this.maxBlockTop : blockTop;\r\n      this.scrollTo = this.computeScrollTo(this.blockTop);\r\n      this.block.css('top', `${this.blockTop}px`);\r\n    } else {\r\n      this.isHide = true;\r\n      this.hide();\r\n      this.option.scroll(0);\r\n    }\r\n  }\r\n\r\n  scrollMove(move) {\r\n    let to = move;\r\n    const maxTo = this.contentHeight - this.viewPortHeight;\r\n    if (to > maxTo) to = maxTo; else if (to < 0) to = 0;\r\n    const blockTop = (to / (this.contentHeight - this.viewPortHeight)) * this.maxBlockTop;\r\n    this.blockTop = blockTop > this.maxBlockTop ? this.maxBlockTop : blockTop;\r\n    if (this.scrollTo !== to) {\r\n      this.scrollTo = to;\r\n      this.block.css('top', `${this.blockTop}px`);\r\n      this.option.scroll(this.scrollTo);\r\n    }\r\n  }\r\n\r\n  computeScrollTo(move) {\r\n    return (move / this.maxBlockTop) * (this.contentHeight - this.viewPortHeight);\r\n  }\r\n}\r\n\r\nexport { ScrollBarY };\r\n","import { Element } from '../Element';\r\nimport { cssPrefix } from '../../config';\r\nimport { Utils } from '../../utils/Utils';\r\n\r\nclass HorizontalLayerElement extends Element {\r\n  constructor(element, options) {\r\n    super('div', `${cssPrefix}-horizontal-layer-element`);\r\n    this.options = Utils.mergeDeep({\r\n      style: {\r\n        flexGrow: '0',\r\n      },\r\n    }, options);\r\n    this.element = element;\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    this.css(this.options.style);\r\n    this.children(this.element);\r\n  }\r\n}\r\n\r\nexport { HorizontalLayerElement };\r\n","import { Element } from '../Element';\r\nimport { cssPrefix } from '../../config';\r\nimport { Utils } from '../../utils/Utils';\r\n\r\nclass HorizontalLayer extends Element {\r\n  constructor(options) {\r\n    super('div', `${cssPrefix}-horizontal-layer`);\r\n    this.options = Utils.mergeDeep({\r\n      layerElements: [],\r\n      style: {},\r\n    }, options);\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    this.css(this.options.style);\r\n    // eslint-disable-next-line no-restricted-syntax\r\n    for (const layerElement of this.options.layerElements) this.children(layerElement);\r\n  }\r\n}\r\n\r\nexport { HorizontalLayer };\r\n","/* global document window */\r\n\r\nimport { Widget } from '../../lib/Widget';\r\nimport { cssPrefix } from '../../config';\r\nimport { h } from '../../lib/Element';\r\nimport { ScrollBarX } from '../scrollbar/ScrollBarX';\r\nimport { ScrollBarY } from '../scrollbar/ScrollBarY';\r\nimport { Utils } from '../../utils/Utils';\r\nimport { HorizontalLayerElement } from '../../lib/layer/HorizontalLayerElement';\r\nimport { HorizontalLayer } from '../../lib/layer/HorizontalLayer';\r\nimport { VerticalLayer } from '../../lib/layer/VerticalLayer';\r\nimport { VerticalLayerElement } from '../../lib/layer/VerticalLayerElement';\r\nimport { EventBind } from '../../utils/EventBind';\r\nimport { Constant } from '../../utils/Constant';\r\n\r\nconst EL_POPUP_POSITION = {\r\n  TOP: 1,\r\n  LEFT: 2,\r\n  BOTTOM: 3,\r\n  RIGHT: 4,\r\n};\r\n\r\nconst POOL = [];\r\n\r\nclass ElPopUp extends Widget {\r\n\r\n  constructor(options) {\r\n    super(`${cssPrefix}-el-pop-up`);\r\n    this.options = Utils.mergeDeep({\r\n      position: EL_POPUP_POSITION.BOTTOM,\r\n      el: null,\r\n    }, options);\r\n    this.off = true;\r\n    this.content = h('div', `${cssPrefix}-el-pop-up-content`);\r\n    this.scrollBarX = new ScrollBarX();\r\n    this.scrollBarY = new ScrollBarY();\r\n    const contentLayerHorizontalElement = new HorizontalLayerElement(this.content, {\r\n      style: {\r\n        flexGrow: 1,\r\n      },\r\n    });\r\n    const scrollBarYLayerHorizontalElement = new HorizontalLayerElement(this.scrollBarY, {\r\n      style: {\r\n        overflow: 'inherit',\r\n      },\r\n    });\r\n    const horizontalLayer = new HorizontalLayer({\r\n      layerElements: [contentLayerHorizontalElement, scrollBarYLayerHorizontalElement],\r\n    });\r\n    const contentVerticalLayerElement = new VerticalLayerElement(horizontalLayer);\r\n    const scrollBarXVerticalLayerElement = new VerticalLayerElement(this.scrollBarX);\r\n    const verticalLayer = new VerticalLayer({\r\n      layerElements: [contentVerticalLayerElement, scrollBarXVerticalLayerElement],\r\n    });\r\n    super.children(verticalLayer);\r\n    this.bind();\r\n    POOL.push(this);\r\n  }\r\n\r\n  bind() {\r\n    EventBind.bind(window, Constant.SYSTEM_EVENT_TYPE.RESIZE, () => {\r\n      this.position();\r\n      this.scrollbar();\r\n    });\r\n  }\r\n\r\n  children(...args) {\r\n    this.content.children(...args);\r\n  }\r\n\r\n  position() {\r\n    const { content } = this;\r\n    const { el, position } = this.options;\r\n    const elBox = el.box();\r\n    const contentBox = content.box();\r\n    let { top, left } = elBox;\r\n    switch (position) {\r\n      case EL_POPUP_POSITION.TOP:\r\n        top = elBox.top - contentBox.height;\r\n        break;\r\n      case EL_POPUP_POSITION.LEFT:\r\n        left = elBox.left - contentBox.width;\r\n        break;\r\n      case EL_POPUP_POSITION.RIGHT:\r\n        left = elBox.left + elBox.width;\r\n        break;\r\n      case EL_POPUP_POSITION.BOTTOM:\r\n        top = elBox.top + elBox.height;\r\n        break;\r\n      default: break;\r\n    }\r\n    const maxWidth = window.innerWidth;\r\n    const maxHeight = window.innerHeight;\r\n    if (left < 0 || left + contentBox.width > maxWidth) {\r\n      // 左右颠倒\r\n      switch (position) {\r\n        case EL_POPUP_POSITION.LEFT:\r\n          left = elBox.left + elBox.width;\r\n          break;\r\n        case EL_POPUP_POSITION.RIGHT:\r\n          left = elBox.left - contentBox.width;\r\n          break;\r\n        default: break;\r\n      }\r\n    }\r\n    if (top < 0 || top + contentBox.height > maxHeight) {\r\n      // 上下颠倒\r\n      switch (position) {\r\n        case EL_POPUP_POSITION.TOP:\r\n          top = elBox.top + elBox.height;\r\n          break;\r\n        case EL_POPUP_POSITION.BOTTOM:\r\n          top = elBox.top - contentBox.height;\r\n          break;\r\n        default: break;\r\n      }\r\n    }\r\n    if (left < 0 || left + contentBox.width > maxWidth) {\r\n      top = elBox.top + elBox.height;\r\n      ({ left } = elBox);\r\n    }\r\n    if (top < 0 || top + contentBox.height > maxHeight) {\r\n      top = elBox.top + elBox.height;\r\n      ({ left } = elBox);\r\n    }\r\n    this.offset({\r\n      top,\r\n      left,\r\n    });\r\n  }\r\n\r\n  scrollbar() {\r\n    const { content } = this;\r\n    const contentBox = content.box();\r\n    const box = this.box();\r\n    this.scrollBarY.setSize(box.height, contentBox.height);\r\n    this.scrollBarX.setSize(box.width, contentBox.width);\r\n  }\r\n\r\n  open() {\r\n    if (this.off) {\r\n      h(document.body).children(this);\r\n      this.position();\r\n      this.scrollbar();\r\n      this.off = false;\r\n    }\r\n  }\r\n\r\n  close() {\r\n    if (this.off === false) {\r\n      h(document.body).remove(this);\r\n      this.off = true;\r\n    }\r\n  }\r\n\r\n  static closeAll(filter = []) {\r\n    POOL.forEach((item) => {\r\n      if (filter.indexOf(item) === -1) {\r\n        item.close();\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport { ElPopUp, EL_POPUP_POSITION };\r\n","/* global document */\r\nimport { cssPrefix } from '../../config';\r\nimport { EventBind } from '../../utils/EventBind';\r\nimport { Constant } from '../../utils/Constant';\r\nimport { Widget } from '../../lib/Widget';\r\nimport { ElPopUp } from '../elpopup/ElPopUp';\r\nimport { Utils } from '../../utils/Utils';\r\n\r\nclass ELContextMenu extends Widget {\r\n\r\n  constructor(className = '', options = {}) {\r\n    super(`${cssPrefix}-el-context-menu ${className}`);\r\n    this.options = Utils.mergeDeep({}, options);\r\n    this.menus = [];\r\n    // 环绕元素弹层组件\r\n    this.elPopUp = new ElPopUp(this.options);\r\n    this.elPopUp.children(this);\r\n    this.bind();\r\n  }\r\n\r\n  bind() {\r\n    EventBind.bind(this, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (event) => {\r\n      event.stopPropagation();\r\n      event.preventDefault();\r\n    });\r\n    EventBind.bind(document.body, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, () => {\r\n      this.close();\r\n    });\r\n  }\r\n\r\n  addItem(item) {\r\n    const { menus } = this;\r\n    menus.push(item);\r\n    this.children(item);\r\n    return this;\r\n  }\r\n\r\n  open() {\r\n    this.elPopUp.open();\r\n    return this;\r\n  }\r\n\r\n  close() {\r\n    this.elPopUp.close();\r\n    return this;\r\n  }\r\n\r\n  isOpen() {\r\n    return this.elPopUp.off;\r\n  }\r\n}\r\n\r\nexport { ELContextMenu };\r\n","import { Widget } from '../../lib/Widget';\r\nimport { cssPrefix } from '../../config';\r\n\r\nclass ELContextMenuItem extends Widget {\r\n  constructor(className = '') {\r\n    super(`${cssPrefix}-el-context-menu-item hover ${className}`);\r\n  }\r\n}\r\n\r\nexport { ELContextMenuItem };\r\n","import { h } from '../../../../../lib/Element';\r\nimport { cssPrefix } from '../../../../../config';\r\nimport { ELContextMenuItem } from '../../../../../component/elcontextmenu/ELContextMenuItem';\r\nimport { Icon } from '../../Icon';\r\n\r\nconst pool = [];\r\n\r\nclass FormatContextMenuItem extends ELContextMenuItem {\r\n  constructor(title, desc) {\r\n    super(`${cssPrefix}-format-context-menu-item`);\r\n    this.title = title;\r\n    this.desc = desc;\r\n    this.icon = new Icon('checked');\r\n    this.iconElement = h('div', `${cssPrefix}-format-context-menu-item-icon`);\r\n    this.iconElement.children(this.icon);\r\n    this.titleElement = h('div', `${cssPrefix}-format-context-menu-item-title`);\r\n    this.descElement = h('div', `${cssPrefix}-format-context-menu-item-desc`);\r\n    this.titleElement.text(title);\r\n    this.descElement.text(desc);\r\n    this.children(this.iconElement);\r\n    this.children(this.titleElement);\r\n    this.children(this.descElement);\r\n    pool.push(this);\r\n  }\r\n\r\n  setTitle(title) {\r\n    this.titleElement.text(title);\r\n  }\r\n\r\n  setDesc(desc) {\r\n    this.descElement.text(desc);\r\n  }\r\n\r\n  setActive() {\r\n    pool.forEach((item) => {\r\n      item.removeClass('active');\r\n    });\r\n    this.addClass('active');\r\n  }\r\n}\r\n\r\nexport { FormatContextMenuItem };\r\n","import { cssPrefix } from '../../config';\r\nimport { Widget } from '../../lib/Widget';\r\n\r\nclass ELContextMenuDivider extends Widget {\r\n  constructor() {\r\n    super(`${cssPrefix}-el-context-menu-item-divider`);\r\n  }\r\n}\r\n\r\nexport { ELContextMenuDivider };\r\n","import { cssPrefix } from '../../../../../config';\r\nimport { ELContextMenu } from '../../../../../component/elcontextmenu/ELContextMenu';\r\nimport { FormatContextMenuItem } from './FormatContextMenuItem';\r\nimport { ELContextMenuDivider } from '../../../../../component/elcontextmenu/ELContextMenuDivider';\r\nimport { Constant } from '../../../../../utils/Constant';\r\nimport { Utils } from '../../../../../utils/Utils';\r\n\r\nclass FormatContextMenu extends ELContextMenu {\r\n  constructor(options = {}) {\r\n    super(`${cssPrefix}-format-context-menu`, Utils.mergeDeep({\r\n      onUpdate: () => {},\r\n    }, options));\r\n    this.items = [\r\n      new FormatContextMenuItem('常规', '').data('type', 'default'),\r\n      new FormatContextMenuItem('文本', '').data('type', 'text'),\r\n      new ELContextMenuDivider(),\r\n      new FormatContextMenuItem('数值', '0.59').data('type', 'number'),\r\n      new FormatContextMenuItem('百分比', '90.00%').data('type', 'percentage'),\r\n      new FormatContextMenuItem('分数', '1/2').data('type', 'fraction'),\r\n      new FormatContextMenuItem('科学计数', '9.50e-01').data('type', 'ENotation'),\r\n      new ELContextMenuDivider(),\r\n      new FormatContextMenuItem('人民币', '￥5.00').data('type', 'rmb'),\r\n      new FormatContextMenuItem('港币', 'HK5.00').data('type', 'hk'),\r\n      new FormatContextMenuItem('美元', '$5.00').data('type', 'dollar'),\r\n      new ELContextMenuDivider(),\r\n      new FormatContextMenuItem('日期', '2018/4/18').data('type', 'date1'),\r\n      new FormatContextMenuItem('日期', '4月18日').data('type', 'date2'),\r\n      new FormatContextMenuItem('日期', '2018年4月').data('type', 'date3'),\r\n      new FormatContextMenuItem('日期', '2018年4月18日').data('type', 'date4'),\r\n      new FormatContextMenuItem('日期', '2018/4/18 14:30:30').data('type', 'date5'),\r\n      new FormatContextMenuItem('时间', '14:30:30').data('type', 'time'),\r\n      new ELContextMenuDivider(),\r\n      new FormatContextMenuItem('更多格式', ''),\r\n    ];\r\n    this.items.forEach((item) => {\r\n      if (item instanceof FormatContextMenuItem && item.data('type')) {\r\n        item.on(Constant.SYSTEM_EVENT_TYPE.CLICK, () => {\r\n          this.update(item.data('type'), item.title);\r\n          item.setActive();\r\n        });\r\n      }\r\n      this.addItem(item);\r\n    });\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    const { options, items } = this;\r\n    const { el } = options;\r\n    const first = items[0];\r\n    el.setTitle(first.title);\r\n    first.setActive();\r\n  }\r\n\r\n  update(format, title) {\r\n    const { options } = this;\r\n    options.onUpdate(format, title);\r\n    this.close();\r\n  }\r\n\r\n  setActiveByType(type) {\r\n    this.items.forEach((item) => {\r\n      if (item.data('type') === type) {\r\n        item.setActive();\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport { FormatContextMenu };\r\n","import { DropDownItem } from './base/DropDownItem';\r\nimport { cssPrefix } from '../../../config';\r\nimport { FormatContextMenu } from './contextmenu/format/FormatContextMenu';\r\nimport { EL_POPUP_POSITION } from '../../../component/elpopup/ElPopUp';\r\nimport { Utils } from '../../../utils/Utils';\r\n\r\nclass Format extends DropDownItem {\r\n  constructor(options) {\r\n    super(`${cssPrefix}-tools-format`);\r\n    this.options = Utils.copyProp({\r\n      contextMenu: {},\r\n    }, options);\r\n    this.setTitle('常规');\r\n    this.setWidth(50);\r\n    this.setEllipsis();\r\n    this.formatContextMenu = new FormatContextMenu(Utils.copyProp({\r\n      el: this,\r\n      position: EL_POPUP_POSITION.BOTTOM,\r\n    }, this.options.contextMenu));\r\n  }\r\n}\r\n\r\nexport { Format };\r\n","import { ELContextMenuItem } from '../../../../../component/elcontextmenu/ELContextMenuItem';\r\nimport { cssPrefix } from '../../../../../config';\r\nimport { h } from '../../../../../lib/Element';\r\nimport { Icon } from '../../Icon';\r\n\r\nconst pool = [];\r\n\r\nclass FontContextMenuItem extends ELContextMenuItem {\r\n  constructor(title) {\r\n    super(`${cssPrefix}-font-context-menu-item`);\r\n    this.title = title;\r\n    this.icon = new Icon('checked');\r\n    this.iconElement = h('div', `${cssPrefix}-font-context-menu-item-icon`);\r\n    this.iconElement.children(this.icon);\r\n    this.titleElement = h('div', `${cssPrefix}-font-context-menu-item-title`);\r\n    this.titleElement.text(title);\r\n    this.titleElement.css('font-family', title);\r\n    this.children(this.iconElement);\r\n    this.children(this.titleElement);\r\n    pool.push(this);\r\n  }\r\n\r\n  setTitle(title) {\r\n    this.title = title;\r\n    this.titleElement.text(title);\r\n  }\r\n\r\n  setActive() {\r\n    pool.forEach((item) => {\r\n      item.removeClass('active');\r\n    });\r\n    this.addClass('active');\r\n  }\r\n}\r\n\r\nexport { FontContextMenuItem };\r\n","import { ELContextMenu } from '../../../../../component/elcontextmenu/ELContextMenu';\r\nimport { cssPrefix } from '../../../../../config';\r\nimport { Utils } from '../../../../../utils/Utils';\r\nimport { FontContextMenuItem } from './FontContextMenuItem';\r\nimport { Constant } from '../../../../../utils/Constant';\r\n\r\nclass FontContextMenu extends ELContextMenu {\r\n  constructor(options = {}) {\r\n    super(`${cssPrefix}-font-context-menu`, Utils.mergeDeep({\r\n      onUpdate: () => {},\r\n    }, options));\r\n    this.items = [\r\n      new FontContextMenuItem('Arial'),\r\n      new FontContextMenuItem('Helvetica'),\r\n      new FontContextMenuItem('Source Sans Pro'),\r\n      new FontContextMenuItem('Comic Sans Ms'),\r\n      new FontContextMenuItem('Courier New'),\r\n      new FontContextMenuItem('Verdana'),\r\n      new FontContextMenuItem('Lalo'),\r\n    ];\r\n    this.items.forEach((item) => {\r\n      item.on(Constant.SYSTEM_EVENT_TYPE.CLICK, () => {\r\n        this.update(item.title);\r\n        item.setActive();\r\n      });\r\n      this.addItem(item);\r\n    });\r\n    this.setActiveByType(this.items[0].title);\r\n  }\r\n\r\n  update(type) {\r\n    const { options } = this;\r\n    options.onUpdate(type);\r\n    this.close();\r\n  }\r\n\r\n  setActiveByType(type) {\r\n    this.items.forEach((item) => {\r\n      if (item.title === type) {\r\n        item.setActive();\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport { FontContextMenu };\r\n","import { DropDownItem } from './base/DropDownItem';\r\nimport { cssPrefix } from '../../../config';\r\nimport { Utils } from '../../../utils/Utils';\r\nimport { EL_POPUP_POSITION } from '../../../component/elpopup/ElPopUp';\r\nimport { FontContextMenu } from './contextmenu/font/FontContextMenu';\r\n\r\nclass Font extends DropDownItem {\r\n  constructor(options) {\r\n    super(`${cssPrefix}-tools-font`);\r\n    this.options = Utils.copyProp({\r\n      contextMenu: {},\r\n    }, options);\r\n    this.setTitle('Arial');\r\n    this.setWidth(50);\r\n    this.setEllipsis();\r\n    this.fontContextMenu = new FontContextMenu(Utils.copyProp({\r\n      el: this,\r\n      position: EL_POPUP_POSITION.BOTTOM,\r\n    }, this.options.contextMenu));\r\n  }\r\n}\r\n\r\nexport { Font };\r\n","import { ELContextMenuItem } from '../../../../../component/elcontextmenu/ELContextMenuItem';\r\nimport { cssPrefix } from '../../../../../config';\r\nimport { h } from '../../../../../lib/Element';\r\n\r\nclass FontSizeContextMenuItem extends ELContextMenuItem {\r\n  constructor(size) {\r\n    super(`${cssPrefix}-font-size-context-menu-item`);\r\n    this.size = size;\r\n    this.titleElement = h('div', `${cssPrefix}-font-size-context-menu-item-title`);\r\n    this.titleElement.text(size);\r\n    this.titleElement.css('text-align', 'center');\r\n    this.children(this.titleElement);\r\n  }\r\n}\r\n\r\nexport { FontSizeContextMenuItem };\r\n","import { ELContextMenu } from '../../../../../component/elcontextmenu/ELContextMenu';\r\nimport { Utils } from '../../../../../utils/Utils';\r\nimport { cssPrefix } from '../../../../../config';\r\nimport { FontSizeContextMenuItem } from './FontSizeContextMenuItem';\r\nimport { Constant } from '../../../../../utils/Constant';\r\n\r\nclass FontSizeContextMenu extends ELContextMenu {\r\n  constructor(options = {}) {\r\n    super(`${cssPrefix}-font-size-context-menu`, Utils.mergeDeep({\r\n      onUpdate: () => {},\r\n    }, options));\r\n    this.items = [\r\n      new FontSizeContextMenuItem(6),\r\n      new FontSizeContextMenuItem(7),\r\n      new FontSizeContextMenuItem(8),\r\n      new FontSizeContextMenuItem(9),\r\n      new FontSizeContextMenuItem(10),\r\n      new FontSizeContextMenuItem(11),\r\n      new FontSizeContextMenuItem(12),\r\n      new FontSizeContextMenuItem(14),\r\n      new FontSizeContextMenuItem(15),\r\n      new FontSizeContextMenuItem(18),\r\n      new FontSizeContextMenuItem(24),\r\n      new FontSizeContextMenuItem(36),\r\n    ];\r\n    this.items.forEach((item) => {\r\n      item.on(Constant.SYSTEM_EVENT_TYPE.CLICK, () => {\r\n        this.update(item.size);\r\n      });\r\n      this.addItem(item);\r\n    });\r\n  }\r\n\r\n  update(size) {\r\n    const { options } = this;\r\n    options.onUpdate(size);\r\n    this.close();\r\n  }\r\n}\r\n\r\nexport { FontSizeContextMenu };\r\n","import { DropDownItem } from './base/DropDownItem';\r\nimport { cssPrefix } from '../../../config';\r\nimport { FontSizeContextMenu } from './contextmenu/fontsize/FontSizeContextMenu';\r\nimport { Utils } from '../../../utils/Utils';\r\nimport { EL_POPUP_POSITION } from '../../../component/elpopup/ElPopUp';\r\n\r\nclass FontSize extends DropDownItem {\r\n  constructor(options = { contextMenu: {} }) {\r\n    super(`${cssPrefix}-tools-font-size`);\r\n    this.options = options;\r\n    this.setTitle('10');\r\n    this.setWidth(30);\r\n    this.setEllipsis();\r\n    this.fontSizeContextMenu = new FontSizeContextMenu(Utils.copyProp({\r\n      el: this,\r\n      position: EL_POPUP_POSITION.BOTTOM,\r\n    }, this.options.contextMenu));\r\n  }\r\n}\r\n\r\nexport { FontSize };\r\n","import { cssPrefix } from '../../../config';\r\nimport { Icon } from './Icon';\r\nimport { Item } from './base/Item';\r\n\r\nclass FontBold extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-font-bold`);\r\n    this.icon = new Icon('font-bold');\r\n    this.children(this.icon);\r\n  }\r\n}\r\n\r\nexport { FontBold };\r\n","import { cssPrefix } from '../../../config';\r\nimport { Icon } from './Icon';\r\nimport { Item } from './base/Item';\r\n\r\nclass FontItalic extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-font-italic`);\r\n    this.icon = new Icon('font-italic');\r\n    this.children(this.icon);\r\n  }\r\n}\r\n\r\nexport { FontItalic };\r\n","import { cssPrefix } from '../../../config';\r\nimport { Icon } from './Icon';\r\nimport { Item } from './base/Item';\r\n\r\nclass UnderLine extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-under-line`);\r\n    this.icon = new Icon('under-line');\r\n    this.children(this.icon);\r\n  }\r\n}\r\n\r\nexport { UnderLine };\r\n","import { Item } from './base/Item';\r\nimport { cssPrefix } from '../../../config';\r\nimport { Icon } from './Icon';\r\n\r\nclass FontStrike extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-font-strike`);\r\n    this.icon = new Icon('font-strike');\r\n    this.children(this.icon);\r\n  }\r\n}\r\n\r\nexport { FontStrike };\r\n","import { ELContextMenuItem } from '../../../../../component/elcontextmenu/ELContextMenuItem';\r\nimport { cssPrefix } from '../../../../../config';\r\nimport { h } from '../../../../../lib/Element';\r\n\r\nclass FontColorContextMenuItem extends ELContextMenuItem {\r\n  constructor(title, icon) {\r\n    super(`${cssPrefix}-font-color-context-menu-item`);\r\n    this.title = title;\r\n    this.icon = icon;\r\n    if (icon) {\r\n      this.iconElement = h('div', `${cssPrefix}-font-color-context-menu-item-icon`);\r\n      this.iconElement.children(this.icon);\r\n      this.children(this.iconElement);\r\n    }\r\n    if (title) {\r\n      this.titleElement = h('div', `${cssPrefix}-font-color-context-menu-item-title`);\r\n      this.titleElement.text(title);\r\n      this.children(this.titleElement);\r\n    }\r\n  }\r\n}\r\n\r\nexport { FontColorContextMenuItem };\r\n","/* global document */\r\nimport { Widget } from '../../lib/Widget';\r\nimport { cssPrefix } from '../../config';\r\nimport { EventBind } from '../../utils/EventBind';\r\nimport { Constant } from '../../utils/Constant';\r\nimport { h } from '../../lib/Element';\r\nimport { Utils } from '../../utils/Utils';\r\n\r\nconst POOL = [];\r\n\r\nconst DRAG_PANEL_POSITION = {\r\n  LEFT: 1,\r\n  TOP: 2,\r\n  RIGHT: 3,\r\n  CENTER: 4,\r\n};\r\n\r\nclass DragPanel extends Widget {\r\n  constructor(options) {\r\n    super(`${cssPrefix}-drag-panel`);\r\n    this.options = Utils.mergeDeep({\r\n      position: DRAG_PANEL_POSITION.CENTER,\r\n    }, options);\r\n    this.off = true;\r\n    this.mask = h('div', `${cssPrefix}-drag-panel-mask`);\r\n    this.content = h('div', `${cssPrefix}-drag-panel-content`);\r\n    super.children(this.content);\r\n    this.bind();\r\n    POOL.push(this);\r\n  }\r\n\r\n  bind() {\r\n    const { mask } = this;\r\n    EventBind.bind(mask, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      this.close();\r\n      e.stopPropagation();\r\n    });\r\n    EventBind.bind(this, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (evt1) => {\r\n      if (evt1.button !== 0) return;\r\n      const downEventXy = this.computeEventXy(evt1, this);\r\n      EventBind.mouseMoveUp(h(document), (evt2) => {\r\n        // 计算移动的距离\r\n        const top = evt2.pageY - downEventXy.y;\r\n        const left = evt2.pageX - downEventXy.x;\r\n        this.offset({ top, left });\r\n        evt2.stopPropagation();\r\n        evt2.preventDefault();\r\n      });\r\n      evt1.stopPropagation();\r\n      evt1.preventDefault();\r\n    });\r\n  }\r\n\r\n  position() {\r\n    const { options } = this;\r\n    const { position } = options;\r\n    const { width, height } = Utils.viewPort();\r\n    const box = this.box();\r\n    switch (position) {\r\n      case DRAG_PANEL_POSITION.LEFT:\r\n        break;\r\n      case DRAG_PANEL_POSITION.RIGHT:\r\n        break;\r\n      case DRAG_PANEL_POSITION.TOP:\r\n        break;\r\n      case DRAG_PANEL_POSITION.CENTER:\r\n        this.offset({\r\n          left: width / 2 - box.width / 2,\r\n          top: height / 2 - box.height / 2,\r\n        });\r\n        break;\r\n      default: break;\r\n    }\r\n  }\r\n\r\n  open() {\r\n    if (this.off) {\r\n      const { mask } = this;\r\n      h(document.body).children(mask);\r\n      h(document.body).children(this);\r\n      this.position();\r\n      this.off = false;\r\n    }\r\n  }\r\n\r\n  close() {\r\n    if (this.off === false) {\r\n      const { mask } = this;\r\n      h(document.body).remove(this);\r\n      h(document.body).remove(mask);\r\n      this.off = true;\r\n    }\r\n  }\r\n\r\n  children(...args) {\r\n    this.content.children(...args);\r\n  }\r\n\r\n  static closeAll(filter = []) {\r\n    POOL.forEach((item) => {\r\n      if (filter.indexOf(item) === -1) {\r\n        item.close();\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport { DragPanel };\r\n","/* global document */\r\nimport { h } from '../../lib/Element';\r\nimport { cssPrefix } from '../../config';\r\nimport { Widget } from '../../lib/Widget';\r\nimport { DragPanel } from '../dragpanel/DragPanel';\r\nimport { EventBind } from '../../utils/EventBind';\r\nimport { Constant } from '../../utils/Constant';\r\nimport { Utils } from '../../utils/Utils';\r\n\r\nclass ColorPicker extends Widget {\r\n\r\n  constructor(options) {\r\n    super(`${cssPrefix}-color-picker`);\r\n    this.options = Utils.mergeDeep({\r\n      selectCb: () => {},\r\n    }, options);\r\n    // 拖拽组件\r\n    this.dragPanel = new DragPanel();\r\n    this.color = [360, 0, 100];\r\n    // 头部\r\n    this.preViewColorPoint = h('div', `${cssPrefix}-color-picker-pre-view-color-point`);\r\n    this.colorValueTips = h('div', `${cssPrefix}-color-picker-color-value-tips`);\r\n    this.colorValueTips.text('十六进制颜色值');\r\n    this.colorInput = h('input', `${cssPrefix}-color-picker-color-input`);\r\n    this.top = h('div', `${cssPrefix}-color-picker-top`);\r\n    this.top.children(this.preViewColorPoint);\r\n    this.top.children(this.colorValueTips);\r\n    this.top.children(this.colorInput);\r\n    // 中间部分\r\n    this.selectColorPoint = h('div', `${cssPrefix}-color-picker-select-color-point`);\r\n    this.selectColorArea1 = h('div', `${cssPrefix}-color-picker-select-color-area area1`);\r\n    this.selectColorArea2 = h('div', `${cssPrefix}-color-picker-select-color-area area2`);\r\n    this.selectColorArea3 = h('div', `${cssPrefix}-color-picker-select-color-area area3`);\r\n    this.center = h('div', `${cssPrefix}-color-picker-center`);\r\n    this.center.children(this.selectColorArea1);\r\n    this.center.children(this.selectColorArea2);\r\n    this.center.children(this.selectColorArea3);\r\n    this.center.children(this.selectColorPoint);\r\n    // 底部\r\n    this.colorHuxTips = h('div', `${cssPrefix}-color-picker-color-hux-tips`);\r\n    this.colorBar = h('div', `${cssPrefix}-color-picker-color-bar`);\r\n    this.colorBarPoint = h('div', `${cssPrefix}-color-picker-bar-point`);\r\n    this.bottom = h('div', `${cssPrefix}-color-picker-bottom`);\r\n    this.colorHuxTips.text('HUE');\r\n    this.colorBar.children(this.colorBarPoint);\r\n    this.bottom.children(this.colorHuxTips);\r\n    this.bottom.children(this.colorBar);\r\n    // 按钮\r\n    this.cancelButton = h('div', `${cssPrefix}-color-picker-button cancel`);\r\n    this.selectButton = h('div', `${cssPrefix}-color-picker-button select`);\r\n    this.buttons = h('div', `${cssPrefix}-color-picker-buttons`);\r\n    this.cancelButton.text('取消');\r\n    this.selectButton.text('确定');\r\n    this.buttons.children(this.selectButton);\r\n    this.buttons.children(this.cancelButton);\r\n    this.children(this.top);\r\n    this.children(this.center);\r\n    this.children(this.bottom);\r\n    this.children(this.buttons);\r\n    this.dragPanel.children(this);\r\n    this.dragPanel.css('background', '#ffffff');\r\n    this.bind();\r\n  }\r\n\r\n  bind() {\r\n    const { selectColorPoint, center } = this;\r\n    const { colorBarPoint, colorBar } = this;\r\n    const { colorInput, cancelButton, selectButton } = this;\r\n    EventBind.bind(this, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      e.stopPropagation();\r\n    });\r\n    EventBind.bind(selectColorPoint, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e1) => {\r\n      const xy = this.computeEventXy(e1, center);\r\n      const centerBox = center.box();\r\n      if (xy.x < 0) xy.x = 0;\r\n      if (xy.x > centerBox.width) xy.x = centerBox.width;\r\n      if (xy.y < 0) xy.y = 0;\r\n      if (xy.y > centerBox.height) xy.y = centerBox.height;\r\n      this.downSelect(xy.x, xy.y, centerBox.width, centerBox.height);\r\n      EventBind.mouseMoveUp(h(document), (e2) => {\r\n        const xy = this.computeEventXy(e2, center);\r\n        if (xy.x < 0) xy.x = 0;\r\n        if (xy.x > centerBox.width) xy.x = centerBox.width;\r\n        if (xy.y < 0) xy.y = 0;\r\n        if (xy.y > centerBox.height) xy.y = centerBox.height;\r\n        this.moveSelect(xy.x, xy.y, centerBox.width, centerBox.height);\r\n      });\r\n    });\r\n    EventBind.bind(colorBarPoint, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e1) => {\r\n      const xy = this.computeEventXy(e1, colorBar);\r\n      const colorBarBox = colorBar.box();\r\n      if (xy.x < 0) xy.x = 0;\r\n      if (xy.x > colorBarBox.width) xy.x = colorBarBox.width;\r\n      this.downHue(xy.x, colorBarBox.width);\r\n      EventBind.mouseMoveUp(h(document), (e2) => {\r\n        const xy = this.computeEventXy(e2, colorBar);\r\n        const colorBarBox = colorBar.box();\r\n        if (xy.x < 0) xy.x = 0;\r\n        if (xy.x > colorBarBox.width) xy.x = colorBarBox.width;\r\n        this.moveHue(xy.x, colorBarBox.width);\r\n      });\r\n    });\r\n    EventBind.bind(colorInput, Constant.SYSTEM_EVENT_TYPE.CHANGE, () => {\r\n      const value = colorInput.val();\r\n      if (value) {\r\n        this.hexColor(value);\r\n      }\r\n    });\r\n    EventBind.bind(cancelButton, Constant.SYSTEM_EVENT_TYPE.CLICK, () => {\r\n      this.close();\r\n    });\r\n    EventBind.bind(selectButton, Constant.SYSTEM_EVENT_TYPE.CLICK, () => {\r\n      const { color } = this;\r\n      const hsb = ColorPicker.fixHsx({\r\n        h: parseInt(color[0], 10),\r\n        s: parseInt(color[1], 10),\r\n        x: parseInt(color[2], 10),\r\n      });\r\n      const colorValue = ColorPicker.hsbToHex(hsb);\r\n      this.options.selectCb(`#${colorValue}`);\r\n      this.close();\r\n    });\r\n  }\r\n\r\n  open(hex) {\r\n    const { dragPanel } = this;\r\n    dragPanel.open();\r\n    if (hex) {\r\n      if (ColorPicker.isRgb(hex)) {\r\n        const rgb = ColorPicker.parseRgb(hex);\r\n        // eslint-disable-next-line no-param-reassign\r\n        hex = ColorPicker.rgbToHex(rgb);\r\n      }\r\n      this.hexColor(hex);\r\n    } else {\r\n      this.change();\r\n    }\r\n    return this;\r\n  }\r\n\r\n  close() {\r\n    const { dragPanel } = this;\r\n    dragPanel.close();\r\n    return this;\r\n  }\r\n\r\n  sliderPosition(hsb) {\r\n    // hue 滑块位置\r\n    const { colorBar, colorBarPoint } = this;\r\n    const colorBarPointBox = colorBarPoint.box();\r\n    const colorBarBox = colorBar.box();\r\n    let colorBarPointLeft = parseInt(colorBarBox.width - colorBarBox.width * hsb.h / 360, 10);\r\n    colorBarPointLeft -= colorBarPointBox.width / 2;\r\n    colorBarPoint.offset({\r\n      left: colorBarPointLeft,\r\n    });\r\n    // select color 滑块位置\r\n    const { center, selectColorPoint } = this;\r\n    const selectColorPointBox = selectColorPoint.box();\r\n    const centerBox = center.box();\r\n    let selectColorPointLeft = parseInt(centerBox.width * hsb.s / 100, 10);\r\n    let selectColorPointTop = parseInt(centerBox.height * (100 - hsb.x) / 100, 10);\r\n    selectColorPointLeft -= selectColorPointBox.width / 2;\r\n    selectColorPointTop -= selectColorPointBox.height / 2;\r\n    selectColorPoint.offset({\r\n      left: selectColorPointLeft,\r\n      top: selectColorPointTop,\r\n    });\r\n  }\r\n\r\n  hueChange() {\r\n    const { color } = this;\r\n    const hsb = ColorPicker.fixHsx({\r\n      h: parseInt(color[0], 10),\r\n      s: parseInt(color[1], 10),\r\n      x: parseInt(color[2], 10),\r\n    });\r\n    const {\r\n      colorBarPoint, selectColorPoint, preViewColorPoint, selectColorArea1, colorInput,\r\n    } = this;\r\n    const colorValue = ColorPicker.hsbToHex(hsb);\r\n    const areaColorValue = ColorPicker.hsbToHex({ h: hsb.h, s: 100, x: 100 });\r\n    selectColorPoint.css('backgroundColor', `#${colorValue}`);\r\n    preViewColorPoint.css('backgroundColor', `#${colorValue}`);\r\n    colorBarPoint.css('backgroundColor', `#${areaColorValue}`);\r\n    selectColorArea1.css('backgroundColor', `#${areaColorValue}`);\r\n    colorInput.val(`#${colorValue}`);\r\n    this.sliderPosition(hsb);\r\n  }\r\n\r\n  selectChange() {\r\n    const { color } = this;\r\n    const hsb = ColorPicker.fixHsx({\r\n      h: parseInt(color[0], 10),\r\n      s: parseInt(color[1], 10),\r\n      x: parseInt(color[2], 10),\r\n    });\r\n    const { preViewColorPoint, selectColorPoint, colorInput } = this;\r\n    const colorValue = ColorPicker.hsbToHex(hsb);\r\n    selectColorPoint.css('backgroundColor', `#${colorValue}`);\r\n    preViewColorPoint.css('backgroundColor', `#${colorValue}`);\r\n    colorInput.val(`#${colorValue}`);\r\n    this.sliderPosition(hsb);\r\n  }\r\n\r\n  change() {\r\n    this.hueChange();\r\n    this.selectChange();\r\n  }\r\n\r\n  downSelect(x, y, width, height) {\r\n    const { color } = this;\r\n    color[1] = parseInt(100 * x / width, 10);\r\n    color[2] = parseInt(100 * (height - y) / height, 10);\r\n    this.selectChange();\r\n  }\r\n\r\n  moveSelect(x, y, width, height) {\r\n    const { color } = this;\r\n    color[1] = parseInt(100 * (Math.max(0, Math.min(width, x))) / width, 10);\r\n    color[2] = parseInt(100 * (height - Math.max(0, Math.min(height, y))) / height, 10);\r\n    this.selectChange();\r\n  }\r\n\r\n  downHue(x, width) {\r\n    const { color } = this;\r\n    color[0] = parseInt(360 * (width - x) / width, 10);\r\n    this.hueChange();\r\n  }\r\n\r\n  moveHue(x, width) {\r\n    const { color } = this;\r\n    color[0] = parseInt(360 * (width - Math.max(0, Math.min(width, x))) / width, 10);\r\n    this.hueChange();\r\n  }\r\n\r\n  hexColor(hex) {\r\n    const { color } = this;\r\n    const result = ColorPicker.hexToHsb(ColorPicker.fixHex(hex));\r\n    color[0] = result.h;\r\n    color[1] = result.s;\r\n    color[2] = result.x;\r\n    this.change();\r\n  }\r\n\r\n  static fixHex(hex) {\r\n    const len = 6 - hex.length;\r\n    if (len > 0) {\r\n      const o = [];\r\n      for (let i = 0; i < len; i += 1) {\r\n        o.push('0');\r\n      }\r\n      o.push(hex);\r\n      // eslint-disable-next-line no-param-reassign\r\n      hex = o.join('');\r\n    }\r\n    return hex;\r\n  }\r\n\r\n  static fixHsx(hsx) {\r\n    return {\r\n      h: Math.min(360, Math.max(0, hsx.h)),\r\n      s: Math.min(100, Math.max(0, hsx.s)),\r\n      x: Math.min(100, Math.max(0, hsx.x)),\r\n    };\r\n  }\r\n\r\n  static hexToRgb(hex) {\r\n    // eslint-disable-next-line no-redeclare,no-param-reassign\r\n    hex = parseInt(((hex.indexOf('#') > -1) ? hex.substring(1) : hex), 16);\r\n    // eslint-disable-next-line no-bitwise\r\n    return { r: hex >> 16, g: (hex & 0x00FF00) >> 8, b: (hex & 0x0000FF) };\r\n  }\r\n\r\n  static hexToHsb(hex) {\r\n    return this.rgbToHsb(this.hexToRgb(hex));\r\n  }\r\n\r\n  static rgbToHsb(rgb) {\r\n    const hsb = { h: 0, s: 0, x: 0 };\r\n    const min = Math.min(rgb.r, rgb.g, rgb.b);\r\n    const max = Math.max(rgb.r, rgb.g, rgb.b);\r\n    const delta = max - min;\r\n    hsb.x = max;\r\n    hsb.s = max !== 0 ? 255 * delta / max : 0;\r\n    if (hsb.s !== 0) {\r\n      if (rgb.r === max) hsb.h = (rgb.g - rgb.b) / delta;\r\n      else if (rgb.g === max) hsb.h = 2 + (rgb.b - rgb.r) / delta;\r\n      else hsb.h = 4 + (rgb.r - rgb.g) / delta;\r\n    } else hsb.h = -1;\r\n    hsb.h *= 60;\r\n    if (hsb.h < 0) hsb.h += 360;\r\n    hsb.s *= 100 / 255;\r\n    hsb.x *= 100 / 255;\r\n    return hsb;\r\n  }\r\n\r\n  static hsbToRgb(hsb) {\r\n    const rgb = {};\r\n    let { h } = hsb;\r\n    const s = hsb.s * 255 / 100;\r\n    const v = hsb.x * 255 / 100;\r\n    if (s === 0) {\r\n      rgb.r = v;\r\n      rgb.g = v;\r\n      rgb.b = v;\r\n    } else {\r\n      const t1 = v;\r\n      const t2 = (255 - s) * v / 255;\r\n      const t3 = (t1 - t2) * (h % 60) / 60;\r\n      if (h === 360) h = 0;\r\n      if (h < 60) {\r\n        rgb.r = t1;\r\n        rgb.b = t2;\r\n        rgb.g = t2 + t3;\r\n      } else if (h < 120) {\r\n        rgb.g = t1;\r\n        rgb.b = t2;\r\n        rgb.r = t1 - t3;\r\n      } else if (h < 180) {\r\n        rgb.g = t1;\r\n        rgb.r = t2;\r\n        rgb.b = t2 + t3;\r\n      } else if (h < 240) {\r\n        rgb.b = t1;\r\n        rgb.r = t2;\r\n        rgb.g = t1 - t3;\r\n      } else if (h < 300) {\r\n        rgb.b = t1;\r\n        rgb.g = t2;\r\n        rgb.r = t2 + t3;\r\n      } else if (h < 360) {\r\n        rgb.r = t1;\r\n        rgb.g = t2;\r\n        rgb.b = t1 - t3;\r\n      } else {\r\n        rgb.r = 0;\r\n        rgb.g = 0;\r\n        rgb.b = 0;\r\n      }\r\n    }\r\n    return { r: Math.round(rgb.r), g: Math.round(rgb.g), b: Math.round(rgb.b) };\r\n  }\r\n\r\n  static rgbToHex(rgb) {\r\n    const hex = [\r\n      rgb.r.toString(16),\r\n      rgb.g.toString(16),\r\n      rgb.b.toString(16),\r\n    ];\r\n    hex.forEach((val, nr) => {\r\n      if (val.length === 1) {\r\n        hex[nr] = `0${val}`;\r\n      }\r\n    });\r\n    return hex.join('');\r\n  }\r\n\r\n  static hsbToHex(hsb) {\r\n    return this.rgbToHex(this.hsbToRgb(hsb));\r\n  }\r\n\r\n  static isRgb(rgb) {\r\n    return rgb.startsWith('rgb');\r\n  }\r\n\r\n  static isHex(hex) {\r\n    return hex.startsWith('#');\r\n  }\r\n\r\n  static parseRgb(rgb) {\r\n    const rxp = /^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)$/;\r\n    const result = rgb.match(rxp);\r\n    return {\r\n      r: result[1],\r\n      g: result[2],\r\n      b: result[3],\r\n    };\r\n  }\r\n\r\n  static isDark(rgb) {\r\n    if (Utils.isBlank(rgb)) {\r\n      return false;\r\n    }\r\n    if (this.isHex(rgb)) {\r\n      const v = ColorPicker.hexToRgb(rgb);\r\n      // eslint-disable-next-line no-param-reassign\r\n      rgb = `rgb(${v.r}, ${v.g}, ${v.b})`;\r\n    }\r\n    const result = ColorPicker.parseRgb(rgb);\r\n    return result.r * 0.299 + result.g * 0.578 + result.b * 0.114 >= 192;\r\n  }\r\n}\r\n\r\nexport { ColorPicker };\r\n","import { Widget } from '../../lib/Widget';\r\nimport { cssPrefix } from '../../config';\r\nimport { Utils } from '../../utils/Utils';\r\nimport { Icon } from '../../core/work/tools/Icon';\r\nimport { ColorPicker } from '../colorpicker/ColorPicker';\r\n\r\nclass ColorItem extends Widget {\r\n  constructor(options) {\r\n    super(`${cssPrefix}-color-array-item`);\r\n    this.options = Utils.mergeDeep({\r\n      color: null,\r\n      icon: null,\r\n    }, options);\r\n    this.color = this.options.color;\r\n    this.icon = this.options.icon;\r\n    if (this.color) {\r\n      this.css('backgroundColor', this.color);\r\n      if (ColorPicker.isDark(this.options.color)) {\r\n        this.checkedIcon = new Icon('checked-dark');\r\n        this.children(this.checkedIcon);\r\n      } else {\r\n        this.checkedIcon = new Icon('checked-light');\r\n        this.children(this.checkedIcon);\r\n      }\r\n      this.checkedIcon.hide();\r\n    }\r\n    if (this.icon) {\r\n      this.children(this.options.icon);\r\n    }\r\n  }\r\n\r\n  setActive(active) {\r\n    if (this.checkedIcon) {\r\n      if (active) {\r\n        this.checkedIcon.show();\r\n      } else {\r\n        this.checkedIcon.hide();\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport { ColorItem };\r\n","import { Widget } from '../../lib/Widget';\r\nimport { cssPrefix } from '../../config';\r\nimport { ColorItem } from './ColorItem';\r\nimport { Utils } from '../../utils/Utils';\r\nimport { Constant } from '../../utils/Constant';\r\n\r\nclass ColorArray extends Widget {\r\n  constructor(options) {\r\n    super(`${cssPrefix}-color-array`);\r\n    this.options = Utils.mergeDeep({\r\n      colors: [\r\n        new ColorItem({ color: 'rgb(0,0,0)' }),\r\n        new ColorItem({ color: 'rgb(67, 67, 67)' }),\r\n        new ColorItem({ color: 'rgb(102, 102, 102)' }),\r\n        new ColorItem({ color: 'rgb(153, 153, 153)' }),\r\n        new ColorItem({ color: 'rgb(183, 183, 183)' }),\r\n        new ColorItem({ color: 'rgb(204, 204, 204)' }),\r\n        new ColorItem({ color: 'rgb(217, 217, 217)' }),\r\n        new ColorItem({ color: 'rgb(239, 239, 239)' }),\r\n        new ColorItem({ color: 'rgb(255, 255, 255)' }),\r\n\r\n        new ColorItem({ color: 'rgb(152, 0, 0)' }),\r\n        new ColorItem({ color: 'rgb(255, 0, 0)' }),\r\n        new ColorItem({ color: 'rgb(255, 153, 0)' }),\r\n        new ColorItem({ color: 'rgb(255, 255, 0)' }),\r\n        new ColorItem({ color: 'rgb(0, 255, 0)' }),\r\n        new ColorItem({ color: 'rgb(0, 255, 255)' }),\r\n        new ColorItem({ color: 'rgb(74, 134, 232)' }),\r\n        new ColorItem({ color: 'rgb(0, 0, 255)' }),\r\n        new ColorItem({ color: 'rgb(153, 0, 255)' }),\r\n        new ColorItem({ color: 'rgb(255, 0, 255)' }),\r\n\r\n        new ColorItem({ color: 'rgb(230, 184, 175)' }),\r\n        new ColorItem({ color: 'rgb(244, 204, 204)' }),\r\n        new ColorItem({ color: 'rgb(252, 229, 205)' }),\r\n        new ColorItem({ color: 'rgb(255, 242, 204)' }),\r\n        new ColorItem({ color: 'rgb(217, 234, 211)' }),\r\n        new ColorItem({ color: 'rgb(208, 224, 227)' }),\r\n        new ColorItem({ color: 'rgb(201, 218, 248)' }),\r\n        new ColorItem({ color: 'rgb(207, 226, 243)' }),\r\n        new ColorItem({ color: 'rgb(217, 210, 233)' }),\r\n        new ColorItem({ color: 'rgb(234, 209, 220)' }),\r\n\r\n        new ColorItem({ color: 'rgb(221, 126, 107)' }),\r\n        new ColorItem({ color: 'rgb(234, 153, 153)' }),\r\n        new ColorItem({ color: 'rgb(249, 203, 156)' }),\r\n        new ColorItem({ color: 'rgb(255, 229, 153)' }),\r\n        new ColorItem({ color: 'rgb(182, 215, 168)' }),\r\n        new ColorItem({ color: 'rgb(162, 196, 201)' }),\r\n        new ColorItem({ color: 'rgb(164, 194, 244)' }),\r\n        new ColorItem({ color: 'rgb(159, 197, 232)' }),\r\n        new ColorItem({ color: 'rgb(180, 167, 214)' }),\r\n        new ColorItem({ color: 'rgb(213, 166, 189)' }),\r\n\r\n        new ColorItem({ color: 'rgb(204, 65, 37)' }),\r\n        new ColorItem({ color: 'rgb(224, 102, 102)' }),\r\n        new ColorItem({ color: 'rgb(246, 178, 107)' }),\r\n        new ColorItem({ color: 'rgb(255, 217, 102)' }),\r\n        new ColorItem({ color: 'rgb(147, 196, 125)' }),\r\n        new ColorItem({ color: 'rgb(118, 165, 175)' }),\r\n        new ColorItem({ color: 'rgb(109, 158, 235)' }),\r\n        new ColorItem({ color: 'rgb(111, 168, 220)' }),\r\n        new ColorItem({ color: 'rgb(142, 124, 195)' }),\r\n        new ColorItem({ color: 'rgb(194, 123, 160)' }),\r\n\r\n        new ColorItem({ color: 'rgb(166, 28, 0)' }),\r\n        new ColorItem({ color: 'rgb(204, 0, 0)' }),\r\n        new ColorItem({ color: 'rgb(230, 145, 56)' }),\r\n        new ColorItem({ color: 'rgb(241, 194, 50)' }),\r\n        new ColorItem({ color: 'rgb(106, 168, 79)' }),\r\n        new ColorItem({ color: 'rgb(69, 129, 142)' }),\r\n        new ColorItem({ color: 'rgb(60, 120, 216)' }),\r\n        new ColorItem({ color: 'rgb(61, 133, 198)' }),\r\n        new ColorItem({ color: 'rgb(103, 78, 167)' }),\r\n        new ColorItem({ color: 'rgb(166, 77, 121)' }),\r\n\r\n        new ColorItem({ color: 'rgb(133, 32, 12)' }),\r\n        new ColorItem({ color: 'rgb(153, 0, 0)' }),\r\n        new ColorItem({ color: 'rgb(180, 95, 6)' }),\r\n        new ColorItem({ color: 'rgb(191, 144, 0)' }),\r\n        new ColorItem({ color: 'rgb(56, 118, 29)' }),\r\n        new ColorItem({ color: 'rgb(19, 79, 92)' }),\r\n        new ColorItem({ color: 'rgb(17, 85, 204)' }),\r\n        new ColorItem({ color: 'rgb(11, 83, 148)' }),\r\n        new ColorItem({ color: 'rgb(53, 28, 117)' }),\r\n        new ColorItem({ color: 'rgb(116, 27, 71)' }),\r\n\r\n        new ColorItem({ color: 'rgb(91, 15, 0)' }),\r\n        new ColorItem({ color: 'rgb(102, 0, 0)' }),\r\n        new ColorItem({ color: 'rgb(120, 63, 4)' }),\r\n        new ColorItem({ color: 'rgb(127, 96, 0)' }),\r\n        new ColorItem({ color: 'rgb(39, 78, 19)' }),\r\n        new ColorItem({ color: 'rgb(12, 52, 61)' }),\r\n        new ColorItem({ color: 'rgb(28, 69, 135)' }),\r\n        new ColorItem({ color: 'rgb(7, 55, 99)' }),\r\n        new ColorItem({ color: 'rgb(32, 18, 77)' }),\r\n        new ColorItem({ color: 'rgb(76, 17, 48)' }),\r\n      ],\r\n      selectCb: () => {},\r\n    }, options);\r\n    this.colors = this.options.colors;\r\n    this.activeColor = null;\r\n    this.colors.forEach((item) => {\r\n      this.children(item);\r\n      item.on(Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, () => {\r\n        this.options.selectCb(item);\r\n        if (item.options.color) {\r\n          this.setActiveByColor(item.options.color);\r\n        }\r\n      });\r\n    });\r\n    if (this.colors.length > 0) {\r\n      this.setActiveByColor(this.colors[0].options.color);\r\n    }\r\n  }\r\n\r\n  add(item) {\r\n    item.on(Constant.SYSTEM_EVENT_TYPE.CLICK, () => {\r\n      this.options.selectCb(item);\r\n      if (item.options.color) {\r\n        this.setActiveByColor(item.options.color);\r\n      }\r\n    });\r\n    this.colors.push(item);\r\n    this.children(item);\r\n  }\r\n\r\n  setActiveByColor(color) {\r\n    this.colors.forEach((item) => {\r\n      const { options } = item;\r\n      if (options.color === color) {\r\n        item.setActive(true);\r\n        this.activeColor = options.color;\r\n      } else {\r\n        item.setActive(false);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport { ColorArray };\r\n","import { ELContextMenu } from '../../../../../component/elcontextmenu/ELContextMenu';\r\nimport { cssPrefix } from '../../../../../config';\r\nimport { FontColorContextMenuItem } from './FontColorContextMenuItem';\r\nimport { ColorArray } from '../../../../../component/colorarray/ColorArray';\r\nimport { h } from '../../../../../lib/Element';\r\nimport { ColorItem } from '../../../../../component/colorarray/ColorItem';\r\nimport { ELContextMenuDivider } from '../../../../../component/elcontextmenu/ELContextMenuDivider';\r\nimport { Icon } from '../../Icon';\r\nimport { Utils } from '../../../../../utils/Utils';\r\nimport { Constant } from '../../../../../utils/Constant';\r\nimport { ColorPicker } from '../../../../../component/colorpicker/ColorPicker';\r\n\r\nclass FontColorContextMenu extends ELContextMenu {\r\n  constructor(options = {}) {\r\n    super(`${cssPrefix}-font-color-context-menu`, Utils.mergeDeep({\r\n      onUpdate: () => {},\r\n    }, options));\r\n    this.colorPicker = new ColorPicker({\r\n      selectCb: (color) => {\r\n        const item = new ColorItem({ color });\r\n        this.customizeColorArray.add(item);\r\n        this.customizeColorArray.setActiveByColor(color);\r\n        this.colorArray.setActiveByColor(null);\r\n        this.options.onUpdate(color);\r\n        this.close();\r\n      },\r\n    });\r\n    // 重置\r\n    this.reset = new FontColorContextMenuItem('重置', new Icon('clear-color'));\r\n    this.reset.on(Constant.SYSTEM_EVENT_TYPE.CLICK, () => {\r\n      this.options.onUpdate('rgb(0,0,0)');\r\n      this.customizeColorArray.setActiveByColor(null);\r\n      this.colorArray.setActiveByColor(null);\r\n    });\r\n    // 颜色筛选\r\n    this.array = new FontColorContextMenuItem();\r\n    this.array.removeClass('hover');\r\n    this.colorArray = new ColorArray({\r\n      selectCb: (item) => {\r\n        const { color } = item.options;\r\n        if (color) this.options.onUpdate(color);\r\n        this.customizeColorArray.setActiveByColor(null);\r\n        this.close();\r\n      },\r\n    });\r\n    this.array.children(this.colorArray);\r\n    // 历史选中\r\n    this.title = h('div', `${cssPrefix}-font-color-context-menu-color-title`);\r\n    this.title.text('自定义');\r\n    this.plus = new Icon('plus');\r\n    this.customizeColorArray = new ColorArray({\r\n      colors: [\r\n        new ColorItem({ icon: this.plus }),\r\n      ],\r\n      selectCb: (item) => {\r\n        const { color } = item.options;\r\n        if (color) {\r\n          this.options.onUpdate(color);\r\n          this.colorArray.setActiveByColor(null);\r\n          this.close();\r\n        } else {\r\n          this.colorPicker.open(this.customizeColorArray.activeColor);\r\n        }\r\n      },\r\n    });\r\n    this.customize = new FontColorContextMenuItem();\r\n    this.customize.removeClass('hover');\r\n    this.customize.children(this.title);\r\n    this.customize.children(this.customizeColorArray);\r\n    // 菜单元素追加子节点\r\n    this.addItem(this.reset);\r\n    this.addItem(this.array);\r\n    this.addItem(new ELContextMenuDivider());\r\n    this.addItem(this.customize);\r\n  }\r\n\r\n  setActiveByColor(color) {\r\n    this.customizeColorArray.setActiveByColor(color);\r\n    this.colorArray.setActiveByColor(color);\r\n  }\r\n}\r\n\r\nexport { FontColorContextMenu };\r\n","import { DropDownItem } from './base/DropDownItem';\r\nimport { cssPrefix } from '../../../config';\r\nimport { Icon } from './Icon';\r\nimport { Utils } from '../../../utils/Utils';\r\nimport { EL_POPUP_POSITION } from '../../../component/elpopup/ElPopUp';\r\nimport { FontColorContextMenu } from './contextmenu/fontcolor/FontColorContextMenu';\r\n\r\nclass FontColor extends DropDownItem {\r\n  constructor(options) {\r\n    super(`${cssPrefix}-tools-font-color`);\r\n    this.options = Utils.mergeDeep({ contextMenu: {} }, options);\r\n    this.icon = new Icon('color');\r\n    this.fontColorContextMenu = new FontColorContextMenu(Utils.copyProp({\r\n      el: this,\r\n      position: EL_POPUP_POSITION.BOTTOM,\r\n    }, this.options.contextMenu));\r\n    this.setIcon(this.icon);\r\n    this.setColor('rgb(0,0,0)');\r\n    this.fontColorContextMenu.setActiveByColor('rgb(0,0,0)');\r\n  }\r\n\r\n  setColor(color) {\r\n    this.icon.css('border-bottom', `3px solid ${color}`);\r\n  }\r\n}\r\n\r\nexport { FontColor };\r\n","import { ELContextMenuItem } from '../../../../../component/elcontextmenu/ELContextMenuItem';\r\nimport { cssPrefix } from '../../../../../config';\r\nimport { h } from '../../../../../lib/Element';\r\n\r\nclass FillColorContextMenuItem extends ELContextMenuItem {\r\n  constructor(title, icon) {\r\n    super(`${cssPrefix}-fill-color-context-menu-item`);\r\n    this.title = title;\r\n    this.icon = icon;\r\n    if (icon) {\r\n      this.iconElement = h('div', `${cssPrefix}-fill-color-context-menu-item-icon`);\r\n      this.iconElement.children(this.icon);\r\n      this.children(this.iconElement);\r\n    }\r\n    if (title) {\r\n      this.titleElement = h('div', `${cssPrefix}-fill-color-context-menu-item-title`);\r\n      this.titleElement.text(title);\r\n      this.children(this.titleElement);\r\n    }\r\n  }\r\n}\r\n\r\nexport { FillColorContextMenuItem };\r\n","import { ELContextMenu } from '../../../../../component/elcontextmenu/ELContextMenu';\r\nimport { cssPrefix } from '../../../../../config';\r\nimport { ColorArray } from '../../../../../component/colorarray/ColorArray';\r\nimport { h } from '../../../../../lib/Element';\r\nimport { ColorItem } from '../../../../../component/colorarray/ColorItem';\r\nimport { ELContextMenuDivider } from '../../../../../component/elcontextmenu/ELContextMenuDivider';\r\nimport { Icon } from '../../Icon';\r\nimport { Utils } from '../../../../../utils/Utils';\r\nimport { Constant } from '../../../../../utils/Constant';\r\nimport { FillColorContextMenuItem } from './FillColorContextMenuItem';\r\nimport { ColorPicker } from '../../../../../component/colorpicker/ColorPicker';\r\n\r\nclass FillColorContextMenu extends ELContextMenu {\r\n  constructor(options = {}) {\r\n    super(`${cssPrefix}-font-color-context-menu`, Utils.mergeDeep({\r\n      onUpdate: () => {},\r\n    }, options));\r\n    this.colorPicker = new ColorPicker({\r\n      selectCb: (color) => {\r\n        const item = new ColorItem({ color });\r\n        this.customizeColorArray.add(item);\r\n        this.customizeColorArray.setActiveByColor(color);\r\n        this.colorArray.setActiveByColor(null);\r\n        this.options.onUpdate(color);\r\n        this.close();\r\n      },\r\n    });\r\n    // 重置\r\n    this.reset = new FillColorContextMenuItem('重置', new Icon('clear-color'));\r\n    this.reset.on(Constant.SYSTEM_EVENT_TYPE.CLICK, () => {\r\n      this.options.onUpdate(null);\r\n      this.customizeColorArray.setActiveByColor(null);\r\n      this.colorArray.setActiveByColor(null);\r\n    });\r\n    // 颜色筛选\r\n    this.array = new FillColorContextMenuItem();\r\n    this.array.removeClass('hover');\r\n    this.colorArray = new ColorArray({\r\n      selectCb: (item) => {\r\n        const { color } = item.options;\r\n        if (color) this.options.onUpdate(color);\r\n        this.customizeColorArray.setActiveByColor(null);\r\n        this.close();\r\n      },\r\n    });\r\n    this.array.children(this.colorArray);\r\n    // 历史选中\r\n    this.title = h('div', `${cssPrefix}-font-color-context-menu-color-title`);\r\n    this.title.text('自定义');\r\n    this.plus = new Icon('plus');\r\n    this.customizeColorArray = new ColorArray({\r\n      colors: [\r\n        new ColorItem({ icon: this.plus }),\r\n      ],\r\n      selectCb: (item) => {\r\n        const { color } = item.options;\r\n        if (color) {\r\n          this.options.onUpdate(color);\r\n          this.colorArray.setActiveByColor(null);\r\n          this.close();\r\n        } else {\r\n          this.colorPicker.open(this.customizeColorArray.activeColor);\r\n        }\r\n      },\r\n    });\r\n    this.customize = new FillColorContextMenuItem();\r\n    this.customize.removeClass('hover');\r\n    this.customize.children(this.title);\r\n    this.customize.children(this.customizeColorArray);\r\n    // 菜单元素追加子节点\r\n    this.addItem(this.reset);\r\n    this.addItem(this.array);\r\n    this.addItem(new ELContextMenuDivider());\r\n    this.addItem(this.customize);\r\n  }\r\n\r\n  setActiveByColor(color) {\r\n    this.customizeColorArray.setActiveByColor(color);\r\n    this.colorArray.setActiveByColor(color);\r\n  }\r\n}\r\n\r\nexport { FillColorContextMenu };\r\n","import { DropDownItem } from './base/DropDownItem';\r\nimport { cssPrefix } from '../../../config';\r\nimport { Icon } from './Icon';\r\nimport { Utils } from '../../../utils/Utils';\r\nimport { EL_POPUP_POSITION } from '../../../component/elpopup/ElPopUp';\r\nimport { FillColorContextMenu } from './contextmenu/fillcolor/FillColorContextMenu';\r\n\r\nclass FillColor extends DropDownItem {\r\n  constructor(options) {\r\n    super(`${cssPrefix}-tools-fill-color`);\r\n    this.options = Utils.mergeDeep({ contextMenu: {} }, options);\r\n    this.icon = new Icon('fill-color');\r\n    this.fillColorContextMenu = new FillColorContextMenu(Utils.copyProp({\r\n      el: this,\r\n      position: EL_POPUP_POSITION.BOTTOM,\r\n    }, this.options.contextMenu));\r\n    this.setIcon(this.icon);\r\n    this.setColor('rgb(255, 255, 255)');\r\n    this.fillColorContextMenu.setActiveByColor('rgb(255, 255, 255)');\r\n  }\r\n\r\n  setColor(color) {\r\n    this.icon.css('border-bottom', `3px solid ${color}`);\r\n  }\r\n}\r\n\r\nexport { FillColor };\r\n","import { ELContextMenuItem } from '../../../../../../component/elcontextmenu/ELContextMenuItem';\r\nimport { cssPrefix } from '../../../../../../config';\r\n\r\nclass BorderTypeContextMenuItem extends ELContextMenuItem {\r\n  constructor() {\r\n    super(`${cssPrefix}-border-type-context-menu-item`);\r\n  }\r\n}\r\n\r\nexport { BorderTypeContextMenuItem };\r\n","import { Item } from '../../../base/Item';\r\nimport { cssPrefix } from '../../../../../../config';\r\nimport { Icon } from '../../../Icon';\r\n\r\nclass BorderIcon1 extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-border1`);\r\n    this.icon = new Icon('border1');\r\n    this.children(this.icon);\r\n  }\r\n}\r\n\r\nexport { BorderIcon1 };\r\n","import { Item } from '../../../base/Item';\r\nimport { cssPrefix } from '../../../../../../config';\r\nimport { Icon } from '../../../Icon';\r\n\r\nclass BorderIcon2 extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-border2`);\r\n    this.icon = new Icon('border2');\r\n    this.children(this.icon);\r\n  }\r\n}\r\n\r\nexport { BorderIcon2 };\r\n","import { Item } from '../../../base/Item';\r\nimport { cssPrefix } from '../../../../../../config';\r\nimport { Icon } from '../../../Icon';\r\n\r\nclass BorderIcon3 extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-border3`);\r\n    this.icon = new Icon('border3');\r\n    this.children(this.icon);\r\n  }\r\n}\r\n\r\nexport { BorderIcon3 };\r\n","import { Item } from '../../../base/Item';\r\nimport { cssPrefix } from '../../../../../../config';\r\nimport { Icon } from '../../../Icon';\r\n\r\nclass BorderIcon4 extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-border4`);\r\n    this.icon = new Icon('border4');\r\n    this.children(this.icon);\r\n  }\r\n}\r\n\r\nexport { BorderIcon4 };\r\n","import { Item } from '../../../base/Item';\r\nimport { cssPrefix } from '../../../../../../config';\r\nimport { Icon } from '../../../Icon';\r\n\r\nclass BorderIcon5 extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-border5`);\r\n    this.icon = new Icon('border5');\r\n    this.children(this.icon);\r\n  }\r\n}\r\n\r\nexport { BorderIcon5 };\r\n","import { Item } from '../../../base/Item';\r\nimport { cssPrefix } from '../../../../../../config';\r\nimport { Icon } from '../../../Icon';\r\n\r\nclass BorderIcon6 extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-border6`);\r\n    this.icon = new Icon('border6');\r\n    this.children(this.icon);\r\n  }\r\n}\r\n\r\nexport { BorderIcon6 };\r\n","import { Item } from '../../../base/Item';\r\nimport { cssPrefix } from '../../../../../../config';\r\nimport { Icon } from '../../../Icon';\r\n\r\nclass BorderIcon7 extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-border7`);\r\n    this.icon = new Icon('border7');\r\n    this.children(this.icon);\r\n  }\r\n}\r\n\r\nexport { BorderIcon7 };\r\n","import { Item } from '../../../base/Item';\r\nimport { cssPrefix } from '../../../../../../config';\r\nimport { Icon } from '../../../Icon';\r\n\r\nclass BorderIcon8 extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-border8`);\r\n    this.icon = new Icon('border8');\r\n    this.children(this.icon);\r\n  }\r\n}\r\n\r\nexport { BorderIcon8 };\r\n","import { Item } from '../../../base/Item';\r\nimport { cssPrefix } from '../../../../../../config';\r\nimport { Icon } from '../../../Icon';\r\n\r\nclass BorderIcon9 extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-border9`);\r\n    this.icon = new Icon('border9');\r\n    this.children(this.icon);\r\n  }\r\n}\r\n\r\nexport { BorderIcon9 };\r\n","import { Item } from '../../../base/Item';\r\nimport { cssPrefix } from '../../../../../../config';\r\nimport { Icon } from '../../../Icon';\r\n\r\nclass BorderIcon10 extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-border10`);\r\n    this.icon = new Icon('border10');\r\n    this.children(this.icon);\r\n  }\r\n}\r\n\r\nexport { BorderIcon10 };\r\n","import { cssPrefix } from '../../../../../../config';\r\nimport { Icon } from '../../../Icon';\r\nimport { DropDownItem } from '../../../base/DropDownItem';\r\n\r\nclass BorderColor extends DropDownItem {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-border-color`);\r\n    this.icon = new Icon('border-color');\r\n    this.setIcon(this.icon);\r\n    this.setColor('#000000');\r\n  }\r\n\r\n  setColor(color) {\r\n    this.icon.css('border-bottom', `3px solid ${color}`);\r\n  }\r\n}\r\n\r\nexport { BorderColor };\r\n","import { cssPrefix } from '../../../../../../config';\r\nimport { Icon } from '../../../Icon';\r\nimport { DropDownItem } from '../../../base/DropDownItem';\r\n\r\nclass BorderType extends DropDownItem {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-border-type`);\r\n    this.icon = new Icon('border-type');\r\n    this.setIcon(this.icon);\r\n  }\r\n}\r\n\r\nexport { BorderType };\r\n","import { ELContextMenuItem } from '../../../../../../component/elcontextmenu/ELContextMenuItem';\r\nimport { cssPrefix } from '../../../../../../config';\r\nimport { h } from '../../../../../../lib/Element';\r\n\r\nclass BorderColorContextMenuItem extends ELContextMenuItem {\r\n  constructor(title, icon) {\r\n    super(`${cssPrefix}-border-color-context-menu-item`);\r\n    this.title = title;\r\n    this.icon = icon;\r\n    if (icon) {\r\n      this.iconElement = h('div', `${cssPrefix}-border-color-context-menu-item-icon`);\r\n      this.iconElement.children(this.icon);\r\n      this.children(this.iconElement);\r\n    }\r\n    if (title) {\r\n      this.titleElement = h('div', `${cssPrefix}-border-color-context-menu-item-title`);\r\n      this.titleElement.text(title);\r\n      this.children(this.titleElement);\r\n    }\r\n  }\r\n}\r\n\r\nexport { BorderColorContextMenuItem };\r\n","import { ELContextMenu } from '../../../../../../component/elcontextmenu/ELContextMenu';\r\nimport { cssPrefix } from '../../../../../../config';\r\nimport { Utils } from '../../../../../../utils/Utils';\r\nimport { ColorPicker } from '../../../../../../component/colorpicker/ColorPicker';\r\nimport { ColorItem } from '../../../../../../component/colorarray/ColorItem';\r\nimport { Icon } from '../../../Icon';\r\nimport { Constant } from '../../../../../../utils/Constant';\r\nimport { ColorArray } from '../../../../../../component/colorarray/ColorArray';\r\nimport { ELContextMenuDivider } from '../../../../../../component/elcontextmenu/ELContextMenuDivider';\r\nimport { BorderColorContextMenuItem } from './BorderColorContextMenuItem';\r\nimport { h } from '../../../../../../lib/Element';\r\n\r\nclass BorderColorContextMenu extends ELContextMenu {\r\n  constructor(options = {}) {\r\n    super(`${cssPrefix}-border-color-context-menu`, Utils.mergeDeep({\r\n      onUpdate: () => {},\r\n    }, options));\r\n    this.colorPicker = new ColorPicker({\r\n      selectCb: (color) => {\r\n        const item = new ColorItem({ color });\r\n        this.customizeColorArray.add(item);\r\n        this.customizeColorArray.setActiveByColor(color);\r\n        this.colorArray.setActiveByColor(null);\r\n        this.options.onUpdate(color);\r\n        this.close();\r\n      },\r\n    });\r\n    // 重置\r\n    this.reset = new BorderColorContextMenuItem('重置', new Icon('clear-color'));\r\n    this.reset.on(Constant.SYSTEM_EVENT_TYPE.CLICK, () => {\r\n      this.options.onUpdate('rgb(0,0,0)');\r\n      this.customizeColorArray.setActiveByColor(null);\r\n      this.colorArray.setActiveByColor(null);\r\n    });\r\n    // 颜色筛选\r\n    this.array = new BorderColorContextMenuItem();\r\n    this.array.removeClass('hover');\r\n    this.colorArray = new ColorArray({\r\n      selectCb: (item) => {\r\n        const { color } = item.options;\r\n        if (color) this.options.onUpdate(color);\r\n        this.customizeColorArray.setActiveByColor(null);\r\n        this.close();\r\n      },\r\n    });\r\n    this.array.children(this.colorArray);\r\n    // 历史选中\r\n    this.title = h('div', `${cssPrefix}-border-color-context-menu-color-title`);\r\n    this.title.text('自定义');\r\n    this.plus = new Icon('plus');\r\n    this.customizeColorArray = new ColorArray({\r\n      colors: [\r\n        new ColorItem({ icon: this.plus }),\r\n      ],\r\n      selectCb: (item) => {\r\n        const { color } = item.options;\r\n        if (color) {\r\n          this.options.onUpdate(color);\r\n          this.colorArray.setActiveByColor(null);\r\n          this.close();\r\n        } else {\r\n          this.colorPicker.open(this.customizeColorArray.activeColor);\r\n        }\r\n      },\r\n    });\r\n    this.customize = new BorderColorContextMenuItem();\r\n    this.customize.removeClass('hover');\r\n    this.customize.children(this.title);\r\n    this.customize.children(this.customizeColorArray);\r\n    // 菜单元素追加子节点\r\n    this.addItem(this.reset);\r\n    this.addItem(this.array);\r\n    this.addItem(new ELContextMenuDivider());\r\n    this.addItem(this.customize);\r\n  }\r\n\r\n  setActiveByColor(color) {\r\n    this.customizeColorArray.setActiveByColor(color);\r\n    this.colorArray.setActiveByColor(color);\r\n  }\r\n}\r\n\r\nexport { BorderColorContextMenu };\r\n","import { cssPrefix } from '../../../../../../config';\r\nimport { Icon } from '../../../Icon';\r\nimport { h } from '../../../../../../lib/Element';\r\nimport { ELContextMenuItem } from '../../../../../../component/elcontextmenu/ELContextMenuItem';\r\n\r\nconst pool = [];\r\n\r\nclass LineTypeContextMenuItem extends ELContextMenuItem {\r\n  constructor(type) {\r\n    super(`${cssPrefix}-font-context-menu-item`);\r\n    this.type = type;\r\n    this.icon = new Icon('checked');\r\n    this.typeIcon = new Icon(type);\r\n    this.typeIcon.setWidth(50);\r\n    this.iconElement = h('div', `${cssPrefix}-font-context-menu-item-icon`);\r\n    this.titleElement = h('div', `${cssPrefix}-font-context-menu-item-title`);\r\n    this.iconElement.children(this.icon);\r\n    this.titleElement.children(this.typeIcon);\r\n    this.children(this.iconElement);\r\n    this.children(this.titleElement);\r\n    pool.push(this);\r\n  }\r\n\r\n  setTitle(title) {\r\n    this.title = title;\r\n    this.titleElement.text(title);\r\n  }\r\n\r\n  setActive() {\r\n    pool.forEach((item) => {\r\n      item.removeClass('active');\r\n    });\r\n    this.addClass('active');\r\n  }\r\n}\r\n\r\nexport { LineTypeContextMenuItem };\r\n","import { ELContextMenu } from '../../../../../../component/elcontextmenu/ELContextMenu';\r\nimport { Utils } from '../../../../../../utils/Utils';\r\nimport { cssPrefix } from '../../../../../../config';\r\nimport { LineTypeContextMenuItem } from './LineTypeContextMenuItem';\r\nimport { Constant } from '../../../../../../utils/Constant';\r\n\r\nclass LineTypeContextMenu extends ELContextMenu {\r\n  constructor(options = {}) {\r\n    super(`${cssPrefix}-line-type-context-menu`, Utils.mergeDeep({\r\n      onUpdate: () => {},\r\n    }, options));\r\n    this.items = [\r\n      new LineTypeContextMenuItem('line1'),\r\n      new LineTypeContextMenuItem('line2'),\r\n      new LineTypeContextMenuItem('line3'),\r\n      new LineTypeContextMenuItem('line4'),\r\n      new LineTypeContextMenuItem('line5'),\r\n      new LineTypeContextMenuItem('line6'),\r\n    ];\r\n    this.items.forEach((item) => {\r\n      item.on(Constant.SYSTEM_EVENT_TYPE.CLICK, () => {\r\n        this.update(item.type);\r\n        item.setActive();\r\n      });\r\n      this.addItem(item);\r\n    });\r\n    this.setActiveByType(this.items[0].type);\r\n  }\r\n\r\n  update(type) {\r\n    const { options } = this;\r\n    options.onUpdate(type);\r\n    this.close();\r\n  }\r\n\r\n  setActiveByType(type) {\r\n    this.items.forEach((item) => {\r\n      if (item.type === type) {\r\n        item.setActive();\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport { LineTypeContextMenu };\r\n","import { Utils } from '../utils/Utils';\r\n\r\nconst LINE_TYPE = {\r\n  SOLID_LINE: 0,\r\n  DOTTED_LINE: 1,\r\n  POINT_LINE: 2,\r\n  DOUBLE_LINE: 3,\r\n};\r\n\r\nclass SolidLine {\r\n\r\n  constructor(draw, attr) {\r\n    this.draw = draw;\r\n    Utils.mergeDeep(this, {\r\n      color: '#000000',\r\n      width: 1,\r\n    }, attr);\r\n  }\r\n\r\n  drawLine(sx, sy, ex, ey) {\r\n    const { draw } = this;\r\n    const { width, color } = this;\r\n    draw.beginPath();\r\n    draw.attr({\r\n      lineWidth: width,\r\n      strokeStyle: color,\r\n    });\r\n    draw.setLineDash([]);\r\n    draw.line([sx, sy], [ex, ey]);\r\n  }\r\n\r\n  setColor(color) {\r\n    this.color = color;\r\n  }\r\n\r\n  setWidth(width) {\r\n    this.width = width;\r\n  }\r\n}\r\n\r\nclass DottedLine {\r\n\r\n  constructor(draw, attr) {\r\n    this.draw = draw;\r\n    Utils.mergeDeep(this, {\r\n      color: '#000000',\r\n      width: 1,\r\n      dash: [5],\r\n    }, attr);\r\n  }\r\n\r\n  drawLine(sx, sy, ex, ey) {\r\n    const { draw, dash } = this;\r\n    const { width, color } = this;\r\n    draw.beginPath();\r\n    draw.attr({\r\n      lineWidth: width,\r\n      strokeStyle: color,\r\n    });\r\n    draw.setLineDash(dash);\r\n    draw.line([sx, sy], [ex, ey]);\r\n  }\r\n\r\n  setColor(color) {\r\n    this.color = color;\r\n  }\r\n\r\n  setWidth(width) {\r\n    this.width = width;\r\n  }\r\n}\r\n\r\nclass DoubleLine {\r\n\r\n  constructor(draw, attr) {\r\n    this.draw = draw;\r\n    Utils.mergeDeep(this, {\r\n      color: '#000000',\r\n      width: 1,\r\n      padding: 1,\r\n      spacing: 1.5,\r\n      leftShow: () => false,\r\n      topShow: () => false,\r\n      rightShow: () => false,\r\n      bottomShow: () => false,\r\n      iFMerge: () => false,\r\n      iFMergeFirstRow: () => false,\r\n      iFMergeLastRow: () => false,\r\n      iFMergeFirstCol: () => false,\r\n      iFMergeLastCol: () => false,\r\n    }, attr);\r\n  }\r\n\r\n  handleExternal(sx, sy, ex, ey, row, col, pos) {\r\n    const external = {};\r\n    const { leftShow, topShow, rightShow, bottomShow } = this;\r\n    const { iFMerge, iFMergeFirstRow, iFMergeLastRow, iFMergeFirstCol, iFMergeLastCol } = this;\r\n    const { spacing } = this;\r\n    let ifMerge = null;\r\n    let firstRow = null;\r\n    let lastRow = null;\r\n    let firstCol = null;\r\n    let lastCol = null;\r\n    switch (pos) {\r\n      case 'left':\r\n        ifMerge = iFMerge(row, col - 1);\r\n        if (ifMerge) {\r\n          firstRow = iFMergeFirstRow(row, col - 1);\r\n          lastRow = iFMergeLastRow(row, col - 1);\r\n          firstCol = iFMergeFirstCol(row, col - 1);\r\n          lastCol = iFMergeLastCol(row, col - 1);\r\n        }\r\n        break;\r\n      case 'top':\r\n        ifMerge = iFMerge(row - 1, col);\r\n        if (ifMerge) {\r\n          firstRow = iFMergeFirstRow(row - 1, col);\r\n          lastRow = iFMergeLastRow(row - 1, col);\r\n          firstCol = iFMergeFirstCol(row - 1, col);\r\n          lastCol = iFMergeLastCol(row - 1, col);\r\n        }\r\n        break;\r\n      case 'right':\r\n        ifMerge = iFMerge(row, col + 1);\r\n        if (ifMerge) {\r\n          firstRow = iFMergeFirstRow(row, col + 1);\r\n          lastRow = iFMergeLastRow(row, col + 1);\r\n          firstCol = iFMergeFirstCol(row, col + 1);\r\n          lastCol = iFMergeLastCol(row, col + 1);\r\n        }\r\n        break;\r\n      case 'bottom':\r\n        ifMerge = iFMerge(row + 1, col);\r\n        if (ifMerge) {\r\n          firstRow = iFMergeFirstRow(row + 1, col);\r\n          lastRow = iFMergeLastRow(row + 1, col);\r\n          firstCol = iFMergeFirstCol(row + 1, col);\r\n          lastCol = iFMergeLastCol(row + 1, col);\r\n        }\r\n        break;\r\n      default: break;\r\n    }\r\n    if (ifMerge) {\r\n      switch (pos) {\r\n        case 'left': {\r\n          external.sx = sx - spacing;\r\n          external.ex = ex - spacing;\r\n          // 检查顶边和上底边及左上角底边及左顶边\r\n          const sTopLeftCorner = bottomShow(row - 1, col - 1) || topShow(row, col - 1);\r\n          const sTop = topShow(row, col);\r\n          const sBottom = bottomShow(row - 1, col);\r\n          external.sy = sy;\r\n          if (sTop || sBottom) external.sy = sy - spacing;\r\n          if (sTopLeftCorner && firstRow) external.sy = sy + spacing;\r\n          // 检查底边和下顶边及左下角顶边和左底边\r\n          const eBottomLeftCorner = topShow(row + 1, col - 1) || bottomShow(row, col - 1);\r\n          const eBottom = bottomShow(row, col);\r\n          const eTop = topShow(row + 1, col);\r\n          external.ey = ey;\r\n          if (eBottom || eTop) external.ey = ey + spacing;\r\n          if (eBottomLeftCorner && lastRow) external.ey = ey - spacing;\r\n          break;\r\n        }\r\n        case 'top': {\r\n          external.sy = sy - spacing;\r\n          external.ey = ey - spacing;\r\n          // 检查左边和左右边及左上角右边及上左边\r\n          const sTopLeftCorner = rightShow(row - 1, col - 1) || leftShow(row - 1, col);\r\n          const sLeft = leftShow(row, col);\r\n          const sRight = rightShow(row, col - 1);\r\n          external.sx = sx;\r\n          if (sLeft || sRight) external.sx = sx - spacing;\r\n          if (sTopLeftCorner && firstCol) external.sx = sx + spacing;\r\n          // 检查右边和右左边及右上角左边及上右边\r\n          const eTopRightCorner = leftShow(row - 1, col + 1) || rightShow(row - 1, col);\r\n          const eRight = rightShow(row, col);\r\n          const eLeft = leftShow(row, col + 1);\r\n          external.ex = ex;\r\n          if (eRight || eLeft) external.ex = ex + spacing;\r\n          if (eTopRightCorner && lastCol) external.ex = ex - spacing;\r\n          break;\r\n        }\r\n        case 'right': {\r\n          external.sx = sx + spacing;\r\n          external.ex = ex + spacing;\r\n          // 检查顶边和上底边及右上角底边及右顶边\r\n          const sTopRightCorner = bottomShow(row - 1, col + 1) || topShow(row, col + 1);\r\n          const sTop = topShow(row, col);\r\n          const sBottom = bottomShow(row - 1, col);\r\n          external.sy = sy;\r\n          if (sTop || sBottom) external.sy = sy - spacing;\r\n          if (sTopRightCorner && firstRow) external.sy = sy + spacing;\r\n          // 检查底边和下顶边及右下角顶边及右底边\r\n          const eBottomRightCorner = topShow(row + 1, col + 1) || bottomShow(row, col + 1);\r\n          const eBottom = bottomShow(row, col);\r\n          const eTop = topShow(row + 1, col);\r\n          external.ey = ey;\r\n          if (eBottom || eTop) external.ey = ey + spacing;\r\n          if (eBottomRightCorner && lastRow) external.ey = ey - spacing;\r\n          break;\r\n        }\r\n        case 'bottom': {\r\n          external.sy = sy + spacing;\r\n          external.ey = ey + spacing;\r\n          // 检查左边和左右边及左下角右边及下左边\r\n          const sBottomLeftCorner = rightShow(row + 1, col - 1) || leftShow(row + 1, col);\r\n          const sLeft = leftShow(row, col);\r\n          const sRight = rightShow(row, col - 1);\r\n          external.sx = sx;\r\n          if (sLeft || sRight) external.sx = sx - spacing;\r\n          if (sBottomLeftCorner && firstCol) external.sx = sx + spacing;\r\n          // 检查右边和右左边及右下角左边及下右边\r\n          const eBottomRightCorner = leftShow(row + 1, col + 1) || rightShow(row + 1, col);\r\n          const eRight = rightShow(row, col);\r\n          const eLeft = leftShow(row, col + 1);\r\n          external.ex = ex;\r\n          if (eRight || eLeft) external.ex = ex + spacing;\r\n          if (eBottomRightCorner && lastCol) external.ex = ex - spacing;\r\n          break;\r\n        }\r\n        default: break;\r\n      }\r\n      return external;\r\n    }\r\n    switch (pos) {\r\n      case 'left': {\r\n        external.sx = sx - spacing;\r\n        external.ex = ex - spacing;\r\n        // 检查顶边和上底边及左上角底边及左顶边\r\n        const sTopLeftCorner = bottomShow(row - 1, col - 1) || topShow(row, col - 1);\r\n        const sTop = topShow(row, col);\r\n        const sBottom = bottomShow(row - 1, col);\r\n        external.sy = sy;\r\n        if (sTop || sBottom) external.sy = sy - spacing;\r\n        if (sTopLeftCorner) external.sy = sy + spacing;\r\n        // 检查底边和下顶边及左下角顶边和左底边\r\n        const eBottomLeftCorner = topShow(row + 1, col - 1) || bottomShow(row, col - 1);\r\n        const eBottom = bottomShow(row, col);\r\n        const eTop = topShow(row + 1, col);\r\n        external.ey = ey;\r\n        if (eBottom || eTop) external.ey = ey + spacing;\r\n        if (eBottomLeftCorner) external.ey = ey - spacing;\r\n        break;\r\n      }\r\n      case 'top': {\r\n        external.sy = sy - spacing;\r\n        external.ey = ey - spacing;\r\n        // 检查左边和左右边及左上角右边及上左边\r\n        const sTopLeftCorner = rightShow(row - 1, col - 1) || leftShow(row - 1, col);\r\n        const sLeft = leftShow(row, col);\r\n        const sRight = rightShow(row, col - 1);\r\n        external.sx = sx;\r\n        if (sLeft || sRight) external.sx = sx - spacing;\r\n        if (sTopLeftCorner) external.sx = sx + spacing;\r\n        // 检查右边和右左边及右上角左边及上右边\r\n        const eTopRightCorner = leftShow(row - 1, col + 1) || rightShow(row - 1, col);\r\n        const eRight = rightShow(row, col);\r\n        const eLeft = leftShow(row, col + 1);\r\n        external.ex = ex;\r\n        if (eRight || eLeft) external.ex = ex + spacing;\r\n        if (eTopRightCorner) external.ex = ex - spacing;\r\n        break;\r\n      }\r\n      case 'right': {\r\n        external.sx = sx + spacing;\r\n        external.ex = ex + spacing;\r\n        // 检查顶边和上底边及右上角底边及右顶边\r\n        const sTopRightCorner = bottomShow(row - 1, col + 1) || topShow(row, col + 1);\r\n        const sTop = topShow(row, col);\r\n        const sBottom = bottomShow(row - 1, col);\r\n        external.sy = sy;\r\n        if (sTop || sBottom) external.sy = sy - spacing;\r\n        if (sTopRightCorner) external.sy = sy + spacing;\r\n        // 检查底边和下顶边及右下角顶边及右底边\r\n        const eBottomRightCorner = topShow(row + 1, col + 1) || bottomShow(row, col + 1);\r\n        const eBottom = bottomShow(row, col);\r\n        const eTop = topShow(row + 1, col);\r\n        external.ey = ey;\r\n        if (eBottom || eTop) external.ey = ey + spacing;\r\n        if (eBottomRightCorner) external.ey = ey - spacing;\r\n        break;\r\n      }\r\n      case 'bottom': {\r\n        external.sy = sy + spacing;\r\n        external.ey = ey + spacing;\r\n        // 检查左边和左右边及左下角右边及下左边\r\n        const sBottomLeftCorner = rightShow(row + 1, col - 1) || leftShow(row + 1, col);\r\n        const sLeft = leftShow(row, col);\r\n        const sRight = rightShow(row, col - 1);\r\n        external.sx = sx;\r\n        if (sLeft || sRight) external.sx = sx - spacing;\r\n        if (sBottomLeftCorner) external.sx = sx + spacing;\r\n        // 检查右边和右左边及右下角左边及下右边\r\n        const eBottomRightCorner = leftShow(row + 1, col + 1) || rightShow(row + 1, col);\r\n        const eRight = rightShow(row, col);\r\n        const eLeft = leftShow(row, col + 1);\r\n        external.ex = ex;\r\n        if (eRight || eLeft) external.ex = ex + spacing;\r\n        if (eBottomRightCorner) external.ex = ex - spacing;\r\n        break;\r\n      }\r\n      default: break;\r\n    }\r\n    return external;\r\n  }\r\n\r\n  handleInternal(sx, sy, ex, ey, row, col, pos) {\r\n    const internal = {};\r\n    const { leftShow, topShow, rightShow, bottomShow } = this;\r\n    const { iFMerge, iFMergeFirstRow, iFMergeLastRow, iFMergeFirstCol, iFMergeLastCol } = this;\r\n    const { spacing } = this;\r\n    const ifMerge = iFMerge(row, col);\r\n    // merge\r\n    if (ifMerge) {\r\n      const firstRow = iFMergeFirstRow(row, col);\r\n      const lastRow = iFMergeLastRow(row, col);\r\n      const firstCol = iFMergeFirstCol(row, col);\r\n      const lastCol = iFMergeLastCol(row, col);\r\n      switch (pos) {\r\n        case 'left': {\r\n          internal.sx = sx + spacing;\r\n          internal.ex = ex + spacing;\r\n          // 检查顶边和上底边及左上角底边及左顶边\r\n          const sTopLeftCorner = bottomShow(row - 1, col - 1) || topShow(row, col - 1);\r\n          const sTop = topShow(row, col);\r\n          const sBottom = bottomShow(row - 1, col);\r\n          internal.sy = sy;\r\n          if (sTopLeftCorner) internal.sy = sy - spacing;\r\n          if ((sTop || sBottom) && firstRow) internal.sy = sy + spacing;\r\n          // 检查底边和下顶边及左下角顶边和左底边\r\n          const eBottomLeftCorner = topShow(row + 1, col - 1) || bottomShow(row, col - 1);\r\n          const eBottom = bottomShow(row, col);\r\n          const eTop = topShow(row + 1, col);\r\n          internal.ey = ey;\r\n          if (eBottomLeftCorner) internal.ey = ey + spacing;\r\n          if ((eBottom || eTop) && lastRow) internal.ey = ey - spacing;\r\n          break;\r\n        }\r\n        case 'top': {\r\n          internal.sy = sy + spacing;\r\n          internal.ey = ey + spacing;\r\n          // 检查左边和左右边及左上角右边及上左边\r\n          const sTopLeftCorner = rightShow(row - 1, col - 1) || leftShow(row - 1, col);\r\n          const sLeft = leftShow(row, col);\r\n          const sRight = rightShow(row, col - 1);\r\n          internal.sx = sx;\r\n          if (sTopLeftCorner) internal.sx = sx - spacing;\r\n          if ((sLeft || sRight) && firstCol) internal.sx = sx + spacing;\r\n          // 检查右边和右左边及右上角左边及上右边\r\n          const eTopRightCorner = leftShow(row - 1, col + 1) || rightShow(row - 1, col);\r\n          const eRight = rightShow(row, col);\r\n          const eLeft = leftShow(row, col + 1);\r\n          internal.ex = ex;\r\n          if (eTopRightCorner) internal.ex = ex + spacing;\r\n          if ((eRight || eLeft) && lastCol) internal.ex = ex - spacing;\r\n          break;\r\n        }\r\n        case 'right': {\r\n          internal.sx = sx - spacing;\r\n          internal.ex = ex - spacing;\r\n          // 检查顶边和上底边及右上角底边及右上边\r\n          const sTopRightCorner = bottomShow(row - 1, col + 1) || topShow(row, col + 1);\r\n          const sTop = topShow(row, col);\r\n          const sBottom = bottomShow(row - 1, col);\r\n          internal.sy = sy;\r\n          if (sTopRightCorner) internal.sy = sy - spacing;\r\n          if ((sTop || sBottom) && firstRow) internal.sy = sy + spacing;\r\n          // 检查底边和下顶边右下角顶边及右下边\r\n          const eBottomRightCorner = topShow(row + 1, col + 1) || bottomShow(row, col + 1);\r\n          const eBottom = bottomShow(row, col);\r\n          const eTop = topShow(row + 1, col);\r\n          internal.ey = ey;\r\n          if (eBottomRightCorner) internal.ey = ey + spacing;\r\n          if ((eBottom || eTop) && lastRow) internal.ey = ey - spacing;\r\n          break;\r\n        }\r\n        case 'bottom': {\r\n          internal.sy = sy - spacing;\r\n          internal.ey = ey - spacing;\r\n          // 检查左边和左右边及左下角右边及下左边\r\n          const sBottomLeftCorner = rightShow(row + 1, col - 1) || leftShow(row + 1, col);\r\n          const sLeft = leftShow(row, col);\r\n          const sRight = rightShow(row, col - 1);\r\n          internal.sx = sx;\r\n          if (sBottomLeftCorner) internal.sx = sx - spacing;\r\n          if ((sLeft || sRight) && firstCol) internal.sx = sx + spacing;\r\n          // 检查右边和右左边及右下角左边及下右边\r\n          const eBottomRightCorner = leftShow(row + 1, col + 1) || rightShow(row + 1, col);\r\n          const eRight = rightShow(row, col);\r\n          const eLeft = leftShow(row, col + 1);\r\n          internal.ex = ex;\r\n          if (eBottomRightCorner) internal.ex = ex + spacing;\r\n          if ((eRight || eLeft) && lastCol) internal.ex = ex - spacing;\r\n          break;\r\n        }\r\n        default: break;\r\n      }\r\n      return internal;\r\n    }\r\n    switch (pos) {\r\n      case 'left': {\r\n        internal.sx = sx + spacing;\r\n        internal.ex = ex + spacing;\r\n        // 检查顶边和上底边及左上角底边及左顶边\r\n        const sTopLeftCorner = bottomShow(row - 1, col - 1) || topShow(row, col - 1);\r\n        const sTop = topShow(row, col);\r\n        const sBottom = bottomShow(row - 1, col);\r\n        internal.sy = sy;\r\n        if (sTopLeftCorner) internal.sy = sy - spacing;\r\n        if (sTop || sBottom) internal.sy = sy + spacing;\r\n        // 检查底边和下顶边及左下角顶边和左底边\r\n        const eBottomLeftCorner = topShow(row + 1, col - 1) || bottomShow(row, col - 1);\r\n        const eBottom = bottomShow(row, col);\r\n        const eTop = topShow(row + 1, col);\r\n        internal.ey = ey;\r\n        if (eBottomLeftCorner) internal.ey = ey + spacing;\r\n        if (eBottom || eTop) internal.ey = ey - spacing;\r\n        break;\r\n      }\r\n      case 'top': {\r\n        internal.sy = sy + spacing;\r\n        internal.ey = ey + spacing;\r\n        // 检查左边和左右边及左上角右边及上左边\r\n        const sTopLeftCorner = rightShow(row - 1, col - 1) || leftShow(row - 1, col);\r\n        const sLeft = leftShow(row, col);\r\n        const sRight = rightShow(row, col - 1);\r\n        internal.sx = sx;\r\n        if (sTopLeftCorner) internal.sx = sx - spacing;\r\n        if (sLeft || sRight) internal.sx = sx + spacing;\r\n        // 检查右边和右左边及右上角左边及上右边\r\n        const eTopRightCorner = leftShow(row - 1, col + 1) || rightShow(row - 1, col);\r\n        const eRight = rightShow(row, col);\r\n        const eLeft = leftShow(row, col + 1);\r\n        internal.ex = ex;\r\n        if (eTopRightCorner) internal.ex = ex + spacing;\r\n        if (eRight || eLeft) internal.ex = ex - spacing;\r\n        break;\r\n      }\r\n      case 'right': {\r\n        internal.sx = sx - spacing;\r\n        internal.ex = ex - spacing;\r\n        // 检查顶边和上底边及右上角底边及右上边\r\n        const sTopRightCorner = bottomShow(row - 1, col + 1) || topShow(row, col + 1);\r\n        const sTop = topShow(row, col);\r\n        const sBottom = bottomShow(row - 1, col);\r\n        internal.sy = sy;\r\n        if (sTopRightCorner) internal.sy = sy - spacing;\r\n        if (sTop || sBottom) internal.sy = sy + spacing;\r\n        // 检查底边和下顶边右下角顶边及右下边\r\n        const eBottomRightCorner = topShow(row + 1, col + 1) || bottomShow(row, col + 1);\r\n        const eBottom = bottomShow(row, col);\r\n        const eTop = topShow(row + 1, col);\r\n        internal.ey = ey;\r\n        if (eBottomRightCorner) internal.ey = ey + spacing;\r\n        if (eBottom || eTop) internal.ey = ey - spacing;\r\n        break;\r\n      }\r\n      case 'bottom': {\r\n        internal.sy = sy - spacing;\r\n        internal.ey = ey - spacing;\r\n        // 检查左边和左右边及左下角右边及下左边\r\n        const sBottomLeftCorner = rightShow(row + 1, col - 1) || leftShow(row + 1, col);\r\n        const sLeft = leftShow(row, col);\r\n        const sRight = rightShow(row, col - 1);\r\n        internal.sx = sx;\r\n        if (sBottomLeftCorner) internal.sx = sx - spacing;\r\n        if (sLeft || sRight) internal.sx = sx + spacing;\r\n        // 检查右边和右左边及右下角左边及下右边\r\n        const eBottomRightCorner = leftShow(row + 1, col + 1) || rightShow(row + 1, col);\r\n        const eRight = rightShow(row, col);\r\n        const eLeft = leftShow(row, col + 1);\r\n        internal.ex = ex;\r\n        if (eBottomRightCorner) internal.ex = ex + spacing;\r\n        if (eRight || eLeft) internal.ex = ex - spacing;\r\n        break;\r\n      }\r\n      default: break;\r\n    }\r\n    return internal;\r\n  }\r\n\r\n  drawLine(sx, sy, ex, ey, row, col, pos) {\r\n    const { draw } = this;\r\n    const { width, color } = this;\r\n    draw.beginPath();\r\n    draw.attr({\r\n      lineWidth: width,\r\n      strokeStyle: color,\r\n    });\r\n    draw.setLineDash([]);\r\n    const external = this.handleExternal(sx, sy, ex, ey, row, col, pos);\r\n    const internal = this.handleInternal(sx, sy, ex, ey, row, col, pos);\r\n    if (!Utils.isEmptyObject(internal)) {\r\n      draw.line([internal.sx, internal.sy], [internal.ex, internal.ey]);\r\n    }\r\n    if (!Utils.isEmptyObject(external)) {\r\n      draw.line([external.sx, external.sy], [external.ex, external.ey]);\r\n    }\r\n  }\r\n\r\n  setColor(color) {\r\n    this.color = color;\r\n  }\r\n\r\n  setWidth(width) {\r\n    this.width = width;\r\n  }\r\n}\r\n\r\nclass Line {\r\n\r\n  constructor(draw, attr = {}) {\r\n    this.type = LINE_TYPE.SOLID_LINE;\r\n    this.solidLine = new SolidLine(draw, Utils.mergeDeep({}, attr));\r\n    this.dottedLine = new DottedLine(draw, Utils.mergeDeep({\r\n      dash: [5],\r\n    }, attr));\r\n    this.pointLine = new DottedLine(draw, Utils.mergeDeep({\r\n      dash: [2, 2],\r\n    }, attr));\r\n    this.doubleLine = new DoubleLine(draw, Utils.mergeDeep({}, attr));\r\n  }\r\n\r\n  drawLine(sx, sy, ex, ey, row, col, pos) {\r\n    const {\r\n      type,\r\n      solidLine,\r\n      dottedLine,\r\n      pointLine,\r\n      doubleLine,\r\n    } = this;\r\n    switch (type) {\r\n      case LINE_TYPE.SOLID_LINE:\r\n        solidLine.drawLine(sx, sy, ex, ey);\r\n        break;\r\n      case LINE_TYPE.DOTTED_LINE:\r\n        dottedLine.drawLine(sx, sy, ex, ey);\r\n        break;\r\n      case LINE_TYPE.POINT_LINE:\r\n        pointLine.drawLine(sx, sy, ex, ey);\r\n        break;\r\n      case LINE_TYPE.DOUBLE_LINE:\r\n        doubleLine.drawLine(sx, sy, ex, ey, row, col, pos);\r\n        break;\r\n      default: break;\r\n    }\r\n  }\r\n\r\n  setType(type) {\r\n    this.type = type;\r\n  }\r\n\r\n  setWidth(width) {\r\n    if (width) {\r\n      if (this.type === LINE_TYPE.SOLID_LINE) {\r\n        this.solidLine.setWidth(width);\r\n      }\r\n    }\r\n  }\r\n\r\n  setColor(color) {\r\n    if (color) {\r\n      this.solidLine.setColor(color);\r\n      this.dottedLine.setColor(color);\r\n      this.pointLine.setColor(color);\r\n      this.doubleLine.setColor(color);\r\n    }\r\n  }\r\n}\r\n\r\nexport { Line, LINE_TYPE };\r\n","import { ELContextMenu } from '../../../../../../component/elcontextmenu/ELContextMenu';\r\nimport { cssPrefix } from '../../../../../../config';\r\nimport { Utils } from '../../../../../../utils/Utils';\r\nimport { BorderTypeContextMenuItem } from './BorderTypeContextMenuItem';\r\nimport { ELContextMenuDivider } from '../../../../../../component/elcontextmenu/ELContextMenuDivider';\r\nimport { h } from '../../../../../../lib/Element';\r\nimport { BorderIcon1 } from '../../icon/border/BorderIcon1';\r\nimport { BorderIcon2 } from '../../icon/border/BorderIcon2';\r\nimport { BorderIcon3 } from '../../icon/border/BorderIcon3';\r\nimport { BorderIcon4 } from '../../icon/border/BorderIcon4';\r\nimport { BorderIcon5 } from '../../icon/border/BorderIcon5';\r\nimport { BorderIcon6 } from '../../icon/border/BorderIcon6';\r\nimport { BorderIcon7 } from '../../icon/border/BorderIcon7';\r\nimport { BorderIcon8 } from '../../icon/border/BorderIcon8';\r\nimport { BorderIcon9 } from '../../icon/border/BorderIcon9';\r\nimport { BorderIcon10 } from '../../icon/border/BorderIcon10';\r\nimport { BorderColor } from '../../icon/border/BorderColor';\r\nimport { BorderType } from '../../icon/border/BorderType';\r\nimport { EventBind } from '../../../../../../utils/EventBind';\r\nimport { Constant } from '../../../../../../utils/Constant';\r\nimport { EL_POPUP_POSITION, ElPopUp } from '../../../../../../component/elpopup/ElPopUp';\r\nimport { BorderColorContextMenu } from '../bordercolor/BorderColorContextMenu';\r\nimport { LineTypeContextMenu } from '../linetype/LineTypeContextMenu';\r\nimport { LINE_TYPE } from '../../../../../../canvas/Line';\r\n\r\nclass BorderTypeContextMenu extends ELContextMenu {\r\n  constructor(options = {}) {\r\n    super(`${cssPrefix}-border-type-context-menu`, Utils.mergeDeep({\r\n      onUpdate: () => {},\r\n    }, options));\r\n    this.type = LINE_TYPE.SOLID_LINE;\r\n    this.color = '#000000';\r\n    // 边框样式\r\n    this.borderIcon1 = new BorderIcon1();\r\n    this.borderIcon2 = new BorderIcon2();\r\n    this.borderIcon3 = new BorderIcon3();\r\n    this.borderIcon4 = new BorderIcon4();\r\n    this.borderIcon5 = new BorderIcon5();\r\n    const div1 = h('div', `${cssPrefix}-border-type-context-menu-type-icon-line`);\r\n    div1.children(this.borderIcon1);\r\n    div1.children(this.borderIcon2);\r\n    div1.children(this.borderIcon3);\r\n    div1.children(this.borderIcon4);\r\n    div1.children(this.borderIcon5);\r\n    this.borderIcon6 = new BorderIcon6();\r\n    this.borderIcon7 = new BorderIcon7();\r\n    this.borderIcon8 = new BorderIcon8();\r\n    this.borderIcon9 = new BorderIcon9();\r\n    this.borderIcon10 = new BorderIcon10();\r\n    const div2 = h('div', `${cssPrefix}-border-type-context-menu-type-icon-line`);\r\n    div2.children(this.borderIcon6);\r\n    div2.children(this.borderIcon7);\r\n    div2.children(this.borderIcon8);\r\n    div2.children(this.borderIcon9);\r\n    div2.children(this.borderIcon10);\r\n    this.borderIcons = new BorderTypeContextMenuItem();\r\n    this.borderIcons.removeClass('hover');\r\n    this.borderIcons.children(div1);\r\n    this.borderIcons.children(div2);\r\n    // 子菜单\r\n    this.borderColor = new BorderColor();\r\n    this.borderType = new BorderType();\r\n    const div3 = h('div', `${cssPrefix}-border-type-context-menu-type-icon-line`);\r\n    div3.children(this.borderColor);\r\n    div3.children(this.borderType);\r\n    this.borderColorAndType = new BorderTypeContextMenuItem();\r\n    this.borderColorAndType.removeClass('hover');\r\n    this.borderColorAndType.children(div3);\r\n    // 追加子菜单\r\n    this.addItem(this.borderIcons);\r\n    this.addItem(new ELContextMenuDivider());\r\n    this.addItem(this.borderColorAndType);\r\n    // 边框颜色菜单\r\n    this.borderColorContextMenu = new BorderColorContextMenu(Utils.copyProp({\r\n      el: this.borderColor,\r\n      position: EL_POPUP_POSITION.BOTTOM,\r\n    }, {\r\n      onUpdate: (color) => {\r\n        this.color = color;\r\n        this.borderColor.setColor(color);\r\n      },\r\n    }));\r\n    // 边框类型\r\n    this.lineTypeContextMenu = new LineTypeContextMenu(Utils.copyProp({\r\n      el: this.borderType,\r\n      position: EL_POPUP_POSITION.BOTTOM,\r\n    }, {\r\n      onUpdate: (type) => {\r\n        this.type = type;\r\n      },\r\n    }));\r\n    // 添加事件\r\n    EventBind.bind(this.borderColor, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      const { borderColorContextMenu } = this;\r\n      const { elPopUp } = borderColorContextMenu;\r\n      ElPopUp.closeAll([elPopUp, this.elPopUp]);\r\n      if (borderColorContextMenu.isOpen()) {\r\n        borderColorContextMenu.open();\r\n      } else {\r\n        borderColorContextMenu.close();\r\n      }\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n    EventBind.bind(this.borderType, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      const { lineTypeContextMenu } = this;\r\n      const { elPopUp } = lineTypeContextMenu;\r\n      ElPopUp.closeAll([elPopUp, this.elPopUp]);\r\n      if (lineTypeContextMenu.isOpen()) {\r\n        lineTypeContextMenu.open();\r\n      } else {\r\n        lineTypeContextMenu.close();\r\n      }\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n    EventBind.bind(this.borderIcon1, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      this.options.onUpdate('border1', this.color, this.type);\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n    EventBind.bind(this.borderIcon2, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      this.options.onUpdate('border2', this.color, this.type);\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n    EventBind.bind(this.borderIcon3, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      this.options.onUpdate('border3', this.color, this.type);\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n    EventBind.bind(this.borderIcon4, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      this.options.onUpdate('border4', this.color, this.type);\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n    EventBind.bind(this.borderIcon5, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      this.options.onUpdate('border5', this.color, this.type);\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n    EventBind.bind(this.borderIcon6, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      this.options.onUpdate('border6', this.color, this.type);\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n    EventBind.bind(this.borderIcon7, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      this.options.onUpdate('border7', this.color, this.type);\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n    EventBind.bind(this.borderIcon8, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      this.options.onUpdate('border8', this.color, this.type);\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n    EventBind.bind(this.borderIcon9, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      this.options.onUpdate('border9', this.color, this.type);\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n    EventBind.bind(this.borderIcon10, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      this.options.onUpdate('border10', this.color, this.type);\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n  }\r\n}\r\n\r\nexport { BorderTypeContextMenu };\r\n","import { DropDownItem } from '../../../base/DropDownItem';\r\nimport { cssPrefix } from '../../../../../../config';\r\nimport { Icon } from '../../../Icon';\r\nimport { BorderTypeContextMenu } from '../../border/bordertype/BorderTypeContextMenu';\r\nimport { Utils } from '../../../../../../utils/Utils';\r\nimport { EL_POPUP_POSITION } from '../../../../../../component/elpopup/ElPopUp';\r\n\r\nclass Border extends DropDownItem {\r\n  constructor(options) {\r\n    super(`${cssPrefix}-tools-border`);\r\n    this.options = Utils.copyProp({\r\n      contextMenu: {},\r\n    }, options);\r\n    this.icon = new Icon('border');\r\n    this.setIcon(this.icon);\r\n    this.borderTypeContextMenu = new BorderTypeContextMenu(Utils.copyProp({\r\n      el: this,\r\n      position: EL_POPUP_POSITION.BOTTOM,\r\n    }, this.options.contextMenu));\r\n  }\r\n}\r\nexport { Border };\r\n","import { cssPrefix } from '../../../config';\r\nimport { Icon } from './Icon';\r\nimport { Item } from './base/Item';\r\n\r\nclass Merge extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-merge`);\r\n    this.icon = new Icon('merge');\r\n    this.children(this.icon);\r\n  }\r\n}\r\n\r\nexport { Merge };\r\n","import { Item } from '../../../base/Item';\r\nimport { cssPrefix } from '../../../../../../config';\r\nimport { Icon } from '../../../Icon';\r\n\r\nclass HorizontalIcon1 extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-horizontal1`);\r\n    this.icon = new Icon('align-left');\r\n    this.children(this.icon);\r\n  }\r\n}\r\n\r\nexport { HorizontalIcon1 };\r\n","import { Item } from '../../../base/Item';\r\nimport { cssPrefix } from '../../../../../../config';\r\nimport { Icon } from '../../../Icon';\r\n\r\nclass HorizontalIcon2 extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-horizontal2`);\r\n    this.icon = new Icon('align-center');\r\n    this.children(this.icon);\r\n  }\r\n}\r\n\r\nexport { HorizontalIcon2 };\r\n","import { Item } from '../../../base/Item';\r\nimport { cssPrefix } from '../../../../../../config';\r\nimport { Icon } from '../../../Icon';\r\n\r\nclass HorizontalIcon3 extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-horizontal3`);\r\n    this.icon = new Icon('align-right');\r\n    this.children(this.icon);\r\n  }\r\n}\r\n\r\nexport { HorizontalIcon3 };\r\n","import { ELContextMenuItem } from '../../../../../component/elcontextmenu/ELContextMenuItem';\r\nimport { cssPrefix } from '../../../../../config';\r\n\r\nclass HorizontalContextMenuItem extends ELContextMenuItem {\r\n  constructor() {\r\n    super(`${cssPrefix}-horizontal-type-context-menu-item`);\r\n  }\r\n}\r\n\r\nexport { HorizontalContextMenuItem };\r\n","class Crop {\r\n  constructor({\r\n    rect, draw, offset = 0,\r\n  }) {\r\n    this.rect = rect;\r\n    this.draw = draw;\r\n    this.offset = offset;\r\n  }\r\n\r\n  open() {\r\n    const { rect, draw, offset } = this;\r\n    const {\r\n      x, y, width, height,\r\n    } = rect;\r\n    draw.save();\r\n    draw.rect(x, y, width + offset, height + offset);\r\n    draw.clip();\r\n    return this;\r\n  }\r\n\r\n  close() {\r\n    const { draw } = this;\r\n    draw.restore();\r\n    return this;\r\n  }\r\n}\r\n\r\nexport { Crop };\r\n","/* global window */\r\n\r\nfunction dpr() {\r\n  return window.devicePixelRatio || 1;\r\n}\r\n\r\nfunction floor(n) {\r\n  // eslint-disable-next-line no-bitwise\r\n  return (0.5 + n) << 0;\r\n}\r\n\r\nfunction npx(px) {\r\n  return floor(px * dpr());\r\n}\r\n\r\nfunction angleToRadian(angle) {\r\n  return -angle * (Math.PI / 180);\r\n}\r\n\r\nclass Draw {\r\n  constructor(el) {\r\n    this.el = el;\r\n    this.ctx = el.getContext('2d');\r\n    this.width = el.width;\r\n    this.height = el.height;\r\n    this.offsetX = 0;\r\n    this.offsetY = 0;\r\n  }\r\n\r\n  rotate(angle) {\r\n    const { ctx } = this;\r\n    ctx.rotate(angleToRadian(angle));\r\n    return this;\r\n  }\r\n\r\n  offset(offsetX = 0, offsetY = 0) {\r\n    this.offsetX = offsetX;\r\n    this.offsetY = offsetY;\r\n  }\r\n\r\n  resize(width, height) {\r\n    const { el } = this;\r\n    this.width = width;\r\n    this.height = height;\r\n    el.style.width = `${width}px`;\r\n    el.style.height = `${height}px`;\r\n    el.width = npx(width);\r\n    el.height = npx(height);\r\n    return this;\r\n  }\r\n\r\n  clear() {\r\n    const { width, height } = this;\r\n    this.clearRect(0, 0, width, height);\r\n    return this;\r\n  }\r\n\r\n  attr(options) {\r\n    // eslint-disable-next-line guard-for-in,no-restricted-syntax\r\n    for (const key in options) {\r\n      // eslint-disable-next-line no-prototype-builtins\r\n      if (options.hasOwnProperty(key)) {\r\n        let value = options[key];\r\n        if (typeof value === 'string' || value instanceof String) {\r\n          value = value.trim();\r\n        }\r\n        if (this.ctx[key] !== value) {\r\n          this.ctx[key] = value;\r\n        }\r\n      }\r\n    }\r\n    return this;\r\n  }\r\n\r\n  beginPath() {\r\n    this.ctx.beginPath();\r\n    return this;\r\n  }\r\n\r\n  save() {\r\n    const { ctx } = this;\r\n    ctx.save();\r\n    this.beginPath();\r\n    return this;\r\n  }\r\n\r\n  restore() {\r\n    const { ctx } = this;\r\n    ctx.restore();\r\n    return this;\r\n  }\r\n\r\n  clip() {\r\n    const { ctx } = this;\r\n    ctx.clip();\r\n    return this;\r\n  }\r\n\r\n  fill() {\r\n    this.ctx.fill();\r\n  }\r\n\r\n  setLineDash(dash) {\r\n    this.ctx.setLineDash(dash);\r\n  }\r\n\r\n  measureText(text) {\r\n    return this.ctx.measureText(text);\r\n  }\r\n\r\n  line(...xys) {\r\n    const { ctx } = this;\r\n    if (xys.length > 1) {\r\n      const [x, y] = xys[0];\r\n      this.moveTo(x, y);\r\n      for (let i = 1, len = xys.length; i < len; i += 1) {\r\n        const [x1, y1] = xys[i];\r\n        this.lineTo(x1, y1);\r\n      }\r\n      ctx.stroke();\r\n    }\r\n    return this;\r\n  }\r\n\r\n  clearRect(x, y, w, h) {\r\n    const { offsetX, offsetY } = this;\r\n    this.ctx.clearRect(npx(x + offsetX), npx(y + offsetY), npx(w), npx(h));\r\n    return this;\r\n  }\r\n\r\n  rect(x, y, w, h) {\r\n    const { offsetX, offsetY } = this;\r\n    this.ctx.rect(npx(x + offsetX), npx(y + offsetY), npx(w), npx(h));\r\n    return this;\r\n  }\r\n\r\n  fillRect(x, y, w, h) {\r\n    const { offsetX, offsetY } = this;\r\n    this.ctx.fillRect(npx(x + offsetX), npx(y + offsetY), npx(w), npx(h));\r\n    return this;\r\n  }\r\n\r\n  fillText(text, x, y) {\r\n    const { offsetX, offsetY } = this;\r\n    this.ctx.fillText(text, npx(x + offsetX), npx(y + offsetY));\r\n    return this;\r\n  }\r\n\r\n  moveTo(x, y) {\r\n    const { ctx } = this;\r\n    const { offsetX, offsetY } = this;\r\n    const even = ctx.lineWidth % 2 === 0;\r\n    const nx = even ? npx(x + offsetX) : npx(x + offsetX) + 0.5;\r\n    const ny = even ? npx(y + offsetY) : npx(y + offsetY) + 0.5;\r\n    ctx.moveTo(nx, ny);\r\n  }\r\n\r\n  lineTo(x, y) {\r\n    const { ctx } = this;\r\n    const { offsetX, offsetY } = this;\r\n    const even = ctx.lineWidth % 2 === 0;\r\n    const nx = even ? npx(x + offsetX) : npx(x + offsetX) + 0.5;\r\n    const ny = even ? npx(y + offsetY) : npx(y + offsetY) + 0.5;\r\n    ctx.lineTo(nx, ny);\r\n  }\r\n}\r\n\r\nexport {\r\n  Draw, npx, dpr, floor, angleToRadian,\r\n};\r\n","class Rect {\r\n  constructor({\r\n    x, y, width, height,\r\n  }) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.width = width;\r\n    this.height = height;\r\n  }\r\n\r\n  expandSize(size) {\r\n    this.width += size;\r\n    this.height += size;\r\n    return this;\r\n  }\r\n\r\n  clone() {\r\n    const { x, y, width, height } = this;\r\n    return new Rect({ x, y, width, height });\r\n  }\r\n}\r\n\r\n\r\nexport { Rect };\r\n","import { Rect } from './Rect';\r\nimport { angleToRadian, npx } from './Draw';\r\n\r\nconst ANGLE_ORIGIN = {\r\n  TOP_LEFT: 'top-left',\r\n  TOP_CENTER: 'top-center',\r\n  TOP_RIGHT: 'top-right',\r\n  MIDDLE_LEFT: 'middle-left',\r\n  MIDDLE_CENTER: 'middle-center',\r\n  MIDDLE_RIGHT: 'middle-right',\r\n  BOTTOM_LEFT: 'bottom-left',\r\n  BOTTOM_CENTER: 'bottom-center',\r\n  BOTTOM_RIGHT: 'bottom-right',\r\n};\r\n\r\nclass DrawAngle {\r\n  constructor({\r\n    dw,\r\n    angle,\r\n    origin = ANGLE_ORIGIN.MIDDLE_CENTER,\r\n    rect = new Rect({ x: 0, y: 0, width: 0, height: 0 }),\r\n  }) {\r\n    this.dw = dw;\r\n    this.origin = origin;\r\n    this.rect = rect;\r\n    this.angle = angle;\r\n  }\r\n\r\n  rotate() {\r\n    const { origin, dw, rect, angle } = this;\r\n    const { x, y, width, height } = rect;\r\n    dw.save();\r\n    let tx = 0;\r\n    let ty = 0;\r\n    switch (origin) {\r\n      case ANGLE_ORIGIN.TOP_LEFT:\r\n        tx = x;\r\n        ty = y;\r\n        break;\r\n      case ANGLE_ORIGIN.TOP_CENTER:\r\n        tx = x + width / 2;\r\n        ty = y;\r\n        break;\r\n      case ANGLE_ORIGIN.TOP_RIGHT:\r\n        tx = x + width;\r\n        ty = y;\r\n        break;\r\n      case ANGLE_ORIGIN.MIDDLE_LEFT:\r\n        tx = x;\r\n        ty = y + height / 2;\r\n        break;\r\n      case ANGLE_ORIGIN.MIDDLE_CENTER:\r\n        tx = x + width / 2;\r\n        ty = y + height / 2;\r\n        break;\r\n      case ANGLE_ORIGIN.MIDDLE_RIGHT:\r\n        tx = x + width;\r\n        ty = y + height / 2;\r\n        break;\r\n      case ANGLE_ORIGIN.BOTTOM_LEFT:\r\n        tx = x;\r\n        ty = y + height;\r\n        break;\r\n      case ANGLE_ORIGIN.BOTTOM_CENTER:\r\n        tx = x + width / 2;\r\n        ty = y + height;\r\n        break;\r\n      case ANGLE_ORIGIN.BOTTOM_RIGHT:\r\n        tx = x + width;\r\n        ty = y + height;\r\n        break;\r\n      default: break;\r\n    }\r\n    dw.ctx.translate(npx(tx + dw.offsetX), npx(ty + dw.offsetY));\r\n    dw.rotate(angle);\r\n    dw.ctx.translate(-npx(tx + dw.offsetX), -npx(ty + dw.offsetY));\r\n    return this;\r\n  }\r\n\r\n  revert() {\r\n    const { dw } = this;\r\n    dw.restore();\r\n    return this;\r\n  }\r\n\r\n  static triangleHypotenuse(angle, width) {\r\n    const cos = Math.cos(angleToRadian(angle));\r\n    const sin = Math.sin(angleToRadian(angle));\r\n    return {\r\n      width: Math.abs(cos * width), height: Math.abs(sin * width),\r\n    };\r\n  }\r\n\r\n  setOrigin(origin) {\r\n    this.origin = origin;\r\n    return this;\r\n  }\r\n\r\n  setRect(rect) {\r\n    this.rect = rect;\r\n    return this;\r\n  }\r\n}\r\n\r\nclass TrigonometricFunction {\r\n  constructor({ angle, width, height }) {\r\n    this.angle = angle;\r\n    this.width = width;\r\n    this.height = height;\r\n  }\r\n\r\n  // 斜边 + sin 角度\r\n  sinWidthAngle() {\r\n    const { angle, width } = this;\r\n    return Math.abs(Math.sin(angleToRadian(angle)) * width);\r\n  }\r\n\r\n  // 斜边 + cos 角度\r\n  cosWidthAngle() {\r\n    const { angle, width } = this;\r\n    return Math.abs(Math.cos(angleToRadian(angle)) * width);\r\n  }\r\n\r\n  // 对边 + sin角度\r\n  sinHeightAngle() {\r\n    const { angle, height } = this;\r\n    return Math.abs(height / Math.sin(angleToRadian(angle)));\r\n  }\r\n\r\n  setWidth(width) {\r\n    this.width = width;\r\n  }\r\n\r\n  setHeight(height) {\r\n    this.height = height;\r\n  }\r\n\r\n  setAngle(angle) {\r\n    this.angle = angle;\r\n  }\r\n}\r\n\r\nexport { DrawAngle, TrigonometricFunction, ANGLE_ORIGIN };\r\n","import { Crop } from './Crop';\r\nimport { dpr, npx } from './Draw';\r\nimport { Utils } from '../utils/Utils';\r\nimport { DrawAngle, TrigonometricFunction } from './DrawAngle';\r\nimport { Rect } from './Rect';\r\n\r\n// 垂直文字间距\r\nconst VERTICAL_SPACING = 2;\r\n// 垂直文本行间距\r\nconst VERTICAL_LIEN_HEIGHT = 0;\r\n// 水平文本间距\r\nconst HORIZONTAL_LIEN_HEIGHT = 4;\r\n// 旋转文本间距\r\nconst ANGLE_LINE_HEIGHT = 4;\r\n// 内容填充\r\nconst PADDING = 8;\r\n\r\nconst ALIGN = {\r\n  left: 'left',\r\n  center: 'center',\r\n  right: 'right',\r\n};\r\nconst VERTICAL_ALIGN = {\r\n  top: 'top',\r\n  center: 'middle',\r\n  bottom: 'bottom',\r\n};\r\nconst TEXT_WRAP = {\r\n  OVER_FLOW: 1,\r\n  WORD_WRAP: 2,\r\n  TRUNCATE: 3,\r\n};\r\nconst TEXT_DIRECTION = {\r\n  HORIZONTAL: 'horizontal',\r\n  VERTICAL: 'vertical',\r\n  ANGLE: 'angle',\r\n};\r\n\r\n/**\r\n * 水平方向字体绘制\r\n */\r\nclass HorizontalFontDraw {\r\n  constructor({\r\n    text, rect, dw, overflow, overflowCrop, attr,\r\n  }) {\r\n    this.text = text;\r\n    this.dw = dw;\r\n    this.rect = rect;\r\n    this.overflow = overflow;\r\n    this.overflowCrop = overflowCrop;\r\n    this.attr = attr;\r\n  }\r\n\r\n  textWidth(text) {\r\n    const { dw } = this;\r\n    return dw.measureText(text).width;\r\n  }\r\n\r\n  drawLine(type, tx, ty, textWidth) {\r\n    const { dw, attr } = this;\r\n    const { size, verticalAlign, align } = attr;\r\n    const s = [0, 0];\r\n    const e = [0, 0];\r\n    if (type === 'strike') {\r\n      switch (align) {\r\n        case ALIGN.right:\r\n          s[0] = tx - textWidth;\r\n          e[0] = tx;\r\n          break;\r\n        case ALIGN.center:\r\n          s[0] = tx - textWidth / 2;\r\n          e[0] = tx + textWidth / 2;\r\n          break;\r\n        case ALIGN.left:\r\n          s[0] = tx;\r\n          e[0] = tx + textWidth;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      switch (verticalAlign) {\r\n        case VERTICAL_ALIGN.top:\r\n          s[1] = ty + size / 2;\r\n          e[1] = ty + size / 2;\r\n          break;\r\n        case VERTICAL_ALIGN.center:\r\n          s[1] = ty;\r\n          e[1] = ty;\r\n          break;\r\n        case VERTICAL_ALIGN.bottom:\r\n          s[1] = ty - size / 2;\r\n          e[1] = ty - size / 2;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n    if (type === 'underline') {\r\n      switch (align) {\r\n        case ALIGN.right:\r\n          s[0] = tx - textWidth;\r\n          e[0] = tx;\r\n          break;\r\n        case ALIGN.center:\r\n          s[0] = tx - textWidth / 2;\r\n          e[0] = tx + textWidth / 2;\r\n          break;\r\n        case ALIGN.left:\r\n          s[0] = tx;\r\n          e[0] = tx + textWidth;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      switch (verticalAlign) {\r\n        case VERTICAL_ALIGN.top:\r\n          s[1] = ty + size;\r\n          e[1] = ty + size;\r\n          break;\r\n        case VERTICAL_ALIGN.center:\r\n          s[1] = ty + size / 2;\r\n          e[1] = ty + size / 2;\r\n          break;\r\n        case VERTICAL_ALIGN.bottom:\r\n          s[1] = ty;\r\n          e[1] = ty;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n    dw.line(s, e);\r\n  }\r\n\r\n  /**\r\n   * 越界的文字截斷\r\n   * @returns {number}\r\n   */\r\n  drawTextTruncate() {\r\n    const {\r\n      text, dw, attr, rect,\r\n    } = this;\r\n    const {\r\n      underline, strikethrough, align, verticalAlign,\r\n    } = attr;\r\n    const { width, height } = rect;\r\n    const textWidth = this.textWidth(text) / dpr();\r\n    let tx = rect.x;\r\n    let ty = rect.y;\r\n    switch (align) {\r\n      case ALIGN.left:\r\n        tx += PADDING;\r\n        break;\r\n      case ALIGN.center:\r\n        tx += width / 2;\r\n        break;\r\n      case ALIGN.right:\r\n        tx += width - PADDING;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    switch (verticalAlign) {\r\n      case VERTICAL_ALIGN.top:\r\n        ty += PADDING;\r\n        break;\r\n      case VERTICAL_ALIGN.center:\r\n        ty += height / 2;\r\n        break;\r\n      case VERTICAL_ALIGN.bottom:\r\n        ty += height - PADDING;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    let contentWidth;\r\n    switch (align) {\r\n      case ALIGN.right:\r\n      case ALIGN.left:\r\n        contentWidth = textWidth + PADDING * 2;\r\n        break;\r\n      case ALIGN.center:\r\n      default:\r\n        contentWidth = textWidth;\r\n    }\r\n    const crop = new Crop({\r\n      draw: dw,\r\n      rect,\r\n    });\r\n    crop.open();\r\n    dw.fillText(text, tx, ty);\r\n    if (underline || strikethrough) {\r\n      dw.beginPath();\r\n    }\r\n    if (underline) {\r\n      this.drawLine('underline', tx, ty, textWidth);\r\n    }\r\n    if (strikethrough) {\r\n      this.drawLine('strike', tx, ty, textWidth);\r\n    }\r\n    crop.close();\r\n    return contentWidth;\r\n  }\r\n\r\n  /**\r\n   * 文字超過最大可繪製區域后自動\r\n   * 截斷\r\n   * @returns {number}\r\n   */\r\n  drawTextOverFlow() {\r\n    const {\r\n      text, dw, attr, rect, overflow, overflowCrop,\r\n    } = this;\r\n    const {\r\n      size, underline, strikethrough, align, verticalAlign,\r\n    } = attr;\r\n    const { width, height } = rect;\r\n    const textWidth = this.textWidth(text) / dpr();\r\n    let tx = rect.x;\r\n    let ty = rect.y;\r\n    let paddingH = 0;\r\n    let paddingV = 0;\r\n    switch (align) {\r\n      case ALIGN.left:\r\n        tx += PADDING;\r\n        paddingH = PADDING;\r\n        break;\r\n      case ALIGN.center:\r\n        tx += width / 2;\r\n        break;\r\n      case ALIGN.right:\r\n        tx += width - PADDING;\r\n        paddingH = PADDING;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    switch (verticalAlign) {\r\n      case VERTICAL_ALIGN.top:\r\n        ty += PADDING;\r\n        paddingV = PADDING;\r\n        break;\r\n      case VERTICAL_ALIGN.center:\r\n        ty += height / 2;\r\n        break;\r\n      case VERTICAL_ALIGN.bottom:\r\n        ty += height - PADDING;\r\n        paddingV = PADDING;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    let contentWidth;\r\n    switch (align) {\r\n      case ALIGN.right:\r\n      case ALIGN.left:\r\n        contentWidth = textWidth + PADDING * 2;\r\n        break;\r\n      case ALIGN.center:\r\n      default:\r\n        contentWidth = textWidth;\r\n    }\r\n    if (overflowCrop || (overflow && (textWidth + paddingH > overflow.width\r\n      || size + paddingV > overflow.height))) {\r\n      const crop = new Crop({\r\n        draw: dw,\r\n        rect: overflow,\r\n      });\r\n      crop.open();\r\n      // console.log('text >>>', text, tx, ty);\r\n      dw.fillText(text, tx, ty);\r\n      if (underline || strikethrough) {\r\n        dw.beginPath();\r\n      }\r\n      if (underline) {\r\n        this.drawLine('underline', tx, ty, textWidth);\r\n      }\r\n      if (strikethrough) {\r\n        this.drawLine('strike', tx, ty, textWidth);\r\n      }\r\n      crop.close();\r\n    } else {\r\n      dw.fillText(text, tx, ty);\r\n      if (underline || strikethrough) {\r\n        dw.beginPath();\r\n      }\r\n      if (underline) {\r\n        this.drawLine('underline', tx, ty, textWidth);\r\n      }\r\n      if (strikethrough) {\r\n        this.drawLine('strike', tx, ty, textWidth);\r\n      }\r\n    }\r\n    return contentWidth;\r\n  }\r\n\r\n  /**\r\n   * 文字自動換行\r\n   * @returns {number}\r\n   */\r\n  drawTextWarp() {\r\n    // console.log('drawTextWarp');\r\n    const { text, dw, attr, rect } = this;\r\n    const { size, underline, strikethrough, align, verticalAlign } = attr;\r\n    const { width, height } = rect;\r\n    const maxTextWidth = width - PADDING * 2;\r\n    const textArray = [];\r\n    const textLine = {\r\n      len: 0,\r\n      start: 0,\r\n    };\r\n    const len = text.length;\r\n    let hOffset = 0;\r\n    let i = 0;\r\n    let maxLen = 0;\r\n    while (i < len) {\r\n      const charWidth = this.textWidth(text.charAt(i)) / dpr();\r\n      const textWidth = textLine.len + charWidth;\r\n      if (textWidth > maxTextWidth) {\r\n        if (textLine.len === 0) {\r\n          textArray.push({\r\n            text: text.substring(i, i + 1),\r\n            len: textWidth,\r\n            tx: 0,\r\n            ty: hOffset,\r\n          });\r\n          i += 1;\r\n          if (textWidth > maxLen) {\r\n            maxLen = textWidth;\r\n          }\r\n        } else {\r\n          textArray.push({\r\n            text: text.substring(textLine.start, i),\r\n            len: textLine.len,\r\n            tx: 0,\r\n            ty: hOffset,\r\n          });\r\n          if (textLine.len > maxLen) {\r\n            maxLen = textLine.len;\r\n          }\r\n        }\r\n        hOffset += size + HORIZONTAL_LIEN_HEIGHT;\r\n        textLine.len = 0;\r\n        textLine.start = i;\r\n      } else {\r\n        textLine.len = textWidth;\r\n        i += 1;\r\n      }\r\n    }\r\n    if (textLine.len > 0) {\r\n      textArray.push({\r\n        text: text.substring(textLine.start),\r\n        len: textLine.len,\r\n        tx: 0,\r\n        ty: hOffset,\r\n      });\r\n      if (textLine.len > maxLen) {\r\n        maxLen = textLine.len;\r\n      }\r\n    }\r\n    let bx = rect.x;\r\n    let by = rect.y;\r\n    switch (align) {\r\n      case ALIGN.left:\r\n        bx += PADDING;\r\n        break;\r\n      case ALIGN.center:\r\n        bx += width / 2;\r\n        break;\r\n      case ALIGN.right:\r\n        bx += width - PADDING;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    switch (verticalAlign) {\r\n      case VERTICAL_ALIGN.top:\r\n        by += PADDING;\r\n        break;\r\n      case VERTICAL_ALIGN.center:\r\n        by += height / 2 - hOffset / 2;\r\n        break;\r\n      case VERTICAL_ALIGN.bottom:\r\n        by += height - hOffset - PADDING;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    let contentWidth;\r\n    switch (align) {\r\n      case ALIGN.right:\r\n      case ALIGN.left:\r\n        contentWidth = maxLen + PADDING * 2;\r\n        break;\r\n      case ALIGN.center:\r\n      default:\r\n        contentWidth = maxLen;\r\n    }\r\n    const crop = new Crop({\r\n      draw: dw,\r\n      rect,\r\n    });\r\n    crop.open();\r\n    for (let i = 0, len = textArray.length; i < len; i += 1) {\r\n      const item = textArray[i];\r\n      item.tx += bx;\r\n      item.ty += by;\r\n      // console.log('text >>>', item.text, item.tx, item.ty);\r\n      dw.fillText(item.text, item.tx, item.ty);\r\n      if (underline || strikethrough) {\r\n        dw.beginPath();\r\n      }\r\n      if (underline) {\r\n        this.drawLine('underline', item.tx, item.ty, item.len);\r\n      }\r\n      if (strikethrough) {\r\n        this.drawLine('strike', item.tx, item.ty, item.len);\r\n      }\r\n    }\r\n    crop.close();\r\n    return contentWidth;\r\n  }\r\n\r\n  draw() {\r\n    const { dw, attr } = this;\r\n    const { textWrap } = attr;\r\n    dw.attr({\r\n      textAlign: attr.align,\r\n      textBaseline: attr.verticalAlign,\r\n      font: `${attr.italic ? 'italic' : ''} ${attr.bold ? 'bold' : ''} ${npx(attr.size)}px ${attr.name}`,\r\n      fillStyle: attr.color,\r\n      strokeStyle: attr.color,\r\n    });\r\n    switch (textWrap) {\r\n      case TEXT_WRAP.TRUNCATE:\r\n        return this.drawTextTruncate();\r\n      case TEXT_WRAP.WORD_WRAP:\r\n        return this.drawTextWarp();\r\n      case TEXT_WRAP.OVER_FLOW:\r\n      default:\r\n        return this.drawTextOverFlow();\r\n    }\r\n  }\r\n\r\n  setTextWrap(textWrap) {\r\n    this.attr.textWrap = textWrap;\r\n  }\r\n\r\n  setOverflowCrop(overflowCrop) {\r\n    this.overflowCrop = overflowCrop;\r\n  }\r\n}\r\n\r\n/**\r\n * 垂直方向字体绘制\r\n */\r\nclass VerticalFontDraw {\r\n  constructor({\r\n    text, rect, dw, overflow, overflowCrop, attr,\r\n  }) {\r\n    this.text = text;\r\n    this.dw = dw;\r\n    this.rect = rect;\r\n    this.overflow = overflow;\r\n    this.overflowCrop = overflowCrop;\r\n    this.attr = attr;\r\n  }\r\n\r\n  textWidth(text) {\r\n    const { dw } = this;\r\n    return dw.measureText(text).width;\r\n  }\r\n\r\n  drawLine(type, tx, ty, textWidth, align, verticalAlign) {\r\n    const { dw, attr } = this;\r\n    const { size } = attr;\r\n    const s = [0, 0];\r\n    const e = [0, 0];\r\n    if (type === 'strike') {\r\n      switch (align) {\r\n        case ALIGN.right:\r\n          s[0] = tx - textWidth;\r\n          e[0] = tx;\r\n          break;\r\n        case ALIGN.center:\r\n          s[0] = tx - textWidth / 2;\r\n          e[0] = tx + textWidth / 2;\r\n          break;\r\n        case ALIGN.left:\r\n          s[0] = tx;\r\n          e[0] = tx + textWidth;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      switch (verticalAlign) {\r\n        case VERTICAL_ALIGN.top:\r\n          s[1] = ty + size / 2;\r\n          e[1] = ty + size / 2;\r\n          break;\r\n        case VERTICAL_ALIGN.center:\r\n          s[1] = ty;\r\n          e[1] = ty;\r\n          break;\r\n        case VERTICAL_ALIGN.bottom:\r\n          s[1] = ty - size / 2;\r\n          e[1] = ty - size / 2;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n    if (type === 'underline') {\r\n      switch (align) {\r\n        case ALIGN.right:\r\n          s[0] = tx - textWidth;\r\n          e[0] = tx;\r\n          break;\r\n        case ALIGN.center:\r\n          s[0] = tx - textWidth / 2;\r\n          e[0] = tx + textWidth / 2;\r\n          break;\r\n        case ALIGN.left:\r\n          s[0] = tx;\r\n          e[0] = tx + textWidth;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      switch (verticalAlign) {\r\n        case VERTICAL_ALIGN.top:\r\n          s[1] = ty + size;\r\n          e[1] = ty + size;\r\n          break;\r\n        case VERTICAL_ALIGN.center:\r\n          s[1] = ty + size / 2;\r\n          e[1] = ty + size / 2;\r\n          break;\r\n        case VERTICAL_ALIGN.bottom:\r\n          s[1] = ty;\r\n          e[1] = ty;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n    dw.line(s, e);\r\n  }\r\n\r\n  drawTextTruncate() {\r\n    const {\r\n      text, dw, attr, rect,\r\n    } = this;\r\n    const {\r\n      underline, strikethrough, align, verticalAlign, size,\r\n    } = attr;\r\n    const { width, height } = rect;\r\n    const textArray = [];\r\n    let hOffset = 0;\r\n    for (let i = 0; i < text.length; i += 1) {\r\n      const char = text.charAt(i);\r\n      textArray.push({\r\n        len: this.textWidth(char) / dpr(),\r\n        text: char,\r\n        tx: 0,\r\n        ty: hOffset,\r\n      });\r\n      if (i < text.length - 1) {\r\n        hOffset += size + VERTICAL_SPACING;\r\n      } else {\r\n        hOffset += size;\r\n      }\r\n    }\r\n    let bx = rect.x;\r\n    let by = rect.y;\r\n    switch (align) {\r\n      case ALIGN.left:\r\n        bx += PADDING;\r\n        break;\r\n      case ALIGN.center:\r\n        bx += width / 2;\r\n        break;\r\n      case ALIGN.right:\r\n        bx += width - PADDING;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    switch (verticalAlign) {\r\n      case VERTICAL_ALIGN.top:\r\n        by += PADDING;\r\n        break;\r\n      case VERTICAL_ALIGN.center:\r\n        by += height / 2 - hOffset / 2 + PADDING;\r\n        break;\r\n      case VERTICAL_ALIGN.bottom:\r\n        by += height - hOffset + PADDING;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    let contentWidth;\r\n    switch (align) {\r\n      case ALIGN.left:\r\n      case ALIGN.right:\r\n        contentWidth = size + PADDING * 2;\r\n        break;\r\n      case ALIGN.center:\r\n      default:\r\n        contentWidth = size;\r\n    }\r\n    const crop = new Crop({\r\n      draw: dw,\r\n      rect,\r\n    });\r\n    crop.open();\r\n    for (let i = 0, len = textArray.length; i < len; i += 1) {\r\n      const item = textArray[i];\r\n      item.tx += bx;\r\n      item.ty += by;\r\n      dw.fillText(item.text, item.tx, item.ty);\r\n      if (underline || strikethrough) {\r\n        dw.beginPath();\r\n      }\r\n      if (underline) {\r\n        this.drawLine('underline', item.tx, item.ty, item.len, align, verticalAlign);\r\n      }\r\n      if (strikethrough) {\r\n        this.drawLine('strike', item.tx, item.ty, item.len, align, verticalAlign);\r\n      }\r\n    }\r\n    crop.close();\r\n    return contentWidth;\r\n  }\r\n\r\n  drawTextOverFlow() {\r\n    const {\r\n      text, dw, attr, rect, overflow, overflowCrop,\r\n    } = this;\r\n    const {\r\n      underline, strikethrough, align, verticalAlign, size,\r\n    } = attr;\r\n    const { width, height } = rect;\r\n    const textArray = [];\r\n    let hOffset = 0;\r\n    for (let i = 0; i < text.length; i += 1) {\r\n      const char = text.charAt(i);\r\n      textArray.push({\r\n        len: this.textWidth(char) / dpr(),\r\n        text: char,\r\n        tx: 0,\r\n        ty: hOffset,\r\n      });\r\n      if (i < text.length - 1) {\r\n        hOffset += size + VERTICAL_SPACING;\r\n      } else {\r\n        hOffset += size;\r\n      }\r\n    }\r\n    let bx = rect.x;\r\n    let by = rect.y;\r\n    let paddingH = 0;\r\n    let paddingV = 0;\r\n    switch (align) {\r\n      case ALIGN.left:\r\n        bx += PADDING;\r\n        paddingH = PADDING;\r\n        break;\r\n      case ALIGN.center:\r\n        bx += width / 2;\r\n        break;\r\n      case ALIGN.right:\r\n        bx += width - PADDING;\r\n        paddingH = PADDING;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    switch (verticalAlign) {\r\n      case VERTICAL_ALIGN.top:\r\n        by += PADDING;\r\n        paddingV = PADDING;\r\n        break;\r\n      case VERTICAL_ALIGN.center:\r\n        by += height / 2 - hOffset / 2 + PADDING;\r\n        break;\r\n      case VERTICAL_ALIGN.bottom:\r\n        by += height - hOffset + PADDING;\r\n        paddingV = PADDING;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    let contentWidth;\r\n    switch (align) {\r\n      case ALIGN.left:\r\n      case ALIGN.right:\r\n        contentWidth = size + PADDING * 2;\r\n        break;\r\n      case ALIGN.center:\r\n      default:\r\n        contentWidth = size;\r\n    }\r\n    if (overflowCrop || (overflow && (hOffset + paddingV > overflow.height\r\n      || size + paddingH > overflow.width))) {\r\n      const crop = new Crop({\r\n        draw: dw,\r\n        rect: overflow,\r\n      });\r\n      crop.open();\r\n      for (let i = 0, len = textArray.length; i < len; i += 1) {\r\n        const item = textArray[i];\r\n        item.tx += bx;\r\n        item.ty += by;\r\n        dw.fillText(item.text, item.tx, item.ty);\r\n        if (underline || strikethrough) {\r\n          dw.beginPath();\r\n        }\r\n        if (underline) {\r\n          this.drawLine('underline', item.tx, item.ty, item.len, align, verticalAlign);\r\n        }\r\n        if (strikethrough) {\r\n          this.drawLine('strike', item.tx, item.ty, item.len, align, verticalAlign);\r\n        }\r\n      }\r\n      crop.close();\r\n    } else {\r\n      for (let i = 0, len = textArray.length; i < len; i += 1) {\r\n        const item = textArray[i];\r\n        item.tx += bx;\r\n        item.ty += by;\r\n        dw.fillText(item.text, item.tx, item.ty);\r\n        if (underline || strikethrough) {\r\n          dw.beginPath();\r\n        }\r\n        if (underline) {\r\n          this.drawLine('underline', item.tx, item.ty, item.len, align, verticalAlign);\r\n        }\r\n        if (strikethrough) {\r\n          this.drawLine('strike', item.tx, item.ty, item.len, align, verticalAlign);\r\n        }\r\n      }\r\n    }\r\n    return contentWidth;\r\n  }\r\n\r\n  drawTextWarp() {\r\n    const {\r\n      text, dw, attr, rect,\r\n    } = this;\r\n    const {\r\n      underline, strikethrough, align, verticalAlign, size,\r\n    } = attr;\r\n    const { width, height } = rect;\r\n    const textArray = [];\r\n    const len = text.length;\r\n    const boxHeight = height - PADDING * 2;\r\n    let textItem = [];\r\n    let textLen = 0;\r\n    let hOffset = 0;\r\n    let wOffset = 0;\r\n    let column = 0;\r\n    let i = 0;\r\n    while (i < len) {\r\n      const last = i === len - 1;\r\n      const first = i === 0;\r\n      const char = text.charAt(i);\r\n      const charWidth = this.textWidth(char) / dpr();\r\n      let textHeight;\r\n      if (last) {\r\n        textHeight = textLen + size;\r\n      } else {\r\n        textHeight = textLen + size + VERTICAL_SPACING;\r\n      }\r\n      if (textHeight > boxHeight) {\r\n        if (textItem.length > 0) {\r\n          textArray.push(textItem);\r\n        }\r\n        textLen = 0;\r\n        hOffset = 0;\r\n        textItem = [];\r\n        if (!first) wOffset += size + VERTICAL_LIEN_HEIGHT;\r\n        column += 1;\r\n        textItem.push({\r\n          len: charWidth,\r\n          text: char,\r\n          tx: wOffset,\r\n          ty: hOffset,\r\n        });\r\n        if (last) {\r\n          textLen = size;\r\n        } else {\r\n          textLen = size + VERTICAL_SPACING;\r\n        }\r\n      } else {\r\n        textItem.push({\r\n          len: charWidth,\r\n          text: char,\r\n          tx: wOffset,\r\n          ty: hOffset,\r\n        });\r\n        textLen = textHeight;\r\n      }\r\n      if (last) {\r\n        hOffset += size;\r\n      } else {\r\n        hOffset += size + VERTICAL_SPACING;\r\n      }\r\n      i += 1;\r\n    }\r\n    if (textItem.length > 0) {\r\n      textArray.push(textItem);\r\n    }\r\n    let bx = rect.x;\r\n    let by = rect.y;\r\n    let verticalAlignValue = verticalAlign;\r\n    switch (align) {\r\n      case ALIGN.left:\r\n        bx += PADDING;\r\n        break;\r\n      case ALIGN.center:\r\n        bx += width / 2 - wOffset / 2;\r\n        break;\r\n      case ALIGN.right:\r\n        bx += width - wOffset - PADDING;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    switch (verticalAlign) {\r\n      case VERTICAL_ALIGN.top:\r\n        dw.attr({\r\n          textBaseline: attr.verticalAlign,\r\n        });\r\n        by += PADDING;\r\n        verticalAlignValue = VERTICAL_ALIGN.top;\r\n        break;\r\n      case VERTICAL_ALIGN.center:\r\n        if (column === 0) {\r\n          dw.attr({\r\n            textBaseline: attr.verticalAlign,\r\n          });\r\n          by += height / 2 - hOffset / 2 + PADDING;\r\n          verticalAlignValue = VERTICAL_ALIGN.center;\r\n        } else {\r\n          dw.attr({\r\n            textBaseline: VERTICAL_ALIGN.top,\r\n          });\r\n          by += PADDING;\r\n          verticalAlignValue = VERTICAL_ALIGN.top;\r\n        }\r\n        break;\r\n      case VERTICAL_ALIGN.bottom:\r\n        if (column === 0) {\r\n          dw.attr({\r\n            textBaseline: VERTICAL_ALIGN.bottom,\r\n          });\r\n          by += height - hOffset + PADDING;\r\n          verticalAlignValue = VERTICAL_ALIGN.bottom;\r\n        } else {\r\n          dw.attr({\r\n            textBaseline: VERTICAL_ALIGN.top,\r\n          });\r\n          by += PADDING;\r\n          verticalAlignValue = VERTICAL_ALIGN.top;\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    let contentWidth;\r\n    switch (align) {\r\n      case ALIGN.left:\r\n      case ALIGN.right:\r\n        contentWidth = wOffset + size + PADDING * 2;\r\n        break;\r\n      case ALIGN.center:\r\n      default:\r\n        contentWidth = wOffset + size;\r\n    }\r\n    const crop = new Crop({\r\n      draw: dw,\r\n      rect,\r\n    });\r\n    crop.open();\r\n    for (let i = 0, len = textArray.length; i < len; i += 1) {\r\n      const textItem = textArray[i];\r\n      for (let j = 0; j < textItem.length; j += 1) {\r\n        const item = textItem[j];\r\n        item.tx += bx;\r\n        item.ty += by;\r\n        dw.fillText(item.text, item.tx, item.ty);\r\n        if (underline || strikethrough) {\r\n          dw.beginPath();\r\n        }\r\n        if (underline) {\r\n          this.drawLine('underline', item.tx, item.ty, item.len, align, verticalAlignValue);\r\n        }\r\n        if (strikethrough) {\r\n          this.drawLine('strike', item.tx, item.ty, item.len, align, verticalAlignValue);\r\n        }\r\n      }\r\n    }\r\n    crop.close();\r\n    return contentWidth;\r\n  }\r\n\r\n  draw() {\r\n    const { dw, attr } = this;\r\n    const { textWrap } = attr;\r\n    switch (textWrap) {\r\n      case TEXT_WRAP.TRUNCATE:\r\n        dw.attr({\r\n          textAlign: attr.align,\r\n          textBaseline: attr.verticalAlign,\r\n          font: `${attr.italic ? 'italic' : ''} ${attr.bold ? 'bold' : ''} ${npx(attr.size)}px ${attr.name}`,\r\n          fillStyle: attr.color,\r\n          strokeStyle: attr.color,\r\n        });\r\n        return this.drawTextTruncate();\r\n      case TEXT_WRAP.WORD_WRAP:\r\n        dw.attr({\r\n          textAlign: attr.align,\r\n          font: `${attr.italic ? 'italic' : ''} ${attr.bold ? 'bold' : ''} ${npx(attr.size)}px ${attr.name}`,\r\n          fillStyle: attr.color,\r\n          strokeStyle: attr.color,\r\n        });\r\n        return this.drawTextWarp();\r\n      case TEXT_WRAP.OVER_FLOW:\r\n      default:\r\n        dw.attr({\r\n          textAlign: attr.align,\r\n          textBaseline: attr.verticalAlign,\r\n          font: `${attr.italic ? 'italic' : ''} ${attr.bold ? 'bold' : ''} ${npx(attr.size)}px ${attr.name}`,\r\n          fillStyle: attr.color,\r\n          strokeStyle: attr.color,\r\n        });\r\n        return this.drawTextOverFlow();\r\n    }\r\n  }\r\n\r\n  setTextWrap(textWrap) {\r\n    this.attr.textWrap = textWrap;\r\n  }\r\n\r\n  setOverflowCrop(overflowCrop) {\r\n    this.overflowCrop = overflowCrop;\r\n  }\r\n}\r\n\r\n/**\r\n * 旋转字体绘制\r\n */\r\nclass AngleFontDraw {\r\n  constructor({\r\n    text, rect, dw, overflow, overflowCrop, attr,\r\n  }) {\r\n    this.text = text;\r\n    this.dw = dw;\r\n    this.rect = rect;\r\n    this.overflow = overflow;\r\n    this.overflowCrop = overflowCrop;\r\n    this.attr = attr;\r\n  }\r\n\r\n  textWidth(text) {\r\n    const { dw } = this;\r\n    return dw.measureText(text).width;\r\n  }\r\n\r\n  drawLine(type, tx, ty, textWidth) {\r\n    const { dw, attr } = this;\r\n    const { size } = attr;\r\n    const s = [0, 0];\r\n    const e = [0, 0];\r\n    if (type === 'strike') {\r\n      s[0] = tx;\r\n      e[0] = tx + textWidth;\r\n      s[1] = ty + size / 2;\r\n      e[1] = ty + size / 2;\r\n    }\r\n    if (type === 'underline') {\r\n      s[0] = tx;\r\n      e[0] = tx + textWidth;\r\n      s[1] = ty + size;\r\n      e[1] = ty + size;\r\n    }\r\n    dw.line(s, e);\r\n  }\r\n\r\n  drawTextTruncate() {\r\n    const {\r\n      text, dw, attr, rect,\r\n    } = this;\r\n    const {\r\n      underline, strikethrough, align, verticalAlign, size,\r\n    } = attr;\r\n    let { angle } = attr;\r\n    const { width, height } = rect;\r\n    if (angle > 90) {\r\n      angle = 90;\r\n    }\r\n    if (angle < -90) {\r\n      angle = -90;\r\n    }\r\n    // 计算文字斜边\r\n    // 的宽度\r\n    const textWidth = this.textWidth(text) / dpr();\r\n    const trigonometric = new TrigonometricFunction({\r\n      angle,\r\n      width: textWidth,\r\n      height: size,\r\n    });\r\n    const trigonometricWidth = trigonometric.cosWidthAngle();\r\n    const trigonometricHeight = trigonometric.sinWidthAngle();\r\n    // 计算文字的位置\r\n    let rtx = rect.x;\r\n    let rty = rect.y;\r\n    switch (align) {\r\n      case ALIGN.left:\r\n        rtx += PADDING;\r\n        break;\r\n      case ALIGN.center:\r\n        rtx += width / 2 - trigonometricWidth / 2;\r\n        break;\r\n      case ALIGN.right:\r\n        rtx += width - trigonometricWidth - PADDING;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    switch (verticalAlign) {\r\n      case VERTICAL_ALIGN.top:\r\n        rty += PADDING;\r\n        break;\r\n      case VERTICAL_ALIGN.center:\r\n        rty += height / 2 - trigonometricHeight / 2;\r\n        break;\r\n      case VERTICAL_ALIGN.bottom:\r\n        rty += height - trigonometricHeight - PADDING;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    // 计算内容宽度\r\n    let contentWidth;\r\n    switch (align) {\r\n      case ALIGN.right:\r\n      case ALIGN.left:\r\n        contentWidth = trigonometricWidth + PADDING * 2;\r\n        break;\r\n      case ALIGN.center:\r\n      default:\r\n        contentWidth = trigonometricWidth;\r\n    }\r\n    const tx = rtx + (trigonometricWidth / 2 - textWidth / 2);\r\n    const ty = rty + (trigonometricHeight / 2 - size / 2);\r\n    // 旋转剪切\r\n    // 绘制文字\r\n    const dwAngle = new DrawAngle({\r\n      dw,\r\n      angle,\r\n      rect: new Rect({\r\n        x: rtx,\r\n        y: rty,\r\n        width: trigonometricWidth,\r\n        height: trigonometricHeight,\r\n      }),\r\n    });\r\n    // 角度不同, 裁剪的\r\n    // 大小不同\r\n    let crop;\r\n    if (angle === 0) {\r\n      crop = new Crop({\r\n        draw: dw,\r\n        rect,\r\n      });\r\n    } else {\r\n      crop = new Crop({\r\n        draw: dw,\r\n        rect: new Rect({\r\n          x: 0,\r\n          y: rect.y,\r\n          width: contentWidth,\r\n          height: rect.height,\r\n        }),\r\n      });\r\n    }\r\n    crop.open();\r\n    dwAngle.rotate();\r\n    dw.fillText(text, tx, ty);\r\n    if (underline || strikethrough) {\r\n      dw.beginPath();\r\n    }\r\n    if (underline) {\r\n      this.drawLine('underline', tx, ty, textWidth);\r\n    }\r\n    if (strikethrough) {\r\n      this.drawLine('strike', tx, ty, textWidth);\r\n    }\r\n    dwAngle.revert();\r\n    crop.close();\r\n    return contentWidth;\r\n  }\r\n\r\n  drawTextOverFlow() {\r\n    const {\r\n      text, dw, attr, rect, overflow,\r\n    } = this;\r\n    const {\r\n      underline, strikethrough, align, verticalAlign, size, overflowCrop,\r\n    } = attr;\r\n    let { angle } = attr;\r\n    const { width, height } = rect;\r\n    if (angle > 90) {\r\n      angle = 90;\r\n    }\r\n    if (angle < -90) {\r\n      angle = -90;\r\n    }\r\n    // 计算文字斜边\r\n    // 的宽度\r\n    const textWidth = this.textWidth(text) / dpr();\r\n    const trigonometric = new TrigonometricFunction({\r\n      angle,\r\n      width: textWidth,\r\n      height: size,\r\n    });\r\n    const trigonometricWidth = trigonometric.cosWidthAngle();\r\n    const trigonometricHeight = trigonometric.sinWidthAngle();\r\n    // 计算文字的位置\r\n    let rtx = rect.x;\r\n    let rty = rect.y;\r\n    switch (align) {\r\n      case ALIGN.left:\r\n        rtx += PADDING;\r\n        break;\r\n      case ALIGN.center:\r\n        rtx += width / 2 - trigonometricWidth / 2;\r\n        break;\r\n      case ALIGN.right:\r\n        rtx += width - trigonometricWidth - PADDING;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    switch (verticalAlign) {\r\n      case VERTICAL_ALIGN.top:\r\n        rty += PADDING;\r\n        break;\r\n      case VERTICAL_ALIGN.center:\r\n        rty += height / 2 - trigonometricHeight / 2;\r\n        break;\r\n      case VERTICAL_ALIGN.bottom:\r\n        rty += height - trigonometricHeight - PADDING;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    // 计算内容宽度\r\n    let contentWidth;\r\n    switch (align) {\r\n      case ALIGN.right:\r\n      case ALIGN.left:\r\n        contentWidth = trigonometricWidth + PADDING * 2;\r\n        break;\r\n      case ALIGN.center:\r\n      default:\r\n        contentWidth = trigonometricWidth;\r\n    }\r\n    const tx = rtx + (trigonometricWidth / 2 - textWidth / 2);\r\n    const ty = rty + (trigonometricHeight / 2 - size / 2);\r\n    // 旋转剪切\r\n    // 绘制文字\r\n    const dwAngle = new DrawAngle({\r\n      dw,\r\n      angle,\r\n      rect: new Rect({\r\n        x: rtx,\r\n        y: rty,\r\n        width: trigonometricWidth,\r\n        height: trigonometricHeight,\r\n      }),\r\n    });\r\n    // 角度不同, 裁剪的\r\n    // 大小不同\r\n    let crop;\r\n    if (angle === 0) {\r\n      crop = new Crop({\r\n        draw: dw,\r\n        rect: overflow,\r\n      });\r\n    } else {\r\n      crop = new Crop({\r\n        draw: dw,\r\n        rect: new Rect({\r\n          x: 0,\r\n          y: rect.y,\r\n          width: contentWidth,\r\n          height: rect.height,\r\n        }),\r\n      });\r\n    }\r\n    // 文本是否越界\r\n    if (overflowCrop || (overflow && (trigonometricWidth > overflow.width\r\n      || trigonometricHeight > overflow.height))) {\r\n      crop.open();\r\n      dwAngle.rotate();\r\n      dw.fillText(text, tx, ty);\r\n      if (underline || strikethrough) {\r\n        dw.beginPath();\r\n      }\r\n      if (underline) {\r\n        this.drawLine('underline', tx, ty, textWidth);\r\n      }\r\n      if (strikethrough) {\r\n        this.drawLine('strike', tx, ty, textWidth);\r\n      }\r\n      dwAngle.revert();\r\n      crop.close();\r\n    } else {\r\n      dwAngle.rotate();\r\n      dw.fillText(text, tx, ty);\r\n      if (underline || strikethrough) {\r\n        dw.beginPath();\r\n      }\r\n      if (underline) {\r\n        this.drawLine('underline', tx, ty, textWidth);\r\n      }\r\n      if (strikethrough) {\r\n        this.drawLine('strike', tx, ty, textWidth);\r\n      }\r\n      dwAngle.revert();\r\n    }\r\n    return contentWidth;\r\n  }\r\n\r\n  drawTextWarp() {\r\n    const {\r\n      text, dw, attr, rect,\r\n    } = this;\r\n    const {\r\n      underline, strikethrough, align, verticalAlign, size,\r\n    } = attr;\r\n    let { angle } = attr;\r\n    if (angle > 90) {\r\n      angle = 90;\r\n    }\r\n    if (angle < -90) {\r\n      angle = -90;\r\n    }\r\n    const { width, height } = rect;\r\n    if (angle > 0) {\r\n      const trigonometric = new TrigonometricFunction({\r\n        angle,\r\n      });\r\n\r\n      // 计算斜角文本的最大绘制宽度\r\n      // 超过绘制宽度自动换行\r\n      trigonometric.setHeight(height - PADDING * 2);\r\n      const textHypotenuseWidth = trigonometric.sinHeightAngle();\r\n\r\n      // 计算文本块之间的间隙\r\n      trigonometric.setHeight(size + ANGLE_LINE_HEIGHT);\r\n      const lineHeight = trigonometric.sinHeightAngle();\r\n\r\n      // 折行文本计算\r\n      const textArray = [];\r\n      const textLine = {\r\n        len: 0,\r\n        start: 0,\r\n      };\r\n      const len = text.length;\r\n      let i = 0;\r\n      while (i < len) {\r\n        const charWidth = this.textWidth(text.charAt(i)) / dpr();\r\n        const textWidth = textLine.len + charWidth;\r\n        if (textWidth > textHypotenuseWidth) {\r\n          if (textLine.len === 0) {\r\n            textArray.push({\r\n              text: text.substring(i, i + 1),\r\n              len: textWidth,\r\n              tx: 0,\r\n              ty: 0,\r\n            });\r\n            i += 1;\r\n          } else {\r\n            textArray.push({\r\n              text: text.substring(textLine.start, i),\r\n              len: textLine.len,\r\n              tx: 0,\r\n              ty: 0,\r\n            });\r\n          }\r\n          textLine.len = 0;\r\n          textLine.start = i;\r\n        } else {\r\n          textLine.len = textWidth;\r\n          i += 1;\r\n        }\r\n      }\r\n      if (textLine.len > 0) {\r\n        textArray.push({\r\n          text: text.substring(textLine.start),\r\n          len: textLine.len,\r\n          tx: 0,\r\n          ty: 0,\r\n        });\r\n      }\r\n      const textArrayLen = textArray.length;\r\n\r\n      // 每个文本块的x坐标\r\n      // 加上指定的间隙\r\n      let wOffset = 0;\r\n      for (let i = 0; i < textArrayLen; i += 1) {\r\n        const item = textArray[i];\r\n        item.tx = wOffset;\r\n        wOffset += lineHeight;\r\n      }\r\n\r\n      // 多行文本和单行文本\r\n      // 采用不同的绘制\r\n      // 逻辑\r\n      if (textArrayLen > 1) {\r\n        // 计算每个文本块的\r\n        // 宽度和高度\r\n        trigonometric.setWidth(textHypotenuseWidth);\r\n        const textWidth = Math.max(trigonometric.cosWidthAngle(), size);\r\n        const textHeight = trigonometric.sinWidthAngle();\r\n        // console.log('textHeight>>>', textHeight);\r\n\r\n        // 计算总宽度\r\n        const totalWidth = textWidth + ((textArray.length - 1) * lineHeight);\r\n        // console.log(totalWidth);\r\n        let bx = rect.x;\r\n        let by = rect.y;\r\n        switch (align) {\r\n          case ALIGN.left:\r\n            bx += PADDING;\r\n            break;\r\n          case ALIGN.center:\r\n            bx += width / 2 - totalWidth / 2;\r\n            break;\r\n          case ALIGN.right:\r\n            bx += width - totalWidth - PADDING;\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        switch (verticalAlign) {\r\n          case VERTICAL_ALIGN.top:\r\n            by += PADDING;\r\n            break;\r\n          case VERTICAL_ALIGN.center:\r\n            by += height / 2 - textHeight / 2;\r\n            break;\r\n          case VERTICAL_ALIGN.bottom:\r\n            by += height - textHeight - PADDING;\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        let contentWidth;\r\n        switch (align) {\r\n          case ALIGN.right:\r\n          case ALIGN.left:\r\n            contentWidth = totalWidth + PADDING * 2;\r\n            break;\r\n          case ALIGN.center:\r\n          default:\r\n            contentWidth = totalWidth;\r\n        }\r\n\r\n        // 渲染文本\r\n        for (let i = 0; i < textArray.length; i += 1) {\r\n          // 计算文本的\r\n          // 绘制位置\r\n          // 旋转中心\r\n          const item = textArray[i];\r\n          const rx = item.tx + bx;\r\n          const ry = item.ty + by;\r\n          let ax = 0;\r\n          let ay = 0;\r\n          switch (align) {\r\n            case ALIGN.left: {\r\n              trigonometric.setWidth(item.len / 2);\r\n              const tw = Math.max(trigonometric.cosWidthAngle(), size);\r\n              const th = trigonometric.sinWidthAngle();\r\n              ax += rx + tw;\r\n              ay += ry + textHeight - th;\r\n              break;\r\n            }\r\n            case ALIGN.center: {\r\n              ax = rx + textWidth / 2;\r\n              ay = ry + textHeight / 2;\r\n              break;\r\n            }\r\n            case ALIGN.right: {\r\n              trigonometric.setWidth(item.len / 2);\r\n              const tw = Math.max(trigonometric.cosWidthAngle(), size);\r\n              const th = trigonometric.sinWidthAngle();\r\n              ax += rx + textWidth - tw;\r\n              ay += ry + th;\r\n              break;\r\n            }\r\n            default:\r\n              break;\r\n          }\r\n          const tx = ax - item.len / 2;\r\n          const ty = ay - size / 2;\r\n\r\n          // 旋转并且\r\n          // 绘制文本\r\n          if (i === -1) {\r\n            dw.attr({ fillStyle: '#000000' });\r\n            dw.fillRect(rx, ry, textWidth, textHeight);\r\n            dw.attr({ fillStyle: 'red' });\r\n          }\r\n          const dwAngle = new DrawAngle({\r\n            dw,\r\n            angle,\r\n            rect: new Rect({\r\n              x: tx,\r\n              y: ty,\r\n              width: item.len,\r\n              height: size,\r\n            }),\r\n          });\r\n          dwAngle.rotate();\r\n          dw.fillText(item.text, tx, ty);\r\n          if (underline || strikethrough) {\r\n            dw.beginPath();\r\n          }\r\n          if (underline) {\r\n            this.drawLine('underline', tx, ty, item.len);\r\n          }\r\n          if (strikethrough) {\r\n            this.drawLine('strike', tx, ty, item.len);\r\n          }\r\n          dwAngle.revert();\r\n        }\r\n        return contentWidth;\r\n      }\r\n\r\n      // 计算文本块的\r\n      // 大小\r\n      const textWidth = this.textWidth(text) / dpr();\r\n      trigonometric.setWidth(textWidth);\r\n      const trigonometricWidth = Math.max(trigonometric.cosWidthAngle(), size);\r\n      const trigonometricHeight = trigonometric.sinWidthAngle();\r\n\r\n      // 计算文本\r\n      // 绘制位置\r\n      // 旋转中心\r\n      let rtx = rect.x;\r\n      let rty = rect.y;\r\n      switch (align) {\r\n        case ALIGN.left:\r\n          rtx += PADDING;\r\n          break;\r\n        case ALIGN.center:\r\n          rtx += width / 2 - trigonometricWidth / 2;\r\n          break;\r\n        case ALIGN.right:\r\n          rtx += width - trigonometricWidth - PADDING;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      switch (verticalAlign) {\r\n        case VERTICAL_ALIGN.top:\r\n          rty += PADDING;\r\n          break;\r\n        case VERTICAL_ALIGN.center:\r\n          rty += height / 2 - trigonometricHeight / 2;\r\n          break;\r\n        case VERTICAL_ALIGN.bottom:\r\n          rty += height - trigonometricHeight - PADDING;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      let contentWidth;\r\n      switch (align) {\r\n        case ALIGN.right:\r\n        case ALIGN.left:\r\n          contentWidth = trigonometricWidth + PADDING * 2;\r\n          break;\r\n        case ALIGN.center:\r\n        default:\r\n          contentWidth = trigonometricWidth;\r\n      }\r\n\r\n      // 旋转并且\r\n      // 绘制文本\r\n      const dwAngle = new DrawAngle({\r\n        dw,\r\n        angle,\r\n        rect: new Rect({\r\n          x: rtx,\r\n          y: rty,\r\n          width: trigonometricWidth,\r\n          height: trigonometricHeight,\r\n        }),\r\n      });\r\n      dwAngle.rotate();\r\n      const tx = rtx + (trigonometricWidth / 2 - textWidth / 2);\r\n      const ty = rty + (trigonometricHeight / 2 - size / 2);\r\n      dw.fillText(text, tx, ty);\r\n      if (underline || strikethrough) {\r\n        dw.beginPath();\r\n      }\r\n      if (underline) {\r\n        this.drawLine('underline', tx, ty, textWidth);\r\n      }\r\n      if (strikethrough) {\r\n        this.drawLine('strike', tx, ty, textWidth);\r\n      }\r\n      dwAngle.revert();\r\n      return contentWidth;\r\n    }\r\n    if (angle < 0) {\r\n      const trigonometric = new TrigonometricFunction({\r\n        angle,\r\n      });\r\n\r\n      // 计算斜角文本的最大绘制宽度\r\n      // 超过绘制宽度自动换行\r\n      trigonometric.setHeight(height - PADDING * 2);\r\n      const textHypotenuseWidth = trigonometric.sinHeightAngle();\r\n\r\n      // 计算文本块之间的间隙\r\n      trigonometric.setHeight(size + ANGLE_LINE_HEIGHT);\r\n      const lineHeight = trigonometric.sinHeightAngle();\r\n\r\n      // 折行文本计算\r\n      const textArray = [];\r\n      const textLine = {\r\n        len: 0,\r\n        start: 0,\r\n      };\r\n      const len = text.length;\r\n      let i = 0;\r\n      while (i < len) {\r\n        const charWidth = this.textWidth(text.charAt(i)) / dpr();\r\n        const textWidth = textLine.len + charWidth;\r\n        if (textWidth > textHypotenuseWidth) {\r\n          if (textLine.len === 0) {\r\n            textArray.push({\r\n              text: text.substring(i, i + 1),\r\n              len: textWidth,\r\n              tx: 0,\r\n              ty: 0,\r\n            });\r\n            i += 1;\r\n          } else {\r\n            textArray.push({\r\n              text: text.substring(textLine.start, i),\r\n              len: textLine.len,\r\n              tx: 0,\r\n              ty: 0,\r\n            });\r\n          }\r\n          textLine.len = 0;\r\n          textLine.start = i;\r\n        } else {\r\n          textLine.len = textWidth;\r\n          i += 1;\r\n        }\r\n      }\r\n      if (textLine.len > 0) {\r\n        textArray.push({\r\n          text: text.substring(textLine.start),\r\n          len: textLine.len,\r\n          tx: 0,\r\n          ty: 0,\r\n        });\r\n      }\r\n      const textArrayLen = textArray.length;\r\n\r\n      // 每个文本块的x坐标\r\n      // 加上指定的间隙\r\n      let wOffset = 0;\r\n      for (let i = textArrayLen - 1; i >= 0; i -= 1) {\r\n        const item = textArray[i];\r\n        item.tx = wOffset;\r\n        wOffset += lineHeight;\r\n      }\r\n\r\n      // 多行文本和单行文本\r\n      // 采用不同的绘制\r\n      // 逻辑\r\n      if (textArrayLen > 1) {\r\n\r\n        // 计算每个文本块的\r\n        // 宽度和高度\r\n        trigonometric.setWidth(textHypotenuseWidth);\r\n        const textWidth = Math.max(trigonometric.cosWidthAngle(), size);\r\n        const textHeight = trigonometric.sinWidthAngle();\r\n\r\n        // 文本总宽度\r\n        const totalWidth = textWidth + ((textArray.length - 1) * lineHeight);\r\n        let bx = rect.x;\r\n        let by = rect.y;\r\n        switch (align) {\r\n          case ALIGN.left:\r\n            bx += PADDING;\r\n            break;\r\n          case ALIGN.center:\r\n            bx += width / 2 - totalWidth / 2;\r\n            break;\r\n          case ALIGN.right:\r\n            bx += width - totalWidth - PADDING;\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        switch (verticalAlign) {\r\n          case VERTICAL_ALIGN.top:\r\n            by += PADDING;\r\n            break;\r\n          case VERTICAL_ALIGN.center:\r\n            by += height / 2 - textHeight / 2;\r\n            break;\r\n          case VERTICAL_ALIGN.bottom:\r\n            by += height - textHeight - PADDING;\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        let contentWidth;\r\n        switch (align) {\r\n          case ALIGN.right:\r\n          case ALIGN.left:\r\n            contentWidth = totalWidth + PADDING * 2;\r\n            break;\r\n          case ALIGN.center:\r\n          default:\r\n            contentWidth = totalWidth;\r\n        }\r\n\r\n        // 渲染文本\r\n        for (let i = 0; i < textArray.length; i += 1) {\r\n          // 计算文本的\r\n          // 绘制位置\r\n          // 旋转中心\r\n          const item = textArray[i];\r\n          const rx = item.tx + bx;\r\n          const ry = item.ty + by;\r\n          let ax = 0;\r\n          let ay = 0;\r\n          switch (align) {\r\n            case ALIGN.left: {\r\n              trigonometric.setWidth(item.len / 2);\r\n              const tw = Math.max(trigonometric.cosWidthAngle(), size);\r\n              const th = trigonometric.sinWidthAngle();\r\n              ax += rx + tw;\r\n              ay += ry + th;\r\n              break;\r\n            }\r\n            case ALIGN.center: {\r\n              ax = rx + textWidth / 2;\r\n              ay = ry + textHeight / 2;\r\n              break;\r\n            }\r\n            case ALIGN.right: {\r\n              trigonometric.setWidth(item.len / 2);\r\n              const tw = Math.max(trigonometric.cosWidthAngle(), size);\r\n              const th = trigonometric.sinWidthAngle();\r\n              ax += rx + textWidth - tw;\r\n              ay += ry + textHeight - th;\r\n              break;\r\n            }\r\n            default:\r\n              break;\r\n          }\r\n          const tx = ax - item.len / 2;\r\n          const ty = ay - size / 2;\r\n          if (i === -1) {\r\n            dw.attr({ fillStyle: '#000000' });\r\n            dw.fillRect(rx, ry, textWidth, textHeight);\r\n            dw.attr({ fillStyle: 'red' });\r\n          }\r\n\r\n          // 旋转并且\r\n          // 绘制文本\r\n          const dwAngle = new DrawAngle({\r\n            dw,\r\n            angle,\r\n            rect: new Rect({\r\n              x: tx,\r\n              y: ty,\r\n              width: item.len,\r\n              height: size,\r\n            }),\r\n          });\r\n          dwAngle.rotate();\r\n          dw.fillText(item.text, tx, ty);\r\n          if (underline || strikethrough) {\r\n            dw.beginPath();\r\n          }\r\n          if (underline) {\r\n            this.drawLine('underline', tx, ty, item.len);\r\n          }\r\n          if (strikethrough) {\r\n            this.drawLine('strike', tx, ty, item.len);\r\n          }\r\n          dwAngle.revert();\r\n        }\r\n        return contentWidth;\r\n      }\r\n\r\n      // 计算文本块的\r\n      // 大小\r\n      const textWidth = this.textWidth(text) / dpr();\r\n      trigonometric.setWidth(textWidth);\r\n      const trigonometricWidth = Math.max(trigonometric.cosWidthAngle(), size);\r\n      const trigonometricHeight = trigonometric.sinWidthAngle();\r\n\r\n      // 计算文本\r\n      // 绘制位置\r\n      // 旋转中心\r\n      let rtx = rect.x;\r\n      let rty = rect.y;\r\n      switch (align) {\r\n        case ALIGN.left:\r\n          rtx += PADDING;\r\n          break;\r\n        case ALIGN.center:\r\n          rtx += width / 2 - trigonometricWidth / 2;\r\n          break;\r\n        case ALIGN.right:\r\n          rtx += width - trigonometricWidth - PADDING;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      switch (verticalAlign) {\r\n        case VERTICAL_ALIGN.top:\r\n          rty += PADDING;\r\n          break;\r\n        case VERTICAL_ALIGN.center:\r\n          rty += height / 2 - trigonometricHeight / 2;\r\n          break;\r\n        case VERTICAL_ALIGN.bottom:\r\n          rty += height - trigonometricHeight - PADDING;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      let contentWidth;\r\n      switch (align) {\r\n        case ALIGN.right:\r\n        case ALIGN.left:\r\n          contentWidth = trigonometricWidth + PADDING * 2;\r\n          break;\r\n        case ALIGN.center:\r\n        default:\r\n          contentWidth = trigonometricWidth;\r\n      }\r\n\r\n      // 旋转并且\r\n      // 绘制文本\r\n      const dwAngle = new DrawAngle({\r\n        dw,\r\n        angle,\r\n        rect: new Rect({\r\n          x: rtx,\r\n          y: rty,\r\n          width: trigonometricWidth,\r\n          height: trigonometricHeight,\r\n        }),\r\n      });\r\n      dwAngle.rotate();\r\n      const tx = rtx + (trigonometricWidth / 2 - textWidth / 2);\r\n      const ty = rty + (trigonometricHeight / 2 - size / 2);\r\n      dw.fillText(text, tx, ty);\r\n      if (underline || strikethrough) {\r\n        dw.beginPath();\r\n      }\r\n      if (underline) {\r\n        this.drawLine('underline', tx, ty, textWidth);\r\n      }\r\n      if (strikethrough) {\r\n        this.drawLine('strike', tx, ty, textWidth);\r\n      }\r\n      dwAngle.revert();\r\n      return contentWidth;\r\n    }\r\n    if (angle === 0) {\r\n      const maxTextWidth = width - PADDING * 2;\r\n      const textArray = [];\r\n      const textLine = {\r\n        len: 0,\r\n        start: 0,\r\n      };\r\n      const len = text.length;\r\n\r\n      // 折行\r\n      let i = 0;\r\n      let maxLen = 0;\r\n      while (i < len) {\r\n        const charWidth = this.textWidth(text.charAt(i)) / dpr();\r\n        const textWidth = textLine.len + charWidth;\r\n        if (textWidth > maxTextWidth) {\r\n          if (textLine.len === 0) {\r\n            textArray.push({\r\n              text: text.substring(i, i + 1),\r\n              len: textWidth,\r\n              tx: 0,\r\n              ty: 0,\r\n            });\r\n            i += 1;\r\n            if (textWidth > maxLen) {\r\n              maxLen = textWidth;\r\n            }\r\n          } else {\r\n            textArray.push({\r\n              text: text.substring(textLine.start, i),\r\n              len: textLine.len,\r\n              tx: 0,\r\n              ty: 0,\r\n            });\r\n            if (textLine.len > maxLen) {\r\n              maxLen = textLine.len;\r\n            }\r\n          }\r\n          textLine.len = 0;\r\n          textLine.start = i;\r\n        } else {\r\n          textLine.len = textWidth;\r\n          i += 1;\r\n        }\r\n      }\r\n      if (textLine.len > 0) {\r\n        textArray.push({\r\n          text: text.substring(textLine.start),\r\n          len: textLine.len,\r\n          tx: 0,\r\n          ty: 0,\r\n        });\r\n        if (textLine.len > maxLen) {\r\n          maxLen = textLine.len;\r\n        }\r\n      }\r\n      const textArrayLen = textArray.length;\r\n\r\n      // 位置计算\r\n      let hOffset = 0;\r\n      for (let i = 0; i < textArrayLen; i += 1) {\r\n        const item = textArray[i];\r\n        item.ty = hOffset;\r\n        hOffset += size + HORIZONTAL_LIEN_HEIGHT;\r\n      }\r\n      const totalTextHeight = textArrayLen * (size + HORIZONTAL_LIEN_HEIGHT);\r\n\r\n      let contentWidth;\r\n      switch (align) {\r\n        case ALIGN.right:\r\n        case ALIGN.left:\r\n          contentWidth = maxLen + PADDING * 2;\r\n          break;\r\n        case ALIGN.center:\r\n        default:\r\n          contentWidth = maxLen;\r\n      }\r\n      // 裁剪 绘制\r\n      const crop = new Crop({\r\n        draw: dw,\r\n        rect,\r\n      });\r\n      crop.open();\r\n      for (let i = 0; i < textArrayLen; i += 1) {\r\n        const item = textArray[i];\r\n        let tx = rect.x;\r\n        let ty = rect.y;\r\n        switch (align) {\r\n          case ALIGN.left:\r\n            tx += PADDING;\r\n            break;\r\n          case ALIGN.center:\r\n            tx += width / 2 - item.len / 2;\r\n            break;\r\n          case ALIGN.right:\r\n            tx += width - item.len - PADDING;\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        switch (verticalAlign) {\r\n          case VERTICAL_ALIGN.top:\r\n            ty += item.ty + PADDING;\r\n            break;\r\n          case VERTICAL_ALIGN.center:\r\n            ty += item.ty + (height / 2 - totalTextHeight / 2);\r\n            break;\r\n          case VERTICAL_ALIGN.bottom:\r\n            ty += item.ty + (height - totalTextHeight - PADDING);\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        dw.fillText(item.text, tx, ty);\r\n        if (underline || strikethrough) {\r\n          dw.beginPath();\r\n        }\r\n        if (underline) {\r\n          this.drawLine('underline', tx, ty, item.len);\r\n        }\r\n        if (strikethrough) {\r\n          this.drawLine('strike', tx, ty, item.len);\r\n        }\r\n      }\r\n      crop.close();\r\n      return contentWidth;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  draw() {\r\n    const { dw, attr } = this;\r\n    const { textWrap } = attr;\r\n    dw.attr({\r\n      textAlign: ALIGN.left,\r\n      textBaseline: VERTICAL_ALIGN.top,\r\n      font: `${attr.italic ? 'italic' : ''} ${attr.bold ? 'bold' : ''} ${npx(attr.size)}px ${attr.name}`,\r\n      fillStyle: attr.color,\r\n      strokeStyle: attr.color,\r\n    });\r\n    switch (textWrap) {\r\n      case TEXT_WRAP.TRUNCATE:\r\n        return this.drawTextTruncate();\r\n      case TEXT_WRAP.WORD_WRAP:\r\n        return this.drawTextWarp();\r\n      case TEXT_WRAP.OVER_FLOW:\r\n      default:\r\n        return this.drawTextOverFlow();\r\n    }\r\n  }\r\n\r\n  setOverflowCrop(overflowCrop) {\r\n    this.overflowCrop = overflowCrop;\r\n  }\r\n}\r\n\r\n/**\r\n * Base font\r\n */\r\nclass Font {\r\n  constructor({\r\n    text, rect, dw, overflow, attr,\r\n  }) {\r\n    this.attr = Utils.mergeDeep({}, {\r\n      name: 'Arial',\r\n      size: npx(13),\r\n      color: '#000000',\r\n      bold: false,\r\n      italic: false,\r\n      textWrap: false,\r\n      underline: false,\r\n      strikethrough: false,\r\n      align: ALIGN.left,\r\n      verticalAlign: VERTICAL_ALIGN.center,\r\n      direction: TEXT_DIRECTION.HORIZONTAL,\r\n      angle: 0,\r\n    }, attr);\r\n    this.verticalFontDraw = new VerticalFontDraw({\r\n      text,\r\n      rect,\r\n      dw,\r\n      overflow,\r\n      attr: this.attr,\r\n    });\r\n    this.horizontalFontDraw = new HorizontalFontDraw({\r\n      text,\r\n      rect,\r\n      dw,\r\n      overflow,\r\n      attr: this.attr,\r\n    });\r\n    this.angleFontDraw = new AngleFontDraw({\r\n      text,\r\n      rect,\r\n      dw,\r\n      overflow,\r\n      attr: this.attr,\r\n    });\r\n  }\r\n\r\n  draw() {\r\n    const { attr } = this;\r\n    switch (attr.direction) {\r\n      case TEXT_DIRECTION.VERTICAL:\r\n        return this.verticalFontDraw.draw();\r\n      case TEXT_DIRECTION.ANGLE:\r\n        return this.angleFontDraw.draw();\r\n      case TEXT_DIRECTION.HORIZONTAL:\r\n      default:\r\n        return this.horizontalFontDraw.draw();\r\n    }\r\n  }\r\n\r\n  setTextWrap(textWrap) {\r\n    const { attr } = this;\r\n    switch (attr.direction) {\r\n      case TEXT_DIRECTION.VERTICAL:\r\n        this.verticalFontDraw.setTextWrap(textWrap);\r\n        break;\r\n      case TEXT_DIRECTION.HORIZONTAL:\r\n      default:\r\n        this.horizontalFontDraw.setTextWrap(textWrap);\r\n    }\r\n  }\r\n\r\n  setOverflowCrop(overflowCrop) {\r\n    this.verticalFontDraw.setOverflowCrop(overflowCrop);\r\n    this.horizontalFontDraw.setOverflowCrop(overflowCrop);\r\n    this.angleFontDraw.setOverflowCrop(overflowCrop);\r\n  }\r\n}\r\n\r\nexport {\r\n  VERTICAL_ALIGN,\r\n  ALIGN, TEXT_WRAP,\r\n  TEXT_DIRECTION,\r\n  PADDING,\r\n};\r\n\r\nexport { Font };\r\n","import { ELContextMenu } from '../../../../../component/elcontextmenu/ELContextMenu';\r\nimport { cssPrefix } from '../../../../../config';\r\nimport { Utils } from '../../../../../utils/Utils';\r\nimport { h } from '../../../../../lib/Element';\r\nimport { HorizontalIcon1 } from '../icon/horizontal/HorizontalIcon1';\r\nimport { HorizontalIcon2 } from '../icon/horizontal/HorizontalIcon2';\r\nimport { HorizontalIcon3 } from '../icon/horizontal/HorizontalIcon3';\r\nimport { HorizontalContextMenuItem } from './HorizontalContextMenuItem';\r\nimport { EventBind } from '../../../../../utils/EventBind';\r\nimport { Constant } from '../../../../../utils/Constant';\r\nimport { ALIGN } from '../../../../../canvas/Font';\r\n\r\nclass HorizontalContextMenu extends ELContextMenu {\r\n  constructor(options = {}) {\r\n    super(`${cssPrefix}-horizontal-type-context-menu`, Utils.mergeDeep({\r\n      onUpdate: () => {},\r\n    }, options));\r\n    this.horizontalIcon1 = new HorizontalIcon1();\r\n    this.horizontalIcon2 = new HorizontalIcon2();\r\n    this.horizontalIcon3 = new HorizontalIcon3();\r\n    const div2 = h('div', `${cssPrefix}-horizontal-type-context-menu-type-icon-line`);\r\n    div2.children(this.horizontalIcon1);\r\n    div2.children(this.horizontalIcon2);\r\n    div2.children(this.horizontalIcon3);\r\n    this.horizontalIcons = new HorizontalContextMenuItem();\r\n    this.horizontalIcons.removeClass('hover');\r\n    this.horizontalIcons.children(div2);\r\n    this.addItem(this.horizontalIcons);\r\n    // 添加事件\r\n    EventBind.bind(this.horizontalIcon1, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      this.options.onUpdate(ALIGN.left);\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n    EventBind.bind(this.horizontalIcon2, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      this.options.onUpdate(ALIGN.center);\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n    EventBind.bind(this.horizontalIcon3, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      this.options.onUpdate(ALIGN.right);\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n  }\r\n}\r\n\r\nexport { HorizontalContextMenu };\r\n","import { DropDownItem } from './base/DropDownItem';\r\nimport { cssPrefix } from '../../../config';\r\nimport { Icon } from './Icon';\r\nimport { HorizontalContextMenu } from './contextmenu/horizontal/HorizontalContextMenu';\r\nimport { Utils } from '../../../utils/Utils';\r\nimport { EL_POPUP_POSITION } from '../../../component/elpopup/ElPopUp';\r\n\r\nclass HorizontalAlign extends DropDownItem {\r\n  constructor(options = {}) {\r\n    super(`${cssPrefix}-tools-horizontal-align`);\r\n    this.options = Utils.mergeDeep({ contextMenu: {} }, options);\r\n    this.icon = new Icon('align-left');\r\n    this.setIcon(this.icon);\r\n    this.horizontalContextMenu = new HorizontalContextMenu(Utils.copyProp({\r\n      el: this,\r\n      position: EL_POPUP_POSITION.BOTTOM,\r\n    }, this.options.contextMenu));\r\n  }\r\n}\r\nexport { HorizontalAlign };\r\n","import { ELContextMenuItem } from '../../../../../component/elcontextmenu/ELContextMenuItem';\r\nimport { cssPrefix } from '../../../../../config';\r\n\r\nclass VerticalContextMenuItem extends ELContextMenuItem {\r\n  constructor() {\r\n    super(`${cssPrefix}-vertical-type-context-menu-item`);\r\n  }\r\n}\r\n\r\nexport { VerticalContextMenuItem };\r\n","import { Item } from '../../../base/Item';\r\nimport { cssPrefix } from '../../../../../../config';\r\nimport { Icon } from '../../../Icon';\r\n\r\nclass VerticalIcon1 extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-verticalIcon1`);\r\n    this.icon = new Icon('align-top');\r\n    this.children(this.icon);\r\n  }\r\n}\r\n\r\nexport { VerticalIcon1 };\r\n","import { Item } from '../../../base/Item';\r\nimport { cssPrefix } from '../../../../../../config';\r\nimport { Icon } from '../../../Icon';\r\n\r\nclass VerticalIcon2 extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-verticalIcon2`);\r\n    this.icon = new Icon('align-middle');\r\n    this.children(this.icon);\r\n  }\r\n}\r\n\r\nexport { VerticalIcon2 };\r\n","import { Item } from '../../../base/Item';\r\nimport { cssPrefix } from '../../../../../../config';\r\nimport { Icon } from '../../../Icon';\r\n\r\nclass VerticalIcon3 extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-verticalIcon3`);\r\n    this.icon = new Icon('align-bottom');\r\n    this.children(this.icon);\r\n  }\r\n}\r\n\r\nexport { VerticalIcon3 };\r\n","import { ELContextMenu } from '../../../../../component/elcontextmenu/ELContextMenu';\r\nimport { cssPrefix } from '../../../../../config';\r\nimport { Utils } from '../../../../../utils/Utils';\r\nimport { h } from '../../../../../lib/Element';\r\nimport { VerticalContextMenuItem } from './VerticalContextMenuItem';\r\nimport { VerticalIcon1 } from '../icon/vertical/VerticalIcon1';\r\nimport { VerticalIcon2 } from '../icon/vertical/VerticalIcon2';\r\nimport { VerticalIcon3 } from '../icon/vertical/VerticalIcon3';\r\nimport { EventBind } from '../../../../../utils/EventBind';\r\nimport { Constant } from '../../../../../utils/Constant';\r\nimport { VERTICAL_ALIGN } from '../../../../../canvas/Font';\r\n\r\nclass VerticalContextMenu extends ELContextMenu {\r\n  constructor(options = {}) {\r\n    super(`${cssPrefix}-vertical-type-context-menu`, Utils.mergeDeep({\r\n      onUpdate: () => {},\r\n    }, options));\r\n    this.verticalIcon1 = new VerticalIcon1();\r\n    this.verticalIcon2 = new VerticalIcon2();\r\n    this.verticalIcon3 = new VerticalIcon3();\r\n    const div2 = h('div', `${cssPrefix}-vertical-type-context-menu-type-icon-line`);\r\n    div2.children(this.verticalIcon1);\r\n    div2.children(this.verticalIcon2);\r\n    div2.children(this.verticalIcon3);\r\n    this.verticalIcons = new VerticalContextMenuItem();\r\n    this.verticalIcons.removeClass('hover');\r\n    this.verticalIcons.children(div2);\r\n    this.addItem(this.verticalIcons);\r\n    // 添加事件\r\n    EventBind.bind(this.verticalIcon1, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      this.options.onUpdate(VERTICAL_ALIGN.top);\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n    EventBind.bind(this.verticalIcon2, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      this.options.onUpdate(VERTICAL_ALIGN.center);\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n    EventBind.bind(this.verticalIcon3, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      this.options.onUpdate(VERTICAL_ALIGN.bottom);\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n  }\r\n}\r\n\r\nexport { VerticalContextMenu };\r\n","import { DropDownItem } from './base/DropDownItem';\r\nimport { cssPrefix } from '../../../config';\r\nimport { Icon } from './Icon';\r\nimport { Utils } from '../../../utils/Utils';\r\nimport { EL_POPUP_POSITION } from '../../../component/elpopup/ElPopUp';\r\nimport { VerticalContextMenu } from './contextmenu/vertical/VerticalContextMenu';\r\n\r\nclass VerticalAlign extends DropDownItem {\r\n  constructor(options = {}) {\r\n    super(`${cssPrefix}-tools-vertical-align`);\r\n    this.options = Utils.mergeDeep({ contextMenu: {} }, options);\r\n    this.icon = new Icon('align-middle');\r\n    this.setIcon(this.icon);\r\n    this.verticalContextMenu = new VerticalContextMenu(Utils.copyProp({\r\n      el: this,\r\n      position: EL_POPUP_POSITION.BOTTOM,\r\n    }, this.options.contextMenu));\r\n  }\r\n}\r\n\r\nexport { VerticalAlign };\r\n","import { cssPrefix } from '../../../../../../config';\r\nimport { Icon } from '../../../Icon';\r\nimport { Item } from '../../../base/Item';\r\n\r\nclass TextWrappingIcon1 extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-text-wrapping1`);\r\n    this.icon = new Icon('truncate');\r\n    this.children(this.icon);\r\n  }\r\n}\r\n\r\nexport { TextWrappingIcon1 };\r\n","import { Item } from '../../../base/Item';\r\nimport { cssPrefix } from '../../../../../../config';\r\nimport { Icon } from '../../../Icon';\r\n\r\nclass TextWrappingIcon2 extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-text-wrapping2`);\r\n    this.icon = new Icon('overflow');\r\n    this.children(this.icon);\r\n  }\r\n}\r\n\r\nexport { TextWrappingIcon2 };\r\n","import { cssPrefix } from '../../../../../../config';\r\nimport { Icon } from '../../../Icon';\r\nimport { Item } from '../../../base/Item';\r\n\r\nclass TextWrappingIcon3 extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-text-wrapping3`);\r\n    this.icon = new Icon('wrap');\r\n    this.children(this.icon);\r\n  }\r\n}\r\n\r\nexport { TextWrappingIcon3 };\r\n","import { ELContextMenuItem } from '../../../../../component/elcontextmenu/ELContextMenuItem';\r\nimport { cssPrefix } from '../../../../../config';\r\n\r\nclass TextWrappingContextMenuItem extends ELContextMenuItem {\r\n  constructor() {\r\n    super(`${cssPrefix}-text-wrapping-context-menu-item`);\r\n  }\r\n}\r\n\r\nexport { TextWrappingContextMenuItem };\r\n","import { ELContextMenu } from '../../../../../component/elcontextmenu/ELContextMenu';\r\nimport { cssPrefix } from '../../../../../config';\r\nimport { Utils } from '../../../../../utils/Utils';\r\nimport { TextWrappingIcon1 } from '../icon/textwrapping/TextWrappingIcon1';\r\nimport { TextWrappingIcon2 } from '../icon/textwrapping/TextWrappingIcon2';\r\nimport { TextWrappingIcon3 } from '../icon/textwrapping/TextWrappingIcon3';\r\nimport { h } from '../../../../../lib/Element';\r\nimport { TextWrappingContextMenuItem } from './TextWrappingContextMenuItem';\r\nimport { EventBind } from '../../../../../utils/EventBind';\r\nimport { Constant } from '../../../../../utils/Constant';\r\nimport { TEXT_WRAP } from '../../../../../canvas/Font';\r\n\r\nclass TextWrappingContextMenu extends ELContextMenu {\r\n  constructor(options = {}) {\r\n    super(`${cssPrefix}-text-wrapping-context-menu`, Utils.mergeDeep({\r\n      onUpdate: () => {},\r\n    }, options));\r\n    this.textWrappingIcon1 = new TextWrappingIcon1();\r\n    this.textWrappingIcon2 = new TextWrappingIcon2();\r\n    this.textWrappingIcon3 = new TextWrappingIcon3();\r\n    const div2 = h('div', `${cssPrefix}-text-wrapping-context-menu-type-icon-line`);\r\n    div2.children(this.textWrappingIcon1);\r\n    div2.children(this.textWrappingIcon2);\r\n    div2.children(this.textWrappingIcon3);\r\n    this.textWrappingIcons = new TextWrappingContextMenuItem();\r\n    this.textWrappingIcons.removeClass('hover');\r\n    this.textWrappingIcons.children(div2);\r\n    this.addItem(this.textWrappingIcons);\r\n    // 添加事件\r\n    EventBind.bind(this.textWrappingIcon1, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      this.options.onUpdate(TEXT_WRAP.TRUNCATE);\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n    EventBind.bind(this.textWrappingIcon2, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      this.options.onUpdate(TEXT_WRAP.OVER_FLOW);\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n    EventBind.bind(this.textWrappingIcon3, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      this.options.onUpdate(TEXT_WRAP.WORD_WRAP);\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n  }\r\n}\r\n\r\nexport { TextWrappingContextMenu };\r\n","import { cssPrefix } from '../../../config';\r\nimport { Icon } from './Icon';\r\nimport { Utils } from '../../../utils/Utils';\r\nimport { EL_POPUP_POSITION } from '../../../component/elpopup/ElPopUp';\r\nimport { DropDownItem } from './base/DropDownItem';\r\nimport { TextWrappingContextMenu } from './contextmenu/textwrapping/TextWrappingContextMenu';\r\n\r\nclass TextWrapping extends DropDownItem {\r\n  constructor(options = {}) {\r\n    super(`${cssPrefix}-tools-text-wrapping`);\r\n    this.options = Utils.mergeDeep({ contextMenu: {} }, options);\r\n    this.icon = new Icon('text-wrap');\r\n    this.setIcon(this.icon);\r\n    this.textWrappingContextMenu = new TextWrappingContextMenu(Utils.copyProp({\r\n      el: this,\r\n      position: EL_POPUP_POSITION.BOTTOM,\r\n    }, this.options.contextMenu));\r\n  }\r\n}\r\n\r\nexport { TextWrapping };\r\n","import { cssPrefix } from '../../../config';\r\nimport { Icon } from './Icon';\r\nimport { Item } from './base/Item';\r\n\r\nclass Fixed extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-fixed`);\r\n    this.icon = new Icon('freeze');\r\n    this.children(this.icon);\r\n  }\r\n}\r\n\r\nexport { Fixed };\r\n","import { cssPrefix } from '../../../config';\r\nimport { Icon } from './Icon';\r\nimport { Item } from './base/Item';\r\n\r\nclass Filter extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-filter`);\r\n    this.icon = new Icon('filter');\r\n    this.children(this.icon);\r\n  }\r\n}\r\n\r\nexport { Filter };\r\n","import { DropDownItem } from './base/DropDownItem';\r\nimport { cssPrefix } from '../../../config';\r\nimport { Icon } from './Icon';\r\n\r\nclass Functions extends DropDownItem {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-format`);\r\n    this.icon = new Icon('functions');\r\n    this.setIcon(this.icon);\r\n  }\r\n}\r\nexport { Functions };\r\n","import { Widget } from '../../../lib/Widget';\r\nimport { Utils } from '../../../utils/Utils';\r\nimport { cssPrefix } from '../../../config';\r\nimport { h } from '../../../lib/Element';\r\n\r\nconst svg = `\r\n  <svg class=\"${cssPrefix}-copy-style-svg\" xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"100%\">\r\n    <line class=\"${cssPrefix}-copy-style-stroked-top\" x1=\"0\" y1=\"0\" x2=\"100%\" y2=\"0\"/>\r\n    <line class=\"${cssPrefix}-copy-style-stroked-left\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"100%\"/>\r\n    <line class=\"${cssPrefix}-copy-style-stroked-bottom\" x1=\"0\" y1=\"100%\" x2=\"100%\" y2=\"100%\"/>\r\n    <line class=\"${cssPrefix}-copy-style-stroked-right\" x1=\"100%\" y1=\"0\" x2=\"100%\" y2=\"100%\"/>\r\n  </svg>\r\n`;\r\n\r\nclass CopyStyle extends Widget {\r\n  constructor(options) {\r\n    super(`${cssPrefix}-copy-style`);\r\n    this.options = Utils.mergeDeep({}, options);\r\n    this.mask = h('div', `${cssPrefix}-copy-style-mask`);\r\n    this.html(svg);\r\n    this.children(this.mask);\r\n    this.top = this.find(`.${cssPrefix}-copy-style-stroked-top`);\r\n    this.left = this.find(`.${cssPrefix}-copy-style-stroked-left`);\r\n    this.bottom = this.find(`.${cssPrefix}-copy-style-stroked-bottom`);\r\n    this.right = this.find(`.${cssPrefix}-copy-style-stroked-right`);\r\n    this.hide();\r\n  }\r\n}\r\n\r\nexport { CopyStyle };\r\n","class ScreenWidget {\r\n  constructor(screen) {\r\n    this.screen = screen;\r\n    this.lt = null;\r\n    this.t = null;\r\n    this.l = null;\r\n    this.br = null;\r\n  }\r\n\r\n  getLT() {\r\n    return this.lt;\r\n  }\r\n\r\n  getT() {\r\n    return this.t;\r\n  }\r\n\r\n  getL() {\r\n    return this.l;\r\n  }\r\n\r\n  getBR() {\r\n    return this.br;\r\n  }\r\n}\r\n\r\nexport { ScreenWidget };\r\n","import { Utils } from '../../utils/Utils';\r\n\r\nclass RectRange {\r\n\r\n  /**\r\n   * RectRange\r\n   * @param {int} sri 起始行\r\n   * @param {int} sci 起始列\r\n   * @param {int} eri 结束行\r\n   * @param {int} eci 结束列\r\n   * @param {int} w 宽度\r\n   * @param {int} h 高度\r\n   */\r\n  constructor(sri, sci, eri, eci, w = 0, h = 0) {\r\n    this.sri = sri;\r\n    this.sci = sci;\r\n    this.eri = eri;\r\n    this.eci = eci;\r\n    this.w = w;\r\n    this.h = h;\r\n  }\r\n\r\n  /**\r\n   * 设置区域\r\n   * @param {int} sri 起始行\r\n   * @param {int} sci 起始列\r\n   * @param {int} eri 结束行\r\n   * @param {int} eci 结束列\r\n   */\r\n  set(sri, sci, eri, eci) {\r\n    this.sri = sri;\r\n    this.sci = sci;\r\n    this.eri = eri;\r\n    this.eci = eci;\r\n  }\r\n\r\n  /**\r\n   * 判断是否跨多个单元格\r\n   * @returns {boolean}\r\n   */\r\n  multiple() {\r\n    return this.eri - this.sri > 0 || this.eci - this.sci > 0;\r\n  }\r\n\r\n  /**\r\n   * 判断当前的区域是否包含指定的行和列\r\n   * 参数支持 ri, ci 和 A10 两种形式\r\n   * @param {[int, int] | String} args 行索引,列索引 或者 字符串\r\n   * @returns {boolean}\r\n   */\r\n  includes(...args) {\r\n    let [ri, ci] = [0, 0];\r\n    if (args.length === 1) {\r\n      [ci, ri] = Utils.expr2xy(args[0]);\r\n    } else if (args.length === 2) {\r\n      [ri, ci] = args;\r\n    }\r\n    const {\r\n      sri, sci, eri, eci,\r\n    } = this;\r\n    return sri <= ri && ri <= eri && sci <= ci && ci <= eci;\r\n  }\r\n\r\n  /**\r\n   * 循环过滤指定的行列\r\n   * @param {Function} cb 回调函数\r\n   * @param {Function} rowFilter 过滤使用的回调函数\r\n   */\r\n  each(cb, rowFilter = () => true) {\r\n    const {\r\n      sri, sci, eri, eci,\r\n    } = this;\r\n    for (let i = sri; i <= eri; i += 1) {\r\n      if (rowFilter(i)) {\r\n        for (let j = sci; j <= eci; j += 1) {\r\n          cb(i, j);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 判断当前的区域是否包含指定的区域\r\n   * @param {RectRange} other 区域\r\n   * @returns {boolean}\r\n   */\r\n  contains(other) {\r\n    return this.sri <= other.sri\r\n      && this.sci <= other.sci\r\n      && this.eri >= other.eri\r\n      && this.eci >= other.eci;\r\n  }\r\n\r\n  /**\r\n   * 判断当前的区域是否被指定的区域包含\r\n   * @param {RectRange} other 区域\r\n   * @returns {boolean}\r\n   */\r\n  within(other) {\r\n    return this.sri >= other.sri\r\n      && this.sci >= other.sci\r\n      && this.eri <= other.eri\r\n      && this.eci <= other.eci;\r\n  }\r\n\r\n  /**\r\n   * 判断当前的区域和指定的区域不发生重合\r\n   * @param {RectRange} other 区域\r\n   * @returns {boolean}\r\n   */\r\n  disjoint(other) {\r\n    return this.sri > other.eri\r\n      || this.sci > other.eci\r\n      || other.sri > this.eri\r\n      || other.sci > this.eci;\r\n  }\r\n\r\n  /**\r\n   * 判断当前的区域和指定的区域发生重合\r\n   * @param {RectRange} other 区域\r\n   * @returns {boolean}\r\n   */\r\n  intersects(other) {\r\n    return this.sri <= other.eri\r\n      && this.sci <= other.eci\r\n      && other.sri <= this.eri\r\n      && other.sci <= this.eci;\r\n  }\r\n\r\n  /**\r\n   * 返回当前区域和指定区域合并后的新区域\r\n   * @param {RectRange} other 区域\r\n   * @returns {RectRange}\r\n   */\r\n  union(other) {\r\n    const {\r\n      sri, sci, eri, eci,\r\n    } = this;\r\n    return new RectRange(\r\n      other.sri < sri ? other.sri : sri,\r\n      other.sci < sci ? other.sci : sci,\r\n      other.eri > eri ? other.eri : eri,\r\n      other.eci > eci ? other.eci : eci,\r\n    );\r\n  }\r\n\r\n  /**\r\n   * 返回当前区域和指定区域合重合的新区域\r\n   * @param {RectRange} other\r\n   * @returns {RectRange}\r\n   */\r\n  coincide(other) {\r\n    const {\r\n      sri, sci, eri, eci,\r\n    } = this;\r\n    if (this.disjoint(other)) {\r\n      return new RectRange(-1, -1, -1, -1);\r\n    }\r\n    return new RectRange(\r\n      other.sri > sri ? other.sri : sri,\r\n      other.sci > sci ? other.sci : sci,\r\n      other.eri < eri ? other.eri : eri,\r\n      other.eci < eci ? other.eci : eci,\r\n    );\r\n  }\r\n\r\n  /**\r\n   * 返回当前区域和指定区域不重合的部分\r\n   * @param {RectRange} other 区域\r\n   * @returns {Array}\r\n   */\r\n  difference(other) {\r\n    const ret = [];\r\n    const addRet = (sri, sci, eri, eci) => {\r\n      ret.push(new RectRange(sri, sci, eri, eci));\r\n    };\r\n    const {\r\n      sri, sci, eri, eci,\r\n    } = this;\r\n    const dsr = other.sri - sri;\r\n    const dsc = other.sci - sci;\r\n    const der = eri - other.eri;\r\n    const dec = eci - other.eci;\r\n    if (dsr > 0) {\r\n      addRet(sri, sci, other.sri - 1, eci);\r\n      if (der > 0) {\r\n        addRet(other.eri + 1, sci, eri, eci);\r\n        if (dsc > 0) {\r\n          addRet(other.sri, sci, other.eri, other.sci - 1);\r\n        }\r\n        if (dec > 0) {\r\n          addRet(other.sri, other.eci + 1, other.eri, eci);\r\n        }\r\n      } else {\r\n        if (dsc > 0) {\r\n          addRet(other.sri, sci, eri, other.sci - 1);\r\n        }\r\n        if (dec > 0) {\r\n          addRet(other.sri, other.eci + 1, eri, eci);\r\n        }\r\n      }\r\n    } else if (der > 0) {\r\n      addRet(other.eri + 1, sci, eri, eci);\r\n      if (dsc > 0) {\r\n        addRet(sri, sci, other.eri, other.sci - 1);\r\n      }\r\n      if (dec > 0) {\r\n        addRet(sri, other.eci + 1, other.eri, eci);\r\n      }\r\n    }\r\n    if (dsc > 0) {\r\n      addRet(sri, sci, eri, other.sci - 1);\r\n      if (dec > 0) {\r\n        addRet(sri, other.eri + 1, eri, eci);\r\n        if (dsr > 0) {\r\n          addRet(sri, other.sci, other.sri - 1, other.eci);\r\n        }\r\n        if (der > 0) {\r\n          addRet(other.sri + 1, other.sci, eri, other.eci);\r\n        }\r\n      } else {\r\n        if (dsr > 0) {\r\n          addRet(sri, other.sci, other.sri - 1, eci);\r\n        }\r\n        if (der > 0) {\r\n          addRet(other.sri + 1, other.sci, eri, eci);\r\n        }\r\n      }\r\n    } else if (dec > 0) {\r\n      addRet(eri, other.eci + 1, eri, eci);\r\n      if (dsr > 0) {\r\n        addRet(sri, sci, other.sri - 1, other.eci);\r\n      }\r\n      if (der > 0) {\r\n        addRet(other.eri + 1, sci, eri, other.eci);\r\n      }\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  /**\r\n   * 当前区域跨的行列数\r\n   * @returns {number[]}\r\n   */\r\n  size() {\r\n    return [\r\n      this.eri - this.sri + 1,\r\n      this.eci - this.sci + 1,\r\n    ];\r\n  }\r\n\r\n  brink() {\r\n    const { sri, eri, sci, eci } = this;\r\n    const top = new RectRange(sri, sci, sri, eci);\r\n    const bottom = new RectRange(eri, sci, eri, eci);\r\n    const right = new RectRange(sri, eci, eri, eci);\r\n    const left = new RectRange(sri, sci, eri, sci);\r\n    return { top, right, bottom, left };\r\n  }\r\n\r\n  toString() {\r\n    const {\r\n      sri, sci, eri, eci,\r\n    } = this;\r\n    let ref = Utils.xy2expr(sci, sri);\r\n    if (this.multiple()) {\r\n      ref = `${ref}:${Utils.xy2expr(eci, eri)}`;\r\n    }\r\n    return ref;\r\n  }\r\n\r\n  clone() {\r\n    const {\r\n      sri, sci, eri, eci, w, h,\r\n    } = this;\r\n    return new RectRange(sri, sci, eri, eci, w, h);\r\n  }\r\n\r\n  /**\r\n   * equals\r\n   * @param {RectRange} other 区域\r\n   * @returns {boolean}\r\n   */\r\n  equals(other) {\r\n    return this.eri === other.eri\r\n      && this.eci === other.eci\r\n      && this.sri === other.sri\r\n      && this.sci === other.sci;\r\n  }\r\n\r\n  /**\r\n   * 将 B1:B8 或者 B1 参数转换成新的区域\r\n   * @param {String} ref 行列字符串\r\n   * @returns {RectRange}\r\n   */\r\n  static valueOf(ref) {\r\n    const refs = ref.split(':');\r\n    const [sci, sri] = Utils.expr2xy(refs[0]);\r\n    let [eri, eci] = [sri, sci];\r\n    if (refs.length > 1) {\r\n      [eci, eri] = Utils.expr2xy(refs[1]);\r\n    }\r\n    return new RectRange(sri, sci, eri, eci);\r\n  }\r\n}\r\n\r\nexport { RectRange };\r\n","\r\nimport { Utils } from '../../../utils/Utils';\r\nimport { CopyStyle } from './CopyStyle';\r\nimport { ScreenWidget } from '../screen/ScreenWidget';\r\nimport { RectRange } from '../RectRange';\r\nimport { EventBind } from '../../../utils/EventBind';\r\nimport { Constant } from '../../../utils/Constant';\r\nimport { Rect } from '../../../canvas/Rect';\r\n\r\nclass ScreenCopyStyle extends ScreenWidget {\r\n  constructor(screen, options = {}) {\r\n    super(screen);\r\n    this.options = Utils.mergeDeep({}, options);\r\n    this.lt = new CopyStyle();\r\n    this.t = new CopyStyle();\r\n    this.l = new CopyStyle();\r\n    this.br = new CopyStyle();\r\n    this.selectorAttr = null;\r\n    this.bind();\r\n  }\r\n\r\n  setLTOffset(selectorAttr) {\r\n    const { screen } = this;\r\n    const { table } = screen;\r\n    const {\r\n      frozenLeftTop, cols, rows, grid,\r\n    } = table;\r\n    const viewRange = frozenLeftTop.getScrollViewRange();\r\n    const { rect } = selectorAttr;\r\n\r\n    const empty = new RectRange(-1, -1, -1, -1);\r\n    const coincideRange = rect.coincide(viewRange);\r\n    if (empty.equals(coincideRange)) {\r\n      this.lt.hide();\r\n      return;\r\n    }\r\n\r\n    const width = cols.sectionSumWidth(coincideRange.sci, coincideRange.eci);\r\n    const height = rows.sectionSumHeight(coincideRange.sri, coincideRange.eri);\r\n    const top = rows.sectionSumHeight(viewRange.sri, coincideRange.sri - 1);\r\n    const left = cols.sectionSumWidth(viewRange.sci, coincideRange.sci - 1);\r\n\r\n    if (rect.eci > viewRange.eci) {\r\n      this.lt.right.hide();\r\n      this.lt.mask.css('border-right', 'none');\r\n    } else {\r\n      this.lt.right.show();\r\n      this.lt.mask.cssRemoveKeys('border-right');\r\n    }\r\n    if (rect.eri > viewRange.eri) {\r\n      this.lt.bottom.hide();\r\n      this.lt.mask.css('border-bottom', 'none');\r\n    } else {\r\n      this.lt.bottom.show();\r\n      this.lt.mask.cssRemoveKeys('border-bottom');\r\n    }\r\n\r\n    const size = new Rect({\r\n      x: left, y: top, width, height,\r\n    });\r\n    size.expandSize(grid.lineWidth());\r\n    this.lt.offset({\r\n      width: size.width,\r\n      height: size.height,\r\n      left: size.x,\r\n      top: size.y,\r\n    }).show();\r\n  }\r\n\r\n  setTOffset(selectorAttr) {\r\n    const { screen } = this;\r\n    const { table } = screen;\r\n    const {\r\n      fixedTop, cols, rows, grid,\r\n    } = table;\r\n    const viewRange = fixedTop.getScrollViewRange();\r\n    const { rect } = selectorAttr;\r\n\r\n    const empty = new RectRange(-1, -1, -1, -1);\r\n    const coincideRange = rect.coincide(viewRange);\r\n    if (empty.equals(coincideRange)) {\r\n      this.t.hide();\r\n      return;\r\n    }\r\n\r\n    const width = cols.sectionSumWidth(coincideRange.sci, coincideRange.eci);\r\n    const height = rows.sectionSumHeight(coincideRange.sri, coincideRange.eri);\r\n    const top = rows.sectionSumHeight(viewRange.sri, coincideRange.sri - 1);\r\n    const left = cols.sectionSumWidth(viewRange.sci, coincideRange.sci - 1);\r\n\r\n    if (rect.sci < viewRange.sci) {\r\n      this.t.left.hide();\r\n      this.t.mask.css('border-left', 'none');\r\n    } else {\r\n      this.t.left.show();\r\n      this.t.mask.cssRemoveKeys('border-left');\r\n    }\r\n    if (rect.eri > viewRange.eri) {\r\n      this.t.bottom.hide();\r\n      this.t.mask.css('border-bottom', 'none');\r\n    } else {\r\n      this.t.bottom.show();\r\n      this.t.mask.cssRemoveKeys('border-bottom');\r\n    }\r\n    if (rect.eci > viewRange.eci) {\r\n      this.t.right.hide();\r\n      this.t.mask.css('border-right', 'none');\r\n    } else {\r\n      this.t.right.show();\r\n      this.t.mask.cssRemoveKeys('border-right');\r\n    }\r\n\r\n    const size = new Rect({\r\n      x: left, y: top, width, height,\r\n    });\r\n    size.expandSize(grid.lineWidth());\r\n    this.t.offset({\r\n      width: size.width,\r\n      height: size.height,\r\n      left: size.x,\r\n      top: size.y,\r\n    }).show();\r\n  }\r\n\r\n  setLOffset(selectorAttr) {\r\n    const { screen } = this;\r\n    const { table } = screen;\r\n    const {\r\n      fixedLeft, cols, rows, grid,\r\n    } = table;\r\n    const viewRange = fixedLeft.getScrollViewRange();\r\n    const { rect } = selectorAttr;\r\n\r\n    const empty = new RectRange(-1, -1, -1, -1);\r\n    const coincideRange = rect.coincide(viewRange);\r\n    if (empty.equals(coincideRange)) {\r\n      this.l.hide();\r\n      return;\r\n    }\r\n\r\n    const width = cols.sectionSumWidth(coincideRange.sci, coincideRange.eci);\r\n    const height = rows.sectionSumHeight(coincideRange.sri, coincideRange.eri);\r\n    const top = rows.sectionSumHeight(viewRange.sri, coincideRange.sri - 1);\r\n    const left = cols.sectionSumWidth(viewRange.sci, coincideRange.sci - 1);\r\n\r\n    if (rect.sri < viewRange.sri) {\r\n      this.l.top.hide();\r\n      this.l.mask.css('border-top', 'none');\r\n    } else {\r\n      this.l.top.show();\r\n      this.l.mask.cssRemoveKeys('border-top');\r\n    }\r\n    if (rect.eci > viewRange.eci) {\r\n      this.l.right.hide();\r\n      this.l.mask.css('border-right', 'none');\r\n    } else {\r\n      this.l.right.show();\r\n      this.l.mask.cssRemoveKeys('border-right');\r\n    }\r\n    if (rect.eri > viewRange.eri) {\r\n      this.l.bottom.hide();\r\n      this.l.mask.css('border-bottom', 'none');\r\n    } else {\r\n      this.l.bottom.show();\r\n      this.l.mask.cssRemoveKeys('border-bottom');\r\n    }\r\n\r\n    const size = new Rect({\r\n      x: left, y: top, width, height,\r\n    });\r\n    size.expandSize(grid.lineWidth());\r\n    this.l.offset({\r\n      width: size.width,\r\n      height: size.height,\r\n      left: size.x,\r\n      top: size.y,\r\n    }).show();\r\n  }\r\n\r\n  setBROffset(selectorAttr) {\r\n    const { screen } = this;\r\n    const { table } = screen;\r\n    const {\r\n      cols, rows, grid,\r\n    } = table;\r\n    const viewRange = table.getScrollViewRange();\r\n    const { rect } = selectorAttr;\r\n\r\n    const empty = new RectRange(-1, -1, -1, -1);\r\n    const coincideRange = rect.coincide(viewRange);\r\n    if (empty.equals(coincideRange)) {\r\n      this.br.hide();\r\n      return;\r\n    }\r\n\r\n    const width = cols.sectionSumWidth(coincideRange.sci, coincideRange.eci);\r\n    const height = rows.sectionSumHeight(coincideRange.sri, coincideRange.eri);\r\n    const top = rows.sectionSumHeight(viewRange.sri, coincideRange.sri - 1);\r\n    const left = cols.sectionSumWidth(viewRange.sci, coincideRange.sci - 1);\r\n\r\n    if (rect.sci < viewRange.sci) {\r\n      this.br.left.hide();\r\n      this.br.mask.css('border-left', 'none');\r\n    } else {\r\n      this.br.left.show();\r\n      this.br.mask.cssRemoveKeys('border-left');\r\n    }\r\n    if (rect.sri < viewRange.sri) {\r\n      this.br.top.hide();\r\n      this.br.mask.css('border-top', 'none');\r\n    } else {\r\n      this.br.top.show();\r\n      this.br.mask.cssRemoveKeys('border-top');\r\n    }\r\n    if (rect.eri > viewRange.eri) {\r\n      this.br.bottom.hide();\r\n      this.br.mask.css('border-bottom', 'none');\r\n    } else {\r\n      this.br.bottom.show();\r\n      this.br.mask.cssRemoveKeys('border-bottom');\r\n    }\r\n    if (rect.eci > viewRange.eci) {\r\n      this.br.right.hide();\r\n      this.br.mask.css('border-right', 'none');\r\n    } else {\r\n      this.br.right.show();\r\n      this.br.mask.cssRemoveKeys('border-right');\r\n    }\r\n\r\n    const size = new Rect({\r\n      x: left, y: top, width, height,\r\n    });\r\n    size.expandSize(grid.lineWidth());\r\n    this.br.offset({\r\n      width: size.width,\r\n      height: size.height,\r\n      left: size.x,\r\n      top: size.y,\r\n    }).show();\r\n  }\r\n\r\n  setOffset(selectorAttr) {\r\n    this.setLTOffset(selectorAttr);\r\n    this.setTOffset(selectorAttr);\r\n    this.setLOffset(selectorAttr);\r\n    this.setBROffset(selectorAttr);\r\n  }\r\n\r\n  bind() {\r\n    const { screen } = this;\r\n    const { table } = screen;\r\n    EventBind.bind(table, Constant.SYSTEM_EVENT_TYPE.SCROLL, () => {\r\n      if (this.selectorAttr) {\r\n        this.setOffset(this.selectorAttr);\r\n      }\r\n    });\r\n    EventBind.bind(table, Constant.TABLE_EVENT_TYPE.CHANGE_HEIGHT, (e) => {\r\n      if (this.selectorAttr) {\r\n        this.setOffset(this.selectorAttr);\r\n      }\r\n      e.stopPropagation();\r\n    });\r\n    EventBind.bind(table, Constant.TABLE_EVENT_TYPE.CHANGE_WIDTH, (e) => {\r\n      if (this.selectorAttr) {\r\n        this.setOffset(this.selectorAttr);\r\n      }\r\n      e.stopPropagation();\r\n    });\r\n  }\r\n\r\n  setShow(selectorAttr) {\r\n    this.selectorAttr = selectorAttr;\r\n    this.setOffset(selectorAttr);\r\n  }\r\n\r\n  setHide() {\r\n    this.selectorAttr = null;\r\n    this.lt.hide();\r\n    this.t.hide();\r\n    this.l.hide();\r\n    this.br.hide();\r\n  }\r\n}\r\n\r\nexport { ScreenCopyStyle };\r\n","import { Widget } from '../../../lib/Widget';\r\nimport { cssPrefix } from '../../../config';\r\nimport { h } from '../../../lib/Element';\r\n\r\nclass Selector extends Widget {\r\n  constructor() {\r\n    super(`${cssPrefix}-selector`);\r\n    this.cornerEl = h('div', `${cssPrefix}-selector-corner`);\r\n    this.areaEl = h('div', `${cssPrefix}-selector-area`);\r\n    this.transfromData = h('div', `${cssPrefix}-selector-transform-data`);\r\n    this.areaEl.children(this.cornerEl);\r\n    this.children(this.transfromData);\r\n    this.children(this.areaEl);\r\n    this.hide();\r\n  }\r\n}\r\n\r\nexport { Selector };\r\n","/* global document */\r\n\r\nimport { Selector } from './Selector';\r\nimport { EventBind } from '../../../utils/EventBind';\r\nimport { Constant } from '../../../utils/Constant';\r\nimport { ScreenWidget } from '../screen/ScreenWidget';\r\nimport { RectRange } from '../RectRange';\r\nimport { Rect } from '../../../canvas/Rect';\r\n\r\nclass ScreenSelector extends ScreenWidget {\r\n  constructor(screen, options = {}) {\r\n    super(screen);\r\n    this.options = options;\r\n    this.selectorAttr = null;\r\n    this.downSelectorAttr = null;\r\n    this.onChangeStack = [];\r\n    this.onSelectChangeStack = [];\r\n    this.onSelectChangeOver = [];\r\n    this.onDownSelectStack = [];\r\n    this.lt = new Selector();\r\n    this.t = new Selector();\r\n    this.l = new Selector();\r\n    this.br = new Selector();\r\n    this.bind();\r\n  }\r\n\r\n  bind() {\r\n    const { screen } = this;\r\n    const { table } = screen;\r\n    const { mousePointType, keyboardManage, cols, rows, edit, merges } = table;\r\n    EventBind.bind(table, Constant.SYSTEM_EVENT_TYPE.SCROLL, () => {\r\n      if (this.selectorAttr) {\r\n        this.setOffset(this.selectorAttr);\r\n      }\r\n    });\r\n    EventBind.bind(table, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e1) => {\r\n      if (e1.button !== 0) return;\r\n      const { x, y } = table.computeEventXy(e1);\r\n      const downSelectAttr = this.getDownXYSelectorAttr(x, y);\r\n      // console.log('downSelectAttr >>>', downSelectAttr);\r\n      this.setSelectAttr(downSelectAttr);\r\n      this.setDownSelectAttr(downSelectAttr);\r\n      this.setOffset(downSelectAttr);\r\n      this.onDownSelectStack.forEach(cb => cb());\r\n      this.onChangeStack.forEach(cb => cb());\r\n      this.onSelectChangeStack.forEach(cb => cb());\r\n      const { edgeType } = downSelectAttr;\r\n      switch (edgeType) {\r\n        case 'left-top':\r\n          mousePointType.on(['table-cell']);\r\n          break;\r\n        case 'left':\r\n          mousePointType.on(['table-ri']);\r\n          break;\r\n        case 'top':\r\n          mousePointType.on(['table-ci']);\r\n          break;\r\n        default:\r\n          mousePointType.on(['table-cell']);\r\n          break;\r\n      }\r\n      EventBind.mouseMoveUp(document, (e2) => {\r\n        const { x, y } = table.computeEventXy(e2);\r\n        const moveSelectorAttr = this.getMoveXySelectorAttr(downSelectAttr, x, y);\r\n        this.setSelectAttr(moveSelectorAttr);\r\n        this.setOffset(moveSelectorAttr);\r\n        this.onChangeStack.forEach(cb => cb());\r\n        this.onSelectChangeStack.forEach(cb => cb());\r\n        e2.stopPropagation();\r\n        e2.preventDefault();\r\n      }, () => {\r\n        mousePointType.off();\r\n        this.onSelectChangeOver.forEach(cb => cb());\r\n      });\r\n    });\r\n    EventBind.bind(table, Constant.TABLE_EVENT_TYPE.CHANGE_HEIGHT, (e) => {\r\n      if (this.selectorAttr) {\r\n        this.setOffset(this.selectorAttr);\r\n        this.onChangeStack.forEach(cb => cb());\r\n      }\r\n      e.stopPropagation();\r\n    });\r\n    EventBind.bind(table, Constant.TABLE_EVENT_TYPE.CHANGE_WIDTH, (e) => {\r\n      if (this.selectorAttr) {\r\n        this.setOffset(this.selectorAttr);\r\n        this.onChangeStack.forEach(cb => cb());\r\n      }\r\n      e.stopPropagation();\r\n    });\r\n    let tabId = 0;\r\n    let tabNext = null;\r\n    keyboardManage.register({\r\n      el: table,\r\n      code: 9,\r\n      callback: () => {\r\n        edit.hideEdit();\r\n        const id = this.selectorAttr;\r\n        const rect = this.selectorAttr.rect.clone();\r\n        if (tabId !== id) {\r\n          const { sri, sci } = rect;\r\n          tabId = id;\r\n          tabNext = { sri, sci };\r\n        }\r\n        const cLen = cols.len - 1;\r\n        const rLen = rows.len - 1;\r\n        let { sri, sci } = tabNext;\r\n        const srcMerges = merges.getFirstIncludes(sri, sci);\r\n        if (srcMerges) {\r\n          sci = srcMerges.eci;\r\n        }\r\n        if (sci >= cLen && sri >= rLen) {\r\n          return;\r\n        }\r\n        if (sci >= cLen) {\r\n          sri += 1;\r\n          sci = 0;\r\n        } else {\r\n          sci += 1;\r\n        }\r\n        tabNext.sri = sri;\r\n        tabNext.sci = sci;\r\n        let eri = sri;\r\n        let eci = sci;\r\n        const targetMerges = merges.getFirstIncludes(sri, sci);\r\n        if (targetMerges) {\r\n          sri = targetMerges.sri;\r\n          sci = targetMerges.sci;\r\n          eri = targetMerges.eri;\r\n          eci = targetMerges.eci;\r\n        }\r\n        rect.sri = sri;\r\n        rect.sci = sci;\r\n        rect.eri = eri;\r\n        rect.eci = eci;\r\n        this.selectorAttr.rect = rect;\r\n        this.setOffset(this.selectorAttr);\r\n        this.onChangeStack.forEach(cb => cb());\r\n        this.onSelectChangeStack.forEach(cb => cb());\r\n        edit.showEdit();\r\n      },\r\n    });\r\n  }\r\n\r\n  setLTOffset(selectorAttr) {\r\n    const { screen } = this;\r\n    const { table } = screen;\r\n    const {\r\n      frozenLeftTop, cols, rows, grid,\r\n    } = table;\r\n    const viewRange = frozenLeftTop.getScrollViewRange();\r\n    const { rect } = selectorAttr;\r\n\r\n    const empty = new RectRange(-1, -1, -1, -1);\r\n    const coincideRange = rect.coincide(viewRange);\r\n    if (empty.equals(coincideRange)) {\r\n      this.lt.hide();\r\n      return;\r\n    }\r\n\r\n    const width = cols.sectionSumWidth(coincideRange.sci, coincideRange.eci);\r\n    const height = rows.sectionSumHeight(coincideRange.sri, coincideRange.eri);\r\n    const top = rows.sectionSumHeight(viewRange.sri, coincideRange.sri - 1);\r\n    const left = cols.sectionSumWidth(viewRange.sci, coincideRange.sci - 1);\r\n\r\n    if (rect.eci > viewRange.eci) {\r\n      this.lt.areaEl.css('border-right', 'none');\r\n    } else {\r\n      this.lt.areaEl.cssRemoveKeys('border-right');\r\n    }\r\n    if (rect.eri > viewRange.eri) {\r\n      this.lt.areaEl.css('border-bottom', 'none');\r\n    } else {\r\n      this.lt.areaEl.cssRemoveKeys('border-bottom');\r\n    }\r\n\r\n    const size = new Rect({\r\n      x: left, y: top, width, height,\r\n    });\r\n    size.expandSize(grid.lineWidth());\r\n    this.lt.offset({\r\n      width: size.width,\r\n      height: size.height,\r\n      left: size.x,\r\n      top: size.y,\r\n    }).show();\r\n  }\r\n\r\n  setTOffset(selectorAttr) {\r\n    const { screen } = this;\r\n    const { table } = screen;\r\n    const {\r\n      fixedTop, cols, rows, grid,\r\n    } = table;\r\n    const viewRange = fixedTop.getScrollViewRange();\r\n    const { rect } = selectorAttr;\r\n\r\n    const empty = new RectRange(-1, -1, -1, -1);\r\n    const coincideRange = rect.coincide(viewRange);\r\n    if (empty.equals(coincideRange)) {\r\n      this.t.hide();\r\n      return;\r\n    }\r\n\r\n    const width = cols.sectionSumWidth(coincideRange.sci, coincideRange.eci);\r\n    const height = rows.sectionSumHeight(coincideRange.sri, coincideRange.eri);\r\n    const top = rows.sectionSumHeight(viewRange.sri, coincideRange.sri - 1);\r\n    const left = cols.sectionSumWidth(viewRange.sci, coincideRange.sci - 1);\r\n\r\n    if (rect.sci < viewRange.sci) {\r\n      this.t.areaEl.css('border-left', 'none');\r\n    } else {\r\n      this.t.areaEl.cssRemoveKeys('border-left');\r\n    }\r\n    if (rect.eri > viewRange.eri) {\r\n      this.t.areaEl.css('border-bottom', 'none');\r\n    } else {\r\n      this.t.areaEl.cssRemoveKeys('border-bottom');\r\n    }\r\n    if (rect.eci > viewRange.eci) {\r\n      this.t.areaEl.css('border-right', 'none');\r\n    } else {\r\n      this.t.areaEl.cssRemoveKeys('border-right');\r\n    }\r\n\r\n    const size = new Rect({\r\n      x: left, y: top, width, height,\r\n    });\r\n    size.expandSize(grid.lineWidth());\r\n    this.t.offset({\r\n      width: size.width,\r\n      height: size.height,\r\n      left: size.x,\r\n      top: size.y,\r\n    }).show();\r\n  }\r\n\r\n  setLOffset(selectorAttr) {\r\n    const { screen } = this;\r\n    const { table } = screen;\r\n    const {\r\n      fixedLeft, cols, rows, grid,\r\n    } = table;\r\n    const viewRange = fixedLeft.getScrollViewRange();\r\n    const { rect } = selectorAttr;\r\n\r\n    const empty = new RectRange(-1, -1, -1, -1);\r\n    const coincideRange = rect.coincide(viewRange);\r\n    if (empty.equals(coincideRange)) {\r\n      this.l.hide();\r\n      return;\r\n    }\r\n\r\n    const width = cols.sectionSumWidth(coincideRange.sci, coincideRange.eci);\r\n    const height = rows.sectionSumHeight(coincideRange.sri, coincideRange.eri);\r\n    const top = rows.sectionSumHeight(viewRange.sri, coincideRange.sri - 1);\r\n    const left = cols.sectionSumWidth(viewRange.sci, coincideRange.sci - 1);\r\n\r\n    if (rect.sri < viewRange.sri) {\r\n      this.l.areaEl.css('border-top', 'none');\r\n    } else {\r\n      this.l.areaEl.cssRemoveKeys('border-top');\r\n    }\r\n    if (rect.eci > viewRange.eci) {\r\n      this.l.areaEl.css('border-right', 'none');\r\n    } else {\r\n      this.l.areaEl.cssRemoveKeys('border-right');\r\n    }\r\n    if (rect.eri > viewRange.eri) {\r\n      this.l.areaEl.css('border-bottom', 'none');\r\n    } else {\r\n      this.l.areaEl.cssRemoveKeys('border-bottom');\r\n    }\r\n\r\n    const size = new Rect({\r\n      x: left, y: top, width, height,\r\n    });\r\n    size.expandSize(grid.lineWidth());\r\n    this.l.offset({\r\n      width: size.width,\r\n      height: size.height,\r\n      left: size.x,\r\n      top: size.y,\r\n    }).show();\r\n  }\r\n\r\n  setBROffset(selectorAttr) {\r\n    const { screen } = this;\r\n    const { table } = screen;\r\n    const {\r\n      cols, rows, grid,\r\n    } = table;\r\n    const viewRange = table.getScrollViewRange();\r\n    const { rect } = selectorAttr;\r\n\r\n    const empty = new RectRange(-1, -1, -1, -1);\r\n    const coincideRange = rect.coincide(viewRange);\r\n    if (empty.equals(coincideRange)) {\r\n      this.br.hide();\r\n      return;\r\n    }\r\n\r\n    const width = cols.sectionSumWidth(coincideRange.sci, coincideRange.eci);\r\n    const height = rows.sectionSumHeight(coincideRange.sri, coincideRange.eri);\r\n    const top = rows.sectionSumHeight(viewRange.sri, coincideRange.sri - 1);\r\n    const left = cols.sectionSumWidth(viewRange.sci, coincideRange.sci - 1);\r\n\r\n    if (rect.sci < viewRange.sci) {\r\n      this.br.areaEl.css('border-left', 'none');\r\n    } else {\r\n      this.br.areaEl.cssRemoveKeys('border-left');\r\n    }\r\n    if (rect.sri < viewRange.sri) {\r\n      this.br.areaEl.css('border-top', 'none');\r\n    } else {\r\n      this.br.areaEl.cssRemoveKeys('border-top');\r\n    }\r\n    if (rect.eri > viewRange.eri) {\r\n      this.br.areaEl.css('border-bottom', 'none');\r\n    } else {\r\n      this.br.areaEl.cssRemoveKeys('border-bottom');\r\n    }\r\n    if (rect.eci > viewRange.eci) {\r\n      this.br.areaEl.css('border-right', 'none');\r\n    } else {\r\n      this.br.areaEl.cssRemoveKeys('border-right');\r\n    }\r\n\r\n    const size = new Rect({\r\n      x: left, y: top, width, height,\r\n    });\r\n    size.expandSize(grid.lineWidth());\r\n    this.br.offset({\r\n      width: size.width,\r\n      height: size.height,\r\n      left: size.x,\r\n      top: size.y,\r\n    }).show();\r\n  }\r\n\r\n  setLTCorner(selectorAttr, intersectsArea) {\r\n    const { screen } = this;\r\n    const { table } = screen;\r\n    const { frozenLeftTop } = table;\r\n    const viewRange = frozenLeftTop.getScrollViewRange();\r\n    const { rect, edge, edgeType } = selectorAttr;\r\n\r\n    const empty = new RectRange(-1, -1, -1, -1);\r\n    const coincideRange = rect.coincide(viewRange);\r\n    if (empty.equals(coincideRange)) {\r\n      return;\r\n    }\r\n\r\n    this.lt.cornerEl.cssRemoveKeys('left');\r\n    this.lt.cornerEl.cssRemoveKeys('top');\r\n    this.lt.cornerEl.cssRemoveKeys('right');\r\n    this.lt.cornerEl.cssRemoveKeys('bottom');\r\n    this.lt.cornerEl.hide();\r\n\r\n    if (edge) {\r\n      const ltT = intersectsArea === 'ltt';\r\n      const ltL = intersectsArea === 'ltl';\r\n      if (edgeType === 'left' && ltT) {\r\n        this.lt.cornerEl.show();\r\n        this.lt.cornerEl.css('left', '0px');\r\n        this.lt.cornerEl.css('bottom', '0px');\r\n      }\r\n      if (edgeType === 'top' && ltL) {\r\n        this.lt.cornerEl.show();\r\n        this.lt.cornerEl.css('right', '0px');\r\n        this.lt.cornerEl.css('top', '0px');\r\n      }\r\n    } else {\r\n      const lt = intersectsArea === 'lt';\r\n      if (lt) {\r\n        this.lt.cornerEl.show();\r\n        this.lt.cornerEl.css('right', '0px');\r\n        this.lt.cornerEl.css('bottom', '0px');\r\n      }\r\n      if (rect.eci > viewRange.eci) {\r\n        this.lt.cornerEl.hide();\r\n      }\r\n      if (rect.eri > viewRange.eri) {\r\n        this.lt.cornerEl.hide();\r\n      }\r\n    }\r\n  }\r\n\r\n  setTCorner(selectorAttr, intersectsArea) {\r\n    const { screen } = this;\r\n    const { table } = screen;\r\n    const { fixedTop } = table;\r\n    const viewRange = fixedTop.getScrollViewRange();\r\n    const { rect, edge, edgeType } = selectorAttr;\r\n\r\n    const empty = new RectRange(-1, -1, -1, -1);\r\n    const coincideRange = rect.coincide(viewRange);\r\n    if (empty.equals(coincideRange)) {\r\n      return;\r\n    }\r\n\r\n    this.t.cornerEl.cssRemoveKeys('left');\r\n    this.t.cornerEl.cssRemoveKeys('top');\r\n    this.t.cornerEl.cssRemoveKeys('right');\r\n    this.t.cornerEl.cssRemoveKeys('bottom');\r\n    this.t.cornerEl.hide();\r\n\r\n    if (edge) {\r\n      const tBr = intersectsArea === 'tbr';\r\n      const ltTBrL = intersectsArea === 'lttlbr';\r\n      if (edgeType === 'top' && tBr) {\r\n        this.t.cornerEl.show();\r\n        this.t.cornerEl.css('right', '0px');\r\n        this.t.cornerEl.css('top', '0px');\r\n      }\r\n      if (edgeType === 'top' && ltTBrL) {\r\n        this.t.cornerEl.show();\r\n        this.t.cornerEl.css('right', '0px');\r\n        this.t.cornerEl.css('top', '0px');\r\n      }\r\n      if (edgeType === 'top' && rect.eci > viewRange.eci) {\r\n        this.t.cornerEl.hide();\r\n      }\r\n    } else {\r\n      const t = intersectsArea === 't';\r\n      const ltT = intersectsArea === 'ltt';\r\n      if (t || ltT) {\r\n        this.t.cornerEl.show();\r\n        this.t.cornerEl.css('right', '0px');\r\n        this.t.cornerEl.css('bottom', '0px');\r\n      }\r\n      if (rect.eci > viewRange.eci) {\r\n        this.t.cornerEl.hide();\r\n      }\r\n      if (rect.eri > viewRange.eri) {\r\n        this.t.cornerEl.hide();\r\n      }\r\n    }\r\n  }\r\n\r\n  setLCorner(selectorAttr, intersectsArea) {\r\n    const { screen } = this;\r\n    const { table } = screen;\r\n    const { fixedLeft } = table;\r\n    const viewRange = fixedLeft.getScrollViewRange();\r\n    const { rect, edge, edgeType } = selectorAttr;\r\n\r\n    const empty = new RectRange(-1, -1, -1, -1);\r\n    const coincideRange = rect.coincide(viewRange);\r\n    if (empty.equals(coincideRange)) {\r\n      return;\r\n    }\r\n\r\n    this.l.cornerEl.cssRemoveKeys('left');\r\n    this.l.cornerEl.cssRemoveKeys('top');\r\n    this.l.cornerEl.cssRemoveKeys('right');\r\n    this.l.cornerEl.cssRemoveKeys('bottom');\r\n    this.l.cornerEl.hide();\r\n\r\n    if (edge) {\r\n      const lBr = intersectsArea === 'lbr';\r\n      const ltTBrL = intersectsArea === 'lttlbr';\r\n      if (edgeType === 'left' && lBr) {\r\n        this.l.cornerEl.show();\r\n        this.l.cornerEl.css('left', '0');\r\n        this.l.cornerEl.css('bottom', '0');\r\n      }\r\n      if (edgeType === 'left' && ltTBrL) {\r\n        this.l.cornerEl.show();\r\n        this.l.cornerEl.css('left', '0');\r\n        this.l.cornerEl.css('bottom', '0');\r\n      }\r\n      if (edgeType === 'left' && rect.eri > viewRange.eri) {\r\n        this.l.cornerEl.hide();\r\n      }\r\n    } else {\r\n      const l = intersectsArea === 'l';\r\n      const ltL = intersectsArea === 'ltl';\r\n      if (l || ltL) {\r\n        this.l.cornerEl.show();\r\n        this.l.cornerEl.css('right', '0px');\r\n        this.l.cornerEl.css('bottom', '0px');\r\n      }\r\n      if (rect.eci > viewRange.eci) {\r\n        this.l.cornerEl.hide();\r\n      }\r\n      if (rect.eri > viewRange.eri) {\r\n        this.l.cornerEl.hide();\r\n      }\r\n    }\r\n  }\r\n\r\n  setBrCorner(selectorAttr, intersectsArea) {\r\n    const { screen } = this;\r\n    const { table } = screen;\r\n    const viewRange = table.getScrollViewRange();\r\n    const { rect, edge, edgeType } = selectorAttr;\r\n\r\n    const empty = new RectRange(-1, -1, -1, -1);\r\n    const coincideRange = rect.coincide(viewRange);\r\n    if (empty.equals(coincideRange)) {\r\n      return;\r\n    }\r\n\r\n    this.br.cornerEl.cssRemoveKeys('left');\r\n    this.br.cornerEl.cssRemoveKeys('top');\r\n    this.br.cornerEl.cssRemoveKeys('right');\r\n    this.br.cornerEl.cssRemoveKeys('bottom');\r\n    this.br.cornerEl.hide();\r\n\r\n    if (edge) {\r\n      const br = intersectsArea === 'br';\r\n      const ltTLBr = intersectsArea === 'lttlbr';\r\n      if (edgeType === 'left' && br) {\r\n        this.br.cornerEl.show();\r\n        this.br.cornerEl.css('left', '0');\r\n        this.br.cornerEl.css('bottom', '0');\r\n      }\r\n      if (edgeType === 'top' && br) {\r\n        this.br.cornerEl.show();\r\n        this.br.cornerEl.css('right', '0');\r\n        this.br.cornerEl.css('top', '0');\r\n      }\r\n      if (edgeType === 'left-top' && ltTLBr) {\r\n        this.br.cornerEl.show();\r\n        this.br.cornerEl.css('right', '0');\r\n        this.br.cornerEl.css('bottom', '0');\r\n      }\r\n      if (edgeType === 'left-top' && br) {\r\n        this.br.cornerEl.show();\r\n        this.br.cornerEl.css('right', '0');\r\n        this.br.cornerEl.css('bottom', '0');\r\n      }\r\n      if (edgeType === 'left' && rect.eri > viewRange.eri) {\r\n        this.br.cornerEl.hide();\r\n      }\r\n      if (edgeType === 'top' && rect.eci > viewRange.eci) {\r\n        this.br.cornerEl.hide();\r\n      }\r\n    } else {\r\n      const br = intersectsArea === 'br';\r\n      const tBr = intersectsArea === 'tbr';\r\n      const lBr = intersectsArea === 'lbr';\r\n      const ltTLBr = intersectsArea === 'lttlbr';\r\n      if (br || tBr || lBr || lBr || ltTLBr) {\r\n        this.br.cornerEl.show();\r\n        this.br.cornerEl.css('right', '0px');\r\n        this.br.cornerEl.css('bottom', '0px');\r\n      }\r\n      if (rect.eri > viewRange.eri) {\r\n        this.br.cornerEl.hide();\r\n      }\r\n      if (rect.eci > viewRange.eci) {\r\n        this.br.cornerEl.hide();\r\n      }\r\n    }\r\n  }\r\n\r\n  setSelectAttr(selectorAttr) {\r\n    this.selectorAttr = selectorAttr;\r\n    this.selectorAttr.id = Date.now();\r\n  }\r\n\r\n  setDownSelectAttr(downSelectorAttr) {\r\n    this.downSelectorAttr = downSelectorAttr;\r\n  }\r\n\r\n  getIntersectsArea(selectorAttr) {\r\n    const { screen } = this;\r\n    const { table } = screen;\r\n    const { fixed, cols, rows } = table;\r\n    const { rect } = selectorAttr;\r\n    let type = '';\r\n    const tlRange = new RectRange(0, 0, fixed.fxTop, fixed.fxLeft);\r\n    const tRange = new RectRange(0, fixed.fxLeft + 1, fixed.fxTop, cols.len);\r\n    const lRange = new RectRange(fixed.fxTop + 1, 0, rows.len, fixed.fxLeft);\r\n    const brRange = new RectRange(fixed.fxTop + 1, fixed.fxLeft + 1, rows.len, cols.len);\r\n    if (rect.intersects(tlRange)) type += 'lt';\r\n    if (rect.intersects(tRange)) type += 't';\r\n    if (rect.intersects(lRange)) type += 'l';\r\n    if (rect.intersects(brRange)) type += 'br';\r\n    return type;\r\n  }\r\n\r\n  setOffset(selectorAttr) {\r\n    const intersectsArea = this.getIntersectsArea(selectorAttr);\r\n    // console.log('intersectsArea', intersectsArea)\r\n\r\n    this.setLTOffset(selectorAttr);\r\n    this.setTOffset(selectorAttr);\r\n    this.setLOffset(selectorAttr);\r\n    this.setBROffset(selectorAttr);\r\n\r\n    this.setLTCorner(selectorAttr, intersectsArea);\r\n    this.setTCorner(selectorAttr, intersectsArea);\r\n    this.setLCorner(selectorAttr, intersectsArea);\r\n    this.setBrCorner(selectorAttr, intersectsArea);\r\n  }\r\n\r\n  getViewRange() {\r\n    const { screen } = this;\r\n    const { table } = screen;\r\n    const { cols, rows } = table;\r\n    const viewRange = table.getScrollViewRange();\r\n    let { sri, sci } = viewRange;\r\n    const { eri, eci } = viewRange;\r\n\r\n    if (table.getFixedWidth() > 0) {\r\n      sri = 0;\r\n    }\r\n    if (table.getFixedHeight() > 0) {\r\n      sci = 0;\r\n    }\r\n\r\n    const width = cols.sectionSumWidth(sci, eci);\r\n    const height = rows.sectionSumHeight(sri, eri);\r\n\r\n    return new RectRange(sri, sci, eri, eci, width, height);\r\n  }\r\n\r\n  getDownXYSelectorAttr(x, y) {\r\n    const { screen } = this;\r\n    const { table } = screen;\r\n    const { merges, rows, cols } = table;\r\n    const { ri, ci } = table.getRiCiByXy(x, y);\r\n    if (ri === -1 && ci === -1) {\r\n      const rect = new RectRange(0, 0, rows.len - 1, cols.len - 1);\r\n      return {\r\n        rect, edge: true, edgeType: 'left-top',\r\n      };\r\n    }\r\n    if (ri === -1) {\r\n      const rect = new RectRange(0, ci, rows.len - 1, ci);\r\n      return {\r\n        rect, edge: true, edgeType: 'top',\r\n      };\r\n    }\r\n    if (ci === -1) {\r\n      const rect = new RectRange(ri, 0, ri, cols.len - 1);\r\n      return {\r\n        rect, edge: true, edgeType: 'left',\r\n      };\r\n    }\r\n    const merge = merges.getFirstIncludes(ri, ci);\r\n    let rect = new RectRange(ri, ci, ri, ci);\r\n    if (merge) {\r\n      rect = merge;\r\n    }\r\n    return { rect };\r\n  }\r\n\r\n  getMoveXySelectorAttr(selectorAttr, x, y) {\r\n    const { screen } = this;\r\n    const { table } = screen;\r\n    const {\r\n      merges, rows, cols,\r\n    } = table;\r\n    const { rect: selectRect, edgeType } = selectorAttr;\r\n    const viewRange = this.getViewRange();\r\n    let { ri, ci } = table.getRiCiByXy(x, y);\r\n    if (ri === -1) ri = viewRange.sri;\r\n    if (ci === -1) ci = viewRange.sci;\r\n    switch (edgeType) {\r\n      case 'left-top': {\r\n        let rect = selectRect.union(new RectRange(0, 0, rows.len - 1, cols.len - 1));\r\n        rect = selectRect.union(rect);\r\n        return {\r\n          rect, edge: true, edgeType: 'left-top',\r\n        };\r\n      }\r\n      case 'top': {\r\n        let rect = selectRect.union(new RectRange(0, ci, 0, ci));\r\n        rect = selectRect.union(rect);\r\n        return {\r\n          rect, edge: true, edgeType: 'top',\r\n        };\r\n      }\r\n      case 'left': {\r\n        let rect = selectRect.union(new RectRange(ri, 0, ri, 0));\r\n        rect = selectRect.union(rect);\r\n        return {\r\n          rect, edge: true, edgeType: 'left',\r\n        };\r\n      }\r\n      default: break;\r\n    }\r\n    let rect = selectRect.union(new RectRange(ri, ci, ri, ci));\r\n    rect = merges.union(rect);\r\n    return { rect };\r\n  }\r\n\r\n  getSelectRange() {\r\n    const { rect } = this.selectorAttr;\r\n    return rect;\r\n  }\r\n\r\n  // ===========downSelectCb=============\r\n\r\n  addDownSelectCb(cb) {\r\n    this.onDownSelectStack.push(cb);\r\n  }\r\n\r\n  removeDownSelectCb(cb) {\r\n    for (let i = 0; i < this.onChangeStack.length; i += 1) {\r\n      const item = this.onDownSelectStack[i];\r\n      if (item === cb) {\r\n        this.onDownSelectStack.splice(i, 1);\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  // ===========changeCb=============\r\n\r\n  addChangeCb(cb) {\r\n    this.onChangeStack.push(cb);\r\n  }\r\n\r\n  removeChangeCb(cb) {\r\n    for (let i = 0; i < this.onChangeStack.length; i += 1) {\r\n      const item = this.onChangeStack[i];\r\n      if (item === cb) {\r\n        this.onChangeStack.splice(i, 1);\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  // ===========selectChangeCb=============\r\n\r\n  addSelectChangeCb(cb) {\r\n    this.onSelectChangeStack.push(cb);\r\n  }\r\n\r\n  removeSelectChangeCb(cb) {\r\n    for (let i = 0; i < this.onSelectChangeStack.length; i += 1) {\r\n      const item = this.onSelectChangeStack[i];\r\n      if (item === cb) {\r\n        this.onSelectChangeStack.splice(i, 1);\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  // ===========selectChangeOverCb=============\r\n\r\n  addSelectChangeOverCb(cb) {\r\n    this.onSelectChangeOver.push(cb);\r\n  }\r\n\r\n  removeSelectChangeOverCb(cb) {\r\n    for (let i = 0; i < this.onSelectChangeOver.length; i += 1) {\r\n      const item = this.onSelectChangeOver[i];\r\n      if (item === cb) {\r\n        this.onSelectChangeOver.splice(i, 1);\r\n        return;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport { ScreenSelector };\r\n","import {\r\n  ALIGN,\r\n  TEXT_DIRECTION,\r\n  TEXT_WRAP,\r\n  VERTICAL_ALIGN,\r\n} from '../../../canvas/Font';\r\n\r\n/**\r\n *  CellFont\r\n *  @author jerry\r\n */\r\nclass CellFont {\r\n\r\n  /**\r\n   * CellFont\r\n   * @param align\r\n   * @param verticalAlign\r\n   * @param textWrap\r\n   * @param strikethrough\r\n   * @param underline\r\n   * @param color\r\n   * @param name\r\n   * @param size\r\n   * @param bold\r\n   * @param italic\r\n   * @param angle\r\n   * @param direction\r\n   */\r\n  constructor({\r\n    align = ALIGN.left,\r\n    verticalAlign = VERTICAL_ALIGN.center,\r\n    textWrap = TEXT_WRAP.OVER_FLOW,\r\n    strikethrough = false,\r\n    underline = false,\r\n    color = 'rgb(0,0,0)',\r\n    name = 'Arial',\r\n    size = 14,\r\n    bold = false,\r\n    italic = false,\r\n    angle = 0,\r\n    direction = TEXT_DIRECTION.HORIZONTAL,\r\n  }) {\r\n    this.align = align;\r\n    this.verticalAlign = verticalAlign;\r\n    this.textWrap = textWrap;\r\n    this.strikethrough = strikethrough;\r\n    this.underline = underline;\r\n    this.color = color;\r\n    this.name = name;\r\n    this.size = size;\r\n    this.bold = bold;\r\n    this.italic = italic;\r\n    this.direction = direction;\r\n    this.angle = angle;\r\n  }\r\n\r\n  clone() {\r\n    const {\r\n      align,\r\n      verticalAlign,\r\n      textWrap,\r\n      strikethrough,\r\n      underline,\r\n      color,\r\n      name,\r\n      size,\r\n      bold,\r\n      italic,\r\n      angle,\r\n      direction,\r\n    } = this;\r\n    return new CellFont({\r\n      align,\r\n      verticalAlign,\r\n      textWrap,\r\n      strikethrough,\r\n      underline,\r\n      color,\r\n      name,\r\n      size,\r\n      bold,\r\n      italic,\r\n      angle,\r\n      direction,\r\n    });\r\n  }\r\n}\r\n\r\nexport { CellFont };\r\n","import { LINE_TYPE } from '../../../canvas/Line';\r\nimport { Utils } from '../../../utils/Utils';\r\n\r\n/**\r\n * Border\r\n * @author jerry\r\n */\r\nclass Border {\r\n\r\n  /**\r\n   * Border\r\n   * @param time\r\n   * @param display\r\n   * @param width\r\n   * @param color\r\n   * @param type\r\n   */\r\n  constructor({\r\n    time = Utils.now(),\r\n    display = false,\r\n    width = 1,\r\n    color = '#000000',\r\n    type = LINE_TYPE.SOLID_LINE,\r\n  }) {\r\n    this.$time = time;\r\n    this.$display = display;\r\n    this.$width = width;\r\n    this.$color = color;\r\n    this.$type = type;\r\n  }\r\n\r\n  /**\r\n   * 读取属性修改时间\r\n   * @returns {*}\r\n   */\r\n  get time() {\r\n    return this.$time;\r\n  }\r\n\r\n  /**\r\n   * 读取边框是否显示\r\n   * @returns {boolean}\r\n   */\r\n  get display() {\r\n    return this.$display;\r\n  }\r\n\r\n  /**\r\n   * 设置边框是否显示\r\n   * @param value\r\n   */\r\n  set display(value) {\r\n    this.$time = Utils.now();\r\n    this.$display = value;\r\n  }\r\n\r\n  /**\r\n   * 读取边框宽度\r\n   * @returns {number}\r\n   */\r\n  get width() {\r\n    return this.$width;\r\n  }\r\n\r\n  /**\r\n   * 设置边框宽度\r\n   * @param value\r\n   */\r\n  set width(value) {\r\n    this.$time = Utils.now();\r\n    this.$width = value;\r\n  }\r\n\r\n  /**\r\n   * 读取边框颜色\r\n   * @returns {string}\r\n   */\r\n  get color() {\r\n    return this.$color;\r\n  }\r\n\r\n  /**\r\n   * 设置边框颜色\r\n   * @param value\r\n   */\r\n  set color(value) {\r\n    this.$time = Utils.now();\r\n    this.$color = value;\r\n  }\r\n\r\n  /**\r\n   * 读取边框类型\r\n   * @returns {number}\r\n   */\r\n  get type() {\r\n    return this.$type;\r\n  }\r\n\r\n  /**\r\n   * 设置边框类型\r\n   * @param value\r\n   */\r\n  set type(value) {\r\n    this.$time = Utils.now();\r\n    this.$type = value;\r\n  }\r\n\r\n  /**\r\n   * 判断两个边框是否一致\r\n   * @param target\r\n   */\r\n  equal(target) {\r\n    const color = this.color === target.color;\r\n    const width = this.width === target.width;\r\n    const type = this.type === target.type;\r\n    return color && width && type;\r\n  }\r\n\r\n  /**\r\n   * 比较两个边框的修改时间\r\n   * this > target = 1\r\n   * this < target = -1\r\n   * this == target = 0\r\n   * @param target\r\n   * @returns {number}\r\n   */\r\n  compareTime(target) {\r\n    if (Utils.isUnDef(target)) {\r\n      return -2;\r\n    }\r\n    const srcTime = this.time;\r\n    const targetTime = target.time;\r\n    if (srcTime > targetTime) {\r\n      return 1;\r\n    }\r\n    if (targetTime > srcTime) {\r\n      return -1;\r\n    }\r\n    return 0;\r\n  }\r\n}\r\n\r\nexport { Border };\r\n","import { Border } from './Border';\r\n\r\n/**\r\n * CellBorder\r\n * @author jerry\r\n */\r\nclass CellBorder {\r\n\r\n  /**\r\n   * CellBorder\r\n   * @param time\r\n   * @param left\r\n   * @param top\r\n   * @param right\r\n   * @param bottom\r\n   */\r\n  constructor({\r\n    left = {},\r\n    top = {},\r\n    right = {},\r\n    bottom = {},\r\n  }) {\r\n    this.left = new Border(left);\r\n    this.top = new Border(top);\r\n    this.right = new Border(right);\r\n    this.bottom = new Border(bottom);\r\n  }\r\n\r\n  clone() {\r\n    const {\r\n      left,\r\n      top,\r\n      right,\r\n      bottom,\r\n    } = this;\r\n    return new CellBorder({\r\n      left,\r\n      top,\r\n      right,\r\n      bottom,\r\n    });\r\n  }\r\n}\r\n\r\nexport { CellBorder };\r\n","import { Utils } from '../../../utils/Utils';\r\nimport { CellFont } from './CellFont';\r\nimport { CellBorder } from './CellBorder';\r\n\r\n/**\r\n * Cell\r\n * @author jerry\r\n */\r\nclass Cell {\r\n\r\n  /**\r\n   * Cell\r\n   * @param text\r\n   * @param background\r\n   * @param format\r\n   * @param fontAttr\r\n   * @param borderAttr\r\n   * @param contentWidth\r\n   */\r\n  constructor({\r\n    text = Utils.EMPTY,\r\n    background = Utils.Nul,\r\n    format = 'default',\r\n    fontAttr = {},\r\n    borderAttr = {},\r\n    contentWidth = 0,\r\n  }) {\r\n    this.background = background;\r\n    this.format = format;\r\n    this.text = text;\r\n    this.fontAttr = new CellFont(fontAttr);\r\n    this.borderAttr = new CellBorder(borderAttr);\r\n    this.contentWidth = contentWidth;\r\n  }\r\n\r\n  setContentWidth(contentWidth) {\r\n    this.contentWidth = contentWidth;\r\n  }\r\n\r\n  clone() {\r\n    const {\r\n      background,\r\n      format,\r\n      text,\r\n      fontAttr,\r\n      borderAttr,\r\n    } = this;\r\n    return new Cell({\r\n      background,\r\n      format,\r\n      text,\r\n      fontAttr: fontAttr.clone(),\r\n      borderAttr: borderAttr.clone(),\r\n    });\r\n  }\r\n}\r\n\r\nexport { Cell };\r\n","import { Widget } from '../../lib/Widget';\r\nimport { cssPrefix } from '../../config';\r\nimport { Undo } from './tools/Undo';\r\nimport { Redo } from './tools/Redo';\r\nimport { PaintFormat } from './tools/PaintFormat';\r\nimport { ClearFormat } from './tools/ClearFormat';\r\nimport { Format } from './tools/Format';\r\nimport { Font } from './tools/Font';\r\nimport { FontSize } from './tools/FontSize';\r\nimport { FontBold } from './tools/FontBold';\r\nimport { FontItalic } from './tools/FontItalic';\r\nimport { UnderLine } from './tools/UnderLine';\r\nimport { FontStrike } from './tools/FontStrike';\r\nimport { FontColor } from './tools/FontColor';\r\nimport { FillColor } from './tools/FillColor';\r\nimport { Border } from './tools/contextmenu/icon/border/Border';\r\nimport { Merge } from './tools/Merge';\r\nimport { HorizontalAlign } from './tools/HorizontalAlign';\r\nimport { VerticalAlign } from './tools/VerticalAlign';\r\nimport { TextWrapping } from './tools/TextWrapping';\r\nimport { Fixed } from './tools/Fixed';\r\nimport { Filter } from './tools/Filter';\r\nimport { Functions } from './tools/Functions';\r\nimport { EventBind } from '../../utils/EventBind';\r\nimport { Constant } from '../../utils/Constant';\r\nimport { ScreenCopyStyle } from '../table/copystyle/ScreenCopyStyle';\r\nimport { ScreenSelector } from '../table/selector/ScreenSelector';\r\nimport { Utils } from '../../utils/Utils';\r\nimport { ElPopUp } from '../../component/elpopup/ElPopUp';\r\nimport { LINE_TYPE } from '../../canvas/Line';\r\nimport { Icon } from './tools/Icon';\r\nimport { ALIGN, TEXT_WRAP, VERTICAL_ALIGN } from '../../canvas/Font';\r\nimport { Cell } from '../table/cells/Cell';\r\n\r\nclass Divider extends Widget {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-divider`);\r\n  }\r\n}\r\n\r\nclass TopMenu extends Widget {\r\n\r\n  constructor(workTop) {\r\n    super(`${cssPrefix}-tools-menu`);\r\n    this.workTop = workTop;\r\n    const { body } = this.workTop.work;\r\n    const { sheetView } = body;\r\n    // tools\r\n    this.undo = new Undo();\r\n    this.redo = new Redo();\r\n    this.paintFormat = new PaintFormat();\r\n    this.clearFormat = new ClearFormat();\r\n    this.format = new Format({\r\n      contextMenu: {\r\n        onUpdate: (format, title) => {\r\n          const sheet = sheetView.getActiveSheet();\r\n          const { table } = sheet;\r\n          const {\r\n            screen,\r\n            cellsHelper,\r\n            dataSnapshot,\r\n          } = table;\r\n          const screenSelector = screen.findByClass(ScreenSelector);\r\n          const { selectorAttr } = screenSelector;\r\n          this.format.setTitle(title);\r\n          if (selectorAttr) {\r\n            cellsHelper.getCellOrNewCellByViewRange({\r\n              rectRange: selectorAttr.rect,\r\n              callback: (r, c, cell) => {\r\n                cell.format = format;\r\n              },\r\n            });\r\n            dataSnapshot.snapshot();\r\n            table.render();\r\n          }\r\n        },\r\n      },\r\n    });\r\n    this.font = new Font({\r\n      contextMenu: {\r\n        onUpdate: (type) => {\r\n          const sheet = sheetView.getActiveSheet();\r\n          const { table } = sheet;\r\n          const {\r\n            screen,\r\n            cellsHelper,\r\n            dataSnapshot,\r\n          } = table;\r\n          const screenSelector = screen.findByClass(ScreenSelector);\r\n          const { selectorAttr } = screenSelector;\r\n          this.font.setTitle(type);\r\n          if (selectorAttr) {\r\n            cellsHelper.getCellOrNewCellByViewRange({\r\n              rectRange: selectorAttr.rect,\r\n              callback: (r, c, cell) => {\r\n                cell.fontAttr.name = type;\r\n              },\r\n            });\r\n            dataSnapshot.snapshot();\r\n            table.render();\r\n          }\r\n        },\r\n      },\r\n    });\r\n    this.fontSize = new FontSize({\r\n      contextMenu: {\r\n        onUpdate: (size) => {\r\n          const sheet = sheetView.getActiveSheet();\r\n          const { table } = sheet;\r\n          const {\r\n            screen,\r\n            cellsHelper,\r\n            dataSnapshot,\r\n          } = table;\r\n          const screenSelector = screen.findByClass(ScreenSelector);\r\n          const { selectorAttr } = screenSelector;\r\n          this.fontSize.setTitle(size);\r\n          if (selectorAttr) {\r\n            cellsHelper.getCellOrNewCellByViewRange({\r\n              rectRange: selectorAttr.rect,\r\n              callback: (r, c, cell) => {\r\n                cell.fontAttr.size = size;\r\n              },\r\n            });\r\n            dataSnapshot.snapshot();\r\n            table.render();\r\n          }\r\n        },\r\n      },\r\n    });\r\n    this.fontColor = new FontColor({\r\n      contextMenu: {\r\n        onUpdate: (color) => {\r\n          const sheet = sheetView.getActiveSheet();\r\n          const { table } = sheet;\r\n          const {\r\n            screen,\r\n            cellsHelper,\r\n            dataSnapshot,\r\n          } = table;\r\n          const screenSelector = screen.findByClass(ScreenSelector);\r\n          const { selectorAttr } = screenSelector;\r\n          this.fontColor.setColor(color);\r\n          if (selectorAttr) {\r\n            cellsHelper.getCellOrNewCellByViewRange({\r\n              rectRange: selectorAttr.rect,\r\n              callback: (r, c, cell) => {\r\n                cell.fontAttr.color = color;\r\n              },\r\n            });\r\n            dataSnapshot.snapshot();\r\n            table.render();\r\n          }\r\n        },\r\n      },\r\n    });\r\n    this.fillColor = new FillColor({\r\n      contextMenu: {\r\n        onUpdate: (color) => {\r\n          const sheet = sheetView.getActiveSheet();\r\n          const { table } = sheet;\r\n          const {\r\n            screen,\r\n            cellsHelper,\r\n            dataSnapshot,\r\n          } = table;\r\n          const screenSelector = screen.findByClass(ScreenSelector);\r\n          const { selectorAttr } = screenSelector;\r\n          this.fillColor.setColor(color);\r\n          if (selectorAttr) {\r\n            cellsHelper.getCellOrNewCellByViewRange({\r\n              rectRange: selectorAttr.rect,\r\n              callback: (r, c, cell) => {\r\n                cell.background = color;\r\n              },\r\n            });\r\n            dataSnapshot.snapshot();\r\n            table.render();\r\n          }\r\n        },\r\n      },\r\n    });\r\n    this.border = new Border({\r\n      contextMenu: {\r\n        onUpdate: (borderType, color, lineType) => {\r\n          const sheet = sheetView.getActiveSheet();\r\n          const { table } = sheet;\r\n          const {\r\n            screen,\r\n            cellsHelper,\r\n            cells,\r\n            dataSnapshot,\r\n          } = table;\r\n          const screenSelector = screen.findByClass(ScreenSelector);\r\n          const { selectorAttr } = screenSelector;\r\n          if (selectorAttr) {\r\n            let width = 1;\r\n            let type = LINE_TYPE.SOLID_LINE;\r\n            // Line Type\r\n            switch (lineType) {\r\n              case 'line1':\r\n                width = 1;\r\n                type = LINE_TYPE.SOLID_LINE;\r\n                break;\r\n              case 'line2':\r\n                width = 2;\r\n                type = LINE_TYPE.SOLID_LINE;\r\n                break;\r\n              case 'line3':\r\n                width = 3;\r\n                type = LINE_TYPE.SOLID_LINE;\r\n                break;\r\n              case 'line4':\r\n                type = LINE_TYPE.DOTTED_LINE;\r\n                break;\r\n              case 'line5':\r\n                type = LINE_TYPE.POINT_LINE;\r\n                break;\r\n              case 'line6':\r\n                type = LINE_TYPE.DOUBLE_LINE;\r\n                break;\r\n              default: break;\r\n            }\r\n            // Border Type\r\n            switch (borderType) {\r\n              case 'border1':\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    cell.borderAttr.left.display = true;\r\n                    cell.borderAttr.top.display = true;\r\n                    cell.borderAttr.right.display = true;\r\n                    cell.borderAttr.bottom.display = true;\r\n                  },\r\n                });\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    cell.borderAttr.left.color = color;\r\n                    cell.borderAttr.top.color = color;\r\n                    cell.borderAttr.right.color = color;\r\n                    cell.borderAttr.bottom.color = color;\r\n                  },\r\n                });\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    cell.borderAttr.left.width = width;\r\n                    cell.borderAttr.top.width = width;\r\n                    cell.borderAttr.right.width = width;\r\n                    cell.borderAttr.bottom.width = width;\r\n                  },\r\n                });\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    cell.borderAttr.left.type = type;\r\n                    cell.borderAttr.top.type = type;\r\n                    cell.borderAttr.right.type = type;\r\n                    cell.borderAttr.bottom.type = type;\r\n                  },\r\n                });\r\n                break;\r\n              case 'border2':\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    if (selectorAttr.rect.sri === r) {\r\n                      cell.borderAttr.bottom.display = true;\r\n                    } else if (selectorAttr.rect.eri === r) {\r\n                      cell.borderAttr.top.display = true;\r\n                    } else {\r\n                      cell.borderAttr.bottom.display = true;\r\n                      cell.borderAttr.top.display = true;\r\n                    }\r\n                    if (selectorAttr.rect.sci === c) {\r\n                      cell.borderAttr.right.display = true;\r\n                    } else if (selectorAttr.rect.eci === c) {\r\n                      cell.borderAttr.left.display = true;\r\n                    } else {\r\n                      cell.borderAttr.right.display = true;\r\n                      cell.borderAttr.left.display = true;\r\n                    }\r\n                  },\r\n                });\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    if (selectorAttr.rect.sri === r) {\r\n                      cell.borderAttr.bottom.color = color;\r\n                    } else if (selectorAttr.rect.eri === r) {\r\n                      cell.borderAttr.top.color = color;\r\n                    } else {\r\n                      cell.borderAttr.bottom.color = color;\r\n                      cell.borderAttr.top.color = color;\r\n                    }\r\n                    if (selectorAttr.rect.sci === c) {\r\n                      cell.borderAttr.right.color = color;\r\n                    } else if (selectorAttr.rect.eci === c) {\r\n                      cell.borderAttr.left.color = color;\r\n                    } else {\r\n                      cell.borderAttr.right.color = color;\r\n                      cell.borderAttr.left.color = color;\r\n                    }\r\n                  },\r\n                });\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    if (selectorAttr.rect.sri === r) {\r\n                      cell.borderAttr.bottom.width = width;\r\n                    } else if (selectorAttr.rect.eri === r) {\r\n                      cell.borderAttr.top.width = width;\r\n                    } else {\r\n                      cell.borderAttr.bottom.width = width;\r\n                      cell.borderAttr.top.width = width;\r\n                    }\r\n                    if (selectorAttr.rect.sci === c) {\r\n                      cell.borderAttr.right.width = width;\r\n                    } else if (selectorAttr.rect.eci === c) {\r\n                      cell.borderAttr.left.width = width;\r\n                    } else {\r\n                      cell.borderAttr.right.width = width;\r\n                      cell.borderAttr.left.width = width;\r\n                    }\r\n                  },\r\n                });\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    if (selectorAttr.rect.sri === r) {\r\n                      cell.borderAttr.bottom.type = type;\r\n                    } else if (selectorAttr.rect.eri === r) {\r\n                      cell.borderAttr.top.type = type;\r\n                    } else {\r\n                      cell.borderAttr.bottom.type = type;\r\n                      cell.borderAttr.top.type = type;\r\n                    }\r\n                    if (selectorAttr.rect.sci === c) {\r\n                      cell.borderAttr.right.type = type;\r\n                    } else if (selectorAttr.rect.eci === c) {\r\n                      cell.borderAttr.left.type = type;\r\n                    } else {\r\n                      cell.borderAttr.right.type = type;\r\n                      cell.borderAttr.left.type = type;\r\n                    }\r\n                  },\r\n                });\r\n                break;\r\n              case 'border3':\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    if (selectorAttr.rect.sri === r) {\r\n                      cell.borderAttr.bottom.display = true;\r\n                    } else if (selectorAttr.rect.eri === r) {\r\n                      cell.borderAttr.top.display = true;\r\n                    } else {\r\n                      cell.borderAttr.bottom.display = true;\r\n                      cell.borderAttr.top.display = true;\r\n                    }\r\n                  },\r\n                });\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    if (selectorAttr.rect.sri === r) {\r\n                      cell.borderAttr.bottom.color = color;\r\n                    } else if (selectorAttr.rect.eri === r) {\r\n                      cell.borderAttr.top.color = color;\r\n                    } else {\r\n                      cell.borderAttr.bottom.color = color;\r\n                      cell.borderAttr.top.color = color;\r\n                    }\r\n                  },\r\n                });\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    if (selectorAttr.rect.sri === r) {\r\n                      cell.borderAttr.bottom.width = width;\r\n                    } else if (selectorAttr.rect.eri === r) {\r\n                      cell.borderAttr.top.width = width;\r\n                    } else {\r\n                      cell.borderAttr.bottom.width = width;\r\n                      cell.borderAttr.top.width = width;\r\n                    }\r\n                  },\r\n                });\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    if (selectorAttr.rect.sri === r) {\r\n                      cell.borderAttr.bottom.type = type;\r\n                    } else if (selectorAttr.rect.eri === r) {\r\n                      cell.borderAttr.top.type = type;\r\n                    } else {\r\n                      cell.borderAttr.bottom.type = type;\r\n                      cell.borderAttr.top.type = type;\r\n                    }\r\n                  },\r\n                });\r\n                break;\r\n              case 'border4':\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    if (selectorAttr.rect.sci === c) {\r\n                      cell.borderAttr.right.display = true;\r\n                    } else if (selectorAttr.rect.eci === c) {\r\n                      cell.borderAttr.left.display = true;\r\n                    } else {\r\n                      cell.borderAttr.right.display = true;\r\n                      cell.borderAttr.left.display = true;\r\n                    }\r\n                  },\r\n                });\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    if (selectorAttr.rect.sci === c) {\r\n                      cell.borderAttr.right.color = color;\r\n                    } else if (selectorAttr.rect.eci === c) {\r\n                      cell.borderAttr.left.color = color;\r\n                    } else {\r\n                      cell.borderAttr.right.color = color;\r\n                      cell.borderAttr.left.color = color;\r\n                    }\r\n                  },\r\n                });\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    if (selectorAttr.rect.sci === c) {\r\n                      cell.borderAttr.right.width = width;\r\n                    } else if (selectorAttr.rect.eci === c) {\r\n                      cell.borderAttr.left.width = width;\r\n                    } else {\r\n                      cell.borderAttr.right.width = width;\r\n                      cell.borderAttr.left.width = width;\r\n                    }\r\n                  },\r\n                });\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    if (selectorAttr.rect.sci === c) {\r\n                      cell.borderAttr.right.type = type;\r\n                    } else if (selectorAttr.rect.eci === c) {\r\n                      cell.borderAttr.left.type = type;\r\n                    } else {\r\n                      cell.borderAttr.right.type = type;\r\n                      cell.borderAttr.left.type = type;\r\n                    }\r\n                  },\r\n                });\r\n                break;\r\n              case 'border5':\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    if (selectorAttr.rect.sci === c) {\r\n                      cell.borderAttr.left.display = true;\r\n                    } else if (selectorAttr.rect.eci === c) {\r\n                      cell.borderAttr.right.display = true;\r\n                    }\r\n                    if (selectorAttr.rect.sri === r) {\r\n                      cell.borderAttr.top.display = true;\r\n                    } else if (selectorAttr.rect.eri === r) {\r\n                      cell.borderAttr.bottom.display = true;\r\n                    }\r\n                  },\r\n                });\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    if (selectorAttr.rect.sci === c) {\r\n                      cell.borderAttr.left.color = color;\r\n                    } else if (selectorAttr.rect.eci === c) {\r\n                      cell.borderAttr.right.color = color;\r\n                    }\r\n                    if (selectorAttr.rect.sri === r) {\r\n                      cell.borderAttr.top.color = color;\r\n                    } else if (selectorAttr.rect.eri === r) {\r\n                      cell.borderAttr.bottom.color = color;\r\n                    }\r\n                  },\r\n                });\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    if (selectorAttr.rect.sci === c) {\r\n                      cell.borderAttr.left.width = width;\r\n                    } else if (selectorAttr.rect.eci === c) {\r\n                      cell.borderAttr.right.width = width;\r\n                    }\r\n                    if (selectorAttr.rect.sri === r) {\r\n                      cell.borderAttr.top.width = width;\r\n                    } else if (selectorAttr.rect.eri === r) {\r\n                      cell.borderAttr.bottom.width = width;\r\n                    }\r\n                  },\r\n                });\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    if (selectorAttr.rect.sci === c) {\r\n                      cell.borderAttr.left.type = type;\r\n                    } else if (selectorAttr.rect.eci === c) {\r\n                      cell.borderAttr.right.type = type;\r\n                    }\r\n                    if (selectorAttr.rect.sri === r) {\r\n                      cell.borderAttr.top.type = type;\r\n                    } else if (selectorAttr.rect.eri === r) {\r\n                      cell.borderAttr.bottom.type = type;\r\n                    }\r\n                  },\r\n                });\r\n                break;\r\n              case 'border6':\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    if (c === selectorAttr.rect.sci) {\r\n                      cell.borderAttr.left.display = true;\r\n                    }\r\n                  },\r\n                });\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    cell.borderAttr.left.color = color;\r\n                  },\r\n                });\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    cell.borderAttr.left.width = width;\r\n                  },\r\n                });\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    cell.borderAttr.left.type = type;\r\n                  },\r\n                });\r\n                break;\r\n              case 'border7':\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    if (r === selectorAttr.rect.sri) {\r\n                      cell.borderAttr.top.display = true;\r\n                    }\r\n                  },\r\n                });\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    cell.borderAttr.top.color = color;\r\n                  },\r\n                });\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    cell.borderAttr.top.width = width;\r\n                  },\r\n                });\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    cell.borderAttr.top.type = type;\r\n                  },\r\n                });\r\n                break;\r\n              case 'border8':\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    if (c === selectorAttr.rect.eci) {\r\n                      cell.borderAttr.right.display = true;\r\n                    }\r\n                  },\r\n                });\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    cell.borderAttr.right.color = color;\r\n                  },\r\n                });\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    cell.borderAttr.right.width = width;\r\n                  },\r\n                });\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    cell.borderAttr.right.type = type;\r\n                  },\r\n                });\r\n                break;\r\n              case 'border9':\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    if (r === selectorAttr.rect.eri) {\r\n                      cell.borderAttr.bottom.display = true;\r\n                    }\r\n                  },\r\n                });\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    cell.borderAttr.bottom.color = color;\r\n                  },\r\n                });\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    cell.borderAttr.bottom.width = width;\r\n                  },\r\n                });\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    cell.borderAttr.bottom.type = type;\r\n                  },\r\n                });\r\n                break;\r\n              case 'border10':\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c) => {\r\n                    const cell = cells.getCellOrNew(r, c);\r\n                    if (selectorAttr.rect.sri === r) {\r\n                      const top = cells.getCellOrNew(r - 1, c);\r\n                      top.borderAttr.bottom.display = false;\r\n                    }\r\n                    if (selectorAttr.rect.eri === r) {\r\n                      const bottom = cells.getCellOrNew(r + 1, c);\r\n                      bottom.borderAttr.top.display = false;\r\n                    }\r\n                    if (selectorAttr.rect.sci === c) {\r\n                      const left = cells.getCellOrNew(r, c - 1);\r\n                      left.borderAttr.right.display = false;\r\n                    }\r\n                    if (selectorAttr.rect.eci === c) {\r\n                      const right = cells.getCellOrNew(r, c + 1);\r\n                      right.borderAttr.left.display = false;\r\n                    }\r\n                    cell.borderAttr.left.display = false;\r\n                    cell.borderAttr.top.display = false;\r\n                    cell.borderAttr.right.display = false;\r\n                    cell.borderAttr.bottom.display = false;\r\n                  },\r\n                });\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    cell.borderAttr.left.color = false;\r\n                    cell.borderAttr.top.color = false;\r\n                    cell.borderAttr.right.color = false;\r\n                    cell.borderAttr.bottom.color = false;\r\n                  },\r\n                });\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    cell.borderAttr.left.width = false;\r\n                    cell.borderAttr.top.width = false;\r\n                    cell.borderAttr.right.width = false;\r\n                    cell.borderAttr.bottom.width = false;\r\n                  },\r\n                });\r\n                cellsHelper.getCellOrNewCellByViewRange({\r\n                  rectRange: selectorAttr.rect,\r\n                  callback: (r, c, cell) => {\r\n                    cell.borderAttr.left.type = false;\r\n                    cell.borderAttr.top.type = false;\r\n                    cell.borderAttr.right.type = false;\r\n                    cell.borderAttr.bottom.type = false;\r\n                  },\r\n                });\r\n                break;\r\n              default: break;\r\n            }\r\n            // 快照\r\n            dataSnapshot.snapshot();\r\n            // render\r\n            table.render();\r\n          }\r\n        },\r\n      },\r\n    });\r\n    this.fontBold = new FontBold();\r\n    this.fontItalic = new FontItalic();\r\n    this.underLine = new UnderLine();\r\n    this.fontStrike = new FontStrike();\r\n    this.merge = new Merge();\r\n    this.horizontalAlign = new HorizontalAlign({\r\n      contextMenu: {\r\n        onUpdate: (type) => {\r\n          const sheet = sheetView.getActiveSheet();\r\n          const { table } = sheet;\r\n          const {\r\n            screen,\r\n            cellsHelper,\r\n            dataSnapshot,\r\n          } = table;\r\n          const screenSelector = screen.findByClass(ScreenSelector);\r\n          const { selectorAttr } = screenSelector;\r\n          switch (type) {\r\n            case ALIGN.left:\r\n              this.horizontalAlign.setIcon(new Icon('align-left'));\r\n              break;\r\n            case ALIGN.center:\r\n              this.horizontalAlign.setIcon(new Icon('align-center'));\r\n              break;\r\n            case ALIGN.right:\r\n              this.horizontalAlign.setIcon(new Icon('align-right'));\r\n              break;\r\n            default: break;\r\n          }\r\n          if (selectorAttr) {\r\n            cellsHelper.getCellOrNewCellByViewRange({\r\n              rectRange: selectorAttr.rect,\r\n              callback: (r, c, cell) => {\r\n                cell.fontAttr.align = type;\r\n              },\r\n            });\r\n            dataSnapshot.snapshot();\r\n            table.render();\r\n          }\r\n        },\r\n      },\r\n    });\r\n    this.verticalAlign = new VerticalAlign({\r\n      contextMenu: {\r\n        onUpdate: (type) => {\r\n          const sheet = sheetView.getActiveSheet();\r\n          const { table } = sheet;\r\n          const {\r\n            screen,\r\n            cellsHelper,\r\n            dataSnapshot,\r\n          } = table;\r\n          const screenSelector = screen.findByClass(ScreenSelector);\r\n          const { selectorAttr } = screenSelector;\r\n          switch (type) {\r\n            case VERTICAL_ALIGN.top:\r\n              this.verticalAlign.setIcon(new Icon('align-top'));\r\n              break;\r\n            case VERTICAL_ALIGN.center:\r\n              this.verticalAlign.setIcon(new Icon('align-middle'));\r\n              break;\r\n            case VERTICAL_ALIGN.bottom:\r\n              this.verticalAlign.setIcon(new Icon('align-bottom'));\r\n              break;\r\n            default: break;\r\n          }\r\n          if (selectorAttr) {\r\n            cellsHelper.getCellOrNewCellByViewRange({\r\n              rectRange: selectorAttr.rect,\r\n              callback: (r, c, cell) => {\r\n                cell.fontAttr.verticalAlign = type;\r\n              },\r\n            });\r\n            dataSnapshot.snapshot();\r\n            table.render();\r\n          }\r\n        },\r\n      },\r\n    });\r\n    this.textWrapping = new TextWrapping({\r\n      contextMenu: {\r\n        onUpdate: (type) => {\r\n          const sheet = sheetView.getActiveSheet();\r\n          const { table } = sheet;\r\n          const {\r\n            screen,\r\n            cellsHelper,\r\n            dataSnapshot,\r\n          } = table;\r\n          const screenSelector = screen.findByClass(ScreenSelector);\r\n          const { selectorAttr } = screenSelector;\r\n          let icon;\r\n          switch (type) {\r\n            case TEXT_WRAP.TRUNCATE:\r\n              icon = new Icon('truncate');\r\n              break;\r\n            case TEXT_WRAP.WORD_WRAP:\r\n              icon = new Icon('text-wrap');\r\n              break;\r\n            case TEXT_WRAP.OVER_FLOW:\r\n            default:\r\n              icon = new Icon('overflow');\r\n              break;\r\n          }\r\n          this.textWrapping.setIcon(icon);\r\n          if (selectorAttr) {\r\n            cellsHelper.getCellOrNewCellByViewRange({\r\n              rectRange: selectorAttr.rect,\r\n              callback: (r, c, cell) => {\r\n                cell.fontAttr.textWrap = type;\r\n              },\r\n            });\r\n            dataSnapshot.snapshot();\r\n            table.render();\r\n          }\r\n        },\r\n      },\r\n    });\r\n    this.fixed = new Fixed();\r\n    this.filter = new Filter();\r\n    this.functions = new Functions();\r\n    this.children(this.undo);\r\n    this.children(this.redo);\r\n    this.children(this.paintFormat);\r\n    this.children(this.clearFormat);\r\n    this.children(new Divider());\r\n    this.children(this.format);\r\n    this.children(new Divider());\r\n    this.children(this.font);\r\n    this.children(this.fontSize);\r\n    this.children(new Divider());\r\n    this.children(this.fontBold);\r\n    this.children(this.fontItalic);\r\n    this.children(this.underLine);\r\n    this.children(this.fontStrike);\r\n    this.children(this.fontColor);\r\n    this.children(new Divider());\r\n    this.children(this.fillColor);\r\n    this.children(this.border);\r\n    this.children(this.merge);\r\n    this.children(this.horizontalAlign);\r\n    this.children(this.verticalAlign);\r\n    this.children(this.textWrapping);\r\n    this.children(this.fixed);\r\n    this.children(this.filter);\r\n    this.children(this.functions);\r\n    this.bind();\r\n  }\r\n\r\n  bind() {\r\n    const { body } = this.workTop.work;\r\n    const { sheetView } = body;\r\n    EventBind.bind(body, Constant.WORK_BODY_TYPE.CHANGE_ACTIVE, () => {\r\n      this.setStatus();\r\n    });\r\n    EventBind.bind(body, Constant.TABLE_EVENT_TYPE.DATA_CHANGE, () => {\r\n      this.setStatus();\r\n    });\r\n    EventBind.bind(body, Constant.TABLE_EVENT_TYPE.SELECT_DOWN, () => {\r\n      // console.log('TABLE_EVENT_TYPE.SELECT_DOWN');\r\n      this.setFormatStatus();\r\n      this.setFontStatus();\r\n      this.setFontSizeStatus();\r\n      this.setFontBoldStatus();\r\n      this.setFontItalicStatus();\r\n      this.setUnderLineStatus();\r\n      this.setFontStrikeStatus();\r\n      this.setFontColorStatus();\r\n      this.setFillColorStatus();\r\n      this.setHorizontalAlignStatus();\r\n      this.setVerticalAlignStatus();\r\n      this.setTextWrappingStatus();\r\n    });\r\n    EventBind.bind(this.undo, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, () => {\r\n      const sheet = sheetView.getActiveSheet();\r\n      const { table } = sheet;\r\n      const { dataSnapshot } = table;\r\n      if (dataSnapshot.undo.length() > 1) dataSnapshot.undo.pop();\r\n    });\r\n    EventBind.bind(this.redo, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, () => {\r\n      const sheet = sheetView.getActiveSheet();\r\n      const { table } = sheet;\r\n      const { dataSnapshot } = table;\r\n      dataSnapshot.redo.pop();\r\n    });\r\n    EventBind.bind(this.paintFormat, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, () => {\r\n      const sheet = sheetView.getActiveSheet();\r\n      const { table } = sheet;\r\n      const { screen, cells, cellsHelper, dataSnapshot } = table;\r\n      const screenCopyStyle = screen.findByClass(ScreenCopyStyle);\r\n      const screenSelector = screen.findByClass(ScreenSelector);\r\n      const { selectorAttr } = screenSelector;\r\n      if (selectorAttr) {\r\n        screenCopyStyle.setShow(selectorAttr);\r\n        this.paintFormat.active(true);\r\n        this.paintFormat.addSheet(sheet);\r\n        const cb = () => {\r\n          // 清除复制\r\n          screenCopyStyle.setHide();\r\n          this.paintFormat.active(false);\r\n          this.paintFormat.removeSheet(sheet);\r\n          screenSelector.removeSelectChangeOverCb(cb);\r\n          // 复制样式\r\n          const { selectorAttr: newSelectorAttr } = screenSelector;\r\n          const src = cells.getCellOrNew(selectorAttr.rect.sri, selectorAttr.rect.sci);\r\n          cellsHelper.getCellOrNewCellByViewRange({\r\n            rectRange: newSelectorAttr.rect,\r\n            callback: (r, c, cell) => {\r\n              const { text } = cell;\r\n              Utils.mergeDeep(cell, src);\r\n              cell.text = text;\r\n            },\r\n          });\r\n          dataSnapshot.snapshot();\r\n          table.render();\r\n        };\r\n        screenSelector.addSelectChangeOverCb(cb);\r\n      }\r\n    });\r\n    EventBind.bind(this.clearFormat, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, () => {\r\n      const sheet = sheetView.getActiveSheet();\r\n      const { table } = sheet;\r\n      const { screen, cellsHelper } = table;\r\n      const screenSelector = screen.findByClass(ScreenSelector);\r\n      const { selectorAttr } = screenSelector;\r\n      if (selectorAttr) {\r\n        cellsHelper.getCellOrNewCellByViewRange({\r\n          rectRange: selectorAttr.rect,\r\n          callback: (r, c, cell) => {\r\n            const { text } = cell;\r\n            table.setCell(r, c, new Cell({ text }));\r\n            Utils.mergeDeep(cell, new Cell({ text }));\r\n            cell.text = text;\r\n          },\r\n        });\r\n        table.render();\r\n      }\r\n    });\r\n    EventBind.bind(this.format, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      const { format } = this;\r\n      const { formatContextMenu } = format;\r\n      const { elPopUp } = formatContextMenu;\r\n      ElPopUp.closeAll([elPopUp]);\r\n      if (formatContextMenu.isOpen()) {\r\n        formatContextMenu.open();\r\n      } else {\r\n        formatContextMenu.close();\r\n      }\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n    EventBind.bind(this.font, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      const { font } = this;\r\n      const { fontContextMenu } = font;\r\n      const { elPopUp } = fontContextMenu;\r\n      ElPopUp.closeAll([elPopUp]);\r\n      if (fontContextMenu.isOpen()) {\r\n        fontContextMenu.open();\r\n      } else {\r\n        fontContextMenu.close();\r\n      }\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n    EventBind.bind(this.fontSize, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      const { fontSize } = this;\r\n      const { fontSizeContextMenu } = fontSize;\r\n      const { elPopUp } = fontSizeContextMenu;\r\n      ElPopUp.closeAll([elPopUp]);\r\n      if (fontSizeContextMenu.isOpen()) {\r\n        fontSizeContextMenu.open();\r\n      } else {\r\n        fontSizeContextMenu.close();\r\n      }\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n    EventBind.bind(this.fontBold, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, () => {\r\n      const sheet = sheetView.getActiveSheet();\r\n      const { table } = sheet;\r\n      const { screen, cells, cellsHelper, dataSnapshot } = table;\r\n      const screenSelector = screen.findByClass(ScreenSelector);\r\n      const { selectorAttr } = screenSelector;\r\n      if (selectorAttr) {\r\n        const firstCell = cells.getCellOrNew(selectorAttr.rect.sri, selectorAttr.rect.sci);\r\n        const bold = !firstCell.fontAttr.bold;\r\n        cellsHelper.getCellOrNewCellByViewRange({\r\n          rectRange: selectorAttr.rect,\r\n          callback: (r, c, cell) => {\r\n            cell.fontAttr.bold = bold;\r\n          },\r\n        });\r\n        dataSnapshot.snapshot();\r\n        table.render();\r\n      }\r\n    });\r\n    EventBind.bind(this.fontItalic, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, () => {\r\n      const sheet = sheetView.getActiveSheet();\r\n      const { table } = sheet;\r\n      const { screen, cells, cellsHelper, dataSnapshot } = table;\r\n      const screenSelector = screen.findByClass(ScreenSelector);\r\n      const { selectorAttr } = screenSelector;\r\n      if (selectorAttr) {\r\n        const firstCell = cells.getCellOrNew(selectorAttr.rect.sri, selectorAttr.rect.sci);\r\n        const italic = !firstCell.fontAttr.italic;\r\n        cellsHelper.getCellOrNewCellByViewRange({\r\n          rectRange: selectorAttr.rect,\r\n          callback: (r, c, cell) => {\r\n            cell.fontAttr.italic = italic;\r\n          },\r\n        });\r\n        dataSnapshot.snapshot();\r\n        table.render();\r\n      }\r\n    });\r\n    EventBind.bind(this.underLine, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, () => {\r\n      const sheet = sheetView.getActiveSheet();\r\n      const { table } = sheet;\r\n      const { screen, cells, cellsHelper, dataSnapshot } = table;\r\n      const screenSelector = screen.findByClass(ScreenSelector);\r\n      const { selectorAttr } = screenSelector;\r\n      if (selectorAttr) {\r\n        const firstCell = cells.getCellOrNew(selectorAttr.rect.sri, selectorAttr.rect.sci);\r\n        const underline = !firstCell.fontAttr.underline;\r\n        cellsHelper.getCellOrNewCellByViewRange({\r\n          rectRange: selectorAttr.rect,\r\n          callback: (r, c, cell) => {\r\n            cell.fontAttr.underline = underline;\r\n          },\r\n        });\r\n        dataSnapshot.snapshot();\r\n        table.render();\r\n      }\r\n    });\r\n    EventBind.bind(this.fontStrike, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, () => {\r\n      const sheet = sheetView.getActiveSheet();\r\n      const { table } = sheet;\r\n      const { screen, cells, cellsHelper, dataSnapshot } = table;\r\n      const screenSelector = screen.findByClass(ScreenSelector);\r\n      const { selectorAttr } = screenSelector;\r\n      if (selectorAttr) {\r\n        const firstCell = cells.getCellOrNew(selectorAttr.rect.sri, selectorAttr.rect.sci);\r\n        const strikethrough = !firstCell.fontAttr.strikethrough;\r\n        cellsHelper.getCellOrNewCellByViewRange({\r\n          rectRange: selectorAttr.rect,\r\n          callback: (r, c, cell) => {\r\n            cell.fontAttr.strikethrough = strikethrough;\r\n          },\r\n        });\r\n        dataSnapshot.snapshot();\r\n        table.render();\r\n      }\r\n    });\r\n    EventBind.bind(this.fontColor, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      const { fontColor } = this;\r\n      const { fontColorContextMenu } = fontColor;\r\n      const { elPopUp } = fontColorContextMenu;\r\n      ElPopUp.closeAll([elPopUp]);\r\n      if (fontColorContextMenu.isOpen()) {\r\n        fontColorContextMenu.open();\r\n      } else {\r\n        fontColorContextMenu.close();\r\n      }\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n    EventBind.bind(this.fillColor, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      const { fillColor } = this;\r\n      const { fillColorContextMenu } = fillColor;\r\n      const { elPopUp } = fillColorContextMenu;\r\n      ElPopUp.closeAll([elPopUp]);\r\n      if (fillColorContextMenu.isOpen()) {\r\n        fillColorContextMenu.open();\r\n      } else {\r\n        fillColorContextMenu.close();\r\n      }\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n    EventBind.bind(this.border, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      const { border } = this;\r\n      const { borderTypeContextMenu } = border;\r\n      const { elPopUp } = borderTypeContextMenu;\r\n      ElPopUp.closeAll([elPopUp]);\r\n      if (borderTypeContextMenu.isOpen()) {\r\n        borderTypeContextMenu.open();\r\n      } else {\r\n        borderTypeContextMenu.close();\r\n      }\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n    EventBind.bind(this.merge, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      const sheet = sheetView.getActiveSheet();\r\n      const { table } = sheet;\r\n      const { screen, dataSnapshot, merges } = table;\r\n      const screenSelector = screen.findByClass(ScreenSelector);\r\n      const { selectorAttr } = screenSelector;\r\n      if (selectorAttr) {\r\n        const merge = selectorAttr.rect.clone();\r\n        const find = merges.getFirstIncludes(merge.sri, merge.sci);\r\n        if (find !== null) {\r\n          merges.deleteIntersects(find);\r\n        } else if (merge.multiple()) {\r\n          merges.add(merge);\r\n        }\r\n        dataSnapshot.snapshot();\r\n        table.render();\r\n      }\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n    EventBind.bind(this.horizontalAlign, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      const { horizontalAlign } = this;\r\n      const { horizontalContextMenu } = horizontalAlign;\r\n      const { elPopUp } = horizontalContextMenu;\r\n      ElPopUp.closeAll([elPopUp]);\r\n      if (horizontalContextMenu.isOpen()) {\r\n        horizontalContextMenu.open();\r\n      } else {\r\n        horizontalContextMenu.close();\r\n      }\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n    EventBind.bind(this.verticalAlign, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      const { verticalAlign } = this;\r\n      const { verticalContextMenu } = verticalAlign;\r\n      const { elPopUp } = verticalContextMenu;\r\n      ElPopUp.closeAll([elPopUp]);\r\n      if (verticalContextMenu.isOpen()) {\r\n        verticalContextMenu.open();\r\n      } else {\r\n        verticalContextMenu.close();\r\n      }\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n    EventBind.bind(this.textWrapping, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      const { textWrapping } = this;\r\n      const { textWrappingContextMenu } = textWrapping;\r\n      const { elPopUp } = textWrappingContextMenu;\r\n      ElPopUp.closeAll([elPopUp]);\r\n      if (textWrappingContextMenu.isOpen()) {\r\n        textWrappingContextMenu.open();\r\n      } else {\r\n        textWrappingContextMenu.close();\r\n      }\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n  }\r\n\r\n  setUndoStatus() {\r\n    const { body } = this.workTop.work;\r\n    const { sheetView } = body;\r\n    const sheet = sheetView.getActiveSheet();\r\n    const { table } = sheet;\r\n    const { dataSnapshot } = table;\r\n    this.undo.active(dataSnapshot.undo.length() > 1);\r\n  }\r\n\r\n  setRedoStatus() {\r\n    const { body } = this.workTop.work;\r\n    const { sheetView } = body;\r\n    const sheet = sheetView.getActiveSheet();\r\n    const { table } = sheet;\r\n    const { dataSnapshot } = table;\r\n    this.redo.active(!dataSnapshot.redo.isEmpty());\r\n  }\r\n\r\n  setPaintFormatStatus() {\r\n    const { body } = this.workTop.work;\r\n    const { sheetView } = body;\r\n    const sheet = sheetView.getActiveSheet();\r\n    this.paintFormat.active(this.paintFormat.includeSheet(sheet));\r\n  }\r\n\r\n  setFormatStatus() {\r\n    const { body } = this.workTop.work;\r\n    const { sheetView } = body;\r\n    const sheet = sheetView.getActiveSheet();\r\n    const { table } = sheet;\r\n    const { screen, cells } = table;\r\n    const screenSelector = screen.findByClass(ScreenSelector);\r\n    const { selectorAttr } = screenSelector;\r\n    let text = '常规';\r\n    let format = 'default';\r\n    if (selectorAttr) {\r\n      const firstCell = cells.getCellOrNew(selectorAttr.rect.sri, selectorAttr.rect.sci);\r\n      // eslint-disable-next-line prefer-destructuring\r\n      format = firstCell.format;\r\n      switch (format) {\r\n        case 'default':\r\n          text = '常规';\r\n          break;\r\n        case 'text':\r\n          text = '文本';\r\n          break;\r\n        case 'number':\r\n          text = '数字';\r\n          break;\r\n        case 'percentage':\r\n          text = '百分比';\r\n          break;\r\n        case 'fraction':\r\n          text = '分数';\r\n          break;\r\n        case 'ENotation':\r\n          text = '科学计数';\r\n          break;\r\n        case 'rmb':\r\n          text = '人民币';\r\n          break;\r\n        case 'hk':\r\n          text = '港币';\r\n          break;\r\n        case 'dollar':\r\n          text = '美元';\r\n          break;\r\n        case 'date1':\r\n        case 'date2':\r\n        case 'date3':\r\n        case 'date4':\r\n        case 'date5':\r\n          text = '日期';\r\n          break;\r\n        case 'time':\r\n          text = '时间';\r\n          break;\r\n        default: break;\r\n      }\r\n    }\r\n    this.format.setTitle(text);\r\n    this.format.formatContextMenu.setActiveByType(format);\r\n  }\r\n\r\n  setFontStatus() {\r\n    const { body } = this.workTop.work;\r\n    const { sheetView } = body;\r\n    const sheet = sheetView.getActiveSheet();\r\n    const { table } = sheet;\r\n    const { screen, cells } = table;\r\n    const screenSelector = screen.findByClass(ScreenSelector);\r\n    const { selectorAttr } = screenSelector;\r\n    let name = 'Arial';\r\n    if (selectorAttr) {\r\n      const firstCell = cells.getCellOrNew(selectorAttr.rect.sri, selectorAttr.rect.sci);\r\n      // eslint-disable-next-line prefer-destructuring\r\n      name = firstCell.fontAttr.name;\r\n    }\r\n    this.font.setTitle(name);\r\n    this.font.fontContextMenu.setActiveByType(name);\r\n  }\r\n\r\n  setFontSizeStatus() {\r\n    const { body } = this.workTop.work;\r\n    const { sheetView } = body;\r\n    const sheet = sheetView.getActiveSheet();\r\n    const { table } = sheet;\r\n    const { screen, cells } = table;\r\n    const screenSelector = screen.findByClass(ScreenSelector);\r\n    const { selectorAttr } = screenSelector;\r\n    let size = '12';\r\n    if (selectorAttr) {\r\n      const firstCell = cells.getCellOrNew(selectorAttr.rect.sri, selectorAttr.rect.sci);\r\n      // eslint-disable-next-line prefer-destructuring\r\n      size = firstCell.fontAttr.size;\r\n    }\r\n    this.fontSize.setTitle(size);\r\n  }\r\n\r\n  setFontBoldStatus() {\r\n    const { body } = this.workTop.work;\r\n    const { sheetView } = body;\r\n    const sheet = sheetView.getActiveSheet();\r\n    const { table } = sheet;\r\n    const { screen, cells } = table;\r\n    const screenSelector = screen.findByClass(ScreenSelector);\r\n    const { selectorAttr } = screenSelector;\r\n    let bold = false;\r\n    if (selectorAttr) {\r\n      const firstCell = cells.getCellOrNew(selectorAttr.rect.sri, selectorAttr.rect.sci);\r\n      // eslint-disable-next-line prefer-destructuring\r\n      bold = firstCell.fontAttr.bold;\r\n    }\r\n    this.fontBold.active(bold);\r\n  }\r\n\r\n  setFontItalicStatus() {\r\n    const { body } = this.workTop.work;\r\n    const { sheetView } = body;\r\n    const sheet = sheetView.getActiveSheet();\r\n    const { table } = sheet;\r\n    const { screen, cells } = table;\r\n    const screenSelector = screen.findByClass(ScreenSelector);\r\n    const { selectorAttr } = screenSelector;\r\n    let italic = false;\r\n    if (selectorAttr) {\r\n      const firstCell = cells.getCellOrNew(selectorAttr.rect.sri, selectorAttr.rect.sci);\r\n      // eslint-disable-next-line prefer-destructuring\r\n      italic = firstCell.fontAttr.italic;\r\n    }\r\n    this.fontItalic.active(italic);\r\n  }\r\n\r\n  setUnderLineStatus() {\r\n    const { body } = this.workTop.work;\r\n    const { sheetView } = body;\r\n    const sheet = sheetView.getActiveSheet();\r\n    const { table } = sheet;\r\n    const { screen, cells } = table;\r\n    const screenSelector = screen.findByClass(ScreenSelector);\r\n    const { selectorAttr } = screenSelector;\r\n    let underline = false;\r\n    if (selectorAttr) {\r\n      const firstCell = cells.getCellOrNew(selectorAttr.rect.sri, selectorAttr.rect.sci);\r\n      // eslint-disable-next-line prefer-destructuring\r\n      underline = firstCell.fontAttr.underline;\r\n    }\r\n    this.underLine.active(underline);\r\n  }\r\n\r\n  setFontStrikeStatus() {\r\n    const { body } = this.workTop.work;\r\n    const { sheetView } = body;\r\n    const sheet = sheetView.getActiveSheet();\r\n    const { table } = sheet;\r\n    const { screen, cells } = table;\r\n    const screenSelector = screen.findByClass(ScreenSelector);\r\n    const { selectorAttr } = screenSelector;\r\n    let strikethrough = false;\r\n    if (selectorAttr) {\r\n      const firstCell = cells.getCellOrNew(selectorAttr.rect.sri, selectorAttr.rect.sci);\r\n      // eslint-disable-next-line prefer-destructuring\r\n      strikethrough = firstCell.fontAttr.strikethrough;\r\n    }\r\n    this.fontStrike.active(strikethrough);\r\n  }\r\n\r\n  setFontColorStatus() {\r\n    const { body } = this.workTop.work;\r\n    const { sheetView } = body;\r\n    const sheet = sheetView.getActiveSheet();\r\n    const { table } = sheet;\r\n    const { screen, cells } = table;\r\n    const screenSelector = screen.findByClass(ScreenSelector);\r\n    const { selectorAttr } = screenSelector;\r\n    let color = 'rgb(0, 0, 0)';\r\n    if (selectorAttr) {\r\n      const firstCell = cells.getCellOrNew(selectorAttr.rect.sri, selectorAttr.rect.sci);\r\n      // eslint-disable-next-line prefer-destructuring\r\n      color = firstCell.fontAttr.color;\r\n    }\r\n    this.fontColor.setColor(color);\r\n    this.fontColor.fontColorContextMenu.setActiveByColor(color);\r\n  }\r\n\r\n  setFillColorStatus() {\r\n    const { body } = this.workTop.work;\r\n    const { sheetView } = body;\r\n    const sheet = sheetView.getActiveSheet();\r\n    const { table } = sheet;\r\n    const { screen, cells } = table;\r\n    const screenSelector = screen.findByClass(ScreenSelector);\r\n    const { selectorAttr } = screenSelector;\r\n    let color = 'rgb(255, 255, 255)';\r\n    if (selectorAttr) {\r\n      const firstCell = cells.getCellOrNew(selectorAttr.rect.sri, selectorAttr.rect.sci);\r\n      // eslint-disable-next-line prefer-destructuring\r\n      if (firstCell.background) {\r\n        color = firstCell.background;\r\n      }\r\n    }\r\n    this.fillColor.setColor(color);\r\n    this.fillColor.fillColorContextMenu.setActiveByColor(color);\r\n  }\r\n\r\n  setHorizontalAlignStatus() {\r\n    const { body } = this.workTop.work;\r\n    const { sheetView } = body;\r\n    const sheet = sheetView.getActiveSheet();\r\n    const { table } = sheet;\r\n    const { screen, cells } = table;\r\n    const screenSelector = screen.findByClass(ScreenSelector);\r\n    const { selectorAttr } = screenSelector;\r\n    let icon = new Icon('align-left');\r\n    if (selectorAttr) {\r\n      const firstCell = cells.getCellOrNew(selectorAttr.rect.sri, selectorAttr.rect.sci);\r\n      switch (firstCell.fontAttr.align) {\r\n        case ALIGN.left:\r\n          icon = new Icon('align-left');\r\n          break;\r\n        case ALIGN.center:\r\n          icon = new Icon('align-center');\r\n          break;\r\n        case ALIGN.right:\r\n          icon = new Icon('align-right');\r\n          break;\r\n        default: break;\r\n      }\r\n    }\r\n    this.horizontalAlign.setIcon(icon);\r\n  }\r\n\r\n  setVerticalAlignStatus() {\r\n    const { body } = this.workTop.work;\r\n    const { sheetView } = body;\r\n    const sheet = sheetView.getActiveSheet();\r\n    const { table } = sheet;\r\n    const { screen, cells } = table;\r\n    const screenSelector = screen.findByClass(ScreenSelector);\r\n    const { selectorAttr } = screenSelector;\r\n    let icon = new Icon('align-middle');\r\n    if (selectorAttr) {\r\n      const firstCell = cells.getCellOrNew(selectorAttr.rect.sri, selectorAttr.rect.sci);\r\n      switch (firstCell.fontAttr.verticalAlign) {\r\n        case VERTICAL_ALIGN.top:\r\n          icon = new Icon('align-top');\r\n          break;\r\n        case VERTICAL_ALIGN.center:\r\n          icon = new Icon('align-middle');\r\n          break;\r\n        case VERTICAL_ALIGN.bottom:\r\n          icon = new Icon('align-bottom');\r\n          break;\r\n        default: break;\r\n      }\r\n    }\r\n    this.verticalAlign.setIcon(icon);\r\n  }\r\n\r\n  setTextWrappingStatus() {\r\n    const { body } = this.workTop.work;\r\n    const { sheetView } = body;\r\n    const sheet = sheetView.getActiveSheet();\r\n    const { table } = sheet;\r\n    const { screen, cells } = table;\r\n    const screenSelector = screen.findByClass(ScreenSelector);\r\n    const { selectorAttr } = screenSelector;\r\n    let icon = new Icon('text-wrap');\r\n    if (selectorAttr) {\r\n      const firstCell = cells.getCellOrNew(selectorAttr.rect.sri, selectorAttr.rect.sci);\r\n      switch (firstCell.fontAttr.textWrap) {\r\n        case TEXT_WRAP.TRUNCATE:\r\n          icon = new Icon('truncate');\r\n          break;\r\n        case TEXT_WRAP.WORD_WRAP:\r\n          icon = new Icon('text-wrap');\r\n          break;\r\n        case TEXT_WRAP.OVER_FLOW:\r\n        default:\r\n          icon = new Icon('overflow');\r\n          break;\r\n      }\r\n    }\r\n    this.textWrapping.setIcon(icon);\r\n  }\r\n\r\n  setStatus() {\r\n    this.setUndoStatus();\r\n    this.setRedoStatus();\r\n    this.setPaintFormatStatus();\r\n    this.setFormatStatus();\r\n    this.setFontStatus();\r\n    this.setFontSizeStatus();\r\n    this.setFontBoldStatus();\r\n    this.setFontItalicStatus();\r\n    this.setUnderLineStatus();\r\n    this.setFontStrikeStatus();\r\n    this.setFontColorStatus();\r\n    this.setFillColorStatus();\r\n    this.setHorizontalAlignStatus();\r\n    this.setVerticalAlignStatus();\r\n    this.setTextWrappingStatus();\r\n  }\r\n}\r\n\r\nexport { TopMenu };\r\n","import { Widget } from '../../../../lib/Widget';\r\nimport { cssPrefix } from '../../../../config';\r\n\r\nclass Item extends Widget {\r\n  constructor(className) {\r\n    super(`${cssPrefix}-option-item ${className}`);\r\n    this.title = '';\r\n  }\r\n\r\n  setTitle(title) {\r\n    this.title = title;\r\n    this.text(this.title);\r\n  }\r\n}\r\n\r\nexport { Item };\r\n","import { Item } from './base/Item';\r\nimport { cssPrefix } from '../../../config';\r\n\r\nclass File extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-file`);\r\n    this.setTitle('文件');\r\n  }\r\n}\r\n\r\nexport { File };\r\n","import { Item } from './base/Item';\r\nimport { cssPrefix } from '../../../config';\r\n\r\nclass ForMart extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-format`);\r\n    this.setTitle('格式');\r\n  }\r\n}\r\n\r\nexport { ForMart };\r\n","import { Item } from './base/Item';\r\nimport { cssPrefix } from '../../../config';\r\n\r\nclass Insert extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-insert`);\r\n    this.setTitle('插入');\r\n  }\r\n}\r\n\r\nexport { Insert };\r\n","import { Item } from './base/Item';\r\nimport { cssPrefix } from '../../../config';\r\n\r\nclass Look extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-look`);\r\n    this.setTitle('查看');\r\n  }\r\n}\r\n\r\nexport { Look };\r\n","import { Item } from './base/Item';\r\nimport { cssPrefix } from '../../../config';\r\n\r\nclass Update extends Item {\r\n  constructor() {\r\n    super(`${cssPrefix}-tools-update`);\r\n    this.setTitle('修改');\r\n  }\r\n}\r\n\r\nexport { Update };\r\n","import { Widget } from '../../lib/Widget';\r\nimport { cssPrefix } from '../../config';\r\nimport { h } from '../../lib/Element';\r\nimport { File } from './options/File';\r\nimport { ForMart } from './options/ForMart';\r\nimport { Insert } from './options/Insert';\r\nimport { Look } from './options/Look';\r\nimport { Update } from './options/Update';\r\n\r\nclass TopOption extends Widget {\r\n  constructor() {\r\n    super(`${cssPrefix}-option`);\r\n    this.title = ' X-Sheet 工作簿';\r\n    this.logoEle = h('div', `${cssPrefix}-option-logo`);\r\n    this.titleEle = h('div', `${cssPrefix}-option-title`);\r\n    this.optionsEle = h('div', `${cssPrefix}-option-box`);\r\n    this.leftEle = h('div', `${cssPrefix}-option-left`);\r\n    this.rightEle = h('div', `${cssPrefix}-option-right`);\r\n    this.leftEle.children(this.logoEle);\r\n    this.rightEle.children(this.titleEle, this.optionsEle);\r\n    this.children(this.leftEle);\r\n    this.children(this.rightEle);\r\n    this.setTitle(this.title);\r\n    this.file = new File();\r\n    this.format = new ForMart();\r\n    this.insert = new Insert();\r\n    this.look = new Look();\r\n    this.update = new Update();\r\n    this.optionsEle.children(this.file);\r\n    this.optionsEle.children(this.format);\r\n    this.optionsEle.children(this.insert);\r\n    this.optionsEle.children(this.look);\r\n    this.optionsEle.children(this.update);\r\n  }\r\n\r\n  setTitle(title) {\r\n    this.title = title;\r\n    this.titleEle.text(title);\r\n  }\r\n}\r\n\r\nexport { TopOption };\r\n","import { Widget } from '../../lib/Widget';\r\nimport { cssPrefix } from '../../config';\r\nimport { TopMenu } from './TopMenu';\r\nimport { TopOption } from './TopOption';\r\n\r\nclass WorkTop extends Widget {\r\n  constructor(work) {\r\n    super(`${cssPrefix}-work-top`);\r\n    this.work = work;\r\n    this.toolsMenu = new TopMenu(this);\r\n    this.option = new TopOption(this);\r\n    this.children(this.option);\r\n    this.children(this.toolsMenu);\r\n  }\r\n}\r\n\r\nexport { WorkTop };\r\n","import { Element } from '../../Element';\r\nimport { cssPrefix } from '../../../config';\r\nimport { Utils } from '../../../utils/Utils';\r\n\r\nclass VerticalCenterElement extends Element {\r\n  constructor(element, options) {\r\n    super('div', `${cssPrefix}-vertical-center-element`);\r\n    this.options = Utils.mergeDeep({\r\n      style: {},\r\n    }, options);\r\n    this.element = element;\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    this.css(this.options.style);\r\n    this.children(this.element);\r\n  }\r\n}\r\n\r\nexport { VerticalCenterElement };\r\n","import { Element } from '../../Element';\r\nimport { cssPrefix } from '../../../config';\r\nimport { Utils } from '../../../utils/Utils';\r\n\r\nclass VerticalCenter extends Element {\r\n  constructor(options) {\r\n    super('div', `${cssPrefix}-vertical-center`);\r\n    this.options = Utils.mergeDeep({\r\n      centerElements: [],\r\n      style: {},\r\n    }, options);\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    this.css(this.options.style);\r\n    // eslint-disable-next-line no-restricted-syntax\r\n    for (const centerElement of this.options.centerElements) this.children(centerElement);\r\n  }\r\n}\r\n\r\nexport { VerticalCenter };\r\n","class DateUtils {\r\n  static dateFormat(fmt, date) {\r\n    const o = {\r\n      'M+': date.getMonth() + 1,\r\n      'd+': date.getDate(),\r\n      'h+': date.getHours(),\r\n      'm+': date.getMinutes(),\r\n      's+': date.getSeconds(),\r\n      'q+': Math.floor((date.getMonth() + 3) / 3),\r\n      S: date.getMilliseconds(),\r\n    };\r\n    const reYear = /(y+)/;\r\n    const resultYear = reYear.exec(fmt);\r\n    if (resultYear) {\r\n      const yearFormatPart = resultYear[0];\r\n      const yearVal = (date.getFullYear().toString()).substr(4 - yearFormatPart.length);\r\n      // eslint-disable-next-line no-param-reassign\r\n      fmt = fmt.replace(yearFormatPart, yearVal);\r\n    }\r\n    // eslint-disable-next-line guard-for-in,no-restricted-syntax\r\n    for (const k in o) {\r\n      const re = new RegExp(`(${k})`);\r\n      const res = re.exec(fmt);\r\n      if (res) {\r\n        const Val = o[k].toString();\r\n        const formatPart = res[0];\r\n        const replaceVal = (formatPart.length === 1) ? (Val) : ((`00${Val}`).substr(Val.length));\r\n        // eslint-disable-next-line no-param-reassign\r\n        fmt = fmt.replace(formatPart, replaceVal);\r\n      }\r\n    }\r\n    return fmt;\r\n  }\r\n\r\n  static parserToDate(dateText, format) {\r\n    if (!dateText) {\r\n      return null;\r\n    }\r\n    const defaultVal = new Date('1970/01/01 00:00:00');\r\n    const o = [{\r\n      reg: 'y+',\r\n    }, {\r\n      reg: 'M+',\r\n    }, {\r\n      reg: 'd+',\r\n    }, {\r\n      reg: 'h+',\r\n    }, {\r\n      reg: 'm+',\r\n    }, {\r\n      reg: 's+',\r\n    }, {\r\n      reg: 'S',\r\n    }];\r\n    let year = defaultVal.getFullYear();\r\n    let month = defaultVal.getMonth() + 1;\r\n    let day = defaultVal.getDate();\r\n    let hours = defaultVal.getHours();\r\n    let minutes = defaultVal.getMinutes();\r\n    let seconds = defaultVal.getSeconds();\r\n    let milliseconds = defaultVal.getMilliseconds();\r\n    let index = 1;\r\n    for (let j = 0; j < format.length; j += 1) {\r\n      const oneChar = format[j];\r\n      for (let i = 0; i < o.length; i += 1) {\r\n        const onePart = o[i];\r\n        const onePartReg = onePart.reg;\r\n        if (onePartReg[0] === oneChar) {\r\n          if (!onePart.index) {\r\n            onePart.index = index;\r\n            index += 1;\r\n          }\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    for (let i = 0; i < o.length; i += 1) {\r\n      const onePart = o[i];\r\n      const onePartReg = onePart.reg;\r\n      const re = new RegExp(`(${onePartReg})`);\r\n      const res = re.exec(format);\r\n      if (res) {\r\n        const formatPart = res[0];\r\n        const replaceVal = `([0-9]{1,${formatPart.length}})`;\r\n        // eslint-disable-next-line no-param-reassign\r\n        format = format.replace(formatPart, replaceVal);\r\n      }\r\n    }\r\n    const dataInfo = {};\r\n    const re = new RegExp(format);\r\n    const res = re.exec(dateText);\r\n    if (res) {\r\n      for (let i = 1; i < res.length; i += 1) {\r\n        dataInfo[i] = res[i];\r\n      }\r\n    } else {\r\n      return null;\r\n    }\r\n    if (o[0].index) {\r\n      const { index } = o[0];\r\n      year = dataInfo[index];\r\n    }\r\n    if (o[1].index) {\r\n      const { index } = o[1];\r\n      month = dataInfo[index];\r\n    }\r\n    if (o[2].index) {\r\n      const { index } = o[2];\r\n      day = dataInfo[index];\r\n    }\r\n    if (o[3].index) {\r\n      const { index } = o[3];\r\n      hours = dataInfo[index];\r\n    }\r\n    if (o[4].index) {\r\n      const { index } = o[4];\r\n      minutes = dataInfo[index];\r\n    }\r\n    if (o[5].index) {\r\n      const { index } = o[5];\r\n      seconds = dataInfo[index];\r\n    }\r\n    if (o[6].index) {\r\n      const { index } = o[6];\r\n      milliseconds = dataInfo[index];\r\n    }\r\n    return new Date(year, month - 1, day, hours, minutes, seconds, milliseconds);\r\n  }\r\n}\r\n\r\nexport { DateUtils };\r\n","import { Utils } from '../../utils/Utils';\r\nimport { DateUtils } from '../../utils/DateUtils';\r\n\r\nfunction parserToDate(text) {\r\n  let result = DateUtils.parserToDate(text, 'yyyy/MM/dd hh:mm:ss');\r\n  if (result) return result;\r\n  result = DateUtils.parserToDate(text, 'yyyy/MM/dd');\r\n  if (result) return result;\r\n  result = DateUtils.parserToDate(text, 'hh:mm:ss');\r\n  if (result) return result;\r\n  result = DateUtils.parserToDate(text, 'MM月dd日');\r\n  if (result) return result;\r\n  result = DateUtils.parserToDate(text, 'yyyy年MM月');\r\n  if (result) return result;\r\n  result = DateUtils.parserToDate(text, 'yyyy年MM月dd日');\r\n  if (result) return result;\r\n  return null;\r\n}\r\n\r\nclass Format {\r\n\r\n  default(value) {\r\n    return value;\r\n  }\r\n\r\n  text(value) {\r\n    return value;\r\n  }\r\n\r\n  number(value) {\r\n    if (Utils.isNumber(value)) {\r\n      if (value.toString().indexOf('.') !== -1) {\r\n        const lastIndex = value.toString().lastIndexOf('.') + 1;\r\n        return value.toString().substring(0, lastIndex + 2);\r\n      }\r\n      return `${value}.00`;\r\n    }\r\n    return value;\r\n  }\r\n\r\n  percentage(value) {\r\n    if (Utils.isNumber(value)) {\r\n      return `${value}%`;\r\n    }\r\n    return value;\r\n  }\r\n\r\n  fraction(value) {\r\n    if (Utils.isFraction(value)) {\r\n      const left = value.split('/')[0];\r\n      const right = value.split('/')[1];\r\n      return Utils.parseInt(left) / Utils.parseInt(right);\r\n    }\r\n    return value;\r\n  }\r\n\r\n  ENotation(value) {\r\n    if (Utils.isNumber(value)) {\r\n      const number = Utils.parseFloat(value);\r\n      return number.toExponential(2);\r\n    }\r\n    return value;\r\n  }\r\n\r\n  rmb(value) {\r\n    if (Utils.isNumber(value)) {\r\n      return `￥${value}`;\r\n    }\r\n    return value;\r\n  }\r\n\r\n  hk(value) {\r\n    if (Utils.isNumber(value)) {\r\n      return `HK${value}`;\r\n    }\r\n    return value;\r\n  }\r\n\r\n  dollar(value) {\r\n    if (Utils.isNumber(value)) {\r\n      return `$${value}`;\r\n    }\r\n    return value;\r\n  }\r\n\r\n  date1(value) {\r\n    const result = parserToDate(value);\r\n    if (result) return DateUtils.dateFormat('yyyy/MM/dd', result);\r\n    return value;\r\n  }\r\n\r\n  date2(value) {\r\n    const result = parserToDate(value);\r\n    if (result) return DateUtils.dateFormat('MM月dd日', result);\r\n    return value;\r\n  }\r\n\r\n  date3(value) {\r\n    const result = parserToDate(value);\r\n    if (result) return DateUtils.dateFormat('yyyy年MM月', result);\r\n    return value;\r\n  }\r\n\r\n  date4(value) {\r\n    const result = parserToDate(value);\r\n    if (result) return DateUtils.dateFormat('yyyy年MM月dd日', result);\r\n    return value;\r\n  }\r\n\r\n  date5(value) {\r\n    const result = parserToDate(value);\r\n    if (result) return DateUtils.dateFormat('yyyy/MM/dd hh:mm:ss', result);\r\n    return value;\r\n  }\r\n\r\n  time(value) {\r\n    const result = parserToDate(value);\r\n    if (result) return DateUtils.dateFormat('hh:mm:ss', result);\r\n    return value;\r\n  }\r\n}\r\n\r\nconst format = new Format();\r\n\r\nexport default (type, value) => format[type](value);\r\n","import { Utils } from '../../utils/Utils';\r\n\r\nclass Rows {\r\n\r\n  constructor({ data = [], len = 10, height }) {\r\n    this._ = [];\r\n    this.minHeight = 5;\r\n    this.height = Utils.minIf(height, this.minHeight);\r\n    this.len = len;\r\n    this.cacheTotalHeight = -1;\r\n    this.setData(data);\r\n  }\r\n\r\n  get(ri) {\r\n    return this._[ri];\r\n  }\r\n\r\n  getOrNew(ri) {\r\n    this._[ri] = this._[ri] || {};\r\n    return this._[ri];\r\n  }\r\n\r\n  getHeight(ri) {\r\n    const row = this.get(ri);\r\n    if (row && row.height) {\r\n      return row.height;\r\n    }\r\n    return this.height;\r\n  }\r\n\r\n  setHeight(ri, height) {\r\n    const row = this.getOrNew(ri);\r\n    row.height = Utils.minIf(height, this.minHeight);\r\n    this.cacheTotalHeight = -1;\r\n  }\r\n\r\n  eachHeight(ri, ei, cb, sy = 0) {\r\n    let y = sy;\r\n    for (let i = ri; i <= ei; i += 1) {\r\n      const rowHeight = this.getHeight(i);\r\n      cb(i, rowHeight, y);\r\n      y += rowHeight;\r\n    }\r\n  }\r\n\r\n  sectionSumHeight(sri, eri) {\r\n    return Utils.rangeSum(sri, eri + 1, i => this.getHeight(i));\r\n  }\r\n\r\n  rectRangeSumHeight(rectRange) {\r\n    return this.sectionSumHeight(rectRange.sri, rectRange.eri);\r\n  }\r\n\r\n  totalHeight() {\r\n    if (this.cacheTotalHeight === -1) {\r\n      this.cacheTotalHeight = Utils.rangeSum(0, this.len, i => this.getHeight(i));\r\n    }\r\n    return this.cacheTotalHeight;\r\n  }\r\n\r\n  getData() {\r\n    return this._;\r\n  }\r\n\r\n  setData(data) {\r\n    this._ = data;\r\n  }\r\n}\r\n\r\nexport { Rows };\r\n","import { Utils } from '../../utils/Utils';\r\n\r\nclass Cols {\r\n\r\n  constructor({ data = [], len = 10, width }) {\r\n    this._ = [];\r\n    this.minWidth = 5;\r\n    this.width = Utils.minIf(width, this.minWidth);\r\n    this.len = len;\r\n    this.cacheTotalWidth = -1;\r\n    this.setData(data);\r\n  }\r\n\r\n  get(ci) {\r\n    return this._[ci];\r\n  }\r\n\r\n  getOrNew(ci) {\r\n    this._[ci] = this._[ci] || {};\r\n    return this._[ci];\r\n  }\r\n\r\n  getWidth(i) {\r\n    const col = this._[i];\r\n    if (col && col.width) {\r\n      return col.width;\r\n    }\r\n    return this.width;\r\n  }\r\n\r\n  setWidth(i, width) {\r\n    const col = this.getOrNew(i);\r\n    col.width = Utils.minIf(width, this.minWidth);\r\n    this.cacheTotalWidth = -1;\r\n  }\r\n\r\n  eachWidth(ci, ei, cb, sx = 0) {\r\n    let x = sx;\r\n    for (let i = ci; i <= ei; i += 1) {\r\n      const colWidth = this.getWidth(i);\r\n      cb(i, colWidth, x);\r\n      x += colWidth;\r\n    }\r\n  }\r\n\r\n  sectionSumWidth(sci, eci) {\r\n    return Utils.rangeSum(sci, eci + 1, i => this.getWidth(i));\r\n  }\r\n\r\n  rectRangeSumWidth(rectRange) {\r\n    return this.sectionSumWidth(rectRange.sci, rectRange.eci);\r\n  }\r\n\r\n  totalWidth() {\r\n    if (this.cacheTotalWidth === -1) {\r\n      this.cacheTotalWidth = Utils.rangeSum(0, this.len, i => this.getWidth(i));\r\n    }\r\n    return this.cacheTotalWidth;\r\n  }\r\n\r\n  getData() {\r\n    return this._;\r\n  }\r\n\r\n  setData(data) {\r\n    this._ = data;\r\n  }\r\n}\r\n\r\nexport { Cols };\r\n","class Scroll {\r\n\r\n  constructor(table) {\r\n    this.table = table;\r\n    this.x = 0; // left\r\n    this.y = 0; // top\r\n    this.ri = table.fixed.fxTop + 1; // cell row-index\r\n    this.ci = table.fixed.fxLeft + 1; // cell col-index\r\n  }\r\n}\r\n\r\nexport { Scroll };\r\n","class Fixed {\r\n\r\n  constructor(fixed = { fxTop: -1, fxLeft: -1 }) {\r\n    this.fxTop = fixed.fxTop;\r\n    this.fxLeft = fixed.fxLeft;\r\n  }\r\n}\r\n\r\nexport { Fixed };\r\n","import { RectRange } from './RectRange';\r\n\r\nclass Merges {\r\n\r\n  /**\r\n   *  Merges\r\n   * @param {RectRange[]} data 区域数组\r\n   */\r\n  constructor({ data = [] }) {\r\n    this._ = [];\r\n    this.setData(data);\r\n  }\r\n\r\n  /**\r\n   * 遍历所有区域\r\n   * @param {Function} cb 回调函数\r\n   */\r\n  forEach(cb) {\r\n    this._.forEach(cb);\r\n  }\r\n\r\n  /**\r\n   * 删除区域数组中被指定区域包含的区域\r\n   * @param {RectRange} cr 区域\r\n   */\r\n  deleteWithin(cr) {\r\n    this._ = this._.filter(it => !it.within(cr));\r\n  }\r\n\r\n  /**\r\n   * 返回区域数组中第一个包含指定行和列的区域\r\n   * @param {int} ri 行索引\r\n   * @param {int} ci  列索引\r\n   * @returns {*}\r\n   */\r\n  getFirstIncludes(ri, ci) {\r\n    for (let i = 0; i < this._.length; i += 1) {\r\n      const it = this._[i];\r\n      if (it.includes(ri, ci)) {\r\n        return it;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * 返回新的合并实例,同时剔除原来的合并实例区域数组中不和指定区域发生重合的区域\r\n   * @param {RectRange} cellRange 区域\r\n   * @returns {Merges}\r\n   */\r\n  filterIntersects(cellRange) {\r\n    return new Merges(this._.filter(it => it.intersects(cellRange)));\r\n  }\r\n\r\n  /**\r\n   * 判断区域数组中是否存在和指定区域发生重合的区域\r\n   * @param {RectRange} cellRange 区域\r\n   * @returns {boolean}\r\n   */\r\n  intersects(cellRange) {\r\n    for (let i = 0; i < this._.length; i += 1) {\r\n      const it = this._[i];\r\n      if (it.intersects(cellRange)) {\r\n        // console.log('intersects');\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  deleteIntersects(cellRange) {\r\n    for (let i = 0; i < this._.length; i += 1) {\r\n      const it = this._[i];\r\n      if (it.intersects(cellRange)) {\r\n        this._.splice(i, 1);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 返回区域数组中和指定区域发生重合的新区域\r\n   * @param {RectRange} cellRange 区域\r\n   * @returns {*}\r\n   */\r\n  union(cellRange) {\r\n    let cr = cellRange;\r\n    const filter = [];\r\n    for (let i = 0; i < this._.length; i += 1) {\r\n      const item = this._[i];\r\n      if (filter.find(e => e === item)) {\r\n        continue;\r\n      }\r\n      if (item.intersects(cr)) {\r\n        filter.push(item);\r\n        cr = item.union(cr);\r\n        i = -1;\r\n      }\r\n    }\r\n    return cr;\r\n  }\r\n\r\n  /**\r\n   * 添加一个新的区域, 并且删除区域数组中被新区域包含的区域\r\n   * @param {RectRange} cr 区域\r\n   */\r\n  add(cr) {\r\n    this.deleteWithin(cr);\r\n    this._.push(cr);\r\n  }\r\n\r\n  /**\r\n   * 区域数组中和指定区域发生重合的区域移动指定的行和列\r\n   * @param {RectRange} cellRange 区域\r\n   * @param {int} rn 增加的行索引\r\n   * @param {int} cn 增加的列索引\r\n   */\r\n  move(cellRange, rn, cn) {\r\n    this._.forEach((it1) => {\r\n      const it = it1;\r\n      if (it.within(cellRange)) {\r\n        it.eri += rn;\r\n        it.sri += rn;\r\n        it.sci += cn;\r\n        it.eci += cn;\r\n      }\r\n    });\r\n  }\r\n\r\n  // type: row | column\r\n  shift(type, index, n, cbWithin) {\r\n    this._.forEach((cellRange) => {\r\n      const {\r\n        sri, sci, eri, eci,\r\n      } = cellRange;\r\n      const range = cellRange;\r\n      if (type === 'row') {\r\n        if (sri >= index) {\r\n          range.sri += n;\r\n          range.eri += n;\r\n        } else if (sri < index && index <= eri) {\r\n          range.eri += n;\r\n          cbWithin(sri, sci, n, 0);\r\n        }\r\n      } else if (type === 'column') {\r\n        if (sci >= index) {\r\n          range.sci += n;\r\n          range.eci += n;\r\n        } else if (sci < index && index <= eci) {\r\n          range.eci += n;\r\n          cbWithin(sri, sci, 0, n);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  setData(merges = []) {\r\n    this._ = merges.map(merge => RectRange.valueOf(merge));\r\n    return this;\r\n  }\r\n\r\n  getData() {\r\n    return this._.map(merge => merge.toString());\r\n  }\r\n}\r\n\r\nexport { Merges };\r\n\r\nexport default Merges;\r\n","import { Widget } from '../../../lib/Widget';\r\nimport { cssPrefix } from '../../../config';\r\n\r\nclass ScreenElement extends Widget {\r\n  constructor(className) {\r\n    super(`${cssPrefix}-screen-element ${className}`);\r\n    this.widgets = [];\r\n  }\r\n\r\n  addWidget(widget) {\r\n    this.widgets.push(widget);\r\n    this.children(widget);\r\n  }\r\n}\r\n\r\nexport { ScreenElement };\r\n","/* global window */\r\n\r\nimport { ScreenElement } from './ScreenElement';\r\nimport { Widget } from '../../../lib/Widget';\r\nimport { cssPrefix } from '../../../config';\r\nimport { Constant } from '../../../utils/Constant';\r\nimport { EventBind } from '../../../utils/EventBind';\r\n\r\nclass Screen extends Widget {\r\n  constructor(table) {\r\n    super(`${cssPrefix}-screen`);\r\n    this.table = table;\r\n    this.lt = new ScreenElement(`${cssPrefix}-screen-element-lt`);\r\n    this.t = new ScreenElement(`${cssPrefix}-screen-element-t`);\r\n    this.l = new ScreenElement(`${cssPrefix}-screen-element-l`);\r\n    this.br = new ScreenElement(`${cssPrefix}-screen-element-br`);\r\n    this.focusWidget = null;\r\n    this.children(this.lt, this.t, this.l, this.br);\r\n    this.widgets = [];\r\n  }\r\n\r\n  init() {\r\n    this.setDivideLayer();\r\n    this.bind();\r\n  }\r\n\r\n  bind() {\r\n    const { table } = this;\r\n    EventBind.bind(window, Constant.SYSTEM_EVENT_TYPE.RESIZE, () => {\r\n      this.setDivideLayer();\r\n    });\r\n    EventBind.bind(table, Constant.TABLE_EVENT_TYPE.CHANGE_HEIGHT, (e) => {\r\n      this.setDivideLayer();\r\n      e.stopPropagation();\r\n    });\r\n    EventBind.bind(table, Constant.TABLE_EVENT_TYPE.CHANGE_WIDTH, (e) => {\r\n      this.setDivideLayer();\r\n      e.stopPropagation();\r\n    });\r\n  }\r\n\r\n  addWidget(widget) {\r\n    this.widgets.push(widget);\r\n    this.lt.addWidget(widget.getLT(this));\r\n    this.t.addWidget(widget.getT(this));\r\n    this.l.addWidget(widget.getL(this));\r\n    this.br.addWidget(widget.getBR(this));\r\n  }\r\n\r\n  setDivideLayer() {\r\n    const { table } = this;\r\n    const { settings, grid } = table;\r\n    const { index } = settings;\r\n    const fixedWidth = table.getFixedWidth();\r\n    const fixedHeight = table.getFixedHeight();\r\n    const brLeft = index.width + fixedWidth;\r\n    const brTop = index.height + fixedHeight;\r\n    this.br.offset({ left: brLeft, top: brTop });\r\n    if (fixedWidth > 0 && fixedHeight > 0) {\r\n      this.lt.offset({\r\n        left: index.width, top: index.height, width: fixedWidth, height: fixedHeight,\r\n      }).show();\r\n      this.lt.css('border-width', `${grid.lineWidth()}px`);\r\n    } else {\r\n      this.lt.hide();\r\n    }\r\n    if (fixedWidth > 0) {\r\n      this.l.offset({ left: index.width, top: brTop, width: fixedWidth }).show();\r\n      this.l.css('border-width', `${grid.lineWidth()}px`);\r\n    } else {\r\n      this.l.hide();\r\n    }\r\n    if (fixedHeight > 0) {\r\n      this.t.offset({ left: brLeft, top: index.height, height: fixedHeight }).show();\r\n      this.t.css('border-width', `${grid.lineWidth()}px`);\r\n    } else {\r\n      this.t.hide();\r\n    }\r\n  }\r\n\r\n  findByClass(clazz) {\r\n    let find = null;\r\n    this.widgets.forEach((item) => {\r\n      if (item instanceof clazz) {\r\n        find = item;\r\n        return false;\r\n      }\r\n      return true;\r\n    });\r\n    return find;\r\n  }\r\n}\r\n\r\nexport { Screen };\r\n","/* global document */\r\n\r\nimport { Widget } from '../../../lib/Widget';\r\nimport { cssPrefix } from '../../../config';\r\nimport { h } from '../../../lib/Element';\r\nimport { EventBind } from '../../../utils/EventBind';\r\nimport { Constant } from '../../../utils/Constant';\r\nimport { Utils } from '../../../utils/Utils';\r\nimport { floor } from '../../../canvas/Draw';\r\n\r\nclass XReSizer extends Widget {\r\n  constructor(table, options = { width: 5 }) {\r\n    super(`${cssPrefix}-re-sizer-horizontal`);\r\n    this.table = table;\r\n    this.options = options;\r\n    this.width = options.width;\r\n    this.hoverEl = h('div', `${cssPrefix}-re-sizer-hover`);\r\n    this.lineEl = h('div', `${cssPrefix}-re-sizer-line`);\r\n    this.children(...[\r\n      this.hoverEl,\r\n      this.lineEl,\r\n    ]);\r\n    this.bind();\r\n  }\r\n\r\n  getEventLeft(event) {\r\n    const { table } = this;\r\n    const {\r\n      settings, cols, fixed, scroll,\r\n    } = table;\r\n    const { index } = settings;\r\n    const { x, y } = table.computeEventXy(event);\r\n    const { ri, ci } = table.getRiCiByXy(x, y);\r\n    if (ri !== -1) {\r\n      return {\r\n        left: -1,\r\n        x,\r\n        y,\r\n        ri,\r\n        ci,\r\n      };\r\n    }\r\n    let left = index.width + cols.sectionSumWidth(0, ci);\r\n    if (ci > fixed.fxLeft) {\r\n      left -= scroll.x;\r\n    }\r\n    return {\r\n      left,\r\n      x,\r\n      y,\r\n      ri,\r\n      ci,\r\n    };\r\n  }\r\n\r\n  bind() {\r\n    const { table } = this;\r\n    const { settings, cols, mousePointType } = table;\r\n    const { index } = settings;\r\n    let moveOff = false;\r\n    EventBind.bind(this, Constant.SYSTEM_EVENT_TYPE.MOUSE_MOVE, (e) => {\r\n      mousePointType.set('col-resize', 'XReSizer');\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n    EventBind.bind(this, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      moveOff = true;\r\n      mousePointType.on(['XReSizer']);\r\n      mousePointType.set('col-resize', 'XReSizer');\r\n      const { left, ci } = this.getEventLeft(e);\r\n      const min = left - cols.getWidth(ci) + cols.minWidth;\r\n      let { x: mx } = table.computeEventXy(e);\r\n      // console.log('left >>>', left + index.width);\r\n      // console.log('min >>>', min);\r\n      EventBind.mouseMoveUp(document, (e) => {\r\n        ({ x: mx } = table.computeEventXy(e));\r\n        // console.log('mx >>>', mx);\r\n        mx -= this.width / 2;\r\n        mx = floor(Utils.minIf(mx, min));\r\n        this.css('left', `${mx}px`);\r\n        this.lineEl.css('height', `${table.visualHeight()}px`);\r\n        this.lineEl.show();\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n      }, (e) => {\r\n        moveOff = false;\r\n        mousePointType.off();\r\n        this.lineEl.hide();\r\n        this.css('left', `${mx}px`);\r\n        const { y } = table.computeEventXy(e);\r\n        if (y <= 0) {\r\n          this.hide();\r\n        }\r\n        const newLeft = mx - (left - cols.getWidth(ci)) + this.width;\r\n        table.setWidth(ci, newLeft);\r\n      });\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n    EventBind.bind(table, Constant.SYSTEM_EVENT_TYPE.MOUSE_MOVE, (e) => {\r\n      if (moveOff) return;\r\n      // eslint-disable-next-line prefer-const\r\n      let { left, ci } = this.getEventLeft(e);\r\n      const min = left - cols.getWidth(ci) + cols.minWidth;\r\n      const visualWidth = table.visualWidth();\r\n      // console.log('left >>>', left);\r\n      // console.log('visualWidth', visualWidth);\r\n      if (left > visualWidth) {\r\n        left = visualWidth;\r\n      }\r\n      if (left === -1 || min > visualWidth || ci === -1) {\r\n        this.hide();\r\n      } else {\r\n        this.show();\r\n        this.css('left', `${left - this.width}px`);\r\n        this.hoverEl.css('width', `${this.width}px`);\r\n        this.hoverEl.css('height', `${index.height}px`);\r\n      }\r\n    });\r\n    EventBind.bind(table, Constant.SYSTEM_EVENT_TYPE.MOUSE_LEAVE, () => {\r\n      if (moveOff) return;\r\n      this.hide();\r\n    });\r\n  }\r\n}\r\n\r\nexport { XReSizer };\r\n","/* global document */\r\n\r\nimport { Widget } from '../../../lib/Widget';\r\nimport { cssPrefix } from '../../../config';\r\nimport { h } from '../../../lib/Element';\r\nimport { EventBind } from '../../../utils/EventBind';\r\nimport { Constant } from '../../../utils/Constant';\r\nimport { Utils } from '../../../utils/Utils';\r\nimport { floor } from '../../../canvas/Draw';\r\n\r\nclass YReSizer extends Widget {\r\n  constructor(table, options = { height: 5 }) {\r\n    super(`${cssPrefix}-re-sizer-vertical`);\r\n    this.table = table;\r\n    this.options = options;\r\n    this.height = options.height;\r\n    this.hoverEl = h('div', `${cssPrefix}-re-sizer-hover`);\r\n    this.lineEl = h('div', `${cssPrefix}-re-sizer-line`);\r\n    this.children(...[\r\n      this.hoverEl,\r\n      this.lineEl,\r\n    ]);\r\n    this.bind();\r\n  }\r\n\r\n  getEventTop(event) {\r\n    const { table } = this;\r\n    const {\r\n      settings, rows, fixed, scroll,\r\n    } = table;\r\n    const { index } = settings;\r\n    const { x, y } = table.computeEventXy(event);\r\n    const { ri, ci } = table.getRiCiByXy(x, y);\r\n    if (ci !== -1) {\r\n      return {\r\n        top: -1,\r\n        x,\r\n        y,\r\n        ri,\r\n        ci,\r\n      };\r\n    }\r\n    let top = index.height + rows.sectionSumHeight(0, ri);\r\n    if (ri > fixed.fxTop) {\r\n      top -= scroll.y;\r\n    }\r\n    return {\r\n      top,\r\n      x,\r\n      y,\r\n      ri,\r\n      ci,\r\n    };\r\n  }\r\n\r\n  bind() {\r\n    const { table } = this;\r\n    const { settings, rows, mousePointType } = table;\r\n    const { index } = settings;\r\n    let moveOff = false;\r\n    EventBind.bind(this, Constant.SYSTEM_EVENT_TYPE.MOUSE_MOVE, (e) => {\r\n      mousePointType.set('row-resize', 'YReSizer');\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n    EventBind.bind(this, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      moveOff = true;\r\n      mousePointType.on(['YReSizer']);\r\n      mousePointType.set('row-resize', 'YReSizer');\r\n      const { top, ri } = this.getEventTop(e);\r\n      const min = top - rows.getHeight(ri) + rows.minHeight;\r\n      let { y: my } = table.computeEventXy(e);\r\n      EventBind.mouseMoveUp(document, (e) => {\r\n        ({ y: my } = table.computeEventXy(e));\r\n        // console.log('my >>>', my);\r\n        my -= this.height / 2;\r\n        my = floor(Utils.minIf(my, min));\r\n        this.css('top', `${my}px`);\r\n        this.lineEl.css('width', `${table.visualWidth()}px`);\r\n        this.lineEl.show();\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n      }, (e) => {\r\n        moveOff = false;\r\n        mousePointType.off();\r\n        this.lineEl.hide();\r\n        this.css('top', `${my}px`);\r\n        const { x } = table.computeEventXy(e);\r\n        if (x <= 0) {\r\n          this.hide();\r\n        }\r\n        const newTop = my - (top - rows.getHeight(ri)) + this.height;\r\n        table.setHeight(ri, newTop);\r\n      });\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n    EventBind.bind(table, Constant.SYSTEM_EVENT_TYPE.MOUSE_MOVE, (e) => {\r\n      if (moveOff) return;\r\n      // eslint-disable-next-line prefer-const\r\n      let { top, ri } = this.getEventTop(e);\r\n      const min = top - rows.getHeight(ri) + rows.minHeight;\r\n      const visualHeight = table.visualHeight();\r\n      // console.log('top >>>', top);\r\n      // console.log('visualHeight >>>', visualHeight);\r\n      // console.log('min >>>', min);\r\n      if (top > visualHeight) {\r\n        top = visualHeight;\r\n      }\r\n      if (top === -1 || min > visualHeight || ri === -1) {\r\n        this.hide();\r\n      } else {\r\n        this.show();\r\n        this.css('top', `${top - this.height}px`);\r\n        this.hoverEl.css('width', `${index.width}px`);\r\n        this.hoverEl.css('height', `${this.height}px`);\r\n      }\r\n    });\r\n    EventBind.bind(table, Constant.SYSTEM_EVENT_TYPE.MOUSE_LEAVE, () => {\r\n      if (moveOff) return;\r\n      this.hide();\r\n    });\r\n  }\r\n}\r\n\r\nexport { YReSizer };\r\n","import cell from '../../../assets/svg/cell.png';\r\nimport sResize from '../../../assets/svg/s-resize.png';\r\nimport eResize from '../../../assets/svg/e-resize.png';\r\n\r\nclass MousePointType {\r\n\r\n  constructor(table) {\r\n    this.table = table;\r\n    this.switch = false;\r\n    this.ignoreNames = [];\r\n  }\r\n\r\n  on(ignoredNames) {\r\n    this.switch = true;\r\n    this.ignoreNames = this.ignoreNames.concat(ignoredNames);\r\n  }\r\n\r\n  set(type, name) {\r\n    if (this.switch && this.ignoreNames.indexOf(name) === -1) return;\r\n    const { table } = this;\r\n    switch (type) {\r\n      case 'cell':\r\n        table.css('cursor', `url(${cell}) 7.5 7.5,auto`);\r\n        break;\r\n      case 's-resize':\r\n        table.css('cursor', `url(${sResize}) 2.5 7.5,auto`);\r\n        break;\r\n      case 'e-resize':\r\n        table.css('cursor', `url(${eResize}) 7.5 2.5,auto`);\r\n        break;\r\n      default:\r\n        table.css('cursor', type);\r\n        break;\r\n    }\r\n  }\r\n\r\n  off() {\r\n    this.switch = false;\r\n    this.ignoreNames = [];\r\n  }\r\n}\r\n\r\nexport { MousePointType };\r\n","import { cssPrefix } from '../../../config';\r\nimport { Widget } from '../../../lib/Widget';\r\nimport { h } from '../../../lib/Element';\r\n\r\nclass AutoFill extends Widget {\r\n  constructor() {\r\n    super(`${cssPrefix}-autofill`);\r\n    this.areaEl = h('div', `${cssPrefix}-autofill-area`);\r\n    this.children(this.areaEl);\r\n    this.hide();\r\n  }\r\n}\r\n\r\nexport { AutoFill };\r\n","/* global document */\r\n\r\nimport { ScreenWidget } from '../screen/ScreenWidget';\r\nimport { AutoFill } from './AutoFill';\r\nimport { ScreenSelector } from '../selector/ScreenSelector';\r\nimport { EventBind } from '../../../utils/EventBind';\r\nimport { Constant } from '../../../utils/Constant';\r\nimport { RectRange } from '../RectRange';\r\nimport { Utils } from '../../../utils/Utils';\r\n\r\nclass ScreenAutoFill extends ScreenWidget {\r\n  constructor(screen, options = {}) {\r\n    super(screen);\r\n    this.options = Utils.mergeDeep({\r\n      mergeForceSplit: false,\r\n      onBeforeAutoFill: () => {},\r\n      onAfterAutoFill: () => {},\r\n    }, options);\r\n    this.lt = new AutoFill();\r\n    this.t = new AutoFill();\r\n    this.l = new AutoFill();\r\n    this.br = new AutoFill();\r\n    this.autoFillAttr = null;\r\n    this.screenSelector = screen.findByClass(ScreenSelector);\r\n    this.bind();\r\n  }\r\n\r\n  bind() {\r\n    const { screen, screenSelector } = this;\r\n    const { table } = screen;\r\n    const { mousePointType } = table;\r\n    EventBind.bind([\r\n      screenSelector.lt.cornerEl,\r\n      screenSelector.t.cornerEl,\r\n      screenSelector.l.cornerEl,\r\n      screenSelector.br.cornerEl,\r\n    ], Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e1) => {\r\n      mousePointType.on(['autoFill']);\r\n      mousePointType.set('crosshair', 'autoFill');\r\n      EventBind.mouseMoveUp(document, (e2) => {\r\n        const { x, y } = table.computeEventXy(e2);\r\n        const moveAutoFill = this.getMoveAutoFillAttr(x, y);\r\n        if (moveAutoFill) {\r\n          // console.log('moveAutoFill>>>', moveAutoFill);\r\n          this.setOffset(moveAutoFill);\r\n        } else {\r\n          this.lt.hide();\r\n          this.t.hide();\r\n          this.l.hide();\r\n          this.br.hide();\r\n        }\r\n        this.autoFillAttr = moveAutoFill;\r\n        e2.stopPropagation();\r\n        e2.preventDefault();\r\n      }, () => {\r\n        mousePointType.off();\r\n        this.lt.hide();\r\n        this.t.hide();\r\n        this.l.hide();\r\n        this.br.hide();\r\n        if (this.autoFillAttr) {\r\n          this.autoFillTo();\r\n          table.render();\r\n        }\r\n      });\r\n      e1.stopPropagation();\r\n      e1.preventDefault();\r\n    });\r\n    EventBind.bind([\r\n      screenSelector.lt.cornerEl,\r\n      screenSelector.t.cornerEl,\r\n      screenSelector.l.cornerEl,\r\n      screenSelector.br.cornerEl,\r\n    ], Constant.SYSTEM_EVENT_TYPE.MOUSE_MOVE, (e) => {\r\n      mousePointType.set('crosshair', 'autoFill');\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n  }\r\n\r\n  setLTOffset(autoFillAttr) {\r\n    const { screen } = this;\r\n    const { table } = screen;\r\n    const { frozenLeftTop, cols, rows } = table;\r\n    const viewRange = frozenLeftTop.getScrollViewRange();\r\n    const { rect } = autoFillAttr;\r\n    const empty = new RectRange(-1, -1, -1, -1);\r\n    const coincideRange = rect.coincide(viewRange);\r\n    if (empty.equals(coincideRange)) {\r\n      this.lt.hide();\r\n      return;\r\n    }\r\n    const width = cols.sectionSumWidth(coincideRange.sci, coincideRange.eci);\r\n    const height = rows.sectionSumHeight(coincideRange.sri, coincideRange.eri);\r\n    const top = rows.sectionSumHeight(viewRange.sri, coincideRange.sri - 1);\r\n    const left = cols.sectionSumWidth(viewRange.sci, coincideRange.sci - 1);\r\n    if (rect.eci > viewRange.eci) {\r\n      this.lt.areaEl.css('border-right', 'none');\r\n    } else {\r\n      this.lt.areaEl.cssRemoveKeys('border-right');\r\n    }\r\n    if (rect.eri > viewRange.eri) {\r\n      this.lt.areaEl.css('border-bottom', 'none');\r\n    } else {\r\n      this.lt.areaEl.cssRemoveKeys('border-bottom');\r\n    }\r\n    this.lt.offset({\r\n      width,\r\n      height,\r\n      left,\r\n      top,\r\n    }).show();\r\n  }\r\n\r\n  setTOffset(autoFillAttr) {\r\n    const { screen } = this;\r\n    const { table } = screen;\r\n    const { fixedTop, cols, rows } = table;\r\n    const viewRange = fixedTop.getScrollViewRange();\r\n    const { rect } = autoFillAttr;\r\n    const empty = new RectRange(-1, -1, -1, -1);\r\n    const coincideRange = rect.coincide(viewRange);\r\n    if (empty.equals(coincideRange)) {\r\n      this.t.hide();\r\n      return;\r\n    }\r\n    const width = cols.sectionSumWidth(coincideRange.sci, coincideRange.eci);\r\n    const height = rows.sectionSumHeight(coincideRange.sri, coincideRange.eri);\r\n    const top = rows.sectionSumHeight(viewRange.sri, coincideRange.sri - 1);\r\n    const left = cols.sectionSumWidth(viewRange.sci, coincideRange.sci - 1);\r\n    if (rect.sci < viewRange.sci) {\r\n      this.t.areaEl.css('border-left', 'none');\r\n    } else {\r\n      this.t.areaEl.cssRemoveKeys('border-left');\r\n    }\r\n    if (rect.eri > viewRange.eri) {\r\n      this.t.areaEl.css('border-bottom', 'none');\r\n    } else {\r\n      this.t.areaEl.cssRemoveKeys('border-bottom');\r\n    }\r\n    if (rect.eci > viewRange.eci) {\r\n      this.t.areaEl.css('border-right', 'none');\r\n    } else {\r\n      this.t.areaEl.cssRemoveKeys('border-right');\r\n    }\r\n    this.t.offset({\r\n      width,\r\n      height,\r\n      left,\r\n      top,\r\n    }).show();\r\n  }\r\n\r\n  setLOffset(autoFillAttr) {\r\n    const { screen } = this;\r\n    const { table } = screen;\r\n    const { fixedLeft, cols, rows } = table;\r\n    const viewRange = fixedLeft.getScrollViewRange();\r\n    const { rect } = autoFillAttr;\r\n    const empty = new RectRange(-1, -1, -1, -1);\r\n    const coincideRange = rect.coincide(viewRange);\r\n    if (empty.equals(coincideRange)) {\r\n      this.l.hide();\r\n      return;\r\n    }\r\n    const width = cols.sectionSumWidth(coincideRange.sci, coincideRange.eci);\r\n    const height = rows.sectionSumHeight(coincideRange.sri, coincideRange.eri);\r\n    const top = rows.sectionSumHeight(viewRange.sri, coincideRange.sri - 1);\r\n    const left = cols.sectionSumWidth(viewRange.sci, coincideRange.sci - 1);\r\n    if (rect.sri < viewRange.sri) {\r\n      this.l.areaEl.css('border-top', 'none');\r\n    } else {\r\n      this.l.areaEl.cssRemoveKeys('border-top');\r\n    }\r\n    if (rect.eci > viewRange.eci) {\r\n      this.l.areaEl.css('border-right', 'none');\r\n    } else {\r\n      this.l.areaEl.cssRemoveKeys('border-right');\r\n    }\r\n    if (rect.eri > viewRange.eri) {\r\n      this.l.areaEl.css('border-bottom', 'none');\r\n    } else {\r\n      this.l.areaEl.cssRemoveKeys('border-bottom');\r\n    }\r\n    this.l.offset({\r\n      width,\r\n      height,\r\n      left,\r\n      top,\r\n    }).show();\r\n  }\r\n\r\n  setBROffset(autoFillAttr) {\r\n    const { screen } = this;\r\n    const { table } = screen;\r\n    const {\r\n      cols, rows,\r\n    } = table;\r\n    const viewRange = table.getScrollViewRange();\r\n    const { rect } = autoFillAttr;\r\n    const empty = new RectRange(-1, -1, -1, -1);\r\n    const coincideRange = rect.coincide(viewRange);\r\n    if (empty.equals(coincideRange)) {\r\n      this.br.hide();\r\n      return;\r\n    }\r\n    const width = cols.sectionSumWidth(coincideRange.sci, coincideRange.eci);\r\n    const height = rows.sectionSumHeight(coincideRange.sri, coincideRange.eri);\r\n    const top = rows.sectionSumHeight(viewRange.sri, coincideRange.sri - 1);\r\n    const left = cols.sectionSumWidth(viewRange.sci, coincideRange.sci - 1);\r\n    if (rect.sci < viewRange.sci) {\r\n      this.br.areaEl.css('border-left', 'none');\r\n    } else {\r\n      this.br.areaEl.cssRemoveKeys('border-left');\r\n    }\r\n    if (rect.sri < viewRange.sri) {\r\n      this.br.areaEl.css('border-top', 'none');\r\n    } else {\r\n      this.br.areaEl.cssRemoveKeys('border-top');\r\n    }\r\n    if (rect.eri > viewRange.eri) {\r\n      this.br.areaEl.css('border-bottom', 'none');\r\n    } else {\r\n      this.br.areaEl.cssRemoveKeys('border-bottom');\r\n    }\r\n    if (rect.eci > viewRange.eci) {\r\n      this.br.areaEl.css('border-right', 'none');\r\n    } else {\r\n      this.br.areaEl.cssRemoveKeys('border-right');\r\n    }\r\n    this.br.offset({\r\n      width,\r\n      height,\r\n      left,\r\n      top,\r\n    }).show();\r\n  }\r\n\r\n  setOffset(autoFillAttr) {\r\n    this.setLTOffset(autoFillAttr);\r\n    this.setTOffset(autoFillAttr);\r\n    this.setLOffset(autoFillAttr);\r\n    this.setBROffset(autoFillAttr);\r\n  }\r\n\r\n  getMoveAutoFillAttr(x, y) {\r\n    const { screen, screenSelector } = this;\r\n    const { table } = screen;\r\n    const { selectorAttr } = screenSelector;\r\n    const { cols, rows, merges } = table;\r\n    const { rect: selectorRect, edge, edgeType } = selectorAttr;\r\n    const autoFillSelectorRect = edge || merges.intersects(selectorRect);\r\n    const [rSize, cSize] = selectorRect.size();\r\n    let { ri, ci } = table.getRiCiByXy(x, y);\r\n    // console.log('autoFillSelectorRect >>>', autoFillSelectorRect);\r\n    if (ri < 0) ri = 0; else if (ri > rows.len) ri = rows.len - 1;\r\n    if (ci < 0) ci = 0; else if (ci > cols.len) ci = cols.len - 1;\r\n    const { sri: selectorSri, sci: selectorSci } = selectorRect;\r\n    let { eri: selectorEri, eci: selectorEci } = selectorRect;\r\n    if (edgeType === 'left') selectorEci = cols.len - 1;\r\n    if (edgeType === 'top') selectorEri = rows.len - 1;\r\n    let rect = null;\r\n    let direction = 'un';\r\n    if (ri < selectorSri || ri > selectorEri) {\r\n      if (ri < selectorSri) {\r\n        direction = 'top';\r\n        if (autoFillSelectorRect) {\r\n          let minRi = selectorSri - rSize;\r\n          if (minRi >= 0) {\r\n            const diff = (selectorSri - 1) - ri;\r\n            for (let i = 1; i <= diff; i += 1) {\r\n              if (i % rSize === 0 && minRi - rSize >= 0) minRi -= rSize;\r\n            }\r\n            rect = new RectRange(minRi, selectorSci, selectorSri - 1, selectorEci);\r\n          }\r\n        } else {\r\n          rect = new RectRange(ri, selectorSci, selectorSri - 1, selectorEci);\r\n        }\r\n      }\r\n      if (ri > selectorEri) {\r\n        direction = 'bottom';\r\n        if (autoFillSelectorRect) {\r\n          let maxRi = selectorEri + rSize;\r\n          if (maxRi <= rows.len - 1) {\r\n            const diff = ri - (selectorEri + 1);\r\n            for (let i = 1; i <= diff; i += 1) {\r\n              if (i % rSize === 0 && maxRi + rSize <= rows.len - 1) maxRi += rSize;\r\n            }\r\n            rect = new RectRange(selectorEri + 1, selectorSci, maxRi, selectorEci);\r\n          }\r\n        } else {\r\n          rect = new RectRange(selectorEri + 1, selectorSci, ri, selectorEci);\r\n        }\r\n      }\r\n    } else if (ci < selectorSci || ci > selectorEci) {\r\n      if (ci < selectorSci) {\r\n        direction = 'left';\r\n        if (autoFillSelectorRect) {\r\n          let minCi = selectorSci - cSize;\r\n          if (minCi >= 0) {\r\n            const diff = (selectorSci - 1) - ci;\r\n            for (let i = 1; i <= diff; i += 1) {\r\n              if (i % cSize === 0 && minCi - cSize >= 0) minCi -= cSize;\r\n            }\r\n            rect = new RectRange(selectorSri, minCi, selectorEri, selectorSci - 1);\r\n          }\r\n        } else {\r\n          rect = new RectRange(selectorSri, ci, selectorEri, selectorSci - 1);\r\n        }\r\n      }\r\n      if (ci > selectorEci) {\r\n        direction = 'right';\r\n        if (autoFillSelectorRect) {\r\n          let maxCi = selectorEci + cSize;\r\n          if (maxCi <= cols.len - 1) {\r\n            const diff = ci - (selectorEci + 1);\r\n            for (let i = 1; i <= diff; i += 1) {\r\n              if (i % cSize === 0 && maxCi + cSize <= cols.len - 1) maxCi += cSize;\r\n            }\r\n            rect = new RectRange(selectorSri, selectorEci + 1, selectorEri, maxCi);\r\n          }\r\n        } else {\r\n          rect = new RectRange(selectorSri, selectorEci + 1, selectorEri, ci);\r\n        }\r\n      }\r\n    }\r\n    if (rect !== null) {\r\n      const width = cols.sectionSumWidth(rect.sci, rect.eci);\r\n      const height = rows.sectionSumHeight(rect.sri, rect.eri);\r\n      rect.w = width;\r\n      rect.h = height;\r\n      return {\r\n        rect, direction,\r\n      };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  mergeCellForceSplit() {\r\n    const { screen, screenSelector } = this;\r\n    const { table } = screen;\r\n    const { merges } = table;\r\n    const { autoFillAttr } = this;\r\n    const { selectorAttr } = screenSelector;\r\n    const { rect: autoFillRect } = autoFillAttr;\r\n    const { rect: selectorRect } = selectorAttr;\r\n    let sIndexRi = selectorRect.sri;\r\n    let tIndexRi = autoFillRect.sri;\r\n    while (tIndexRi <= autoFillRect.eri) {\r\n      let sIndexCi = selectorRect.sci;\r\n      let tIndexCi = autoFillRect.sci;\r\n      while (tIndexCi <= autoFillRect.eci) {\r\n        const rect = new RectRange(tIndexRi, tIndexCi, tIndexRi, tIndexCi);\r\n        const mergeRect = merges.getFirstIncludes(tIndexRi, tIndexCi);\r\n        if (!mergeRect || !selectorRect.intersects(mergeRect)) {\r\n          merges.deleteIntersects(rect);\r\n        }\r\n        sIndexCi += 1;\r\n        tIndexCi += 1;\r\n        if (sIndexCi > selectorRect.eci) sIndexCi = selectorRect.sci;\r\n      }\r\n      sIndexRi += 1;\r\n      tIndexRi += 1;\r\n      if (sIndexRi > selectorRect.eri) sIndexRi = selectorRect.sri;\r\n    }\r\n  }\r\n\r\n  copyContent() {\r\n    let count = 0;\r\n    const { screen, screenSelector } = this;\r\n    const { table } = screen;\r\n    const { cells } = table;\r\n    const { autoFillAttr } = this;\r\n    const { selectorAttr } = screenSelector;\r\n    const { rect: autoFillRect } = autoFillAttr;\r\n    const { rect: selectorRect } = selectorAttr;\r\n    let sIndexRi = selectorRect.sri;\r\n    let tIndexRi = autoFillRect.sri;\r\n    while (tIndexRi <= autoFillRect.eri) {\r\n      let sIndexCi = selectorRect.sci;\r\n      let tIndexCi = autoFillRect.sci;\r\n      while (tIndexCi <= autoFillRect.eci) {\r\n        const src = cells.getCell(sIndexRi, sIndexCi);\r\n        if (src) {\r\n          const target = src.clone();\r\n          cells.setCellOrNew(tIndexRi, tIndexCi, target);\r\n          if (!Utils.isBlank(src.text)) {\r\n            count += 1;\r\n          }\r\n        }\r\n        sIndexCi += 1;\r\n        tIndexCi += 1;\r\n        if (sIndexCi > selectorRect.eci) sIndexCi = selectorRect.sci;\r\n      }\r\n      sIndexRi += 1;\r\n      tIndexRi += 1;\r\n      if (sIndexRi > selectorRect.eri) sIndexRi = selectorRect.sri;\r\n    }\r\n    return count;\r\n  }\r\n\r\n  copyMerge() {\r\n    const { screen, screenSelector } = this;\r\n    const { table } = screen;\r\n    const { merges } = table;\r\n    const { autoFillAttr } = this;\r\n    const { selectorAttr } = screenSelector;\r\n    const { rect: autoFillRect, direction } = autoFillAttr;\r\n    const { rect: selectorRect, edge } = selectorAttr;\r\n    let sIndexRi = selectorRect.sri;\r\n    let tIndexRi = autoFillRect.sri;\r\n    if (edge && (direction === 'top' || direction === 'left')) return;\r\n    while (tIndexRi <= autoFillRect.eri) {\r\n      let sIndexCi = selectorRect.sci;\r\n      let tIndexCi = autoFillRect.sci;\r\n      while (tIndexCi <= autoFillRect.eci) {\r\n        const mergeRect = merges.getFirstIncludes(sIndexRi, sIndexCi);\r\n        if (mergeRect) {\r\n          const isOrigin = mergeRect.sri === sIndexRi && mergeRect.sci === sIndexCi;\r\n          if (isOrigin) {\r\n            let [rSize, cSize] = mergeRect.size();\r\n            rSize -= 1;\r\n            cSize -= 1;\r\n            const newMerge = new RectRange(tIndexRi, tIndexCi, tIndexRi + rSize, tIndexCi + cSize);\r\n            if (!merges.intersects(newMerge)) {\r\n              merges.add(newMerge);\r\n            }\r\n          }\r\n        }\r\n        sIndexCi += 1;\r\n        tIndexCi += 1;\r\n        if (sIndexCi > selectorRect.eci) sIndexCi = selectorRect.sci;\r\n      }\r\n      sIndexRi += 1;\r\n      tIndexRi += 1;\r\n      if (sIndexRi > selectorRect.eri) sIndexRi = selectorRect.sri;\r\n    }\r\n  }\r\n\r\n  autoFillTo() {\r\n    const { screen, options } = this;\r\n    const { mergeForceSplit } = options;\r\n    const { table } = screen;\r\n    const { merges } = table;\r\n    const { autoFillAttr } = this;\r\n    const { rect: autoFillRect } = autoFillAttr;\r\n    const mergeRect = merges.getFirstIncludes(autoFillRect.sri, autoFillRect.sci);\r\n    if (mergeRect && mergeRect.equals(autoFillRect)) {\r\n      this.options.onBeforeAutoFill();\r\n      this.mergeCellForceSplit();\r\n      const count = this.copyContent();\r\n      this.copyMerge();\r\n      this.options.onAfterAutoFill(count);\r\n    } else {\r\n      if (merges.intersects(autoFillRect) && mergeForceSplit === false) {\r\n        // eslint-disable-next-line no-undef,no-alert\r\n        alert('此操作要求合并单元格都具有相同大小');\r\n        return;\r\n      }\r\n      this.options.onBeforeAutoFill();\r\n      this.mergeCellForceSplit();\r\n      const count = this.copyContent();\r\n      this.copyMerge();\r\n      this.options.onAfterAutoFill(count);\r\n    }\r\n  }\r\n}\r\n\r\nexport { ScreenAutoFill };\r\n","import { Widget } from '../../../lib/Widget';\r\nimport { cssPrefix } from '../../../config';\r\nimport { ScreenSelector } from '../selector/ScreenSelector';\r\nimport { EventBind } from '../../../utils/EventBind';\r\nimport { Constant } from '../../../utils/Constant';\r\nimport { RectRange } from '../RectRange';\r\n\r\nclass XHeightLight extends Widget {\r\n  constructor(table) {\r\n    super(`${cssPrefix}-table-x-height-light`);\r\n    this.table = table;\r\n    this.hide();\r\n  }\r\n\r\n  init() {\r\n    const { table } = this;\r\n    const { settings } = table;\r\n    const { index } = settings;\r\n    this.css('height', `${index.height}px`);\r\n    this.bind();\r\n  }\r\n\r\n  disjoint(sRect, tRect) {\r\n    return sRect.sci > tRect.eci || tRect.sci > sRect.eci;\r\n  }\r\n\r\n  coincide(sRect, tRect) {\r\n    if (this.disjoint(sRect, tRect)) {\r\n      return new RectRange(0, -1, 0, -1);\r\n    }\r\n    return new RectRange(\r\n      0,\r\n      tRect.sci > sRect.sci ? tRect.sci : sRect.sci,\r\n      0,\r\n      tRect.eci < sRect.eci ? tRect.eci : sRect.eci,\r\n    );\r\n  }\r\n\r\n  offsetHeightLight(selectorAttr, intersectsArea) {\r\n    const { table } = this;\r\n    const { settings } = table;\r\n    const { index } = settings;\r\n    const empty = new RectRange(0, -1, 0, -1);\r\n    this.hide();\r\n    switch (intersectsArea) {\r\n      case 'lt': {\r\n        const { rect } = selectorAttr;\r\n        const { frozenLeftTop, cols } = table;\r\n        const ltViewRange = frozenLeftTop.getScrollViewRange();\r\n        const ltCoincideRange = this.coincide(rect, ltViewRange);\r\n        if (!empty.equals(ltCoincideRange)) {\r\n          const width = cols.sectionSumWidth(ltCoincideRange.sci, ltCoincideRange.eci);\r\n          const left = cols.sectionSumWidth(ltViewRange.sci, ltCoincideRange.sci - 1) + index.width;\r\n          if (`${width}px` !== this.css('width')) {\r\n            this.css('width', `${width}px`);\r\n          }\r\n          if (`${left}px` !== this.css('left')) {\r\n            this.css('left', `${left}px`);\r\n          }\r\n          this.show();\r\n        }\r\n        break;\r\n      }\r\n      case 't': {\r\n        const { rect } = selectorAttr;\r\n        const { fixedTop, cols } = table;\r\n        const tViewRange = fixedTop.getScrollViewRange();\r\n        const tCoincideRange = this.coincide(rect, tViewRange);\r\n        if (!empty.equals(tCoincideRange)) {\r\n          const width = cols.sectionSumWidth(tCoincideRange.sci, tCoincideRange.eci);\r\n          const left = cols.sectionSumWidth(tViewRange.sci, tCoincideRange.sci - 1)\r\n            + table.getFixedWidth() + index.width;\r\n          if (`${width}px` !== this.css('width')) {\r\n            this.css('width', `${width}px`);\r\n          }\r\n          if (`${left}px` !== this.css('left')) {\r\n            this.css('left', `${left}px`);\r\n          }\r\n          this.show();\r\n        }\r\n        break;\r\n      }\r\n      case 'br': {\r\n        const { rect } = selectorAttr;\r\n        const { cols } = table;\r\n        const cViewRange = table.getScrollViewRange();\r\n        const cCoincideRange = this.coincide(rect, cViewRange);\r\n        if (!empty.equals(cCoincideRange)) {\r\n          const width = cols.sectionSumWidth(cCoincideRange.sci, cCoincideRange.eci);\r\n          const left = cols.sectionSumWidth(cViewRange.sci, cCoincideRange.sci - 1)\r\n            + table.getFixedWidth() + index.width;\r\n          if (`${width}px` !== this.css('width')) {\r\n            this.css('width', `${width}px`);\r\n          }\r\n          if (`${left}px` !== this.css('left')) {\r\n            this.css('left', `${left}px`);\r\n          }\r\n          this.show();\r\n        }\r\n        break;\r\n      }\r\n      case 'l': {\r\n        const { rect } = selectorAttr;\r\n        const { fixedLeft, cols } = table;\r\n        const lViewRange = fixedLeft.getScrollViewRange();\r\n        const lCoincideRange = this.coincide(rect, lViewRange);\r\n        if (!empty.equals(lCoincideRange)) {\r\n          const width = cols.sectionSumWidth(lCoincideRange.sci, lCoincideRange.eci);\r\n          const left = cols.sectionSumWidth(lViewRange.sci, lCoincideRange.sci - 1) + index.width;\r\n          if (`${width}px` !== this.css('width')) {\r\n            this.css('width', `${width}px`);\r\n          }\r\n          if (`${left}px` !== this.css('left')) {\r\n            this.css('left', `${left}px`);\r\n          }\r\n          this.show();\r\n        }\r\n        break;\r\n      }\r\n      case 'ltt': {\r\n        const { rect } = selectorAttr;\r\n        const { frozenLeftTop, fixedTop, cols } = table;\r\n        const ltViewRange = frozenLeftTop.getScrollViewRange();\r\n        const tViewRange = fixedTop.getScrollViewRange();\r\n        const ltCoincideRange = this.coincide(rect, ltViewRange);\r\n        const tCoincideRange = this.coincide(rect, tViewRange);\r\n        let width = 0;\r\n        const left = cols.sectionSumWidth(ltViewRange.sci, ltCoincideRange.sci - 1) + index.width;\r\n        if (!empty.equals(ltCoincideRange)) {\r\n          width += cols.sectionSumWidth(ltCoincideRange.sci, ltCoincideRange.eci);\r\n        }\r\n        if (!empty.equals(tCoincideRange)) {\r\n          width += cols.sectionSumWidth(tCoincideRange.sci, tCoincideRange.eci);\r\n        }\r\n        if (`${width}px` !== this.css('width')) {\r\n          this.css('width', `${width}px`);\r\n        }\r\n        if (`${left}px` !== this.css('left')) {\r\n          this.css('left', `${left}px`);\r\n        }\r\n        this.show();\r\n        break;\r\n      }\r\n      case 'ltl': {\r\n        const { rect } = selectorAttr;\r\n        const { frozenLeftTop, cols } = table;\r\n        const ltViewRange = frozenLeftTop.getScrollViewRange();\r\n        const ltCoincideRange = this.coincide(rect, ltViewRange);\r\n        if (!empty.equals(ltCoincideRange)) {\r\n          const width = cols.sectionSumWidth(ltCoincideRange.sci, ltCoincideRange.eci);\r\n          const left = cols.sectionSumWidth(ltViewRange.sci, ltCoincideRange.sci - 1) + index.width;\r\n          if (`${width}px` !== this.css('width')) {\r\n            this.css('width', `${width}px`);\r\n          }\r\n          if (`${left}px` !== this.css('left')) {\r\n            this.css('left', `${left}px`);\r\n          }\r\n          this.show();\r\n        }\r\n        break;\r\n      }\r\n      case 'tbr': {\r\n        const { rect } = selectorAttr;\r\n        const { fixedTop, cols } = table;\r\n        const tViewRange = fixedTop.getScrollViewRange();\r\n        const tCoincideRange = this.coincide(rect, tViewRange);\r\n        if (!empty.equals(tCoincideRange)) {\r\n          const width = cols.sectionSumWidth(tCoincideRange.sci, tCoincideRange.eci);\r\n          const left = cols.sectionSumWidth(tViewRange.sci, tCoincideRange.sci - 1)\r\n            + table.getFixedWidth() + index.width;\r\n          if (`${width}px` !== this.css('width')) {\r\n            this.css('width', `${width}px`);\r\n          }\r\n          if (`${left}px` !== this.css('left')) {\r\n            this.css('left', `${left}px`);\r\n          }\r\n          this.show();\r\n        }\r\n        break;\r\n      }\r\n      case 'lbr': {\r\n        const { rect } = selectorAttr;\r\n        const { fixedLeft, cols } = table;\r\n        const lViewRange = fixedLeft.getScrollViewRange();\r\n        const cViewRange = table.getScrollViewRange();\r\n        const lCoincideRange = this.coincide(rect, lViewRange);\r\n        const cCoincideRange = this.coincide(rect, cViewRange);\r\n        let width = 0;\r\n        const left = cols.sectionSumWidth(lViewRange.sci, lCoincideRange.sci - 1) + index.width;\r\n        if (!empty.equals(lCoincideRange)) {\r\n          width += cols.sectionSumWidth(lCoincideRange.sci, lCoincideRange.eci);\r\n        }\r\n        if (!empty.equals(cCoincideRange)) {\r\n          width += cols.sectionSumWidth(cCoincideRange.sci, cCoincideRange.eci);\r\n        }\r\n        if (`${width}px` !== this.css('width')) {\r\n          this.css('width', `${width}px`);\r\n        }\r\n        if (`${left}px` !== this.css('left')) {\r\n          this.css('left', `${left}px`);\r\n        }\r\n        this.show();\r\n        break;\r\n      }\r\n      case 'lttlbr': {\r\n        const { rect } = selectorAttr;\r\n        const { frozenLeftTop, fixedTop, cols } = table;\r\n        const ltViewRange = frozenLeftTop.getScrollViewRange();\r\n        const tViewRange = fixedTop.getScrollViewRange();\r\n        const ltCoincideRange = this.coincide(rect, ltViewRange);\r\n        const tCoincideRange = this.coincide(rect, tViewRange);\r\n        let width = 0;\r\n        const left = cols.sectionSumWidth(ltViewRange.sci, ltCoincideRange.sci - 1) + index.width;\r\n        if (!empty.equals(ltCoincideRange)) {\r\n          width += cols.sectionSumWidth(ltCoincideRange.sci, ltCoincideRange.eci);\r\n        }\r\n        if (!empty.equals(tCoincideRange)) {\r\n          width += cols.sectionSumWidth(tCoincideRange.sci, tCoincideRange.eci);\r\n        }\r\n        if (`${width}px` !== this.css('width')) {\r\n          this.css('width', `${width}px`);\r\n        }\r\n        if (`${left}px` !== this.css('left')) {\r\n          this.css('left', `${left}px`);\r\n        }\r\n        this.show();\r\n        break;\r\n      }\r\n      default: break;\r\n    }\r\n  }\r\n\r\n  bind() {\r\n    const { table } = this;\r\n    const { screen } = table;\r\n    const screenSelector = screen.findByClass(ScreenSelector);\r\n    screenSelector.addChangeCb(() => {\r\n      const { selectorAttr } = screenSelector;\r\n      if (selectorAttr) {\r\n        const intersectsArea = screenSelector.getIntersectsArea(selectorAttr);\r\n        this.offsetHeightLight(selectorAttr, intersectsArea);\r\n      }\r\n    });\r\n    EventBind.bind(table, Constant.SYSTEM_EVENT_TYPE.SCROLL, () => {\r\n      const { selectorAttr } = screenSelector;\r\n      if (selectorAttr) {\r\n        const intersectsArea = screenSelector.getIntersectsArea(selectorAttr);\r\n        this.offsetHeightLight(selectorAttr, intersectsArea);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport { XHeightLight };\r\n","import { Widget } from '../../../lib/Widget';\r\nimport { cssPrefix } from '../../../config';\r\nimport { RectRange } from '../RectRange';\r\nimport { ScreenSelector } from '../selector/ScreenSelector';\r\nimport { EventBind } from '../../../utils/EventBind';\r\nimport { Constant } from '../../../utils/Constant';\r\n\r\nclass YHeightLight extends Widget {\r\n  constructor(table) {\r\n    super(`${cssPrefix}-table-y-height-light`);\r\n    this.table = table;\r\n    this.hide();\r\n  }\r\n\r\n  init() {\r\n    const { table } = this;\r\n    const { settings } = table;\r\n    const { index } = settings;\r\n    this.css('width', `${index.width}px`);\r\n    this.bind();\r\n  }\r\n\r\n  disjoint(sRect, tRect) {\r\n    return sRect.sri > tRect.eri || tRect.sri > sRect.eri;\r\n  }\r\n\r\n  coincide(sRect, tRect) {\r\n    if (this.disjoint(sRect, tRect)) {\r\n      return new RectRange(-1, 0, -1, 0);\r\n    }\r\n    return new RectRange(\r\n      tRect.sri > sRect.sri ? tRect.sri : sRect.sri,\r\n      0,\r\n      tRect.eri < sRect.eri ? tRect.eri : sRect.eri,\r\n      0,\r\n    );\r\n  }\r\n\r\n  offsetHeightLight(selectorAttr, intersectsArea) {\r\n    const { table } = this;\r\n    const { settings } = table;\r\n    const { index } = settings;\r\n    const empty = new RectRange(-1, 0, -1, 0);\r\n    this.hide();\r\n    switch (intersectsArea) {\r\n      case 'lt': {\r\n        const { rect } = selectorAttr;\r\n        const { frozenLeftTop, rows } = table;\r\n        const ltViewRange = frozenLeftTop.getScrollViewRange();\r\n        const ltCoincideRange = this.coincide(rect, ltViewRange);\r\n        if (!empty.equals(ltCoincideRange)) {\r\n          const height = rows.sectionSumHeight(ltCoincideRange.sri, ltCoincideRange.eri);\r\n          // eslint-disable-next-line max-len\r\n          const top = rows.sectionSumHeight(ltViewRange.sri, ltCoincideRange.sri - 1) + index.height;\r\n          if (`${height}px` !== this.css('height')) {\r\n            this.css('height', `${height}px`);\r\n          }\r\n          if (`${top}px` !== this.css('top')) {\r\n            this.css('top', `${top}px`);\r\n          }\r\n          this.show();\r\n        }\r\n        break;\r\n      }\r\n      case 't': {\r\n        const { rect } = selectorAttr;\r\n        const { fixedTop, rows } = table;\r\n        const tViewRange = fixedTop.getScrollViewRange();\r\n        const tCoincideRange = this.coincide(rect, tViewRange);\r\n        // console.log('tCoincideRange>>>', tCoincideRange);\r\n        if (!empty.equals(tCoincideRange)) {\r\n          const height = rows.sectionSumHeight(tCoincideRange.sri, tCoincideRange.eri);\r\n          const top = rows.sectionSumHeight(tViewRange.sri, tCoincideRange.sri - 1) + index.height;\r\n          // console.log('height>>>', height);\r\n          // console.log('top>>>', top);\r\n          if (`${height}px` !== this.css('height')) {\r\n            this.css('height', `${height}px`);\r\n          }\r\n          if (`${top}px` !== this.css('top')) {\r\n            this.css('top', `${top}px`);\r\n          }\r\n          this.show();\r\n        }\r\n        break;\r\n      }\r\n      case 'l': {\r\n        const { rect } = selectorAttr;\r\n        const { fixedLeft, rows } = table;\r\n        const lViewRange = fixedLeft.getScrollViewRange();\r\n        const lCoincideRange = this.coincide(rect, lViewRange);\r\n        if (!empty.equals(lCoincideRange)) {\r\n          const height = rows.sectionSumHeight(lCoincideRange.sri, lCoincideRange.eri);\r\n          const top = rows.sectionSumHeight(lViewRange.sri, lCoincideRange.sri - 1)\r\n            + table.getFixedHeight() + index.height;\r\n          if (`${height}px` !== this.css('height')) {\r\n            this.css('height', `${height}px`);\r\n          }\r\n          if (`${top}px` !== this.css('top')) {\r\n            this.css('top', `${top}px`);\r\n          }\r\n          this.show();\r\n        }\r\n        break;\r\n      }\r\n      case 'br': {\r\n        const { rect } = selectorAttr;\r\n        const { rows } = table;\r\n        const cViewRange = table.getScrollViewRange();\r\n        const cCoincideRange = this.coincide(rect, cViewRange);\r\n        // console.log('cCoincideRange>>>', cCoincideRange);\r\n        if (!empty.equals(cCoincideRange)) {\r\n          const height = rows.sectionSumHeight(cCoincideRange.sri, cCoincideRange.eri);\r\n          const top = rows.sectionSumHeight(cViewRange.sri, cCoincideRange.sri - 1)\r\n            + table.getFixedHeight() + index.height;\r\n          // console.log('height>>>', height);\r\n          // console.log('top>>>', top);\r\n          if (`${height}px` !== this.css('height')) {\r\n            this.css('height', `${height}px`);\r\n          }\r\n          if (`${top}px` !== this.css('top')) {\r\n            this.css('top', `${top}px`);\r\n          }\r\n          this.show();\r\n        }\r\n        break;\r\n      }\r\n      case 'ltt': {\r\n        const { rect } = selectorAttr;\r\n        const { frozenLeftTop, rows } = table;\r\n        const ltViewRange = frozenLeftTop.getScrollViewRange();\r\n        const ltCoincideRange = this.coincide(rect, ltViewRange);\r\n        if (!empty.equals(ltCoincideRange)) {\r\n          // eslint-disable-next-line max-len\r\n          const top = rows.sectionSumHeight(ltViewRange.sri, ltCoincideRange.sri - 1) + index.height;\r\n          const height = rows.sectionSumHeight(ltCoincideRange.sri, ltCoincideRange.eri);\r\n          if (`${height}px` !== this.css('height')) {\r\n            this.css('height', `${height}px`);\r\n          }\r\n          if (`${top}px` !== this.css('top')) {\r\n            this.css('top', `${top}px`);\r\n          }\r\n          this.show();\r\n        }\r\n        break;\r\n      }\r\n      case 'ltl': {\r\n        const { rect } = selectorAttr;\r\n        const { frozenLeftTop, fixedLeft, rows } = table;\r\n        const ltViewRange = frozenLeftTop.getScrollViewRange();\r\n        const lViewRange = fixedLeft.getScrollViewRange();\r\n        const ltCoincideRange = this.coincide(rect, ltViewRange);\r\n        const lCoincideRange = this.coincide(rect, lViewRange);\r\n        const top = rows.sectionSumHeight(ltViewRange.sri, ltCoincideRange.sri - 1) + index.height;\r\n        let height = 0;\r\n        if (!empty.equals(ltCoincideRange)) {\r\n          height += rows.sectionSumHeight(ltCoincideRange.sri, ltCoincideRange.eri);\r\n        }\r\n        if (!empty.equals(lCoincideRange)) {\r\n          height += rows.sectionSumHeight(lCoincideRange.sri, lCoincideRange.eri);\r\n        }\r\n        if (`${height}px` !== this.css('height')) {\r\n          this.css('height', `${height}px`);\r\n        }\r\n        if (`${top}px` !== this.css('top')) {\r\n          this.css('top', `${top}px`);\r\n        }\r\n        this.show();\r\n        break;\r\n      }\r\n      case 'tbr': {\r\n        const { rect } = selectorAttr;\r\n        const { fixedTop, rows } = table;\r\n        const tViewRange = fixedTop.getScrollViewRange();\r\n        const cViewRange = table.getScrollViewRange();\r\n        const tCoincideRange = this.coincide(rect, tViewRange);\r\n        const cCoincideRange = this.coincide(rect, cViewRange);\r\n        const top = rows.sectionSumHeight(tViewRange.sri, tCoincideRange.sri - 1) + index.height;\r\n        let height = 0;\r\n        if (!empty.equals(tCoincideRange)) {\r\n          height += rows.sectionSumHeight(tCoincideRange.sri, tCoincideRange.eri);\r\n        }\r\n        if (!empty.equals(cCoincideRange)) {\r\n          height += rows.sectionSumHeight(cCoincideRange.sri, cCoincideRange.eri);\r\n        }\r\n        // console.log('tCoincideRange>>>', tCoincideRange);\r\n        // console.log('cCoincideRange>>>', cCoincideRange);\r\n        // console.log('top>>>', top);\r\n        // console.log('height>>>', height);\r\n        if (`${height}px` !== this.css('height')) {\r\n          this.css('height', `${height}px`);\r\n        }\r\n        if (`${top}px` !== this.css('top')) {\r\n          this.css('top', `${top}px`);\r\n        }\r\n        this.show();\r\n        break;\r\n      }\r\n      case 'lbr': {\r\n        const { rect } = selectorAttr;\r\n        const { fixedLeft, rows } = table;\r\n        const lViewRange = fixedLeft.getScrollViewRange();\r\n        const lCoincideRange = this.coincide(rect, lViewRange);\r\n        if (!empty.equals(lCoincideRange)) {\r\n          const height = rows.sectionSumHeight(lCoincideRange.sri, lCoincideRange.eri);\r\n          const top = rows.sectionSumHeight(lViewRange.sri, lCoincideRange.sri - 1)\r\n            + table.getFixedHeight() + index.height;\r\n          if (`${height}px` !== this.css('height')) {\r\n            this.css('height', `${height}px`);\r\n          }\r\n          if (`${top}px` !== this.css('top')) {\r\n            this.css('top', `${top}px`);\r\n          }\r\n          this.show();\r\n        }\r\n        break;\r\n      }\r\n      case 'lttlbr': {\r\n        const { rect } = selectorAttr;\r\n        const { frozenLeftTop, fixedLeft, rows } = table;\r\n        const ltViewRange = frozenLeftTop.getScrollViewRange();\r\n        const lViewRange = fixedLeft.getScrollViewRange();\r\n        const ltCoincideRange = this.coincide(rect, ltViewRange);\r\n        const lCoincideRange = this.coincide(rect, lViewRange);\r\n        let height = 0;\r\n        const top = rows.sectionSumHeight(ltViewRange.sri, ltCoincideRange.sri - 1) + index.height;\r\n        if (!empty.equals(ltCoincideRange)) {\r\n          height += rows.sectionSumHeight(ltCoincideRange.sri, ltCoincideRange.eri);\r\n        }\r\n        if (!empty.equals(lCoincideRange)) {\r\n          height += rows.sectionSumHeight(lCoincideRange.sri, lCoincideRange.eri);\r\n        }\r\n        if (`${height}px` !== this.css('height')) {\r\n          this.css('height', `${height}px`);\r\n        }\r\n        if (`${top}px` !== this.css('top')) {\r\n          this.css('top', `${top}px`);\r\n        }\r\n        this.show();\r\n        break;\r\n      }\r\n      default: break;\r\n    }\r\n  }\r\n\r\n  bind() {\r\n    const { table } = this;\r\n    const { screen } = table;\r\n    const screenSelector = screen.findByClass(ScreenSelector);\r\n    screenSelector.addChangeCb(() => {\r\n      const { selectorAttr } = screenSelector;\r\n      if (selectorAttr) {\r\n        const intersectsArea = screenSelector.getIntersectsArea(selectorAttr);\r\n        this.offsetHeightLight(selectorAttr, intersectsArea);\r\n      }\r\n    });\r\n    EventBind.bind(table, Constant.SYSTEM_EVENT_TYPE.SCROLL, () => {\r\n      const { selectorAttr } = screenSelector;\r\n      if (selectorAttr) {\r\n        const intersectsArea = screenSelector.getIntersectsArea(selectorAttr);\r\n        this.offsetHeightLight(selectorAttr, intersectsArea);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport { YHeightLight };\r\n","import { Widget } from '../../lib/Widget';\r\nimport { cssPrefix } from '../../config';\r\nimport { h } from '../../lib/Element';\r\nimport { EventBind } from '../../utils/EventBind';\r\nimport { Constant } from '../../utils/Constant';\r\nimport { ScreenSelector } from './selector/ScreenSelector';\r\nimport { Utils } from '../../utils/Utils';\r\nimport { RectRange } from './RectRange';\r\n\r\nclass Edit extends Widget {\r\n\r\n  constructor(table) {\r\n    super(`${cssPrefix}-table-edit`);\r\n    this.input = h('div', `${cssPrefix}-table-edit-input`);\r\n    this.input.attr('contenteditable', true);\r\n    this.input.html('<p>&nbsp;</p>');\r\n    this.table = table;\r\n    this.text = '';\r\n    this.select = null;\r\n    this.children(this.input);\r\n    this.hide();\r\n  }\r\n\r\n  init() {\r\n    this.bind();\r\n  }\r\n\r\n  bind() {\r\n    const { table } = this;\r\n    const { screen } = table;\r\n    const selector = screen.findByClass(ScreenSelector);\r\n    EventBind.bind(this, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, (e) => {\r\n      e.stopPropagation();\r\n    });\r\n    EventBind.bind(this, Constant.SYSTEM_EVENT_TYPE.MOUSE_MOVE, (e) => {\r\n      e.stopPropagation();\r\n    });\r\n    EventBind.bind(this.input, Constant.SYSTEM_EVENT_TYPE.INPUT, () => {\r\n      const { input } = this;\r\n      if (Utils.isBlank(this.input.text())) {\r\n        input.html('<p>&nbsp;</p>');\r\n      }\r\n      this.text = input.text();\r\n    });\r\n    EventBind.bind(table, Constant.SYSTEM_EVENT_TYPE.SCROLL, () => {\r\n      this.hideEdit();\r\n    });\r\n    EventBind.bind(table, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, () => {\r\n      this.hideEdit();\r\n    });\r\n    EventBind.dbClick([\r\n      selector.lt,\r\n      selector.t,\r\n      selector.l,\r\n      selector.br,\r\n    ], () => {\r\n      this.showEdit();\r\n    });\r\n  }\r\n\r\n  showEdit() {\r\n    const { table, input } = this;\r\n    const { screen, cells } = table;\r\n    const selector = screen.findByClass(ScreenSelector);\r\n    const { selectorAttr } = selector;\r\n    if (selectorAttr) {\r\n      const { rect } = selectorAttr;\r\n      const cell = cells.getCellOrNew(rect.sri, rect.sci);\r\n      this.select = rect;\r\n      this.editOffset(rect);\r\n      this.text = cell.text;\r\n      if (Utils.isBlank(this.text)) {\r\n        input.html('<p>&nbsp;</p>');\r\n      } else {\r\n        input.text(this.text);\r\n      }\r\n      Utils.keepLastIndex(this.input.el);\r\n    }\r\n  }\r\n\r\n  hideEdit() {\r\n    const { select } = this;\r\n    const { table } = this;\r\n    const { cells } = table;\r\n    if (select) {\r\n      const cell = cells.getCellOrNew(select.sri, select.sci);\r\n      const text = Utils.trim(this.text);\r\n      if (cell.text !== text) {\r\n        cell.text = text;\r\n        table.setCell(select.sri, select.sci, cell);\r\n      }\r\n    }\r\n    this.hide();\r\n  }\r\n\r\n  editOffset() {\r\n    const { table } = this;\r\n    const { screen } = table;\r\n    const selector = screen.findByClass(ScreenSelector);\r\n    const { selectorAttr } = selector;\r\n    const { rect } = selectorAttr;\r\n    const { cols, rows } = table;\r\n    const offset = 3;\r\n    const intersectsArea = selector.getIntersectsArea(selectorAttr);\r\n    switch (intersectsArea) {\r\n      case 'lt': {\r\n        const { frozenLeftTop } = table;\r\n        const viewRange = frozenLeftTop.getScrollViewRange();\r\n        const coincideRange = rect.coincide(viewRange);\r\n        const empty = new RectRange(-1, -1, -1, -1);\r\n        if (empty.equals(coincideRange)) {\r\n          this.hide();\r\n          return;\r\n        }\r\n        const width = cols.sectionSumWidth(coincideRange.sci, coincideRange.eci) - offset * 2;\r\n        const height = rows.sectionSumHeight(coincideRange.sri, coincideRange.eri) - offset * 2;\r\n        let top = rows.sectionSumHeight(viewRange.sri, coincideRange.sri - 1);\r\n        let left = cols.sectionSumWidth(viewRange.sci, coincideRange.sci - 1);\r\n        top += table.getIndexHeight() + offset;\r\n        left += table.getIndexWidth() + offset;\r\n        this.offset({\r\n          width,\r\n          height,\r\n          top,\r\n          left,\r\n        }).show();\r\n        break;\r\n      }\r\n      case 't': {\r\n        const { fixedTop } = table;\r\n        const viewRange = fixedTop.getScrollViewRange();\r\n        const coincideRange = rect.coincide(viewRange);\r\n        const empty = new RectRange(-1, -1, -1, -1);\r\n        if (empty.equals(coincideRange)) {\r\n          this.hide();\r\n          return;\r\n        }\r\n        const width = cols.sectionSumWidth(coincideRange.sci, coincideRange.eci) - offset * 2;\r\n        const height = rows.sectionSumHeight(coincideRange.sri, coincideRange.eri) - offset * 2;\r\n        let top = rows.sectionSumHeight(viewRange.sri, coincideRange.sri - 1);\r\n        let left = cols.sectionSumWidth(viewRange.sci, coincideRange.sci - 1);\r\n        top += table.getIndexHeight() + offset;\r\n        left += table.getFixedWidth() + table.getIndexWidth() + offset;\r\n        this.offset({\r\n          width,\r\n          height,\r\n          top,\r\n          left,\r\n        }).show();\r\n        break;\r\n      }\r\n      case 'br': {\r\n        const viewRange = table.getScrollViewRange();\r\n        const coincideRange = rect.coincide(viewRange);\r\n        const empty = new RectRange(-1, -1, -1, -1);\r\n        if (empty.equals(coincideRange)) {\r\n          this.hide();\r\n          return;\r\n        }\r\n        const width = cols.sectionSumWidth(coincideRange.sci, coincideRange.eci) - offset * 2;\r\n        const height = rows.sectionSumHeight(coincideRange.sri, coincideRange.eri) - offset * 2;\r\n        let top = rows.sectionSumHeight(viewRange.sri, coincideRange.sri - 1);\r\n        let left = cols.sectionSumWidth(viewRange.sci, coincideRange.sci - 1);\r\n        top += table.getFixedHeight() + table.getIndexHeight() + offset;\r\n        left += table.getFixedWidth() + table.getIndexWidth() + offset;\r\n        this.offset({\r\n          width,\r\n          height,\r\n          top,\r\n          left,\r\n        }).show();\r\n        break;\r\n      }\r\n      case 'l': {\r\n        const { fixedLeft } = table;\r\n        const viewRange = fixedLeft.getScrollViewRange();\r\n        const coincideRange = rect.coincide(viewRange);\r\n        const empty = new RectRange(-1, -1, -1, -1);\r\n        if (empty.equals(coincideRange)) {\r\n          this.hide();\r\n          return;\r\n        }\r\n        const width = cols.sectionSumWidth(coincideRange.sci, coincideRange.eci) - offset * 2;\r\n        const height = rows.sectionSumHeight(coincideRange.sri, coincideRange.eri) - offset * 2;\r\n        let top = rows.sectionSumHeight(viewRange.sri, coincideRange.sri - 1);\r\n        let left = cols.sectionSumWidth(viewRange.sci, coincideRange.sci - 1);\r\n        top += table.getFixedHeight() + table.getIndexHeight() + offset;\r\n        left += table.getIndexWidth() + offset;\r\n        this.offset({\r\n          width,\r\n          height,\r\n          top,\r\n          left,\r\n        }).show();\r\n        break;\r\n      }\r\n      case 'ltt': {\r\n        const { frozenLeftTop, fixedTop } = table;\r\n        const ltViewRange = frozenLeftTop.getScrollViewRange();\r\n        const ltCoincideRange = rect.coincide(ltViewRange);\r\n        const tViewRange = fixedTop.getScrollViewRange();\r\n        const tCoincideRange = rect.coincide(tViewRange);\r\n        const empty = new RectRange(-1, -1, -1, -1);\r\n        if (empty.equals(tCoincideRange) && empty.equals(ltCoincideRange)) {\r\n          this.hide();\r\n          return;\r\n        }\r\n        const ltWidth = cols.sectionSumWidth(ltCoincideRange.sci, ltCoincideRange.eci);\r\n        const ltHeight = rows.sectionSumHeight(ltCoincideRange.sri, ltCoincideRange.eri);\r\n        const ltTop = rows.sectionSumHeight(ltViewRange.sri, ltCoincideRange.sri - 1);\r\n        const ltLeft = cols.sectionSumWidth(ltViewRange.sci, ltCoincideRange.sci - 1);\r\n        const tWidth = cols.sectionSumWidth(tCoincideRange.sci, tCoincideRange.eci);\r\n        this.offset({\r\n          width: (ltWidth + tWidth) - offset * 2,\r\n          height: ltHeight - offset * 2,\r\n          top: ltTop + table.getIndexHeight() + offset,\r\n          left: ltLeft + table.getIndexWidth() + offset,\r\n        }).show();\r\n        break;\r\n      }\r\n      case 'ltl': {\r\n        const { frozenLeftTop, fixedLeft } = table;\r\n        const ltViewRange = frozenLeftTop.getScrollViewRange();\r\n        const ltCoincideRange = rect.coincide(ltViewRange);\r\n        const lViewRange = fixedLeft.getScrollViewRange();\r\n        const lCoincideRange = rect.coincide(lViewRange);\r\n        const empty = new RectRange(-1, -1, -1, -1);\r\n        if (empty.equals(ltCoincideRange) && empty.equals(lCoincideRange)) {\r\n          this.hide();\r\n          return;\r\n        }\r\n        const ltWidth = cols.sectionSumWidth(ltCoincideRange.sci, ltCoincideRange.eci);\r\n        const ltHeight = rows.sectionSumHeight(ltCoincideRange.sri, ltCoincideRange.eri);\r\n        const lHeight = rows.sectionSumHeight(lCoincideRange.sri, lCoincideRange.eri);\r\n        let ltTop = rows.sectionSumHeight(ltViewRange.sri, ltCoincideRange.sri - 1);\r\n        let ltLeft = cols.sectionSumWidth(ltViewRange.sci, ltCoincideRange.sci - 1);\r\n        ltTop += table.getIndexHeight() + offset;\r\n        ltLeft += table.getIndexWidth() + offset;\r\n        this.offset({\r\n          width: ltWidth - offset * 2,\r\n          height: (ltHeight + lHeight) - offset * 2,\r\n          top: ltTop,\r\n          left: ltLeft,\r\n        }).show();\r\n        break;\r\n      }\r\n      case 'tbr': {\r\n        const { fixedTop } = table;\r\n        const cViewRange = table.getScrollViewRange();\r\n        const cCoincideRange = rect.coincide(cViewRange);\r\n        const tViewRange = fixedTop.getScrollViewRange();\r\n        const tCoincideRange = rect.coincide(tViewRange);\r\n        const empty = new RectRange(-1, -1, -1, -1);\r\n        if (empty.equals(cCoincideRange) && empty.equals(tCoincideRange)) {\r\n          this.hide();\r\n          return;\r\n        }\r\n        const tWidth = cols.sectionSumWidth(tCoincideRange.sci, tCoincideRange.eci);\r\n        const tHeight = rows.sectionSumHeight(tCoincideRange.sri, tCoincideRange.eri);\r\n        const tTop = rows.sectionSumHeight(tViewRange.sri, tCoincideRange.sri - 1);\r\n        const tLeft = cols.sectionSumWidth(tViewRange.sci, tCoincideRange.sci - 1);\r\n        const cHeight = rows.sectionSumHeight(cCoincideRange.sri, cCoincideRange.eri);\r\n        this.offset({\r\n          width: tWidth - offset * 2,\r\n          height: (cHeight + tHeight) - offset * 2,\r\n          top: tTop + table.getIndexHeight() + offset,\r\n          left: tLeft + table.getFixedWidth() + table.getIndexWidth() + offset,\r\n        }).show();\r\n        break;\r\n      }\r\n      case 'lbr': {\r\n        const { fixedLeft } = table;\r\n        const cViewRange = table.getScrollViewRange();\r\n        const cCoincideRange = rect.coincide(cViewRange);\r\n        const lViewRange = fixedLeft.getScrollViewRange();\r\n        const lCoincideRange = rect.coincide(lViewRange);\r\n        const empty = new RectRange(-1, -1, -1, -1);\r\n        if (empty.equals(cCoincideRange) && empty.equals(lCoincideRange)) {\r\n          this.hide();\r\n          return;\r\n        }\r\n        const lWidth = cols.sectionSumWidth(lCoincideRange.sci, lCoincideRange.eci);\r\n        const lHeight = rows.sectionSumHeight(lCoincideRange.sri, lCoincideRange.eri);\r\n        const lTop = rows.sectionSumHeight(lViewRange.sri, lCoincideRange.sri - 1);\r\n        const lLeft = cols.sectionSumWidth(lViewRange.sci, lCoincideRange.sci - 1);\r\n        const cWidth = cols.sectionSumWidth(cCoincideRange.sci, cCoincideRange.eci);\r\n        this.offset({\r\n          width: (lWidth + cWidth) - offset * 2,\r\n          height: lHeight - offset * 2,\r\n          top: lTop + table.getFixedHeight() + table.getIndexHeight() + offset,\r\n          left: lLeft + table.getIndexWidth() + offset,\r\n        }).show();\r\n        break;\r\n      }\r\n      case 'lttlbr': {\r\n        const { frozenLeftTop } = table;\r\n        const ltViewRange = frozenLeftTop.getScrollViewRange();\r\n        const ltCoincideRange = rect.coincide(ltViewRange);\r\n        const { fixedTop } = table;\r\n        const tViewRange = fixedTop.getScrollViewRange();\r\n        const tCoincideRange = rect.coincide(tViewRange);\r\n        const { fixedLeft } = table;\r\n        const lViewRange = fixedLeft.getScrollViewRange();\r\n        const lCoincideRange = rect.coincide(lViewRange);\r\n        const empty = new RectRange(-1, -1, -1, -1);\r\n        if (empty.equals(ltCoincideRange)\r\n          && empty.equals(tCoincideRange)\r\n          && empty.equals(lCoincideRange)) {\r\n          this.hide();\r\n          return;\r\n        }\r\n        const ltWidth = cols.sectionSumWidth(ltCoincideRange.sci, ltCoincideRange.eci);\r\n        const ltHeight = rows.sectionSumHeight(ltCoincideRange.sri, ltCoincideRange.eri);\r\n        const tWidth = cols.sectionSumWidth(tCoincideRange.sci, tCoincideRange.eci);\r\n        const lHeight = rows.sectionSumHeight(lCoincideRange.sri, lCoincideRange.eri);\r\n        const top = rows.sectionSumHeight(ltViewRange.sri, ltCoincideRange.sri - 1);\r\n        const left = cols.sectionSumWidth(ltViewRange.sci, ltCoincideRange.sci - 1);\r\n        this.offset({\r\n          width: (ltWidth + tWidth) - offset * 2,\r\n          height: (ltHeight + lHeight) - offset * 2,\r\n          top: top + table.getIndexHeight() + offset,\r\n          left: left + table.getIndexWidth() + offset,\r\n        }).show();\r\n        break;\r\n      }\r\n      default: break;\r\n    }\r\n  }\r\n}\r\n\r\nexport { Edit };\r\n","import { dpr } from './Draw';\r\nimport { Utils } from '../utils/Utils';\r\n\r\nclass Grid {\r\n  constructor(draw, attr = {}) {\r\n    this.draw = draw;\r\n    this.color = '#000000';\r\n    Utils.mergeDeep(this, attr);\r\n  }\r\n\r\n  lineWidth() {\r\n    const width = Math.floor(dpr());\r\n    return width > 2 ? width : 1;\r\n  }\r\n\r\n  verticalLine(sx, sy, ex, ey) {\r\n    if (sx !== ex) {\r\n      throw new Error('coordinate errors sx should be equal to ex !!!');\r\n    }\r\n    const { draw, color } = this;\r\n    const width = this.lineWidth();\r\n    draw.attr({\r\n      fillStyle: color,\r\n    });\r\n    const diff = ey - sy;\r\n    draw.fillRect(sx, sy, width, diff);\r\n  }\r\n\r\n  horizontalLine(sx, sy, ex, ey) {\r\n    if (sy !== ey) {\r\n      throw new Error('coordinate errors sy should be equal to ey !!!');\r\n    }\r\n    const { draw, color } = this;\r\n    const width = this.lineWidth();\r\n    draw.attr({\r\n      fillStyle: color,\r\n    });\r\n    const diff = ex - sx;\r\n    draw.fillRect(sx, sy, diff, width);\r\n  }\r\n}\r\n\r\nexport { Grid };\r\n","class Box {\r\n  constructor({ rect, draw }) {\r\n    this.draw = draw;\r\n    this.rect = rect;\r\n    this.backgroundColor = null;\r\n  }\r\n\r\n  drawBackgroundColor(color) {\r\n    if (color) {\r\n      this.backgroundColor = color;\r\n      const { draw, rect } = this;\r\n      draw.attr({\r\n        fillStyle: color,\r\n      });\r\n      draw.fillRect(rect.x, rect.y, rect.width, rect.height);\r\n    }\r\n  }\r\n}\r\n\r\nexport { Box };\r\n","import { Utils } from '../../utils/Utils';\r\n\r\nclass History {\r\n\r\n  constructor(option) {\r\n    this._ = [];\r\n    this.option = Utils.mergeDeep({}, {\r\n      onAdd: () => {},\r\n      onPop: () => {},\r\n      onClear: () => {},\r\n    }, option);\r\n  }\r\n\r\n  add(ele) {\r\n    this._.unshift(ele);\r\n    this.option.onAdd(ele);\r\n  }\r\n\r\n  pop() {\r\n    if (!this.isEmpty()) {\r\n      const result = this._.shift();\r\n      this.option.onPop(result);\r\n    }\r\n  }\r\n\r\n  get() {\r\n    return this._[0];\r\n  }\r\n\r\n  clear() {\r\n    this._ = [];\r\n    this.option.onClear();\r\n  }\r\n\r\n  isEmpty() {\r\n    return this._.length === 0;\r\n  }\r\n\r\n  length() {\r\n    return this._.length;\r\n  }\r\n}\r\n\r\nexport { History };\r\n","import { History } from './History';\r\nimport { Utils } from '../../utils/Utils';\r\nimport { Constant } from '../../utils/Constant';\r\n\r\nclass DataSnapshot {\r\n\r\n  constructor(table) {\r\n    this.table = table;\r\n    const { cells, merges } = table;\r\n    this.undo = new History({\r\n      onPop: (e) => {\r\n        this.redo.add(Utils.cloneDeep(e));\r\n        const top = this.undo.get();\r\n        cells.setData(Utils.cloneDeep(top.cells));\r\n        merges.setData(Utils.cloneDeep(top.merges));\r\n        table.trigger(Constant.TABLE_EVENT_TYPE.DATA_CHANGE);\r\n        table.render();\r\n      },\r\n    });\r\n    this.redo = new History({\r\n      onPop: (e) => {\r\n        this.undo.add(Utils.cloneDeep(e));\r\n        const top = this.undo.get();\r\n        cells.setData(Utils.cloneDeep(top.cells));\r\n        merges.setData(Utils.cloneDeep(top.merges));\r\n        table.trigger(Constant.TABLE_EVENT_TYPE.DATA_CHANGE);\r\n        table.render();\r\n      },\r\n    });\r\n    this.undo.add({\r\n      cells: Utils.cloneDeep(cells.getData()),\r\n      merges: Utils.cloneDeep(merges.getData()),\r\n    });\r\n  }\r\n\r\n  snapshot(clear = false) {\r\n    const { table } = this;\r\n    const { cells, merges } = table;\r\n    if (clear) {\r\n      this.redo.clear();\r\n    }\r\n    this.undo.add({\r\n      cells: Utils.cloneDeep(cells.getData()),\r\n      merges: Utils.cloneDeep(merges.getData()),\r\n    });\r\n    table.trigger(Constant.TABLE_EVENT_TYPE.DATA_CHANGE);\r\n  }\r\n}\r\n\r\nexport { DataSnapshot };\r\n","import { RectRange } from '../RectRange';\nimport { Rect } from '../../../canvas/Rect';\nimport { Utils } from '../../../utils/Utils';\nimport { ALIGN, TEXT_DIRECTION, TEXT_WRAP } from '../../../canvas/Font';\n\nclass LineHandle {\n\n  constructor(table) {\n    this.table = table;\n  }\n\n  /**\n   * 绘制单元格左边垂直线段时\n   * 判断线段左右的单元格中\n   * 是否存在overflow裁剪类型\n   * 的单元格, 如果有判断宽度是否\n   * 覆盖了当前线段如果覆盖了\n   * 则跳过该线段绘制\n   * @param ci\n   * @param ri\n   */\n  vLineRightOverFlowChecked(ci, ri) {\n    const { table } = this;\n    const { cells, cols, merges } = table;\n    const { len } = cols;\n    const master = cells.getMergeCellOrCell(ri, ci);\n    const next = cells.getMergeCellOrCell(ri, ci + 1);\n    const merge = merges.getFirstIncludes(ri, ci + 1);\n\n    if (merge) {\n      return true;\n    }\n\n    let checkedRight = true;\n    let checkedLeft = true;\n\n    // 检查master单元格是否越界\n    if (master && !Utils.isBlank(master.text)) {\n      const { fontAttr } = master;\n      const { direction } = fontAttr;\n      let checked = true;\n      // 检查文本的绘制方向\n      // 区别对待旋转文本\n      if (direction === TEXT_DIRECTION.ANGLE) {\n        const { angle, textWrap } = fontAttr;\n        if (angle === 90 || angle === -90) {\n          checked = false;\n        }\n        if (textWrap === TEXT_WRAP.TRUNCATE) {\n          checked = false;\n        }\n      } else {\n        // 跳过裁剪类型不是overflow\n        // 类型的单元格\n        // eslint-disable-next-line no-lonely-if\n        const { textWrap } = fontAttr;\n        if (textWrap !== TEXT_WRAP.OVER_FLOW) {\n          checked = false;\n        }\n      }\n      // 跳过对齐方式不是left和center\n      // 类型的单元格\n      const { align } = fontAttr;\n      const maxWidth = cols.getWidth(ci);\n      if (align !== ALIGN.left && align !== ALIGN.center) {\n        checked = false;\n      }\n      // 单元格符合检查条件\n      // 则检查宽度是否越界\n      if (checked) {\n        // 检查当前单元格的内容\n        // 宽度是否越界\n        const width = this.getCellContentWidth(master, ci);\n        if (width > maxWidth) {\n          // 只有next单元格是空时\n          // 才允许不绘制边框\n          if (next === null || Utils.isBlank(next.text)) checkedLeft = false;\n        }\n      }\n    }\n\n    // 检查左边是否越界\n    let leftWidth = cols.getWidth(ci - 1) + cols.getWidth(ci);\n    for (let i = ci - 1; i >= 0; i -= 1, leftWidth += cols.getWidth(i)) {\n      // 过滤掉空单元格\n      const cell = cells.getCell(ri, i);\n      if (cell === null) continue;\n      const { text } = cell;\n      if (Utils.isBlank(text)) continue;\n      // 检查文本的绘制方向\n      // 区别对待旋转文本\n      const { fontAttr } = cell;\n      const { direction } = fontAttr;\n      if (direction === TEXT_DIRECTION.ANGLE) {\n        const { angle, textWrap } = fontAttr;\n        if (angle === 90 || angle === -90) { break; }\n        if (textWrap === TEXT_WRAP.TRUNCATE) { break; }\n      } else {\n        // 跳过裁剪类型不是overflow\n        // 类型的单元格\n        const { textWrap } = fontAttr;\n        if (textWrap !== TEXT_WRAP.OVER_FLOW) { break; }\n        // 跳过对齐方式不是left和center\n        // 类型的单元格\n        const { align } = fontAttr;\n        if (align !== ALIGN.left && align !== ALIGN.center) { break; }\n      }\n      // 检查当前单元格的内容\n      // 宽度是否越界\n      const width = this.getCellContentWidth(cell, i);\n      if (width > leftWidth) {\n        // 只有master单元格和\n        // next单元格都是空时\n        // 才允许不绘制边框\n        const masterBlank = master === null || Utils.isBlank(master.text);\n        const nextBlank = next === null || Utils.isBlank(next.text);\n        if (masterBlank && nextBlank) {\n          checkedLeft = false;\n        }\n      }\n      break;\n    }\n\n    // 检查右边是否越界\n    let rightWidth = cols.getWidth(ci + 1);\n    for (let j = ci + 1; j <= len; j += 1, rightWidth += cols.getWidth(j)) {\n      // 过滤掉空单元格\n      const cell = cells.getCell(ri, j);\n      if (cell === null) continue;\n      const { text } = cell;\n      if (Utils.isBlank(text)) continue;\n      // 检查文本的绘制方向\n      // 区别对待旋转文本\n      const { fontAttr } = cell;\n      const { direction } = fontAttr;\n      if (direction === TEXT_DIRECTION.ANGLE) {\n        const { angle, textWrap } = fontAttr;\n        if (angle === 90 || angle === -90) { break; }\n        if (textWrap === TEXT_WRAP.TRUNCATE) { break; }\n      } else {\n        // 跳过裁剪类型不是overflow\n        // 类型的单元格\n        const { textWrap } = fontAttr;\n        if (textWrap !== TEXT_WRAP.OVER_FLOW) { break; }\n        // 跳过对齐方式不是right和center\n        // 类型的单元格\n        const { align } = fontAttr;\n        if (align !== ALIGN.right && align !== ALIGN.center) { break; }\n      }\n      // 检查当前单元格的内容\n      // 宽度是否越界\n      const width = this.getCellContentWidth(cell, j);\n      if (width > rightWidth) {\n        // 只有master单元格为\n        // 空时才允许不绘制边框\n        if (master === null || Utils.isBlank(master.text)) {\n          checkedRight = false;\n        }\n      }\n      break;\n    }\n\n    return checkedLeft && checkedRight;\n  }\n\n  /**\n   * 绘制单元格右边垂直线段时\n   * 判断线段左右的单元格中\n   * 是否存在overflow裁剪类型\n   * 的单元格, 如果有判断宽度是否\n   * 覆盖了当前线段如果覆盖了\n   * 则跳过该线段绘制\n   * @param ci\n   * @param ri\n   */\n  vLineLeftOverFlowChecked(ci, ri) {\n    const { table } = this;\n    const { cells, cols, merges } = table;\n    const { len } = cols;\n    const master = cells.getMergeCellOrCell(ri, ci);\n    const last = cells.getMergeCellOrCell(ri, ci - 1);\n    const merge = merges.getFirstIncludes(ri, ci - 1);\n\n    if (merge) {\n      return true;\n    }\n\n    let checkedRight = true;\n    let checkedLeft = true;\n\n    // 检查master单元格是否越界\n    if (master && !Utils.isBlank(master.text)) {\n      const { fontAttr } = master;\n      const { direction } = fontAttr;\n      let checked = true;\n      // 检查文本的绘制方向\n      // 区别对待旋转文本\n      if (direction === TEXT_DIRECTION.ANGLE) {\n        const { angle, textWrap } = fontAttr;\n        if (angle === 90 || angle === -90) {\n          checked = false;\n        }\n        if (textWrap === TEXT_WRAP.TRUNCATE) {\n          checked = false;\n        }\n      } else {\n        // 跳过裁剪类型不是overflow\n        // 类型的单元格\n        // eslint-disable-next-line no-lonely-if\n        const { textWrap } = fontAttr;\n        if (textWrap !== TEXT_WRAP.OVER_FLOW) {\n          checked = false;\n        }\n      }\n      // 跳过对齐方式不是left和center\n      // 类型的单元格\n      const { align } = fontAttr;\n      const maxWidth = cols.getWidth(ci);\n      if (align !== ALIGN.right && align !== ALIGN.center) {\n        checked = false;\n      }\n      // 单元格符合检查条件\n      // 则检查宽度是否越界\n      if (checked) {\n        // 检查当前单元格的内容\n        // 宽度是否越界\n        const width = this.getCellContentWidth(master, ci);\n        if (width > maxWidth) {\n          // 只有next单元格是空时\n          // 才允许不绘制边框\n          if (last === null || Utils.isBlank(last.text)) checkedLeft = false;\n        }\n      }\n    }\n\n    // 检查左边是否越界\n    let leftWidth = cols.getWidth(ci - 1);\n    for (let i = ci - 1; i >= 0; i -= 1, leftWidth += cols.getWidth(i)) {\n      // 过滤掉空单元格\n      const cell = cells.getCell(ri, i);\n      if (cell === null) continue;\n      const { text } = cell;\n      if (Utils.isBlank(text)) continue;\n      // 检查文本的绘制方向\n      // 区别对待旋转文本\n      const { fontAttr } = cell;\n      const { direction } = fontAttr;\n      if (direction === TEXT_DIRECTION.ANGLE) {\n        const { angle, textWrap } = fontAttr;\n        if (angle === 90 || angle === -90) { break; }\n        if (textWrap === TEXT_WRAP.TRUNCATE) { break; }\n      } else {\n        // 跳过裁剪类型不是overflow\n        // 类型的单元格\n        const { textWrap } = fontAttr;\n        if (textWrap !== TEXT_WRAP.OVER_FLOW) { break; }\n        // 跳过对齐方式不是left和center\n        // 类型的单元格\n        const { align } = fontAttr;\n        if (align !== ALIGN.left && align !== ALIGN.center) { break; }\n      }\n      // 检查当前单元格的内容\n      // 宽度是否越界\n      const width = this.getCellContentWidth(cell, i);\n      if (width > leftWidth) {\n        // 只有master单元格为\n        // 空时才允许不绘制边框\n        if (master === null || Utils.isBlank(master.text)) {\n          checkedLeft = false;\n        }\n      }\n      break;\n    }\n\n    // 检查右边是否越界\n    let rightWidth = cols.getWidth(ci + 1) + cols.getWidth(ci);\n    for (let j = ci + 1; j <= len; j += 1, rightWidth += cols.getWidth(j)) {\n      // 过滤掉空单元格\n      const cell = cells.getCell(ri, j);\n      if (cell === null) continue;\n      const { text } = cell;\n      if (Utils.isBlank(text)) continue;\n      // 检查文本的绘制方向\n      // 区别对待旋转文本\n      const { fontAttr } = cell;\n      const { direction } = fontAttr;\n      if (direction === TEXT_DIRECTION.ANGLE) {\n        const { angle, textWrap } = fontAttr;\n        if (angle === 90 || angle === -90) { break; }\n        if (textWrap === TEXT_WRAP.TRUNCATE) { break; }\n      } else {\n        // 跳过裁剪类型不是overflow\n        // 类型的单元格\n        const { textWrap } = fontAttr;\n        if (textWrap !== TEXT_WRAP.OVER_FLOW) { break; }\n        // 跳过对齐方式不是right和center\n        // 类型的单元格\n        const { align } = fontAttr;\n        if (align !== ALIGN.right && align !== ALIGN.center) { break; }\n      }\n      // 检查当前单元格的内容\n      // 宽度是否越界\n      const width = this.getCellContentWidth(cell, j);\n      if (width > rightWidth) {\n        // 只有master单元格和\n        // last单元格都是空时\n        // 才允许不绘制边框\n        const masterBlank = master === null || Utils.isBlank(master.text);\n        const nextBlank = last === null || Utils.isBlank(last.text);\n        if (masterBlank && nextBlank) {\n          checkedRight = false;\n        }\n      }\n      break;\n    }\n\n    return checkedLeft && checkedRight;\n  }\n\n  /**\n   * 计算单元格内容宽度\n   * @param cell\n   * @param ci\n   * @returns {number|*}\n   */\n  getCellContentWidth(cell, ci) {\n    const { table } = this;\n    const { cols } = table;\n    const colWidth = cols.getWidth(ci);\n    const { contentWidth, fontAttr } = cell;\n    const { align } = fontAttr;\n    switch (align) {\n      case ALIGN.right:\n      case ALIGN.left:\n        return contentWidth;\n      case ALIGN.center:\n        return colWidth + ((contentWidth - colWidth) / 2);\n      default:\n        return 0;\n    }\n  }\n\n  hEach({\n    viewRange = new RectRange(0, 0, 0, 0),\n    newRow = () => true,\n    filter = () => true,\n    jump = () => true,\n    handle = () => true,\n    endRow = () => true,\n    bx = 0,\n    by = 0,\n  }) {\n    const { table } = this;\n    const { cols, rows } = table;\n    const {\n      sri, eri, sci, eci,\n    } = viewRange;\n    let y = by;\n    for (let i = sri; i <= eri; i += 1) {\n      const height = rows.getHeight(i);\n      let x = bx;\n      newRow(i, y);\n      for (let j = sci; j <= eci; j += 1) {\n        const width = cols.getWidth(j);\n        const result = filter(i, j, x, y);\n        if (result) {\n          handle(i, j, x, y);\n        } else {\n          jump(i, j, x, y);\n        }\n        x += width;\n      }\n      endRow();\n      y += height;\n    }\n  }\n\n  vEach({\n    viewRange = new RectRange(0, 0, 0, 0),\n    newCol = () => true,\n    filter = () => true,\n    jump = () => true,\n    handle = () => true,\n    endCol = () => true,\n    bx = 0,\n    by = 0,\n  }) {\n    const { table } = this;\n    const { cols, rows } = table;\n    const {\n      sri, eri, sci, eci,\n    } = viewRange;\n    let x = bx;\n    for (let i = sci; i <= eci; i += 1) {\n      const width = cols.getWidth(i);\n      let y = by;\n      newCol(i, x);\n      for (let j = sri; j <= eri; j += 1) {\n        const height = rows.getHeight(j);\n        const result = filter(i, j, x, y);\n        if (result) {\n          handle(i, j, x, y);\n        } else {\n          jump(i, j, x, y);\n        }\n        y += height;\n      }\n      endCol();\n      x += width;\n    }\n  }\n\n  viewRangeAndMergeCoincideView({\n    viewRange = new RectRange(0, 0, 0, 0),\n  }) {\n    const { table } = this;\n    const { merges, cols, rows } = table;\n    const filter = [];\n    const result = [];\n    this.hEach({\n      viewRange,\n      handle: (row, col, x, y) => {\n        const merge = merges.getFirstIncludes(row, col);\n        if (merge && filter.indexOf(merge) === -1) {\n          filter.push(merge);\n          const view = viewRange.coincide(merge);\n          const width = cols.sectionSumWidth(view.sci, view.eci);\n          const height = rows.sectionSumHeight(view.sri, view.eri);\n          const rect = new Rect({ x, y, width, height });\n          result.push({ rect, view, merge });\n        }\n      },\n    });\n    return result;\n  }\n\n  coincideViewBrink({\n    coincideView,\n  }) {\n    const { table } = this;\n    const { cols, rows } = table;\n    const result = [];\n    for (let i = 0; i < coincideView.length; i += 1) {\n      const { view, rect, merge } = coincideView[i];\n      const brink = view.brink();\n      const top = {\n        view: brink.top,\n        x: rect.x,\n        y: rect.y,\n      };\n      const left = {\n        view: brink.left,\n        x: rect.x,\n        y: rect.y,\n      };\n      const bottom = {\n        view: brink.bottom,\n        x: rect.x,\n        y: rect.y + rect.height - rows.rectRangeSumHeight(brink.bottom),\n      };\n      const right = {\n        view: brink.right,\n        x: rect.x + rect.width - cols.rectRangeSumWidth(brink.right),\n        y: rect.y,\n      };\n      const item = {};\n      if (merge.sri === view.sri) {\n        item.top = top;\n      }\n      if (merge.sci === view.sci) {\n        item.left = left;\n      }\n      if (merge.eri === view.eri) {\n        item.bottom = bottom;\n      }\n      if (merge.eci === view.eci) {\n        item.right = right;\n      }\n      result.push(item);\n    }\n    return result;\n  }\n}\n\nexport { LineHandle };\n","import { EventBind } from '../../utils/EventBind';\r\nimport { Constant } from '../../utils/Constant';\r\n\r\n/* global document */\r\n\r\nclass KeyboardManage {\r\n\r\n  constructor() {\r\n    this.pool = [];\r\n    this.active = null;\r\n    this.bind();\r\n  }\r\n\r\n  register({ el, key = null, code = null, callback }) {\r\n    this.pool.push({ el, key, code, callback });\r\n    const len = this.pool.length - 1;\r\n    EventBind.bind(el, Constant.SYSTEM_EVENT_TYPE.MOUSE_DOWN, () => {\r\n      this.active = this.pool[len];\r\n    });\r\n  }\r\n\r\n  bind() {\r\n    EventBind.bind(document, Constant.SYSTEM_EVENT_TYPE.KEY_DOWN, (e) => {\r\n      const { active } = this;\r\n      const { keyCode } = e;\r\n      if (active) {\r\n        const { key, code, callback } = active;\r\n        if (key) {\r\n          if (e[key] && keyCode === code) {\r\n            callback(e);\r\n          }\r\n        } else if (keyCode === code) {\r\n          callback(e);\r\n        }\r\n      }\r\n      if (keyCode === 9) {\r\n        e.preventDefault();\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport { KeyboardManage };\r\n","import { Cell } from './Cell';\r\nimport { Utils } from '../../../utils/Utils';\r\n\r\n/**\r\n * Cells\r\n * @author jerry\r\n */\r\nclass Cells {\r\n\r\n  /**\r\n   * Cells\r\n   * @param table\r\n   * @param cols\r\n   * @param rows\r\n   * @param data\r\n   */\r\n  constructor({\r\n    table, cols, rows, data = [],\r\n  }) {\r\n    this.table = table;\r\n    this.cols = cols;\r\n    this.rows = rows;\r\n    this.data = data;\r\n  }\r\n\r\n  /**\r\n   * 获取指定行和列的单元格\r\n   * @param ri\r\n   * @param ci\r\n   */\r\n  getCell(ri, ci) {\r\n    const row = this.data[ri];\r\n    if (row && row[ci]) {\r\n      let item = row[ci];\r\n      if (item instanceof Cell) {\r\n        return row[ci];\r\n      }\r\n      if (Utils.isString(item)) {\r\n        item = {\r\n          text: item,\r\n        };\r\n      }\r\n      row[ci] = new Cell(item);\r\n      return row[ci];\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * 获取指定行和列的单元格，如果获取到的\r\n   * 单元格是合并单元格的部分则返回合并单元格起始\r\n   * 单元格\r\n   * @param ri\r\n   * @param ci\r\n   */\r\n  getMergeCellOrCell(ri, ci) {\r\n    const { table } = this;\r\n    const { merges } = table;\r\n    const merge = merges.getFirstIncludes(ri, ci);\r\n    if (merge) {\r\n      return this.getCell(merge.sri, merge.sci);\r\n    }\r\n    return this.getCell(ri, ci);\r\n  }\r\n\r\n  /**\r\n   * 获取指定行列的单元格如果没有返回新的\r\n   * @param ri\r\n   * @param ci\r\n   */\r\n  getCellOrNew(ri, ci) {\r\n    if (Utils.isUnDef(this.data[ri])) {\r\n      this.data[ri] = [];\r\n    }\r\n    if (Utils.isUnDef(this.data[ri][ci])) {\r\n      this.data[ri][ci] = {\r\n        text: '',\r\n      };\r\n    }\r\n    return this.getCell(ri, ci);\r\n  }\r\n\r\n  /**\r\n   * 设置指定单元格\r\n   * @param ri\r\n   * @param ci\r\n   * @param cell\r\n   */\r\n  setCell(ri, ci, cell) {\r\n    const row = this.data[ri];\r\n    if (row && row[ci]) {\r\n      row[ci] = cell;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置指定单元格\r\n   * 如果不存在则创建\r\n   * @param ri\r\n   * @param ci\r\n   * @param cell\r\n   */\r\n  setCellOrNew(ri, ci, cell) {\r\n    if (Utils.isUnDef(this.data[ri])) {\r\n      this.data[ri] = [];\r\n    }\r\n    this.data[ri][ci] = cell;\r\n  }\r\n\r\n  /**\r\n   * getData\r\n   * @returns {*[]}\r\n   */\r\n  getData() {\r\n    return this.data;\r\n  }\r\n\r\n  /**\r\n   * setData\r\n   * @param data\r\n   * @returns {Cells}\r\n   */\r\n  setData(data = []) {\r\n    this.data = data;\r\n    return this;\r\n  }\r\n}\r\n\r\nexport { Cells };\r\n","import { Rect } from '../../canvas/Rect';\r\nimport { ALIGN, TEXT_DIRECTION, TEXT_WRAP, VERTICAL_ALIGN } from '../../canvas/Font';\r\nimport { Utils } from '../../utils/Utils';\r\n\r\n/**\r\n * CellsHelper\r\n * @author jerry\r\n */\r\nclass CellsHelper {\r\n\r\n  constructor({ cells, merges, rows, cols }) {\r\n    this.cells = cells;\r\n    this.merges = merges;\r\n    this.rows = rows;\r\n    this.cols = cols;\r\n  }\r\n\r\n  getCellTextMaxHeight(ri, ci) {\r\n    const { cells, rows } = this;\r\n    const cell = cells.getCell(ri, ci);\r\n    const { fontAttr } = cell;\r\n    const { verticalAlign } = fontAttr;\r\n    let height = 0;\r\n    let offset = 0;\r\n    if (verticalAlign === VERTICAL_ALIGN.top) {\r\n      for (let i = ri, { len } = rows; i <= len; i += 1) {\r\n        const cell = cells.getCell(i, ci);\r\n        if (i === ci) {\r\n          height += rows.getHeight(i);\r\n        } else if (Utils.isUnDef(cell) || Utils.isBlank(cell.text)) {\r\n          height += rows.getHeight(i);\r\n        } else {\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    if (verticalAlign === VERTICAL_ALIGN.center) {\r\n      for (let i = ri, { len } = rows; i <= len; i += 1) {\r\n        const cell = cells.getCell(i, ci);\r\n        if (i === ci) {\r\n          height += rows.getHeight(i);\r\n        } else if (Utils.isUnDef(cell) || Utils.isBlank(cell.text)) {\r\n          height += rows.getHeight(i);\r\n        } else {\r\n          break;\r\n        }\r\n      }\r\n      for (let i = ri - 1; i >= 0; i -= 1) {\r\n        const cell = cells.getCell(ri, i);\r\n        if (Utils.isUnDef(cell) || Utils.isBlank(cell.text)) {\r\n          const tmp = rows.getHeight(i);\r\n          height += tmp;\r\n          offset -= tmp;\r\n        } else {\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    if (verticalAlign === VERTICAL_ALIGN.bottom) {\r\n      for (let i = ri; i >= 0; i -= 1) {\r\n        const cell = cells.getCell(ri, i);\r\n        if (i === ci) {\r\n          height += rows.getHeight(i);\r\n        } else if (Utils.isUnDef(cell) || Utils.isBlank(cell.text)) {\r\n          const tmp = rows.getHeight(i);\r\n          height += tmp;\r\n          offset -= tmp;\r\n        } else {\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    return { height, offset };\r\n  }\r\n\r\n  getCellTextMaxWidth(ri, ci) {\r\n    const { cells, cols, merges } = this;\r\n    const cell = cells.getCell(ri, ci);\r\n    const { fontAttr } = cell;\r\n    const { align } = fontAttr;\r\n    let width = 0;\r\n    let offset = 0;\r\n    // 左边对齐\r\n    if (align === ALIGN.left) {\r\n      // 计算当前单元格右边\r\n      // 空白的单元格的总宽度\r\n      for (let i = ci, { len } = cols; i <= len; i += 1) {\r\n        const cell = cells.getCell(ri, i);\r\n        const merge = merges.getFirstIncludes(ri, i);\r\n        if (i === ci) {\r\n          width += cols.getWidth(i);\r\n        } else if ((Utils.isUnDef(cell) || Utils.isBlank(cell.text)) && Utils.isUnDef(merge)) {\r\n          width += cols.getWidth(i);\r\n        } else {\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    // 居中对其\r\n    if (align === ALIGN.center) {\r\n      let rightWidth = 0;\r\n      let leftWidth = 0;\r\n      for (let i = ci + 1, { len } = cols; i <= len; i += 1) {\r\n        const cell = cells.getCell(ri, i);\r\n        const merge = merges.getFirstIncludes(ri, i);\r\n        if ((Utils.isUnDef(cell) || Utils.isBlank(cell.text)) && Utils.isUnDef(merge)) {\r\n          rightWidth += cols.getWidth(i);\r\n        } else {\r\n          break;\r\n        }\r\n      }\r\n      for (let i = ci - 1; i >= 0; i -= 1) {\r\n        const cell = cells.getCell(ri, i);\r\n        const merge = merges.getFirstIncludes(ri, i);\r\n        if ((Utils.isUnDef(cell) || Utils.isBlank(cell.text)) && Utils.isUnDef(merge)) {\r\n          const tmp = cols.getWidth(i);\r\n          leftWidth += tmp;\r\n          offset -= tmp;\r\n        } else {\r\n          break;\r\n        }\r\n      }\r\n      width = cols.getWidth(ci) + leftWidth + rightWidth;\r\n    }\r\n    // 右边对其\r\n    if (align === ALIGN.right) {\r\n      // 计算当前单元格左边\r\n      // 空白的单元格的总宽度\r\n      for (let i = ci; i >= 0; i -= 1) {\r\n        const cell = cells.getCell(ri, i);\r\n        const merge = merges.getFirstIncludes(ri, i);\r\n        if (i === ci) {\r\n          width += cols.getWidth(i);\r\n        } else if ((Utils.isUnDef(cell) || Utils.isBlank(cell.text)) && Utils.isUnDef(merge)) {\r\n          const tmp = cols.getWidth(i);\r\n          width += tmp;\r\n          offset -= tmp;\r\n        } else {\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    return { width, offset };\r\n  }\r\n\r\n  getCellOverFlow(ri, ci, rect, cell) {\r\n    const { fontAttr } = cell;\r\n    const { direction, textWrap } = fontAttr;\r\n    const { x, y, width, height } = rect;\r\n    if (textWrap === TEXT_WRAP.OVER_FLOW) {\r\n      if (direction === TEXT_DIRECTION.VERTICAL) {\r\n        const max = this.getCellTextMaxHeight(ri, ci);\r\n        return new Rect({ x, y: y + max.offset, width, height: max.height });\r\n      }\r\n      const max = this.getCellTextMaxWidth(ri, ci);\r\n      return new Rect({ x: x + max.offset, y, width: max.width, height });\r\n    }\r\n    return null;\r\n  }\r\n\r\n  getCellByViewRange({\r\n    rectRange, callback, startX = 0, startY = 0,\r\n  }) {\r\n    const { rows, cols, cells } = this;\r\n    const {\r\n      sri, eri, sci, eci,\r\n    } = rectRange;\r\n    let y = startY;\r\n    for (let i = sri; i <= eri; i += 1) {\r\n      const height = rows.getHeight(i);\r\n      let x = startX;\r\n      for (let j = sci; j <= eci; j += 1) {\r\n        const width = cols.getWidth(j);\r\n        const cell = cells.getCell(i, j);\r\n        if (cell) {\r\n          const rect = new Rect({ x, y, width, height });\r\n          const overFlow = this.getCellOverFlow(i, j, rect, cell);\r\n          const result = callback(i, j, cell, rect, overFlow);\r\n          if (result === false) {\r\n            return;\r\n          }\r\n        }\r\n        x += width;\r\n      }\r\n      y += height;\r\n    }\r\n  }\r\n\r\n  getCellOrNewCellByViewRange({\r\n    rectRange, callback, startX = 0, startY = 0,\r\n  }) {\r\n    const { rows, cols, cells } = this;\r\n    const {\r\n      sri, eri, sci, eci,\r\n    } = rectRange;\r\n    let y = startY;\r\n    for (let i = sri; i <= eri; i += 1) {\r\n      const height = rows.getHeight(i);\r\n      let x = startX;\r\n      for (let j = sci; j <= eci; j += 1) {\r\n        const width = cols.getWidth(j);\r\n        const cell = cells.getCellOrNew(i, j);\r\n        const rect = new Rect({ x, y, width, height });\r\n        const overFlow = this.getCellOverFlow(i, j, rect, cell);\r\n        const result = callback(i, j, cell, rect, overFlow);\r\n        if (result === false) {\r\n          return;\r\n        }\r\n        x += width;\r\n      }\r\n      y += height;\r\n    }\r\n  }\r\n\r\n  getMergeCellByViewRange({\r\n    rectRange, callback, startX = 0, startY = 0,\r\n  }) {\r\n    const { rows, cols, cells, merges } = this;\r\n    const {\r\n      sri, eri, sci, eci,\r\n    } = rectRange;\r\n    const filter = [];\r\n    for (let i = sri; i <= eri; i += 1) {\r\n      for (let j = sci; j <= eci; j += 1) {\r\n        const merge = merges.getFirstIncludes(i, j);\r\n        if (merge && !filter.find(item => item === merge)) {\r\n          filter.push(merge);\r\n          const cell = cells.getCellOrNew(merge.sri, merge.sci);\r\n          const width = cols.sectionSumWidth(merge.sci, merge.eci);\r\n          const height = rows.sectionSumHeight(merge.sri, merge.eri);\r\n          const minSri = Math.min(rectRange.sri, merge.sri);\r\n          const minSci = Math.min(rectRange.sci, merge.sci);\r\n          let maxSri = Math.max(rectRange.sri, merge.sri);\r\n          let maxSci = Math.max(rectRange.sci, merge.sci);\r\n          maxSri -= 1;\r\n          maxSci -= 1;\r\n          let x = cols.sectionSumWidth(minSci, maxSci);\r\n          let y = rows.sectionSumHeight(minSri, maxSri);\r\n          x = rectRange.sci > merge.sci ? x * -1 : x;\r\n          y = rectRange.sri > merge.sri ? y * -1 : y;\r\n          x += startX;\r\n          y += startY;\r\n          const rect = new Rect({ x, y, width, height });\r\n          callback(rect, cell);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  getCellSkipMergeCellByViewRange({\r\n    rectRange, callback, startX = 0, startY = 0,\r\n  }) {\r\n    const { merges } = this;\r\n    this.getCellByViewRange({\r\n      rectRange,\r\n      callback: (ri, ci, cell, rect, overflow) => {\r\n        const merge = merges.getFirstIncludes(ri, ci);\r\n        if (merge === null) {\r\n          callback(ri, ci, cell, rect, overflow);\r\n        }\r\n      },\r\n      startX,\r\n      startY,\r\n    });\r\n  }\r\n}\r\n\r\nexport { CellsHelper };\r\n","/**\n * GridLineHandle\n * @author jerry\n */\nclass GridLineHandle {\n\n  /**\n   * GridLineHandle\n   * @param table\n   */\n  constructor(table) {\n    this.table = table;\n  }\n\n  /**\n   * 检查垂直线段是否需要绘制\n   * @param ci\n   * @param ri\n   * @returns {boolean}\n   */\n  vLineBorderChecked(ci, ri) {\n    const { table } = this;\n    const { cells } = table;\n    const cell = cells.getMergeCellOrCell(ri, ci);\n    const nextCell = cells.getMergeCellOrCell(ri, ci + 1);\n    // 跳过绘制边框的单元格\n    if (cell && nextCell) {\n      return !(cell.borderAttr.right.display || nextCell.borderAttr.left.display);\n    }\n    if (cell) {\n      return !cell.borderAttr.right.display;\n    }\n    if (nextCell) {\n      return !nextCell.borderAttr.left.display;\n    }\n    return true;\n  }\n\n  /**\n   * 检查水平线段是否需要绘制\n   * @param ri\n   * @param ci\n   * @returns {boolean}\n   */\n  hLineBorderChecked(ri, ci) {\n    const { table } = this;\n    const { cells } = table;\n    const cell = cells.getMergeCellOrCell(ri, ci);\n    const nextCell = cells.getMergeCellOrCell(ri + 1, ci);\n    // 跳过绘制边框的单元格\n    if (cell && nextCell) {\n      return !(cell.borderAttr.bottom.display || nextCell.borderAttr.top.display);\n    }\n    if (cell) {\n      return !cell.borderAttr.bottom.display;\n    }\n    if (nextCell) {\n      return !nextCell.borderAttr.top.display;\n    }\n    return true;\n  }\n\n  /**\n   * 水平线段位置计算\n   * @param viewRange\n   * @param bx\n   * @param by\n   * @param filter\n   * @returns {[]}\n   */\n  gridHLine(viewRange, bx = 0, by = 0, filter = () => true) {\n    const { table } = this;\n    const { lineHandle, cols, rows } = table;\n    const line = [];\n    let sx;\n    let sy;\n    let ex;\n    let ey;\n    let breakpoint;\n    lineHandle.hEach({\n      viewRange,\n      newRow: (row, y) => {\n        const height = rows.getHeight(row);\n        sx = bx;\n        sy = by + y + height;\n        ex = sx;\n        ey = sy;\n        breakpoint = false;\n      },\n      filter,\n      jump: (row, col) => {\n        if (breakpoint) {\n          breakpoint = false;\n          line.push({ sx, sy, ex, ey });\n        }\n        const width = cols.getWidth(col);\n        sx = ex + width;\n        ex = sx;\n      },\n      handle: (row, col) => {\n        breakpoint = true;\n        const width = cols.getWidth(col);\n        ex += width;\n      },\n      endRow: () => {\n        if (breakpoint) {\n          line.push({ sx, sy, ex, ey });\n        }\n      },\n    });\n    return line;\n  }\n\n  /**\n   * 垂直线段位置计算\n   * @param viewRange\n   * @param bx\n   * @param by\n   * @param filter\n   * @returns {[]}\n   */\n  gridVLine(viewRange, bx = 0, by = 0, filter = () => true) {\n    const { table } = this;\n    const { lineHandle, cols, rows } = table;\n    const line = [];\n    let sx;\n    let sy;\n    let ex;\n    let ey;\n    let breakpoint;\n    lineHandle.vEach({\n      viewRange,\n      newCol: (col, x) => {\n        const width = cols.getWidth(col);\n        sx = bx + x + width;\n        sy = by;\n        ex = sx;\n        ey = sy;\n        breakpoint = false;\n      },\n      filter,\n      jump: (col, row) => {\n        if (breakpoint) {\n          breakpoint = false;\n          line.push({ sx, sy, ex, ey });\n        }\n        const height = rows.getHeight(row);\n        sy = ey + height;\n        ey = sy;\n      },\n      handle: (col, row) => {\n        breakpoint = true;\n        const height = rows.getHeight(row);\n        ey += height;\n      },\n      endCol: () => {\n        if (breakpoint) {\n          line.push({ sx, sy, ex, ey });\n        }\n      },\n    });\n    return line;\n  }\n\n  /**\n   * 水平线段位置计算\n   * 检查水平线段是否需要绘制\n   * @param viewRange\n   * @returns {*[]}\n   */\n  hLine(viewRange) {\n    const { table } = this;\n    const { merges } = table;\n    return this.gridHLine(viewRange, 0, 0, (ri, ci) => {\n      const merge = merges.getFirstIncludes(ri, ci);\n      if (merge) {\n        return false;\n      }\n      return this.hLineBorderChecked(ri, ci);\n    });\n  }\n\n  /**\n   * 垂直线段位置计算\n   * 检查水平线段是否需要绘制\n   * @param viewRange\n   * @returns {*[]}\n   */\n  vLine(viewRange) {\n    const { table } = this;\n    const { merges, lineHandle } = table;\n    return this.gridVLine(viewRange, 0, 0, (ci, ri) => {\n      const merge = merges.getFirstIncludes(ri, ci);\n      if (merge) {\n        return false;\n      }\n      if (!this.vLineBorderChecked(ci, ri)) {\n        return false;\n      }\n      return lineHandle.vLineRightOverFlowChecked(ci, ri);\n    });\n  }\n\n  /**\n   * 水平合并单元格线段位置计算\n   * 检查水平线段是否需要绘制\n   * @param mergesBrink\n   * @returns {*[]}\n   */\n  hMergeLine(mergesBrink) {\n    let result = [];\n    for (let i = 0; i < mergesBrink.length; i += 1) {\n      const brink = mergesBrink[i];\n      const { bottom } = brink;\n      if (bottom) {\n        const { view, x, y } = bottom;\n        const item = this.gridHLine(view, x, y, (ri, ci) => this.hLineBorderChecked(ri, ci));\n        result = result.concat(item);\n      }\n    }\n    return result;\n  }\n\n  /**\n   *  垂直合并单元格线段位置计算\n   * 检查水平线段是否需要绘制\n   * @param mergesBrink\n   * @returns {*[]}\n   */\n  vMergeLine(mergesBrink) {\n    let result = [];\n    for (let i = 0; i < mergesBrink.length; i += 1) {\n      const brink = mergesBrink[i];\n      const { right } = brink;\n      if (right) {\n        const { view, x, y } = right;\n        const item = this.gridVLine(view, x, y, (ci, ri) => this.vLineBorderChecked(ci, ri));\n        result = result.concat(item);\n      }\n    }\n    return result;\n  }\n}\n\nexport {\n  GridLineHandle,\n};\n","\n/**\n * BorderLineHandle\n * @author jerry\n */\nclass BorderLineHandle {\n\n  constructor(table) {\n    this.table = table;\n    this.drawOptimization = true;\n    this.borderOptimization = true;\n  }\n\n  borderHTLine(viewRange, bx = 0, by = 0, filter = () => true) {\n    const { table, drawOptimization } = this;\n    const { lineHandle, cols, cells } = table;\n    const line = [];\n    let sx;\n    let sy;\n    let ex;\n    let ey;\n    lineHandle.hEach({\n      viewRange,\n      newRow: (row, y) => {\n        sx = bx;\n        sy = by + y;\n        ex = sx;\n        ey = sy;\n      },\n      filter,\n      jump: (row, col) => {\n        const width = cols.getWidth(col);\n        sx = ex + width;\n        ex = sx;\n      },\n      handle: (row, col) => {\n        const width = cols.getWidth(col);\n        const cell = cells.getCell(row, col);\n        const { borderAttr } = cell;\n        ex += width;\n        line.push({\n          sx,\n          sy,\n          ex,\n          ey,\n          row,\n          col,\n          borderAttr,\n        });\n        sx = ex;\n      },\n    });\n    if (drawOptimization) {\n      for (let i = 1; i < line.length;) {\n        const item = line[i];\n        const last = line[i - 1];\n        const ck1 = item.borderAttr.top.equal(last.borderAttr.top);\n        const ck2 = item.col - last.col === 1;\n        const ck3 = item.row === last.row;\n        if (ck1 && ck2 && ck3) {\n          last.ex = item.ex;\n          last.col = item.col;\n          line.splice(i, 1);\n        } else {\n          i += 1;\n        }\n      }\n    }\n    return line;\n  }\n\n  borderHBLine(viewRange, bx = 0, by = 0, filter = () => true) {\n    const { table, drawOptimization } = this;\n    const { lineHandle, cols, rows, cells } = table;\n    const line = [];\n    let sx;\n    let sy;\n    let ex;\n    let ey;\n    lineHandle.hEach({\n      viewRange,\n      newRow: (row, y) => {\n        const height = rows.getHeight(row);\n        sx = bx;\n        sy = by + y + height;\n        ex = sx;\n        ey = sy;\n      },\n      filter,\n      jump: (row, col) => {\n        const width = cols.getWidth(col);\n        sx = ex + width;\n        ex = sx;\n      },\n      handle: (row, col) => {\n        const width = cols.getWidth(col);\n        const cell = cells.getCell(row, col);\n        const { borderAttr } = cell;\n        ex += width;\n        line.push({\n          sx,\n          sy,\n          ex,\n          ey,\n          row,\n          col,\n          borderAttr,\n        });\n        sx = ex;\n      },\n    });\n    if (drawOptimization) {\n      for (let i = 1; i < line.length;) {\n        const item = line[i];\n        const last = line[i - 1];\n        const ck1 = item.borderAttr.bottom.equal(last.borderAttr.bottom);\n        const ck2 = item.col - last.col === 1;\n        const ck3 = item.row === last.row;\n        if (ck1 && ck2 && ck3) {\n          last.ex = item.ex;\n          last.col = item.col;\n          line.splice(i, 1);\n        } else {\n          i += 1;\n        }\n      }\n    }\n    return line;\n  }\n\n  borderVLLine(viewRange, bx = 0, by = 0, filter = () => true) {\n    const { table, drawOptimization } = this;\n    const { lineHandle, rows, cells } = table;\n    const line = [];\n    let sx;\n    let sy;\n    let ex;\n    let ey;\n    lineHandle.vEach({\n      viewRange,\n      newCol: (col, x) => {\n        sx = bx + x;\n        sy = by;\n        ex = sx;\n        ey = sy;\n      },\n      filter,\n      jump: (col, row) => {\n        const height = rows.getHeight(row);\n        sy = ey + height;\n        ey = sy;\n      },\n      handle: (col, row) => {\n        const height = rows.getHeight(row);\n        const cell = cells.getCell(row, col);\n        const { borderAttr } = cell;\n        ey += height;\n        line.push({\n          sx,\n          sy,\n          ex,\n          ey,\n          row,\n          col,\n          borderAttr,\n        });\n        sy = ey;\n      },\n    });\n    if (drawOptimization) {\n      for (let i = 1; i < line.length;) {\n        const item = line[i];\n        const last = line[i - 1];\n        const ck1 = item.borderAttr.left.equal(last.borderAttr.left);\n        const ck2 = item.row - last.row === 1;\n        const ck3 = item.col === last.col;\n        if (ck1 && ck2 && ck3) {\n          last.ey = item.ey;\n          last.row = item.row;\n          line.splice(i, 1);\n        } else {\n          i += 1;\n        }\n      }\n    }\n    return line;\n  }\n\n  borderVRLine(viewRange, bx = 0, by = 0, filter = () => true) {\n    const { table, drawOptimization } = this;\n    const { lineHandle, rows, cols, cells } = table;\n    const line = [];\n    let sx;\n    let sy;\n    let ex;\n    let ey;\n    lineHandle.vEach({\n      viewRange,\n      newCol: (col, x) => {\n        const width = cols.getWidth(col);\n        sx = bx + x + width;\n        sy = by;\n        ex = sx;\n        ey = sy;\n      },\n      filter,\n      jump: (col, row) => {\n        const height = rows.getHeight(row);\n        sy = ey + height;\n        ey = sy;\n      },\n      handle: (col, row) => {\n        const height = rows.getHeight(row);\n        const cell = cells.getCell(row, col);\n        const { borderAttr } = cell;\n        ey += height;\n        line.push({\n          sx,\n          sy,\n          ex,\n          ey,\n          row,\n          col,\n          borderAttr,\n        });\n        sy = ey;\n      },\n    });\n    if (drawOptimization) {\n      for (let i = 1; i < line.length;) {\n        const item = line[i];\n        const last = line[i - 1];\n        const ck1 = item.borderAttr.right.equal(last.borderAttr.right);\n        const ck2 = item.row - last.row === 1;\n        const ck3 = item.col === last.col;\n        if (ck1 && ck2 && ck3) {\n          last.ey = item.ey;\n          last.row = item.row;\n          line.splice(i, 1);\n        } else {\n          i += 1;\n        }\n      }\n    }\n    return line;\n  }\n\n  htLine(viewRange) {\n    const { table, borderOptimization } = this;\n    const { merges, cells } = table;\n    return this.borderHTLine(viewRange, 0, 0, (ri, ci) => {\n      const merge = merges.getFirstIncludes(ri, ci);\n      const cell = cells.getMergeCellOrCell(ri, ci);\n      const nextCell = cells.getMergeCellOrCell(ri - 1, ci);\n      // 跳过合并单元格\n      if (!cell || merge) {\n        return false;\n      }\n      // 边框绘制优先级比较\n      if (nextCell && borderOptimization) {\n        const display = cell.borderAttr.top.display && nextCell.borderAttr.bottom.display;\n        const compareTime = cell.borderAttr.top.compareTime(nextCell.borderAttr.bottom);\n        if (display) {\n          return compareTime === 1;\n        }\n      }\n      // 边框是否显示\n      return cell.borderAttr.top.display;\n    });\n  }\n\n  hbLine(viewRange) {\n    const { table, borderOptimization } = this;\n    const { merges, cells } = table;\n    return this.borderHBLine(viewRange, 0, 0, (ri, ci) => {\n      const merge = merges.getFirstIncludes(ri, ci);\n      const cell = cells.getMergeCellOrCell(ri, ci);\n      const nextCell = cells.getMergeCellOrCell(ri + 1, ci);\n      // 跳过合并单元格\n      if (!cell || merge) {\n        return false;\n      }\n      // 边框绘制优先级比较\n      if (nextCell && borderOptimization) {\n        const display = cell.borderAttr.bottom.display && nextCell.borderAttr.top.display;\n        const compareTime = cell.borderAttr.bottom.compareTime(nextCell.borderAttr.top);\n        if (display) {\n          return compareTime === 1 || compareTime === 0;\n        }\n      }\n      // 边框是否显示\n      return cell.borderAttr.bottom.display;\n    });\n  }\n\n  vlLine(viewRange) {\n    const { table, borderOptimization } = this;\n    const { merges, cells } = table;\n    return this.borderVLLine(viewRange, 0, 0, (ci, ri) => {\n      const merge = merges.getFirstIncludes(ri, ci);\n      const cell = cells.getMergeCellOrCell(ri, ci);\n      const nextCell = cells.getMergeCellOrCell(ri, ci - 1);\n      // 跳过合并单元格\n      if (!cell || merge) {\n        return false;\n      }\n      // 边框绘制优先级比较\n      if (nextCell && borderOptimization) {\n        const display = cell.borderAttr.left.display && nextCell.borderAttr.right.display;\n        const compareTime = cell.borderAttr.left.compareTime(nextCell.borderAttr.right);\n        if (display) {\n          return compareTime === 1;\n        }\n      }\n      // 边框是否显示\n      return cell.borderAttr.left.display;\n    });\n  }\n\n  vrLine(viewRange) {\n    const { table, borderOptimization } = this;\n    const { merges, cells } = table;\n    return this.borderVRLine(viewRange, 0, 0, (ci, ri) => {\n      const merge = merges.getFirstIncludes(ri, ci);\n      const cell = cells.getMergeCellOrCell(ri, ci);\n      const nextCell = cells.getMergeCellOrCell(ri, ci + 1);\n      // 跳过合并单元格\n      if (!cell || merge) {\n        return false;\n      }\n      // 边框绘制优先级比较\n      if (nextCell && borderOptimization) {\n        const display = cell.borderAttr.right.display && nextCell.borderAttr.left.display;\n        const compareTime = cell.borderAttr.right.compareTime(nextCell.borderAttr.left);\n        if (display) {\n          return compareTime === 1 || compareTime === 0;\n        }\n      }\n      // 边框是否显示\n      return cell.borderAttr.right.display;\n    });\n  }\n\n  htMergeLine(mergesBrink) {\n    const { table, borderOptimization } = this;\n    const { cells } = table;\n    let result = [];\n    for (let i = 0; i < mergesBrink.length; i += 1) {\n      const brink = mergesBrink[i];\n      const { top } = brink;\n      if (top) {\n        const item = this.borderHTLine(top.view, top.x, top.y, (ri, ci) => {\n          const cell = cells.getCell(ri, ci);\n          const nextCell = cells.getCell(ri - 1, ci);\n          if (!cell) {\n            return false;\n          }\n          // 边框绘制优先级比较\n          if (nextCell && borderOptimization) {\n            const display = cell.borderAttr.top.display && nextCell.borderAttr.bottom.display;\n            const compareTime = cell.borderAttr.top.compareTime(nextCell.borderAttr.bottom);\n            if (display) {\n              return compareTime === 1;\n            }\n          }\n          // 边框是否显示\n          return cell.borderAttr.top.display;\n        });\n        result = result.concat(item);\n      }\n    }\n    return result;\n  }\n\n  hbMergeLine(mergesBrink) {\n    const { table, borderOptimization } = this;\n    const { cells } = table;\n    let result = [];\n    for (let i = 0; i < mergesBrink.length; i += 1) {\n      const brink = mergesBrink[i];\n      const { bottom } = brink;\n      if (bottom) {\n        const item = this.borderHBLine(bottom.view, bottom.x, bottom.y, (ri, ci) => {\n          const cell = cells.getCell(ri, ci);\n          const nextCell = cells.getCell(ri + 1, ci);\n          if (!cell) {\n            return false;\n          }\n          // 边框绘制优先级比较\n          if (nextCell && borderOptimization) {\n            const display = cell.borderAttr.bottom.display && nextCell.borderAttr.top.display;\n            const compareTime = cell.borderAttr.bottom.compareTime(nextCell.borderAttr.top);\n            if (display) {\n              return compareTime === 1 || compareTime === 0;\n            }\n          }\n          // 边框是否显示\n          return cell.borderAttr.bottom.display;\n        });\n        result = result.concat(item);\n      }\n    }\n    return result;\n  }\n\n  vlMergeLine(mergesBrink) {\n    const { table, borderOptimization } = this;\n    const { cells } = table;\n    let result = [];\n    for (let i = 0; i < mergesBrink.length; i += 1) {\n      const brink = mergesBrink[i];\n      const { left } = brink;\n      if (left) {\n        const item = this.borderVLLine(left.view, left.x, left.y, (ci, ri) => {\n          const cell = cells.getCell(ri, ci);\n          const nextCell = cells.getCell(ri, ci - 1);\n          if (!cell) {\n            return false;\n          }\n          // 边框绘制优先级比较\n          if (nextCell && borderOptimization) {\n            const display = cell.borderAttr.left.display && nextCell.borderAttr.right.display;\n            const compareTime = cell.borderAttr.left.compareTime(nextCell.borderAttr.right);\n            if (display) {\n              return compareTime === 1;\n            }\n          }\n          // 边框是否显示\n          return cell.borderAttr.left.display;\n        });\n        result = result.concat(item);\n      }\n    }\n    return result;\n  }\n\n  vrMergeLine(mergesBrink) {\n    const { table, borderOptimization } = this;\n    const { cells } = table;\n    let result = [];\n    for (let i = 0; i < mergesBrink.length; i += 1) {\n      const brink = mergesBrink[i];\n      const { right } = brink;\n      if (right) {\n        const item = this.borderVRLine(right.view, right.x, right.y, (ci, ri) => {\n          const cell = cells.getCell(ri, ci);\n          const nextCell = cells.getCell(ri, ci + 1);\n          if (!cell) {\n            return false;\n          }\n          // 边框绘制优先级比较\n          if (nextCell && borderOptimization) {\n            const display = cell.borderAttr.right.display && nextCell.borderAttr.left.display;\n            const compareTime = cell.borderAttr.right.compareTime(nextCell.borderAttr.left);\n            if (display) {\n              return compareTime === 1 || compareTime === 0;\n            }\n          }\n          // 边框是否显示\n          return cell.borderAttr.right.display;\n        });\n        result = result.concat(item);\n      }\n    }\n    return result;\n  }\n\n  openDrawOptimization() {\n    this.drawOptimization = true;\n  }\n\n  closeDrawOptimization() {\n    this.drawOptimization = false;\n  }\n\n  openBorderOptimization() {\n    this.borderOptimization = true;\n  }\n\n  closeBorderOptimization() {\n    this.borderOptimization = false;\n  }\n}\n\nexport { BorderLineHandle };\n","import { cssPrefix } from '../../config';\r\nimport Format from './Format';\r\nimport { Utils } from '../../utils/Utils';\r\nimport { Rows } from './Rows';\r\nimport { Cols } from './Cols';\r\nimport { Scroll } from './Scroll';\r\nimport { Fixed } from './Fixed';\r\nimport { h } from '../../lib/Element';\r\nimport { Widget } from '../../lib/Widget';\r\nimport { RectRange } from './RectRange';\r\nimport { Merges } from './Merges';\r\nimport { Constant } from '../../utils/Constant';\r\nimport { EventBind } from '../../utils/EventBind';\r\nimport { Screen } from './screen/Screen';\r\nimport { ScreenSelector } from './selector/ScreenSelector';\r\nimport { ScreenCopyStyle } from './copystyle/ScreenCopyStyle';\r\nimport { XReSizer } from './resizer/XReSizer';\r\nimport { YReSizer } from './resizer/YReSizer';\r\nimport { MousePointType } from './MousePoint';\r\nimport { ScreenAutoFill } from './autofill/ScreenAutoFill';\r\nimport { XHeightLight } from './highlight/XHeightLight';\r\nimport { YHeightLight } from './highlight/YHeightLight';\r\nimport { Edit } from './Edit';\r\nimport { Draw, floor, npx } from '../../canvas/Draw';\r\nimport { ALIGN, Font, TEXT_WRAP } from '../../canvas/Font';\r\nimport { Rect } from '../../canvas/Rect';\r\nimport { Crop } from '../../canvas/Crop';\r\nimport { Grid } from '../../canvas/Grid';\r\nimport { Box } from '../../canvas/Box';\r\nimport { DataSnapshot } from './DataSnapshot';\r\nimport { Line, LINE_TYPE } from '../../canvas/Line';\r\nimport { LineHandle } from './gridborder/LineHandle';\r\nimport { KeyboardManage } from './KeyboardManage';\r\nimport { Cells } from './cells/Cells';\r\nimport { CellsHelper } from './CellsHelper';\r\nimport { GridLineHandle } from './gridborder/GridLineHandle';\r\nimport { BorderLineHandle } from './gridborder/BorderLineHandle';\r\n\r\n/**\r\n * 绘制图表左上固定的部分\r\n */\r\nclass FrozenLeftTop {\r\n  constructor(table) {\r\n    this.table = table;\r\n  }\r\n\r\n  getXOffset() {\r\n    const { table } = this;\r\n    const { settings } = table;\r\n    const { index } = settings;\r\n    return index.width;\r\n  }\r\n\r\n  getYOffset() {\r\n    const { table } = this;\r\n    const { settings } = table;\r\n    const { index } = settings;\r\n    return index.height;\r\n  }\r\n\r\n  getWidth() {\r\n    const { table } = this;\r\n    const { fixed, cols } = table;\r\n    const { fxLeft } = fixed;\r\n    return cols.sectionSumWidth(0, fxLeft);\r\n  }\r\n\r\n  getHeight() {\r\n    const { table } = this;\r\n    const { fixed, rows } = table;\r\n    const { fxTop } = fixed;\r\n    return rows.sectionSumHeight(0, fxTop);\r\n  }\r\n\r\n  getScrollViewRange() {\r\n    const width = this.getWidth();\r\n    const height = this.getHeight();\r\n    const { table } = this;\r\n    const { fixed } = table;\r\n    const { fxTop, fxLeft } = fixed;\r\n    return new RectRange(0, 0, fxTop, fxLeft, width, height);\r\n  }\r\n\r\n  drawGrid(viewRange, offsetX, offsetY) {\r\n    const { table } = this;\r\n    const {\r\n      draw, grid, lineHandle, gridLineHandle,\r\n    } = table;\r\n    draw.save();\r\n    draw.offset(offsetX, offsetY);\r\n    draw.attr({\r\n      globalAlpha: 0.3,\r\n    });\r\n    const coincideView = lineHandle.viewRangeAndMergeCoincideView({ viewRange });\r\n    const coincideViewBrink = lineHandle.coincideViewBrink({ coincideView });\r\n    const hLine = gridLineHandle.hLine(viewRange);\r\n    const vLine = gridLineHandle.vLine(viewRange);\r\n    hLine.forEach((item) => {\r\n      grid.horizontalLine(item.sx, item.sy, item.ex, item.ey);\r\n    });\r\n    vLine.forEach((item) => {\r\n      grid.verticalLine(item.sx, item.sy, item.ex, item.ey);\r\n    });\r\n    const hMergeLine = gridLineHandle.hMergeLine(coincideViewBrink);\r\n    const vMergeLine = gridLineHandle.vMergeLine(coincideViewBrink);\r\n    hMergeLine.forEach((item) => {\r\n      grid.horizontalLine(item.sx, item.sy, item.ex, item.ey);\r\n    });\r\n    vMergeLine.forEach((item) => {\r\n      grid.verticalLine(item.sx, item.sy, item.ex, item.ey);\r\n    });\r\n    draw.offset(0, 0);\r\n    draw.restore();\r\n  }\r\n\r\n  drawBorder(viewRange, offsetX, offsetY) {\r\n    const { table } = this;\r\n    const {\r\n      draw, line, lineHandle, borderLineHandle,\r\n    } = table;\r\n    draw.save();\r\n    draw.offset(offsetX, offsetY);\r\n    const coincideView = lineHandle.viewRangeAndMergeCoincideView({ viewRange });\r\n    const coincideViewBrink = lineHandle.coincideViewBrink({ coincideView });\r\n    const htLine = borderLineHandle.htLine(viewRange);\r\n    const hbLine = borderLineHandle.hbLine(viewRange);\r\n    const vlLine = borderLineHandle.vlLine(viewRange);\r\n    const vrLine = borderLineHandle.vrLine(viewRange);\r\n    htLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { top } = borderAttr;\r\n      const { color, width, type } = top;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'top');\r\n    });\r\n    hbLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { bottom } = borderAttr;\r\n      const { color, width, type } = bottom;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'bottom');\r\n    });\r\n    vlLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { left } = borderAttr;\r\n      const { color, width, type } = left;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'left');\r\n    });\r\n    vrLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { right } = borderAttr;\r\n      const { color, width, type } = right;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'right');\r\n    });\r\n    const htMergeLine = borderLineHandle.htMergeLine(coincideViewBrink);\r\n    const hbMergeLine = borderLineHandle.hbMergeLine(coincideViewBrink);\r\n    const vlMergeLine = borderLineHandle.vlMergeLine(coincideViewBrink);\r\n    const vrMergeLine = borderLineHandle.vrMergeLine(coincideViewBrink);\r\n    htMergeLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { top } = borderAttr;\r\n      const { color, width, type } = top;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'top');\r\n    });\r\n    hbMergeLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { bottom } = borderAttr;\r\n      const { color, width, type } = bottom;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'bottom');\r\n    });\r\n    vlMergeLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { left } = borderAttr;\r\n      const { color, width, type } = left;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'left');\r\n    });\r\n    vrMergeLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { right } = borderAttr;\r\n      const { color, width, type } = right;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'right');\r\n    });\r\n    draw.offset(0, 0);\r\n    draw.restore();\r\n  }\r\n\r\n  drawBackGround(viewRange, offsetX, offsetY) {\r\n    const { table } = this;\r\n    const {\r\n      draw, grid, cellsHelper,\r\n    } = table;\r\n    draw.save();\r\n    draw.offset(offsetX, offsetY);\r\n    // 绘制单元格背景\r\n    cellsHelper.getCellByViewRange({\r\n      rectRange: viewRange,\r\n      callback: (i, c, cell, rect) => {\r\n        // 绘制背景\r\n        rect.expandSize(grid.lineWidth());\r\n        const box = new Box({ draw, rect });\r\n        box.drawBackgroundColor(cell.background);\r\n      },\r\n    });\r\n    // 绘制合并单元格背景\r\n    cellsHelper.getMergeCellByViewRange({\r\n      rectRange: viewRange,\r\n      callback: (rect, cell) => {\r\n        // 绘制背景\r\n        rect.expandSize(grid.lineWidth());\r\n        const box = new Box({ draw, rect });\r\n        box.drawBackgroundColor(cell.background);\r\n      },\r\n    });\r\n    draw.offset(0, 0);\r\n    draw.restore();\r\n  }\r\n\r\n  drawCells(viewRange, offsetX, offsetY) {\r\n    const { table } = this;\r\n    const {\r\n      draw, cellsHelper, grid,\r\n    } = table;\r\n    draw.save();\r\n    draw.offset(offsetX, offsetY);\r\n    // 绘制单元格文字\r\n    cellsHelper.getCellSkipMergeCellByViewRange({\r\n      rectRange: viewRange,\r\n      callback: (i, c, cell, rect, overflow) => {\r\n        // 绘制文字\r\n        const { fontAttr } = cell;\r\n        const { align } = fontAttr;\r\n        const font = new Font({\r\n          text: Format(cell.format, cell.text),\r\n          rect: rect.expandSize(grid.lineWidth()),\r\n          dw: draw,\r\n          overflow,\r\n          attr: fontAttr,\r\n        });\r\n        cell.setOverflowCrop(align === ALIGN.center);\r\n        cell.setContentWidth(font.draw());\r\n      },\r\n    });\r\n    // 绘制合并单元格文字\r\n    cellsHelper.getMergeCellByViewRange({\r\n      rectRange: viewRange,\r\n      callback: (rect, cell) => {\r\n        // 绘制文字\r\n        const { fontAttr } = cell;\r\n        const font = new Font({\r\n          text: Format(cell.format, cell.text),\r\n          rect: rect.expandSize(grid.lineWidth()),\r\n          dw: draw,\r\n          overflow: null,\r\n          attr: fontAttr,\r\n        });\r\n        font.setTextWrap(TEXT_WRAP.WORD_WRAP);\r\n        cell.setContentWidth(font.draw());\r\n      },\r\n    });\r\n    draw.offset(0, 0);\r\n    draw.restore();\r\n  }\r\n\r\n  render() {\r\n    const { table } = this;\r\n    const { draw, grid, settings } = table;\r\n    const offsetX = this.getXOffset();\r\n    const offsetY = this.getYOffset();\r\n    const viewRange = this.getScrollViewRange();\r\n    const rect = new Rect({\r\n      x: offsetX,\r\n      y: offsetY,\r\n      width: viewRange.w,\r\n      height: viewRange.h,\r\n    });\r\n    const crop = new Crop({ draw, rect, offset: grid.lineWidth() });\r\n    crop.open();\r\n    this.drawBackGround(viewRange, offsetX, offsetY);\r\n    this.drawCells(viewRange, offsetX, offsetY);\r\n    if (settings.table.showGrid) {\r\n      this.drawGrid(viewRange, offsetX, offsetY);\r\n    }\r\n    this.drawBorder(viewRange, offsetX, offsetY);\r\n    crop.close();\r\n  }\r\n}\r\n\r\n/**\r\n * 绘制图表左边冻结的部分\r\n */\r\nclass FixedLeft {\r\n  constructor(table) {\r\n    this.table = table;\r\n  }\r\n\r\n  getXOffset() {\r\n    const { table } = this;\r\n    const { settings } = table;\r\n    const { index } = settings;\r\n    const { width } = index;\r\n    return width;\r\n  }\r\n\r\n  getYOffset() {\r\n    const { table } = this;\r\n    const { content } = table;\r\n    return content.getYOffset();\r\n  }\r\n\r\n  getWidth() {\r\n    const { table } = this;\r\n    const { fixed } = table;\r\n    const { fxLeft } = fixed;\r\n    // console.log('table.cols >>>', table.cols);\r\n    return table.cols.sectionSumWidth(0, fxLeft);\r\n  }\r\n\r\n  getHeight() {\r\n    const { table } = this;\r\n    const viewRange = table.getContentViewRange();\r\n    return viewRange.h;\r\n  }\r\n\r\n  getScrollViewRange() {\r\n    const { table } = this;\r\n    const { fixed } = table;\r\n    const { fxLeft } = fixed;\r\n    const viewRange = table.getScrollViewRange();\r\n    const width = this.getWidth();\r\n    const height = this.getHeight();\r\n    viewRange.sci = 0;\r\n    viewRange.eci = fxLeft;\r\n    viewRange.w = width;\r\n    viewRange.h = height;\r\n    return viewRange;\r\n  }\r\n\r\n  drawGrid(viewRange, offsetX, offsetY) {\r\n    const { table } = this;\r\n    const {\r\n      draw, grid, lineHandle, gridLineHandle,\r\n    } = table;\r\n    draw.save();\r\n    draw.offset(offsetX, offsetY);\r\n    draw.attr({\r\n      globalAlpha: 0.3,\r\n    });\r\n    const coincideView = lineHandle.viewRangeAndMergeCoincideView({ viewRange });\r\n    const coincideViewBrink = lineHandle.coincideViewBrink({ coincideView });\r\n    const hLine = gridLineHandle.hLine(viewRange);\r\n    const vLine = gridLineHandle.vLine(viewRange);\r\n    hLine.forEach((item) => {\r\n      grid.horizontalLine(item.sx, item.sy, item.ex, item.ey);\r\n    });\r\n    vLine.forEach((item) => {\r\n      grid.verticalLine(item.sx, item.sy, item.ex, item.ey);\r\n    });\r\n    const hMergeLine = gridLineHandle.hMergeLine(coincideViewBrink);\r\n    const vMergeLine = gridLineHandle.vMergeLine(coincideViewBrink);\r\n    hMergeLine.forEach((item) => {\r\n      grid.horizontalLine(item.sx, item.sy, item.ex, item.ey);\r\n    });\r\n    vMergeLine.forEach((item) => {\r\n      grid.verticalLine(item.sx, item.sy, item.ex, item.ey);\r\n    });\r\n    draw.offset(0, 0);\r\n    draw.restore();\r\n  }\r\n\r\n  drawBorder(viewRange, offsetX, offsetY) {\r\n    const { table } = this;\r\n    const {\r\n      draw, line, lineHandle, borderLineHandle,\r\n    } = table;\r\n    draw.save();\r\n    draw.offset(offsetX, offsetY);\r\n    const coincideView = lineHandle.viewRangeAndMergeCoincideView({ viewRange });\r\n    const coincideViewBrink = lineHandle.coincideViewBrink({ coincideView });\r\n    const htLine = borderLineHandle.htLine(viewRange);\r\n    const hbLine = borderLineHandle.hbLine(viewRange);\r\n    const vlLine = borderLineHandle.vlLine(viewRange);\r\n    const vrLine = borderLineHandle.vrLine(viewRange);\r\n    htLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { top } = borderAttr;\r\n      const { color, width, type } = top;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'top');\r\n    });\r\n    hbLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { bottom } = borderAttr;\r\n      const { color, width, type } = bottom;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'bottom');\r\n    });\r\n    vlLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { left } = borderAttr;\r\n      const { color, width, type } = left;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'left');\r\n    });\r\n    vrLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { right } = borderAttr;\r\n      const { color, width, type } = right;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'right');\r\n    });\r\n    const htMergeLine = borderLineHandle.htMergeLine(coincideViewBrink);\r\n    const hbMergeLine = borderLineHandle.hbMergeLine(coincideViewBrink);\r\n    const vlMergeLine = borderLineHandle.vlMergeLine(coincideViewBrink);\r\n    const vrMergeLine = borderLineHandle.vrMergeLine(coincideViewBrink);\r\n    htMergeLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { top } = borderAttr;\r\n      const { color, width, type } = top;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'top');\r\n    });\r\n    hbMergeLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { bottom } = borderAttr;\r\n      const { color, width, type } = bottom;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'bottom');\r\n    });\r\n    vlMergeLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { left } = borderAttr;\r\n      const { color, width, type } = left;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'left');\r\n    });\r\n    vrMergeLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { right } = borderAttr;\r\n      const { color, width, type } = right;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'right');\r\n    });\r\n    draw.offset(0, 0);\r\n    draw.restore();\r\n  }\r\n\r\n  drawBackGround(viewRange, offsetX, offsetY) {\r\n    const { table } = this;\r\n    const {\r\n      draw, grid, cellsHelper,\r\n    } = table;\r\n    draw.save();\r\n    draw.offset(offsetX, offsetY);\r\n    // 绘制单元格背景\r\n    cellsHelper.getCellByViewRange({\r\n      rectRange: viewRange,\r\n      callback: (i, c, cell, rect) => {\r\n        // 绘制背景\r\n        rect.expandSize(grid.lineWidth());\r\n        const box = new Box({ draw, rect });\r\n        box.drawBackgroundColor(cell.background);\r\n      },\r\n    });\r\n    // 绘制合并单元格背景\r\n    cellsHelper.getMergeCellByViewRange({\r\n      rectRange: viewRange,\r\n      callback: (rect, cell) => {\r\n        // 绘制背景\r\n        rect.expandSize(grid.lineWidth());\r\n        const box = new Box({ draw, rect });\r\n        box.drawBackgroundColor(cell.background);\r\n      },\r\n    });\r\n    draw.offset(0, 0);\r\n    draw.restore();\r\n  }\r\n\r\n  drawCells(viewRange, offsetX, offsetY) {\r\n    const { table } = this;\r\n    const {\r\n      draw, cellsHelper, grid,\r\n    } = table;\r\n    draw.save();\r\n    draw.offset(offsetX, offsetY);\r\n    // 绘制单元格文字\r\n    cellsHelper.getCellSkipMergeCellByViewRange({\r\n      rectRange: viewRange,\r\n      callback: (i, c, cell, rect, overflow) => {\r\n        // 绘制文字\r\n        const { fontAttr } = cell;\r\n        const { align } = fontAttr;\r\n        const font = new Font({\r\n          text: Format(cell.format, cell.text),\r\n          rect: rect.expandSize(grid.lineWidth()),\r\n          dw: draw,\r\n          overflow,\r\n          attr: fontAttr,\r\n        });\r\n        cell.setOverflowCrop(align === ALIGN.center);\r\n        cell.setContentWidth(font.draw());\r\n      },\r\n    });\r\n    // 绘制合并单元格文字\r\n    cellsHelper.getMergeCellByViewRange({\r\n      rectRange: viewRange,\r\n      callback: (rect, cell) => {\r\n        // 绘制文字\r\n        const { fontAttr } = cell;\r\n        const font = new Font({\r\n          text: Format(cell.format, cell.text),\r\n          rect: rect.expandSize(grid.lineWidth()),\r\n          dw: draw,\r\n          overflow: null,\r\n          attr: fontAttr,\r\n        });\r\n        font.setTextWrap(TEXT_WRAP.WORD_WRAP);\r\n        cell.setContentWidth(font.draw());\r\n      },\r\n    });\r\n    draw.offset(0, 0);\r\n    draw.restore();\r\n  }\r\n\r\n  render() {\r\n    const { table } = this;\r\n    const { draw, settings } = table;\r\n    const viewRange = this.getScrollViewRange();\r\n    const offsetX = this.getXOffset();\r\n    const offsetY = this.getYOffset();\r\n    const rect = new Rect({\r\n      x: offsetX,\r\n      y: offsetY,\r\n      width: viewRange.w,\r\n      height: viewRange.h,\r\n    });\r\n    const crop = new Crop({ draw, rect });\r\n    crop.open();\r\n    this.drawBackGround(viewRange, offsetX, offsetY);\r\n    this.drawCells(viewRange, offsetX, offsetY);\r\n    if (settings.table.showGrid) {\r\n      this.drawGrid(viewRange, offsetX, offsetY);\r\n    }\r\n    this.drawBorder(viewRange, offsetX, offsetY);\r\n    crop.close();\r\n  }\r\n}\r\n\r\n/**\r\n * 绘制图表的主体内容\r\n */\r\nclass Content {\r\n  constructor(table) {\r\n    this.table = table;\r\n  }\r\n\r\n  getXOffset() {\r\n    const { table } = this;\r\n    const { fixed, settings } = table;\r\n    const { index } = settings;\r\n    const { fxLeft } = fixed;\r\n    const { width } = index;\r\n    const fixedLeftWidth = table.cols.sectionSumWidth(0, fxLeft);\r\n    return fixedLeftWidth + width;\r\n  }\r\n\r\n  getYOffset() {\r\n    const { table } = this;\r\n    const { fixed, settings } = table;\r\n    const { index } = settings;\r\n    const { fxTop } = fixed;\r\n    const { height } = index;\r\n    const fixedTopHeight = table.rows.sectionSumHeight(0, fxTop);\r\n    return height + fixedTopHeight;\r\n  }\r\n\r\n  getWidth() {\r\n    const { table } = this;\r\n    const { fixed, settings } = table;\r\n    const { index } = settings;\r\n    const { fxLeft } = fixed;\r\n    const { width } = index;\r\n    const fixedLeftWidth = table.cols.sectionSumWidth(0, fxLeft);\r\n    return table.visualWidth() - (fixedLeftWidth + width);\r\n  }\r\n\r\n  getHeight() {\r\n    const { table } = this;\r\n    const { fixed, settings } = table;\r\n    const { index } = settings;\r\n    const { fxTop } = fixed;\r\n    const { height } = index;\r\n    const fixedTopHeight = table.rows.sectionSumHeight(0, fxTop);\r\n    return table.visualHeight() - (height + fixedTopHeight);\r\n  }\r\n\r\n  getScrollViewRange() {\r\n    const { table } = this;\r\n    return table.getScrollViewRange();\r\n  }\r\n\r\n  getContentWidth() {\r\n    const { table } = this;\r\n    const { cols, fixed } = table;\r\n    const total = cols.totalWidth();\r\n    const fixedWidth = cols.sectionSumWidth(0, fixed.fxLeft);\r\n    return total - fixedWidth;\r\n  }\r\n\r\n  getContentHeight() {\r\n    const { table } = this;\r\n    const { rows, fixed } = table;\r\n    const total = rows.totalHeight();\r\n    const fixedHeight = rows.sectionSumHeight(0, fixed.fxTop);\r\n    return total - fixedHeight;\r\n  }\r\n\r\n  drawGrid(viewRange, offsetX, offsetY) {\r\n    const { table } = this;\r\n    const {\r\n      draw, grid, lineHandle, gridLineHandle,\r\n    } = table;\r\n    draw.save();\r\n    draw.offset(offsetX, offsetY);\r\n    draw.attr({\r\n      globalAlpha: 0.3,\r\n    });\r\n    const coincideView = lineHandle.viewRangeAndMergeCoincideView({ viewRange });\r\n    const coincideViewBrink = lineHandle.coincideViewBrink({ coincideView });\r\n    const hLine = gridLineHandle.hLine(viewRange);\r\n    const vLine = gridLineHandle.vLine(viewRange);\r\n    hLine.forEach((item) => {\r\n      grid.horizontalLine(item.sx, item.sy, item.ex, item.ey);\r\n    });\r\n    vLine.forEach((item) => {\r\n      grid.verticalLine(item.sx, item.sy, item.ex, item.ey);\r\n    });\r\n    const hMergeLine = gridLineHandle.hMergeLine(coincideViewBrink);\r\n    const vMergeLine = gridLineHandle.vMergeLine(coincideViewBrink);\r\n    hMergeLine.forEach((item) => {\r\n      grid.horizontalLine(item.sx, item.sy, item.ex, item.ey);\r\n    });\r\n    vMergeLine.forEach((item) => {\r\n      grid.verticalLine(item.sx, item.sy, item.ex, item.ey);\r\n    });\r\n    draw.offset(0, 0);\r\n    draw.restore();\r\n  }\r\n\r\n  drawBorder(viewRange, offsetX, offsetY) {\r\n    const { table } = this;\r\n    const {\r\n      draw, line, lineHandle, borderLineHandle,\r\n    } = table;\r\n    draw.save();\r\n    draw.offset(offsetX, offsetY);\r\n    const coincideView = lineHandle.viewRangeAndMergeCoincideView({ viewRange });\r\n    const coincideViewBrink = lineHandle.coincideViewBrink({ coincideView });\r\n    const htLine = borderLineHandle.htLine(viewRange);\r\n    const hbLine = borderLineHandle.hbLine(viewRange);\r\n    const vlLine = borderLineHandle.vlLine(viewRange);\r\n    const vrLine = borderLineHandle.vrLine(viewRange);\r\n    htLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { top } = borderAttr;\r\n      const { color, width, type } = top;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'top');\r\n    });\r\n    hbLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { bottom } = borderAttr;\r\n      const { color, width, type } = bottom;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'bottom');\r\n    });\r\n    vlLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { left } = borderAttr;\r\n      const { color, width, type } = left;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'left');\r\n    });\r\n    vrLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { right } = borderAttr;\r\n      const { color, width, type } = right;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'right');\r\n    });\r\n    const htMergeLine = borderLineHandle.htMergeLine(coincideViewBrink);\r\n    const hbMergeLine = borderLineHandle.hbMergeLine(coincideViewBrink);\r\n    const vlMergeLine = borderLineHandle.vlMergeLine(coincideViewBrink);\r\n    const vrMergeLine = borderLineHandle.vrMergeLine(coincideViewBrink);\r\n    htMergeLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { top } = borderAttr;\r\n      const { color, width, type } = top;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'top');\r\n    });\r\n    hbMergeLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { bottom } = borderAttr;\r\n      const { color, width, type } = bottom;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'bottom');\r\n    });\r\n    vlMergeLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { left } = borderAttr;\r\n      const { color, width, type } = left;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'left');\r\n    });\r\n    vrMergeLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { right } = borderAttr;\r\n      const { color, width, type } = right;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'right');\r\n    });\r\n    draw.offset(0, 0);\r\n    draw.restore();\r\n  }\r\n\r\n  drawBackGround(viewRange, offsetX, offsetY) {\r\n    const { table } = this;\r\n    const {\r\n      draw, grid, cellsHelper,\r\n    } = table;\r\n    draw.save();\r\n    draw.offset(offsetX, offsetY);\r\n    // 绘制单元格背景\r\n    cellsHelper.getCellByViewRange({\r\n      rectRange: viewRange,\r\n      callback: (i, c, cell, rect) => {\r\n        // 绘制背景\r\n        rect.expandSize(grid.lineWidth());\r\n        const box = new Box({ draw, rect });\r\n        box.drawBackgroundColor(cell.background);\r\n      },\r\n    });\r\n    // 绘制合并单元格背景\r\n    cellsHelper.getMergeCellByViewRange({\r\n      rectRange: viewRange,\r\n      callback: (rect, cell) => {\r\n        // 绘制背景\r\n        rect.expandSize(grid.lineWidth());\r\n        const box = new Box({ draw, rect });\r\n        box.drawBackgroundColor(cell.background);\r\n      },\r\n    });\r\n    draw.offset(0, 0);\r\n    draw.restore();\r\n  }\r\n\r\n  drawCells(viewRange, scrollViewXOffset, offsetX, offsetY) {\r\n    const { table } = this;\r\n    const {\r\n      draw, cellsHelper, grid,\r\n    } = table;\r\n    draw.save();\r\n    draw.offset(offsetX, offsetY);\r\n    // 绘制单元格文字\r\n    cellsHelper.getCellSkipMergeCellByViewRange({\r\n      rectRange: viewRange,\r\n      callback: (i, c, cell, rect, overflow) => {\r\n        // 绘制文字\r\n        const { fontAttr } = cell;\r\n        const { align } = fontAttr;\r\n        const font = new Font({\r\n          text: Format(cell.format, cell.text),\r\n          rect: rect.expandSize(grid.lineWidth()),\r\n          dw: draw,\r\n          overflow,\r\n          attr: fontAttr,\r\n        });\r\n        font.setOverflowCrop(align === ALIGN.center);\r\n        cell.setContentWidth(font.draw());\r\n        // Test\r\n        // draw.attr({ globalAlpha: 0.3 });\r\n        // draw.fillRect(rect.x, rect.y, cell.contentWidth, rect.height);\r\n      },\r\n      startX: scrollViewXOffset,\r\n    });\r\n    // 绘制合并单元格文字\r\n    cellsHelper.getMergeCellByViewRange({\r\n      rectRange: viewRange,\r\n      callback: (rect, cell) => {\r\n        // console.log('rect >>>', rect);\r\n        // 绘制文字\r\n        const { fontAttr } = cell;\r\n        const font = new Font({\r\n          text: Format(cell.format, cell.text),\r\n          rect: rect.expandSize(grid.lineWidth()),\r\n          dw: draw,\r\n          overflow: null,\r\n          attr: fontAttr,\r\n        });\r\n        font.setTextWrap(TEXT_WRAP.WORD_WRAP);\r\n        cell.setContentWidth(font.draw());\r\n      },\r\n      startX: scrollViewXOffset,\r\n    });\r\n    draw.offset(0, 0);\r\n    draw.restore();\r\n  }\r\n\r\n  render() {\r\n    const { table } = this;\r\n    const { draw, grid, settings } = table;\r\n    const scrollViewXOffset = table.getScrollViewXOffset();\r\n    const scrollViewRange = this.getScrollViewRange();\r\n    const contentViewRange = table.getContentViewRange();\r\n    const offsetX = this.getXOffset();\r\n    const offsetY = this.getYOffset();\r\n    const width = scrollViewRange.w;\r\n    const height = scrollViewRange.h;\r\n    const rect = new Rect({\r\n      x: offsetX,\r\n      y: offsetY,\r\n      width,\r\n      height,\r\n    });\r\n    const crop = new Crop({ draw, rect, offset: grid.lineWidth() });\r\n    crop.open();\r\n    this.drawBackGround(scrollViewRange, offsetX, offsetY);\r\n    this.drawCells(contentViewRange, scrollViewXOffset, offsetX, offsetY);\r\n    if (settings.table.showGrid) {\r\n      this.drawGrid(scrollViewRange, offsetX, offsetY);\r\n    }\r\n    this.drawBorder(scrollViewRange, offsetX, offsetY);\r\n    crop.close();\r\n  }\r\n}\r\n\r\n/**\r\n * 绘制图表顶部冻结的部分\r\n */\r\nclass FixedTop {\r\n  constructor(table) {\r\n    this.table = table;\r\n  }\r\n\r\n  getXOffset() {\r\n    const { table } = this;\r\n    const { content } = table;\r\n    return content.getXOffset();\r\n  }\r\n\r\n  getYOffset() {\r\n    const { table } = this;\r\n    const { settings } = table;\r\n    const { index } = settings;\r\n    const { height } = index;\r\n    return height;\r\n  }\r\n\r\n  getWidth() {\r\n    const { table } = this;\r\n    const viewRange = table.getContentViewRange();\r\n    return viewRange.w;\r\n  }\r\n\r\n  getHeight() {\r\n    const { table } = this;\r\n    const { fixed } = table;\r\n    const { fxTop } = fixed;\r\n    return table.rows.sectionSumHeight(0, fxTop);\r\n  }\r\n\r\n  getScrollViewRange() {\r\n    const { table } = this;\r\n    const { fixed } = table;\r\n    const { fxTop } = fixed;\r\n    const viewRange = table.getScrollViewRange();\r\n    const width = this.getWidth();\r\n    const height = this.getHeight();\r\n    viewRange.sri = 0;\r\n    viewRange.eri = fxTop;\r\n    viewRange.w = width;\r\n    viewRange.h = height;\r\n    return viewRange;\r\n  }\r\n\r\n  getContentViewRange() {\r\n    const { table } = this;\r\n    const { fixed } = table;\r\n    const { fxTop } = fixed;\r\n    const viewRange = table.getContentViewRange();\r\n    const width = this.getWidth();\r\n    const height = this.getHeight();\r\n    viewRange.sri = 0;\r\n    viewRange.eri = fxTop;\r\n    viewRange.w = width;\r\n    viewRange.h = height;\r\n    return viewRange;\r\n  }\r\n\r\n  drawGrid(viewRange, offsetX, offsetY) {\r\n    const { table } = this;\r\n    const {\r\n      draw, grid, lineHandle, gridLineHandle,\r\n    } = table;\r\n    draw.save();\r\n    draw.offset(offsetX, offsetY);\r\n    draw.attr({\r\n      globalAlpha: 0.3,\r\n    });\r\n    const coincideView = lineHandle.viewRangeAndMergeCoincideView({ viewRange });\r\n    const coincideViewBrink = lineHandle.coincideViewBrink({ coincideView });\r\n    const hLine = gridLineHandle.hLine(viewRange);\r\n    const vLine = gridLineHandle.vLine(viewRange);\r\n    hLine.forEach((item) => {\r\n      grid.horizontalLine(item.sx, item.sy, item.ex, item.ey);\r\n    });\r\n    vLine.forEach((item) => {\r\n      grid.verticalLine(item.sx, item.sy, item.ex, item.ey);\r\n    });\r\n    const hMergeLine = gridLineHandle.hMergeLine(coincideViewBrink);\r\n    const vMergeLine = gridLineHandle.vMergeLine(coincideViewBrink);\r\n    hMergeLine.forEach((item) => {\r\n      grid.horizontalLine(item.sx, item.sy, item.ex, item.ey);\r\n    });\r\n    vMergeLine.forEach((item) => {\r\n      grid.verticalLine(item.sx, item.sy, item.ex, item.ey);\r\n    });\r\n    draw.offset(0, 0);\r\n    draw.restore();\r\n  }\r\n\r\n  drawBorder(viewRange, offsetX, offsetY) {\r\n    const { table } = this;\r\n    const {\r\n      draw, line, lineHandle, borderLineHandle,\r\n    } = table;\r\n    draw.save();\r\n    draw.offset(offsetX, offsetY);\r\n    const coincideView = lineHandle.viewRangeAndMergeCoincideView({ viewRange });\r\n    const coincideViewBrink = lineHandle.coincideViewBrink({ coincideView });\r\n    const htLine = borderLineHandle.htLine(viewRange);\r\n    const hbLine = borderLineHandle.hbLine(viewRange);\r\n    const vlLine = borderLineHandle.vlLine(viewRange);\r\n    const vrLine = borderLineHandle.vrLine(viewRange);\r\n    htLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { top } = borderAttr;\r\n      const { color, width, type } = top;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'top');\r\n    });\r\n    hbLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { bottom } = borderAttr;\r\n      const { color, width, type } = bottom;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'bottom');\r\n    });\r\n    vlLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { left } = borderAttr;\r\n      const { color, width, type } = left;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'left');\r\n    });\r\n    vrLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { right } = borderAttr;\r\n      const { color, width, type } = right;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'right');\r\n    });\r\n    const htMergeLine = borderLineHandle.htMergeLine(coincideViewBrink);\r\n    const hbMergeLine = borderLineHandle.hbMergeLine(coincideViewBrink);\r\n    const vlMergeLine = borderLineHandle.vlMergeLine(coincideViewBrink);\r\n    const vrMergeLine = borderLineHandle.vrMergeLine(coincideViewBrink);\r\n    htMergeLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { top } = borderAttr;\r\n      const { color, width, type } = top;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'top');\r\n    });\r\n    hbMergeLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { bottom } = borderAttr;\r\n      const { color, width, type } = bottom;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'bottom');\r\n    });\r\n    vlMergeLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { left } = borderAttr;\r\n      const { color, width, type } = left;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'left');\r\n    });\r\n    vrMergeLine.forEach((item) => {\r\n      const { borderAttr, row, col } = item;\r\n      const { right } = borderAttr;\r\n      const { color, width, type } = right;\r\n      line.setType(type);\r\n      line.setColor(color);\r\n      line.setWidth(width);\r\n      line.drawLine(item.sx, item.sy, item.ex, item.ey, row, col, 'right');\r\n    });\r\n    draw.offset(0, 0);\r\n    draw.restore();\r\n  }\r\n\r\n  drawBackGround(viewRange, offsetX, offsetY) {\r\n    const { table } = this;\r\n    const {\r\n      draw, grid, cellsHelper,\r\n    } = table;\r\n    draw.save();\r\n    draw.offset(offsetX, offsetY);\r\n    // 绘制单元格背景\r\n    cellsHelper.getCellByViewRange({\r\n      rectRange: viewRange,\r\n      callback: (i, c, cell, rect) => {\r\n        // 绘制背景\r\n        rect.expandSize(grid.lineWidth());\r\n        const box = new Box({ draw, rect });\r\n        box.drawBackgroundColor(cell.background);\r\n      },\r\n    });\r\n    // 绘制合并单元格背景\r\n    cellsHelper.getMergeCellByViewRange({\r\n      rectRange: viewRange,\r\n      callback: (rect, cell) => {\r\n        // 绘制背景\r\n        rect.expandSize(grid.lineWidth());\r\n        const box = new Box({ draw, rect });\r\n        box.drawBackgroundColor(cell.background);\r\n      },\r\n    });\r\n    draw.offset(0, 0);\r\n    draw.restore();\r\n  }\r\n\r\n  drawCells(viewRange, scrollViewXOffset, offsetX, offsetY) {\r\n    const { table } = this;\r\n    const {\r\n      draw, cellsHelper, grid,\r\n    } = table;\r\n    draw.save();\r\n    draw.offset(offsetX, offsetY);\r\n    // 绘制单元格文字\r\n    cellsHelper.getCellSkipMergeCellByViewRange({\r\n      rectRange: viewRange,\r\n      callback: (i, c, cell, rect, overflow) => {\r\n        // console.log('rect>>>', rect);\r\n        // console.log('i, c', i, c);\r\n        // 绘制文字\r\n        const { fontAttr } = cell;\r\n        const { align } = fontAttr;\r\n        const font = new Font({\r\n          text: Format(cell.format, cell.text),\r\n          rect: rect.expandSize(grid.lineWidth()),\r\n          dw: draw,\r\n          overflow,\r\n          attr: fontAttr,\r\n        });\r\n        font.setOverflowCrop(align === ALIGN.center);\r\n        cell.setContentWidth(font.draw());\r\n      },\r\n      startX: scrollViewXOffset,\r\n    });\r\n    // 绘制合并单元格文字\r\n    cellsHelper.getMergeCellByViewRange({\r\n      rectRange: viewRange,\r\n      callback: (rect, cell) => {\r\n        // 绘制文字\r\n        const { fontAttr } = cell;\r\n        const font = new Font({\r\n          text: Format(cell.format, cell.text),\r\n          rect: rect.expandSize(grid.lineWidth()),\r\n          dw: draw,\r\n          overflow: null,\r\n          attr: fontAttr,\r\n        });\r\n        font.setTextWrap(TEXT_WRAP.WORD_WRAP);\r\n        cell.setContentWidth(font.draw());\r\n      },\r\n      startX: scrollViewXOffset,\r\n    });\r\n    draw.offset(0, 0);\r\n    draw.restore();\r\n  }\r\n\r\n  render() {\r\n    const { table } = this;\r\n    const { draw, grid, settings } = table;\r\n    const scrollViewXOffset = table.getScrollViewXOffset();\r\n    const scrollViewRange = this.getScrollViewRange();\r\n    const contentViewRange = this.getContentViewRange();\r\n    const offsetX = this.getXOffset();\r\n    const offsetY = this.getYOffset();\r\n    const rect = new Rect({\r\n      x: offsetX,\r\n      y: offsetY,\r\n      width: scrollViewRange.w,\r\n      height: scrollViewRange.h,\r\n    });\r\n    const crop = new Crop({ draw, rect, offset: grid.lineWidth() });\r\n    crop.open();\r\n    this.drawBackGround(scrollViewRange, offsetX, offsetY);\r\n    this.drawCells(contentViewRange, scrollViewXOffset, offsetX, offsetY);\r\n    if (settings.table.showGrid) {\r\n      this.drawGrid(scrollViewRange, offsetX, offsetY);\r\n    }\r\n    this.drawBorder(scrollViewRange, offsetX, offsetY);\r\n    crop.close();\r\n  }\r\n}\r\n\r\n/**\r\n * 绘制图表左边固定的索引栏\r\n */\r\nclass FrozenLeftIndex {\r\n  constructor(table) {\r\n    this.table = table;\r\n  }\r\n\r\n  getXOffset() {\r\n    return 0;\r\n  }\r\n\r\n  getYOffset() {\r\n    const { table } = this;\r\n    const { settings } = table;\r\n    const { index } = settings;\r\n    return index.height;\r\n  }\r\n\r\n  getWidth() {\r\n    const { table } = this;\r\n    const { settings } = table;\r\n    const { index } = settings;\r\n    return index.width;\r\n  }\r\n\r\n  getHeight() {\r\n    const { table } = this;\r\n    const { fixed } = table;\r\n    const { fxTop } = fixed;\r\n    return table.rows.sectionSumHeight(0, fxTop);\r\n  }\r\n\r\n  draw(viewRange, offsetX, offsetY, width, height) {\r\n    const { table } = this;\r\n    const {\r\n      draw, grid, rows, settings,\r\n    } = table;\r\n    const { sri, eri } = viewRange;\r\n    draw.save();\r\n    draw.offset(offsetX, offsetY);\r\n    // 绘制背景\r\n    draw.attr({\r\n      fillStyle: '#f6f7fa',\r\n    });\r\n    draw.fillRect(0, 0, width, height);\r\n    // 绘制文字\r\n    draw.attr({\r\n      textAlign: 'center',\r\n      textBaseline: 'middle',\r\n      font: `${npx(11)}px Arial`,\r\n      fillStyle: '#585757',\r\n    });\r\n    rows.eachHeight(sri, eri, (i, ch, y) => {\r\n      draw.fillText(i + 1, width / 2, y + (ch / 2));\r\n    });\r\n    // 绘制边框\r\n    let lineHeight = 0;\r\n    draw.attr({\r\n      globalAlpha: 0.3,\r\n      strokeStyle: settings.table.borderColor,\r\n    });\r\n    rows.eachHeight(sri, eri, (i, ch, y) => {\r\n      lineHeight += ch;\r\n      grid.horizontalLine(0, y, width, y);\r\n    });\r\n    grid.verticalLine(width, 0, width, lineHeight);\r\n    draw.offset(0, 0);\r\n    draw.restore();\r\n  }\r\n\r\n  render() {\r\n    const { table } = this;\r\n    const { fixed } = table;\r\n    const { fxTop } = fixed;\r\n    const offsetX = this.getXOffset();\r\n    const offsetY = this.getYOffset();\r\n    const width = this.getWidth();\r\n    const height = this.getHeight();\r\n    const viewRange = new RectRange(0, 0, fxTop, 0, width, height);\r\n    this.draw(viewRange, offsetX, offsetY, width, height);\r\n  }\r\n}\r\n\r\n/**\r\n * 绘制图表顶部的索引栏\r\n */\r\nclass FrozenTopIndex {\r\n  constructor(table) {\r\n    this.table = table;\r\n  }\r\n\r\n  getXOffset() {\r\n    const { table } = this;\r\n    const { settings } = table;\r\n    const { index } = settings;\r\n    return index.width;\r\n  }\r\n\r\n  getYOffset() {\r\n    return 0;\r\n  }\r\n\r\n  getWidth() {\r\n    const { table } = this;\r\n    const { fixed } = table;\r\n    const { fxLeft } = fixed;\r\n    return table.cols.sectionSumWidth(0, fxLeft);\r\n  }\r\n\r\n  getHeight() {\r\n    const { table } = this;\r\n    const { settings } = table;\r\n    const { index } = settings;\r\n    return index.height;\r\n  }\r\n\r\n  draw(viewRange, offsetX, offsetY, width, height) {\r\n    const { table } = this;\r\n    const {\r\n      draw, grid, cols, settings,\r\n    } = table;\r\n    const { sci, eci } = viewRange;\r\n    draw.save();\r\n    draw.offset(offsetX, offsetY);\r\n    // 绘制背景\r\n    draw.attr({\r\n      fillStyle: '#f6f7fa',\r\n    });\r\n    draw.fillRect(0, 0, width, height);\r\n    // 绘制文字\r\n    draw.attr({\r\n      textAlign: 'center',\r\n      textBaseline: 'middle',\r\n      font: `${npx(11)}px Arial`,\r\n      fillStyle: '#585757',\r\n    });\r\n    cols.eachWidth(sci, eci, (i, cw, x) => {\r\n      draw.fillText(Utils.stringAt(i), x + (cw / 2), height / 2);\r\n    });\r\n    // 绘制边框\r\n    let lineWidth = 0;\r\n    draw.attr({\r\n      globalAlpha: 0.3,\r\n      strokeStyle: settings.table.borderColor,\r\n    });\r\n    cols.eachWidth(sci, eci, (i, cw, x) => {\r\n      lineWidth += cw;\r\n      grid.verticalLine(x, 0, x, height);\r\n    });\r\n    grid.horizontalLine(0, height, lineWidth, height);\r\n    draw.offset(0, 0);\r\n    draw.restore();\r\n  }\r\n\r\n  render() {\r\n    const { table } = this;\r\n    const { fixed } = table;\r\n    const { fxLeft } = fixed;\r\n    const offsetX = this.getXOffset();\r\n    const offsetY = this.getYOffset();\r\n    const width = this.getWidth();\r\n    const height = this.getHeight();\r\n    const viewRange = new RectRange(0, 0, 0, fxLeft, width, height);\r\n    this.draw(viewRange, offsetX, offsetY, width, height);\r\n  }\r\n}\r\n\r\n/**\r\n * 绘制图表顶部固定的索引栏\r\n */\r\nclass FixedTopIndex {\r\n  constructor(table) {\r\n    this.table = table;\r\n  }\r\n\r\n  getXOffset() {\r\n    const { table } = this;\r\n    const { content } = table;\r\n    return content.getXOffset();\r\n  }\r\n\r\n  getYOffset() {\r\n    return 0;\r\n  }\r\n\r\n  getWidth() {\r\n    const { table } = this;\r\n    const viewRange = table.getScrollViewRange();\r\n    const { sci, eci } = viewRange;\r\n    return table.cols.sectionSumWidth(sci, eci);\r\n  }\r\n\r\n  getHeight() {\r\n    const { table } = this;\r\n    const { settings } = table;\r\n    const { index } = settings;\r\n    return index.height;\r\n  }\r\n\r\n  draw(viewRange, offsetX, offsetY, width, height) {\r\n    const { table } = this;\r\n    const {\r\n      draw, grid, cols, settings,\r\n    } = table;\r\n    const { sci, eci } = viewRange;\r\n    draw.save();\r\n    draw.offset(offsetX, offsetY);\r\n    // 绘制背景\r\n    draw.attr({\r\n      fillStyle: '#f6f7fa',\r\n    });\r\n    draw.fillRect(0, 0, width, height);\r\n    // 绘制文字\r\n    draw.attr({\r\n      textAlign: 'center',\r\n      textBaseline: 'middle',\r\n      font: `${npx(11)}px Arial`,\r\n      fillStyle: '#585757',\r\n    });\r\n    cols.eachWidth(sci, eci, (i, cw, x) => {\r\n      draw.fillText(Utils.stringAt(i), x + (cw / 2), height / 2);\r\n    });\r\n    // 绘制边框\r\n    let lineWidth = 0;\r\n    draw.attr({\r\n      globalAlpha: 0.3,\r\n      strokeStyle: settings.table.borderColor,\r\n    });\r\n    cols.eachWidth(sci, eci, (i, cw, x) => {\r\n      lineWidth += cw;\r\n      grid.verticalLine(x, 0, x, height);\r\n      if (i === eci) grid.verticalLine(x + cw, 0, x + cw, height);\r\n    });\r\n    grid.horizontalLine(0, height, lineWidth, height);\r\n    draw.offset(0, 0);\r\n    draw.restore();\r\n  }\r\n\r\n  render() {\r\n    const { table } = this;\r\n    const viewRange = table.getScrollViewRange();\r\n    const offsetX = this.getXOffset();\r\n    const offsetY = this.getYOffset();\r\n    const width = this.getWidth();\r\n    const height = this.getHeight();\r\n    viewRange.sri = 0;\r\n    viewRange.eri = 0;\r\n    this.draw(viewRange, offsetX, offsetY, width, height);\r\n  }\r\n}\r\n\r\n/**\r\n * 绘制图表左边固定的索引栏\r\n */\r\nclass FixedLeftIndex {\r\n  constructor(table) {\r\n    this.table = table;\r\n  }\r\n\r\n  getXOffset() {\r\n    return 0;\r\n  }\r\n\r\n  getYOffset() {\r\n    const { table } = this;\r\n    const { content } = table;\r\n    return content.getYOffset();\r\n  }\r\n\r\n  getWidth() {\r\n    const { table } = this;\r\n    const { settings } = table;\r\n    const { index } = settings;\r\n    return index.width;\r\n  }\r\n\r\n  getHeight() {\r\n    const { table } = this;\r\n    const viewRange = table.getScrollViewRange();\r\n    const { sri, eri } = viewRange;\r\n    return table.rows.sectionSumHeight(sri, eri);\r\n  }\r\n\r\n  draw(viewRange, offsetX, offsetY, width, height) {\r\n    const { table } = this;\r\n    const {\r\n      draw, grid, rows, settings,\r\n    } = table;\r\n    const { sri, eri } = viewRange;\r\n    draw.save();\r\n    draw.offset(offsetX, offsetY);\r\n    // 绘制背景\r\n    draw.attr({\r\n      fillStyle: '#f6f7fa',\r\n    });\r\n    draw.fillRect(0, 0, width, height);\r\n    // 绘制文字\r\n    draw.attr({\r\n      textAlign: 'center',\r\n      textBaseline: 'middle',\r\n      font: `${npx(11)}px Arial`,\r\n      fillStyle: '#585757',\r\n    });\r\n    rows.eachHeight(sri, eri, (i, ch, y) => {\r\n      draw.fillText(i + 1, width / 2, y + (ch / 2));\r\n    });\r\n    // 绘制边框\r\n    let lineHeight = 0;\r\n    draw.attr({\r\n      globalAlpha: 0.3,\r\n      strokeStyle: settings.table.borderColor,\r\n    });\r\n    rows.eachHeight(sri, eri, (i, ch, y) => {\r\n      lineHeight += ch;\r\n      grid.horizontalLine(0, y, width, y);\r\n      if (i === eri) grid.horizontalLine(0, y + ch, width, y + ch);\r\n    });\r\n    grid.verticalLine(width, 0, width, lineHeight);\r\n    draw.offset(0, 0);\r\n    draw.restore();\r\n  }\r\n\r\n  render() {\r\n    const { table } = this;\r\n    const viewRange = table.getScrollViewRange();\r\n    const offsetX = this.getXOffset();\r\n    const offsetY = this.getYOffset();\r\n    const width = this.getWidth();\r\n    const height = this.getHeight();\r\n    viewRange.sci = 0;\r\n    viewRange.eci = 0;\r\n    this.draw(viewRange, offsetX, offsetY, width, height);\r\n  }\r\n}\r\n\r\n/**\r\n * 绘制图片固定区域\r\n */\r\nclass FrozenRect {\r\n  constructor(table) {\r\n    this.table = table;\r\n  }\r\n\r\n  draw(offsetX, offsetY, width, height) {\r\n    const { table } = this;\r\n    const { draw } = table;\r\n    draw.save();\r\n    draw.offset(offsetX, offsetY);\r\n    // 绘制背景\r\n    draw.attr({\r\n      fillStyle: '#f4f5f8',\r\n    });\r\n    draw.fillRect(0, 0, width, height);\r\n    draw.offset(0, 0);\r\n    draw.restore();\r\n  }\r\n\r\n  render() {\r\n    const { table } = this;\r\n    const { settings } = table;\r\n    const { index } = settings;\r\n    this.draw(0, 0, index.width, index.height);\r\n  }\r\n}\r\n\r\n/**\r\n * 默认设置\r\n * @type {{tipsRenderTime: boolean,\r\n * data: [],\r\n * tipsScrollTime: boolean,\r\n * index: {\r\n * bgColor: string,\r\n * color: string,\r\n * width: number,\r\n * height: number},\r\n * fixed: {\r\n * fxLeft: number,\r\n * fxTop: number,\r\n * }\r\n * rows: {len: number,\r\n * height: number},\r\n * cols: {len: number,\r\n * width: number},\r\n * table: {borderColor: string,\r\n * background: string,\r\n * showGrid: boolean}, merges: []}}\r\n */\r\nconst defaultSettings = {\r\n  tipsRenderTime: false,\r\n  tipsScrollTime: false,\r\n  index: {\r\n    height: 30,\r\n    width: 50,\r\n    bgColor: '#f4f5f8',\r\n    color: '#000000',\r\n  },\r\n  table: {\r\n    background: '#ffffff',\r\n    borderColor: '#a7a7a7',\r\n    showGrid: true,\r\n  },\r\n  data: [],\r\n  rows: {\r\n    len: 1000,\r\n    height: 30,\r\n  },\r\n  cols: {\r\n    len: 26,\r\n    width: 137,\r\n  },\r\n  merges: [],\r\n  fixed: {\r\n    fxTop: -1,\r\n    fxLeft: -1,\r\n  },\r\n};\r\n\r\n/**\r\n * Table\r\n * @author jerry\r\n */\r\nclass Table extends Widget {\r\n\r\n  constructor(settings) {\r\n    super(`${cssPrefix}-table`);\r\n\r\n    // 滚动区域\r\n    // 内容区域\r\n    // 滚动区域和内容区域的偏移量\r\n    this.scrollViewRange = null;\r\n    this.contentViewRange = null;\r\n    this.scrollViewXOffset = -1;\r\n\r\n    // 表格基本数据信息\r\n    this.canvas = h('canvas', `${cssPrefix}-table-canvas`);\r\n    this.settings = Utils.mergeDeep({}, defaultSettings, settings);\r\n    this.cells = new Cells({\r\n      table: this,\r\n      rows: this.rows,\r\n      cols: this.cols,\r\n      data: this.settings.data,\r\n    });\r\n    this.fixed = new Fixed(this.settings.fixed);\r\n    this.rows = new Rows(this.settings.rows);\r\n    this.cols = new Cols(this.settings.cols);\r\n    this.merges = new Merges(this.settings.merges);\r\n    this.scroll = new Scroll(this);\r\n\r\n    // 帮助类\r\n    this.cellsHelper = new CellsHelper({\r\n      cells: this.cells,\r\n      merges: this.merges,\r\n      rows: this.rows,\r\n      cols: this.cols,\r\n    });\r\n\r\n    // 表格线段处理\r\n    this.lineHandle = new LineHandle(this);\r\n    this.gridLineHandle = new GridLineHandle(this);\r\n    this.borderLineHandle = new BorderLineHandle(this);\r\n\r\n    // 撤销/反撤销\r\n    this.dataSnapshot = new DataSnapshot(this);\r\n\r\n    // 鼠标指针\r\n    this.mousePointType = new MousePointType(this);\r\n\r\n    // 键盘快捷键\r\n    this.keyboardManage = new KeyboardManage();\r\n\r\n    // canvas 绘制资源\r\n    this.draw = new Draw(this.canvas.el);\r\n    this.line = new Line(this.draw, {\r\n      leftShow: (ri, ci) => {\r\n        const cell = this.cells.getMergeCellOrCell(ri, ci);\r\n        return cell && cell.borderAttr.left.display;\r\n      },\r\n      topShow: (ri, ci) => {\r\n        const cell = this.cells.getMergeCellOrCell(ri, ci);\r\n        return cell && cell.borderAttr.top.display;\r\n      },\r\n      rightShow: (ri, ci) => {\r\n        const cell = this.cells.getMergeCellOrCell(ri, ci);\r\n        return cell && cell.borderAttr.right.display;\r\n      },\r\n      bottomShow: (ri, ci) => {\r\n        const cell = this.cells.getMergeCellOrCell(ri, ci);\r\n        return cell && cell.borderAttr.bottom.display;\r\n      },\r\n      iFMerge: (row, col) => this.merges.getFirstIncludes(row, col) !== null,\r\n      iFMergeFirstRow: (row, col) => this.merges.getFirstIncludes(row, col).sri === row,\r\n      iFMergeLastRow: (row, col) => this.merges.getFirstIncludes(row, col).eri === row,\r\n      iFMergeFirstCol: (row, col) => this.merges.getFirstIncludes(row, col).sci === col,\r\n      iFMergeLastCol: (row, col) => this.merges.getFirstIncludes(row, col).eci === col,\r\n    });\r\n    this.grid = new Grid(this.draw, {\r\n      color: this.settings.table.borderColor,\r\n    });\r\n\r\n    // table表绘制的各个部分\r\n    this.content = new Content(this);\r\n    this.fixedLeft = new FixedLeft(this);\r\n    this.fixedTop = new FixedTop(this);\r\n    this.fixedTopIndex = new FixedTopIndex(this);\r\n    this.fixedLeftIndex = new FixedLeftIndex(this);\r\n    this.frozenLeftTop = new FrozenLeftTop(this);\r\n    this.frozenLeftIndex = new FrozenLeftIndex(this);\r\n    this.frozenTopIndex = new FrozenTopIndex(this);\r\n    this.frozenRect = new FrozenRect(this);\r\n\r\n    // table基础组件\r\n    this.screen = new Screen(this);\r\n    this.xReSizer = new XReSizer(this);\r\n    this.yReSizer = new YReSizer(this);\r\n    this.xHeightLight = new XHeightLight(this);\r\n    this.yHeightLight = new YHeightLight(this);\r\n    this.edit = new Edit(this);\r\n    this.children(this.canvas);\r\n    this.children(this.screen);\r\n    this.children(this.xReSizer);\r\n    this.children(this.yReSizer);\r\n    this.children(this.xHeightLight);\r\n    this.children(this.yHeightLight);\r\n    this.children(this.edit);\r\n\r\n    // 事件绑定\r\n    this.bind();\r\n  }\r\n\r\n  initScreenWidget() {\r\n    const { dataSnapshot } = this;\r\n    // 单元格筛选组件\r\n    const screenSelector = new ScreenSelector(this.screen);\r\n    screenSelector.addSelectChangeCb(() => {\r\n      this.trigger(Constant.TABLE_EVENT_TYPE.SELECT_CHANGE);\r\n    });\r\n    screenSelector.addDownSelectCb(() => {\r\n      this.trigger(Constant.TABLE_EVENT_TYPE.SELECT_DOWN);\r\n    });\r\n    this.screen.addWidget(screenSelector);\r\n    // 自动填充组件\r\n    const screenAutoFill = new ScreenAutoFill(this.screen, {\r\n      onAfterAutoFill: (count) => {\r\n        if (count > 0) {\r\n          dataSnapshot.snapshot(true);\r\n        }\r\n      },\r\n    });\r\n    this.screen.addWidget(screenAutoFill);\r\n    // 样式复制\r\n    const copyStyle = new ScreenCopyStyle(this.screen, {});\r\n    this.screen.addWidget(copyStyle);\r\n  }\r\n\r\n  init() {\r\n    this.initScreenWidget();\r\n    this.screen.init();\r\n    this.xReSizer.init();\r\n    this.yReSizer.init();\r\n    this.xHeightLight.init();\r\n    this.yHeightLight.init();\r\n    this.edit.init();\r\n    this.resize();\r\n  }\r\n\r\n  checkedEnableBorderDrawOptimization() {\r\n    const { cellsHelper } = this;\r\n    const viewRange = this.getContentViewRange();\r\n    let enable = true;\r\n    cellsHelper.getCellByViewRange({\r\n      rectRange: viewRange,\r\n      callback: (r, c, cell) => {\r\n        const { borderAttr } = cell;\r\n        const { top, left, right, bottom } = borderAttr;\r\n        if (top.type === LINE_TYPE.DOUBLE_LINE) {\r\n          enable = false;\r\n          return enable;\r\n        }\r\n        if (left.type === LINE_TYPE.DOUBLE_LINE) {\r\n          enable = false;\r\n          return enable;\r\n        }\r\n        if (right.type === LINE_TYPE.DOUBLE_LINE) {\r\n          enable = false;\r\n          return enable;\r\n        }\r\n        if (bottom.type === LINE_TYPE.DOUBLE_LINE) {\r\n          enable = false;\r\n          return enable;\r\n        }\r\n        return true;\r\n      },\r\n    });\r\n    if (enable) {\r\n      this.borderLineHandle.openDrawOptimization();\r\n    } else {\r\n      this.borderLineHandle.closeDrawOptimization();\r\n    }\r\n  }\r\n\r\n  scrollX(x) {\r\n    const {\r\n      cols, fixed, settings, scroll,\r\n    } = this;\r\n    if (settings.tipsScrollTime) {\r\n      // eslint-disable-next-line no-console\r\n      console.time();\r\n    }\r\n    let { fxLeft } = fixed;\r\n    fxLeft += 1;\r\n    const [\r\n      ci, left, width,\r\n    ] = Utils.rangeReduceIf(fxLeft, cols.len, 0, 0, x, i => cols.getWidth(i));\r\n    let x1 = left;\r\n    if (x > 0) x1 += width;\r\n    scroll.ci = ci;\r\n    scroll.x = x1;\r\n    if (settings.tipsScrollTime) {\r\n      // eslint-disable-next-line no-console\r\n      console.log('滚动条计算耗时:');\r\n      // eslint-disable-next-line no-console\r\n      console.timeEnd();\r\n    }\r\n    this.trigger(Constant.SYSTEM_EVENT_TYPE.SCROLL);\r\n  }\r\n\r\n  scrollY(y) {\r\n    const {\r\n      rows, fixed, settings, scroll,\r\n    } = this;\r\n    if (settings.tipsScrollTime) {\r\n      // eslint-disable-next-line no-console\r\n      console.time();\r\n    }\r\n    let { fxTop } = fixed;\r\n    fxTop += 1;\r\n    const [\r\n      ri, top, height,\r\n    ] = Utils.rangeReduceIf(fxTop, rows.len, 0, 0, y, i => rows.getHeight(i));\r\n    let y1 = top;\r\n    if (y > 0) y1 += height;\r\n    scroll.ri = ri;\r\n    scroll.y = y1;\r\n    if (settings.tipsScrollTime) {\r\n      // eslint-disable-next-line no-console\r\n      console.log('滚动条计算耗时:');\r\n      // eslint-disable-next-line no-console\r\n      console.timeEnd();\r\n    }\r\n    this.trigger(Constant.SYSTEM_EVENT_TYPE.SCROLL);\r\n  }\r\n\r\n  getContentViewRange() {\r\n    const { contentViewRange } = this;\r\n    if (contentViewRange !== null) {\r\n      return contentViewRange.clone();\r\n    }\r\n    const scrollViewRange = this.getScrollViewRange();\r\n    const {\r\n      sri, eri,\r\n    } = scrollViewRange;\r\n    const { cols } = this;\r\n    scrollViewRange.set(sri, 0, eri, cols.len);\r\n    scrollViewRange.w = cols.sectionSumWidth(0, scrollViewRange.eci);\r\n    this.contentViewRange = scrollViewRange;\r\n    return this.contentViewRange.clone();\r\n  }\r\n\r\n  getScrollViewRange() {\r\n    const { scrollViewRange } = this;\r\n    if (scrollViewRange !== null) {\r\n      return scrollViewRange.clone();\r\n    }\r\n    const {\r\n      rows, cols, scroll, content,\r\n    } = this;\r\n    let [width, height] = [0, 0];\r\n    const { ri, ci } = scroll;\r\n    let [eri, eci] = [rows.len, cols.len];\r\n    for (let i = ri; i < rows.len; i += 1) {\r\n      height += rows.getHeight(i);\r\n      eri = i;\r\n      if (height > content.getHeight()) break;\r\n    }\r\n    for (let j = ci; j < cols.len; j += 1) {\r\n      width += cols.getWidth(j);\r\n      eci = j;\r\n      if (width > content.getWidth()) break;\r\n    }\r\n    this.scrollViewRange = new RectRange(ri, ci, eri, eci, width, height);\r\n    return this.scrollViewRange.clone();\r\n  }\r\n\r\n  getScrollViewXOffset() {\r\n    const { scrollViewXOffset } = this;\r\n    if (scrollViewXOffset !== -1) {\r\n      return -scrollViewXOffset;\r\n    }\r\n    const { scroll, cols } = this;\r\n    const { ci } = scroll;\r\n    this.scrollViewXOffset = cols.sectionSumWidth(0, ci - 1);\r\n    return -this.scrollViewXOffset;\r\n  }\r\n\r\n  clearViewRange() {\r\n    this.scrollViewRange = null;\r\n    this.contentViewRange = null;\r\n    this.scrollViewXOffset = -1;\r\n  }\r\n\r\n  render() {\r\n    const { settings, fixed } = this;\r\n    if (settings.tipsRenderTime) {\r\n      // eslint-disable-next-line no-console\r\n      console.time();\r\n    }\r\n    this.checkedEnableBorderDrawOptimization();\r\n    this.clear();\r\n    this.frozenRect.render();\r\n    // 渲染固定冻结的内容\r\n    if (fixed.fxLeft > -1 && fixed.fxTop > -1) {\r\n      this.frozenLeftTop.render();\r\n    }\r\n    if (fixed.fxTop > -1) {\r\n      this.fixedTop.render();\r\n    }\r\n    if (fixed.fxLeft > -1) {\r\n      this.fixedLeft.render();\r\n    }\r\n    // 表格内容渲染\r\n    this.content.render();\r\n    // 冻结索引渲染\r\n    if (fixed.fxTop > -1) {\r\n      this.frozenTopIndex.render();\r\n    }\r\n    if (fixed.fxLeft > -1) {\r\n      this.frozenLeftIndex.render();\r\n    }\r\n    // 固定索引渲染\r\n    this.fixedLeftIndex.render();\r\n    this.fixedTopIndex.render();\r\n    if (settings.tipsRenderTime) {\r\n      // eslint-disable-next-line no-console\r\n      console.log('渲染界面耗时:');\r\n      // eslint-disable-next-line no-console\r\n      console.timeEnd();\r\n    }\r\n  }\r\n\r\n  resize() {\r\n    const { draw } = this;\r\n    const [width, height] = [this.visualWidth(), this.visualHeight()];\r\n    draw.resize(width, height);\r\n    this.clearViewRange();\r\n    this.render();\r\n  }\r\n\r\n  bind() {\r\n    EventBind.bind(this, Constant.SYSTEM_EVENT_TYPE.MOUSE_MOVE, (e) => {\r\n      const { x, y } = this.computeEventXy(e);\r\n      const { ri, ci } = this.getRiCiByXy(x, y);\r\n      if (ri === -1 && ci === -1) {\r\n        this.mousePointType.set('cell', 'table-cell');\r\n      } else if (ri === -1) {\r\n        this.mousePointType.set('s-resize', 'table-ci');\r\n      } else if (ci === -1) {\r\n        this.mousePointType.set('e-resize', 'table-ri');\r\n      } else {\r\n        this.mousePointType.set('cell', 'table-cell');\r\n      }\r\n    });\r\n    EventBind.bind(this, Constant.SYSTEM_EVENT_TYPE.SCROLL, () => {\r\n      this.clearViewRange();\r\n      this.render();\r\n    });\r\n    EventBind.bind(this, Constant.TABLE_EVENT_TYPE.CHANGE_WIDTH, () => {\r\n      this.clearViewRange();\r\n      this.render();\r\n    });\r\n    EventBind.bind(this, Constant.TABLE_EVENT_TYPE.CHANGE_HEIGHT, () => {\r\n      this.clearViewRange();\r\n      this.render();\r\n    });\r\n  }\r\n\r\n  clear() {\r\n    const { draw, settings } = this;\r\n    const { width, height } = draw;\r\n    draw.attr({\r\n      fillStyle: settings.table.background,\r\n    });\r\n    draw.fillRect(0, 0, width, height);\r\n  }\r\n\r\n  getContentWidth() {\r\n    return this.content.getContentWidth();\r\n  }\r\n\r\n  getContentHeight() {\r\n    return this.content.getContentHeight();\r\n  }\r\n\r\n  getRiCiByXy(x, y) {\r\n    const {\r\n      settings, fixed, rows, cols,\r\n    } = this;\r\n    const { index } = settings;\r\n    const fixedHeight = this.fixedTop.getHeight();\r\n    const fixedWidth = this.fixedLeft.getWidth();\r\n\r\n    let [left, top] = [x, y];\r\n    let [ci, ri] = [-1, -1];\r\n\r\n    left -= index.width;\r\n    top -= index.height;\r\n\r\n    // left\r\n    if (left <= fixedWidth && x > index.width) {\r\n      let total = 0;\r\n      for (let i = 0; i <= fixed.fxLeft; i += 1) {\r\n        const width = cols.getWidth(i);\r\n        total += width;\r\n        ci = i;\r\n        if (total > left) break;\r\n      }\r\n    } else if (x > index.width) {\r\n      let total = fixedWidth;\r\n      const viewRange = this.getScrollViewRange();\r\n      for (let i = viewRange.sci; i <= viewRange.eci; i += 1) {\r\n        const width = cols.getWidth(i);\r\n        total += width;\r\n        ci = i;\r\n        if (total > left) break;\r\n      }\r\n      // console.log('ci >>', ci);\r\n    }\r\n\r\n    // top\r\n    if (top < fixedHeight && y > index.height) {\r\n      let total = 0;\r\n      for (let i = 0; i <= fixed.fxTop; i += 1) {\r\n        const height = rows.getHeight(i);\r\n        total += height;\r\n        ri = i;\r\n        if (total > top) break;\r\n      }\r\n    } else if (y > index.height) {\r\n      let total = fixedHeight;\r\n      const viewRange = this.getScrollViewRange();\r\n      for (let i = viewRange.sri; i <= viewRange.eri; i += 1) {\r\n        const height = rows.getHeight(i);\r\n        total += height;\r\n        ri = i;\r\n        if (total > top) break;\r\n      }\r\n      // console.log('ri >>', ri);\r\n    }\r\n\r\n    return {\r\n      ri, ci,\r\n    };\r\n  }\r\n\r\n  getFixedWidth() {\r\n    return this.fixedLeft.getWidth();\r\n  }\r\n\r\n  getFixedHeight() {\r\n    return this.fixedTop.getHeight();\r\n  }\r\n\r\n  visualHeight() {\r\n    return this.box().height;\r\n  }\r\n\r\n  visualWidth() {\r\n    return this.box().width;\r\n  }\r\n\r\n  getIndexWidth() {\r\n    const { settings } = this;\r\n    return settings.index.width;\r\n  }\r\n\r\n  getIndexHeight() {\r\n    const { settings } = this;\r\n    return settings.index.height;\r\n  }\r\n\r\n  setHeight(ri, height) {\r\n    const { rows } = this;\r\n    rows.setHeight(ri, floor(height));\r\n    this.trigger(Constant.TABLE_EVENT_TYPE.CHANGE_HEIGHT);\r\n  }\r\n\r\n  setWidth(ci, width) {\r\n    const { cols } = this;\r\n    cols.setWidth(ci, floor(width));\r\n    this.trigger(Constant.TABLE_EVENT_TYPE.CHANGE_WIDTH);\r\n  }\r\n\r\n  getCell(ri, ci) {\r\n    const { cells } = this;\r\n    return Utils.mergeDeep({}, cells.getCell(ri, ci));\r\n  }\r\n\r\n  setCell(ri, ci, cell) {\r\n    // console.log('setCell >> ri, ci >>', ri, ci);\r\n    const { cells, dataSnapshot } = this;\r\n    cells.setCellOrNew(ri, ci, cell);\r\n    dataSnapshot.snapshot(true);\r\n    this.render();\r\n  }\r\n\r\n  toString() {\r\n    const data = {\r\n      rows: {\r\n        data: this.rows.getData(),\r\n      },\r\n      cols: {\r\n        data: this.cols.getData(),\r\n      },\r\n      merges: {\r\n        data: this.merges.getData(),\r\n      },\r\n    };\r\n    return JSON.stringify(data);\r\n  }\r\n}\r\n\r\nexport {\r\n  Table,\r\n};\r\n","import { Widget } from '../../lib/Widget';\r\nimport { cssPrefix } from '../../config';\r\nimport { Table } from '../table/Table';\r\nimport { EventBind } from '../../utils/EventBind';\r\nimport { Constant } from '../../utils/Constant';\r\n\r\nclass Sheet extends Widget {\r\n  constructor(options = {\r\n    tableConfig: {\r\n      data: [],\r\n      merges: [],\r\n    },\r\n  }) {\r\n    super(`${cssPrefix}-sheet`);\r\n    this.options = options;\r\n    // console.log('this.options.tableConfig >>>', this.options.tableConfig);\r\n    this.table = new Table(this.options.tableConfig);\r\n    this.children(this.table);\r\n    this.bind();\r\n  }\r\n\r\n  init() {\r\n    this.table.init();\r\n  }\r\n\r\n  bind() {\r\n    EventBind.bind(this.table, Constant.TABLE_EVENT_TYPE.CHANGE_WIDTH, (e) => {\r\n      // console.log('change width');\r\n      this.trigger(Constant.TABLE_EVENT_TYPE.CHANGE_WIDTH, this);\r\n      e.stopPropagation();\r\n    });\r\n    EventBind.bind(this.table, Constant.TABLE_EVENT_TYPE.CHANGE_HEIGHT, (e) => {\r\n      this.trigger(Constant.TABLE_EVENT_TYPE.CHANGE_HEIGHT, this);\r\n      e.stopPropagation();\r\n    });\r\n    EventBind.bind(this.table, Constant.TABLE_EVENT_TYPE.SELECT_CHANGE, (e) => {\r\n      this.trigger(Constant.TABLE_EVENT_TYPE.SELECT_CHANGE, this);\r\n      e.stopPropagation();\r\n    });\r\n    EventBind.bind(this.table, Constant.TABLE_EVENT_TYPE.SELECT_DOWN, (e) => {\r\n      this.trigger(Constant.TABLE_EVENT_TYPE.SELECT_DOWN, this);\r\n      e.stopPropagation();\r\n    });\r\n  }\r\n}\r\n\r\nexport { Sheet };\r\n","import { Widget } from '../../lib/Widget';\r\nimport { cssPrefix } from '../../config';\r\nimport { Sheet } from './Sheet';\r\nimport { EventBind } from '../../utils/EventBind';\r\nimport { Constant } from '../../utils/Constant';\r\n\r\nclass SheetView extends Widget {\r\n  constructor() {\r\n    super(`${cssPrefix}-sheet-view`);\r\n    this.sheetList = [];\r\n    this.activeIndex = -1;\r\n  }\r\n\r\n  add(sheet = new Sheet()) {\r\n    this.sheetList.push(sheet);\r\n    this.children(sheet);\r\n    sheet.init();\r\n    sheet.hide();\r\n    // console.log(sheet);\r\n    EventBind.bind(sheet, Constant.TABLE_EVENT_TYPE.CHANGE_WIDTH, (e) => {\r\n      // console.log('e>>>', e);\r\n      this.trigger(Constant.TABLE_EVENT_TYPE.CHANGE_WIDTH);\r\n      e.stopPropagation();\r\n    });\r\n    EventBind.bind(sheet, Constant.TABLE_EVENT_TYPE.CHANGE_HEIGHT, (e) => {\r\n      // console.log('e>>>', e);\r\n      this.trigger(Constant.TABLE_EVENT_TYPE.CHANGE_HEIGHT);\r\n      e.stopPropagation();\r\n    });\r\n    EventBind.bind(sheet, Constant.TABLE_EVENT_TYPE.DATA_CHANGE, (e) => {\r\n      this.trigger(Constant.TABLE_EVENT_TYPE.DATA_CHANGE);\r\n      e.stopPropagation();\r\n    });\r\n    EventBind.bind(sheet, Constant.TABLE_EVENT_TYPE.SELECT_CHANGE, (e) => {\r\n      this.trigger(Constant.TABLE_EVENT_TYPE.SELECT_CHANGE);\r\n      e.stopPropagation();\r\n    });\r\n    EventBind.bind(sheet, Constant.TABLE_EVENT_TYPE.SELECT_DOWN, (e) => {\r\n      this.trigger(Constant.TABLE_EVENT_TYPE.SELECT_DOWN, this);\r\n      e.stopPropagation();\r\n    });\r\n    return this.sheetList.length - 1;\r\n  }\r\n\r\n  getActiveSheet() {\r\n    return this.sheetList[this.activeIndex];\r\n  }\r\n\r\n  setActiveSheet(index) {\r\n    const { sheetList } = this;\r\n    if (sheetList[index]) {\r\n      this.activeIndex = index;\r\n      return this.setActive(sheetList[index]);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  setActive(sheet) {\r\n    sheet.show();\r\n    sheet.sibling().forEach((item) => {\r\n      item.hide();\r\n    });\r\n    return sheet;\r\n  }\r\n}\r\n\r\nexport { SheetView };\r\n","import { Widget } from '../../lib/Widget';\r\nimport { cssPrefix } from '../../config';\r\n\r\nlet number = 0;\r\n\r\nclass Tab extends Widget {\r\n  constructor(name = `Sheet${number += 1}`) {\r\n    super(`${cssPrefix}-sheet-tab`);\r\n    this.setName(name);\r\n  }\r\n\r\n  setName(name) {\r\n    this.name = name;\r\n    this.text(this.name);\r\n  }\r\n}\r\n\r\nexport { Tab };\r\n","/* global window document */\r\n\r\nimport { Widget } from '../../lib/Widget';\r\nimport { cssPrefix } from '../../config';\r\nimport { VerticalLayer } from '../../lib/layer/VerticalLayer';\r\nimport { HorizontalLayer } from '../../lib/layer/HorizontalLayer';\r\nimport { VerticalLayerElement } from '../../lib/layer/VerticalLayerElement';\r\nimport { ScrollBarX } from '../../component/scrollbar/ScrollBarX';\r\nimport { ScrollBarY } from '../../component/scrollbar/ScrollBarY';\r\nimport { HorizontalLayerElement } from '../../lib/layer/HorizontalLayerElement';\r\nimport { VerticalCenterElement } from '../../lib/layer/center/VerticalCenterElement';\r\nimport { VerticalCenter } from '../../lib/layer/center/VerticalCenter';\r\nimport { Constant } from '../../utils/Constant';\r\nimport { SheetView } from './SheetView';\r\nimport { TabView } from './TabView';\r\nimport { Utils } from '../../utils/Utils';\r\nimport { Sheet } from './Sheet';\r\nimport { Tab } from './Tab';\r\nimport { EventBind } from '../../utils/EventBind';\r\nimport { h } from '../../lib/Element';\r\n\r\n// sheet表和垂直滚动条\r\nlet sheetViewLayerHorizontalElement;\r\nlet scrollBarYLayerHorizontalElement;\r\nlet horizontalLayer1;\r\n\r\n// sheetTab选修卡和水平滚动条\r\nlet scrollBarXLayerVerticalCenterElement;\r\nlet scrollBarXVerticalCenter;\r\nlet scrollBarXLayerHorizontalElement;\r\nlet sheetSwitchTabLayerHorizontalElement;\r\nlet horizontalLayer2;\r\n\r\n// 根布局\r\nlet horizontalLayer1LayerVerticalElement;\r\nlet horizontalLayer2Layer1LayerVerticalElement;\r\nlet layerVerticalLayer;\r\n\r\nclass WorkBody extends Widget {\r\n  constructor(work, options = { sheets: [] }) {\r\n    super(`${cssPrefix}-work-body`);\r\n    this.work = work;\r\n    this.workConfig = options;\r\n    this.sheets = this.workConfig.sheets;\r\n    this.tabAndSheet = [];\r\n    // 版本标识\r\n    this.poweredBy = h('div', `${cssPrefix}-powered-by-tips`);\r\n    this.poweredBy.text(' X-Sheet 1.0.0-development ');\r\n    this.children(this.poweredBy);\r\n    // 组件\r\n    this.sheetView = new SheetView();\r\n    this.tabView = new TabView({\r\n      onAdd: (tab, tabIndex) => {\r\n        const { sheetView } = this;\r\n        const sheet = new Sheet();\r\n        const sheetIndex = sheetView.add(sheet);\r\n        this.tabAndSheet.push({\r\n          tab,\r\n          sheet,\r\n          tabIndex,\r\n          sheetIndex,\r\n        });\r\n      },\r\n      onSwitch: (tab) => {\r\n        this.setActiveTab(tab);\r\n      },\r\n    });\r\n    this.scrollBarX = new ScrollBarX({\r\n      scroll: (move) => {\r\n        const sheet = this.sheetView.getActiveSheet();\r\n        sheet.table.scrollX(move);\r\n      },\r\n    });\r\n    this.scrollBarY = new ScrollBarY({\r\n      scroll: (move) => {\r\n        const sheet = this.sheetView.getActiveSheet();\r\n        sheet.table.scrollY(move);\r\n      },\r\n    });\r\n    // sheet表和垂直滚动条\r\n    sheetViewLayerHorizontalElement = new HorizontalLayerElement(this.sheetView, {\r\n      style: {\r\n        flexGrow: 1,\r\n      },\r\n    });\r\n    scrollBarYLayerHorizontalElement = new HorizontalLayerElement(this.scrollBarY, {\r\n      style: {\r\n        overflow: 'inherit',\r\n      },\r\n    });\r\n    horizontalLayer1 = new HorizontalLayer({\r\n      layerElements: [sheetViewLayerHorizontalElement, scrollBarYLayerHorizontalElement],\r\n    });\r\n    // sheetTab选修卡和水平滚动条\r\n    scrollBarXLayerVerticalCenterElement = new VerticalCenterElement(this.scrollBarX);\r\n    scrollBarXVerticalCenter = new VerticalCenter({\r\n      centerElements: [scrollBarXLayerVerticalCenterElement],\r\n    });\r\n    scrollBarXLayerHorizontalElement = new HorizontalLayerElement(scrollBarXVerticalCenter, {\r\n      style: {\r\n        flexGrow: 2,\r\n      },\r\n    });\r\n    sheetSwitchTabLayerHorizontalElement = new HorizontalLayerElement(this.tabView, {\r\n      style: {\r\n        flexGrow: 3,\r\n      },\r\n    });\r\n    horizontalLayer2 = new HorizontalLayer({\r\n      layerElements: [sheetSwitchTabLayerHorizontalElement, scrollBarXLayerHorizontalElement],\r\n    });\r\n    // 根布局\r\n    horizontalLayer1LayerVerticalElement = new VerticalLayerElement(horizontalLayer1, {\r\n      style: {\r\n        flexGrow: 1,\r\n      },\r\n    });\r\n    horizontalLayer2Layer1LayerVerticalElement = new VerticalLayerElement(horizontalLayer2);\r\n    layerVerticalLayer = new VerticalLayer({\r\n      layerElements: [horizontalLayer1LayerVerticalElement,\r\n        horizontalLayer2Layer1LayerVerticalElement],\r\n    });\r\n    // 添加布局\r\n    this.children(layerVerticalLayer);\r\n    this.bind();\r\n  }\r\n\r\n  init() {\r\n    this.sheetView.init();\r\n    this.tabView.init();\r\n    this.scrollBarX.init();\r\n    this.scrollBarY.init();\r\n    this.initSheet();\r\n    this.initScroll();\r\n  }\r\n\r\n  initScroll() {\r\n    const sheet = this.sheetView.getActiveSheet();\r\n    if (Utils.isUnDef(sheet)) return;\r\n    const { table } = sheet;\r\n    const { content, scroll } = table;\r\n    scrollBarXLayerHorizontalElement.display(content.getWidth() < content.getContentWidth());\r\n    this.scrollBarY.setSize(content.getHeight(), content.getContentHeight());\r\n    this.scrollBarX.setSize(content.getWidth(), content.getContentWidth());\r\n    this.scrollBarY.scrollMove(scroll.y);\r\n    this.scrollBarX.scrollMove(scroll.x);\r\n  }\r\n\r\n  initSheet() {\r\n    const { sheetView, tabView } = this;\r\n    // eslint-disable-next-line no-restricted-syntax\r\n    for (const item of this.sheets) {\r\n      // console.log(item);\r\n      // eslint-disable-next-line no-restricted-syntax\r\n      const { name } = item;\r\n      const sheet = new Sheet(item);\r\n      const tab = new Tab(name);\r\n      const sheetIndex = sheetView.add(sheet);\r\n      const tabIndex = tabView.add(tab);\r\n      this.tabAndSheet.push({\r\n        tab,\r\n        sheet,\r\n        tabIndex,\r\n        sheetIndex,\r\n      });\r\n    }\r\n    const first = this.tabAndSheet[0];\r\n    if (first) {\r\n      this.setActiveTabIndex(first.tabIndex);\r\n      this.setActiveSheetIndex(first.sheetIndex);\r\n    }\r\n  }\r\n\r\n  setActiveSheetIndex(index) {\r\n    const { sheetView } = this;\r\n    sheetView.setActiveSheet(index);\r\n    const sheet = sheetView.getActiveSheet();\r\n    const { table } = sheet;\r\n    table.resize();\r\n    this.initScroll();\r\n  }\r\n\r\n  setActiveTabIndex(index) {\r\n    const { tabView } = this;\r\n    tabView.setActiveTab(index);\r\n  }\r\n\r\n  setActiveTab(tab) {\r\n    this.tabAndSheet.forEach((item) => {\r\n      if (item.tab === tab) {\r\n        this.setActiveTabIndex(item.tabIndex);\r\n        this.setActiveSheetIndex(item.sheetIndex);\r\n        this.trigger(Constant.WORK_BODY_TYPE.CHANGE_ACTIVE);\r\n      }\r\n    });\r\n  }\r\n\r\n  bind() {\r\n    this.on(Constant.SYSTEM_EVENT_TYPE.MOUSE_WHEEL, (evt) => {\r\n      const sheet = this.sheetView.getActiveSheet();\r\n      if (Utils.isUnDef(sheet)) return;\r\n      const { table } = sheet;\r\n      const { rows, scroll } = table;\r\n      const { scrollTo } = this.scrollBarY;\r\n      let { deltaY } = evt;\r\n      if (evt.detail) deltaY = evt.detail * 40;\r\n      if (deltaY > 0) {\r\n        // down\r\n        this.scrollBarY.scrollMove(scrollTo + rows.getHeight(scroll.ri));\r\n      } else {\r\n        // up\r\n        this.scrollBarY.scrollMove(scrollTo - rows.getHeight(scroll.ri - 1));\r\n      }\r\n      if (scroll.blockTop < scroll.maxBlockTop && scroll.blockTop > 0) {\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n      }\r\n    });\r\n    EventBind.bind(window, Constant.SYSTEM_EVENT_TYPE.RESIZE, () => {\r\n      const { sheetView } = this;\r\n      const sheet = sheetView.getActiveSheet();\r\n      const { table } = sheet;\r\n      table.resize();\r\n      this.initScroll();\r\n    });\r\n    EventBind.bind(document, Constant.SYSTEM_EVENT_TYPE.VISIBILITY_CHANGE, () => {\r\n      const { sheetView } = this;\r\n      const sheet = sheetView.getActiveSheet();\r\n      const { table } = sheet;\r\n      if (!document.hidden) {\r\n        table.resize();\r\n      }\r\n    });\r\n    EventBind.bind(this.sheetView, Constant.TABLE_EVENT_TYPE.CHANGE_HEIGHT, () => {\r\n      // console.log('change height');\r\n      this.initScroll();\r\n    });\r\n    EventBind.bind(this.sheetView, Constant.TABLE_EVENT_TYPE.CHANGE_WIDTH, () => {\r\n      // console.log('change width');\r\n      this.initScroll();\r\n    });\r\n    EventBind.bind(this.sheetView, Constant.TABLE_EVENT_TYPE.DATA_CHANGE, (e) => {\r\n      this.trigger(Constant.TABLE_EVENT_TYPE.DATA_CHANGE);\r\n      e.stopPropagation();\r\n    });\r\n    EventBind.bind(this.sheetView, Constant.TABLE_EVENT_TYPE.SELECT_CHANGE, (e) => {\r\n      this.trigger(Constant.TABLE_EVENT_TYPE.SELECT_CHANGE);\r\n      e.stopPropagation();\r\n    });\r\n    EventBind.bind(this.sheetView, Constant.TABLE_EVENT_TYPE.SELECT_DOWN, (e) => {\r\n      this.trigger(Constant.TABLE_EVENT_TYPE.SELECT_DOWN, this);\r\n      e.stopPropagation();\r\n    });\r\n  }\r\n}\r\n\r\nexport { WorkBody };\r\n","import { Widget } from '../../lib/Widget';\r\nimport { cssPrefix } from '../../config';\r\nimport { h } from '../../lib/Element';\r\nimport { Utils } from '../../utils/Utils';\r\nimport { Tab } from './Tab';\r\n\r\nclass TabView extends Widget {\r\n  constructor(options) {\r\n    super(`${cssPrefix}-sheet-switch-tab`);\r\n    this.last = h('div', `${cssPrefix}-switch-tab-last-btn`);\r\n    this.next = h('div', `${cssPrefix}-switch-tab-next-btn`);\r\n    this.content = h('div', `${cssPrefix}-sheet-tab-content`);\r\n    this.tabs = h('div', `${cssPrefix}-sheet-tab-tabs`);\r\n    this.plus = h('div', `${cssPrefix}-sheet-tab-plus`);\r\n    this.content.children(this.tabs);\r\n    this.children(...[\r\n      this.last,\r\n      this.next,\r\n      this.content,\r\n      this.plus,\r\n    ]);\r\n    this.optiions = Utils.mergeDeep({\r\n      onAdd(tab) { return tab; },\r\n      onSwitch(tab) { return tab; },\r\n    }, options);\r\n    this.number = 0;\r\n    this.left = null;\r\n    this.tabList = [];\r\n  }\r\n\r\n  setActiveTab(index) {\r\n    const { tabList } = this;\r\n    if (tabList[index]) {\r\n      this.setActive(tabList[index]);\r\n      return tabList[index];\r\n    }\r\n    return null;\r\n  }\r\n\r\n  setActive(tab) {\r\n    tab.addClass('active');\r\n    tab.sibling().forEach((item) => {\r\n      item.removeClass('active');\r\n    });\r\n  }\r\n\r\n  init() {\r\n    this.bind();\r\n  }\r\n\r\n  bind() {\r\n    this.plus.on('click', () => {\r\n      const tab = new Tab();\r\n      const index = this.addCurrent(tab);\r\n      this.optiions.onAdd(tab, index);\r\n    });\r\n    this.last.on('click', () => {\r\n      let left = this.left || 0;\r\n      left += 30;\r\n      if (left > 0) left = 0;\r\n      this.left = left;\r\n      this.tabs.css('marginLeft', `${this.left}px`);\r\n    });\r\n    this.next.on('click', () => {\r\n      const maxWidth = this.content.offset().width;\r\n      const current = this.tabs.offset().width;\r\n      const min = -(current - maxWidth);\r\n      let left = this.left || 0;\r\n      left -= 30;\r\n      if (left < min) left = min;\r\n      this.left = left;\r\n      this.tabs.css('marginLeft', `${this.left}px`);\r\n    });\r\n  }\r\n\r\n  add(tab) {\r\n    this.tabList.push(tab);\r\n    this.tabs.children(tab);\r\n    tab.on('click', () => {\r\n      this.setActive(tab);\r\n      this.optiions.onSwitch(tab);\r\n    });\r\n    return this.tabList.length - 1;\r\n  }\r\n\r\n  addCurrent(tab) {\r\n    const result = this.add(tab);\r\n    const maxWidth = this.content.offset().width;\r\n    const current = this.tabs.offset().width;\r\n    if (current > maxWidth) {\r\n      this.left = -(current - maxWidth);\r\n      this.tabs.css('marginLeft', `${this.left}px`);\r\n    }\r\n    return result;\r\n  }\r\n}\r\n\r\nexport { TabView };\r\n","import { Widget } from '../../lib/Widget';\r\nimport { cssPrefix } from '../../config';\r\nimport { h } from '../../lib/Element';\r\n\r\nclass BottomMenu extends Widget {\r\n  constructor() {\r\n    super(`${cssPrefix}-bottom-menu`);\r\n    this.sum = h('div', `${cssPrefix}-bottom-sum`);\r\n    this.avg = h('div', `${cssPrefix}-bottom-avg`);\r\n    this.number = h('div', `${cssPrefix}-bottom-number`);\r\n    this.children(this.sum);\r\n    this.children(this.avg);\r\n    this.children(this.number);\r\n  }\r\n\r\n  setSum(val) {\r\n    this.sum.text(`求和: ${val}`);\r\n  }\r\n\r\n  setAvg(val) {\r\n    this.avg.text(`平均数: ${val}`);\r\n  }\r\n\r\n  setNumber(val) {\r\n    this.number.text(`数量: ${val}`);\r\n  }\r\n}\r\n\r\nexport { BottomMenu };\r\n","import { Widget } from '../../lib/Widget';\r\nimport { cssPrefix } from '../../config';\r\nimport { VerticalLayer } from '../../lib/layer/VerticalLayer';\r\nimport { VerticalLayerElement } from '../../lib/layer/VerticalLayerElement';\r\nimport { WorkTop } from './WorkTop';\r\nimport { WorkBody } from './WorkBody';\r\nimport { WorkBottom } from './WorkBottom';\r\n\r\nlet topLayerVerticalElement;\r\nlet bodyLayerVerticalElement;\r\nlet bottomLayerVerticalElement;\r\nlet verticalLayer;\r\n\r\nclass Work extends Widget {\r\n  constructor(options = { body: {} }) {\r\n    super(`${cssPrefix}-work`);\r\n    this.options = options.workConfig;\r\n    // 组件\r\n    this.body = new WorkBody(this, this.options.body);\r\n    this.bottom = new WorkBottom(this);\r\n    this.top = new WorkTop(this);\r\n    // 布局\r\n    topLayerVerticalElement = new VerticalLayerElement(this.top);\r\n    bodyLayerVerticalElement = new VerticalLayerElement(this.body, {\r\n      style: {\r\n        flexGrow: 1,\r\n      },\r\n    });\r\n    bottomLayerVerticalElement = new VerticalLayerElement(this.bottom);\r\n    verticalLayer = new VerticalLayer({\r\n      layerElements: [topLayerVerticalElement,\r\n        bodyLayerVerticalElement, bottomLayerVerticalElement],\r\n    });\r\n    this.children(verticalLayer);\r\n    this.bottom.bottomMenu.setSum(0);\r\n    this.bottom.bottomMenu.setAvg(0);\r\n    this.bottom.bottomMenu.setNumber(0);\r\n  }\r\n\r\n  init() {\r\n    this.body.init();\r\n    this.top.init();\r\n    this.bottom.init();\r\n  }\r\n}\r\n\r\nexport { Work };\r\n","import { Widget } from '../../lib/Widget';\r\nimport { cssPrefix } from '../../config';\r\nimport { BottomMenu } from './BottomMenu';\r\n\r\nclass WorkBottom extends Widget {\r\n  constructor(work) {\r\n    super(`${cssPrefix}-work-bottom`);\r\n    this.work = work;\r\n    this.bottomMenu = new BottomMenu();\r\n    this.children(this.bottomMenu);\r\n  }\r\n}\r\n\r\nexport { WorkBottom };\r\n","/* global window, document */\r\n\r\nimport { cssPrefix } from './config';\r\nimport { h } from './lib/Element';\r\nimport { Work } from './core/work/Work';\r\nimport { Widget } from './lib/Widget';\r\nimport './base.less';\r\nimport './index.less';\r\n\r\nclass XSheet extends Widget {\r\n\r\n  constructor(selectors, options = {\r\n    workConfig: {\r\n      body: {\r\n        sheets: [{\r\n          tableConfig: {},\r\n        }],\r\n      },\r\n    },\r\n  }) {\r\n    super(`${cssPrefix}`);\r\n    let root = selectors;\r\n    if (typeof selectors === 'string') {\r\n      root = document.querySelector(selectors);\r\n    }\r\n    root = h(root);\r\n    root.children(this);\r\n    this.work = new Work(options);\r\n    this.children(this.work);\r\n    this.work.init();\r\n  }\r\n}\r\n\r\nXSheet.version = '1.0.0-alpha';\r\n\r\nif (window) {\r\n  window.XSheet = XSheet;\r\n}\r\n\r\nexport { XSheet };\r\n"],"sourceRoot":""}